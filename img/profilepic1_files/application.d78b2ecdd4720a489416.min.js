(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[181],Array(33).concat([function(e,t,a){"use strict";a.d(t,"d",function(){return l});a.d(t,"c",function(){return o});a.d(t,"b",function(){return s});a.d(t,"e",function(){return r});a.d(t,"a",function(){return i});a.d(t,"f",function(){return n});var r={CANADA:"Canada",JAPAN:"Japan",RUSSIAN_FEDERATION:"Russian Federation",UNITED_KINGDOM:"United Kingdom",UNITED_KINGDOM_UK:"United Kingdom (UK)",UNITED_STATES:"United States"};var n={COMPANY_NAME_IS_REQUIRED:"company_name_is_required",STREET_IS_REQUIRED:"street_is_required",CITY_IS_REQUIRED:"city_is_required",POSTAL_CODE_IS_REQUIRED:"postal_code_is_required",ZIP_CODE_IS_REQUIRED:"zip_code_is_required",REGION_IS_REQUIRED:"region_is_required",STATE_IS_REQUIRED:"state_is_required",COUNTRY_IS_REQUIRED:"country_is_required",VAT_ID_IS_REQUIRED:"vat_id_is_required",TIN_ID_IS_REQUIRED:"tin_id_is_required",IS_BUSINESS_PURCHASE_IS_REQUIRED:"is_business_purchase_is_required",STREET_INVALID_CHARACTERS:"street_invalid_characters",CITY_INVALID_CHARACTERS:"city_invalid_characters",REGION_INVALID_CHARACTERS:"region_invalid_characters",STATE_INVALID_CHARACTERS:"state_invalid_characters",POSTAL_CODE_INVALID_CHARACTERS:"postal_code_invalid_characters",ZIP_CODE_INVALID_CHARACTERS:"zip_code_invalid_characters",VAT_ID_INVALID_CHARACTERS:"vat_id_invalid_characters",ABN_ID_INVALID_CHARACTERS:"abn_id_invalid_characters",US_ZIP_CODE_INVALID_FORMAT:"us_zip_code_invalid_format",CANADA_POSTAL_CODE_INVALID_FORMAT:"canada_zip_code_invalid_format",ZIP_CODE_INVALID_API_ERROR:"zipcode_invalid_api_error",VAT_ID_INVALID_API_ERROR:"vat_id_invalid_api_error",VAT_ID_INPUT_ERROR:"vat_input_error",VAT_ID_INVALID_FORMAT:"vat_id_invalid_format",API_ERROR:"api_error",ABN_ID_INVALID_LENGTH:"abn_id_invalid_length",QST_ID_INVALID_FORMAT:"qst_id_invalid_format",TIN_ID_INVALID_LENGTH:"tin_id_invalid_length",ADDRESS_INPUT_ERROR:"address_input_error",ERROR_UPDATING_BILLING_ADDRESS:"error_updating_billing_address",NO_PERMS:"no_perms",INVALID_AUTH:"invalid_auth",DEFAULT_ERROR:"default_error"};var i={ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX:/^[a-zA-Z\xc0-\xff0-9-'-\/.\s]+$/i,ALPHA_NUMERIC_WITH_DASH_REGEX:/^[A-Z0-9-\-\s]+$/i,ABN_ID_REGEX:/^(\d *?){11}$/i,QST_ID_TQ_REGEX:/^([0-9]){10}TQ([0-9]){4}$/i,QST_ID_NINE_NUM_REGEX:/^([0-9]){9}$/i,QST_ID_TEN_NUM_REGEX:/^([0-9]){10}$/i,QST_ID_NR_REGEX:/^NR([0-9]){8}$/i,TIN_ID_REGEX:/^(?=(?:.{10}|.{12})$)[0-9]*$/i,US_POSTAL_CODE_FORMAT_REGEX:/(^\d{5}$)|(^\d{5}-{0,1}\d{4}$)/i,CANADA_POSTAL_CODE_FORMAT_REGEX:/^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[ABCEGHJKLMNPRSTVWXYZ]{1} *\d{1}[ABCEGHJKLMNPRSTVWXYZ]{1}\d{1}$/i};var s={COMPANY_NAME:"companyName",STREET:"street",SUITE:"suite",CITY:"city",REGION:"region",POSTAL_CODE:"postalCode",COUNTRY:"country",IS_BUSINESS_PURCHASE:"isBusinessPurchase",IS_VAT_AVAILABLE:"isVatIdAvailable",VAT_ID:"vatId",ABN_ID:"abnId",QST_ID:"qstId"};var o={COMPANY_NAME:"",STREET:"",SUITE:"",CITY:"",REGION:"",POSTAL_CODE:"",COUNTRY:"",IS_BUSINESS_PURCHASE:true,IS_VAT_AVAILABLE:true,VAT_ID:"",ABN_ID:"",QST_ID:""};var l={COMPANY_NAME:83,STREET:83,SUITE:83,CITY:150,REGION:100,POSTAL_CODE:15,VAT_ID:15,ABN_ID:14,TIN_ID:12,QST_ID:16}},,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(43);var n=a(2);var i=a(0);var s=a(12);var o=a(15);var l=a(23);var c=a(52);var u=a(20);var d=Object(u["b"])("TS.ms.msg_handlers",function(){return{}});var p=d;var h=a(4);var v=a(870);var m=a(49);var f=a(227);var b=a(170);var g=a(65);var _=a(24);var y=a(19);var O=a(27);var k=a(241);var E=a(113);var C=a(253);var j=a(11);var w=a(134);var S=a(282);var I=a(41);var T=void 0;var A=function(){var e=Object(r["coroutine"])(regeneratorRuntime.mark(function e(t,a,i){var s;return regeneratorRuntime.wrap(function e(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return Object(r["resolve"])(Object(O["a"])(a,P({fileIds:t,reason:i})));case 2:s=o.sent;return o.abrupt("return",Object(n["keyBy"])(s,"id"));case 4:case"end":return o.stop()}},e,this)}));return function t(a,r,n){return e.apply(this,arguments)}}();var N=pe;var P=C["f"];var R=y["a"];var M=y["d"];var D=S["e"];var x=_["j"];var F=v["a"];var L=v["b"];var B=S["m"];var U=k["getOrFetchMemberCounts"];var q=100;var G=["star_added","pin_added"];var W=["channel_joined","group_joined","mpim_joined","dnd_updated","dnd_updated_user","manual_presence_change","member_left_channel","presence_change","status_change","subteam_created","subteam_updated","user_removed_from_team","user_change","channel_created","channel_deleted"];function H(e){return"message"===e}var V=function e(t,a){var r=$(a)||{},n=r.objectWithFile;if(!n)return;n.file=t;a._file_attached=true};var K=function e(t,a){if(!a)return true;if(L()&&F(a))return false;if(!Y(t))return false;return!D(a)};function z(e,t){var a=R(t());if(!a)return true;return!Object(j["isIm"])(a)&&!Object(j["isMpim"])(a)&&e!==a.id}function Y(e){var t=e.type;if(G.indexOf(t)>=0)return false;return true}function Q(e){var t=e.type;return W.indexOf(t)>=0}var J=function e(t){var a=[];N(function(e){if(Y(e))return;var t=$(e)||{},r=t.fileId;r&&a.indexOf(r)<0&&!K(e,r)&&a.push(r)},t);return a};var Z=function(){var e=Object(r["coroutine"])(regeneratorRuntime.mark(function e(t,a,n){var i;return regeneratorRuntime.wrap(function e(s){while(1)switch(s.prev=s.next){case 0:s.next=2;return Object(r["resolve"])(A(t,a,n));case 2:i=s.sent;N(function(e){if(Y(e))return;var t=$(e)||{},a=t.fileId;a&&i[a]&&!K(e,a)&&V(i[a],e)},a);case 4:case"end":return s.stop()}},e,T)}));return function t(a,r,n){return e.apply(this,arguments)}}();var X=function e(t,a){var r=$(t)||{},n=r.objectWithFile,i=r.fileId;n&&n.file&&B(n.file);if(!i)return Promise.resolve();var s=a();if(Y(t))return Promise.resolve();if(t._file_attached)return Promise.resolve();if(K(t,i)){t._should_dispatch=false;return Promise.resolve()}var o=Object(l["c"])(s);var c=J(o,a).slice(0,q);if(!c.length)return Promise.resolve();var u=t.subtype?"preprocess-rtm-message/ensureFilesInMessageArePresent for type: "+t.type+" and subtype: "+t.subtype:"preprocess-rtm-message/ensureFilesInMessageArePresent for type: "+t.type;return Z(c,o,u).catch(function(){t._should_dispatch=false})};function $(e){if(e.file&&e.file.id)return{objectWithFile:e,fileId:e.file.id};if(e.file_id)return{objectWithFile:e,fileId:e.file_id};if(e.item){if(e.item.file&&e.item.file.id)return{objectWithFile:e.item,fileId:e.item.file.id};if(e.item.file_id)return{objectWithFile:e.item,fileId:e.item.file_id}}return null}function ee(e,t,a){if(!H(e.type)||!e.text)return Promise.resolve();var r=I["atHereRegExp"].test(e.text)||I["atChannelRegExp"].test(e.text)||I["atEveryoneRegExp"].test(e.text)||I["atGroupRegExp"].test(e.text);if(!r)return Promise.resolve();var i=false;var s=M(a(),e.channel,i);if(!s)return Promise.resolve();var o=t(U({channelId:s.id}));return o.promise?o.promise.catch(n["noop"]):Promise.resolve()}var te=function(){var e=Object(r["coroutine"])(regeneratorRuntime.mark(function e(t,a){var i,s,o,c,u;return regeneratorRuntime.wrap(function e(d){while(1)switch(d.prev=d.next){case 0:if(!(false===t._should_dispatch)){d.next=2;break}return d.abrupt("return");case 2:i=a();s=function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return O["a"].apply(void 0,[Object(l["c"])(i)].concat(a))};o=t.subtype?"preprocess-rtm-message/ensureModelObsInMessageArePresent for type: "+t.type+" and subtype: "+t.subtype:"preprocess-rtm-message/ensureModelObsInMessageArePresent for type: "+t.type;c=H(t.type)&&Object(n["isString"])(t.channel)&&Object(w["a"])(t.channel)&&!Object(y["t"])(i,t.channel);u=c?s(Object(E["d"])({ids:[t.channel],reason:o})):Promise.resolve();d.next=9;return Object(r["resolve"])(Promise.all([u,ee(t,s,a)]).catch(n["noop"]));case 9:case"end":return d.stop()}},e,T)}));return function t(a,r){return e.apply(this,arguments)}}();var ae=function(){var e=Object(r["coroutine"])(regeneratorRuntime.mark(function e(t,a){var n;return regeneratorRuntime.wrap(function e(i){while(1)switch(i.prev=i.next){case 0:if(!Q(t)){i.next=2;break}return i.abrupt("return");case 2:n=a();if(!("user_typing"===t.type&&!x(n,t.user)&&z(t.channel,a))){i.next=6;break}t._should_dispatch=false;return i.abrupt("return");case 6:i.prev=6;i.next=9;return Object(r["resolve"])(Promise.all([X(t,a),te(t,a)]));case 9:i.next=13;break;case 11:i.prev=11;i.t0=i["catch"](6);case 13:case"end":return i.stop()}},e,T,[[6,11]])}));return function t(a,r){return e.apply(this,arguments)}}();var re=function(){var e=Object(r["coroutine"])(regeneratorRuntime.mark(function e(t,a){var n;return regeneratorRuntime.wrap(function e(i){while(1)switch(i.prev=i.next){case 0:i.next=2;return Object(r["resolve"])(ae(t,a));case 2:n=false!==t._should_dispatch;delete t._should_dispatch;return i.abrupt("return",n);case 5:case"end":return i.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}();var ne={FETCH_MISSING_FILE_TYPES:G,NO_FETCH_MISSING_OBJECT_TYPES:W,canIgnoreUserTypingMessage:z,getFileInfoFromMessage:$,maybeEnsureMemberCount:ee,canSkipObjectFetchForMessage:Q};Object.defineProperty(ne,"applyFunctionToPendingMessagesForTeam",{get:function e(){return N},set:function e(t){N=t}});Object.defineProperty(ne,"attachFileObjectToMessage",{get:function e(){return V},set:function e(t){V=t}});Object.defineProperty(ne,"canIgnoreFileMessage",{get:function e(){return K},set:function e(t){K=t}});Object.defineProperty(ne,"ensureDataIsPresent",{get:function e(){return ae},set:function e(t){ae=t}});Object.defineProperty(ne,"ensureFilesInMessageArePresent",{get:function e(){return X},set:function e(t){X=t}});Object.defineProperty(ne,"ensureModelObsInMessageArePresent",{get:function e(){return te},set:function e(t){te=t}});Object.defineProperty(ne,"fetchAndAttachFilesForMessagesInQueue",{get:function e(){return Z},set:function e(t){Z=t}});Object.defineProperty(ne,"fetchFilesById",{get:function e(){return P},set:function e(t){P=t}});Object.defineProperty(ne,"getActiveChannel",{get:function e(){return R},set:function e(t){R=t}});Object.defineProperty(ne,"getFileById",{get:function e(){return D},set:function e(t){D=t}});Object.defineProperty(ne,"getFileIdsToFetchFromQueue",{get:function e(){return J},set:function e(t){J=t}});Object.defineProperty(ne,"hasMemberWithId",{get:function e(){return x},set:function e(t){x=t}});Object.defineProperty(ne,"getChannelById",{get:function e(){return M},set:function e(t){M=t}});Object.defineProperty(ne,"isFileRelevantToPost",{get:function e(){return F},set:function e(t){F=t}});Object.defineProperty(ne,"isOnPostPage",{get:function e(){return L},set:function e(t){L=t}});Object.defineProperty(ne,"maybePruneChannels",{get:function e(){return B},set:function e(t){B=t}});Object.defineProperty(ne,"getOrFetchMemberCounts",{get:function e(){return U},set:function e(t){U=t}});a.d(t,"a",function(){return de});a.d(t,"b",function(){return pe});a.d(t,"c",function(){return he});a.d(t,"d",function(){return ve});a.d(t,"g",function(){return ge});a.d(t,"h",function(){return _e});a.d(t,"e",function(){return Oe});a.d(t,"f",function(){return ke});var ie=void 0;var se={};var oe={};var le={};var ce={};function ue(e,t){if(oe[e]){var a=Object(f["a"])()||Object(b["a"])();var r=a?"addRtmErrorHandler: duplicate call to add a handler for "+e+"; this is probably caused by using inject-loader/import mocking. If so, `import { test as rtmTest } from '@slack/infra/rtm'; mockProperty(rtmTest, 'handlers', {});` to work around it.":"addRtmErrorHandler: a handler is already registered for "+e;throw new Error(r)}oe[e]=t}function de(e,t){if(se[e]){var a=Object(f["a"])()||Object(b["a"])();var r=a?"addRtmHandler: duplicate call to add a handler for "+e+"; this is probably caused by using inject-loader/import mocking. If so, `import { test as rtmTest } from '@slack/infra/rtm'; mockProperty(rtmTest, 'handlers', {});` to work around it.":"addRtmHandler: a handler is already registered for "+e;throw new Error(r)}se[e]=t}function pe(e,t){if(!le[t])return;le[t].forEach(function(t){return e(t)})}function he(){return se}function ve(){return le}var me=function e(t,a,r){if(Ee(r))return;var n=t.type;if(se[n])try{se[n](t,a,r)}catch(e){if(Object(m["a"])()){var i=r();var s=Object(l["c"])(i);window.slackDebug.setLastError&&window.slackDebug.setLastError(s,new Error("Error processing "+n+": "+e.message))}throw e}var o=p();o[t.type]&&o[t.type](t)};var fe=["T024BE7LD","T5J7PJ5PT","T5JRYUBHS","T5MTH4ARY","T5KK65FCP","T34263EUF","T5J4Q04QG","T5J7PM517","T5JN7LJ7M","T5PMP2708","T1ZPW1JUE","T57U8DUG7","T20M0MB9P"];var be=Object(o["b"])("Handles the next message in the queue",function(){var e=Object(r["coroutine"])(regeneratorRuntime.mark(function e(t,a,i){var o,c,u,d;return regeneratorRuntime.wrap(function e(p){while(1)switch(p.prev=p.next){case 0:if(!(!i||!i.length)){p.next=2;break}return p.abrupt("return",Promise.resolve());case 2:o=i[0];p.prev=3;p.next=6;return Object(r["resolve"])(t(ye(o)));case 6:c=p.sent;c&&me(o,t,a);p.next=16;break;case 10:p.prev=10;p.t0=p["catch"](3);Object(s["a"])({getState:a}).error("Error while processing "+o.type+" event",p.t0);u=a();d=Object(l["c"])(u);if(Object(n["includes"])(fe,d)){console.error(p.t0);Object(s["a"])({getState:a}).error(p.t0,"TINYSPECK: Error while processing "+o.type+" event")}case 16:p.prev=16;i.shift();return p.finish(16);case 19:return p.abrupt("return",i.length?t(be(i)):Promise.resolve());case 20:case"end":return p.stop()}},e,ie,[[3,10,16,19]])}));return function(t,a,r){return e.apply(this,arguments)}}());be.propTypes=i["b"].arrayOf(i["b"].object).isRequired;var ge=Object(o["b"])("Pauses handling of queued messages",function(e,t){var a=t();var r=Object(l["c"])(a);ce[r]=true});var _e=Object(o["b"])("Resumes handling of queued messages",function(e,t){var a=t();var r=Object(l["c"])(a);if(!ce[r])return;ce[r]=false;e(be(le[r]))});var ye=Object(o["b"])("This is a wrapper for preprocessRtmMessage that adds a timeout",function(){var e=Object(r["coroutine"])(regeneratorRuntime.mark(function e(t,a,n){var i,o,l,u,d,p;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:i={};o=3e4;l=Object(c["promiseToHaveOpenWebSocket"])(a());u=l.then(function(){return Promise.delay(o,i)});d=l.then(function(){return re(n,a)});t.next=7;return Object(r["resolve"])(Promise.race([d,u]));case 7:p=t.sent;if(!(p===i)){t.next=11;break}Object(s["a"])({getState:a}).warn("Preprocessing message of type "+n.type+" took too long; continue to process queue");return t.abrupt("return",true);case 11:return t.abrupt("return",p);case 12:case"end":return t.stop()}},e,ie)}));return function(t,a,r){return e.apply(this,arguments)}}());ye.propTypes=i["b"].object.isRequired;var Oe=Object(o["b"])("Calls the relevant rtm handlers with the given rtm message.",function(e,t,a){var r=t();var n=Object(l["c"])(r);le[n]=le[n]||[];le[n].push(a);1!==le[n].length||ce[n]||e(be(le[n]))});Oe.propTypes=i["b"].object.isRequired;var ke=Object(o["b"])("Calls the relevant handler for the given message",function(e,t,a){if(!oe[a]){Object(s["a"])({getState:t}).error(new Error("Unexpected start error: "+a),JSON.stringify({error:a}),{subtype:"flannel_start_error"});return}oe[a](a,e,t)});ke.propTypes=i["b"].string.isRequired;function Ee(e){var t=e();return Object(h["isWebApp"])(t)&&!Object(h["processRtmStream"])(t)&&!Object(v["b"])()}var Ce={handleNextMessageFromQueue:be,shouldIgnoreRtmStream:Ee};Object.defineProperty(Ce,"dispatchMessageToHandlers",{get:function e(){return me},set:function e(t){me=t}});Object.defineProperty(Ce,"errorHandlers",{get:function e(){return oe},set:function e(t){oe=t}});Object.defineProperty(Ce,"handlers",{get:function e(){return se},set:function e(t){se=t}});Object.defineProperty(Ce,"pendingMessages",{get:function e(){return le},set:function e(t){le=t}});Object(g["exportToGlobalDebugger"])("rtm",{handlers:se,errorHandlers:oe})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"g",function(){return o});a.d(t,"e",function(){return l});a.d(t,"d",function(){return u});a.d(t,"c",function(){return d});a.d(t,"f",function(){return p});a.d(t,"b",function(){return h});a.d(t,"a",function(){return v});a.d(t,"i",function(){return f});a.d(t,"j",function(){return g});a.d(t,"h",function(){return _});var r=a(5);var n=a.n(r);var i=a(2);var s=a.n(i);var o={vat:"vat",sales_tax:"sales_tax",abn:"abn",jct:"jct",qst:"qst"};var l={monthly:"monthly",yearly:"yearly"};var c={monthly:1,yearly:12};var u={standard:{id:"std",name:"standard"},plus:{id:"plus",name:"plus"},enterprise:{id:"enterprise",name:"enterprise"}};var d={CREDIT_CARD:"creditCard",INVOICE:"invoice"};var p="plans";var h="help/requests/new?accounts_pricing=1";var v="checkout";var m=function e(t){var a={};if(!Object(i["isEmpty"])(t.tax)){var r=o.sales_tax;t.tax.tax_name?r=o[t.tax.tax_name.toLowerCase()]||o.sales_tax:t.tax.is_vat&&(r=o.vat);a={value:t.tax.sales_tax_amt,type:r}}return a};var f=function e(t){var a=m(t);var r=t.credits?{currentCredits:t.credits.total_credits,creditsRemaining:t.credits.credits_remaining,creditsApplied:t.credits.credits_applied}:{};var n=t.billable_users?{billableActiveUsers:t.billable_users.billable_active_users,inactiveUsers:t.billable_users.inactive_users,zeroActiveUsers:t.billable_users.zero_active_users}:{};var i={id:t.product_id,subtotal:t.subtotal,billableUsers:n,tax:a,credits:r,totalRecurring:t.total_recurring,totalRecurringTax:t.recurring_tax_amt,totalDueToday:t.total_due_today,quotedTermEnd:t.quoted_term_end,paidSeats:t.paid_seats};return{activePlanCost:i}};var b=function e(t){var a="12m"===t.term?l.yearly:l.monthly;var r="12m"===t.term?c.yearly:c.monthly;return{id:t.product_id,term:a,currency:t.currency,level:t.level,lengthOfTermInMonths:r,costPerMonth:t.cost_per_m,costPerTerm:t.cost_per_term,isInvoice:t.is_inv||false,maxInvoiceSeats:t.max_invoice_seats,minInvoiceSeats:t.min_invoice_seats}};var g=function e(t){var a={};Object.keys(t).forEach(function(e){var r,i,s,o,c;var p=t[e];a[e]=(c={},n()(c,u.standard.id,(i={},n()(i,d.CREDIT_CARD,(r={},n()(r,l.monthly,b(p.std_m)),n()(r,l.yearly,b(p.std_y)),r)),n()(i,d.INVOICE,n()({},l.yearly,b(p.inv_std_y))),i)),n()(c,u.plus.id,(o={},n()(o,d.CREDIT_CARD,(s={},n()(s,l.monthly,b(p.plus_m)),n()(s,l.yearly,b(p.plus_y)),s)),n()(o,d.INVOICE,n()({},l.yearly,b(p.inv_plus_y))),o)),c)});return{availablePlans:a}};var _=function e(t,a,r,n){var i=a.country,s=a.region,o=a.street,l=a.postalCode,c=a.isBusinessPurchase;return[t,i,s,o,l,c,r,n].join("-")};var y={getTaxData:m}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return r});a.d(t,"b",function(){return n});a.d(t,"c",function(){return i});a.d(t,"d",function(){return s});var r={EVERY_DAY:"every_day",WEEKDAYS:"weekdays",CUSTOM:"custom"};var n={ALL_DAY:"all_day",DISABLED:"disabled",PARTIAL:"partial"};var i={DND_DAYS:"dnd_days",DND_ENABLED:"dnd_enabled",DND_START_HOUR:"dnd_start_hour",DND_END_HOUR:"dnd_end_hour",DND_BEFORE_MONDAY:"dnd_before_monday",DND_BEFORE_TUESDAY:"dnd_before_tuesday",DND_BEFORE_WEDNESDAY:"dnd_before_wednesday",DND_BEFORE_THURSDAY:"dnd_before_thursday",DND_BEFORE_FRIDAY:"dnd_before_friday",DND_BEFORE_SATURDAY:"dnd_before_saturday",DND_BEFORE_SUNDAY:"dnd_before_sunday",DND_AFTER_MONDAY:"dnd_after_monday",DND_AFTER_TUESDAY:"dnd_after_tuesday",DND_AFTER_WEDNESDAY:"dnd_after_wednesday",DND_AFTER_THURSDAY:"dnd_after_thursday",DND_AFTER_FRIDAY:"dnd_after_friday",DND_AFTER_SATURDAY:"dnd_after_saturday",DND_AFTER_SUNDAY:"dnd_after_sunday",DND_ENABLED_MONDAY:"dnd_enabled_monday",DND_ENABLED_TUESDAY:"dnd_enabled_tuesday",DND_ENABLED_WEDNESDAY:"dnd_enabled_wednesday",DND_ENABLED_THURSDAY:"dnd_enabled_thursday",DND_ENABLED_FRIDAY:"dnd_enabled_friday",DND_ENABLED_SATURDAY:"dnd_enabled_saturday",DND_ENABLED_SUNDAY:"dnd_enabled_sunday"};var s="23:59"},,,,function(e,t,a){"use strict";a.r(t);var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(36);var c=a(190);var u=a(92);var d=a(341);var p;var h={activeCurrency:null,activeTerm:u["e"].monthly,activePlanLevel:null,activePaymentMethod:u["c"].CREDIT_CARD,apiError:false,availablePlans:{},activePlanCost:{},cachedCost:{},isPlansAndCostDataLoaded:false,isPlansDataLoading:false,isCostDataLoading:false};var v=Object(l["b"])((p={},n()(p,d["l"],function(e,t){if(t.currency){var a=Object(c["b"])(e).includes(t.currency);if(!a)return e}else if(t.term&&!t.term===u["e"].yearly&&!t.term===u["e"].monthly)return e;var r=t.currency?t.currency:e.activeCurrency;var n=t.term?t.term:e.activeTerm;return s()({},e,{activeCurrency:r,activeTerm:n})}),n()(p,d["h"],function(e,t){var a=Object.keys(t.availablePlans)[0];var r=s()({},e,{activeCurrency:a,availablePlans:s()({},t.availablePlans),apiError:false});return r}),n()(p,d["c"],function(e,t){var a=t.activePlanCost,r=t.companyAddress,i=t.isInvoice,o=t.numInvoiceSeats;var l=Object(u["h"])(a.id,r,i,o);var c=s()({},e,{activePlanCost:s()({},e.activePlanCost,t.activePlanCost),cachedCost:s()({},e.cachedCost,n()({},l,t.activePlanCost)),apiError:false});return c}),n()(p,d["i"],function(e){var t=s()({},e,{apiError:true});return t}),n()(p,d["g"],function(e){var t=s()({},e,{isPlansAndCostDataLoaded:true});return t}),n()(p,d["k"],function(e,t){var a=s()({},e,{activePlanLevel:t});return a}),n()(p,d["j"],function(e,t){var a=s()({},e,{activePaymentMethod:t});return a}),n()(p,d["o"],function(e,t){var a=s()({},e,{isPlansDataLoading:t.isPlansDataLoading});return a}),n()(p,d["n"],function(e,t){var a=s()({},e,{isCostDataLoading:t.isCostDataLoading});return a}),p),h,{persistenceEnabled:true});v.propTypes={activeCurrency:o["b"].string,activeTerm:o["b"].string,activePlanLevel:o["b"].string,activePaymentMethod:o["b"].string,apiError:o["b"].bool,availablePlans:o["b"].object,activePlanCost:o["b"].object,cachedCost:o["b"].object,isPlansAndCostDataLoaded:o["b"].bool,isPlansDataLoading:o["b"].bool,isCostDataLoading:o["b"].bool};var m=v;a.d(t,"getActivePlan",function(){return c["a"]});a.d(t,"getAvailableCurrencies",function(){return c["b"]});a.d(t,"selectAvailableCurrencies",function(){return c["t"]});a.d(t,"selectActiveProductId",function(){return c["s"]});a.d(t,"selectActivePlanCostPerTerm",function(){return c["m"]});a.d(t,"selectActivePlanLevel",function(){return c["o"]});a.d(t,"selectActivePlanTerm",function(){return c["r"]});a.d(t,"selectActivePlanPaymentMethod",function(){return c["q"]});a.d(t,"selectActivePlanIsYearly",function(){return c["n"]});a.d(t,"selectActivePlanMonthsCount",function(){return c["p"]});a.d(t,"selectActiveCurrency",function(){return c["l"]});a.d(t,"getTermPlanForActiveCurrency",function(){return c["g"]});a.d(t,"selectCostPerTermForYearlyPlan",function(){return c["w"]});a.d(t,"selectCostPerTermForMonthlyPlan",function(){return c["v"]});a.d(t,"selectIsPlansAndCostDataLoaded",function(){return c["B"]});a.d(t,"selectIsPlansOrCostDataLoading",function(){return c["D"]});a.d(t,"selectIsPlansDataLoading",function(){return c["C"]});a.d(t,"selectBillableActiveUsers",function(){return c["u"]});a.d(t,"selectPaidSeats",function(){return c["H"]});a.d(t,"isZeroRealActiveUsers",function(){return c["k"]});a.d(t,"selectInactiveUsers",function(){return c["z"]});a.d(t,"selectTotalUsers",function(){return c["O"]});a.d(t,"selectSubtotal",function(){return c["I"]});a.d(t,"selectTax",function(){return c["J"]});a.d(t,"selectCreditsApplied",function(){return c["x"]});a.d(t,"selectCurrentTeamCredits",function(){return c["y"]});a.d(t,"selectTeamCreditsRemaining",function(){return c["K"]});a.d(t,"selectTotalRecurring",function(){return c["M"]});a.d(t,"selectTotalDueToday",function(){return c["L"]});a.d(t,"selectTotalRecurringTax",function(){return c["N"]});a.d(t,"getQuotedTermEndDate",function(){return c["f"]});a.d(t,"selectIsCostAvailableForPlan",function(){return c["A"]});a.d(t,"selectLocalCostForCurrentPlan",function(){return c["E"]});a.d(t,"selectMinInvoiceSeats",function(){return c["G"]});a.d(t,"selectMaxInvoiceSeats",function(){return c["F"]});a.d(t,"isAPIError",function(){return c["h"]});a.d(t,"isCostValid",function(){return c["i"]});a.d(t,"isInvoiceActivePaymentMethod",function(){return c["j"]});a.d(t,"getAvailableCurrenciesData",function(){return c["c"]});a.d(t,"getPlanProductId",function(){return c["e"]});a.d(t,"getPlanMonthlyCost",function(){return c["d"]});a.d(t,"RETRIEVE_CACHE_COST_DATA_TIMEOUT",function(){return d["a"]});a.d(t,"switchPlans",function(){return d["l"]});a.d(t,"plansFetchSuccess",function(){return d["h"]});a.d(t,"costFetchSuccess",function(){return d["c"]});a.d(t,"setErrorState",function(){return d["i"]});a.d(t,"plansAndCostDataLoaded",function(){return d["g"]});a.d(t,"setPlanLevel",function(){return d["k"]});a.d(t,"setPaymentMethod",function(){return d["j"]});a.d(t,"updateIsPlansDataLoading",function(){return d["o"]});a.d(t,"updateIsCostDataLoading",function(){return d["n"]});a.d(t,"fetchCostForCurrentPlan",function(){return d["d"]});a.d(t,"fetchPlansAndCostData",function(){return d["e"]});a.d(t,"fetchPlansData",function(){return d["f"]});a.d(t,"changeActivePlan",function(){return d["b"]});a.d(t,"updatePlanLevel",function(){return d["p"]});a.d(t,"updateActivePlanPaymentMethod",function(){return d["m"]});var f=t["default"]=m},,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",function(){return n});a.d(t,"a",function(){return i});var r=a(20);var n=Object(r["b"])("TS.enterprise.actions.dispatch",function(){return null});var i=Object(r["b"])("TS.enterprise.actions.actions",function(){return null})},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(0);var l=a(2);var c=a(36);var u=a(260);var d=a(33);var p=a(92);var h=a(43);var v=a(18);var m=a(482);var f=a(313);var b=a(719);var g=a(190);var _=a(212);var y=o["b"].shape({companyName:o["b"].string,street:o["b"].string,suite:o["b"].string,city:o["b"].string,postalCode:o["b"].string,region:o["b"].string,country:o["b"].string,isBusinessPurchase:o["b"].bool,isVatIdAvailable:o["b"].bool,vatId:o["b"].string,abnId:o["b"].string,validationErrors:o["b"].object,isValidationActive:o["b"].bool});var O=Object(v["b"])("Checkout Address Form Data Loaded");O.propTypes=o["b"].object;var k=Object(v["b"])("Checkout States and Countries Data Loaded");k.propTypes=o["b"].object;var E=Object(v["b"])("Checkout Company Address Data Loaded");E.propTypes=o["b"].object;var C=Object(v["b"])("Update Company Address Field");C.propTypes=o["b"].object;var j=Object(v["b"])("Company Address Validated");j.propTypes=o["b"].object;var w=Object(v["b"])("Company Address Form Field Validated");w.propTypes=o["b"].object;var S=Object(v["b"])("Clear Company Address Form Field Validation Errors");S.propTypes=o["b"].object;var I=Object(v["b"])("Credit Card Data Changed");I.propTypes=o["b"].object;var T=Object(v["b"])("Credit Card Token Created");T.propTypes=o["b"].object;var A=Object(v["b"])("Toggles if Credit Card Token is being created or not");A.propTypes=o["b"].bool;var N=Object(v["b"])("Upgrade Response Received");N.propTypes=o["b"].object;var P=Object(v["b"])("Stripe Customer Data Loaded");P.propTypes=o["b"].object;var R=Object(v["b"])("Update Stripe API Key");R.propTypes=o["b"].object;var M=Object(v["b"])("Update Invoice Data Field");M.propTypes=o["b"].object;var D=Object(v["b"])("Invoice Data Validated");D.propTypes=o["b"].object;var x=Object(v["b"])("Invoice Form Field Validated");x.propTypes=o["b"].object;var F=Object(v["b"])("Update Credit Card Selected");F.propTypes=o["b"].object;var L=Object(v["b"])("Update Credit Card Form Error");L.propTypes=o["b"].object;var B=Object(v["b"])("Clear Any Existing Credit Card Form Error");B.propTypes=null;var U=Object(v["b"])("Clear Any Existing Payment Status or Errors");U.propTypes=null;var q=Object(v["b"])("Self User Data Loaded");q.propTypes=o["b"].object;var G=Object(v["b"])("Update Is Processing Payment");G.propTypes=o["b"].object;var W=Object(v["b"])("Update Payment Method Selected");W.propTypes=o["b"].string;var H=Object(v["b"])("Update Show App Disconnect Dialog");H.propTypes=o["b"].object;var V=Object(v["b"])("Update Active Checkout Step");V.propTypes=o["b"].object;var K=Object(v["b"])("Update Checkout Flow API Error Indicator");K.propTypes=o["b"].object;function z(){var e=this;return function(){var t=Object(h["coroutine"])(regeneratorRuntime.mark(function t(a){var r,n;return regeneratorRuntime.wrap(function e(t){while(1)switch(t.prev=t.next){case 0:t.prev=0;t.next=3;return Object(h["resolve"])(a(Object(m["d"])()));case 3:r=t.sent;a(k({statesAndCountries:r}));t.next=7;return Object(h["resolve"])(a(Object(m["b"])()));case 7:n=t.sent;a(E({companyAddress:n}));a(O());t.next=15;break;case 12:t.prev=12;t.t0=t["catch"](0);a(K({isCheckoutFlowAPIError:true}));case 15:case"end":return t.stop()}},t,e,[[0,12]])}));return function(e){return t.apply(this,arguments)}}()}function Y(e){return function(t,a){return new Promise(function(r){var n=Object(_["e"])(a());var i=Object(f["l"])(e.companyAddress,n.vatCountries);if(!Object(l["isEmpty"])(i)){t(j(i));r({isCheckoutFormValid:false});return}t(j(i));t(Object(m["h"])(e.companyAddress)).then(function(){r({isCheckoutFormValid:true})}).catch(function(e){var a=e.data||{};var n=a.response_code;var i=a.error;var s=a.format_valid;var o=Object(f["a"])(n,i,s);if(!Object(l["isEmpty"])(o)){t(j(o));r({isCheckoutFormValid:false})}})})}}Y.propTypes={companyAddress:y};function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{companyAddress:{},field:null},t=e.companyAddress,a=e.field;return function(e,r){var n=Object(_["e"])(r());var i=Object(f["m"])(t,a,n.vatCountries);e(w({error:i,field:a}))}}Q.propTypes={companyAddress:y,field:o["b"].string};function J(e){return function(t,a){t(C(e));var r=Object(_["b"])(a());r.isValidationActive&&Object(l["has"])(e,"country")&&t(Y({companyAddress:Object(_["b"])(a())}))}}J.propTypes=o["b"].object;function Z(e){return function(t){t(G({isProcessingPayment:true}));t(Object(m["g"])(e)).then(function(e){return t(N(e))}).catch(function(e){t(N(e.data))})}}Z.propTypes=o["b"].object;function X(e){return function(t){return t(Object(m["e"])(e)).then(function(e){var a=e.stripe_customer;var r={};a&&!Object(l["isEmpty"])(a.sources_payable)&&(r=Object(l["pickBy"])(a.sources_payable,function(e,t){return!a.sources_payable[t].is_bank_account}));t(P({stripeApiKey:e.stripe_api_publishable_key,sourcesPayable:r}))}).catch(function(){return t(K({isCheckoutFlowAPIError:true}))})}}X.propTypes={country:o["b"].string};function $(e){return function(t,a){var r=a();var n=Object(_["m"])(r);var i=Object(g["G"])(r);var s=Object(g["F"])(r);var o=Object(b["e"])(n,e,i,s);t(x({error:o,field:e}))}}b["e"].propTypes={field:o["b"].string};function ee(e){return function(t,a){return new Promise(function(r){var n=a();var i=Object(g["G"])(n);var s=Object(g["F"])(n);var o=Object(b["d"])(e,i,s);t(D(o));r({isInvoiceFormValid:Object(l["isEmpty"])(o)})})}}ee.propTypes={invoiceData:o["b"].object};function te(e){return function(t){t(G({isProcessingPayment:true}));var a=e.billingContacts;var r=n()({},e,{billingContacts:Object(b["c"])(a)});t(Object(m["a"])(r)).then(function(e){return t(N(e))}).catch(function(){return t(K({isCheckoutFlowAPIError:true}))})}}te.propTypes=o["b"].object;function ae(){return function(e){e(Object(m["c"])()).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.user;return e(q(a))})}}var re=a(552);var ne,ie;var se={countries:[],usStates:{},canadaStates:{},vatCountries:{},abnCountries:{},stripeApiKey:null,sourcesPayable:{},user:null};var oe={companyName:d["c"].COMPANY_NAME,street:d["c"].STREET,suite:d["c"].SUITE,city:d["c"].CITY,postalCode:d["c"].POSTAL_CODE,region:d["c"].REGION,country:d["c"].COUNTRY,isBusinessPurchase:d["c"].IS_BUSINESS_PURCHASE,isVatIdAvailable:d["c"].IS_VAT_AVAILABLE,vatId:d["c"].VAT_ID,abnId:d["c"].ABN_ID,qstId:d["c"].QST_ID,validationErrors:{},isValidationActive:false};var le={code:"",message:"",type:""};var ce={elementType:"",complete:false,empty:true,error:le};var ue=(ne={cardName:ce},s()(ne,u["c"].CARD_NUMBER,ce),s()(ne,u["c"].CARD_EXPIRY,ce),s()(ne,u["c"].CARD_CVC,ce),s()(ne,u["c"].POSTAL_CODE,ce),s()(ne,"token",{}),s()(ne,"tokenError",le),s()(ne,"formError",le),s()(ne,"useExistingCreditCard",false),ne);var de={ok:false,error:"",msg:"",isProcessingPayment:false};var pe={numberOfUsers:"",additionalBillingContacts:"",purchaseOrderNumber:"",validationErrors:{}};var he={config:se,companyAddress:oe,isCheckoutAddressFormDataLoaded:false,creditCardData:ue,isCreatingCreditCardToken:false,paymentStatus:de,invoiceData:pe,paymentMethodSelected:p["c"].CREDIT_CARD,isAppDisconnectedDialogShown:false,activeCheckoutStep:re["b"].form,isCheckoutFlowAPIError:false};var ve=Object(c["b"])((ie={},s()(ie,O,function(e){var t=n()({},e,{isCheckoutAddressFormDataLoaded:true});return t}),s()(ie,k,function(e,t){var a=n()({},e,{config:n()({},e.config,{countries:t.statesAndCountries.countries,usStates:t.statesAndCountries.usStates,canadaStates:t.statesAndCountries.canadaStates,vatCountries:t.statesAndCountries.vatCountries,abnCountries:t.statesAndCountries.abnCountries})});return a}),s()(ie,E,function(e,t){var a=n()({},e,{companyAddress:n()({},e.companyAddress,{companyName:t.companyAddress.companyName,street:t.companyAddress.street,suite:t.companyAddress.suite,city:t.companyAddress.city,postalCode:t.companyAddress.postalCode,region:t.companyAddress.region,country:t.companyAddress.country,isBusinessPurchase:t.companyAddress.isBusinessPurchase,isVatIdAvailable:t.companyAddress.isVatIdAvailable,vatId:t.companyAddress.vatId,abnId:t.companyAddress.abnId,qstId:t.companyAddress.qstId})});return a}),s()(ie,C,function(e,t){var a=n()({},e,{companyAddress:n()({},e.companyAddress,t)});return a}),s()(ie,j,function(e,t){var a=n()({},e,{companyAddress:n()({},e.companyAddress,{validationErrors:t,isValidationActive:true})});return a}),s()(ie,w,function(e,t){var a=n()({},e,{companyAddress:n()({},e.companyAddress,{validationErrors:n()({},e.companyAddress.validationErrors,s()({},t.field,t.error))})});return a}),s()(ie,S,function(e,t){var a=n()({},e,{companyAddress:n()({},e.companyAddress,{validationErrors:n()({},e.companyAddress.validationErrors,s()({},t.field,null))})});return a}),s()(ie,I,function(e,t){var a=n()({},e,{creditCardData:n()({},e.creditCardData,s()({},t.elementType,t))});if("cardName"!==t.elementType){a.creditCardData.token=null;a.creditCardData.tokenError=null}return a}),s()(ie,B,function(e){var t=n()({},e,{creditCardData:n()({},e.creditCardData,{formError:le})});return t}),s()(ie,L,function(e,t){var a=n()({},e,{creditCardData:n()({},e.creditCardData,{formError:t})});return a}),s()(ie,T,function(e,t){var a=n()({},e,{creditCardData:n()({},e.creditCardData,{token:t.token,tokenError:t.error})});return a}),s()(ie,A,function(e,t){var a=n()({},e,{isCreatingCreditCardToken:t});return a}),s()(ie,N,function(e,t){var a=n()({},e,{paymentStatus:n()({},e.paymentStatus,{ok:t.ok,error:t.error,msg:t.msg,isProcessingPayment:false})});return a}),s()(ie,U,function(e){var t=n()({},e,{paymentStatus:de});return t}),s()(ie,G,function(e,t){var a=n()({},e,{paymentStatus:n()({},e.paymentStatus,{isProcessingPayment:t.isProcessingPayment})});return a}),s()(ie,P,function(e,t){var a=n()({},e,{config:n()({},e.config,{stripeApiKey:t.stripeApiKey,sourcesPayable:Object(l["isEmpty"])(t.sourcesPayable)?{}:t.sourcesPayable}),creditCardData:n()({},e.creditCardData,{useExistingCreditCard:!Object(l["isEmpty"])(t.sourcesPayable)})});return a}),s()(ie,R,function(e,t){var a=n()({},e,{config:n()({},e.config,{stripeApiKey:t.stripeApiKey}),creditCardData:n()({},e.creditCardData,{token:null,tokenError:null})});return a}),s()(ie,F,function(e,t){var a=t.creditCardId!==u["a"];var r=n()({},e,{creditCardData:n()({},e.creditCardData,{useExistingCreditCard:a,token:{id:t.creditCardId,card:{last4:t.creditCardLast4,brand:t.creditCardBrand}}})});return r}),s()(ie,M,function(e,t){var a=n()({},e,{invoiceData:n()({},e.invoiceData,t.data,{validationErrors:n()({},e.invoiceData.validationErrors,s()({},t.field,null))})});return a}),s()(ie,D,function(e,t){var a=n()({},e,{invoiceData:n()({},e.invoiceData,{validationErrors:t})});return a}),s()(ie,x,function(e,t){var a=n()({},e,{invoiceData:n()({},e.invoiceData,{validationErrors:n()({},e.invoiceData.validationErrors,s()({},t.field,t.error))})});return a}),s()(ie,q,function(e,t){var a=n()({},e,{config:n()({},e.config,{user:t})});return a}),s()(ie,W,function(e,t){var a=n()({},e,{paymentMethodSelected:t});return a}),s()(ie,H,function(e,t){var a=n()({},e,{isAppDisconnectedDialogShown:t.isAppDisconnectedDialogShown});return a}),s()(ie,V,function(e,t){var a=n()({},e,{activeCheckoutStep:t.activeCheckoutStep});return a}),s()(ie,K,function(e,t){var a=n()({},e,{isCheckoutFlowAPIError:t.isCheckoutFlowAPIError});return a}),ie),he,{persistenceEnabled:true});ve.propTypes={config:o["b"].object,companyAddress:o["b"].object,isCheckoutAddressFormDataLoaded:o["b"].bool,creditCardData:o["b"].object,isCreatingCreditCardToken:o["b"].bool,paymentStatus:o["b"].object,invoiceData:o["b"].object,paymentMethodSelected:o["b"].string,isAppDisconnectedDialogShown:o["b"].bool,activeCheckoutStep:o["b"].string};var me=ve;a.d(t,"hasAddressFormErrors",function(){return _["o"]});a.d(t,"getCompanyAddress",function(){return _["b"]});a.d(t,"getCompanyAddressCountry",function(){return _["c"]});a.d(t,"getCompanyAddressPostalCode",function(){return _["d"]});a.d(t,"getConfig",function(){return _["e"]});a.d(t,"isCheckoutAddressFormDataLoaded",function(){return _["p"]});a.d(t,"getCreditCardData",function(){return _["g"]});a.d(t,"getCreditCardToken",function(){return _["j"]});a.d(t,"getCreditCardTokenId",function(){return _["l"]});a.d(t,"getCreditCardBrandForReview",function(){return _["f"]});a.d(t,"getCreditCardLastFourForReview",function(){return _["i"]});a.d(t,"getCreditCardFormError",function(){return _["h"]});a.d(t,"getCreditCardTokenError",function(){return _["k"]});a.d(t,"isCreatingCreditCardToken",function(){return _["q"]});a.d(t,"didUpgradeSucceed",function(){return _["a"]});a.d(t,"getUpgradeError",function(){return _["n"]});a.d(t,"selectIsProcessingPayment",function(){return _["u"]});a.d(t,"selectStripeApiKey",function(){return _["y"]});a.d(t,"selectSourcesPayable",function(){return _["x"]});a.d(t,"selectIsSelfUserOwner",function(){return _["v"]});a.d(t,"selectVatCountries",function(){return _["z"]});a.d(t,"getInvoiceData",function(){return _["m"]});a.d(t,"selectPaymentMethodSelected",function(){return _["w"]});a.d(t,"selectIsAppDisconnectedDialogShown",function(){return _["s"]});a.d(t,"selectActiveCheckoutStep",function(){return _["r"]});a.d(t,"selectIsCheckoutFlowAPIError",function(){return _["t"]});a.d(t,"checkoutAddressFormDataLoaded",function(){return O});a.d(t,"checkoutStatesAndCountriesDataLoaded",function(){return k});a.d(t,"checkoutCompanyAddressDataLoaded",function(){return E});a.d(t,"updateCompanyAddressField",function(){return C});a.d(t,"companyAddressValidated",function(){return j});a.d(t,"companyAddressFormFieldValidated",function(){return w});a.d(t,"clearCompanyAddressFormFieldValidationErrors",function(){return S});a.d(t,"handleCreditCardFormChange",function(){return I});a.d(t,"updateCreditCardTokenData",function(){return T});a.d(t,"updateIsCreatingCreditCardToken",function(){return A});a.d(t,"onUpgradeResponseReceived",function(){return N});a.d(t,"stripeCustomerDataLoaded",function(){return P});a.d(t,"updateStripeApiKey",function(){return R});a.d(t,"updateInvoiceDataField",function(){return M});a.d(t,"invoiceDataValidated",function(){return D});a.d(t,"invoiceDataFieldValidated",function(){return x});a.d(t,"updateCreditCardSelected",function(){return F});a.d(t,"updateCreditCardFormError",function(){return L});a.d(t,"clearCreditCardFormError",function(){return B});a.d(t,"clearPaymentStatus",function(){return U});a.d(t,"selfUserDataLoaded",function(){return q});a.d(t,"updateIsProcessingPayment",function(){return G});a.d(t,"updatePaymentMethodSelected",function(){return W});a.d(t,"updateIsAppDisconnectedDialogShown",function(){return H});a.d(t,"updateActiveCheckoutStep",function(){return V});a.d(t,"updateIsCheckoutFlowAPIError",function(){return K});a.d(t,"loadCheckoutAddressFormData",function(){return z});a.d(t,"validateCheckoutForm",function(){return Y});a.d(t,"validateCompanyAddressFormField",function(){return Q});a.d(t,"updateCompanyAddress",function(){return J});a.d(t,"submitPaymentForUpgrade",function(){return Z});a.d(t,"loadStripeCustomerData",function(){return X});a.d(t,"validateInvoiceFormField",function(){return $});a.d(t,"validateInvoiceForm",function(){return ee});a.d(t,"createInvoiceForUpgrade",function(){return te});a.d(t,"loadSelfUserData",function(){return ae});var fe=t["default"]=me},,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return l});a.d(t,"b",function(){return u});a.d(t,"t",function(){return d});a.d(t,"s",function(){return p});a.d(t,"m",function(){return h});a.d(t,"o",function(){return v});a.d(t,"r",function(){return m});a.d(t,"q",function(){return f});a.d(t,"n",function(){return b});a.d(t,"p",function(){return g});a.d(t,"l",function(){return _});a.d(t,"g",function(){return y});a.d(t,"w",function(){return O});a.d(t,"v",function(){return k});a.d(t,"B",function(){return E});a.d(t,"D",function(){return C});a.d(t,"C",function(){return j});a.d(t,"u",function(){return S});a.d(t,"H",function(){return I});a.d(t,"k",function(){return T});a.d(t,"z",function(){return A});a.d(t,"O",function(){return N});a.d(t,"I",function(){return P});a.d(t,"J",function(){return R});a.d(t,"x",function(){return M});a.d(t,"y",function(){return D});a.d(t,"K",function(){return x});a.d(t,"M",function(){return F});a.d(t,"L",function(){return L});a.d(t,"N",function(){return B});a.d(t,"f",function(){return U});a.d(t,"A",function(){return G});a.d(t,"E",function(){return W});a.d(t,"G",function(){return H});a.d(t,"F",function(){return V});a.d(t,"h",function(){return K});a.d(t,"i",function(){return z});a.d(t,"j",function(){return Y});a.d(t,"c",function(){return Q});a.d(t,"e",function(){return J});a.d(t,"d",function(){return Z});var r=a(14);var n=a(2);var i=a.n(n);var s=a(92);var o=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.availablePlans,r=t.currency,n=t.planTerm,i=t.planLevel,o=t.paymentMethod;var l=o;o===s["c"].INVOICE&&n===s["e"].monthly&&(l=s["c"].CREDIT_CARD);o!==s["c"].INVOICE||"INR"!==r&&"BRL"!==r||(l=s["c"].CREDIT_CARD);if(!a[r]||!a[r][i]||!a[r][i][l]||!a[r][i][l][n])return null;return a[r][i][l][n]};var l=function e(t){if(!t||!t.availablePlans)return null;var a=t.availablePlans;var r=t.activeCurrency;var n=t.activeTerm;var i=t.activePlanLevel;var s=t.activePaymentMethod;return o({availablePlans:a,currency:r,planTerm:n,planLevel:i,paymentMethod:s})};var c=Object(r["b"])(function(e){if(!e||!e.pricingPlans)return null;return l(e.pricingPlans)});var u=function e(t){if(!t||!t.availablePlans)return[];return Object.keys(t.availablePlans)};var d=Object(r["b"])(function(e){if(!e||!e.pricingPlans)return[];return u(e.pricingPlans)});var p=Object(r["b"])(function(e){var t=c(e);if(!t||!t.id)return"";return t.id});var h=Object(r["b"])(function(e){var t=c(e);if(!t||!t.costPerTerm)return null;return t.costPerTerm});var v=Object(r["b"])(function(e){var t=c(e);if(!t||!t.level)return"";return t.level});var m=Object(r["b"])(function(e){var t=c(e);if(!t||!t.term)return"";return t.term});var f=Object(r["b"])(function(e){var t=c(e);if(!t)return null;return t.isInvoice?s["c"].INVOICE:s["c"].CREDIT_CARD});var b=Object(r["b"])(function(e){var t=c(e);if(!t||!t.term)return false;return t.term===s["e"].yearly});var g=Object(r["b"])(function(e){var t=c(e);if(!t||!t.lengthOfTermInMonths)return null;return t.lengthOfTermInMonths});var _=Object(r["b"])(function(e){var t=c(e);if(!t||!t.currency)return"";return t.currency});var y=function e(t,a){if(!t||!t.availablePlans)return null;var r=t.availablePlans;var n=t.activeCurrency;var i=t.activePlanLevel;var s=t.activePaymentMethod;if(!r[n]||!r[n][i]||!r[n][i][s])return null;return r[n][i][s][a]};var O=Object(r["b"])(function(e){if(!e||!e.pricingPlans)return null;var t=y(e.pricingPlans,s["e"].yearly);if(!t)return null;return t.costPerTerm});var k=Object(r["b"])(function(e){if(!e||!e.pricingPlans)return null;var t=y(e.pricingPlans,s["e"].monthly);if(!t)return null;return t.costPerTerm});var E=function e(t){if(!t||!t.pricingPlans)return null;return t.pricingPlans.isPlansAndCostDataLoaded};var C=function e(t){if(!t||!t.pricingPlans)return null;return t.pricingPlans.isPlansDataLoading||t.pricingPlans.isCostDataLoading};var j=function e(t){if(!t||!t.pricingPlans)return null;return t.pricingPlans.isPlansDataLoading};var w=function e(t){if(!t||!t.pricingPlans||!t.pricingPlans.activePlanCost)return null;return t.pricingPlans.activePlanCost};var S=Object(r["b"])(function(e){var t=w(e);if(!t||!t.billableUsers)return null;return t.billableUsers.billableActiveUsers});var I=Object(r["b"])(function(e){var t=w(e);if(!t||!t.paidSeats)return null;return t.paidSeats});var T=Object(r["b"])(function(e){var t=w(e);if(!t||!t.billableUsers)return null;return t.billableUsers.zeroActiveUsers});var A=Object(r["b"])(function(e){var t=w(e);if(!t||!t.billableUsers)return null;return t.billableUsers.inactiveUsers});var N=Object(r["b"])(function(e){var t=w(e);if(!t||!t.billableUsers)return null;var a=T(e)?0:S(e);return a+A(e)});var P=Object(r["b"])(function(e){var t=w(e);if(!t)return null;return t.subtotal});var R=Object(r["b"])(function(e){var t=w(e);if(!t||Object(n["isEmpty"])(t.tax))return null;return t.tax});var M=Object(r["b"])(function(e){var t=w(e);if(!t||!t.credits)return null;return t.credits.creditsApplied});var D=Object(r["b"])(function(e){var t=w(e);if(!t||!t.credits)return null;return t.credits.currentCredits});var x=Object(r["b"])(function(e){var t=w(e);if(!t||!t.credits)return null;return t.credits.creditsRemaining});var F=Object(r["b"])(function(e){var t=w(e);if(!t)return null;return t.totalRecurring});var L=Object(r["b"])(function(e){var t=w(e);if(!t)return null;return t.totalDueToday});var B=Object(r["b"])(function(e){var t=w(e);if(!t)return null;return t.totalRecurringTax});var U=Object(r["b"])(function(e){var t=w(e);if(!t)return null;return t.quotedTermEnd});var q=function e(t){if(!t||!t.cachedCost)return null;return t.cachedCost};var G=Object(r["b"])(function(e,t,a,r,n){if(!e||!e.pricingPlans)return null;var i=q(e.pricingPlans);var o=Object(s["h"])(t,a,r,n);if(!i||!i[o])return false;return true});var W=Object(r["b"])(function(e,t,a,r,n){if(!e||!e.pricingPlans)return null;var i=q(e.pricingPlans);var o=Object(s["h"])(t,a,r,n);if(!i||!i[o])return null;return i[o]});var H=Object(r["b"])(function(e){var t=c(e);if(!t||!t.isInvoice)return null;var a=S(e);if(a>t.minInvoiceSeats)return a;return t.minInvoiceSeats});var V=Object(r["b"])(function(e){var t=c(e);if(!t||!t.isInvoice)return null;return t.maxInvoiceSeats});var K=Object(r["b"])(function(e){return e&&e.pricingPlans&&e.pricingPlans.apiError});var z=Object(r["b"])(function(e){if(!e||!e.pricingPlans)return false;if(K(e))return false;var t=p(e);var a=w(e);return t===a});var Y=Object(r["b"])(function(e){var t=c(e);if(!t)return false;return t.isInvoice||false});var Q=function e(t){if(!t||!t.pricingPlans||!t.pricingPlans.availablePlans)return[];var a=[];var r=Object.keys(t.pricingPlans.availablePlans);r.forEach(function(e){a.push(o({availablePlans:t.pricingPlans.availablePlans,currency:e,planTerm:t.pricingPlans.activeTerm,planLevel:t.pricingPlans.activePlanLevel,paymentMethod:t.pricingPlans.activePaymentMethod}))});return a};var J=function e(t,a,r,n,i){if(!t||!t.pricingPlans||!t.pricingPlans.availablePlans)return null;var s=o({availablePlans:t.pricingPlans.availablePlans,currency:a,planTerm:r,planLevel:n,paymentMethod:i});return s&&s.id||null};var Z=function e(t,a,r,n,i){if(!t||!t.pricingPlans||!t.pricingPlans.availablePlans)return null;var s=o({availablePlans:t.pricingPlans.availablePlans,currency:a,planTerm:r,planLevel:n,paymentMethod:i});return s&&s.costPerMonth||null}},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"o",function(){return n});a.d(t,"b",function(){return i});a.d(t,"c",function(){return s});a.d(t,"d",function(){return o});a.d(t,"e",function(){return l});a.d(t,"p",function(){return c});a.d(t,"g",function(){return u});a.d(t,"j",function(){return d});a.d(t,"l",function(){return p});a.d(t,"f",function(){return h});a.d(t,"i",function(){return v});a.d(t,"h",function(){return m});a.d(t,"k",function(){return f});a.d(t,"q",function(){return b});a.d(t,"a",function(){return _});a.d(t,"n",function(){return y});a.d(t,"u",function(){return O});a.d(t,"y",function(){return k});a.d(t,"x",function(){return E});a.d(t,"v",function(){return C});a.d(t,"z",function(){return j});a.d(t,"m",function(){return w});a.d(t,"w",function(){return S});a.d(t,"s",function(){return I});a.d(t,"r",function(){return T});a.d(t,"t",function(){return A});var r=a(14);var n=Object(r["b"])(function(e){if(!e||!e.checkoutFlow||!e.checkoutFlow.companyAddress||!e.checkoutFlow.companyAddress.validationErrors)return false;return Object.values(e.checkoutFlow.companyAddress.validationErrors).some(function(e){return e})});var i=Object(r["b"])(function(e){if(!e||!e.checkoutFlow||!e.checkoutFlow.companyAddress)return null;return e.checkoutFlow.companyAddress});var s=Object(r["b"])(function(e){var t=i(e);if(!t)return null;return t.country});var o=Object(r["b"])(function(e){var t=i(e);if(!t)return null;return t.postalCode});var l=Object(r["b"])(function(e){if(!e||!e.checkoutFlow||!e.checkoutFlow.config)return null;return e.checkoutFlow.config});var c=Object(r["b"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.isCheckoutAddressFormDataLoaded});var u=Object(r["b"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.creditCardData});var d=Object(r["b"])(function(e){var t=u(e);if(!t)return null;return t.token});var p=Object(r["b"])(function(e){var t=d(e);if(!t)return null;return t.id});var h=Object(r["b"])(function(e){var t=d(e);if(!t||!t.card)return null;return t.card.brand});var v=Object(r["b"])(function(e){var t=d(e);if(!t||!t.card)return null;return t.card.last4});var m=Object(r["b"])(function(e){var t=u(e);if(!t)return null;return t.formError});var f=Object(r["b"])(function(e){var t=u(e);if(!t)return null;return t.tokenError});var b=Object(r["b"])(function(e){if(!e||!e.checkoutFlow)return false;return e.checkoutFlow.isCreatingCreditCardToken});var g=Object(r["b"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.paymentStatus});var _=Object(r["b"])(function(e){var t=g(e);if(!t)return false;return true===t.ok&&!t.error});var y=Object(r["b"])(function(e){var t=g(e);if(!t)return"";if(t.error&&t.msg)return t.msg;return t.error});var O=Object(r["b"])(function(e){var t=g(e);if(!t)return false;return t.isProcessingPayment});var k=Object(r["b"])(function(e){var t=l(e);if(!t)return null;return t.stripeApiKey});var E=Object(r["b"])(function(e){var t=l(e);if(!t)return null;return t.sourcesPayable});var C=Object(r["b"])(function(e){var t=l(e);if(!t||!t.user)return false;return t.user.is_owner});var j=Object(r["b"])(function(e){var t=l(e);if(!t||!t.vatCountries)return null;return t.vatCountries});var w=Object(r["b"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.invoiceData});var S=Object(r["b"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.paymentMethodSelected});var I=Object(r["b"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.isAppDisconnectedDialogShown});var T=Object(r["b"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.activeCheckoutStep});var A=Object(r["b"])(function(e){if(!e||!e.checkoutFlow)return null;return e.checkoutFlow.isCheckoutFlowAPIError})},,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(2);var c=a(18);var u=a(36);var d=a(14);var p=a(15);var h=a(4);var v=a(35);var m=a(24);var f=a(68);var b=a(34);var g=a(10);var _=a(12);var y=a(60);var O=/([a-zA-Z\s]+<)*(([a-zA-Z0-9_.+-]+)@([a-zA-Z0-9-.]+)(\.[a-zA-Z0-9]{2,4}))+>*\b,*$/i;function k(e){var t=[];var a=[];if(!e)return Promise.resolve({done:false,result:false});var r=e.split("\n").join(", ");r=e.split(",");for(var n=0;n<r.length;n++){var i=r[n];var s=i.trim();var o=s.match(O);o?a.push(o[2]):t.push(s)}var l=t.filter(function(e){return!!e}).length;if(l){var c=new Error;1===l&&1===r.length?c.name="one_invalid_email":c.name="multiple_invalid_emails";return Promise.reject(c)}return Promise.resolve({result:a,done:true})}function E(e){if(!e)return Promise.resolve();return k(e).then(function(e){if(!e.done)return Promise.resolve();return Promise.resolve({validatedEmails:e.result})})}var C=a(11);var j=a(31);var w=a(19);var S=a(230);var I=a(585);var T=a(132);var A=a(805);var N=a(1298);var P=a(483);a.d(t,"setRealName",function(){return F});a.d(t,"setInEurope",function(){return L});a.d(t,"setGdprPref",function(){return B});a.d(t,"setWorkspaceName",function(){return U});a.d(t,"setWorkspaceDomain",function(){return q});a.d(t,"setDomainWhitelistingPref",function(){return G});a.d(t,"setCanWhitelistOwnerEmailDomain",function(){return W});a.d(t,"setSharedInviteLink",function(){return H});a.d(t,"setSignupDomain",function(){return V});a.d(t,"setInvites",function(){return K});a.d(t,"setModalTitle",function(){return z});a.d(t,"setStepNumber",function(){return Y});a.d(t,"setStepCallback",function(){return Q});a.d(t,"setCurrentStepValidity",function(){return J});a.d(t,"setIsPromiseRunning",function(){return Z});a.d(t,"setChannelName",function(){return X});a.d(t,"setChannelId",function(){return $});a.d(t,"setWorkflow",function(){return ee});a.d(t,"getRealName",function(){return ne});a.d(t,"getInEurope",function(){return ie});a.d(t,"getGdprPref",function(){return se});a.d(t,"getWorkspaceName",function(){return oe});a.d(t,"getWorkspaceDomain",function(){return le});a.d(t,"getInvites",function(){return ce});a.d(t,"getDomainWhitelistingPref",function(){return ue});a.d(t,"getCanWhitelistOwnerEmailDomain",function(){return de});a.d(t,"getSignupDomain",function(){return pe});a.d(t,"getSharedInviteLink",function(){return he});a.d(t,"getModalTitle",function(){return ve});a.d(t,"getStepNumber",function(){return me});a.d(t,"getStepCallback",function(){return fe});a.d(t,"getCurrentStepValidity",function(){return be});a.d(t,"getIsPromiseRunning",function(){return ge});a.d(t,"getChannelName",function(){return _e});a.d(t,"getChannelId",function(){return ye});a.d(t,"getWorkflow",function(){return Oe});a.d(t,"getActiveWorkflowTask",function(){return ke});a.d(t,"fetchAndSetChannelInfo",function(){return Ee});a.d(t,"fetchAndSetWorkspace",function(){return Ce});a.d(t,"updateStep",function(){return je});a.d(t,"fetchAndSetSharedInviteLink",function(){return we});a.d(t,"validateInvites",function(){return Se});a.d(t,"sendInvites",function(){return Ie});a.d(t,"updateRealName",function(){return Te});a.d(t,"updatePassword",function(){return Ae});a.d(t,"updateGdprPref",function(){return Ne});a.d(t,"setInitialMarketingPref",function(){return Pe});a.d(t,"updateWorkspaceName",function(){return Re});a.d(t,"updateWorkspaceDomain",function(){return Me});a.d(t,"submitDomainWhitelistingPref",function(){return De});a.d(t,"fetchAndSetSignupDetails",function(){return xe});a.d(t,"fetchTeamCreationWorkflow",function(){return Fe});a.d(t,"completeWorkflowTask",function(){return Le});a.d(t,"showSecondAccountSetupBanner",function(){return Be});var R;var M=new g["b"]("team_creation");var D=Object(_["b"])();var x="TEAM_CREATOR_ONBOARDING";var F=Object(c["b"])("Set the primary owner's real name name");F.propTypes=o["b"].string;var L=Object(c["b"])("Set what region we're in, for initial GDPR pref setting");L.propTypes=o["b"].bool;var B=Object(c["b"])("Set the primary owner's GDPR pref");B.propTypes=o["b"].bool;var U=Object(c["b"])("Set workspace name");U.propTypes=o["b"].string;var q=Object(c["b"])("Set workspace domain");q.propTypes=o["b"].string;var G=Object(c["b"])("Set domain whitelisting pref");G.propTypes=o["b"].bool;var W=Object(c["b"])("Set whether or not we can set domain whitelist signups for primary owner's email domain");W.propTypes=o["b"].bool;var H=Object(c["b"])("Set shared invite link");H.propTypes=o["b"].string;var V=Object(c["b"])("Set signup domain for signup domain whitelisting");V.propTypes=o["b"].string;var K=Object(c["b"])("Set which emails to send invites to");K.propTypes=o["b"].array;var z=Object(c["b"])("Set modal title");z.propTypes=o["b"].string;var Y=Object(c["b"])("Set step number");Y.propTypes=o["b"].number;var Q=Object(c["b"])("Set the callback that's fired when 'next' is clicked");Q.propTypes=o["b"].func;var J=Object(c["b"])("Set the validity of the current step.");J.propTypes=o["b"].bool;var Z=Object(c["b"])("Set the whether or not we have an active promise awaiting resolution");Z.propTypes=o["b"].bool;var X=Object(c["b"])("store the channel name corresponding to the onboarding-created channel");X.propTypes=o["b"].string;var $=Object(c["b"])("store the channel ID corresponding to the onboarding-created channel");$.propTypes=o["b"].string;var ee=Object(c["b"])("Set the active team creation workflow for this user");ee.propTypes=o["b"].object;var te={realName:"",inEU:true,gdprPref:false,workspaceName:"",workspaceDomain:"",invites:[],domainWhitelistingPref:false,canWhitelistOwnerEmailDomain:false,modalTitle:"",stepNumber:0,stepCallback:l["noop"],isCurrentStepValid:false,isPromiseRunning:false,channelName:"",channelId:null,workflow:null};var ae=Object(u["b"])((R={},n()(R,F,function(e,t){return s()({},e,{realName:t})}),n()(R,L,function(e,t){return s()({},e,{inEU:t})}),n()(R,B,function(e,t){return s()({},e,{gdprPref:t})}),n()(R,U,function(e,t){return s()({},e,{workspaceName:t})}),n()(R,q,function(e,t){return s()({},e,{workspaceDomain:t})}),n()(R,K,function(e,t){return s()({},e,{invites:t})}),n()(R,V,function(e,t){return s()({},e,{signupDomain:t})}),n()(R,G,function(e,t){return s()({},e,{domainWhitelistingPref:t})}),n()(R,W,function(e,t){return s()({},e,{canWhitelistOwnerEmailDomain:t})}),n()(R,H,function(e,t){return s()({},e,{sharedInviteLink:t})}),n()(R,z,function(e,t){return s()({},e,{modalTitle:t})}),n()(R,Y,function(e,t){return s()({},e,{stepNumber:t})}),n()(R,Q,function(e,t){return s()({},e,{stepCallback:t})}),n()(R,J,function(e,t){return s()({},e,{isCurrentStepValid:t})}),n()(R,Z,function(e,t){return s()({},e,{isPromiseRunning:t})}),n()(R,X,function(e,t){return s()({},e,{channelName:t})}),n()(R,$,function(e,t){return s()({},e,{channelId:t})}),n()(R,ee,function(e,t){return s()({},e,{workflow:t})}),R),te,{persistenceEnabled:false});ae.propTypes={realName:o["b"].string,gdprPref:o["b"].bool,workspaceName:o["b"].string,workspaceDomain:o["b"].string,invites:o["b"].array,domainWhitelistingPref:o["b"].bool,modalTitle:o["b"].string,stepNumber:o["b"].number,stepCallback:o["b"].func,isCurrentStepValid:o["b"].bool,isPromiseRunning:o["b"].bool,channelName:o["b"].string,channelId:o["b"].string,workflow:o["b"].object};var re=t["default"]=ae;var ne=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.realName});var ie=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.inEU});var se=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.gdprPref});var oe=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.workspaceName});var le=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.workspaceDomain});var ce=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.invites});var ue=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.domainWhitelistingPref});var de=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.canWhitelistOwnerEmailDomain});var pe=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.signupDomain});var he=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.sharedInviteLink});var ve=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.modalTitle});var me=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.stepNumber});var fe=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.stepCallback});var be=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.isCurrentStepValid});var ge=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.isPromiseRunning});var _e=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.channelName});var ye=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.channelId});var Oe=Object(d["b"])(function(e){return e&&e.teamCreation&&e.teamCreation.workflow});var ke=Object(d["b"])(function(e){if(!e||!e.teamCreation||!e.teamCreation.workflow||!e.teamCreation.workflow.tasks)return null;var t=e.teamCreation.workflow;if("completed"===t.state)return null;var a=Object(l["find"])(t.tasks,{state:"pending"});return a?a.subtype:null});var Ee=Object(p["b"])("Grab channel ID and channel name for the team creator onboarding dialog",function(e,t){var a=t();var r=Object(f["a"])(a,"default_channels");var n=r.map(function(e){var t=Object(w["d"])(a,e);return t});var i=n.filter(function(e){return"general"!==Object(C["getDisplayNameForChannel"])(a,e,{publicChannelIncludeHashSign:false})&&"random"!==Object(C["getDisplayNameForChannel"])(a,e,{publicChannelIncludeHashSign:false})&&!Object(C["isIm"])(e)});if(!Object(l["isArray"])(i)||void 0===i[0]||null===i[0]){var s={workflow:Oe(a),hasInvited:Object(b["f"])(a,"has_invited"),needsPasswordSet:Object(b["f"])(a,"needs_initial_password_set"),defaultChannels:r};Object(_["a"])({getState:t}).error(s,"TRACTOR_CHANNEL_MISSING");e(X(""));return Promise.resolve()}var o=i[0],c=o.name,u=o.id;e(X(c));e($(u));return Promise.resolve({name:c,id:u})});var Ce=Object(p["b"])("Grab workspace name and domain from boot data",function(e,t){var a=t();var r=Object(v["d"])(a);var n=Object(v["i"])(a,r.id);var i=Object(j["getTeamDisplayName"])(n);var s=Object(j["getTeamUrl"])(n);var o=Object(y["getTeamSubdomain"])(s);e(U(i));e(q(o))});var je=Object(p["b"])("Update the state of a step",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.number,n=a.validated,i=a.forceValidation;var s=t();var o=be(s);var l=n||(i?n:o);if(l&&r){e(J(null));e(Y(r));return Promise.resolve({isValid:l})}if(l){e(J(l));return Promise.resolve({isValid:l})}e(J(l));return Promise.resolve({isValid:l})});je.propTypes={number:o["b"].number,validated:o["b"].bool};var we=Object(p["b"])("Create a shared invite link",function(e){var t={expiration:30,maxSignups:2e3,disableEmail:true};return e(Object(A["c"])(s()({},t))).then(function(t){var a=t.url;a&&e(H(a))}).catch(function(e){return Promise.reject(e)})});var Se=Object(p["b"])("validate emails to send invites to",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.invites;if(!r||!r.length){e(K([]));return Promise.resolve()}return E(r).then(function(t){var a=t.validatedEmails;e(K(a));return Promise.resolve(t)}).catch(function(e){D.info(x,e);var t={one_invalid_email:M.t("It looks like that email address isn\u2019t valid. Try again?"),multiple_invalid_emails:M.t("It looks like at least one of these addresses isn\u2019t valid. Try checking your list?")};var a=e.name||"generic_validate_invites_error";var r=Object(l["get"])(t,a)||null;var n=new Error(r);n.name=a;return Promise.reject(n)})});Se.propTypes={invites:o["b"].string};var Ie=Object(p["b"])("update the list of emails to send invites to",function(e,t){var a=t();var r=ce(a);if(!r||!r.length)return Promise.resolve();e(Z(true));var n=r.map(function(e){return{email:e,type:"regular"}});return e(Object(A["j"])({invites:n,source:"team_creation_account_setup_dialog",mode:"manual"})).then(function(e){D.info(x,e)}).catch(function(e){var t=Object(l["get"])(e,"data.error","generic_send_invites_error");var a=new Error(t);a.name="email_send_failure";return Promise.reject(a)}).finally(function(){return e(Z(false))})});var Te=Object(p["b"])("update real name field in profile",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.realName;e(Z(true));return e(Object(S["l"])({profile:{real_name:r}})).then(function(t){t.ok&&e(F(r));return Promise.resolve(t)}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;var a={invalid_name_required:Object(P["a"])("name_invalid_name_required"),invalid_starts_with_at:Object(P["a"])("invalid_starts_with_at"),too_long:Object(P["a"])("too_long"),invalid_reserved_word:Object(P["a"])("invalid_reserved_word"),invalid_name_specials:Object(P["a"])("name_invalid_name_specials"),invalid_emoji_not_allowed:Object(P["a"])("invalid_emoji_not_allowed",{name:r}),ratelimited:M.t("Sorry, you\u2019ve hit the rate limit. You\u2019ll be able to try again soon.")};var n=t.error||"generic_real_name_error";var i=a[n]||M.t("For some reason, that didn\u2019t work. Please try again to continue.");var s=new Error(i);s.name=n;return Promise.reject(s)}).finally(function(){return e(Z(false))})});Te.propTypes={realName:o["b"].string};var Ae=Object(p["b"])("update Primary Owner account password",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.password;e(Z(true));return e(Object(I["b"])({password:r})).then(function(e){return Promise.resolve(e)}).catch(function(e){return Promise.reject(e)}).finally(function(){return e(Z(false))})});Ae.propTypes={password:o["b"].string.isRequired};var Ne=Object(p["b"])("update Primary Owners GDPR pref",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.gdprPref;return e(Object(T["b"])({email_weekly:r,email_tips:r,email_offers:r,email_research:r,email_developer:r,email_changelog:r})).then(function(t){t.ok&&e(B(r));return Promise.resolve(t)}).catch(function(e){var t=Object(l["get"])(e,"data.error","generic_gdpr_error");var a=new Error(t);a.name="generic_gdpr_error";return Promise.reject(a)})});Ne.propTypes={gdprPref:o["b"].bool};var Pe=Object(p["b"])("Set initial marketing email pref based on region",function(e,t){var a=t();var r=!!Object(h["getFromBootData"])(a,"is_europe");e(L(r));r||e(Ne({gdprPref:true}))});var Re=Object(p["b"])("update workspace name",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.workspaceName;return e(Object(I["d"])({workspaceName:r})).then(function(t){t.ok&&r&&e(U(r));return Promise.resolve(t)}).catch(function(e){var t={denied:M.t("For some reason, that didn\u2019t work. Please try again to continue.")};var a=Object(l["get"])(e,"data.error","generic_workspace_name_error");var r=Object(l["get"])(t,a)||M.t("For some reason, that didn\u2019t work. Please try again to continue.");var n=new Error(r);n.name=a;return Promise.reject(n)})});Re.propTypes={workspaceName:o["b"].string};var Me=Object(p["b"])("update workspace domain",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.workspaceDomain;return e(Object(I["c"])({workspaceDomain:r})).then(function(t){t.ok&&e(q(r));return Promise.resolve(t)}).catch(function(e){var t={denied:M.t("For some reason, that didn\u2019t work. Please try again to continue."),bad_url:M.t("Workspace URLs can only have letters, numbers, and dashes."),long_url:M.t("Please enter up to 21 characters for your Workspace URL."),taken_url:M.t("This URL is not available. Sorry!")};var a=Object(l["get"])(e,"data.error","generic_workspace_domain_error");var r=t[a]||M.t("For some reason, that didn\u2019t work. Please try again to continue.");var n=new Error(r);n.name=a;return Promise.reject(n)})});Me.propTypes={workspaceDomain:o["b"].string};var De=Object(p["b"])("submit domain whitelisting pref",function(e,t){var a=t();var r=ue(a);var n={signup_mode:"invites"};if(r){var i=pe(a);n.signup_mode="email";n.signup_domains=i}e(Object(I["i"])({prefs:n})).then(function(t){t.ok&&e(G(r));return Promise.resolve(t)}).catch(function(e){var t=Object(l["get"])(e,"data.error","generic_domain_whitelisting_error");var a=new Error(t);a.name="generic_domainwhitelisting_error";return Promise.reject(a)})});var xe=Object(p["b"])("Grab primary owner email domain for domain whitelisting",function(e,t){var a=t();var r=Object(m["b"])(a);var n=Object(l["get"])(r,"profile.email");var i=n.split("@")[1];e(Object(I["f"])({domain:i})).then(function(t){if(!t.ok)return e(W(false));e(V(i));return e(W(true))}).catch(function(e){D.info(x,"Failed to check if email domain can be whitelisted for signups.");return Promise.reject(e)})});var Fe=Object(p["b"])("Fetch the team creation workflow for this user",function(e){return e(Object(I["a"])({onlyActive:false})).then(function(t){var a=t.user_workflows;var r=Object(l["find"])(a,function(e){return"account_setup"===e.type&&"team_creation"===e.subtype});r&&e(ee(r));return Promise.resolve(r)}).catch(function(e){D.info(x,"Failed to fetch workflows list.");return Promise.reject(e)})});Fe.propTypes=o["b"].object;var Le=Object(p["b"])("Complete team creation workflow for this user",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.taskSubtype;var n=Oe(t());if(!n||!n.tasks.length)return Promise.reject(new Error("No workflow or tasks found for this user."));var i=Object(l["find"])(n.tasks,function(e){return"account_setup"===e.type&&e.subtype===r});if(!i)return Promise.reject(new Error("Could not find task of subtype "+r+"."));e(Z(true));return e(Object(I["g"])({userTaskId:i.user_task_id})).then(function(t){if(t.ok&&"complete_team_creator_account_setup"===r){var a=s()({},n,{state:"completed"});e(ee(a));e(Object(I["h"])(n.user_workflow_id));Object(N["a"])()}return Promise.resolve(t)}).catch(function(e){D.info(x,"Failed to complete workflow task.");return Promise.reject(e)}).finally(function(){return e(Z(false))})});Le.propTypes={taskSubtype:o["b"].string.isRequired};var Be=Object(p["b"])("Display the second team creation account setup banner for this user",function(e,t){var a=Oe(t());if(!a)return Promise.resolve();var r=Object(l["find"])(a.tasks,function(e){return"account_setup"===e.type&&"start_team_creator_account_setup"===e.subtype});if(!r)return Promise.reject(new Error("Could not find initial account setup task."));var n=[s()({},r,{state:"completed"}),s()({},a.tasks[1])];var i=s()({},a,{tasks:n});return e(ee(i))});Le.propTypes=o["b"].object},,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"c",function(){return i});a.d(t,"d",function(){return s});a.d(t,"a",function(){return o});a.d(t,"b",function(){return l});a.d(t,"e",function(){return c});var r=a(0);var n=a(18);var i=Object(n["b"])("Marks topics as desynced");i.propTypes=r["b"].arrayOf(r["b"].string).isRequired;var s=Object(n["b"])("Marks topics as resynced");s.propTypes=r["b"].arrayOf(r["b"].string).isRequired;var o=Object(n["b"])("Clear all topics");o.propTypes=null;var l=Object(n["b"])("Notify resynced");l.propTypes=null;var c=Object(n["b"])("Notify Sonic resynced");c.propTypes=null},,,,function(e,t,a){"use strict";a.d(t,"a",function(){return i});a.d(t,"b",function(){return n});a.d(t,"c",function(){return r});var r={NUMBER_OF_USERS_IS_REQUIRED:"number_of_users_is_required",PURCHASE_ORDER_NUMBER_INVALID_CHARACTERS:"invalid_po_number",NUMBER_OF_USERS_INVALID_CHARACTERS:"invalid_number_of_users",NUMBER_OF_USERS_INVALID_MIN_ALLOWED:"invalid_min_number_of_users",NUMBER_OF_USERS_INVALID_MAX_ALLOWED:"invalid_max_number_of_users"};var n={NUMERIC_WITH_MIN_MAX_LENGTH_REGEX:/^\d{1,20}$/,NUMERIC_REGEX:/^\d+$/};var i={NUMBER_OF_USERS:"numberOfUsers",ADDITIONAL_BILLING_CONTACTS:"additionalBillingContacts",PURCHASE_ORDER_NUMBER:"purchaseOrderNumber"}},,,,function(e,t,a){"use strict";a.d(t,"b",function(){return i});a.d(t,"c",function(){return r});a.d(t,"a",function(){return n});var r={CARD_NUMBER:"cardNumber",CARD_EXPIRY:"cardExpiry",CARD_CVC:"cardCvc",POSTAL_CODE:"postalCode"};var n="new_credit_card_id";var i=9},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"l",function(){return p});a.d(t,"m",function(){return h});a.d(t,"a",function(){return v});a.d(t,"c",function(){return m});a.d(t,"k",function(){return f});a.d(t,"d",function(){return b});a.d(t,"j",function(){return D});a.d(t,"g",function(){return L});a.d(t,"b",function(){return B});a.d(t,"e",function(){return U});a.d(t,"f",function(){return q});a.d(t,"h",function(){return G});a.d(t,"i",function(){return W});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(2);var l=a.n(o);var c=a(10);var u=a(33);var d=new c["b"]("checkout_v2");function p(e,t){var a=H();if(Object(o["isEmpty"])(a))return{};return s()({},_(e,a),y(e,a,t),O(e,a),k(e,a))}function h(e,t,a){var r=null;var n=H();if(Object(o["isEmpty"])(n))return r;var i=e.companyName,s=e.street,l=e.city,c=e.country,d=e.postalCode,p=e.region,h=e.vatId,v=e.isBusinessPurchase,m=e.isVatIdAvailable,f=e.abnId,b=e.qstId;switch(t){case u["b"].COMPANY_NAME:r=S(i,n);break;case u["b"].STREET:r=I(s,n);break;case u["b"].CITY:r=T(l,n);break;case u["b"].COUNTRY:r=A(c,n);break;case u["b"].POSTAL_CODE:r=N(c,d,n);break;case u["b"].REGION:r=P(c,p,n);break;case u["b"].VAT_ID:r=M(c,h,v,m,a,n);break;case u["b"].ABN_ID:r=x(f,n);break;case u["b"].QST_ID:r=F(b,n);break;default:}return r}function v(e,t,a){var r=H();if(Object(o["isEmpty"])(r))return{};var n={};var i=u["f"].DEFAULT_ERROR;"102"===e?i=u["f"].ZIP_CODE_INVALID_API_ERROR:t===u["f"].VAT_ID_INPUT_ERROR?i=a?u["f"].VAT_ID_INVALID_API_ERROR:u["f"].VAT_ID_INVALID_FORMAT:Object(o["has"])(u["f"],t)&&(i=t);switch(i){case u["f"].ZIP_CODE_INVALID_API_ERROR:n.postalCode=C(u["f"].ZIP_CODE_INVALID_API_ERROR,"",r);break;case u["f"].VAT_ID_INVALID_API_ERROR:n.vatId=C(u["f"].VAT_ID_INVALID_API_ERROR,"",r);break;case u["f"].VAT_ID_INVALID_FORMAT:n.vatId=C(u["f"].VAT_ID_INVALID_FORMAT,"",r);break;case u["f"].API_ERROR:case u["f"].ADDRESS_INPUT_ERROR:case u["f"].ERROR_UPDATING_BILLING_ADDRESS:case u["f"].NO_PERMS:case u["f"].INVALID_AUTH:default:n.general=C(u["f"].DEFAULT_ERROR,"",r)}return n}function m(e){return f(e)?d.t("Zip code"):d.t("Postal code")}function f(e){return e===u["e"].UNITED_STATES}function b(e){return g(e)?d.t("State"):d.t("State / Province")}function g(e){return e===u["e"].UNITED_STATES}function _(e,t){var a={};var r=S(e.companyName,t);r&&(a.companyName=r);var n=I(e.street,t);n&&(a.street=n);var i=T(e.city,t);i&&(a.city=i);var s=A(e.country,t);s&&(a.country=s);var o=N(e.country,e.postalCode,t);o&&(a.postalCode=o);var l=P(e.country,e.region,t);l&&(a.region=l);return a}function y(e,t,a){var r={};var n=R(e.isBusinessPurchase,t);n&&(r.isBusinessPurchase=n);var i=M(e.country,e.vatId,e.isBusinessPurchase,e.isVatIdAvailable,a,t);i&&(r.vatId=i);return r}function O(e,t){var a={};var r=x(e.abnId,t);r&&(a.abnId=r);return a}function k(e,t){var a={};var r=F(e.qstId,t);r&&(a.qstId=r);return a}function E(e){return e===u["e"].UNITED_STATES||e===u["e"].CANADA}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var a=arguments[2];var r=a[e]||{};switch(e){case u["f"].POSTAL_CODE_IS_REQUIRED:case u["f"].POSTAL_CODE_INVALID_CHARACTERS:case u["f"].POSTAL_CODE_INVALID_API_ERROR:r=j(e,t,a);break;case u["f"].REGION_IS_REQUIRED:case u["f"].REGION_INVALID_CHARACTERS:r=w(e,t,a);break;default:}return r}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var a=arguments[2];var r=a[e]||{};if(t===u["e"].UNITED_STATES)switch(e){case u["f"].POSTAL_CODE_IS_REQUIRED:r=a[u["f"].ZIP_CODE_IS_REQUIRED];break;case u["f"].POSTAL_CODE_INVALID_CHARACTERS:r=a[u["f"].ZIP_CODE_INVALID_CHARACTERS];break;case u["f"].POSTAL_CODE_INVALID_API_ERROR:r=a[u["f"].ZIP_CODE_INVALID_API_ERROR];break;default:}return r}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var a=arguments[2];var r=a[e]||{};if(t===u["e"].UNITED_STATES)switch(e){case u["f"].REGION_IS_REQUIRED:r=a[u["f"].STATE_IS_REQUIRED];break;case u["f"].REGION_INVALID_CHARACTERS:r=a[u["f"].STATE_INVALID_CHARACTERS];break;default:}return r}function S(e,t){var a=null;e||(a=C(u["f"].COMPANY_NAME_IS_REQUIRED,"",t));return a}function I(e,t){var a=null;e?u["a"].ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX.test(e)||(a=C(u["f"].STREET_INVALID_CHARACTERS,"",t)):a=C(u["f"].STREET_IS_REQUIRED,"",t);return a}function T(e,t){var a=null;e?u["a"].ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX.test(e)||(a=C(u["f"].CITY_INVALID_CHARACTERS,"",t)):a=C(u["f"].CITY_IS_REQUIRED,"",t);return a}function A(e,t){var a=null;e||(a=C(u["f"].COUNTRY_IS_REQUIRED,"",t));return a}function N(e,t,a){var r=null;E(e)?t?u["a"].ALPHA_NUMERIC_WITH_DASH_REGEX.test(t)?e!==u["e"].UNITED_STATES||u["a"].US_POSTAL_CODE_FORMAT_REGEX.test(t)?e!==u["e"].CANADA||u["a"].CANADA_POSTAL_CODE_FORMAT_REGEX.test(t)||(r=C(u["f"].CANADA_POSTAL_CODE_INVALID_FORMAT,e,a)):r=C(u["f"].US_ZIP_CODE_INVALID_FORMAT,e,a):r=C(u["f"].POSTAL_CODE_INVALID_CHARACTERS,e,a):r=C(u["f"].POSTAL_CODE_IS_REQUIRED,e,a):t&&!u["a"].ALPHA_NUMERIC_WITH_DASH_REGEX.test(t)&&(r=C(u["f"].POSTAL_CODE_INVALID_CHARACTERS,e,a));return r}function P(e,t,a){var r=null;E(e)&&!t?r=C(u["f"].REGION_IS_REQUIRED,e,a):t&&!u["a"].ALPHA_NUMERIC_WITH_UTF_CHARS_REGEX.test(t)&&(r=C(u["f"].REGION_INVALID_CHARACTERS,e,a));return r}function R(e,t){var a=null;null===e&&(a=C(u["f"].IS_BUSINESS_PURCHASE_IS_REQUIRED,"",t));return a}function M(e,t,a,r,n,i){var s=null;if(a&&r&&D(e,n))if(t)e!==u["e"].RUSSIAN_FEDERATION||u["a"].TIN_ID_REGEX.test(t)?u["a"].ALPHA_NUMERIC_WITH_DASH_REGEX.test(t)||(s=C(u["f"].VAT_ID_INVALID_CHARACTERS,"",i)):s=C(u["f"].TIN_ID_INVALID_LENGTH,"",i);else{var o=u["f"].VAT_ID_IS_REQUIRED;e===u["e"].RUSSIAN_FEDERATION&&(o=u["f"].TIN_ID_IS_REQUIRED);s=C(o,"",i)}return s}function D(e,t){return Object(o["has"])(t,e)}function x(e,t){var a=null;e&&(11!==e.replace(/\s/g,"").length?a=C(u["f"].ABN_ID_INVALID_LENGTH,"",t):u["a"].ABN_ID_REGEX.test(e)||(a=C(u["f"].ABN_ID_INVALID_CHARACTERS,"",t)));return a}function F(e,t){var a=null;e&&((9!==e.length||u["a"].QST_ID_NINE_NUM_REGEX.test(e))&&(10!==e.length||u["a"].QST_ID_NR_REGEX.test(e)||u["a"].QST_ID_TEN_NUM_REGEX.test(e))&&(9===e.length||10===e.length||u["a"].QST_ID_TQ_REGEX.test(e))||(a=C(u["f"].QST_ID_INVALID_FORMAT,"",t)));return a}function L(e,t){return Object(o["has"])(t,e)}function B(e){return e===u["e"].RUSSIAN_FEDERATION?d.t("Do you have a TIN ID on hand?"):d.t("Do you have a VAT ID on hand?")}function U(e){return e===u["e"].RUSSIAN_FEDERATION?d.t("TIN ID"):d.t("VAT ID")}function q(e){if(e===u["e"].RUSSIAN_FEDERATION)return u["d"].TIN_ID;return u["d"].VAT_ID}function G(e){return e===u["e"].JAPAN}function W(e,t){return e===u["e"].CANADA&&"Quebec"===t}function H(){var e;return e={},n()(e,u["f"].COMPANY_NAME_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a company name.")}),n()(e,u["f"].STREET_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a street address.")}),n()(e,u["f"].CITY_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a city.")}),n()(e,u["f"].POSTAL_CODE_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a postal code.")}),n()(e,u["f"].ZIP_CODE_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a zip code.")}),n()(e,u["f"].REGION_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include your state / province.")}),n()(e,u["f"].STATE_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include your state.")}),n()(e,u["f"].COUNTRY_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include your country.")}),n()(e,u["f"].VAT_ID_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a VAT ID.")}),n()(e,u["f"].STREET_INVALID_CHARACTERS,{errorText:d.t("Your street address can\u2019t contain special characters.")}),n()(e,u["f"].CITY_INVALID_CHARACTERS,{errorText:d.t("Your city name can\u2019t contain special characters.")}),n()(e,u["f"].REGION_INVALID_CHARACTERS,{errorText:d.t("Your state / province can\u2019t contain special characters.")}),n()(e,u["f"].STATE_INVALID_CHARACTERS,{errorText:d.t("Your state can\u2019t contain special characters.")}),n()(e,u["f"].POSTAL_CODE_INVALID_CHARACTERS,{errorText:d.t("Your postal code can\u2019t contain special characters.")}),n()(e,u["f"].ZIP_CODE_INVALID_CHARACTERS,{errorText:d.t("Your zip code can\u2019t contain special characters.")}),n()(e,u["f"].VAT_ID_INVALID_CHARACTERS,{errorText:d.t("Your VAT ID can\u2019t contain special characters.")}),n()(e,u["f"].ABN_ID_INVALID_CHARACTERS,{errorText:d.t("Your ABN ID can\u2019t contain special characters.")}),n()(e,u["f"].US_ZIP_CODE_INVALID_FORMAT,{errorText:d.t("Please use a 5- or 9-digit zip code.")}),n()(e,u["f"].CANADA_POSTAL_CODE_INVALID_FORMAT,{errorText:d.t("Please use a valid Canadian postal code.")}),n()(e,u["f"].POSTAL_CODE_INVALID_API_ERROR,{errorText:d.t("There\u2019s a problem with your postal code.")}),n()(e,u["f"].ZIP_CODE_INVALID_API_ERROR,{errorText:d.t("There\u2019s a problem with your zip code.")}),n()(e,u["f"].VAT_ID_INVALID_API_ERROR,{errorText:d.t("We could not verify your VAT ID.")}),n()(e,u["f"].VAT_ID_INPUT_ERROR,{errorText:d.t("Unfortunately, this VAT ID doesn\u2019t seem to be valid.")}),n()(e,u["f"].VAT_ID_INVALID_FORMAT,{errorText:d.t("Unfortunately, this VAT ID doesn\u2019t seem to be valid.")}),n()(e,u["f"].ABN_ID_INVALID_LENGTH,{errorText:d.t("Your ABN ID should have 11 digits.")}),n()(e,u["f"].DEFAULT_ERROR,{errorText:d.t("Unfortunately, something\u2019s gone wrong.")}),n()(e,u["f"].TIN_ID_IS_REQUIRED,{errorText:d.t("You\u2019ll need to include a TIN ID.")}),n()(e,u["f"].TIN_ID_INVALID_LENGTH,{errorText:d.t("Your TIN ID should have 10 or 12 digits.")}),n()(e,u["f"].IS_BUSINESS_PURCHASE_IS_REQUIRED,{errorText:d.t("Please let us know whether this is a business purchase.")}),n()(e,u["f"].QST_ID_INVALID_FORMAT,{errorText:d.t("Your QST ID should have 16 characters: 10 numbers, the letters TQ, and then four more numbers.")}),e}},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(0);var s=a(18);var o=a(15);var l=a(29);var c=a(25);var u=a(92);var d=a(212);var p=Object(c["a"])("Fetch Available Plans",function(e,t,a){return e(Object(l["a"])({reason:"payments-plans-fetch-available-plans",method:"retail.plans",args:n()({},a,{checkout_step:Object(d["r"])(t())})})).then(function(e){return Object(u["j"])(e.plans)})});p.propTypes=i["b"].object;var h=Object(c["a"])("Fetch Available Plans",function(e,t,a){var r=a.productId,i=a.country,s=a.region,o=a.postalCode,c=a.street,p=a.isBusinessPurchase,h=a.isInvoice,v=a.numInvoiceSeats,m=a.isFinalReview;var f=Object(d["r"])(t());var b={state:s,product_id:r,is_final_review:m,checkout_step:f};m||(b=n()({},b,{country:i,street1:c,zip:o,is_business:p}));h&&(b=n()({},b,{requested_invoice_seats:v}));return e(Object(l["a"])({reason:"payments-plans-fetch-cost-data",method:"retail.cost",args:b})).then(function(e){return Object(u["i"])(e.plan_cost)})});h.propTypes={productId:i["b"].string,country:i["b"].string,postalCode:i["b"].string,isBusinessPurchase:i["b"].bool,isInvoice:i["b"].bool,numInvoiceSeats:i["b"].number,isFinalReview:i["b"].bool};var v=a(190);a.d(t,"a",function(){return f});a.d(t,"l",function(){return b});a.d(t,"h",function(){return g});a.d(t,"c",function(){return _});a.d(t,"i",function(){return y});a.d(t,"g",function(){return O});a.d(t,"k",function(){return k});a.d(t,"j",function(){return E});a.d(t,"o",function(){return C});a.d(t,"n",function(){return j});a.d(t,"d",function(){return S});a.d(t,"e",function(){return I});a.d(t,"f",function(){return T});a.d(t,"b",function(){return N});a.d(t,"p",function(){return P});a.d(t,"m",function(){return R});var m={EXPIRED_COST_REQUEST:"EXPIRED_COST_REQUEST"};var f=250;var b=Object(s["b"])("Switch currently active plan");b.propTypes=i["b"].object;var g=Object(s["b"])("Successfully fetched available plans");g.propTypes=i["b"].object;var _=Object(s["b"])("Successfully fetched cost for current plan");_.propTypes=i["b"].object;var y=Object(s["b"])("Received an API error");y.propTypes=null;var O=Object(s["b"])("Plans and cost data loaded");O.propTypes=null;var k=Object(s["b"])("Set Plan Level");k.propTypes=i["b"].string;var E=Object(s["b"])("Set Payment Method");E.propTypes=i["b"].string;var C=Object(s["b"])("Update Is Plans Data Loading");C.propTypes=i["b"].object;var j=Object(s["b"])("Update Is Cost Data Loading");j.propTypes=i["b"].object;var w=0;function S(e){return function(t,a){return new Promise(function(r,i){var s=a();var o=Object(v["s"])(s);var l=Object(d["b"])(s);var c=Object(v["j"])(s);t(j({isCostDataLoading:true}));var u=parseInt(Object(d["m"])(s).numberOfUsers,10)||0;var p=e.isFinalReview||false;var f=Object(v["A"])(s,o,l,c,u);var b=w+1;w=b;if(f&&!p)window.setTimeout(function(){if(w===b){var e=Object(v["E"])(s,o,l,c,u);t(_({activePlanCost:e,companyAddress:l,isInvoice:c,numInvoiceSeats:u}));t(j({isCostDataLoading:false}));r()}else i(new Error(m.EXPIRED_COST_REQUEST))},250);else{var g=l.country,O=l.region,k=l.street,E=l.postalCode,C=l.isBusinessPurchase;var S={productId:o,country:g,region:O,postalCode:E,street:k,isBusinessPurchase:C,isInvoice:c,numInvoiceSeats:u,isFinalReview:p};t(h(S)).then(function(e){if(w===b){t(j({isCostDataLoading:false}));t(_(n()({},e,{companyAddress:l,isInvoice:c,numInvoiceSeats:u})));r()}else i(new Error(m.EXPIRED_COST_REQUEST))}).catch(function(e){"max_user_count_exceed_for_ss_invoice"!==e.data.error?t(y()):t(j({isCostDataLoading:false}))})}})}}function I(e){return function(t,a){return new Promise(function(r){t(C({isPlansDataLoading:true}));var n=Object(d["c"])(a());t(p({country:n})).then(function(a){Promise.all([t(g(a)),t(S(e)),t(C({isPlansDataLoading:false}))]).then(function(){t(O());r()}).catch(function(e){e.message!==m.EXPIRED_COST_REQUEST&&t(y())})}).catch(function(){return t(y())})})}}I.propTypes={country:i["b"].string};function T(){return function(e){return new Promise(function(t){e(p()).then(function(a){e(g(a));t()})})}}var A=function e(t,a,r){if(a===r)return Promise.resolve();return t(S({isFinalReview:false}))};var N=Object(o["b"])("Async thunk to change active plan initiated",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=Object(v["s"])(t());e(b(a));var n=Object(v["s"])(t());return A(e,r,n)});N.propTypes={term:i["b"].string,currency:i["b"].string};function P(e){return function(t,a){var r=Object(v["s"])(a());t(k(e));var n=Object(v["s"])(a());return A(t,r,n)}}function R(e){return function(t,a){var r=Object(v["s"])(a());t(E(e));var n=Object(v["s"])(a());A(t,r,n)}}},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(30);function n(e){var t=e.error,a=e.description,n=e.subtype,i=e.teamId,s=e.version;var o=r["isDev"]?"https://dev.slack.com/beacon/error":"https://slack.com/beacon/error";var l=t;l instanceof Error&&(l.subtype=n);"string"===typeof l&&(l={message:l,subtype:n});l||(l={subtype:n});var c={description:a,version:s,error_json:JSON.stringify(l,Object.getOwnPropertyNames(l)),team:i};var u=new XMLHttpRequest;u.open("POST",o,true);u.setRequestHeader("Content-type","application/x-www-form-urlencoded");u.send(encodeURI(Object.keys(c).map(function(e){return e+"="+c[e]}).join("&")))}a.d(t,"a",function(){return i});a.d(t,"b",function(){return s});var i=function e(t){var a=t.error,r=t.description,i=t.subtype,s=t.teamId;n({error:a,teamId:s,description:r,subtype:i+"_payment_api_error",version:"checkout_v2"})};var s=function e(t){var a=t.error,r=t.description,i=t.subtype,s=t.teamId;n({error:a,teamId:s,description:r,subtype:i+"_payment_critical_user_facing_error",version:"checkout_v2"})}},,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(10);var n=a(226);var i=Object(r["q"])();function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t=arguments[1];var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.displayTrailingZeroes,s=void 0!==r&&r,o=a.currencyDisplay,l=void 0===o?"symbol":o;if(!t)return null;var c={coerce:true,style:"currency",currency:t,currencyDisplay:l};e%100!==0||s||(c.minimumFractionDigits=0);return Object(n["b"])(e,i,c)}var o={};Object.defineProperty(o,"locale",{get:function e(){return i},set:function e(t){i=t}});t["a"]=s},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"test",function(){return j});a.d(t,"updateTyping",function(){return w});a.d(t,"clearTyping",function(){return S});a.d(t,"clearTypingCleanupInterval",function(){return I});a.d(t,"bulkClearTyping",function(){return T});a.d(t,"getAllTyping",function(){return M});a.d(t,"getTypingByKey",function(){return D});a.d(t,"getNumberOfRecords",function(){return x});a.d(t,"getTyperIdsInChannel",function(){return F});a.d(t,"removeOldTypingRecords",function(){return L});a.d(t,"memberStartedTyping",function(){return B});a.d(t,"currentUserStartedTyping",function(){return U});a.d(t,"memberEndedTyping",function(){return q});a.d(t,"currentUserEndedTyping",function(){return G});a.d(t,"checkTypingMap",function(){return W});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(37);var l=a.n(o);var c=a(0);var u=a(2);var d=a.n(u);var p=a(18);var h=a(36);var v=a(14);var m=a(15);var f=a(269);var b=a(4);var g=a(52);var _=a(897);var y;var O=g["isConnected"];var k=f["send"];var E=_["b"];var C=_["a"];var j={};Object.defineProperty(j,"isConnected",{get:function e(){return O},set:function e(t){O=t}});Object.defineProperty(j,"send",{get:function e(){return k},set:function e(t){k=t}});Object.defineProperty(j,"legacyMemberTypingStarted",{get:function e(){return E},set:function e(t){E=t}});Object.defineProperty(j,"legacyMemberTypingEnded",{get:function e(){return C},set:function e(t){C=t}});var w=Object(p["b"])("Update typing timestamp for a given key");w.propTypes={key:c["b"].string.isRequired,started:c["b"].number.isRequired,model_ob_id:c["b"].string.isRequired,member_id:c["b"].string.isRequired,member_is_self:c["b"].bool};var S=Object(p["b"])("Remove typing activity for a given key");S.propTypes={key:c["b"].string.isRequired};var I=Object(p["b"])("Stop the typing cleanup interval because there are no users typing");I.propTypes=null;var T=Object(p["b"])("Remove typing activity for multiple keys");T.propTypes=c["b"].arrayOf(c["b"].string);var A=5e3;var N=6e3;var P={};var R=Object(h["b"])((y={},n()(y,w,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=t.key,r=l()(t,["key"]);if(!a)return e;if(e[a])return s()({},e,n()({},a,s()({},e[a],{started:r.started})));return s()({},e,n()({},a,s()({},r)))}),n()(y,S,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.key;if(!a||!e[a])return e;return d.a.omit(e,a)}),n()(y,T,function(e,t){if(!t||!t.length||!d.a.isArray(t))return e;var a=d.a.omit(e,t);if(Object.keys(a).length===Object.keys(e).length)return e;return a}),y),P,{persistenceEnabled:false});R.propTypes=c["b"].objectOf(c["b"].shape({started:c["b"].number,model_ob_id:c["b"].string,member_id:c["b"].string,member_is_self:c["b"].bool}));t["default"]=R;var M=Object(v["b"])(function(e){return e&&e.typing});var D=Object(v["b"])(function(e,t){return e&&e.typing&&e.typing[t]});var x=Object(v["b"])(function(e){return e&&e.typing&&Object.keys(e.typing).length});var F=Object(v["b"])(function(e,t){var a=d.a.filter(e&&e.typing,function(e){return e.model_ob_id===t&&!e.member_is_self});return d.a.map(a,"member_id")});var L=Object(m["b"])("remove old typing records",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.now;var n=M(t());var i=d.a.map(n,function(e,t){var a=e.member_is_self?A:N;var n=r-e.started;if(n>=a)return t;return null});i=d.a.compact(i);i.length&&e(T(i))});L.propTypes={now:c["b"].number.isRequired};var B=Object(m["b"])("member started typing (also dispatched by currentUserStartedTyping)",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.memberId;var i=t();var s=r+"_"+n;var o=Date.now();var l=!D(i,s);e(w({key:s,started:o,model_ob_id:r,member_id:n,member_is_self:Object(b["getCurrentUserId"])(i)===n}));l&&E(r,n)});B.propTypes={channelId:c["b"].string.isRequired,memberId:c["b"].string.isRequired};var U=Object(m["b"])("logged in user has started typing",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId;var n=t();if(!O(n))return;if(!r)return;var i=Object(b["getCurrentUserId"])(n);var s=r+"_"+i;if(D(n,s))return;var o={type:"typing",channel:r};e(k(o));e(B({channelId:r,memberId:i}))});U.propTypes={channelId:c["b"].string.isRequired};var q=Object(m["b"])("member stopped typing (also dispatched by currentUserEndedTyping)",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.memberId;var i=r+"_"+n;e(S({key:i}));C(r,n)});q.propTypes={channelId:c["b"].string.isRequired,memberId:c["b"].string.isRequired};var G=Object(m["b"])("logged in user has stopped typing",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId;if(!r)return;var n=t();var i=Object(b["getCurrentUserId"])(n);e(q({channelId:r,memberId:i}))});G.propTypes={channelId:c["b"].string.isRequired};var W=Object(m["b"])("Periodically update the typing map to look for typing records that have expired, and update legacy of the changes",function(e,t){var a=Date.now();var r=0;var n=M(t());e(L({now:a}));var i=M(t());var s=d.a.difference(Object.keys(n),Object.keys(i));s.forEach(function(e){var t=n[e];C(t.model_ob_id,t.member_id)});r=x(t());r<1&&e(I())})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"d",function(){return f});a.d(t,"b",function(){return b});a.d(t,"h",function(){return g});a.d(t,"g",function(){return _});a.d(t,"a",function(){return y});a.d(t,"e",function(){return O});a.d(t,"c",function(){return k});a.d(t,"f",function(){return C});var r=a(2);var n=a.n(r);var i=a(0);var s=a(29);var o=a(25);var l=a(23);var c=a(33);var u=a(12);var d=a(367);var p=a(212);var h=a(313);var v="checkout_v2";var m=function e(t,a){var r=c["c"].COMPANY_NAME,n=c["c"].STREET,i=c["c"].SUITE,s=c["c"].CITY,o=c["c"].REGION,l=c["c"].POSTAL_CODE,u=c["c"].COUNTRY,d=c["c"].IS_BUSINESS_PURCHASE,p=c["c"].IS_VAT_AVAILABLE,v=c["c"].VAT_ID,m=c["c"].ABN_ID,f=c["c"].QST_ID;var b=t.country||u;var g=t.state||o;var _=false;var y=false;var O=v;if(b)if(Object(h["j"])(b,a)){_=null===t.is_business?d:t.is_business;y=null===t.waiting_for_vat?p:!t.waiting_for_vat;O=t.vat_id||v}else Object(h["h"])(b)&&(_=t.is_business);else{_=d;y=p}var k=f;Object(h["i"])(b,g)&&(k=t.tax_id||f);return{companyName:t.company_name||r,street:t.street1||n,suite:t.street2||i,city:t.city||s,postalCode:t.zip||l,region:g,country:b,isBusinessPurchase:_,isVatIdAvailable:y,vatId:O,abnId:t.abn_id||m,qstId:k}};var f=Object(o["a"])("Fetch States and Countries",function(e,t){var a=Object(p["r"])(t());return e(Object(s["a"])({reason:"checkout-flow-fetch-states-countries-data",method:"payments.billing.addresses.locations",args:{checkout_step:a}})).then(function(e){Object(u["a"])({getState:t}).info(v,"Successfully fetched states and countries");if(Object(r["includes"])(Object(r["keys"])(e.vat_countries),c["e"].UNITED_KINGDOM)){e.vat_countries[c["e"].UNITED_KINGDOM_UK]=e.vat_countries[c["e"].UNITED_KINGDOM];delete e.vat_countries[c["e"].UNITED_KINGDOM]}return{countries:e.countries||[],usStates:e.us_states||{},canadaStates:e.canada_states||{},vatCountries:e.vat_countries||{},abnCountries:e.abn_countries||{},taxableZipcodes:e.taxable_zipcodes||[]}}).catch(function(e){Object(d["a"])({error:e,description:"Error while fetching states and countries",subtype:v,teamId:Object(l["c"])(t())});throw e})});var b=Object(o["a"])("Fetch Company Address",function(e,t){var a=t();var r=Object(p["z"])(a);return e(Object(s["a"])({reason:"checkout-flow-fetch-team-company-address-data",method:"payments.billing.addresses.get"})).then(function(e){Object(u["a"])({getState:t}).info(v,"Successfully fetched company address");return m(e,r)}).catch(function(e){Object(d["a"])({error:e,description:"Error while fetching company address",subtype:v,teamId:Object(l["c"])(t())});throw e})});var g=Object(o["a"])("Validate and Persist Company Address",function(e,t,a){var r=Object(p["r"])(t());var n=a.qstId;var i={abn_id:a.abnId,city:a.city,company_name:a.companyName,country:a.country,is_business:a.isBusinessPurchase,state:a.region,street1:a.street,street2:a.suite,vat_id:a.vatId,waiting_for_vat:!a.isVatIdAvailable,zip:a.postalCode,is_checkout_v2:true,checkout_step:r,tax_id:n};return e(Object(s["a"])({reason:"checkout-flow-validate-persist-company-address",method:"payments.billing.addresses.validateAndSet",args:i})).then(function(e){Object(u["a"])({getState:t}).info(v,"Successfully validated and persisted company address");return e}).catch(function(e){Object(d["a"])({error:e,description:"Error while validating and persisting company address",subtype:v,teamId:Object(l["c"])(t())});throw e})});g.propTypes=i["b"].object;var _=Object(o["a"])("Submit information from the payment form to the server to complete the purchase of a paid Slack plan",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.tokenId,n=a.productId,i=a.isNewCreditCard;var o=Object(p["r"])(t());return e(Object(s["a"])({reason:"checkout-flow-process-upgrade-charge",method:"payments.checkout.charge",args:{stripe_token:r,product_id:n,is_new_card:i,checkout_step:o}})).then(function(e){Object(u["a"])({getState:t}).info(v,"Successfully processed upgrade charge successfully for product_id "+n+", is_new_card "+i);return e}).catch(function(e){Object(d["a"])({error:e,description:"Error while processing upgrade charge for product_id "+n+", is_new_card "+i,subtype:v,teamId:Object(l["c"])(t())});throw e})});_.propTypes={tokenId:i["b"].string,productId:i["b"].string,isNewCreditCard:i["b"].bool};var y=Object(o["a"])("Submit information from the checkout invoice form to the server to complete the purchase of a paid Slack plan via invoice",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.numUsers,n=a.productId,i=a.billingContacts,o=a.purchaseOrderNumber;var c=Object(p["r"])(t());return e(Object(s["a"])({reason:"checkout-flow-create-invoice",method:"payments.checkout.createInvoice",args:{num_users:r,product_id:n,billing_contacts:i,po_number:o,checkout_step:c,is_checkout_v2:true}})).then(function(e){Object(u["a"])({getState:t}).info(v,"Successfully created invoice for product_id "+n+", num_users "+r);return e}).catch(function(e){Object(d["a"])({error:e,description:"Error while creating invoice for product_id "+n+", num_users "+r,subtype:v,teamId:Object(l["c"])(t())});throw e})});y.propTypes={numUsers:i["b"].string,productId:i["b"].string,billingContacts:i["b"].string,purchaseOrderNumber:i["b"].string};var O=Object(o["a"])("Fetch Stripe Customer",function(e,t,a){var r=Object(p["r"])(t());return e(Object(s["a"])({reason:"checkout-flow-fetch-stripe-customer-data",method:"payments.stripe.getCustomer",args:{country:a,checkout_step:r}})).then(function(e){Object(u["a"])({getState:t}).info(v,"Successfully fetched Stripe customer");return e}).catch(function(e){Object(d["a"])({error:e,description:"Error while fetching Stripe customer",subtype:v,teamId:Object(l["c"])(t())});throw e})});O.propTypes=i["b"].string;var k=Object(o["a"])("Fetch Self User Data",function(e,t){var a=Object(p["r"])(t());return e(Object(s["a"])({reason:"checkout-flow-fetch-current-user-data",method:"users.info",args:{self:true,checkout_step:a}})).then(function(e){Object(u["a"])({getState:t}).info(v,"Successfully fetched self user data");return e}).catch(function(e){Object(d["a"])({error:e,description:"Error while fetching self user data",subtype:v,teamId:Object(l["c"])(t())});throw e})});var E=Object(o["a"])("Checks If User Can Access Checkout",function(e,t){var a=Object(p["r"])(t());return e(Object(s["a"])({reason:"checkout-flow-check-user-can-access-checkout-v2",method:"payments.checkout.canShowCheckoutV2",args:{checkout_step:a}})).then(function(e){Object(u["a"])({getState:t}).info(v,"Successfully checked if user can access checkout");return e}).catch(function(e){Object(d["a"])({error:e,description:"Error while checking if user can access checkout",subtype:v,teamId:Object(l["c"])(t())});throw e})});var C=Object(o["a"])("Notify an api endpoint about the steps of checkout",function(e,t,a){var r=a.activeCheckoutStep;return e(Object(s["a"])({reason:"checkout-flow-log-checkout-impression",method:"payments.checkout.logImpression",args:{checkout_step:r}})).then(function(e){Object(u["a"])({getState:t}).info(v,"Successfully logged backend step impression");return e}).catch(function(e){Object(d["a"])({error:e,description:"Error while logging backend step impression",subtype:v,teamId:Object(l["c"])(t())});throw e})});C.propTypes={activeCheckoutStep:i["b"].string};var j={sanitizeCompanyAddressAPIData:m}},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"c",function(){return r});a.d(t,"b",function(){return n});a.d(t,"d",function(){return i});a.d(t,"e",function(){return s});a.d(t,"a",function(){return o});var r=3;var n={profile:cdn_url+"/aba96/img/tractor/steps/step_01.png",workspace:cdn_url+"/aba96/img/tractor/steps/step_02.png",invites:cdn_url+"/aba96/img/tractor/steps/step_03.png",completion:cdn_url+"/aba96/img/tractor/steps/step_04.png"};var i={profile:0,workspace:1,invites:2,completion:3};var s={0:"TRACTOR_DIALOG_PROFILE_STEP",1:"TRACTOR_DIALOG_WORKSPACE_STEP",2:"TRACTOR_DIALOG_INVITE_STEP",3:"TRACTOR_DIALOG_COMPLETED_STEP"};var o={start_team_creator_account_setup:"BANNER_TRACTOR_WELCOME",complete_team_creator_account_setup:"BANNER_TRACTOR_REMINDER",invite_team_creator_account_setup:"BANNER_TRACTOR_INVITES"}},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(1);var l=a.n(o);var c=a(0);var u=a(18);var d=a(36);var p=a(14);var h=a(15);var v=a(1031);var m=a(2);var f=a(34);var b=a(132);var g=a(25);var _=a(29);var y=Object(g["a"])("Fetch the active message pane banner for this team/user, if any",function(e,t,a){return e(Object(_["a"])({method:"promo.banner",reason:"fetch-active-message-pane-banner",args:a})).then(function(e){if(!e.message_pane)return{};return{name:e.message_pane.name,data:e.message_pane.data||{}}})});y.propTypes={qa_banner_type:c["b"].string,qa_banner_data:c["b"].string};var O=a(48);var k=a(1485);var E=a(31);var C=a(35);var j=a(122);var w=a(42);var S=a(4);a.d(t,"BANNERS_PREFS",function(){return T});a.d(t,"setMessagePaneBanner",function(){return A});a.d(t,"closeMessagePaneBanner",function(){return N});a.d(t,"showPricingPlans",function(){return P});a.d(t,"getMessagePaneBannerName",function(){return x});a.d(t,"getMessagePaneBannerData",function(){return F});a.d(t,"throttledLoadBanner",function(){return U});a.d(t,"closeBanner",function(){return q});var I;var T="growth_all_banners_prefs";var A=Object(u["b"])("Set message pane banner");A.propTypes={name:c["b"].string,data:c["b"].object};var N=Object(u["b"])("Close message pane banner");N.propTypes=null;var P=Object(h["b"])("Shows the pricing plans information",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.pricingPlansPageUrl,n=a.source;var i=t();var s=Object(C["d"])(i);var o=Object(E["isOnFreePlan"])(s)&&!Object(w["isAppStoreBuild"])()&&!Object(S["teamHasDiscount"])(i)&&("treatment"===Object(j["getGroupForUser"])(i,"lc_bring_plans_page_to_ssb_existing_teams")||"treatment"===Object(j["getGroupForUser"])(i,"lc_bring_plans_page_to_ssb_new_teams"));o?e(Object(O["openModal"])({element:l.a.createElement(k["a"],{source:n})})):Object(E["openAuthenticatedUrlInBrowser"])(s,r)});P.propTypes={pricingPlansPageUrl:c["b"].string.isRequired};var R={name:"",data:{}};var M=Object(d["b"])((I={},n()(I,A,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.name,r=t.data;var n=s()({},e,{name:a,data:r});return n}),n()(I,N,function(){return R}),I),R,{persistenceEnabled:true});M.propTypes={name:c["b"].string,data:c["b"].object};var D=t["default"]=M;var x=Object(p["b"])(function(e){return e&&e.messagePaneBanner&&e.messagePaneBanner.name});var F=Object(p["b"])(function(e){return e&&e.messagePaneBanner&&e.messagePaneBanner.data});var L=108e5;var B=Object(h["b"])("Load message pane banner info",function(e,t,a){e(y(a)).then(function(t){Object(m["isEmpty"])(t)||e(A(t))})});var U=Object(v["a"])(B,L);B.propTypes={qa_banner_type:c["b"].string,qa_banner_data:c["b"].string};var q=Object(h["b"])("Close the message pane banner",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.bannerPrefs;if(!Object(m["isEmpty"])(r)){var n=Object(f["f"])(t(),T);n=n?JSON.parse(n):{};var i=n[r.countPref]||0;n[r.countPref]=i+1;n[r.tsPref]=Math.round(Date.now()/1e3);var s=JSON.stringify(n);e(Object(b["c"])({pref:T,value:s}))}e(N())});q.propTypes={bannerPrefs:c["b"].object}},,,,,,,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(112);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(3);var v=a.n(h);var m=a(1);var f=a.n(m);var b=a(0);var g=a(2);var _=a.n(g);var y=a(245);var O=a(1181);var k=a(1046);var E=a(1067);var C=400;var j=v()({},O["a"].propTypes,{layout:b["b"].instanceOf(E["a"]),loadPre:b["b"].func,loadPost:b["b"].func,loadAround:b["b"].func,itemToScroll:b["b"].string,animateOnScroll:b["b"].bool});var w=v()({},O["a"].defaultProps,{layout:void 0,loadPre:g["noop"],loadPost:g["noop"],loadAround:g["noop"],itemToScroll:void 0,animateOnScroll:true});var S=function(e){p()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onScroll=a.onScroll.bind(a);a.setHeight=a.setHeight.bind(a);a.layout=e.layout||new E["a"];a.node=null;a.scrollTop=a.layout.setContainerHeight(e.height,0);a.scrollTop=a.layout.setKeys(e.keys,a.scrollTop);var r=a.layout.getBounds(a.scrollTop,a.scrollTop+e.height),i=r.start,s=r.end;var o=a.layout.getTops();a.state=v()({},a.state,{start:i,end:s,tops:o});return a}s()(t,[{key:"componentWillReceiveProps",value:function e(t){this.props.itemToScroll!==t.itemToScroll&&this.scrollToIfNotVisible(t);this.possiblyUpdateInitialActiveItem(t);t.width!==this.props.width&&this.layout.heightCache.invalidate();t.height!==this.props.height&&(this.scrollTop=this.layout.setContainerHeight(t.height,this.getScrollTop()));Object(y["a"])(t.keys,this.props.keys)||(this.scrollTop=this.layout.setKeys(t.keys,this.getScrollTop()));this.relayout()}},{key:"scrollToIfNotVisible",value:function e(t){var a=t.itemToScroll,r=t.animateOnScroll;a&&this.scrollToKey(a,{lazy:true,animate:r})}},{key:"componentDidUpdate",value:function e(){var a;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];(a=u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this)).call.apply(a,[this].concat(n));"number"===typeof this.pendingScrollTop&&this.setScrollTop(this.pendingScrollTop);this.loadMore()}},{key:"componentDidMount",value:function e(){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this);"number"===typeof this.pendingScrollTop&&this.setScrollTop(this.pendingScrollTop);this.loadMore()}},{key:"onScroll",value:function e(a){this.pendingScrollTop=false;u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onScroll",this).call(this,a)}},{key:"getScrollTop",value:function e(){if("number"===typeof this.scrollTop)return this.scrollTop;if("number"===typeof this.pendingScrollTop)return this.pendingScrollTop;if(!this.node)return 0;return u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getScrollTop",this).call(this)}},{key:"setHeight",value:function e(t,a){if(!t)return;if(Math.abs(a-this.layout.getHeight(t))<.5)return;var r=this.getScrollTop();this.scrollTop=this.layout.setHeight(t,a,r);this.relayout()}},{key:"loadMore",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.start;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.end;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;var n=r.keys,i=r.height;var s=this.layout.getTotalHeight();var o=this.layout.getTop(n[t]);var l=this.layout.getBottom(n[a-1]);var c=!n.length||s<=i||o<C;var u=!n.length||s<=i||s-l<C;if(c&&u)return r.loadAround();if(c)return r.loadPre();if(u)return r.loadPost();return null}},{key:"renderItem",value:function e(t,a){var r=this.getTop(t);var n=this.layout.getHeight(t);var i=this.layout.getHeightValidity(t);var s=this.state.activeItem===t;var o=null===this.state.activeItem&&this.state.hasKeyboardFocus&&this.state.initialActiveItem===t;var l=this.state.mouseDownTargetItem===t;var c=this.state.hoveredItem===t;var u=this.props,d=u.getAriaLabelForRow,p=u.isItemAriaExpanded;var h=d&&d(a,{hasFocus:s});var v=p&&p(t,a);var m=true===v?this.props.itemAriaControls:void 0;return f.a.createElement(k["a"],{key:t,id:t,height:n,validity:i,style:{top:r},role:this.props.itemRole,ariaLabel:h,ariaExpanded:v,ariaControls:m,hasFocus:s,hasFocusWithin:o,isMouseDownOnItem:l,onHeightChange:this.setHeight,onFocusEnter:this.onItemFocusEnter,onFocusWithin:this.onItemFocusWithin,onMouseOver:this.onItemMouseOver,onMouseLeave:this.onItemMouseLeave,onMouseDown:this.onItemMouseDown,onMouseUp:this.onItemMouseup},this.props.rowRenderer(a,{hasFocus:s,isHovered:c,isExpanded:v}))}},{key:"render",value:function e(){this.pendingScrollTop=this.scrollTop;this.scrollTop=false;return u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}}]);return t}(O["a"]);S.displayName="DynamicList";t["a"]=S;S.propTypes=j;S.defaultProps=w},,,,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"setFullyBooted",function(){return p});a.d(t,"isFullyBooted",function(){return m});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(18);var c=a(36);var u=a(14);var d=a(38);var p=Object(l["b"])("Set the app as fully booted");p.propTypes=o["b"].bool.isRequired;var h={isFullyBooted:false};var v=Object(c["b"])(n()({},p,function(e,t){return s()({},e,{isFullyBooted:t})}),h,{persistenceEnabled:false});v.propTypes={isFullyBooted:o["b"].bool.isRequired};t["default"]=v;var m=Object(u["b"])(function(e){return Object(d["a"])()||e&&e.incrementalBoot&&e.incrementalBoot.isFullyBooted})},,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r={calculator:"calculator",form:"form",review:"review",success:"success"};var n=200;t["b"]=r},,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(2);var l=a(0);var c=a(18);var u=a(36);var d=a(15);var p=a(14);var h=a(77);function v(e){var t=e.file,a=e.title;if(!Object(h["isPendingFile"])(t))return null;var r=new FormData;r.append("file",t,t.name);var n=r.get("file");n.id=t.id;n.title=a;return n}var m=a(391);a.d(t,"removePendingFile",function(){return g});a.d(t,"updateProgress",function(){return y});a.d(t,"clearPendingFiles",function(){return O});a.d(t,"getPendingFilesforInput",function(){return w});a.d(t,"getPendingFileById",function(){return S});a.d(t,"processAndAddPendingFiles",function(){return I});a.d(t,"renamePendingFile",function(){return T});a.d(t,"DIALOG_PENDING_FILES_ID",function(){return A});a.d(t,"processAndAddPendingFilesForDialog",function(){return N});a.d(t,"clearPendingFilesForDialog",function(){return P});a.d(t,"getPendingFilesforDialog",function(){return R});a.d(t,"test",function(){return M});var f;var b=Object(c["b"])("bulk add pending files");b.propTypes={channelId:l["b"].string.isRequired,threadTs:l["b"].string,files:l["b"].arrayOf(l["b"].object)};var g=Object(c["b"])("remove pending file");g.propTypes={channelId:l["b"].string.isRequired,threadTs:l["b"].string,fileId:l["b"].string};var _=Object(c["b"])("update pending file");_.propTypes={channelId:l["b"].string.isRequired,threadTs:l["b"].string,updatedFile:l["b"].object.isRequired};var y=Object(c["b"])("update upload progress of pending file");y.propTypes={channelId:l["b"].string.isRequired,threadTs:l["b"].string,fileId:l["b"].string,progress:l["b"].number};var O=Object(c["b"])("clear all pending files for a given input");O.propTypes={channelId:l["b"].string.isRequired,threadTs:l["b"].string};var k={};var E=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channelId,r=t.threadTs;return r?a+"-"+r:a};var C=Object(u["b"])((f={},n()(f,b,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.threadTs,i=t.files;if(!a||!i)return e;var o=E({channelId:a,threadTs:r});var l=e[o]||[];var c=l.concat(i);return s()({},e,n()({},o,c))}),n()(f,g,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.threadTs,i=t.fileId;if(!a||!i)return e;var l=E({channelId:a,threadTs:r});var c=e[l];if(!Object(o["some"])(c,{id:i}))return e;var u=Object(o["reject"])(c,{id:i});return s()({},e,n()({},l,u))}),n()(f,_,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.threadTs,i=t.updatedFile;if(!a||!i)return e;var l=E({channelId:a,threadTs:r});var c=e[l];if(!Object(o["some"])(c,{id:i.id}))return e;var u=Object(o["map"])(c,function(e){if(e.id===i.id)return i;return e});return s()({},e,n()({},l,u))}),n()(f,y,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.threadTs,n=t.fileId;Object(o["noop"])(a,r,n)}),n()(f,O,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.threadTs;if(!a)return e;var n=E({channelId:a,threadTs:r});var i=e[n];if(!i)return e;var o=s()({},e);delete o[n];return o}),f),k,{persistenceEnabled:false});C.propTypes=l["b"].objectOf(l["b"].arrayOf(l["b"].shape({id:l["b"].string.isRequired,name:l["b"].string.isRequired,size:l["b"].number.isRequired,type:l["b"].string,progress:l["b"].number})));var j=t["default"]=C;var w=Object(p["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.threadTs;var n=E({channelId:a,threadTs:r});return e&&e.pendingFiles&&e.pendingFiles[n]});var S=Object(p["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.fileId,r=t.channelId,n=t.threadTs;if(!a||!r)return null;var i=w(e,{channelId:r,threadTs:n});return Object(o["find"])(i,{id:a})});var I=Object(d["b"])("processes and adds pending files to store",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,i=a.files;if(!r||!i||!i.length)return;var s=i.filter(function(e){return Object(h["isPendingFile"])(e)}).map(function(e){e.id=Object(m["a"])();return e});e(b({channelId:r,threadTs:n,files:s}))});I.propTypes={channelId:l["b"].string.isRequired,threadTs:l["b"].string,files:l["b"].arrayOf(l["b"].object)};var T=Object(d["b"])("renames a given pending file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,i=a.fileId,s=a.title;if(!r||!i||!s)return;var l=w(t(),{channelId:r,threadTs:n});var c=Object(o["find"])(l,{id:i});if(!c)return;var u=v({file:c,title:s});e(_({channelId:r,threadTs:n,updatedFile:u}))});T.propTypes={channelId:l["b"].string.isRequired,threadTs:l["b"].string,fileId:l["b"].object.isRequired,name:l["b"].string.isRequired};var A="file-upload-dialog";var N=Object(d["b"])("processes and adds pending files to store for upload dialog",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.files;e(I({channelId:A,files:r}))});N.propTypes={files:l["b"].arrayOf(l["b"].object)};var P=Object(d["b"])("clears pending files for upload dialog",function(e){e(O({channelId:A}))});P.propTypes=null;var R=Object(p["b"])(function(e){return w(e,{channelId:A})});var M={};Object.defineProperty(M,"internalAddPendingFiles",{get:function e(){return b},set:function e(t){b=t}});Object.defineProperty(M,"updatePendingFile",{get:function e(){return _},set:function e(t){_=t}})},,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"addMemberIds",function(){return k});a.d(t,"addNonExactMatchMemberIds",function(){return E});a.d(t,"saveScrollmark",function(){return C});a.d(t,"setMarker",function(){return j});a.d(t,"setSearchQuery",function(){return w});a.d(t,"setFilter",function(){return S});a.d(t,"getFlexpaneMemberIds",function(){return A});a.d(t,"getFlexpaneNonExactMatchMemberIds",function(){return N});a.d(t,"getScrollmark",function(){return P});a.d(t,"getMarker",function(){return R});a.d(t,"getSearchQuery",function(){return M});a.d(t,"getFilter",function(){return D});a.d(t,"listAndUpsertMembers",function(){return B});a.d(t,"fetchMembersPost",function(){return U});a.d(t,"test",function(){return q});var r=a(37);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(3);var l=a.n(o);var c=a(2);var u=a.n(c);var d=a(0);var p=a(18);var h=a(36);var v=a(14);var m=a(15);var f=a(230);var b=a(145);var g=a(57);var _=a(34);var y=a(4);var O;var k=Object(p["b"])("Add member IDs to the flexpane");k.propTypes=d["b"].arrayOf(d["b"].string).isRequired;var E=Object(p["b"])("Add non-exact match member IDs to the flexpane");E.propTypes=d["b"].arrayOf(d["b"].string).isRequired;var C=Object(p["b"])("Set the member directory flexpane scroll offset");C.propTypes=d["b"].object;var j=Object(p["b"])("Set the marker");j.propTypes=d["b"].string;var w=Object(p["b"])("Set the search query");w.propTypes=d["b"].string;var S=Object(p["b"])("Set the filter");S.propTypes=d["b"].string;var I={searchQuery:"",scrollmark:null,marker:"",memberIds:[],nonExactMatchMemberIds:[],filter:"everyone"};var T=Object(h["b"])((O={},s()(O,k,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||!t.length)return e;var a=I.nonExactMatchMemberIds;return l()({},e,{memberIds:Object(c["union"])(e.memberIds,t),nonExactMatchMemberIds:a})}),s()(O,E,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||!t.length)return e;return l()({},e,{nonExactMatchMemberIds:Object(c["union"])(e.memberIds,t)})}),s()(O,C,function(e,t){return l()({},e,{scrollmark:t})}),s()(O,j,function(e,t){return l()({},e,{marker:t})}),s()(O,w,function(e,t){if(t===e.searchQuery)return e;var a=I.memberIds,r=I.nonExactMatchMemberIds,n=I.scrollmark,i=I.marker;return l()({},e,{memberIds:a,nonExactMatchMemberIds:r,scrollmark:n,marker:i,searchQuery:t})}),s()(O,S,function(e,t){if(t===e.filter)return e;var a=I.memberIds,r=I.nonExactMatchMemberIds,n=I.scrollmark,i=I.marker;return l()({},e,{memberIds:a,nonExactMatchMemberIds:r,scrollmark:n,marker:i,filter:t})}),O),I,{persistenceEnabled:true});T.propTypes={searchQuery:d["b"].string,scrollmark:d["b"].object,marker:d["b"].string,memberIds:d["b"].arrayOf(d["b"].string),nonExactMatchMemberIds:d["b"].arrayOf(d["b"].string),filter:d["b"].string};t["default"]=T;var A=Object(v["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.memberIds});var N=Object(v["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.nonExactMatchMemberIds});var P=Object(v["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.scrollmark});var R=Object(v["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.marker});var M=Object(v["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.searchQuery});var D=Object(v["b"])(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.filter});var x=10;var F=100;var L=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.searchQuery,r=void 0===a?"":a,n=t.marker,i=void 0===n?"":n,s=t.index,o=void 0===s?"":s,l=t.filter,c=void 0===l?"":l,u=t.featureBotsNotMembers,d=void 0!==u&&u;var p=Object(b["a"])(c);var h={count:r?F:x,index:o,locale:Object(g["f"])(),external_team:p?c:void 0,filter:p?"everyone":c};d&&"everyone"===h.filter&&(h.filter="people");if(r){h.query=r;h.search_profile_fields=true}else h.marker=i;return h};var B=Object(m["b"])("Fetch and upsert membersIds displayed in member directory flexpane",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.isNonExactMatchMembersSearch,i=void 0!==r&&r,s=n()(a,["isNonExactMatchMembersSearch"]);var o=t();var c=Object(y["isFeatureEnabled"])(o,"feature_bots_not_members");var u=L(l()({},s,{featureBotsNotMembers:c}));return e(Object(f["d"])({query:u})).then(function(t){var a=t.members,r=void 0===a?[]:a,n=t.next_marker;var o=c&&"deactivated"===s.filter?r.filter(function(e){return e&&!e.is_bot}):r;var l=o.map(function(e){return e.id});e(i?E(l):k(l));n&&e(j(n));return{members:r,nextMarker:n}})});B.propTypes={searchQuery:d["b"].string,marker:d["b"].string,index:d["b"].string,filter:d["b"].string,isNonExactMatchMembersSearch:d["b"].bool};var U=Object(m["b"])("Fetch and upsert members",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.isNonExactMatchMembersSearch,n=void 0!==r&&r;var i=t();var s=M(i);var o=R(i);var l=n?"everyone":D(i);var c=Object(_["g"])(i)?"users_by_realname":"users_by_display_name";return e(B({searchQuery:s,marker:o,index:c,filter:l,isNonExactMatchMembersSearch:n}))});U.propTypes={isNonExactMatchMembersSearch:d["b"].bool};var q={};Object.defineProperty(q,"buildQueryParams",{get:function e(){return L}})},,,,,,function(e,t,a){"use strict";var r=a(43);var n=a(2);var i=a(0);var s=a(15);var o=a(4);var l=a(188);var c=a(326);var u=a(12);var d=a(1160);var p=a(268);var h=a(1335);var v=a(3);var m=a.n(v);var f=a(37);var b=a.n(f);var g=a(98);var _=a(19);var y=a(113);var O=a(103);var k=a(52);var E=a(11);var C=a(1297);var j=a(38);var w=a(309);var S=a(67);var I=a(24);var T=a(359);var A=a(71);var N=a(23);var P=a(41);function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,a=e.channel,r=e.userIsAway,n=e.userPresenceLastChanged,i=e.currentUserId,s=e.highlightWords,l=e.messages,c=void 0===l?[]:l;var u=0;var d=0;c.forEach(function(e){if(!e)return;if(Object(P["isMessageUnread"])(e,Object(E["getLastReadTs"])(a),i)){u+=1;Object(P["shouldMessageBadgeChannel"])({state:t,msg:e,channel:a,currentUserId:i,userIsAway:r,userPresenceLastChanged:n,highlightWords:s,isAppMsg:Object(P["isAppMessage"])(t,e),featureWtaNotifications:Object(o["isFeatureEnabled"])(t,"feature_wta_notifications"),teamId:Object(N["c"])(t)})&&(d+=1)}});return{unreadCnt:u,unreadHighlightCnt:d}}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,a=e.start,r=e.reachedStart,n=e.reachedEnd,i=e.initialCounts,s=e.messages,o=e.channel,l=e.currentUser,c=e.userIsAway,u=e.userPresenceLastChanged,d=e.highlightWords;var p=0;var h=0;var v=true;if(n){var m=R({state:t,channel:o,messages:s,userIsAway:c,userPresenceLastChanged:u,currentUserId:l.id,highlightWords:d});p=m.unreadCnt;h=m.unreadHighlightCnt;if(a<=Object(E["getLastReadTs"])(o))v=false;else{i&&p<i.unreadCnt&&(p=i.unreadCnt);i&&h<i.unreadHighlightCnt&&(h=i.unreadHighlightCnt);v=s.length<42&&!r}}else if(i){p=i.unreadCnt;h=i.unreadHighlightCnt}return{unreadCnt:p,unreadHighlightCnt:h,needFetch:v}}function D(e){if(!e)return false;if(!e.was_archived_this_session){if(Object(E["isArchived"])(e))return false;if(Object(E["isPublicChannel"])(e)&&!Object(E["isMemberOfChannel"])(e))return false}return true}var x="COUNTS";var F=Object(s["b"])("Update unread counts",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId;var i=t();var s=Object(A["c"])({getState:t});Object(o["isFeatureEnabled"])(i,"feature_tinyspeck")&&s.mark("rmsgs_updateUnreadCounts");var c=false;var d=Object(_["d"])(i,r,c);if(!d)return true;if(!D(d))return true;var p=Object(O["getTimestampsByChannelId"])(i,r,null),h=p.timestamps,v=p.start,m=p.reachedStart,f=p.reachedEnd;var b=Object(l["getInitialUnreadCountsByChannelId"])(i,r);var y=Object(n["map"])(h||[],function(e){return Object(S["a"])(i,d.id,e)});var k=Object(I["b"])(i);var C="away"===Object(w["getPresenceByMemberId"])(i,k.id);var j=k._presence_last_changed||Object(o["getFromBootData"])(i,"start_ms");var N=M({state:i,start:v,reachedStart:m,reachedEnd:f,initialCounts:b,messages:y,channel:d,currentUser:k,userIsAway:C,userPresenceLastChanged:j,highlightWords:Object(T["a"])(i)}),P=N.unreadCnt,R=N.unreadHighlightCnt,F=N.needFetch;if(P!==Object(E["getUnreadCount"])(d)){Object(u["a"])({state:i}).info(x,"Updated unread_cnt for "+d.id+": "+P);e(Object(g["B"])({id:d.id,unread_cnt:P}))}if(R!==d.unread_highlight_cnt){Object(u["a"])({state:i}).info(x,"Updated unread_highlight_cnt for "+d.id+": "+R);e(Object(g["B"])({id:d.id,unread_highlight_cnt:R}))}Object(o["isFeatureEnabled"])(i,"feature_tinyspeck")&&s.measureAndClear("rmsgs_updateUnreadCounts","rmsgs_updateUnreadCounts");return!F});F.propTypes={channelId:i["b"].string.isRequired};var L=F;var B=void 0;var U="COUNTS";var q=function e(t,a){if(Object(E["isUnknownOrNonExistent"])(a)){var r=t.name,n=t.has_unreads,i=t.mention_count,s=t.mention_count_display,o=t.unread_count_display,l=t.dm_count,c=t.latest,u=t.user_id,d=b()(t,["name","has_unreads","mention_count","mention_count_display","unread_count_display","dm_count","latest","user_id"]);var p=m()({},d,{isNonExistent:true});p.is_im&&u&&(p.user=u);return p}var h={};var v=Object(E["getLastReadTs"])(t);void 0!==v&&Object(E["getLastReadTs"])(a)!==v&&(h.last_read=v);var f=Object(E["getPriority"])(t);void 0!==f&&Object(E["getPriority"])(a)!==f&&(h.priority=f);var g=Object(E["isStarred"])(t);void 0!==g&&Object(E["isStarred"])(a)!==g&&(h.is_starred=g);var _=Object(E["isOpen"])(t);(Object(E["isIm"])(t)||Object(E["isMpim"])(t))&&void 0!==_&&Object(E["isOpen"])(a)!==_&&(h.is_open=_);return h};var G=Object(s["b"])("Apply counts to channel objects and update stores",function(){var e=Object(r["coroutine"])(regeneratorRuntime.mark(function e(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.counts,c=void 0===s?[]:s;var d,p,h,v,m,f,b;return regeneratorRuntime.wrap(function e(i){while(1)switch(i.prev=i.next){case 0:if(Object(j["a"])()){i.next=3;break}i.next=3;return Object(r["resolve"])(Object(C["a"])());case 3:d=[];p=a();h={};v=[];m=[];f=Object(o["isFeatureEnabled"])(p,"feature_degraded_send");b=Object(k["isConnected"])(p);Object(u["a"])({state:p}).info(U,"Applying counts to channels");c.forEach(function(e){var t=Object(_["d"])(p,e.id,f);if(!t||Object(E["isNonExistent"])(t)){Object(u["a"])({state:p}).error(U,{id:e.id,has_unreads:e.has_unreads||!!e.dm_count||!!e.unread_count_display,nonExistent:Object(E["isNonExistent"])(t)},"applyCountsToChannels_missing_channel");return}if(f&&Object(E["isUnknown"])(t)){Object(u["a"])({state:p}).warn(U,"Unknown channel "+t.id+" in applyCountsToChannels");m.push(t.id)}if(Object(E["isArchived"])(t))return;if(Object(E["isPublicChannel"])(t)&&!Object(E["isMemberOfChannel"])(t))return;var a=f?q(e,t):{};var r=e.latest;r&&r!==t.latest&&(a.latest=r);var i=Object(O["getTimestampsByChannelId"])(p,t.id),s=i.reachedEnd;var l=e.has_unreads;var c=l?1:0;var g=0;var y=0;var k=false;if(Object(o["isFeatureEnabled"])(p,"feature_vitess_sidebar"))if(Object(E["isIm"])(t)||Object(E["isIm"])(e)||Object(E["isMpim"])(t)||Object(E["isMpim"])(e)){g=e.mention_count||c;Object(o["isFeatureEnabled"])(p,"feature_silence_app_dms")&&(Object(E["isIm"])(t)||Object(E["isIm"])(e))&&(y=e.mention_count)}else{k=true;g=c;y=e.mention_count||0}else if(Object(E["isIm"])(t)||Object(E["isIm"])(e)){g=e.dm_count||c;Object(o["isFeatureEnabled"])(p,"feature_silence_app_dms")&&(y=e.dm_count)}else if(Object(E["isMpim"])(t)||Object(E["isMpim"])(e))g=e.unread_count_display||c;else{k=true;g=c;y=e.mention_count_display||0}if(!g&&y){Object(u["a"])({state:p}).error(U,"Ignoring positive mention_count_display because has_unreads == false for "+t.id,{subtype:"ignoring_positive_mention_count_display"});y=0}h[t.id]={unreadCnt:g,unreadHighlightCnt:y};if(s&&b)v.push(t.id);else{g!==Object(E["getUnreadCount"])(t)&&(a.unread_cnt=g);k&&y!==Object(E["getUnreadHighlightCount"])(t)&&(a.unread_highlight_cnt=y);Object(o["isFeatureEnabled"])(p,"feature_silence_app_dms")&&y!==Object(E["getUnreadHighlightCount"])(t)&&(a.unread_highlight_cnt=y)}if(!Object(n["isEmpty"])(a)){a.id=t.id;d.push(a)}});if(!m.length){i.next=15;break}i.next=15;return Object(r["resolve"])(t(Object(y["d"])({ids:m,reason:"apply-counts-to-channels/ensure-channels"})));case 15:Object(n["isEmpty"])(d)||t(Object(g["e"])({channels:d}));t(Object(l["setInitialUnreadCounts"])(h));Object(o["isFeatureEnabled"])(p,"feature_incremental_unread_counts")&&t(Object(l["initializeUnreadCountsFromChannels"])(Object(n["map"])(h,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.unreadCnt,a=e.unreadHighlightCnt;var r=arguments[1];return{id:r,unread_cnt:t,unread_highlight_cnt:a}})));v.forEach(function(e){t(L({channelId:e}));var r=Object(_["d"])(a(),e,false);if(r){var n={unreadCnt:Object(E["getUnreadCount"])(r),unreadHighlightCnt:Object(E["getUnreadHighlightCount"])(r)};Object(u["a"])({state:p}).info(U,"Recounted "+e+"; initial: "+JSON.stringify(h[e])+"; after: "+JSON.stringify(n))}});case 19:case"end":return i.stop()}},e,B)}));return function(t,a,r){return e.apply(this,arguments)}}());G.propTypes={counts:i["b"].array.isRequired};var W={makeBasePayload:q};var H=G;var V=void 0;var K="COUNTS";var z=Object(s["b"])("Apply counts to channels and threads",function(){var e=Object(r["coroutine"])(regeneratorRuntime.mark(function e(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.channels,v=i.groups,m=i.ims,f=i.mpims,b=i.threads;var g,_;return regeneratorRuntime.wrap(function e(i){while(1)switch(i.prev=i.next){case 0:g=a();if(!(!Object(o["shouldUseReactMessages"])(g)||!Object(o["isClientApp"])(g))){i.next=3;break}return i.abrupt("return");case 3:t(Object(l["setInitialUnreadCounts"])({}));_=Object(n["compact"])(Object(n["concat"])(s,v,m,f));i.next=7;return Object(r["resolve"])(t(H({counts:_})));case 7:if(b){Object(d["c"])(b.has_unreads,b.mention_count,b.mention_count_by_channel);if(Object(o["isFeatureEnabled"])(g,"feature_react_threads")){Object(u["a"])({state:g}).info(K,"Threads has_unreads:"+b.has_unreads+" mention_count:"+b.mention_count);Object(o["isFeatureEnabled"])(g,"feature_incremental_unread_counts")?t(Object(l["threadsUnreadCountChanged"])({threadsHasUnreads:b.has_unreads,threadsMentionCountByChannel:Object(n["isArray"])(b.mention_count_by_channel)?{}:b.mention_count_by_channel})):t(Object(c["updateUnreadThreads"])({hasUnreads:b.has_unreads,mentionCountByChannel:Object(n["isArray"])(b.mention_count_by_channel)?{}:b.mention_count_by_channel}))}}if(!Object(o["isFeatureEnabled"])(g,"feature_incremental_unread_counts")){Object(p["c"])();Object(h["a"])();Object(p["n"])()}Object(u["a"])({state:g}).info(K,"Completed counts processing");case 10:case"end":return i.stop()}},e,V)}));return function(t,a,r){return e.apply(this,arguments)}}());z.propTypes={channels:i["b"].array,groups:i["b"].array,ims:i["b"].array,mpims:i["b"].array,threads:i["b"].object};var Y=z;a.d(t,"a",function(){return Y});a.d(t,"b",function(){return L})},,,,function(e,t,a){"use strict";a.d(t,"c",function(){return v});a.d(t,"b",function(){return m});a.d(t,"a",function(){return f});a.d(t,"f",function(){return b});a.d(t,"g",function(){return g});a.d(t,"i",function(){return _});a.d(t,"j",function(){return y});a.d(t,"h",function(){return O});a.d(t,"d",function(){return C});a.d(t,"e",function(){return w});var r=a(3);var n=a.n(r);var i=a(45);var s=a(38);var o=a(71);var l=a(27);var c=a(688);var u=a(65);var d=a(228);var p=a(21);var h=a(10);var v=0;var m=1;var f=2;function b(e,t,a,r,u,d,b,g){var _=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(!w(u,d,p["k"].PRQ_CHANNEL_SWITCH_USABLE))return;var y=void 0;var O=void 0;switch(r){case v:default:y=p["u"].COMPLETED;O=false;break;case m:y=p["u"].ABANDONED;O=true;break;case f:y=p["u"].COMPLETED;O=true;break}var E=Object(c["b"])(1e3*e*1e3,0);var C=n()({elapsed_time:E,target_channel_id:a,required_sync:O,end_state:y},k(b,t,g,_));var j={userId:g,teamId:u,enterpriseId:d,locale:Object(h["q"])()};Object(i["a"])(j).track(p["k"].PRQ_CHANNEL_SWITCH_USABLE,C);var S=Object(l["d"])(u);var I=S&&S.getState();var T=Object(s["a"])()?"channel_switch_usable_sonic":"channel_switch_usable_legacy";Object(o["c"])({state:I}).store(T,Math.round(e))}function g(e,t,a,r,u,d,b,g){var _=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;if(!w(u,d,p["k"].PRQ_CHANNEL_SWITCH_VISIBLE))return;var y=void 0;var O=void 0;switch(r){case v:default:y=p["u"].COMPLETED;O=false;break;case m:y=p["u"].ABANDONED;O=true;break;case f:y=p["u"].COMPLETED;O=false;break}var E=Object(c["b"])(1e3*e*1e3,0);var C=n()({elapsed_time:E,target_channel_id:a,required_sync:O,end_state:y},k(b,t,g,_));var j={userId:g,teamId:u,enterpriseId:d,locale:Object(h["q"])()};Object(i["a"])(j).track(p["k"].PRQ_CHANNEL_SWITCH_VISIBLE,C);var S=Object(l["d"])(u);var I=S&&S.getState();var T=Object(s["a"])()?"channel_switch_visible_sonic":"channel_switch_visible_legacy";Object(o["c"])({state:I}).store(T,Math.round(e))}function _(e,t,a,r,s,o,l,u){var d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;var v=arguments[9];if(!w(r,s,p["k"].PRQ_TIME_TO_USABLE))return;var m=Object(c["b"])(1e3*e*1e3,0);var f=E(d);var b=n()({elapsed_time:m+f,desktop_elapsed_time:f,required_sync:a,end_state:u,start_type:p["o"].COLD,target_type:p["p"].CHANNEL,lazy_user_groups:v},k(o,t,l,d));var g={userId:l,teamId:r,enterpriseId:s,locale:Object(h["q"])()};Object(i["a"])(g).track(p["k"].PRQ_TIME_TO_USABLE,b)}function y(e,t,a,r,s,o,l){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;var d=arguments[8];if(!w(r,s,p["k"].PRQ_TIME_TO_VISIBLE))return;var v=Object(c["b"])(1e3*e*1e3,0);var m=E(u);var f=n()({elapsed_time:v+m,desktop_elapsed_time:m,required_sync:a,end_state:p["u"].COMPLETED,start_type:p["o"].COLD,target_type:p["p"].CHANNEL,lazy_user_groups:d},k(o,t,l,u));var b={userId:l,teamId:r,enterpriseId:s,locale:Object(h["q"])()};Object(i["a"])(b).track(p["k"].PRQ_TIME_TO_VISIBLE,f)}function O(e,t,a,r,s,o,l){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(!w(r,s,p["k"].PRQ_SESSION_FRAME_STATS))return;var u=n()({duration_ms:e,sample_filter:"entire_session",hist_frame_render_time:t,hist_janky_windows:a},k(o,void 0,l,c));var d={userId:l,teamId:r,enterpriseId:s,locale:Object(h["q"])()};Object(i["a"])(d).track(p["k"].PRQ_SESSION_FRAME_STATS,u)}function k(e,t,a,r){var i="string"===typeof a&&a.startsWith("W");var o="undefined"!==typeof r&&null!==r&&r.stats&&r.stats.Id&&r.stats.Id.sessionId;var l={device:{id:"",make:navigator.platform,model:navigator.platform,os:o?"electron":"webapp",os_version:o?r.stats.Id.sessionId:""}};var c=void 0;if(t){l.ui_context={action:"QUICK_SWITCH"===t?"keydown":"click",ui_component:t};switch(t.toUpperCase()){case"APP_ICON":c=p["q"].APP_ICON;break;case"MSG_PANE":c=p["q"].MSG_PANE;break;case"SIDE_BAR":c=p["q"].SIDE_BAR;break;case"QUICK_SWITCH":c=p["q"].QUICK_SWITCH;break;default:c=p["q"].UNKNOWN;break}}var u=n()({contexts:l,session_id:e,time:Date.now(),app_id:Object(s["a"])()?"web_sonic":"web",is_tablet:false,user_id:i?void 0:a,external_id:i?a:void 0},j(r));t&&(u.trigger=c);return u}function E(e){if("undefined"!==typeof e&&null!==e&&e.stats&&e.stats.performance&&e.stats.performance.getPerformanceRecord&&e.stats.performance.calcHrTime){var t=e.stats.performance.getPerformanceRecord();if(void 0!==t.numTeamsAtLaunch&&void 0!==t.isInitialTeamBooted&&t.numTeamsAtLaunch>0&&t.isInitialTeamBooted){var a=t["BOOT"];var r=t["PRELOAD_READY"];var n=e.stats.performance.calcHrTime(a,r);return n>0?1e6*n:0}}return 0}function C(e){if("undefined"!==typeof e&&null!==e&&e.stats&&e.stats.performance&&e.stats.performance.getPerformanceRecord&&e.stats.performance.calcHrTime){var t=e.stats.performance.getPerformanceRecord();if(void 0!==t.numTeamsAtLaunch&&void 0!==t.isInitialTeamBooted&&t.numTeamsAtLaunch>0){var a=t.PRELOAD_STARTED;var r=t.PRELOAD_READY;var n=e.stats.performance.calcHrTime(a,r);return Math.floor(n)}}return 0}function j(e){if("undefined"!==typeof e&&null!==e&&e.app&&e.app.version){var t=e.app.version();var a=t.prerelease?" ("+t.prerelease+")":"";var r="string"===typeof t.prerelease?t.prerelease.match(/(alpha|beta|electron3|sonic)/i)&&t.prerelease.match(/(alpha|beta|electron3|sonic)/i)[1]:"production";var n=void 0;switch(r){case"alpha":case"electron3":n=p["a"].ALPHA;break;case"beta":n=p["a"].BETA;break;default:n=p["a"].PRODUCTION;break}return{app_version:t.major+"."+t.minor+"."+t.patch+a,release_version:t.major+"."+t.minor+"."+t.patch,build_type:n}}return{app_version:"",release_version:"",build_type:p["a"].PRODUCTION}}function w(e,t,a){if(["E12KS1G65"].includes(t)||["T024BE7LD","T5J4Q04QG"].includes(e))return true;if(["E27SFGS2W","E655JKQRX","E7RBBBXHB","E23RHNDU5","E5BRU6WAE","E4XV0NYS0","E7AN7J5RP","E3T9KQULR","E23RE8G4F","E46RWAPHC","E6GDLMBCM","E3U2DUYG4","E783C7HT4","E8YCM8N9L","E30MTJF0C","E4BGDDU1H","E56KHGV6G","E7U335QS3","E8RLKB40H","E61V1AN6R","E7SV3P9PU","E3ZLD3D42"].includes(t)&&Object(d["a"])(10))return true;if(["E27SFGS2W"].includes(t)&&[p["k"].PRQ_TIME_TO_USABLE,p["k"].PRQ_TIME_TO_VISIBLE].includes(a))return true;if([p["k"].PRQ_TIME_TO_USABLE,p["k"].PRQ_TIME_TO_VISIBLE].includes(a))return true;if(a===p["k"].PRQ_SESSION_FRAME_STATS)return Object(d["a"])(10);return Object(d["a"])(10)}Object(u["exportToGlobalDebugger"])("prq",{getDesktopElapsedTime:E,getDesktopPreloadTime:C,getElectronInfo:j})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"addUserGroupIds",function(){return y});a.d(t,"saveScrollmark",function(){return O});a.d(t,"setCursorMark",function(){return k});a.d(t,"setSearchQuery",function(){return E});a.d(t,"getFlexpaneUserGroups",function(){return w});a.d(t,"getScrollmark",function(){return S});a.d(t,"getCursorMark",function(){return I});a.d(t,"getSearchQuery",function(){return T});a.d(t,"listAndUpsertUserGroups",function(){return A});a.d(t,"searchLocalUserGroups",function(){return N});a.d(t,"fetchUserGroupsPost",function(){return P});a.d(t,"fetchDeactivatedUserGroupsPost",function(){return R});var r=a(37);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(3);var l=a.n(o);var c=a(2);var u=a.n(c);var d=a(0);var p=a(18);var h=a(36);var v=a(14);var m=a(15);var f=a(290);var b=a(231);var g=a(271);var _;var y=Object(p["b"])("Add user group IDs to the flexpane");y.propTypes=d["b"].arrayOf(d["b"].string).isRequired;var O=Object(p["b"])("Set the user groups flexpane scroll offset");O.propTypes=d["b"].object;var k=Object(p["b"])("Set the cursor mark");k.propTypes=d["b"].string;var E=Object(p["b"])("Set the search query");E.propTypes=d["b"].string;var C={searchQuery:"",cursorMark:null,scrollmark:null,userGroupIds:[]};var j=Object(h["b"])((_={},s()(_,y,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||!t.length)return e;return l()({},e,{userGroupIds:Object(c["union"])(e.userGroupIds,t)})}),s()(_,O,function(e,t){return l()({},e,{scrollmark:t})}),s()(_,k,function(e,t){return l()({},e,{cursorMark:t})}),s()(_,E,function(e,t){if(t===e.searchQuery)return e;var a=C.userGroupIds,r=C.scrollmark,n=C.cursorMark;return l()({},e,{userGroupIds:a,scrollmark:r,cursorMark:n,searchQuery:t})}),_),C,{persistenceEnabled:true});j.propTypes={searchQuery:d["b"].string,cursorMark:d["b"].string,scrollmark:d["b"].shape({key:d["b"].string,offset:d["b"].number}),userGroupIds:d["b"].arrayOf(d["b"].string)};t["default"]=j;var w=Object(v["b"])(function(e){return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.userGroupIds});var S=Object(v["b"])(function(e){return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.scrollmark});var I=Object(v["b"])(function(e){return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.cursorMark});var T=Object(v["b"])(function(e){return e&&e.userGroupsFlexpane&&e.userGroupsFlexpane.searchQuery});var A=Object(m["b"])("Fetch and upsert user groups",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.searchQuery,i=void 0===r?"":r,s=a.cursorMark,o=a.includeDeleted,c=n()(a,["searchQuery","cursorMark","includeDeleted"]);var u=l()({query:i,cursor_mark:s,include_deleted:o,reason:"user-groups-flexpane-store/listAndUpsertUserGroups"},c);return e(Object(g["g"])(u)).then(function(t){var a=t.items,r=void 0===a?[]:a,n=t.next_cursor_mark;var i=r.map(function(e){return e.id});e(y(i));e(Object(b["q"])({userGroups:r}));e(k(n));return t})});A.propTypes={searchQuery:d["b"].string,cursorMark:d["b"].string,count:d["b"].number,reason:d["b"].string};var N=Object(m["b"])("Fetch local user groups",function(e,t){var a=t();var r=T(a);var n=Object(f["b"])(l()({},a),{query:r,options:{allowEmptyQuery:true,entities:{userGroups:true}}}).map(function(e){return e.id});e(y(n))});N.propTypes=null;var P=Object(m["b"])("Fetch user groups",function(e,t,a){var r=t();var n=I(r);var i=T(r);return e(A(l()({count:10},a,{cursorMark:n,searchQuery:i,reason:"fetchUserGroupsPost"})))});P.propTypes={searchQuery:d["b"].string,count:d["b"].number};var R=Object(m["b"])("Fetch deactivated user groups",function(e,t,a){var r=t();var n=I(r);var i=T(r);return e(A(l()({count:10,includeDeleted:2},a,{cursorMark:n,searchQuery:i,reason:"fetchUserGroupsPost"})))});R.propTypes={searchQuery:d["b"].string,count:d["b"].number}},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"innerAddCustomEmoji",function(){return i});a.d(t,"bulkRemoveCustomEmoji",function(){return s});a.d(t,"renameCustomEmoji",function(){return o});var r=a(0);var n=a(18);var i=Object(n["b"])("Bulk add custom emoji");i.propTypes={teamId:r["b"].string.isRequired,cacheTs:r["b"].string.isRequired,emojis:r["b"].object,aliases:r["b"].object};var s=Object(n["b"])("Bulk remove custom emoji");s.propTypes={teamId:r["b"].string.isRequired,cacheTs:r["b"].string.isRequired,names:r["b"].arrayOf(r["b"].string).isRequired};var o=Object(n["b"])("Rename a custom emoji");o.propTypes={teamId:r["b"].string.isRequired,cacheTs:r["b"].string.isRequired,prevName:r["b"].string.isRequired,nextName:r["b"].string.isRequired,url:r["b"].string.isRequired}},,function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(2);var s=a(10);var o={EMPTY:"empty",INVALID:"invalid",INVALID_DOMAIN:"invalid_domain",TOO_MANY:"too_many"};var l={EMAIL:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,DOMAIN:/^@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i};var c=new s["b"]("email_utility");function u(e,t){var a=d(e);return p(a,t)}function d(e){return e.replace(/\s|\n/g,"").replace(/,$/g,"").split(",")}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var a=0;var r=e.length;var n=void 0;var i=void 0;var s=void 0;if(!Array.isArray(e))return{isValid:false,emailArray:e,errorKey:o.INVALID,errorMessage:h(o.INVALID)};if(t&&r>t){i=o.TOO_MANY;s=t>1?v(t):h(o.INVALID);return{isValid:false,emailArray:e,errorKey:i,errorMessage:s}}for(a;a<r;a+=1){n=e[a];a||""!==n?l.EMAIL.test(n)||(i=o.INVALID):i=o.EMPTY;if(i)return{isValid:false,emailArray:e,errorKey:i,errorMessage:h(i)}}return{isValid:true,emailArray:e,errorKey:"",errorMessage:""}}function h(e){var t=void 0;switch(e){case o.EMPTY:t=c.t("Please fill in your email.");break;case o.INVALID:t=c.t("Sorry, but that email is invalid.");break;case o.INVALID_DOMAIN:t=c.t("Sorry, but that isn\u2019t a valid email domain.");break;default:break}return t}function v(e){return c.t("Please make your list shorter \u2014 we can check up to {max_addresses} addresses at a time.",{max_addresses:e})}var m=a(256);a.d(t,"a",function(){return b});a.d(t,"d",function(){return g});a.d(t,"e",function(){return _});a.d(t,"b",function(){return k});a.d(t,"c",function(){return E});var f=new s["b"]("checkout_v2");var b={MINIMUM_BAU_COUNT_ALLOWED:3};function g(e,t,a){var r=w(t,a);if(Object(i["isEmpty"])(r))return{};var n={};var s=e.numberOfUsers,o=e.additionalBillingContacts,l=e.purchaseOrderNumber;var c=y(l,r);c&&(n.purchaseOrderNumber=c);var u=O(s,t,a,r);u&&(n.numberOfUsers=u);var d=C(o,r);d&&(n.additionalBillingContacts=d);return n}function _(e,t,a,r){var n=null;var s=w(a,r);if(Object(i["isEmpty"])(s))return n;var o=e.numberOfUsers,l=e.additionalBillingContacts,c=e.purchaseOrderNumber;switch(t){case m["a"].PURCHASE_ORDER_NUMBER:n=y(c,s);break;case m["a"].NUMBER_OF_USERS:n=O(o,a,r,s);break;case m["a"].ADDITIONAL_BILLING_CONTACTS:n=C(l,s);break;default:}return n}function y(e,t){var a=null;!e||!Object(i["isObject"])(e)&&m["b"].NUMERIC_WITH_MIN_MAX_LENGTH_REGEX.test(e)||(a=j(m["c"].PURCHASE_ORDER_NUMBER_INVALID_CHARACTERS,t));return a}function O(e,t,a,r){var n=null;e?m["b"].NUMERIC_REGEX.test(e)?e<t?n=j(m["c"].NUMBER_OF_USERS_INVALID_MIN_ALLOWED,r):e>a&&(n=j(m["c"].NUMBER_OF_USERS_INVALID_MAX_ALLOWED,r)):n=j(m["c"].NUMBER_OF_USERS_INVALID_CHARACTERS,r):n=j(m["c"].NUMBER_OF_USERS_IS_REQUIRED,r);return n}function k(e){var t=e.contacts,a=e.delimiter,r=void 0===a?",":a;if(!t)return"";return Object(i["trim"])(t).replace(/(?:,|\s|\n)+/g,r)}function E(e){var t=d(e);var a=t.map(function(e){return{email:e}});return JSON.stringify(a)}function C(e,t){var a=null;if(!e)return a;var r=k({contacts:e,delimiter:","});var n=u(r);var i=n.errorKey;if(i){a=j(i,t);a.errorText||(a.errorText=n.errorMessage)}return a}function j(e,t){return t[e]||{}}function w(e,t){var a;return a={},n()(a,m["c"].PURCHASE_ORDER_NUMBER_INVALID_CHARACTERS,{errorText:f.t("Please enter a valid number between 1 and 20 digits long.")}),n()(a,m["c"].NUMBER_OF_USERS_IS_REQUIRED,{errorText:f.t("You\u2019ll need to include the numbers of members.")}),n()(a,m["c"].NUMBER_OF_USERS_INVALID_CHARACTERS,{errorText:f.t("Please enter a valid number.")}),n()(a,m["c"].NUMBER_OF_USERS_INVALID_MIN_ALLOWED,{errorText:f.t("To pay by invoice, you\u2019ll need at least {minInvoiceSeats} members.",{minInvoiceSeats:e})}),n()(a,m["c"].NUMBER_OF_USERS_INVALID_MAX_ALLOWED,{errorText:f.t("You can only pay by invoice for {maxInvoiceSeats} or fewer members.",{maxInvoiceSeats:t})}),a}var S={validatePurchaseOrderNumber:y,validateNumberOfUsers:O,validateAdditionalBillingContacts:C,getInvoiceDataErrorMetadata:j}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"bulkAddStarredItems",function(){return w});a.d(t,"addStarredItem",function(){return S});a.d(t,"removeStarredItem",function(){return I});a.d(t,"updatePageNumber",function(){return T});a.d(t,"setLoadingState",function(){return A});a.d(t,"resetStarredItems",function(){return N});a.d(t,"fetchStarsList",function(){return D});a.d(t,"initialState",function(){return x});a.d(t,"getAllStarredItems",function(){return L});a.d(t,"getCurrentPageNumber",function(){return B});a.d(t,"getTotalPages",function(){return U});a.d(t,"getLoadingState",function(){return q});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(2);var l=a.n(o);var c=a(0);var u=a(192);var d=a(27);var p=a(123);var h=a(254);var v=a(838);var m=a(18);var f=a(36);var b=a(15);var g=a(14);var _=a(12);var y=a(1528);var O=a(293);var k=a(178);var E;var C="stars";var j=Object(o["memoize"])(function(){return new u["b"]({fetch:function e(t){Object(d["a"])(t,N());return Object(d["a"])(t,D({exclude:"Ch,Gh,Dh",count:20,page:1}))},isEnabled:function e(){return true},metricsName:"stars"})});var w=Object(m["b"])("Adds multiple IDs of starred items to array");w.propTypes=c["b"].arrayOf(c["b"].object).isRequired;var S=Object(m["b"])("Adds ID of single starred items to array");S.propTypes=c["b"].object.isRequired;var I=Object(m["b"])("Removes ID single starred item from array");I.propTypes=c["b"].object.isRequired;var T=Object(m["b"])("Store current pagination");T.propTypes=c["b"].object.isRequired;var A=Object(m["b"])("Sets if stars are loading");A.propTypes=c["b"].bool.isRequired;var N=Object(m["b"])("Resets stars to initial state");N.propTypes=null;var P={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment",CHANNEL:"channel"};var R=function e(t,a){if(a.type===P.MESSAGE)return{type:a.type,channel:a.channel,ts:a.message.ts};if(a.type===P.FILE)return{type:a.type,id:a.file.id};if(a.type===P.FILE_COMMENT)return{type:a.type,id:a.comment.id,fileId:a.file.id};return{}};var M=function e(t,a){var r=t.ts||t.message&&t.message.ts;return Object(o["filter"])(a,function(e){if(t.type===P.MESSAGE&&e.channel===t.channel&&e.ts===r)return false;if(t.type===P.FILE&&e.id===t.file_id)return false;return true})};var D=Object(b["b"])("Fetch starred items list for user",function(e,t,a){e(A(true));return e(Object(y["a"])(s()({reason:"fetchStarsList"},a))).then(function(a){var r=Object(o["filter"])(a.items,function(e){return e.type===P.MESSAGE});Object(o["forEach"])(r,function(t){var a=e(Object(O["a"])({imsgs:[t.message],channelId:t.channel}));a.length&&e(Object(p["a"])(a))});var n=Object(o["filter"])(a.items,function(e){return e.type===P.FILE});n=Object(o["map"])(n,function(e){return e.file});n.length&&e(Object(h["a"])({files:n}));var i=Object(o["filter"])(a.items,function(e){return e.type===P.FILE_COMMENT});var s={};i.forEach(function(e){s[e.file.id]=e.file});i.forEach(function(e){var t=e.comment;var a=s[e.file.id];var r=Object(v["a"])(t,a);s[a.id]=r});e(Object(h["a"])({files:Object(o["values"])(s)}));e(w(a.items));e(T(a.paging));var l=t();var c=Object(k["getTeamId"])(l);j().markObjectsAsFresh(c,[C])}).catch(function(e){Object(_["a"])({getState:t}).error("Error in fetchStarsList: "+JSON.stringify(e));throw e}).finally(function(){e(A(false))})});D.propTypes={options:c["b"].shape({count:c["b"].number,page:c["b"].number,exclude:c["b"].bool,cursor:c["b"].string,limit:c["b"].number})};var x={starsList:[],currentPage:0,totalPages:0,isLoading:true};var F=Object(f["b"])((E={},n()(E,w,function(e,t){if(!t||!t.length||!Object(o["isArray"])(t))return e;var a=Object(o["filter"])(t,function(e){return e.type!==P.CHANNEL});var r=Object(o["map"])(a,function(t){return R(e,t)});var n=e.starsList.concat(r);var i=Object(o["uniqWith"])(n,o["isEqual"]);var l=s()({},e,{starsList:i});return l}),n()(E,S,function(e,t){if(!t)return e;if(t.type===P.CHANNEL)return e;var a=M(t,e.starsList);var r=R(e,t);a=Object(o["concat"])([r],a);var n=s()({},e,{starsList:a});return n}),n()(E,I,function(e,t){if(!t)return e;var a=M(t,e.starsList);var r=s()({},e,{starsList:a});return r}),n()(E,T,function(e,t){if(!t.page||!t.pages)return e;var a=s()({},e,{currentPage:t.page,totalPages:t.pages});return a}),n()(E,A,function(e,t){var a=s()({},e,{isLoading:t});return a}),n()(E,N,function(){return x}),E),x,{persistenceEnabled:true});F.propTypes={starsList:c["b"].arrayOf(c["b"].shape({type:c["b"].string.isRequired,channel:c["b"].string,ts:c["b"].string,id:c["b"].string})),currentPage:c["b"].number,totalPages:c["b"].number,isLoading:c["b"].bool};t["default"]=F;var L=Object(g["b"])(function(e){var t=Object(k["getTeamId"])(e);j().maybeRefetch(t,C);return e&&e.stars&&e.stars.starsList});var B=Object(g["b"])(function(e){return e&&e.stars&&e.stars.currentPage});var U=Object(g["b"])(function(e){return e&&e.stars&&e.stars.totalPages});var q=Object(g["b"])(function(e){return e&&e.stars&&e.stars.isLoading})},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(0);var c=a(4);var u=a(1697);var d=a(16);var p=a.n(d);var h=a(34);var v=a(10);var m=a(30);var f=a(38);var b=a(3);var g=a.n(b);var _=a(6);var y=a.n(_);var O=a(7);var k=a.n(O);var E=a(8);var C=a.n(E);var j=a(9);var w=a.n(j);var S=a(2);var I=a(22);var T=a(66);var A=a(410);var N=a(868);var P=a(765);var R=a(12);var M=a(45);var D=a(186);var x=a(1850);var F=a(407);var L=a(181);var B=a(28);var U=a(50);var q=300;var G={children:l["b"].node,className:l["b"].string,disabled:l["b"].bool,tooltip:l["b"].oneOfType([l["b"].string,l["b"].func]),"aria-label":l["b"].string.isRequired,onClick:l["b"].func.isRequired,onTrigger:l["b"].func};var W={children:null,className:void 0,disabled:false,tooltip:void 0,onTrigger:S["noop"]};var H=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMouseDown=a.onMouseDown.bind(a);a.onMouseUp=a.onMouseUp.bind(a);a.pressTimer=void 0;return a}k()(t,[{key:"componentWillUnmount",value:function e(){this.pressTimer&&clearTimeout(this.pressTimer);window.removeEventListener("mouseup",this.onMouseUp)}},{key:"onMouseDown",value:function e(t){var a=this;if(this.props.disabled)return;if(0!==t.button)return;t.persist();this.pressTimer=setTimeout(function(){return a.props.onTrigger(t)},q);window.addEventListener("mouseup",this.onMouseUp)}},{key:"onMouseUp",value:function e(){this.pressTimer&&clearTimeout(this.pressTimer);window.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function e(){var t=this.props,a=t.disabled,r=t.tooltip,i=t["aria-label"];var s=p()("p-global_nav__top_button",this.props.className,{"p-global_nav__top_button--disabled":a});var o=function e(t){var r=t.tip,i=t.children;if(a||!r)return i;return n.a.createElement(U["c"],{tip:r,delay:800,position:"bottom",offsetY:Sr,tipClassName:"p-global_nav__top_history_tip"},i)};return n.a.createElement(o,{tip:r},n.a.createElement(B["c"],{className:s,disabled:a,onClick:this.props.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,"aria-label":i},this.props.children))}}]);return t}(r["PureComponent"]);H.displayName="HistoryButton";H.defaultProps=W;var V=H;var K=a(23);var z=a(139);var Y=new v["b"]("global_nav");var Q={viewId:l["b"].string,viewName:l["b"].string,teamId:l["b"].string,teamName:l["b"].string,teamIcon:l["b"].string,currentTeamId:l["b"].string,featureGlobalNav:l["b"].bool};var J={viewId:void 0,viewName:void 0,teamId:void 0,teamName:void 0,teamIcon:void 0,currentTeamId:void 0,featureGlobalNav:false};var Z=function(e){w()(t,e);function t(){y()(this,t);return C()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}k()(t,[{key:"renderTeamIcon",value:function e(){var t=this.props,a=t.teamIcon,r=t.teamName;return n.a.createElement(U["c"],{tip:r,position:"bottom",zIndex:"above_fs"},n.a.createElement("div",{className:"p-global_nav__top_history_item_team_icon",style:{backgroundImage:"url("+a+")"}}))}},{key:"renderThreads",value:function e(){var t=this.props,a=t.teamId,i=t.currentTeamId,s=t.featureGlobalNav;if(!s)return null;var o=a===i?n.a.createElement(I["b"],{type:"small-reply",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon();var l=Y.t("Threads");return n.a.createElement(r["Fragment"],null,o,l)}},{key:"renderUnreads",value:function e(){var t=this.props,a=t.teamId,i=t.currentTeamId,s=t.featureGlobalNav;if(!s)return null;var o=a===i?n.a.createElement(I["b"],{type:"list",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon();var l=Y.t("All Unreads");return n.a.createElement(r["Fragment"],null,o,l)}},{key:"render",value:function e(){var t=this.props,a=t.viewId,i=t.viewName,s=t.teamId,o=t.currentTeamId;if("Vall_threads"===a)return this.renderThreads();if("Vall_unreads"===a)return this.renderUnreads();if(s===o)return n.a.createElement(z["a"],{channelId:a,className:"p-global_nav__top_history_item_channel_name"});return n.a.createElement(r["Fragment"],null,this.renderTeamIcon(),i)}}]);return t}(r["Component"]);Z.displayName="HistoryItem";Z.defaultProps=J;var X=function e(t){return{currentTeamId:Object(K["c"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var $=Object(i["connect"])(X)(Z);var ee=new v["b"]("global_nav");var te={history:l["b"].object.isRequired,back:l["b"].func,forward:l["b"].func,index:l["b"].func,sync:l["b"].func,action:l["b"].func,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var ae={back:S["noop"],forward:S["noop"],index:S["noop"],sync:S["noop"],action:l["b"].func,featureGlobalNav:false};var re=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onBackClick=a.onBackClick.bind(a);a.onForwardClick=a.onForwardClick.bind(a);a.renderBackMenu=a.renderBackMenu.bind(a);a.renderForwardMenu=a.renderForwardMenu.bind(a);a.renderBackTooltip=a.renderBackTooltip.bind(a);a.renderForwardTooltip=a.renderForwardTooltip.bind(a);return a}k()(t,[{key:"componentDidMount",value:function e(){var t=this;if(!Object(L["c"])())return;window.requestIdleCallback&&window.requestIdleCallback(function(){return t.props.sync()});var a=Object(m["isWindows"])();var r=[{keys:a?"alt+left":["command+[","command+left"],handler:function e(a){if(t.shouldPreventShortcut(a))return;a.preventDefault();t.props.action("GLOBAL-NAV","Navigating back in history with key command");t.props.back();t.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_BACK"}}})}},{keys:a?"alt+right":["command+]","command+right"],handler:function e(a){if(t.shouldPreventShortcut(a))return;a.preventDefault();t.props.action("GLOBAL-NAV","Navigating forward in history with key command");t.props.forward();t.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_FORWARD"}}})}}];this.keyCommands||(this.keyCommands=new D["a"]);this.keyCommands.bindAll(r)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onBackClick",value:function e(){this.props.back();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK"}}})}},{key:"onForwardClick",value:function e(){this.props.forward();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD"}}})}},{key:"shouldPreventShortcut",value:function e(t){if(t.metaKey&&("ArrowRight"===t.key||"ArrowLeft"===t.key)){var a=Object(x["a"])()&&Object(F["g"])(document.activeElement)||document.activeElement===document.body;if(!a)return true}return false}},{key:"renderStackMenu",value:function e(t,a){var r=this;var i=function e(t){return t.viewId+":"+t.teamId};var s=Object(S["uniqBy"])(t,i);var o=s.map(function(e){return{label:n.a.createElement($,e),key:i(e),click:function t(){r.props.index({target:e.index});r.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_STACK_ITEM"}}})},className:"p-global_nav__top_history_item"}});return n.a.createElement(T["a"],g()({},a,{template:o}))}},{key:"renderBackMenu",value:function e(t){var a=Object(P["a"])(this.props.history);if(!a)return null;this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK_STACK"}}});return this.renderStackMenu(a.reverse(),t)}},{key:"renderForwardMenu",value:function e(t){var a=Object(P["b"])(this.props.history);if(!a)return null;this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD_STACK"}}});return this.renderStackMenu(a,t)}},{key:"renderBackTooltip",value:function e(){if(!this.props.featureGlobalNav)return null;var t=Object(m["isMac"])()?"\u2318[":ee.t("Alt+Left Arrow");return n.a.createElement(r["Fragment"],null,ee.t("Go back"),n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},t))}},{key:"renderForwardTooltip",value:function e(){if(!this.props.featureGlobalNav)return null;var t=Object(m["isMac"])()?"\u2318]":"Alt+Right Arrow";return n.a.createElement(r["Fragment"],null,ee.t("Go forward"),n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},t))}},{key:"render",value:function e(){var t=this.props,a=t.history,i=t.featureGlobalNav;if(!i)return null;if(!Object(L["c"])())return null;var s=!Object(P["a"])(a)||!Object(P["a"])(a).length;var o=!Object(P["b"])(a)||!Object(P["b"])(a).length;var l={position:"bottom-left",offsetX:-12,offsetY:Ir,customTrigger:true};return n.a.createElement(r["Fragment"],null,n.a.createElement(T["e"],g()({renderMenu:this.renderBackMenu},l),n.a.createElement(V,{className:"p-global_nav__top_history p-global_nav__top_history--back",onClick:this.onBackClick,disabled:s,tooltip:this.renderBackTooltip,"aria-label":ee.t("Go back")},n.a.createElement(I["b"],{type:"chevron-large-left",className:"p-global_nav__top_button_icon"}))),n.a.createElement(T["e"],g()({renderMenu:this.renderForwardMenu},l),n.a.createElement(V,{className:"p-global_nav__top_history",onClick:this.onForwardClick,disabled:o,tooltip:this.renderForwardTooltip,"aria-label":ee.t("Go forward")},n.a.createElement(I["b"],{type:"chevron-large-right",className:"p-global_nav__top_button_icon"}))))}}]);return t}(r["Component"]);re.displayName="History";re.defaultProps=ae;var ne=function e(t){return{history:Object(A["getNavigationHistory"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),action:Object(R["a"])({state:t}).action,clogger:Object(M["a"])({state:t})}};var ie={back:N["a"],forward:N["b"],index:N["c"],sync:N["f"]};var se=Object(i["connect"])(ne,ie)(re);var oe=a(35);var le=a(31);var ce=a(1329);var ue=a(37);var de=a.n(ue);var pe=a(42);var he=a(1094);var ve=a(20);var me=Object(ve["b"])("TS.ui.enterprise_shared_channels_invites.start");var fe=a(1773);var be=a(803);var ge=a(1784);var _e=Object(ve["b"])("TS.ui.workspaces.start");var ye=a(15);var Oe=a(48);var ke=a(1555);var Ee=Object(ye["b"])("Opens the help modal",function(e,t,a){e(Object(Oe["openModal"])({element:n.a.createElement(ke["a"],a)}))});Ee.propTypes={trigger:l["b"].string.isRequired};var Ce=a(1367);var je=Object(ve["b"])("TS.magic_login.execute");var we=a(138);var Se=a(3180);var Ie=new v["b"]("workflow_builder");var Te=function e(t){var a=t.featureBuilderI18N;return n.a.createElement("div",{className:"p-launch_workflow_builder"},a?Ie.t("Workflow Builder"):"Workflow Builder"," ",n.a.createElement("div",{className:"p-launch_workflow_builder__pill"},a?Ie.t("PILOT"):"PILOT"))};Te.displayName="LaunchWorkflowBuilder";var Ae=Object(we["a"])("feature_builder_i18n")(Te);var Ne={name:l["b"].string.isRequired,org:l["b"].string,icon:l["b"].string,url:l["b"].string};var Pe={org:void 0,icon:void 0,url:void 0};var Re=function e(t){var a=t.name,r=t.icon,i=t.org,s=t.url;return n.a.createElement("div",{className:"p-global_nav__top_menu_header"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_icon",style:{backgroundImage:r&&"url("+r+")"}}),n.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},a),n.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},i||s)))};Re.displayName="TeamHeader";Re.defaultProps=Pe;var Me=function e(t){var a=Object(oe["d"])(t);return{name:Object(le["getTeamDisplayName"])(a),org:a.enterprise_name,icon:a.icon&&a.icon.image_88||void 0,url:a.domain+".slack.com"}};var De=Object(i["connect"])(Me)(Re);var xe=a(24);var Fe=a(1703);var Le=a(1190);var Be=new v["b"]("global_nav");var Ue={menuProps:l["b"].object,team:l["b"].object.isRequired,isEnterprise:l["b"].bool,enterpriseURL:l["b"].string,isAppmin:l["b"].bool,featureGlobalNav:l["b"].bool};var qe={menuProps:void 0,isEnterprise:false,enterpriseURL:void 0,isAppmin:false,featureGlobalNav:false};var Ge=function e(t){var a=t.featureGlobalNav,r=t.team,i=t.isEnterprise,s=t.enterpriseURL,o=t.isAppmin,l=t.menuProps;if(!a)return null;var c=[{label:Be.t("Manage members"),href:Object(le["getTeamUrl"])(r,"/admin")},{label:Be.t("Workspace settings"),href:Object(le["getTeamUrl"])(r,"/admin/settings")},{label:Be.t("Organization settings"),href:"https://"+s+"/manage",hide:!i},{label:Be.t("Manage apps"),href:Object(le["getTeamUrl"])(r,"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"),hide:i||!o},{label:Be.t("Manage shared channels"),click:function e(){return Object(Fe["a"])(r.id)},hide:!Object(Le["a"])()}].filter(function(e){return!e.hide});return n.a.createElement(T["a"],g()({},l,{template:c}))};Ge.displayName="TeamAdminSubmenu";Ge.defaultProps=qe;var We=function e(t){var a=Object(oe["d"])(t);return{team:a,isEnterprise:Object(le["isEnterpriseTeam"])(a),enterpriseURL:Object(c["getFromBootData"])(t,"enterprise_url"),isAppmin:Object(xe["k"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var He=Object(i["connect"])(We)(Ge);var Ve=a(26);var Ke=a.n(Ve);var ze=a(49);var Ye=a(536);var Qe=a(1104);var Je=Object(ve["b"])("TS.ui.enterprise_teams_dialog.show");var Ze=function e(){return Je(TS.model.user)};var Xe=new v["b"]("global_nav");var $e=3;var et={menuProps:l["b"].object,enterprises:l["b"].arrayOf(l["b"].shape({id:l["b"].string,name:l["b"].string,teams:l["b"].arrayOf(l["b"].object)})),others:l["b"].arrayOf(l["b"].shape({id:l["b"].string,name:l["b"].string,url:l["b"].string})),currentEnterpriseId:l["b"].string,signinURL:l["b"].string,logoutURL:l["b"].string,featureGlobalNav:l["b"].bool};var tt={menuProps:void 0,enterprises:[],others:[],currentEnterpriseId:void 0,signinURL:void 0,logoutURL:void 0,featureGlobalNav:false};var at=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.getTeamItem=a.getTeamItem.bind(a);a.getLogoutItem=a.getLogoutItem.bind(a);a.getEnterpriseItems=a.getEnterpriseItems.bind(a);a.getOtherItems=a.getOtherItems.bind(a);return a}k()(t,[{key:"getTeamItem",value:function e(t){var a=this.props.featureGlobalNav;if(!a)return null;if(!t.url)return null;var i=t.url+("/"===t.url.substr(-1)?"messages":"/messages");return{label:n.a.createElement(r["Fragment"],null,n.a.createElement("div",{className:"p-global_nav__top_switch_workspaces_icon",style:{backgroundImage:"url("+Object(S["get"])(t,"icons.image_44")+")"}}),n.a.createElement("strong",null,t.name)),href:i,target:"_self"}}},{key:"getLogoutItem",value:function e(t){var a=this.props,r=a.logoutURL,n=a.featureGlobalNav;if(!n)return null;return{label:Xe.rt("Sign out of <strong>{enterpriseName}</strong>",{enterpriseName:t.name}),href:Object(Qe["a"])(t.id,r),target:"_self"}}},{key:"getEnterpriseItems",value:function e(){var t=this;var a=this.props,r=a.enterprises,n=a.currentEnterpriseId,i=a.featureGlobalNav;if(!i)return[];return Object(S["flatten"])(r.map(function(e){var a=e.teams.map(t.getTeamItem);var r=e.id===n&&e.overLimit?{label:Xe.rt("See all <strong>{enterpriseName}</strong> workspaces",{enterpriseName:e.name}),click:function e(){return Ze()}}:null;return[{type:"header",label:e.name}].concat(Ke()(a),[r,{type:"separator"}])}))}},{key:"getOtherItems",value:function e(){var t=this;var a=this.props,r=a.others,n=a.featureGlobalNav;if(!n)return[];var i=r.map(function(e){return t.getTeamItem(e)});return[{type:"header",label:Xe.t("Your other workspaces")}].concat(Ke()(i))}},{key:"render",value:function e(){var t=this.props,a=t.signinURL,r=t.featureGlobalNav,i=t.menuProps;if(!r)return null;var s=a&&[{type:"separator"},{label:Xe.t("Sign in to another workspace"),href:a}];var o=[].concat(Ke()(this.getEnterpriseItems()),Ke()(this.getOtherItems()),Ke()(s||[]));return n.a.createElement(T["a"],g()({},i,{template:o}))}}]);return t}(r["Component"]);at.displayName="SwitchWorkspacesSubmenu";at.defaultProps=tt;var rt=function e(t){var a=Object(c["getOtherAccounts"])(t).map(function(e){return{id:e.team_id,enterpriseId:e.enterprise_id,url:e.team_url,name:e.team_name,enterpriseName:e.enterprise_name,icons:e.team_icon}});if(!Object(ze["a"])()){var r=Object(xe["b"])(t);(Object(S["get"])(r,"enterprise_user.teams")||[]).map(function(e){return Object(oe["i"])(t,e)}).forEach(function(e){a.push({id:e.id,enterpriseId:Object(S["get"])(r,"enterprise_user.enterprise_id")||e.enterprise_id,url:Object(Ye["b"])(t,e.domain),name:Object(le["getTeamDisplayName"])(e),enterpriseName:Object(S["get"])(r,"enterprise_user.enterprise_name")||e.enterprise_name,icons:e.icon,isUnknown:Object(le["isUnknown"])(e)})})}var n=Object(oe["d"])(t);var i=n.enterprise_id;a=a.sort(function(e,t){if(i){if(e.enterpriseId===i&&t.enterpriseId!==i)return-1;if(t.enterpriseId===i&&e.enterpriseId!==i)return 1}if(!e.isUnknown&&t.isUnknown)return-1;if(!t.isUnknown&&e.isUnknown)return 1;return Object(v["p"])(e.name,t.name)});var s=n.id;a=a.filter(function(e){return e.id!==s});return Object(S["uniqBy"])(a,"id")};var nt=function e(t){var a={};t.filter(function(e){return e.enterpriseId}).forEach(function(e){var t=e.enterpriseId;a[t]?a[t].teams.length<$e?a[t].teams.push(e):a[t].overLimit=true:a[t]={id:t,name:e.enterpriseName,teams:[e]}});return Object.values(a)};var it=function e(t){var a=rt(t);var r=nt(a);var n=a.filter(function(e){return!e.enterpriseId});var i=Object(oe["d"])(t).enterprise_id;var s=Object(c["getFromBootData"])(t,"signin_url");var o=Object(c["getFromBootData"])(t,"logout_url");return{enterprises:r,others:n,currentEnterpriseId:i,signinURL:s,logoutURL:o,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var st=Object(i["connect"])(it)(at);var ot=a(68);var lt=a(182);var ct=a(17);var ut=a(801);function dt(e){var t=Object(xe["b"])(e);var a=Object(oe["d"])(e);var r=Object(ct["isAdmin"])(t);var n=Object(ct["isOwner"])(t);var i=Object(ct["isRestricted"])(t);var s=Object(c["pageNeedsEnterprise"])(e);var o=Object(le["isPaidTeam"])(a);var l=r;var u=Object(ut["f"])();var d=Object(c["isFeatureEnabled"])(e,"feature_builder_can_access");var p=r||!i&&(!Object(ot["a"])(e,"emoji_only_admins")||!Object(ot["a"])(e,"slackbot_responses_only_admins")||!Object(ot["a"])(e,"loading_only_admins"));var v=s&&Object(lt["isAppSpaceEnabled"])(e)&&Object(xe["k"])(e);var f=r||!Object(ot["a"])(e,"stats_only_admins")&&!i;var b=n||Object(h["f"])(e,"purchaser")||Object(ot["a"])(e,"all_users_can_purchase");var g=b&&o;var _=!o&&!Object(pe["isAppStoreBuild"])();var y=s&&!Object(ct["isRestricted"])(t);var O=Object(ut["c"])();var k=Object(c["getFromBootData"])(e,"help_url");var E=Object(c["isFeatureEnabled"])(e,"feature_tinyspeck")||m["isDev"];var C=s&&!i;var j=Object(c["getOtherAccounts"])(e).length-1;var w=Object(ze["a"])()?j:j+Object(S["get"])(t,"enterprise_user.teams.length",1);var I=w>=1&&!pe["isDesktop"];var T=!I&&!!Object(c["getFromBootData"])(e,"signin_url");return{administration:l,invite:u,launchWorkflowBuilder:d,customize:p,manageApps:v,analytics:f,billing:g,plans:_,orgShared:y,externalShared:O,help:k,version:E,findWorkspaces:C,switchWorkspaces:I,signin:T}}var pt={},ht=pt.removeWorkspace;var vt=new v["b"]("global_nav");var mt={actions:l["b"].object,team:l["b"].object.isRequired,signOut:l["b"].func,openPrefsModal:l["b"].func,signoutName:l["b"].string.isRequired,signoutURL:l["b"].string,signinURL:l["b"].string,launchWorkflowBuilder:l["b"].func,renderSonicMenu:l["b"].func,featureGlobalNav:l["b"].bool};var ft={actions:{},signOut:S["noop"],openPrefsModal:S["noop"],launchWorkflowBuilder:S["noop"],signoutURL:void 0,signinURL:void 0,renderSonicMenu:void 0,featureGlobalNav:false};var bt=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSigninClick=a.onSigninClick.bind(a);a.onOpenAppClick=a.onOpenAppClick.bind(a);a.renderAdminSubmenu=a.renderAdminSubmenu.bind(a);a.renderWorkspacesSubmenu=a.renderWorkspacesSubmenu.bind(a);return a}k()(t,[{key:"onSigninClick",value:function e(t){if(pe["isDesktop"]){t.preventDefault();Object(pe["signInTeam"])()}}},{key:"onOpenAppClick",value:function e(t){t.preventDefault();je({fallback_to_browser:true,browser_uri:"/downloads",app_uri:"/ssb/open"})}},{key:"renderAdminSubmenu",value:function e(t){return n.a.createElement(He,{menuProps:t})}},{key:"renderWorkspacesSubmenu",value:function e(t){return n.a.createElement(st,{menuProps:t})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.actions,i=a.renderSonicMenu,s=a.featureGlobalNav,o=a.signoutName,l=a.signoutURL,c=a.signinURL,u=a.team,d=a.launchWorkflowBuilder,p=de()(a,["actions","renderSonicMenu","featureGlobalNav","signoutName","signoutURL","signinURL","team","launchWorkflowBuilder"]);if(!s)return null;var h=[{type:"submenu",label:"Sonic",renderSubmenu:i,hide:!i},{type:"separator"},{type:"custom",children:n.a.createElement(De,{key:"team-header"})},{type:"separator"},{label:vt.t("Preferences"),shortcut:Object(m["isMac"])()&&pe["isDesktop"]&&"\u2318,",click:function e(){return t.props.openPrefsModal()}},{type:"separator"},{type:"submenu",label:vt.t("Administration"),renderSubmenu:this.renderAdminSubmenu,hide:!r.administration},{label:vt.t("Analytics"),hide:!r.analytics,href:Object(le["getTeamUrl"])(u,"/stats")},{label:vt.t("Billing"),hide:!r.billing,href:Object(le["getTeamUrl"])(u,"/admin/billing")},{label:vt.t("See paid plans"),hide:!r.plans,href:Object(le["getTeamUrl"])(u,"/pricing")},{key:"launch-workflow-builder",hide:!r.launchWorkflowBuilder,click:d,children:n.a.createElement(Ae,null)},{label:vt.t("Customize Slack"),hide:!r.customize,href:Object(le["getTeamUrl"])(u,"/customize?utm_source=in-prod&utm_medium=inprod-customize_link-slack_menu-click"),target:"_blank"},{type:"separator"},{label:vt.t("Invite people"),hide:!r.invite,click:function e(){return Object(he["a"])({source:"team_menu"})}},{label:vt.t("Manage apps"),hide:!r.manageApps,href:"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"},{label:vt.t("Shared channels"),hide:!r.orgShared,click:function e(){return me()}},{label:vt.t("Shared channels (beta)"),hide:!r.externalShared,click:function e(){return Object(fe["a"])()}},{type:"separator"},{label:vt.t("Help & feedback"),hide:!r.help,click:Ee},{label:"Version info (TS only)",hide:!r.version,click:Ce["a"]},{type:"separator"},{label:vt.t("Find more workspaces"),hide:!r.findWorkspaces,click:function e(){return _e()}},{type:"submenu",label:vt.t("Switch workspaces"),hide:Object(f["a"])()||!r.switchWorkspaces,renderSubmenu:this.renderWorkspacesSubmenu},{label:vt.t("Sign in to another workspace"),hide:!r.signin,href:c,click:this.onSigninClick},{label:vt.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:o}),hide:!Object(f["a"])(),click:function e(){return t.props.signOut(u.id)},dataQa:"logout"},{label:vt.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:o}),hide:Object(f["a"])(),href:l,target:"_self",dataQa:"logout"},{type:"separator"},{label:vt.rt("Open the Slack App"),hide:pe["isDesktop"],href:Object(le["getTeamUrl"])(u,"/ssb/open"),click:this.onOpenAppClick}].filter(function(e){return!e.hide});return n.a.createElement(T["a"],g()({},p,{template:h,menuClassNames:"p-global_nav__top_team_menu",stripTerminalSeparators:true}))}}]);return t}(r["Component"]);bt.displayName="TeamMenu";bt.defaultProps=ft;var gt=function e(t){return{signOut:function e(){return t(ht.apply(void 0,arguments))},openPrefsModal:function e(){return t(Object(be["a"])())},launchWorkflowBuilder:function e(){return t(Object(ge["a"])())}}};var _t=function e(t){var a=Object(oe["d"])(t);return{actions:dt(t),team:a,signoutName:a.enterprise_name||Object(le["getTeamDisplayName"])(a),signoutURL:Object(le["isEnterpriseTeam"])(a)?Object(c["getFromBootData"])(t,"enterprise_logout_url"):Object(c["getFromBootData"])(t,"logout_url"),signinURL:Object(c["getFromBootData"])(t,"signin_url"),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var yt=Object(i["connect"])(_t,gt)(bt);var Ot=yt;var kt=new v["b"]("global_nav");var Et={name:l["b"].string,featureGlobalNav:l["b"].bool,featureOfflineMode:l["b"].bool,clogger:l["b"].object.isRequired,renderSonicMenu:l["b"].func};var Ct={name:void 0,featureGlobalNav:false,featureOfflineMode:false,renderSonicMenu:void 0};var jt=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.renderMenu=a.renderMenu.bind(a);a.renderIcon=a.renderIcon.bind(a);return a}k()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_TEAM_MENU"}}})}},{key:"renderMenu",value:function e(t){return n.a.createElement(Ot,g()({},t,{renderSonicMenu:this.props.renderSonicMenu}))}},{key:"renderIcon",value:function e(){if(this.props.featureOfflineMode)return n.a.createElement(r["Fragment"],null,n.a.createElement(ce["b"],null,n.a.createElement(I["b"],{type:"chevron-down",className:"p-global_nav__top_name_icon"})),n.a.createElement(ce["a"],null,n.a.createElement(U["c"],{tip:kt.t("No network connection"),position:"bottom"},n.a.createElement(I["b"],{type:"cloud-offline-small",className:"p-global_nav__top_name_icon margin_left_25"}))));return n.a.createElement(I["b"],{type:"chevron-down",className:"p-global_nav__top_name_icon"})}},{key:"render",value:function e(){var t=this.props,a=t.name,r=t.featureGlobalNav;if(!a||!r)return null;return n.a.createElement(T["e"],{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:-4,allowanceX:12,onClick:this.onClick},n.a.createElement(B["c"],{className:"p-global_nav__top_name","data-qa":"team_menu","aria-label":kt.t("Team menu")},n.a.createElement("div",{className:"overflow_ellipsis"},a),this.renderIcon()))}}]);return t}(r["Component"]);jt.displayName="Name";jt.defaultProps=Ct;var wt=function e(t){var a=Object(oe["d"])(t);return{name:a?Object(le["getTeamDisplayName"])(a):void 0,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureOfflineMode:Object(c["isFeatureEnabled"])(t,"feature_offline_mode"),clogger:Object(M["a"])({state:t})}};var St=Object(i["connect"])(wt)(jt);var It=a(1053);var Tt=a(216);var At=a(451);var Nt=a(373);var Pt=a(553);var Rt=a(1546);var Mt=a(309);var Dt=a(73);var xt=a(19);var Ft=a(180);var Lt=a(168);var Bt=a(1728);var Ut={name:l["b"].string,secondary:l["b"].string,userId:l["b"].string,inDnd:l["b"].bool,inDndBySnooze:l["b"].bool};var qt={name:void 0,secondary:void 0,userId:void 0,inDnd:false,inDndBySnooze:false};var Gt=function e(t){var a=t.name,r=t.secondary,i=t.userId,s=t.inDnd,o=t.inDndBySnooze;var l=r?n.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},r):null;var c=p()("p-global_nav__top_menu_header","p-global_nav__top_menu_header--full","p-global_nav__top_menu_header--user",{"p-global_nav__top_menu_snooze_background":s&&o,"p-global_nav__top_menu_schedule_background":s&&!o});return n.a.createElement("div",{className:c},n.a.createElement(Tt["b"],{userId:i,size:36,isInteractive:false,className:"p-global_nav__top_menu_header_icon",tabIndex:"-1"}),n.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},n.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},a),l))};Gt.displayName="UserHeader";Gt.defaultProps=qt;var Wt=function e(t){var a=Object(xe["b"])(t);var r=Object(Ft["getSnoozeScheduleForCurrentUser"])(t),n=r.snoozeEnabled;return{name:Object(ct["getPrefCompliantMemberName"])(t,a),secondary:Object(ct["getMemberSecondaryName"])(t,a),userId:a.id,inDnd:!!Object(Ft["getDndByMemberId"])(t,a.id),inDndBySnooze:n}};var Ht=Object(i["connect"])(Wt)(Gt);var Vt=a(1102);var Kt=a(1714);var zt=new v["b"]("do_not_disturb");var Yt={inDndBySnooze:l["b"].bool.isRequired,snoozeEndTs:l["b"].number,dndEndTs:l["b"].number,do24hrTime:l["b"].bool};var Qt={snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:false};var Jt=function(e){w()(t,e);function t(){y()(this,t);return C()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}k()(t,[{key:"render",value:function e(){var t=this.props,a=t.inDndBySnooze,r=t.snoozeEndTs,i=t.dndEndTs,s=t.do24hrTime;var o=p()("p-dnd_header",{"p-dnd_header__snooze_background":a,"p-dnd_header__schedule_background":!a});var l=a?r:i;var c=Object(Vt["b"])(l,{do24hrTime:s});return n.a.createElement("div",{className:o},n.a.createElement("div",{className:"p-dnd_header__status"},n.a.createElement("div",null,n.a.createElement("strong",null,zt.t("Do Not Disturb: ON",{fallbackHash:"e9f808845f44c3345ade56f562f58e9da896e00e"}))),n.a.createElement("div",{className:"p-dnd_header__sub_text"},c)))}}]);return t}(r["PureComponent"]);Jt.displayName="DndHeader";Jt.defaultProps=Qt;var Zt=function e(t){var a=Object(c["getCurrentUserId"])(t);var r=Object(Ft["getDndScheduleByMemberId"])(t,a),n=r.nextDndEndTs;var i=Object(Ft["getSnoozeScheduleForCurrentUser"])(t),s=i.snoozeEnabled,o=i.snoozeEndTs;return{inDndBySnooze:s,snoozeEndTs:o,dndEndTs:n,do24hrTime:Object(h["f"])(t,"time24")}};var Xt=Object(i["connect"])(Zt)(Jt);function $t(e){var t=Object(c["isFeatureEnabled"])(e,"feature_tinyspeck");return{help:Object(c["getFromBootData"])(e,"help_url"),version:t||m["isDev"]}}var ea=new v["b"]("global_nav");var ta={actions:l["b"].object,currentMember:l["b"].object,currentPresence:l["b"].string,onTriggerClose:l["b"].func,openCustomStatusDialog:l["b"].func,currentChannel:l["b"].object,inDnd:l["b"].bool,inDndBySnooze:l["b"].bool,endDndSnooze:l["b"].func,endDndSchedule:l["b"].func,featureGlobalNav:l["b"].bool,toggleUserPresence:l["b"].func,updateCurrentMemberProfile:l["b"].func,openPrefsModal:l["b"].func};var aa={actions:void 0,currentMember:void 0,currentPresence:void 0,onTriggerClose:S["noop"],openCustomStatusDialog:S["noop"],currentChannel:void 0,inDnd:false,inDndBySnooze:false,endDndSnooze:S["noop"],endDndSchedule:S["noop"],featureGlobalNav:false,toggleUserPresence:S["noop"],updateCurrentMemberProfile:S["noop"],openPrefsModal:S["noop"]};var ra=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderDndMenu=a.renderDndMenu.bind(a);a.renderPresenceLabel=a.renderPresenceLabel.bind(a);return a}k()(t,[{key:"renderDndMenu",value:function e(t){var a=this.props.currentChannel;return n.a.createElement(Bt["a"],{currentChannel:a,menuProps:t,useGlobalNav:true})}},{key:"renderPresenceLabel",value:function e(){var t=this.props,a=t.currentPresence,r=t.featureGlobalNav;if(!r)return null;switch(a){case"active":return ea.rt("Set yourself to <strong>away</strong>",null,function(e){var t=e.text,a=e.key;return n.a.createElement("strong",{key:a},t)});case"away":return ea.rt("<status>Away</status> Set yourself to <strong>active</strong>",null,function(e){var t=e.tag,a=e.text,r=e.key;switch(t){case"status":return n.a.createElement("strong",{className:"half_opacity",key:r},a);case"strong":return n.a.createElement("strong",{key:r},a);default:return null}});default:return null}}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.actions,i=a.currentMember,s=a.inDnd,o=a.inDndBySnooze,l=a.featureGlobalNav,c=de()(a,["actions","currentMember","inDnd","inDndBySnooze","featureGlobalNav"]);if(!l)return null;var u=[{type:"custom",children:n.a.createElement(Ht,{key:"user-header"})},{type:"custom",children:n.a.createElement(Xt,{key:"dnd-header"}),hide:!s},{type:"submenu",label:ea.rt("Turn on <strong>Do Not Disturb</strong>"),renderSubmenu:this.renderDndMenu,hide:s},{label:ea.t("Resume notifications now"),key:"turn-off-dnd",hide:!s,click:o?this.props.endDndSnooze:this.props.endDndSchedule},{type:"submenu",label:ea.t("Adjust time"),renderSubmenu:this.renderDndMenu,hide:!s||s&&!o},{label:ea.t("Adjust schedule\u2026",{fallbackHash:"ce0d0efeb198eef758ed1a5393ca0a0f33012be6"}),key:"adjust-dnd-schedule",hide:!s||s&&o,click:function e(){return t.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"})}},{type:"separator",key:"dnd-separator",hide:!s},{label:ea.t("Clear status"),hide:!Object(ct["hasCustomStatusSet"])(i),click:function e(){t.props.updateCurrentMemberProfile({profile:{status_text:"",status_emoji:"",status_text_canonical:"",status_expiration:0}})}},{label:Object(ct["hasCustomStatusSet"])(i)?ea.t("Edit status"):ea.t("Set a status"),shortcut:Object(m["isMac"])()?"\u2318\u21e7Y":"Ctrl+Shift+Y",click:this.props.openCustomStatusDialog},{label:this.renderPresenceLabel(),key:"set-active-away",click:this.props.toggleUserPresence},{type:"separator",key:"header-separator"},{label:ea.t("Profile & account"),click:function e(){return Object(Lt["i"])(i.id)}},{label:ea.rt("Notification preferences"),key:"notification-preferences",click:function e(){return t.props.openPrefsModal({activeSection:"notifications"})}},{type:"custom",children:n.a.createElement("div",{className:"p-global_nav__top_menu_cap",key:"user-menu-bottom-cap"})}].filter(function(e){return!e.hide});var d=p()({"p-global_nav__top_user_menu":true,"p-global_nav__top_user_menu--dnd":s});return n.a.createElement(T["a"],g()({},c,{template:u,menuClassNames:d,noMargin:true}))}}]);return t}(r["Component"]);ra.displayName="UserMenu";ra.defaultProps=aa;var na=function e(t){var a=Object(xe["b"])(t);var r=Object(Dt["a"])(t);var n=Object(Ft["getSnoozeScheduleForCurrentUser"])(t),i=n.snoozeEnabled;return{actions:$t(t),currentMember:a,currentPresence:Object(Mt["getCurrentMemberPresence"])(t),currentChannel:Object(xt["d"])(t,r,false)||void 0,inDnd:!!Object(Ft["getDndByMemberId"])(t,a.id),inDndBySnooze:i,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var ia={openCustomStatusDialog:It["a"],toggleUserPresence:Mt["toggleUserPresence"],updateCurrentMemberProfile:Rt["a"],endDndSnooze:Pt["b"],endDndSchedule:Pt["a"],openPrefsModal:be["a"]};var sa=Object(i["connect"])(na,ia)(ra);var oa=sa;var la=new v["b"]("global_nav");var ca={userId:l["b"].string,hasCustomStatus:l["b"].bool,openCustomStatusDialog:l["b"].func,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var ua={userId:void 0,hasCustomStatus:false,openCustomStatusDialog:S["noop"],featureGlobalNav:false};var da=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onUserClick=a.onUserClick.bind(a);a.onStatusClick=a.onStatusClick.bind(a);a.renderMenu=a.renderMenu.bind(a);return a}k()(t,[{key:"onUserClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_USER_MENU"}}})}},{key:"onStatusClick",value:function e(){this.props.openCustomStatusDialog();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CUSTOM_STATUS"}}})}},{key:"renderMenu",value:function e(t){return n.a.createElement(oa,t)}},{key:"render",value:function e(){var t=this.props,a=t.userId,r=t.hasCustomStatus,i=t.featureGlobalNav;if(!a||!i)return null;var s=r&&n.a.createElement(B["c"],{onClick:this.onStatusClick,className:"p-global_nav__top_user_status_button","aria-label":la.t("Edit status")},n.a.createElement(At["a"],{memberId:a,tipPosition:"bottom-right",className:"p-global_nav__top_user_status"}),n.a.createElement(I["b"],{type:"pencil",className:"p-global_nav__top_user_status_edit"}));return n.a.createElement("div",{className:"p-global_nav__top_user"},s,n.a.createElement(T["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetX:4,offsetY:10,allowanceX:12,onClick:this.onUserClick},n.a.createElement(B["c"],{"aria-label":la.t("User menu")},n.a.createElement(Tt["b"],{userId:a,size:32,showBadge:false,isInteractive:false,className:p()({"p-global_nav__top_user_avatar":true,"p-global_nav__top_user_avatar--beside-status":r}),tabIndex:"-1"}),n.a.createElement(Nt["a"],{memberId:a,className:"p-global_nav__top_user_presence",inline:false}))))}}]);return t}(r["Component"]);da.displayName="User";da.defaultProps=ua;var pa=function e(t){return{userId:Object(c["getCurrentUserId"])(t),hasCustomStatus:Object(ct["hasCustomStatusSet"])(Object(xe["b"])(t)),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var ha={openCustomStatusDialog:It["a"]};var va=Object(i["connect"])(pa,ha)(da);var ma=a(74);var fa=a.n(ma);var ba=a(1080);var ga=a(931);var _a=a(81);var ya=a(108);var Oa=a(100);var ka=a(279);var Ea={icon:l["b"].string.isRequired,pane:l["b"].string.isRequired,tooltip:l["b"].node.isRequired,"aria-label":l["b"].string.isRequired,active:l["b"].bool,children:l["b"].node,className:l["b"].string,toggleActivityFlexpane:l["b"].func.isRequired,showStarredItemsList:l["b"].func.isRequired,closeFlexpane:l["b"].func.isRequired,clogger:l["b"].object.isRequired};var Ca={active:false,children:void 0,className:void 0};var ja=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}k()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.pane,r=t.active,n=t.clogger;"team"===a?Object(Lt["m"])():"starred_items"===a&&Object(f["a"])()?r?this.props.closeFlexpane():this.props.showStarredItemsList():"activity"===a?this.props.toggleActivityFlexpane():Object(ka["e"])(a);"mentions"===a?n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_ACTIVITY"}}}):"stars"===a&&n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_STARS"}}})}},{key:"render",value:function e(){var t=this.props,a=t.icon,r=t.tooltip,i=t.pane,s=t.active,o=t.children,l=t["aria-label"];var c=p()("p-global_nav__top_button","p-global_nav__top_flex","p-global_nav__top_flex--"+i,s&&"p-global_nav__top_flex--active",this.props.className);return n.a.createElement(U["c"],{tip:r,delay:U["a"],position:"bottom",offsetY:Sr},n.a.createElement(B["c"],{className:c,onClick:this.onClick,"aria-label":l},n.a.createElement(I["b"],{type:a,className:"p-global_nav__top_button_icon"}),o))}}]);return t}(r["PureComponent"]);ja.displayName="FlexButton";ja.defaultProps=Ca;var wa=function e(t,a){var r=a.pane;return{active:Object(ya["g"])(t)===r,clogger:Object(M["a"])({state:t})}};var Sa=function e(t){return{toggleActivityFlexpane:function e(){return t(Object(Oa["q"])())},showStarredItemsList:function e(){return t(Object(Oa["k"])())},closeFlexpane:function e(){return t(Object(Oa["a"])())}}};var Ia=Object(i["connect"])(wa,Sa)(ja);var Ta=new v["b"]("global_nav");var Aa={reactionToast:l["b"].shape({emoji:l["b"].string,memberName:l["b"].string,channelName:l["b"].string}),noAnimation:l["b"].bool,featureGlobalNav:l["b"].bool};var Na={reactionToast:void 0,noAnimation:false,featureGlobalNav:false};var Pa=function e(t){var a=t.reactionToast,i=t.noAnimation,s=t.featureGlobalNav;if(!s)return null;var o=a&&n.a.createElement(_a["b"],{text:":"+a.emoji+":",emojiSize:_a["a"].LARGE,className:"p-global_nav__top_activity_toast"});var l=fa.a.chrome&&!pe["isDesktop"];var c=!l&&n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(m["isMac"])()?"\u2318\u21e7M":"Ctrl+Shift+M");var u=a?n.a.createElement(r["Fragment"],null,Object(ga["a"])(a.memberName),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_light_gray"},Object(ga["a"])(a.channelName))):n.a.createElement(r["Fragment"],null,Ta.t("Activity"),c);var d=p()({"p-global_nav__top_activity":true,"p-global_nav__top_activity--no-animation":i,"p-global_nav__top_activity--toasting":a});return n.a.createElement("div",{className:d},n.a.createElement(Ia,{icon:"mentions",pane:"activity",tooltip:u,"aria-label":Ta.t("Activity")}),o)};Pa.displayName="ActivityButton";Pa.defaultProps=Na;var Ra=function e(t){return{reactionToast:Object(ba["getReactionToast"])(t),noAnimation:!Object(h["f"])(t,"a11y_animations"),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Ma=Object(i["connect"])(Ra)(Pa);var Da=new v["b"]("global_nav");var xa={isUserRestricted:l["b"].bool,isPaid:l["b"].bool,isEnterprise:l["b"].bool,userId:l["b"].string,showFileList:l["b"].func,showDownloads:l["b"].func,showKeyboardShortcuts:l["b"].func,showWhatsNew:l["b"].func,showUserGroupList:l["b"].func,showUserCalendar:l["b"].func,featureCalendarSimpleAgendaView:l["b"].bool,featureGlobalNav:l["b"].bool,featureSonicUserGroups:l["b"].bool,openHelpModal:l["b"].func,clogger:l["b"].object.isRequired};var Fa={isUserRestricted:false,isPaid:false,isEnterprise:false,userId:void 0,showFileList:S["noop"],showDownloads:S["noop"],showKeyboardShortcuts:S["noop"],showWhatsNew:S["noop"],showUserGroupList:S["noop"],showUserCalendar:S["noop"],featureCalendarSimpleAgendaView:false,featureGlobalNav:false,featureSonicUserGroups:false,openHelpModal:S["noop"]};var La=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onTriggerClick=a.onTriggerClick.bind(a);a.clogItem=a.clogItem.bind(a);a.renderMenu=a.renderMenu.bind(a);return a}k()(t,[{key:"onTriggerClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU"}}})}},{key:"clogItem",value:function e(t){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU_ITEM"}},flex_name:t})}},{key:"renderMenu",value:function e(t){var a=this;var r=this.props,i=r.featureGlobalNav,s=r.featureSonicUserGroups,o=r.isUserRestricted,l=r.isPaid,c=r.isEnterprise,u=r.userId;if(!i)return null;var d=[{label:Da.t("Your events"),icon:n.a.createElement(I["b"],{type:"all-files-alt"}),click:function e(){a.props.showUserCalendar();a.clogItem("calendar")},hide:!this.props.featureCalendarSimpleAgendaView},{label:Da.t("Files"),icon:n.a.createElement(I["b"],{type:"all-files-alt"}),click:function e(){a.props.showFileList({user:u});a.clogItem("files_user")}},{label:Da.t("Downloads"),icon:n.a.createElement(I["b"],{type:"cloud-download"}),click:function e(){a.props.showDownloads({user:u});a.clogItem("downloads")},hide:!(window.desktop&&window.desktop.downloads)},{type:"separator"},{label:c?Da.t("Organization Directory"):Da.t("Workspace Directory"),icon:n.a.createElement(I["b"],{type:"team-directory"}),shortcut:!fa.a.firefox&&(Object(m["isMac"])()?"\u2318\u21e7E":"Ctrl+Shift+E"),click:function e(){Object(Lt["m"])();a.clogItem("team")}},{label:Da.t("User Groups"),icon:n.a.createElement(I["b"],{type:"user-groups"}),click:function e(){s?a.props.showUserGroupList():Object(Lt["l"])();a.clogItem("groups")},hide:o||!l},{type:"separator"},{label:Da.t("What\u2019s New"),icon:n.a.createElement(I["b"],{type:"emoji-celebration"}),click:function e(){a.props.showWhatsNew();a.clogItem("whats_new")}},{label:Da.t("Keyboard Shortcuts"),icon:n.a.createElement(I["b"],{type:"keyboard"}),shortcut:Object(m["isMac"])()?"\u2318/":"Ctrl+/",click:function e(){a.props.showKeyboardShortcuts();a.clogItem("shortcuts")}},{label:Da.t("Help"),icon:n.a.createElement(I["b"],{type:"question-circle"}),click:function e(){a.props.openHelpModal({trigger:"flex_menu"});a.clogItem("help")}}].filter(function(e){return!e.hide});return n.a.createElement(T["a"],g()({},t,{menuClassNames:"p-global_nav__top_flexpanes_menu",template:d,stripTerminalSeparators:true,width:Object(m["isMac"])()?void 0:360}))}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;return n.a.createElement(T["e"],{position:"bottom-right",renderMenu:this.renderMenu,offsetY:Ir,onClick:this.onTriggerClick},n.a.createElement(U["c"],{tip:Da.t("More options"),position:"bottom",delay:U["a"],offsetY:Sr},n.a.createElement(B["c"],{className:"p-global_nav__top_button p-global_nav__top_button--flexpanes","aria-label":Da.t("More options")},n.a.createElement(I["b"],{type:"vertical-ellipsis",className:"p-global_nav__top_button_icon"}))))}}]);return t}(r["PureComponent"]);La.displayName="FlexpanesMenu";La.defaultProps=Fa;var Ba=function e(t){return{isUserRestricted:Object(ct["isRestricted"])(Object(xe["b"])(t)),isPaid:Object(le["isPaidTeam"])(Object(oe["d"])(t)),isEnterprise:Object(c["pageNeedsEnterprise"])(t),userId:Object(c["getCurrentUserId"])(t),featureCalendarSimpleAgendaView:Object(c["isFeatureEnabled"])(t,"feature_calendar_simple_agenda_view"),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureSonicUserGroups:Object(c["isFeatureEnabled"])(t,"feature_sonic_user_groups"),clogger:Object(M["a"])({state:t})}};var Ua={showFileList:Oa["g"],showKeyboardShortcuts:function e(){return Oa["h"].apply(void 0,arguments)},showDownloads:Oa["f"],showWhatsNew:Oa["p"],showUserGroupList:Oa["o"],showUserCalendar:Oa["m"],openHelpModal:Ee};var qa=Object(i["connect"])(Ba,Ua)(La);var Ga=a(273);var Wa=a(1532);var Ha=a(301);var Va=a(3967);var Ka=a(88);var za=a(277);var Ya=a(198);var Qa=a(183);var Ja=a(802);var Za=a(1567);var Xa=a(71);var $a=a(1858);var er=a(312);var tr=a(1855);var ar={autocompleteIsOpen:l["b"].bool.isRequired,openSearchAutocomplete:l["b"].func.isRequired,closeSearchAutocomplete:l["b"].func.isRequired,searchAutocompleteSuggestionAccept:l["b"].func.isRequired,searchPrecache:l["b"].func.isRequired,displayQuery:l["b"].string,telemeter:l["b"].object};var rr={displayQuery:"",telemeter:Xa["d"]};var nr=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["bindAll"])(a,["onClick","onSearchInputBoxFocus","onSearchInputBoxEscape","onSearchAutocompleteSuggestionAccept"]);a.precacheSearch=Object(S["throttle"])(a.precacheSearch.bind(a),6e4);return a}k()(t,[{key:"onClick",value:function e(){this.props.autocompleteIsOpen||this.props.openSearchAutocomplete()}},{key:"onSearchInputBoxFocus",value:function e(){this.props.openSearchAutocomplete();this.precacheSearch()}},{key:"onSearchInputBoxEscape",value:function e(){this.props.closeSearchAutocomplete()}},{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(Ja["e"])(this.props.telemeter);this.props.searchAutocompleteSuggestionAccept()}},{key:"precacheSearch",value:function e(){this.props.searchPrecache()}},{key:"render",value:function e(){var t=p()({"p-global_nav__top_search":true,"p-global_nav__top_search--browser":!pe["isDesktop"],"p-global_nav__top_search--primarysearch":true,"p-global_nav__top_search--primarysearch_open":this.props.autocompleteIsOpen});return n.a.createElement(Qa["a"],{enabled:["feature_primary_search"]},n.a.createElement(B["c"],{className:t,onClick:this.onClick},n.a.createElement(tr["a"],{autoFocus:false,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus})))}}]);return t}(r["PureComponent"]);nr.displayName="AutocompleteInputInPrimarySearch";nr.defaultProps=rr;var ir=function e(t){return{autocompleteIsOpen:Object(Ya["isSearchAutocompleteOpen"])(t),displayQuery:Object(Ga["getSearchInputBoxDisplayQuery"])(t),telemeter:Object(Xa["c"])({state:t})}};var sr={searchPrecache:er["m"],openSearchAutocomplete:Ya["openSearchAutocomplete"],closeSearchAutocomplete:Ya["closeSearchAutocomplete"],searchAutocompleteSuggestionAccept:Za["a"]};var or=Object(i["connect"])(ir,sr)(nr);var lr={isOpen:l["b"].bool.isRequired,userQuery:l["b"].string.isRequired,closeAutocomplete:l["b"].func.isRequired,searchAutocompleteSuggestionAccept:l["b"].func.isRequired,telemeter:l["b"].object};var cr={telemeter:Xa["d"]};var ur=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(S["bindAll"])(a,["handleClick","onSearchAutocompleteSuggestionAccept","handleAutocompleteRef"]);a.calculatePopoverConstraints=Object(S["throttle"])(a.calculatePopoverConstraints.bind(a),1e3);a.searchHeaderBackdrop=Object(r["createRef"])();a.state={hasCalculatedConstraints:false,overlayStyle:{marginTop:0},contentStyle:{top:0,left:0,width:200}};a.autocompleteInputRef=null;return a}k()(t,[{key:"onSearchAutocompleteSuggestionAccept",value:function e(){Object(Ja["e"])(this.props.telemeter);this.props.searchAutocompleteSuggestionAccept()}},{key:"calculatePopoverConstraints",value:function e(){if(!this.autocompleteInputRef)return;var t=Object(Ka["findDOMNode"])(this.autocompleteInputRef);var a=t.getBoundingClientRect();var r=t.parentElement.getBoundingClientRect();var n=10;this.setState(function(){return{hasCalculatedConstraints:true,overlayStyle:{marginTop:r.bottom},contentStyle:{top:0,left:a.left-n,width:a.width+2*n}}})}},{key:"handleAutocompleteRef",value:function e(t){this.autocompleteInputRef=t;t&&this.calculatePopoverConstraints()}},{key:"handleClick",value:function e(t){this.searchHeaderBackdrop&&this.searchHeaderBackdrop.current===t.target&&this.props.closeAutocomplete()}},{key:"render",value:function e(){var t=this.props,a=t.isOpen,r=t.closeAutocomplete;var i="c-popover c-search_modal c-search_modal--autocomplete c-search_modal--primarysearch";var s=a&&this.state.hasCalculatedConstraints;return n.a.createElement(Qa["a"],{enabled:["feature_primary_search"]},s&&n.a.createElement("div",{className:"c-search_autocomplete__header_backdrop",ref:this.searchHeaderBackdrop,onClick:this.handleClick}),n.a.createElement(or,{ref:this.handleAutocompleteRef}),n.a.createElement(za["a"],{ariaRole:"dialog",ariaLabel:"Search",isOpen:s,position:"bottom-right",onClose:r,shouldFade:false,overlayClassName:i,allowanceX:20,allowanceY:0,shouldFocusAfterRender:false,shouldReturnFocusAfterClose:false,onResize:this.calculatePopoverConstraints,shouldObserveResize:true,contentStyle:this.state.contentStyle,overlayStyle:this.state.overlayStyle},a&&n.a.createElement("div",{className:"c-search-autocomplete"},n.a.createElement($a["a"],{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept}))))}}]);return t}(r["PureComponent"]);ur.displayName="AutocompleteInPrimarySearch";ur.defaultProps=cr;var dr=function e(t){return{userQuery:Object(Ga["getSearchInputBoxUserQuery"])(t),isOpen:Object(Ya["isSearchAutocompleteOpen"])(t),telemeter:Object(Xa["c"])({state:t})}};var pr={closeAutocomplete:Ya["closeSearchAutocomplete"],searchAutocompleteSuggestionAccept:Za["a"]};var hr=Object(i["connect"])(dr,pr)(ur);var vr=a(141);var mr=a(850);var fr=a(531);function br(e){return"Vsearch"===Object(Dt["a"])(e)}var gr=new v["b"]("search");var _r={displayQuery:l["b"].string,clearSearchInputField:l["b"].func,orgName:l["b"].string,teamName:l["b"].string,clogger:l["b"].object.isRequired,openFromClick:l["b"].func,openSearchAutocomplete:l["b"].func.isRequired,isPrimarySearchFeatureEnabled:l["b"].bool.isRequired,showSearchAsActive:l["b"].bool.isRequired};var yr={displayQuery:void 0,orgName:void 0,teamName:void 0,openFromClick:S["noop"],clearSearchInputField:S["noop"]};var Or=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.onClearClick=a.onClearClick.bind(a);return a}k()(t,[{key:"onClick",value:function e(){this.props.isPrimarySearchFeatureEnabled?this.props.openSearchAutocomplete():this.props.openFromClick();this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_SEARCH"}}})}},{key:"onClearClick",value:function e(t){t.stopPropagation();this.props.clearSearchInputField()}},{key:"render",value:function e(){var t=this.props,a=t.displayQuery,i=t.orgName,s=t.teamName,o=t.isPrimarySearchFeatureEnabled,l=t.showSearchAsActive;var c=a?n.a.createElement(r["Fragment"],null,n.a.createElement(vr["a"],{text:a,className:"p-global_nav__top_search_text",customLineEnding:" ",showTooltips:false,noLinking:true,noSpecials:true,noHighlights:true}),n.a.createElement(B["c"],{className:"p-global_nav__top_search_clear",onClick:this.onClearClick,label:gr.t("Clear")},n.a.createElement(I["b"],{type:"times-small"}))):n.a.createElement("span",{className:"p-global_nav__top_search_text p-global_nav__top_search_text--placeholder"},gr.rt("Search {teamName}",{teamName:i||s||""}));var u=p()({"p-global_nav__top_search":true,"p-global_nav__top_search--no_history":!Object(L["c"])()});var d=!o||!l;return n.a.createElement(r["Fragment"],null,d&&n.a.createElement(B["c"],{className:u,onClick:this.onClick},n.a.createElement(I["b"],{type:"search-medium",className:"p-global_nav__top_search_icon"}),c),!o&&n.a.createElement(Va["a"],null),!d&&n.a.createElement(hr,null))}}]);return t}(r["Component"]);Or.displayName="SearchPlaceholderInput";Or.defaultProps=yr;var kr=function e(t){return{displayQuery:Object(Ga["getSearchInputBoxDisplayQuery"])(t),orgName:Object(Ha["a"])(t)||"",teamName:Object(le["getTeamDisplayName"])(Object(oe["d"])(t)),clogger:Object(M["a"])({state:t}),isPrimarySearchFeatureEnabled:Object(fr["a"])(t),showSearchAsActive:br(t)||Object(Ya["isSearchAutocompleteOpen"])(t)}};var Er={openSearchAutocomplete:Ya["openSearchAutocomplete"],openFromClick:mr["a"],clearSearchInputField:Wa["a"]};var Cr=Object(i["connect"])(kr,Er)(Or);var jr=a(2402);var wr=new v["b"]("global_nav");var Sr=-12;var Ir=-4;var Tr={theme:l["b"].string,renderSonicMenu:l["b"].func,featureGlobalNav:l["b"].bool};var Ar={theme:void 0,renderSonicMenu:void 0,featureGlobalNav:false};var Nr=function e(t){var a=t.theme,i=t.renderSonicMenu,s=t.featureGlobalNav;if(!s)return null;var o=p()("p-global_nav__top",a&&"p-global_nav__top--theme-"+a);return n.a.createElement("div",{className:o},n.a.createElement(St,{renderSonicMenu:i}),n.a.createElement(se,null),n.a.createElement("div",{className:"p-global_nav__top_spacer"}),n.a.createElement(Cr,null),n.a.createElement("div",{className:"p-global_nav__top_spacer--fill"}),n.a.createElement(Ma,null),n.a.createElement(Ia,{icon:"star-o",pane:Object(f["a"])()?"starred_items":"stars",tooltip:n.a.createElement(r["Fragment"],null,wr.t("Starred items"),n.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(m["isMac"])()?"\u2318\u21e7S":"Ctrl+Shift+S")),"aria-label":wr.t("Starred items")}),n.a.createElement(qa,null),n.a.createElement("div",{className:"p-global_nav__top_spacer"}),n.a.createElement(va,null))};Nr.displayName="TopNav";Nr.defaultProps=Ar;var Pr=function e(t){return{theme:Object(h["f"])(t,"sidebar_theme"),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Rr=Object(i["connect"])(Pr)(Nr);var Mr=a(1783);var Dr=a(11);var xr=a(383);var Fr=a(1312);var Lr=a(217);var Br=a(98);var Ur=a(379);var qr=a(1217);var Gr=a(1500);var Wr=a(1165);var Hr=a(1506);var Vr=a(1453);var Kr=Object(ve["b"])("TS.ui.mpim_conversion_modal.startMpimConversionModal");var zr=a(1753);var Yr=Object(ve["b"])("TS.ui.apps_browser.startAddApps");var Qr=Object(ve["b"])("TS.notifs.canModelObHaveChannelMentions",function(){return false});var Jr=Object(ve["b"])("TS.notifs.muteOrUnmuteCorG");var Zr=a(221);var Xr=a(40);var $r=a.n(Xr);var en=a(867);var tn=new v["b"]("global_nav");var an={channelId:l["b"].string.isRequired,channel:l["b"].object,close:l["b"].func,back:l["b"].func,featureGlobalNav:l["b"].bool};var rn={channel:void 0,close:S["noop"],back:S["noop"],featureGlobalNav:false};var nn=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onDateChange=a.onDateChange.bind(a);return a}k()(t,[{key:"onDateChange",value:function e(t){var a=this.props,r=a.channelId,n=a.close;var i=$r()(t,"YYYY-MM-DD").format("X");Object(Lt["q"])(r,i);n()}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.back,i=t.featureGlobalNav;if(!i)return null;var s=a.created?$r()(a.created,"X").format("YYYY-MM-DD"):void 0;return n.a.createElement(T["f"],g()({},this.props,{width:325}),n.a.createElement(en["a"],{key:"date-picker",className:"p-global_nav__channel_date_picker",disableDatesBefore:s,disableDatesAfter:$r()().format("YYYY-MM-DD"),onDateChange:this.onDateChange}),n.a.createElement(B["c"],{key:"date-picker-back",className:"p-global_nav__channel_date_picker_back","data-qa":"date_picker_back",onClick:r},tn.t("Back to menu")))}}]);return t}(r["Component"]);nn.displayName="JumpToDate";nn.defaultProps=rn;var sn=function e(t,a){var r=a.channelId;return{channel:Object(xt["d"])(t,r),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var on=Object(i["connect"])(sn)(nn);var ln=a(93);var cn=a(1499);var un=a(1523);function dn(e,t){var a=Object(xt["d"])(e,t);if(!e||!a)return null;var r=Object(xe["d"])(e,Object(Dr["getMemberIdFromIm"])(a));var n=Object(xe["b"])(e);var i=Object(Dr["getChannelType"])(a);var s="im"===i;var o="mpim"===i;var l="channel"===i;var u="private"===i;var d=l||u;var p=Object(Dr["isYou"])(n.id,a);var h=Object(cn["c"])(e,a);var v=true;var m=!s&&!Object(ct["isUltraRestricted"])(n);var f=p;var b=s&&!p;var g=s&&!p&&!Object(Dr["isSlackbot"])(a)&&!Object(ct["isUltraRestricted"])(n)&&!Object(ct["isUltraRestricted"])(r)&&!Object(ct["isDeleted"])(r)&&!Object(ct["isExternal"])(r);var _=true;var y=d&&!Object(ct["isUltraRestricted"])(n)&&!Object(ct["isRestricted"])(n)&&Object(Dr["isMemberOfChannel"])(a)&&(!Object(Dr["isRequired"])(a)||Object(ut["d"])(a))&&(!Object(c["pageNeedsEnterprise"])(e)||!(Object(Dr["isOrgShared"])(a)&&!Object(ut["b"])()));var O=Object(ln["I"])(e,t);var k=o&&Object(ln["x"])(e)&&!Object(Dr["isExternallySharedChannel"])(a);var E=!s&&(o||Object(Dr["isMemberOfChannel"])(a)&&!Object(Dr["isArchived"])(a));var C=E;var j=Object(un["a"])()||d&&!(Object(c["pageNeedsEnterprise"])(e)&&Object(Dr["isOrgShared"])(a));var w=Object(ot["a"])(e,"allow_email_ingestion");var S=d&&Object(Dr["isMemberOfChannel"])(a)&&!Object(Dr["isArchived"])(a)&&!Object(Dr["isRequired"])(a)&&!Object(ct["isUltraRestricted"])(n)&&!Object(ct["isRestricted"])(n);var I=d&&!Object(Dr["isMemberOfChannel"])(a)&&!Object(Dr["isArchived"])(a)&&!Object(ct["isUltraRestricted"])(n)&&!Object(ct["isRestricted"])(n);var T=!l&&Object(ln["B"])(e,t);var A=Object(Dr["isArchived"])(a)&&(!Object(c["isFeatureEnabled"])(e,"feature_esc_disconnect_v2_client")||!Object(Dr["isFrozen"])(a))&&!Object(Dr["getIsChannelMoved"])(a);var N=Object(Dr["isArchived"])(a)&&Object(ct["isAdmin"])(n)&&l&&!Object(Dr["isRequired"])(a);return{call:h,jump:v,invite:m,editProfile:f,viewProfile:b,addMember:g,details:_,options:y,retention:O,convertToPrivate:k,notifications:E,mute:C,apps:j,email:w,leave:S,join:I,exportHistory:T,unarchive:A,delete:N}}var pn=a(113);var hn=a(365);var vn=new v["b"]("global_nav");var mn=Object(ye["b"])("Un-archive a channel",function(e,t,a){var r=a.channelId;if(!Object(c["isFeatureEnabled"])(t(),"feature_global_nav"))return;e(Object(pn["L"])({channelId:r})).catch(function(a){Object(R["a"])({getState:t}).error("CHANNEL-ACTIONS","Unarchive failed with error",a);var r=Object(S["get"])(a,"data.error");var i="restricted_action"===r?vn.t("You don\u2019t have permission to un-archive channels. Please talk to your Workspace Owner."):vn.t("Sorry, something went wrong. Try again in a moment.");e(Object(Oe["openModal"])({element:n.a.createElement(hn["a"],{title:vn.t("Un-archive failed")},i)}))})});mn.propTypes={channelId:l["b"].string.isRequired};var fn=mn;var bn=new v["b"]("global_nav");var gn={channelId:l["b"].string.isRequired,channel:l["b"].object.isRequired,onMenuItemSelected:l["b"].func,team:l["b"].object,actions:l["b"].object,displayName:l["b"].string,isMuted:l["b"].bool,joinChannel:l["b"].func,unarchiveChannel:l["b"].func,gantryStartCall:l["b"].func,openChannelNotificationPrefsModal:l["b"].func,featureGlobalNav:l["b"].bool};var _n={onMenuItemSelected:S["noop"],actions:void 0,displayName:void 0,isMuted:false,joinChannel:S["noop"],unarchiveChannel:S["noop"],gantryStartCall:S["noop"],openChannelNotificationPrefsModal:S["noop"],team:void 0,featureGlobalNav:false};var yn=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMenuItemSelected=a.onMenuItemSelected.bind(a);a.getMuteLabel=a.getMuteLabel.bind(a);a.getItems=a.getItems.bind(a);a.preventClose=false;a.state={mode:"menu"};return a}k()(t,[{key:"onMenuItemSelected",value:function e(t,a){if(this.preventClose){this.preventClose=false;return}this.props.onMenuItemSelected(t,a)}},{key:"getMuteLabel",value:function e(){var t=this.props,a=t.isMuted,r=t.channel,n=t.displayName,i=t.featureGlobalNav;var s="mpim"===Object(Dr["getChannelType"])(r);if(!i)return null;if(a&&s)return bn.t("Unmute this conversation");if(a&&!s)return bn.t("Unmute {channelName}",{channelName:n});if(!a&&s)return bn.t("Mute this conversation");if(!a&&!s)return bn.t("Mute {channelName}",{channelName:n});return null}},{key:"getItems",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.channel,i=a.actions,s=a.displayName,o=a.joinChannel,l=a.featureGlobalNav,c=a.team;var u=Object(Dr["getChannelType"])(n);var d=Object(Dr["getMemberIdFromIm"])(n);if(!i||!u||!l)return[];var p="mpim"===u;var h="channel"===u;var m="private"===u;var f=h||m;var b=[{label:bn.t("Jump to date\u2026"),show:i.jump,key:"jump",click:function e(){t.preventClose=true;t.setState(function(){return{mode:"jump-to-date"}})}},{label:p?bn.t("Invite another member\u2026"):bn.rt("Add people to {channelName}\u2026",{channelName:s}),show:i.invite,key:"invite",click:function e(){return p?Object(zr["a"])(n):Object(Gr["a"])(r)}},{label:bn.t("Edit your profile"),show:i.editProfile,key:"editProfile",click:function e(){return Object(Wr["a"])()}},{label:bn.t("View {userPossesive} profile",{userPossesive:Object(v["c"])(s)}),show:i.viewProfile,key:"viewProfile",click:function e(){return Object(Lt["i"])(d)}},{label:bn.t("Add {userName} to a channel\u2026",{userName:s}),show:i.addMember,key:"addMember",click:function e(){return Object(Vr["a"])(d)}},{label:f?bn.t("View channel details"):bn.t("View conversation details"),show:i.details,key:"details",click:function e(){return Object(ka["d"])("details")}},{label:bn.t("Additional options\u2026"),show:i.options,key:"options",click:function e(){return Object(Hr["a"])(r)}},{label:bn.t("Convert to a private channel\u2026"),show:i.convertToPrivate,key:"convertToPrivate",click:function e(){return Kr(n)}},{label:bn.t("Edit message retention\u2026"),show:i.retention,key:"retention",click:function e(){return Object(Hr["a"])(r,"retention")}},{type:"separator",key:"separator-1"},{label:bn.t("Notification preferences\u2026"),show:i.notifications,key:"notifications",click:function e(){return t.props.openChannelNotificationPrefsModal({channelId:r})}},{label:this.getMuteLabel(),show:i.mute,key:"mute",click:function e(){return Jr(r)}},{type:"separator",key:"separator-2"},{label:bn.t("Add an app"),show:i.apps,key:"apps",click:function e(){return Yr()}},{label:p?bn.t("Send email to this conversation\u2026"):bn.t("Send email to {channelName}\u2026",{channelName:s}),show:i.email,key:"email",href:Object(le["getTeamUrl"])(c,"/services/new/email"),target:"_blank"},{type:"separator",key:"separator-3"},{label:bn.t("Leave {channelName}",{channelName:s}),show:i.leave,key:"leave",click:function e(){return Object(Zr["r"])(r)}},{label:bn.t("Join {channelName}",{channelName:s}),show:i.join,key:"join",click:function e(){return o({channelId:r})}},{type:"separator",key:"separator-4"},{label:bn.t("Export message history\u2026"),show:i.exportHistory,key:"exportHistory",click:function e(){return Object(Hr["a"])(r,"export")}},{type:"separator",key:"separator-5"},{label:bn.t("Un-archive {channelName}",{channelName:s}),show:i.unarchive,key:"unarchive",click:function e(){return t.props.unarchiveChannel({channelId:r})}},{label:bn.t("Delete {channelName}",{channelName:s}),show:i.delete,key:"unarchive",click:function e(){return Object(Hr["a"])(r,"delete")}}];return b.filter(function(e){return e&&(e.show||"separator"===e.type)})}},{key:"render",value:function e(){var t=this;switch(this.state.mode){case"menu":return n.a.createElement(T["a"],g()({},this.props,{template:this.getItems(),onMenuItemSelected:this.onMenuItemSelected,stripTerminalSeparators:true}));case"jump-to-date":return n.a.createElement(on,g()({},this.props,{channelId:this.props.channelId,close:this.props.onMenuItemSelected,back:function e(){t.preventClose=true;t.setState(function(){return{mode:"menu"}})}}));default:return null}}}]);return t}(r["Component"]);yn.displayName="Menu";yn.defaultProps=_n;var On=function e(t,a){var r=a.channelId;var n=Object(xt["d"])(t,r);var i=Object(oe["d"])(t);return{channel:n,actions:dn(t,r),displayName:Object(Dr["getDisplayNameForChannel"])(t,n,{imIncludeAtSign:false}),isMuted:Object(Lr["isChannelMutedById"])(t,r),team:i,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var kn={joinChannel:Br["o"],unarchiveChannel:fn,gantryStartCall:Ur["d"],openChannelNotificationPrefsModal:qr["a"]};var En=Object(i["connect"])(On,kn)(yn);var Cn=new v["b"]("channel_header");var jn={channelId:l["b"].string,name:l["b"].string,type:l["b"].string.isRequired,userId:l["b"].string,members:l["b"].oneOfType([l["b"].array,l["b"].bool]),presences:l["b"].oneOfType([l["b"].object,l["b"].bool]),currentUser:l["b"].string.isRequired,isMuted:l["b"].bool,isOrgShared:l["b"].bool.isRequired,isExternallyShared:l["b"].bool.isRequired,isPendingExternallyShared:l["b"].bool.isRequired,sharedTeamIds:l["b"].arrayOf(l["b"].string),className:l["b"].string,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var wn={channelId:void 0,name:void 0,userId:void 0,members:void 0,presences:void 0,sharedTeamIds:void 0,className:void 0,isMuted:false,featureGlobalNav:false};var Sn=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderChannel=a.renderChannel.bind(a);a.renderPrivate=a.renderPrivate.bind(a);a.renderIM=a.renderIM.bind(a);a.renderMPIM=a.renderMPIM.bind(a);a.renderMenu=a.renderMenu.bind(a);a.onClick=a.onClick.bind(a);return a}k()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_NAME"}}})}},{key:"renderChannel",value:function e(t){return n.a.createElement(t,null,this.props.name)}},{key:"renderPrivate",value:function e(t){return n.a.createElement(r["Fragment"],null,n.a.createElement(I["b"],{type:"lock",className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--private"}),n.a.createElement(t,null,this.props.name))}},{key:"renderIM",value:function e(t){var a=this.props.userId;return n.a.createElement(r["Fragment"],null,n.a.createElement(t,null,n.a.createElement(xr["a"],{id:a,key:"name"})),n.a.createElement(Nt["a"],{memberId:a,className:"p-global_nav__channel_name_presence",key:"presence"}),n.a.createElement(At["a"],{memberId:a,tooltip:false,key:"custom-status"}))}},{key:"renderMPIM",value:function e(t){var a=this;var i=this.props,s=i.members,o=i.presences;var l=Object(S["flatMap"])(Object(S["filter"])(s,function(e){return e!==a.props.currentUser}),function(e,t){var a=o[e]===Mt["PRESENCE_AWAY"]?"p-global_nav__channel_name_member--away":void 0;return n.a.createElement(r["Fragment"],{key:e},t>0?", ":null,n.a.createElement(xr["a"],{id:e,className:a}),n.a.createElement(At["a"],{memberId:e,tooltip:false,noText:true}))});return n.a.createElement(t,null,l)}},{key:"renderShared",value:function e(){var t=this.props,a=t.isOrgShared,r=t.isExternallyShared,i=t.isPendingExternallyShared,s=t.sharedTeamIds;if(a)return n.a.createElement(U["c"],{tip:Cn.t("Shared channel"),position:"bottom"},n.a.createElement(I["b"],{type:"shared-channel",inline:true,className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--shared"}));if(r)return n.a.createElement(Fr["a"],{sharedTeamIds:s,pending:i,inline:true,tooltip:true,tooltipPosition:"bottom",className:"p-global_nav__channel_name_icon p-global_nav__channel_name_icon--shared"});return null}},{key:"renderMenu",value:function e(t){return n.a.createElement(En,g()({},t,{channelId:this.props.channelId}))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.type,i=a.className,s=a.isMuted,o=a.featureGlobalNav;if(!o)return null;var l=function e(a){var r=a.children;return n.a.createElement(T["e"],{renderMenu:t.renderMenu,position:"bottom-left",offsetX:-4,offsetY:4,onClick:t.onClick},n.a.createElement(B["c"],{className:"p-global_nav__channel_name_name"},r))};var c=void 0;switch(r){case"channel":c=this.renderChannel(l);break;case"private":c=this.renderPrivate(l);break;case"im":c=this.renderIM(l);break;case"mpim":c=this.renderMPIM(l);break;default:break}var u=p()("p-global_nav__channel_name","p-global_nav__channel_name--model","p-global_nav__channel_name--"+r,s&&"p-global_nav__channel_name--muted",i);return n.a.createElement("div",{className:u,"data-qa":"channel_name"},c,this.renderShared())}}]);return t}(r["Component"]);Sn.displayName="Name";Sn.defaultProps=wn;var In=function e(t,a){var r=a.channelId;var n=Object(xt["d"])(t,r);var i=Object(Dr["getMemberIdsFromMpim"])(n);var s=i&&Object(S["mapValues"])(Object(S["keyBy"])(i),function(e){return Object(Mt["getPresenceByMemberId"])(t,e)});return{channelId:r,name:Object(Dr["getDisplayNameForChannel"])(t,n,{imIncludeAtSign:false}),type:Object(Dr["getChannelType"])(n),userId:Object(Dr["getMemberIdFromIm"])(n)||n.user_id,currentUser:Object(c["getCurrentUserId"])(t),isMuted:Object(Lr["isChannelMutedById"])(t,r),members:i,presences:s,isOrgShared:Object(Dr["isOrgSharedPublicOrPrivateChannel"])(n),isExternallyShared:Object(Dr["isExternallySharedChannel"])(n),isPendingExternallyShared:Object(Dr["isPendingExternallySharedChannel"])(n),sharedTeamIds:Object(Dr["getPendingAndConnectedTeamIds"])(t,n),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var Tn=Object(i["connect"])(In)(Sn);var An=Object(ve["b"])("TS.ui.channel_topic_dialog.start");var Nn={start:An};var Pn=new v["b"]("global_nav");var Rn={topic:l["b"].string,isChannel:l["b"].bool.isRequired,canEdit:l["b"].bool,featureGlobalNav:l["b"].bool.isRequired};var Mn={topic:void 0,canEdit:true};var Dn=function e(t){if(t.target&&"A"===t.target.tagName)return;An()};var xn=function e(t){var a=t.topic,i=t.isChannel,s=t.canEdit,o=t.featureGlobalNav;if(!o||!i)return null;var l=void 0;if(a){var c=n.a.createElement("div",{className:"p-global_nav__channel_topic_edit"},Pn.t("edit"));l=n.a.createElement(r["Fragment"],null,n.a.createElement("div",{className:"p-global_nav__channel_topic_text"},n.a.createElement(vr["a"],{text:a,className:"p-global_nav__channel_topic_content",noJumbomoji:true,noHighlights:true})),s&&c)}else l=s?n.a.createElement("div",{className:"p-global_nav__channel_topic_placeholder"},Pn.t("Add a topic\u2026")):null;var u=p()("p-global_nav__channel_topic",{"p-global_nav__channel_topic--empty":!a});return n.a.createElement(B["c"],{className:u,onClick:Dn},l)};xn.displayName="Topic";xn.defaultProps=Mn;var Fn=function e(t,a){var r=a.channelId;var n=Object(xt["d"])(t,r);return{topic:n&&n.topic&&n.topic.value,isChannel:!!(Object(Dr["isPublicChannel"])(n)||Object(Dr["isPrivateChannel"])(n)),canEdit:Object(ln["t"])(t,r).ok,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Ln=Object(i["connect"])(Fn)(xn);var Bn=a(865);var Un=new v["b"]("global_nav");var qn={channelId:l["b"].string.isRequired,type:l["b"].oneOf(["channel","private","im","mpim"]),starred:l["b"].bool,show:l["b"].bool.isRequired,updateStar:l["b"].func.isRequired,featureGlobalNav:l["b"].bool.isRequired,clogger:l["b"].object.isRequired};var Gn={starred:false,type:"channel"};var Wn=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}k()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.channelId,r=t.starred,n=t.clogger;this.props.updateStar(!r,{channel:a});n.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_STAR"}}})}},{key:"getTip",value:function e(){var t=this.props,a=t.type,r=t.starred,n=t.featureGlobalNav;if(!n)return null;if("im"===a||"mpim"===a)return r?Un.t("Unstar this conversation"):Un.t("Star this conversation");return r?Un.t("Unstar this channel"):Un.t("Star this channel")}},{key:"render",value:function e(){var t=this.props,a=t.starred,r=t.show;if(!r)return null;return n.a.createElement(U["c"],{position:"bottom",tip:this.getTip()},n.a.createElement(B["c"],{className:p()("p-global_nav__channel_star",a&&"p-global_nav__channel_star--starred"),onClick:this.onClick,"aria-label":this.getTip()},n.a.createElement(I["b"],{type:a?"star":"star-o",size:"inherit"})))}}]);return t}(r["Component"]);Wn.displayName="Star";Wn.defaultProps=Gn;var Hn=function e(t,a){var r=a.channelId;var n=Object(xt["d"])(t,r);return{type:Object(Dr["getChannelType"])(n),show:Object(Dr["canStarOrUnstarChannel"])(n),starred:Object(Dr["isStarred"])(n),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var Vn={updateStar:Bn["a"]};var Kn=Object(i["connect"])(Hn,Vn)(Wn);var zn=a(278);var Yn=a(191);var Qn=new v["b"]("global_nav");var Jn={count:l["b"].number,isChannel:l["b"].bool,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var Zn={count:void 0,isChannel:true,featureGlobalNav:false};var Xn=function e(t){var a=t.count,i=t.isChannel,s=t.clogger,o=t.featureGlobalNav;if(!o)return null;if(!a&&!i)return null;var l=function e(t){var a=t.key,i=t.text;return n.a.createElement(r["Fragment"],{key:a},n.a.createElement("span",{className:"bold"},i),"\xa0")};var c=Object(S["isNumber"])(a)?Qn.rt("{count, plural, =1 {<span>#</span>Pin} other {<span>#</span>Pins}}",{count:a},l):Qn.rt("<span>\u2013</span>Pins",{count:a},l);var u=Object(S["isNumber"])(a)?Qn.t("{count, plural, =1 {# pins} other {# pins}}. View pinned items",{count:a},l):Qn.t("View pinned items");var d=function e(){if(Object(f["a"])()){var t=Object(zn["b"])();Object(zn["c"])(Yn["d"],t.params)}Object(ka["g"])();s.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_PINS"}}})};return n.a.createElement(U["c"],{position:"bottom",tip:Qn.t("View pinned items"),offsetY:-4,delay:U["a"]},n.a.createElement(B["c"],{className:"p-global_nav__channel_info_item p-global_nav__channel_info_pins",onClick:d,"aria-label":u},c))};Xn.displayName="Pins";Xn.defaultProps=Zn;var $n=function e(t,a){var r=a.channelId;var n=Object(xt["d"])(t,r);return{count:n&&n.pinned_items_count,isChannel:Object(Dr["isPublicChannel"])(n)||Object(Dr["isPrivateChannel"])(n),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var ei=Object(i["connect"])($n)(Xn);var ti=a(241);var ai=new v["b"]("global_nav");var ri={count:l["b"].number,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var ni={count:void 0,featureGlobalNav:false};var ii=function e(t){var a=t.count,i=t.clogger,s=t.featureGlobalNav;if(!s)return null;var o=function e(t){var a=t.key,i=t.text;return n.a.createElement(r["Fragment"],{key:a},n.a.createElement("span",{className:"bold"},i),"\xa0")};var l=Object(S["isNumber"])(a)?ai.rt("{count, plural, =1 {<span>#</span>Member} other {<span>#</span>Members}}",{count:a},o):ai.rt("<span>\u2013</span>Members",{count:a},o);var c=Object(S["isNumber"])(a)?ai.t("{count, plural, =1 {# member} other {# members}}. View member list",{count:a},o):ai.t("View member list");var u=function e(){Object(ka["f"])();i.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_MEMBERS"}}})};return n.a.createElement(U["c"],{position:"bottom",tip:ai.t("View member list"),offsetY:-4,delay:U["a"]},n.a.createElement(B["c"],{className:"p-global_nav__channel_info_item",onClick:u,"aria-label":c},l))};ii.displayName="Members";ii.defaultProps=ni;var si=function e(t,a){var r=a.channelId;var n=Object(ti["getMemberCounts"])(t,r);return{count:n&&n.counts&&n.counts.member_count,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var oi=Object(i["connect"])(si)(ii);var li=new v["b"]("channel_header");var ci={channelId:l["b"].string.isRequired,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var ui={featureGlobalNav:false};var di=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.renderMenu=a.renderMenu.bind(a);return a}k()(t,[{key:"onClick",value:function e(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_ACTIONS"}}})}},{key:"renderMenu",value:function e(t){return n.a.createElement(En,g()({},t,{channelId:this.props.channelId}))}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;return n.a.createElement(T["e"],{renderMenu:this.renderMenu,position:"bottom-right",offsetY:-4,onClick:this.onClick},n.a.createElement(U["c"],{position:"bottom-right",tip:li.t("Channel settings"),offsetY:-4},n.a.createElement(B["c"],{className:"p-global_nav__channel_info_item","aria-label":li.t("Channel settings")},n.a.createElement(I["b"],{type:"cog-o"}))))}}]);return t}(r["Component"]);di.displayName="Actions";di.defaultProps=ui;var pi=function e(t){return{featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var hi=Object(i["connect"])(pi)(di);var vi=a(1085);var mi=new v["b"]("global_nav");var fi={isBot:l["b"].bool,activeTab:l["b"].oneOf(["messages","about"]),featureGlobalNav:l["b"].bool};var bi={isBot:false,activeTab:"messages",featureGlobalNav:false};var gi=function e(t){var a=t.isBot,i=t.activeTab,s=t.featureGlobalNav;if(!s||!a)return null;return n.a.createElement(r["Fragment"],null,n.a.createElement("div",{className:"p-global_nav__channel_bot_tabs"},n.a.createElement(B["c"],{className:p()("p-global_nav__channel_bot_tab","messages"===i&&"p-global_nav__channel_bot_tab--active"),onClick:function e(){return Object(vi["a"])("messages")},"data-qa":"global_nav_channel_bot_tabs_messages"},mi.t("Messages")),n.a.createElement(B["c"],{className:p()("p-global_nav__channel_bot_tab","about"===i&&"p-global_nav__channel_bot_tab--active"),onClick:function e(){return Object(vi["a"])("about")},"data-qa":"global_nav_channel_bot_tabs_about"},mi.t("About"))),n.a.createElement("div",{className:"p-global_nav__channel_divider"}))};gi.displayName="BotTabs";gi.defaultProps=bi;var _i=function e(t,a){var r=a.channelId;var n=Object(xt["d"])(t,r);var i=Object(Dr["getMemberIdFromIm"])(n);if(!i)return{};var s=Object(xe["d"])(t,i);return{isBot:Object(ct["isAppOrBot"])(s),activeTab:Object(ba["getActiveAppTab"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var yi=Object(i["connect"])(_i)(gi);var Oi=a(1047);var ki=new v["b"]("global_nav");var Ei={show:l["b"].bool,channel:l["b"].object,tooltipMessage:l["b"].string,featureGlobalNav:l["b"].bool,startCall:l["b"].func};var Ci={show:false,channel:void 0,tooltipMessage:void 0,featureGlobalNav:false,startCall:S["noop"]};var ji=function e(t){var a=t.show,r=t.channel,i=t.tooltipMessage,s=t.featureGlobalNav,o=t.startCall;if(!a||!r||!s)return null;return n.a.createElement(U["c"],{position:"bottom",tip:i,offsetY:-4},n.a.createElement(B["c"],{className:"p-global_nav__channel_info_item p-global_nav__channel_call_button",onClick:function e(){return Object(f["a"])()?o():Object(Oi["c"])(r)},"aria-label":ki.t("Start a call")},n.a.createElement(I["b"],{className:"p-global_nav__channel_call_button_icon",type:"phone"})))};ji.displayName="CallButton";ji.defaultProps=Ci;var wi=function e(t,a){var r=a.channelId;var n=Object(xt["d"])(t,r);if(!n)return null;return{show:Object(cn["c"])(t,n),channel:n,tooltipMessage:Object(cn["b"])(t,n),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Si={startCall:Ur["d"]};var Ii=Object(i["connect"])(wi,Si)(ji);var Ti=new v["b"]("channel_header");var Ai={isChannel:l["b"].bool,active:l["b"].bool,featureGlobalNav:l["b"].bool,clogger:l["b"].object.isRequired};var Ni={isChannel:true,active:false,featureGlobalNav:false};var Pi=function e(t){var a=t.isChannel,r=t.active,i=t.clogger,s=t.featureGlobalNav;if(!s)return null;var o=void 0;a&&r&&(o=Ti.t("Hide channel details"));a&&!r&&(o=Ti.t("View channel details"));!a&&r&&(o=Ti.t("Hide conversation details"));a||r||(o=Ti.t("View conversation details"));var l=p()("p-global_nav__channel_info_item",{"p-global_nav__channel_details_button--active":r});var c=function e(){if(Object(f["a"])()){var t=Object(zn["b"])();Object(zn["c"])(Yn["d"],t.params)}Object(ka["e"])("details");i.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CHANNEL_DETAILS"}}})};return n.a.createElement(U["c"],{position:"bottom-right",tip:o,offsetY:-4,delay:U["a"]},n.a.createElement(B["c"],{className:l,onClick:c},Ti.t("Details")))};Pi.displayName="Details";Pi.defaultProps=Ni;var Ri=function e(t,a){var r=a.channelId;var n=Object(xt["d"])(t,r);if(!n)return null;return{isChannel:Object(Dr["isPublicChannel"])(n)||Object(Dr["isPrivateChannel"])(n),active:"details"===Object(ya["g"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),clogger:Object(M["a"])({state:t})}};var Mi=Object(i["connect"])(Ri)(Pi);var Di={channelId:l["b"].string.isRequired,channelType:l["b"].oneOf(["channel","private","mpim","im"]),featureGlobalNavLayout:l["b"].bool};var xi={channelType:void 0,featureGlobalNavLayout:false};var Fi=function e(t){var a=t.channelId,r=t.channelType,i=t.featureGlobalNavLayout;if(!a||!r)return null;var s=p()("p-global_nav__channel",{"p-global_nav__channel--relayout":i});return n.a.createElement("div",{className:s},n.a.createElement(Kn,{channelId:a}),n.a.createElement(Tn,{channelId:a}),n.a.createElement(Ln,{channelId:a}),n.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),n.a.createElement(yi,{channelId:a}),"im"!==r&&n.a.createElement(oi,{channelId:a}),n.a.createElement(ei,{channelId:a}),n.a.createElement(Mi,{channelId:a}),n.a.createElement("div",{className:"p-global_nav__channel_divider"}),n.a.createElement(Ii,{channelId:a}),n.a.createElement(hi,{channelId:a}))};Fi.displayName="ModelHeader";Fi.defaultProps=xi;var Li=function e(t,a){var r=a.channelId;var n=Object(xt["d"])(t,r);if(!n)return{};return{channelType:Object(Dr["getChannelType"])(n),featureGlobalNavLayout:Object(c["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var Bi=Object(i["connect"])(Li)(Fi);var Ui=new v["b"]("global_nav");var qi={featureGlobalNav:l["b"].bool,featureGlobalNavLayout:l["b"].bool};var Gi={featureGlobalNav:false,featureGlobalNavLayout:false};var Wi=function e(t){var a=t.featureGlobalNav,r=t.featureGlobalNavLayout;if(!a)return null;var i=Ui.t("Threads");var s="p-global_nav__channel_name p-global_nav__channel_name--synthetic";var o=p()({"p-global_nav__channel":true,"p-global_nav__channel--synthetic":true,"p-global_nav__channel--relayout":r});return n.a.createElement("div",{className:o,"data-qa":"channel_name"},n.a.createElement("div",{className:s},i))};Wi.displayName="AllThreadsHeader";Wi.defaultProps=Gi;var Hi=Object(we["a"])("feature_global_nav","feature_global_nav_layout")(Wi);var Vi=a(132);var Ki=a(1687);var zi=a(326);var Yi=a(1335);var Qi=new v["b"]("global_nav");var Ji={hasUnreads:l["b"].bool,sortOrder:l["b"].string,newUnreads:l["b"].number,setUserPrefByApi:l["b"].func,featureGlobalNav:l["b"].bool,featureGlobalNavLayout:l["b"].bool};var Zi={hasUnreads:true,sortOrder:"alphabetical",newUnreads:0,setUserPrefByApi:S["noop"],featureGlobalNav:false,featureGlobalNavLayout:false};var Xi=function(e){w()(t,e);function t(e){y()(this,t);var a=C()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderSortButton=a.renderSortButton.bind(a);a.renderSortMenu=a.renderSortMenu.bind(a);return a}k()(t,[{key:"changeSort",value:function e(t){if(t===this.props.sortOrder)return;this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:t});Object(Yi["b"])()}},{key:"renderSortMenu",value:function e(t){var a=this;if(!this.props.featureGlobalNav)return null;var r=[{label:Qi.t("Alphabetically"),click:function e(){return a.changeSort("alphabetical")}},{label:Qi.t("Scientifically"),click:function e(){return a.changeSort("priority")}},{label:Qi.t("Newest channel"),click:function e(){return a.changeSort("newest")}},{label:Qi.t("Oldest channel"),click:function e(){return a.changeSort("oldest")}}];return n.a.createElement(T["a"],g()({},t,{template:r}))}},{key:"renderSortButton",value:function e(){var t=this.props,a=t.hasUnreads,r=t.sortOrder,i=t.featureGlobalNav;if(!i)return null;if(!a)return null;var s={alphabetical:Qi.rt("<strong>Sort:</strong> Alphabetically"),priority:Qi.rt("<strong>Sort:</strong> Scientifically"),oldest:Qi.rt("<strong>Sort:</strong> Oldest channel"),newest:Qi.rt("<strong>Sort:</strong> Newest channel")};var o=s[r];return n.a.createElement(T["e"],{renderMenu:this.renderSortMenu,position:"bottom-right",offsetY:4},n.a.createElement(B["c"],{className:"p-global_nav__unread_sort"},o,n.a.createElement(I["b"],{type:"chevron-down",inline:true})))}},{key:"renderRefreshButton",value:function e(){var t=this.props,a=t.newUnreads,r=t.featureGlobalNav;if(!r||!a)return null;var i=Qi.t("{newUnreadsCount, plural, =1 {# new message} other {# new messages}}",{newUnreadsCount:a});return n.a.createElement(B["d"],{type:"outline",size:"small",className:"p-global_nav__unread_refresh",onClick:Yi["c"]},n.a.createElement(I["b"],{type:"sync",className:"p-global_nav__unread_refresh_icon",size:"inherit"}),i)}},{key:"render",value:function e(){if(!this.props.featureGlobalNav)return null;var t=p()({"p-global_nav__channel":true,"p-global_nav__channel--synthetic":true,"p-global_nav__channel--relayout":this.props.featureGlobalNavLayout});return n.a.createElement("div",{className:t},n.a.createElement("div",{className:"p-global_nav__channel_name p-global_nav__channel_name--synthetic","data-qa":"channel_name"},Qi.t("All Unreads")),this.renderRefreshButton(),n.a.createElement("div",{className:"p-global_nav__channel_spacer--fill"}),this.renderSortButton())}}]);return t}(r["Component"]);Xi.displayName="AllUnreadsHeader";Xi.defaultProps=Zi;var $i=function e(t){return{hasUnreads:Object(zi["hasUnreads"])(t),sortOrder:Object(Ki["a"])(t),newUnreads:Object(ba["getNewUnreads"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureGlobalNavLayout:Object(c["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var es={setUserPrefByApi:Vi["c"]};var ts=Object(i["connect"])($i,es)(Xi);var as={id:l["b"].string};var rs={id:void 0};var ns=function e(t){var a=t.id;if(!a)return null;if("Vall_threads"===a)return n.a.createElement(Hi,null);if("Vall_unreads"===a)return n.a.createElement(ts,null);if("Vsearch"===a)return n.a.createElement(Mr["a"],null);return n.a.createElement(Bi,{channelId:a})};ns.displayName="ChannelHeader";ns.defaultProps=rs;var is=function e(t){return{id:Object(Dt["a"])(t)}};var ss=Object(i["connect"])(is)(ns);var os=a(1791);var ls=a(5);var cs=a.n(ls);var us={closeFlexpane:l["b"].func};var ds={closeFlexpane:S["noop"]};var ps=function e(t){return n.a.createElement(B["c"],{className:"p-global_nav__flex_btn",onClick:t.closeFlexpane},n.a.createElement(I["b"],{type:"times"}))};ps.displayName="FlexClose";ps.defaultProps=ds;var hs=Object(i["connect"])(null,{closeFlexpane:Oa["a"]})(ps);var vs=a(1350);var ms=a(51);var fs=a(109);var bs=a(41);var gs=new v["b"]("global_nav");var _s=function e(t){var a=t.channelId,r=t.threadTs,i=t.name,s=t.isChannel,o=t.featureGlobalNav;if(!o)return null;var l=Object(bs["constructMsgPermalink"])(a,r);var c=void 0;if(i){var u=n.a.createElement(ms["a"],{href:l,className:"p-global_nav__flex_thread_permalink"},i);c=s?gs.rt("Thread in {channelName}",{channelName:u}):gs.rt("Thread with {displayName}",{displayName:u})}else c=gs.t("Thread");return n.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},c)};_s.displayName="ThreadHeader";_s.defaultProps={channelId:void 0,threadTs:void 0,name:void 0,isChannel:true,featureGlobalNav:false};var ys=function e(t){var a=Object(ya["c"])(t)[0];var r=Object(fs["decodeThreadKey"])(a),n=r.channelId,i=r.threadTs;var s=Object(xt["d"])(t,n);if(!s)return null;return{channelId:n,threadTs:i,name:Object(Dr["getDisplayNameForChannel"])(t,s),isChannel:Object(Dr["isPublicChannel"])(s)||Object(Dr["isPrivateChannel"])(s),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Os=Object(i["connect"])(ys)(_s);var ks=new v["b"]("global_nav");var Es=function e(t){var a=t.name,r=t.isChannel,i=t.featureGlobalNav;if(!i)return null;return r&&a?n.a.createElement("h2",{className:"p-global_nav__flex_title overflow_ellipsis"},ks.t("About {channelName}",{channelName:a})):n.a.createElement("h2",{className:"p-global_nav__flex_title"},ks.t("About this conversation"))};Es.defaultProps={name:void 0,isChannel:true,featureGlobalNav:false};var Cs=function e(t){var a=Object(Dt["a"])(t);var r=Object(xt["d"])(t,a);if(!r)return null;return{name:Object(Dr["getDisplayNameForChannel"])(t,r),isChannel:Object(Dr["isPrivateChannel"])(r)||Object(Dr["isPublicChannel"])(r),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var js=Object(i["connect"])(Cs)(Es);var ws=new v["b"]("global_nav");var Ss={isAdminUser:l["b"].bool,isEnterprise:l["b"].bool,isDetailPane:l["b"].bool,featureGlobalNav:l["b"].bool};var Is={isAdminUser:false,isEnterprise:false,isDetailPane:false,featureGlobalNav:false};var Ts=function e(t){var a=t.isAdminUser,i=t.isEnterprise,s=t.isDetailPane,o=t.featureGlobalNav;if(!o)return null;var l=i?ws.t("Organization Directory"):ws.t("Workspace Directory");var c=a&&!s&&n.a.createElement(r["Fragment"],null,n.a.createElement(U["c"],{tip:ws.t("Manage members"),position:"bottom-right"},n.a.createElement(B["c"],{href:"/admin",className:"p-global_nav__flex_btn p-global_nav__flex_btn--link"},n.a.createElement(I["b"],{type:"cog-o"}))),n.a.createElement("div",{className:"p-global_nav__flex_divider"}));return n.a.createElement(r["Fragment"],null,n.a.createElement("h2",{className:"p-global_nav__flex_title"},l),c)};Ts.displayName="DirectoryHeader";Ts.defaultProps=Is;var As=function e(t){return{isAdminUser:Object(ct["isAdmin"])(Object(xe["b"])(t)),isEnterprise:Object(le["isEnterpriseTeam"])(Object(oe["d"])(t)),isDetailPane:!Object(S["isEmpty"])(Object(ya["c"])(t)),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Ns=Object(i["connect"])(As)(Ts);var Ps=a(1202);var Rs=new v["b"]("global_nav");var Ms={featureGlobalNav:l["b"].bool,dispatchOpenModal:l["b"].bool};var Ds={featureGlobalNav:false,dispatchOpenModal:false};var xs=function e(t){var a=t.featureGlobalNav,i=t.dispatchOpenModal;if(!a)return null;var s=Rs.t("User Groups");var o=function e(){i({element:n.a.createElement(Ps["a"],null)})};var l=Object(ut["a"])()?n.a.createElement(r["Fragment"],null,n.a.createElement(U["c"],{tip:Rs.t("Create a user group"),position:"bottom-right"},n.a.createElement(B["c"],{"data-qa":"user_group_create_button",onClick:o,className:"p-global_nav__flex_btn p-global_nav__flex_btn--link"},n.a.createElement(I["b"],{type:"compose-dm"}))),n.a.createElement("div",{className:"p-global_nav__flex_divider"})):null;return n.a.createElement(r["Fragment"],null,n.a.createElement("h2",{className:"p-global_nav__flex_title"},s),l)};xs.displayName="UserGroupsHeader";xs.defaultProps=Ds;var Fs=function e(t){return{featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Ls=function e(t){return{dispatchOpenModal:function e(){return t(Oe["openModal"].apply(void 0,arguments))}}};var Bs=Object(i["connect"])(Fs,Ls)(xs);var Us=a(193);var qs=new v["b"]("global_nav");var Gs={numDownloads:l["b"].number,featureGlobalNav:l["b"].bool,clearDownloads:l["b"].func};var Ws={numDownloads:0,featureGlobalNav:false,clearDownloads:S["noop"]};var Hs=function e(t){var a=t.numDownloads,i=t.featureGlobalNav,s=t.clearDownloads;if(!i)return null;var o=a>1&&n.a.createElement(r["Fragment"],null,n.a.createElement(B["c"],{onClick:s,className:"p-global_nav__flex_btn"},qs.t("Clear all")),n.a.createElement("div",{className:"p-global_nav__flex_divider"}));return n.a.createElement(r["Fragment"],null,n.a.createElement("h2",{className:"p-global_nav__flex_title"},qs.t("Downloads")),o)};Hs.displayName="DownloadsHeader";Hs.defaultProps=Ws;var Vs=function e(t){return{numDownloads:(Object(Us["getTeamDownloadIds"])(t)||[]).length,featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav")}};var Ks={clearDownloads:function e(){return Object(Us["clearTeamDesktopDownloads"])()}};var zs=Object(i["connect"])(Vs,Ks)(Hs);var Ys=new v["b"]("global_nav");var Qs={flexName:l["b"].string,featureGlobalNav:l["b"].bool,featureGlobalNavLayout:l["b"].bool,featureSonicUserGroups:l["b"].bool,flexOrigin:l["b"].string};var Js={flexName:void 0,featureGlobalNav:void 0,featureGlobalNavLayout:void 0,featureSonicUserGroups:void 0,flexOrigin:void 0};var Zs=function(e){w()(t,e);function t(){y()(this,t);return C()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}k()(t,[{key:"renderTitle",value:function e(){var t=this.props,a=t.flexName,r=t.featureGlobalNav,i=t.flexOrigin,s=t.featureSonicUserGroups;if(!r)return null;var o="p-global_nav__flex_title";switch(a){case"convo":case"thread":return n.a.createElement(Os,null);case"files":if("starred_items"===i)return n.a.createElement("h2",{className:o},Ys.t("Starred Items"));return n.a.createElement("h2",{className:o},Ys.t("Files"));case"stars":case"starred_items":return n.a.createElement("h2",{className:o},Ys.t("Starred Items"));case"mentions":return n.a.createElement("h2",{className:o},Ys.t("Activity"));case"team":return n.a.createElement(Ns,null);case"whats_new":return n.a.createElement("h2",{className:o},Ys.t("What\u2019s New"));case"groups":case"user_groups":if(s)return n.a.createElement(Bs,null);return n.a.createElement("h2",{className:o},Ys.t("User Groups"));case"shortcuts":return n.a.createElement("h2",{className:o},Ys.t("Keyboard Shortcuts"));case"downloads":return n.a.createElement(zs,null);case"details":return n.a.createElement(js,null);case"apps":return n.a.createElement("h2",{className:o},Ys.t("About this app"));default:return n.a.createElement("h2",{className:o},"Unimplemented: ",a)}}},{key:"render",value:function e(){var t=this.props,a=t.flexName,r=t.featureGlobalNavLayout;if(!a)return null;var i=p()(cs()({"p-global_nav__flex":true,"p-global_nav__flex--sonic":Object(f["a"])(),"p-global_nav__flex--legacy":!Object(f["a"])(),"p-global_nav__flex--relayout":r},"p-global_nav__flex--"+a,true));return n.a.createElement("div",{className:i},n.a.createElement(vs["a"],null),this.renderTitle(),n.a.createElement(hs,null))}}]);return t}(r["Component"]);Zs.displayName="FlexHeader";Zs.defaultProps=Js;var Xs=function e(t){return{flexName:Object(ya["g"])(t),flexOrigin:Object(ya["a"])(t),featureGlobalNav:Object(c["isFeatureEnabled"])(t,"feature_global_nav"),featureGlobalNavLayout:Object(c["isFeatureEnabled"])(t,"feature_global_nav_layout"),featureSonicUserGroups:Object(c["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var $s=Object(i["connect"])(Xs)(Zs);var eo=function e(t){var a=t.featureGlobalNavLayout;return a?n.a.createElement(r["Fragment"],null,n.a.createElement(u["a"],null),n.a.createElement("div",{className:"p-global_nav p-global_nav--top_only"},n.a.createElement(Rr,null))):n.a.createElement(r["Fragment"],null,n.a.createElement(u["a"],null),n.a.createElement("div",{className:"p-global_nav"},n.a.createElement(Rr,null),n.a.createElement("div",{className:"p-global_nav__bottom"},n.a.createElement(os["a"],null),n.a.createElement(ss,null),n.a.createElement($s,null))))};eo.defaultProps={featureGlobalNavLayout:false};var to=function e(t){return{featureGlobalNavLayout:Object(c["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var ao=Object(i["connect"])(to)(eo);var ro=function e(t,a){if(!t)throw new Error("mountGlobalNav must be called with a teamId parameter");var r=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(ao,null)),a)};var no=function e(t,a){if(!t)throw new Error("mountGlobalNavChannel must be called with a teamId parameter");var r=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(ss,null)),a)};var io=function e(t,a){if(!t)throw new Error("mountGlobalNavChannel must be called with a teamId parameter");var r=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement($s,null)),a)};var so=a(44);Object(so["a"])("interop.globalNav",{mountGlobalNav:ro,mountGlobalNavChannel:no,mountGlobalNavFlex:io})},,,function(e,t,a){"use strict";a.d(t,"c",function(){return o});a.d(t,"i",function(){return l});a.d(t,"b",function(){return c});a.d(t,"d",function(){return u});a.d(t,"e",function(){return d});a.d(t,"f",function(){return p});a.d(t,"h",function(){return h});a.d(t,"a",function(){return v});a.d(t,"j",function(){return m});a.d(t,"g",function(){return f});a.d(t,"k",function(){return b});var r=a(0);var n=a(29);var i=a(25);var s=a(12);var o=Object(i["a"])("Get EKM Clear Cache timestamp",function(e,t,a){var r=a.reason;return e(Object(n["a"])({method:"enterprise.ekm.getClearCacheTs",reason:r})).catch(function(e){var a="failed to get clear cache timestamp";Object(s["a"])({getState:t}).error("EKM",a);throw e})});o.propTypes={reason:r["b"].string};var l=Object(i["a"])("Set EKM Clear Cache timestamp",function(e,t,a){var r=a.timestamp,i=a.reason;return e(Object(n["a"])({method:"enterprise.ekm.setClearCacheTs",args:{timestamp:r},reason:i})).catch(function(e){var a="failed to set clear cache timestamp";Object(s["a"])({getState:t}).error("EKM",a);throw e})});l.propTypes={timestamp:r["b"].number,reason:r["b"].string};var c=Object(i["a"])("Get EKM Backfill info",function(e,t,a){var r=a.reason;return e(Object(n["a"])({method:"ekm.backfill.info",reason:r})).catch(function(e){var a="failed to get EKM backfill information";Object(s["a"])({getState:t}).error("EKM",a);throw e})});c.propTypes={reason:r["b"].string};var u=Object(i["a"])("Get Misson Control EKM Backfill info",function(e,t,a){var r=a.reason,i=a.teamId;return e(Object(n["a"])({method:"mc.ekm.backfill.info",reason:r,args:{team_id:i}})).catch(function(e){var a="failed to get Mission Control EKM backfill information";Object(s["a"])({getState:t}).error("EKM",a);throw e})});u.propTypes={teamId:r["b"].string.isRequired,reason:r["b"].string};var d=Object(i["a"])("Get EKM Status information for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId;return e(Object(n["a"])({method:"mc.ekm.status",reason:r,args:{team_id:i}})).catch(function(e){var a="failed to get Mission Control EKM Status";Object(s["a"])({getState:t}).error("EKM",a);throw e})});d.propTypes={teamId:r["b"].string.isRequired,reason:r["b"].string};var p=Object(i["a"])("Pause EKM Backfill for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId;return e(Object(n["a"])({method:"mc.ekm.backfill.pause",reason:r,args:{team_id:i}})).catch(function(e){var a="failed to pause MC EKM Backfill";Object(s["a"])({getState:t}).error("EKM",a);throw e})});p.propTypes={teamId:r["b"].string.isRequired,reason:r["b"].string};var h=Object(i["a"])("Resume EKM Backfill for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId;return e(Object(n["a"])({method:"mc.ekm.backfill.resume",reason:r,args:{team_id:i}})).catch(function(e){var a="failed to resume MC EKM Backfill";Object(s["a"])({getState:t}).error("EKM",a);throw e})});h.propTypes={teamId:r["b"].string.isRequired,reason:r["b"].string};var v=Object(i["a"])("Enroll Org in EKM for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId,o=a.keyFamily,l=a.requester,c=a.role,u=a.loggingGroupName;return e(Object(n["a"])({method:"mc.ekm.enroll",reason:r,args:{team_id:i,key_family:o,requester:l,role:c,log_group_name:u}})).catch(function(e){var a="failed to enroll org in EKM in MC";Object(s["a"])({getState:t}).error("EKM",a);throw e})});v.propTypes={teamId:r["b"].string.isRequired,keyFamily:r["b"].string.isRequired,requester:r["b"].string.isRequired,role:r["b"].string,loggingGroupName:r["b"].string,reason:r["b"].string};var m=Object(i["a"])("Unenroll Org from EKM for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId,o=a.requester;return e(Object(n["a"])({method:"mc.ekm.unenroll",reason:r,args:{team_id:i,requester:o}})).catch(function(e){var a="failed to unenroll org from EKM in MC";Object(s["a"])({getState:t}).error("EKM",a);throw e})});m.propTypes={teamId:r["b"].string.isRequired,requester:r["b"].string.isRequired,reason:r["b"].string};var f=Object(i["a"])("Re-key Org in EKM for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId,o=a.keyFamily,l=a.requester;return e(Object(n["a"])({method:"mc.ekm.rekey",reason:r,args:{team_id:i,key_family:o,requester:l}})).catch(function(e){var a="failed to re-key org in MC";Object(s["a"])({getState:t}).error("EKM",a);throw e})});f.propTypes={teamId:r["b"].string.isRequired,keyFamily:r["b"].string.isRequired,requester:r["b"].string.isRequired,reason:r["b"].string};var b=Object(i["a"])("Update EKM Logging for Mission Control",function(e,t,a){var r=a.reason,i=a.teamId,o=a.requester,l=a.loggingGroupName,c=a.role;return e(Object(n["a"])({method:"mc.ekm.updateLogging",reason:r,args:{team_id:i,requester:o,log_group_name:l,role:c}})).catch(function(e){var a="failed to update EKM logging in MC";Object(s["a"])({getState:t}).error("EKM",a);throw e})});b.propTypes={teamId:r["b"].string.isRequired,requester:r["b"].string.isRequired,loggingGroupName:r["b"].string.isRequired,role:r["b"].string.isRequired,reason:r["b"].string}},,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"toggleFolderCollapse",function(){return E});a.d(t,"setFolderCollapse",function(){return C});a.d(t,"setIsRenaming",function(){return j});a.d(t,"renameFolder",function(){return w});a.d(t,"createFolder",function(){return S});a.d(t,"setFolderData",function(){return I});a.d(t,"dragFolderOrChannel",function(){return T});a.d(t,"initializeFolderData",function(){return A});a.d(t,"saveFolderData",function(){return N});a.d(t,"getFolders",function(){return M});a.d(t,"getFolderByName",function(){return D});var r=a(5);var n=a.n(r);var i=a(26);var s=a.n(i);var o=a(3);var l=a.n(o);var c=a(2);var u=a.n(c);var d=a(0);var p=a(18);var h=a(36);var v=a(14);var m=a(15);var f=a(34);var b=a(132);var g=a(12);var _;var y=false;var O="folder_data";var k={list:[],currentlyRenamingFolder:null};var E=Object(p["b"])("Toggle between collapse and showing channels");E.propTypes={name:d["b"].string.isRequired};var C=Object(p["b"])("Set collapsed state for all folders");C.propTypes={isCollapsed:d["b"].bool.isRequired};var j=Object(p["b"])("Set a folder's renaming state to true");j.propTypes={name:d["b"].string.isRequired};var w=Object(p["b"])("Rename a folder");w.propTypes={oldName:d["b"].string.isRequired,newName:d["b"].string.isRequired};var S=Object(p["b"])("Create a new folder");S.propTypes=null;var I=Object(p["b"])("Set all folder data (from storage)");I.propTypes=d["b"].array.isRequired;var T=Object(p["b"])("Drag a folder or channel onto a folder or channel");T.propTypes={src:d["b"].object.isRequired,dest:d["b"].object};var A=Object(m["b"])("Set Folder Data From LocalStorage",function(e,t){var a=Object(f["f"])(t(),O);if(!a){y=true;a=localStorage.getItem(O)}var r=void 0;try{r=JSON.parse(a)}catch(e){r=null}r&&0!==r.length||(r=k.list);e(I(r))});A.propTypes=null;var N=Object(m["b"])("Set Folder Data From LocalStorage",function(e,t){var a=t().channelSidebarFolders.list;var r=JSON.stringify(a);if(y)try{localStorage.setItem(O,r)}catch(e){Object(g["a"])({getState:t}).error("CHANNEL_SIDEBAR_FOLDERS","Unable to store channel sidebar folder data to localStorage because localStorage is full")}else e(Object(b["c"])({pref:O,value:r}))});N.propTypes=null;var P=function e(t,a){var r=true;var n=1;var i=void 0;var s=function e(t){return t.name===i};while(r){i=1===n?a:a+" ("+n+")";r=t.list.find(s);n+=1}return i};var R=Object(h["b"])((_={},n()(_,I,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return l()({},e,{list:t})}),n()(_,E,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.name;return l()({},e,{list:e.list.map(function(e){return e.name===a?l()({},e,{isCollapsed:!e.isCollapsed}):e}),currentlyRenamingFolder:null})}),n()(_,C,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.isCollapsed;return l()({},e,{list:e.list.map(function(e){return l()({},e,{isCollapsed:a})}),currentlyRenamingFolder:null})}),n()(_,w,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.oldName,r=t.newName;return l()({},e,{list:r?e.list.map(function(t){return t.name===a&&a!==r?l()({},t,{name:P(e,r)}):t}):e.list.filter(function(e){return e.name!==a}),currentlyRenamingFolder:null})}),n()(_,j,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.name;return l()({},e,{currentlyRenamingFolder:a})}),n()(_,S,function(e){return l()({},e,{currentlyRenamingFolder:P(e,"New Collection"),list:[{name:P(e,"New Collection"),isCollapsed:true,channelIds:[]}].concat(s()(e.list))})}),n()(_,T,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.src,r=t.dest;if("channel"===a.type){if(r&&"channel"===r.type&&a.id===r.id)return e;var n=u.a.findIndex(e.list,function(e){return u.a.includes(e.channelIds,a.id)});var i=-1===n?-1:e.list[n].channelIds.indexOf(a.id);var o=-1;var c=-1;if(r&&"folder"===r.type){o=u.a.findIndex(e.list,{name:r.id});c=0}else if(r&&"channel"===r.type){o=u.a.findIndex(e.list,function(e){return u.a.includes(e.channelIds,r.id)});c=-1===o?-1:e.list[o].channelIds.indexOf(r.id)}if(n===o&&i===c)return e;var d=l()({},e,{list:e.list.map(function(e){return l()({},e,{channelIds:e.channelIds.filter(function(e){return e!==a.id})})})});if(-1===o)return d;return l()({},d,{list:d.list.map(function(e,t){return t!==o?e:l()({},e,{isCollapsed:0!==e.channelIds.length&&e.isCollapsed,channelIds:[].concat(s()(e.channelIds.slice(0,c)),[a.id],s()(e.channelIds.slice(c)))})})})}if("folder"===a.type&&r){var p=void 0;p="folder"===r.type?u.a.findIndex(e.list,{name:r.id}):u.a.findIndex(e.list,function(e){return u.a.includes(e.channelIds,r.id)});if(-1===p)return e;var h=u.a.findIndex(e.list,{name:a.id});if(h===p)return e;var v=l()({},e,{list:[].concat(s()(e.list.slice(0,h)),s()(e.list.slice(h+1)))});v.list=[].concat(s()(v.list.slice(0,p)),[e.list[h]],s()(v.list.slice(p)));return v}return e}),_),k,{persistenceEnabled:true});R.propTypes={list:d["b"].arrayOf(d["b"].shape({name:d["b"].string.isRequired,isCollapsed:d["b"].bool.isRequired,channelIds:d["b"].arrayOf(d["b"].string).isRequired})),currentlyRenamingFolder:d["b"].string};t["default"]=R;var M=Object(v["b"])(function(e){return e&&e.channelSidebarFolders&&e.channelSidebarFolders.list});var D=Object(v["b"])(function(e,t){return e&&e.channelSidebarFolders&&l()({},u.a.find(e.channelSidebarFolders.list,{name:t}),{isRenaming:e.channelSidebarFolders.currentlyRenamingFolder===t})})},,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(2);var l=a(0);var c=a(192);var u=a(27);var d=a(18);var p=a(36);var h=a(15);var v=a(14);var m=a(12);var f=a(25);var b=a(29);var g=Object(f["a"])("Fetch user activity from the API",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.afterTs,n=a.includeAtChannel,i=void 0===n||n,s=a.includeReactions,o=void 0===s||s,l=a.includeUserGroups,c=void 0===l||l,u=a.limit,d=void 0===u?20:u,p=a.reason;var h=[];if(!i){h.push("channel");h.push("everyone")}c||h.push("user_group");return e(Object(b["a"])({method:"activity.mentions",args:{after_ts:r,count:d,exclude:h.join(","),reactions:o?1:0},reason:p}))});g.propTypes={includeAtChannel:l["b"].bool,includeReactions:l["b"].bool,includeUserGroups:l["b"].bool,limit:l["b"].number,reason:l["b"].string.isRequired};var _=a(178);var y=a(34);var O=a(1299);a.d(t,"bulkAddActivityItems",function(){return I});a.d(t,"removeActivityByMessageTs",function(){return T});a.d(t,"removeActivityByType",function(){return A});a.d(t,"setActivityLoading",function(){return N});a.d(t,"resetActivity",function(){return P});a.d(t,"getActivityListItems",function(){return x});a.d(t,"isActivityLoading",function(){return F});a.d(t,"hasMoreActivity",function(){return L});a.d(t,"fetchActivityMentions",function(){return B});a.d(t,"fetchActivityByMessageTs",function(){return U});var k;var E="ACTIVITY_STORE";var C="activity";var j=Object(o["memoize"])(function(){return new c["b"]({fetch:function e(t){Object(u["a"])(t,P());var a=Object(u["c"])(t);var r=Object(y["f"])(a,"mentions_exclude_at_channels");var n=Object(y["f"])(a,"mentions_exclude_reactions");var i=Object(y["f"])(a,"mentions_exclude_at_user_groups");return Object(u["a"])(t,B({includeAtChannel:!r,includeReactions:!n,includeUserGroups:!i}))},isEnabled:function e(){return true},metricsName:"activity"})});var w=function e(t){switch(t.type){case"at":case"channel":case"everyone":case"user_group":case"word":return{channelId:t.channel,message:t.message,ts:t.message.ts,type:t.type};case"reaction":return{channelId:t.item.channel,message:t.item.message,ts:t.ts,type:t.type};default:Object(m["b"])().error("bulkAddActivityItems: unknown item type",t);return null}};var S=function e(t,a,r){return Object(o["some"])(t,function(e){if(!e)return false;if(e.message)return e.message.ts===r&&e.message.channel===a;return e.messageTs===r&&e.channelId===a})};var I=Object(d["b"])("Adds multiple activity items");I.propTypes={hasMore:l["b"].bool,items:l["b"].arrayOf(l["b"].object).isRequired};var T=Object(d["b"])("Remove an item by messageTs");T.propTypes={channelId:l["b"].string.isRequired,messageTs:l["b"].string.isRequired};var A=Object(d["b"])("Remove all items that match type");A.propTypes=l["b"].string.isRequired;var N=Object(d["b"])("Sets if activity is loading");N.propTypes=l["b"].bool.isRequired;var P=Object(d["b"])("Reset the activity store");P.propTypes=null;var R={hasMore:false,items:[],isLoading:false};var M=Object(p["b"])((k={},n()(k,I,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.hasMore,r=t.items;if(Object(o["isEmpty"])(r))return e;var n=r.map(function(e){var t=w(e),a=t.channelId,r=t.message,n=t.ts,i=t.type;return{channelId:a,messageTs:r.ts,threadTs:r.thread_ts,ts:n,type:i}});var i=Object(o["compact"])(e.items.concat(n));var l=Object(o["orderBy"])(i,"ts",["desc"]);var c=Object(o["uniqBy"])(l,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.messageTs,a=e.type;if("reaction"===a)return"reaction-"+t;return"mention-"+t});return s()({},e,{hasMore:a,items:c})}),n()(k,T,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.messageTs;var n=Object(o["reject"])(e.items,{channelId:a,messageTs:r});if(n.length===e.items.length)return e;return s()({},e,{items:n})}),n()(k,A,function(e,t){var a=e.items.filter(function(e){return e.type!==t});if(a.length===e.items.length)return e;return s()({},e,{items:a})}),n()(k,N,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.isLoading===t)return e;return s()({},e,{isLoading:t})}),n()(k,P,function(){return R}),k),R,{persistenceEnabled:true});M.propTypes={items:l["b"].arrayOf(l["b"].shape({channelId:l["b"].string.isRequired,messageTs:l["b"].string.isRequired,threadTs:l["b"].string,ts:l["b"].string.isRequired,type:l["b"].string.isRequired})),isLoading:l["b"].bool};var D=t["default"]=M;var x=Object(v["b"])(function(e){var t=Object(_["getTeamId"])(e);j().maybeRefetch(t,C);return e&&e.activity&&e.activity.items});var F=Object(v["b"])(function(e){return e&&e.activity&&!!e.activity.isLoading});var L=Object(v["b"])(function(e){return e&&e.activity&&!!e.activity.hasMore});var B=Object(h["b"])("Fetch user activity",function(e,t,a){e(N(true));return e(g(s()({reason:"fetchActivityMentions"},a))).then(function(a){e(I({hasMore:a.has_more,items:a.mentions}));var r=Object(o["map"])(a.mentions,w);r.forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channelId,r=t.message;e(Object(O["a"])({channelId:a,message:r}))});var n=t();var i=Object(_["getTeamId"])(n);j().markObjectsAsFresh(i,[C]);return r}).finally(function(){e(N(false))})});B.propTypes={afterTs:l["b"].string,includeAtChannel:l["b"].bool,includeReactions:l["b"].bool,includeUserGroups:l["b"].bool,limit:l["b"].number};var U=Object(h["b"])("Fetch a specific activity mention item by timestamp",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.messageTs,i=a.retryNum,s=void 0===i?0:i,o=a.maxRetries,l=void 0===o?5:o;var c=t();var u=Object(m["a"])({state:c,label:E});if(!n){u.info("no messageTs provided");return Promise.reject(new Error("no messageTs provided"))}if(S(x(c),r,n)){u.info("Fetch "+n+": already have item");return Promise.resolve()}if(s>=l){u.info("Fetch "+n+": aborted after max retries");return Promise.reject(new Error("aborted after max retries"))}var d=function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return Promise.delay(1e3).then(function(){return e(U({channelId:r,maxRetries:l,messageTs:n,retryNum:a}))})};if(F(c))return d();u.info("Fetch "+n+": fetching activity (retry "+s+")");return e(B({limit:10})).then(function(e){if(S(e,r,n)){u.info("Fetch "+n+": found item");return Promise.resolve()}return d(s+1)})});U.propTypes={channelId:l["b"].string.isRequired,maxRetries:l["b"].number,messageTs:l["b"].string.isRequired,retryNum:l["b"].number}},,function(e,t,a){"use strict";a.r(t);var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(2);var c=a(207);var u=a(18);var d=a(36);var p=a(14);var h=a(15);var v=a(68);var m=a(3933);var f=a(29);var b=a(25);var g=Object(b["a"])("Fetch display status of gdrive in sidebar prompt",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;return e(Object(f["a"])({method:"apps.displayGdrivePrompt",reason:r})).then(function(e){return{displayGdriveInstallPrompt:e.display_gdrive_install_prompt,displayGdriveConnectPrompt:e.display_gdrive_connect_prompt}})});g.propTypes={reason:o["b"].string.isRequired};var _=a(58);var y=a.n(_);var O=Object(b["a"])("Fetch display statuses of app suggestions in channel sidebar",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;return e(Object(f["a"])({method:"apps.getSidebarPrompts",reason:r})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t={};Object.entries(e).forEach(function(e){var a=y()(e,2),r=a[0],n=a[1];void 0!==n.display_install&&(t[r]={displayInstall:n.display_install,displayConnect:n.display_connect,appId:n.app_id,appName:n.app_name})});return t})});O.propTypes={reason:o["b"].string.isRequired};a.d(t,"setJumperCoachmarkState",function(){return E});a.d(t,"setGdrivePromptData",function(){return C});a.d(t,"setAppSuggestionLinksData",function(){return j});a.d(t,"initializeGdrivePromptData",function(){return w});a.d(t,"initializeAppSuggestionLinksData",function(){return S});a.d(t,"hideGdrivePrompt",function(){return I});a.d(t,"hideAppSuggestion",function(){return T});a.d(t,"setAppSuggestionImpressionClogged",function(){return A});a.d(t,"setAppLinkImpressionClogged",function(){return N});a.d(t,"getJumperCoachmarkState",function(){return F});a.d(t,"getAppSuggestionPrompts",function(){return L});a.d(t,"getEnabledAppSuggestionPromptsKeyList",function(){return U});a.d(t,"getAppSuggestionPrompt",function(){return q});a.d(t,"getAppSuggestionImpressionsClogged",function(){return G});a.d(t,"getAppLinkImpressionClogged",function(){return W});var k;var E=Object(u["b"])("Set the jumper button coachmark state");E.propTypes=o["b"].oneOf(["SHOW_BUTTON","HIDE_BUTTON","HIDE_BUTTON_PENDING"]);var C=Object(u["b"])("Set gdrive prompt state (from API)");C.propTypes=o["b"].shape({displayGdriveInstallPrompt:o["b"].bool.isRequired,displayGdriveConnectPrompt:o["b"].bool.isRequired});var j=Object(u["b"])("Set app suggestion links state (from API)");j.propTypes=o["b"].objectOf(o["b"].shape({displayInstall:o["b"].bool.isRequired,displayConnect:o["b"].bool.isRequired,appId:o["b"].string.isRequired,appName:o["b"].string.isRequired}));var w=Object(h["b"])("Get gdrive prompt state from API",function(e){e(g({reason:"initializeGdrivePromptData"})).then(function(t){e(C(t))})});w.propTypes=null;var S=Object(h["b"])("Get gdrive prompt state from API",function(e){e(O({reason:"initializeAppSuggestionLinksData"})).then(function(t){e(j(t))})});S.propTypes=null;var I=Object(u["b"])("Hide any gdrive prompts in sidebar");I.propTypes=null;var T=Object(u["b"])("Hide an app suggestion prompt via key");T.propTypes=o["b"].string;var A=Object(u["b"])("Remember that an app suggestion impression was clogged, so we don't clog more than once");A.propTypes=o["b"].string;var N=Object(u["b"])("Remember that ADD APP link impression was clogged, so we don't clog more than once");N.propTypes=null;var P={displayGdriveInstallPrompt:false,displayGdriveConnectPrompt:false};var R={displayInstall:false,displayConnect:false};var M={selectedItemId:void 0,gdrivePrompt:s()({},P),appSuggestions:{},appSuggestionImpressionsClogged:{},appLinkImpressionClogged:false};var D=Object(d["b"])((k={},n()(k,E,function(e,t){return s()({},e,{jumperCoachmark:t})}),n()(k,C,function(e,t){return s()({},e,{gdrivePrompt:t})}),n()(k,I,function(e){return s()({},e,{gdrivePrompt:s()({},P)})}),n()(k,j,function(e,t){return s()({},e,{appSuggestions:s()({},t)})}),n()(k,T,function(e,t){return s()({},e,{appSuggestions:s()({},e.appSuggestions,n()({},t,s()({},e.appSuggestions[t],R)))})}),n()(k,A,function(e,t){return s()({},e,{appSuggestionImpressionsClogged:s()({},e.appSuggestionImpressionsClogged,n()({},t,true))})}),n()(k,N,function(e){return s()({},e,{appLinkImpressionClogged:true})}),k),M,{persistenceEnabled:true});D.propTypes={selectedItemId:o["b"].string,jumperCoachmark:E.propTypes,gdrivePrompt:C.propTypes};var x=t["default"]=D;var F=Object(p["b"])(function(e){return e&&e.channelSidebar&&e.channelSidebar.jumperCoachmark});var L=Object(p["b"])(function(e){return e&&e.channelSidebar&&e.channelSidebar.appSuggestions});var B=function e(t){return Object(v["a"])(t,"app_whitelist_enabled")};var U=Object(c["createSelector"])(L,B,function(e,t){return Object(l["reduce"])(e,function(e,a,r){(Object(m["c"])(a)&&!t||Object(m["a"])(a))&&(e=e.concat(r));return e},[])});var q=Object(p["b"])(function(e,t){return e&&e.channelSidebar&&e.channelSidebar.appSuggestions&&e.channelSidebar.appSuggestions[t]});var G=Object(p["b"])(function(e){return e&&e.channelSidebar&&e.channelSidebar.appSuggestionImpressionsClogged});var W=Object(p["b"])(function(e){return e&&e.channelSidebar&&e.channelSidebar.appLinkImpressionClogged})},,,,,function(e,t,a){"use strict";a.d(t,"e",function(){return n});a.d(t,"d",function(){return i});a.d(t,"b",function(){return s});a.d(t,"f",function(){return o});a.d(t,"c",function(){return l});a.d(t,"a",function(){return u});var r=a(20);var n=Object(r["b"])("TS.permissions.members.canRequestSharedChannel",function(){return false});var i=Object(r["b"])("TS.permissions.members.canPostInModelOb",function(){return false});var s=Object(r["b"])("TS.permissions.members.canCreateConvertOrgSharedChannels",function(){return false});var o=Object(r["b"])("TS.permissions.members.canUserInviteToWorkspace",function(){return false});var l=Object(r["b"])("TS.permissions.members.canManageParticipationInSharedChannelsOpenBeta",function(){return false});var c=Object(r["b"])("TS.permissions.members.canEditUserGroups",function(){return false});var u=Object(r["b"])("TS.permissions.members.canCreateAndDeleteUserGroups",function(){return false})},,function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(2);var s=a(0);var o=a(15);var l=a(48);var c=a(6);var u=a.n(c);var d=a(7);var p=a.n(d);var h=a(8);var v=a.n(h);var m=a(9);var f=a.n(m);var b=a(13);var g=a(16);var _=a.n(g);var y=a(10);var O=a(12);var k=a(4206);var E=a(3);var C=a.n(E);var j=function e(){return null};var w=function e(t){return n.a.createElement(k["a"],C()({renderError:j},t))};w.displayName="QuietErrorBoundary";var S=w;var I=k["a"];var T=a(4);var A=a(14);var N=Object(A["b"])(function(e){return e&&e.prefs&&e.prefs.uiState&&e.prefs.uiState.showOpenTransition});var P=Object(A["b"])(function(e){return e&&e.prefs&&e.prefs.uiState&&e.prefs.uiState.lastActiveSection});var R=a(1184);var M=a(35);var D=a(31);var x=a(435);var F=a(696);var L=a(354);var B=a(1044);var U=a(45);var q=a(34);var G=a(68);var W=a(305);var H=a(132);var V=a(1206);var K=a(24);var z=a(17);var Y=a(912);var Q=a(57);var J=a(204);var Z=a(1333);var X=a(1366);var $=a(239);var ee=a(901);var te=a(38);var ae=a(1209);var re=a(573);var ne=a(1331);var ie=a(1845);var se=a(42);var oe=a(30);var le=a(1830);var ce=a(54);var ue=a(126);var de=a(51);var pe=a(804);var he=a(907);var ve=a(1568);var me=a(2112);var fe=new y["b"]("prefs");var be={dndEnabled:s["b"].bool.isRequired,dndStartHour:s["b"].string.isRequired,dndEndHour:s["b"].string.isRequired,time24:s["b"].bool.isRequired,setUserPrefByApi:s["b"].func.isRequired,changePrefsActiveSection:s["b"].func.isRequired,tzLabel:s["b"].string.isRequired,logger:s["b"].object.isRequired};var ge=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onChangeDndEnabled=a.onChangeDndEnabled.bind(a);a.handleTimeChange=a.handleTimeChange.bind(a);a.openTzPreferences=a.openTzPreferences.bind(a);return a}p()(t,[{key:"onChangeDndEnabled",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed dnd_enabled: "+r);this.props.setUserPrefByApi({pref:"dnd_enabled",value:r})}},{key:"handleTimeChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value,r=t.pref;var n=this.props.logger;n.action("Changed "+r+": "+a);this.props.setUserPrefByApi({pref:r,value:a})}},{key:"openTzPreferences",value:function e(){var t=this.props.changePrefsActiveSection;t({sectionId:"language_region",subsectionId:"prefs_timezone"})}},{key:"renderTimeSelects",value:function e(){var t=this;var a=this.props,r=a.dndEnabled,s=a.dndStartHour,o=a.dndEndHour,l=a.time24;var c=Object.keys(he["a"]).map(function(e){return{label:l?e:he["a"][e],value:e}});var u=c.filter(function(e){return e.value!==o});var d=c.filter(function(e){return e.value!==s});var p=Object(i["find"])(c,{value:s});var h=Object(i["find"])(c,{value:o});var v=void 0;var m=void 0;p||(v=Object(ve["a"])({time:s,time24:l}));h||(m=Object(ve["a"])({time:o,time24:l}));return n.a.createElement("div",{className:"p-dnd_preferences__time_select_wrapper margin_top_50"},n.a.createElement(pe["a"],{selectId:"dnd_start_hour_select",ariaLabel:fe.t("Select the time you want Do Not Disturb to begin"),options:u,selectedOption:p,onOptionSelected:function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.value;return t.handleTimeChange({value:r,pref:"dnd_start_hour"})},key:h&&h.label||m,placeholderText:v,width:120,isDisabled:!r}),n.a.createElement("span",{className:"p-dnd_preferences__time_select_to"},fe.t("to")),n.a.createElement(pe["a"],{selectId:"dnd_end_hour_select",ariaLabel:fe.t("Select the time you want Do Not Disturb to end"),options:d,selectedOption:h,onOptionSelected:function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.value;return t.handleTimeChange({value:r,pref:"dnd_end_hour"})},key:p&&p.label||v,placeholderText:m,width:120,isDisabled:!r}))}},{key:"render",value:function e(){var t=this.props,a=t.dndEnabled,i=t.tzLabel;var s="dnd_enabled_checkbox";return n.a.createElement(r["Fragment"],null,n.a.createElement("p",null,fe.rt("When {doNotDisturb} is turned on, Slack won't send you any notifications. Your fellow Slack users can override this if necessary.",{doNotDisturb:n.a.createElement(de["a"],{href:"https://get.slack.help/hc/en-us/articles/214908388-Pause-notifications-with-Do-Not-Disturb"},fe.t("Do Not Disturb"))})),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:fe.t("Automatically disable notifications from:"),htmlFor:s},n.a.createElement(ue["a"],{id:s,checked:a,onChange:this.onChangeDndEnabled})),this.renderTimeSelects(),n.a.createElement("p",{className:"p-dnd_preferences__tz_label"},i+" ","(",n.a.createElement(de["a"],{onClick:this.openTzPreferences},fe.t("change")),")"))}}]);return t}(r["Component"]);ge.displayName="BasicDndUserPreferences";var _e=function e(t){var a=Object(T["getCurrentUserId"])(t);var r=Object(K["d"])(t,a);var n=Object(q["f"])(t,"dnd_start_hour");var s=Object(q["f"])(t,"dnd_end_hour");return{dndEnabled:Object(q["f"])(t,"dnd_enabled"),dndStartHour:Object(i["padStart"])(n,5,"0"),dndEndHour:Object(i["padStart"])(s,5,"0"),time24:Object(q["f"])(t,"time24"),tzLabel:Object(z["getMemberTzLabel"])(r),logger:Object(O["a"])({state:t,label:"PREFS"})}};var ye=function e(t){return{setUserPrefByApi:function e(a){return t(Object(H["c"])(a))}}};var Oe=Object(b["connect"])(_e,ye)(ge);var ke={text:s["b"].string.isRequired,description:s["b"].node.isRequired,selected:s["b"].bool.isRequired,children:s["b"].node.isRequired};var Ee=function(e){f()(t,e);function t(){u()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}p()(t,[{key:"render",value:function e(){var t=this.props,a=t.text,i=t.description,s=t.selected,o=t.children;var l=n.a.createElement(r["Fragment"],null,n.a.createElement("p",{className:"margin_bottom_0 bold"},a),n.a.createElement("p",{className:"margin_bottom_0"},i));return n.a.createElement(ce["a"],{text:l,type:"inline",cursor:"pointer",className:s?"p-prefs_modal__radiogroup--selected":""},o)}}]);return t}(r["PureComponent"]);Ee.displayName="PrefsRadioLabel";var Ce=Ee;var je=a(81);var we=a(861);var Se=a(22);var Ie=a(135);var Te=a(211);var Ae=a(364);var Ne=a(687);var Pe=a(28);var Re=a(187);var Me=new y["b"]("desktop");var De={id:s["b"].string.isRequired};var xe=Object(O["b"])({label:"NOTIF_WARNINGS"});var Fe=function(e){f()(t,e);function t(){u()(this,t);return v()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}p()(t,[{key:"render",value:function e(){var t=this.props.id;var a=Object(J["b"])({articleId:201355156,zdLocale:Object(Q["a"])(),hash:"windows-1"});var r=void 0;switch(t){case"QUIET_TIME":r=Me.t("During your first hour using a new Windows operating system, you won\u2019t receive any notifications.");break;case"AC_USER":r=Me.rt("You\u2019ve disabled notifications for Slack from the Windows Action Center. <a>Visit our Help Center to learn how to enable them.</a>",null,function(e){var t=e.text;return n.a.createElement(de["a"],{href:a},t)});break;case"AC_GROUP":r=Me.t("Your system administrator has disabled Windows Action Center notifications for Slack.");break;case"CORRUPTION":r=Me.rt("Your system\u2019s notification settings seem to be corrupt. To fix the issue, <a>please contact us</a>.",null,function(e){var t=e.text;return n.a.createElement(de["a"],{href:"https://my.slack.com/help/requests/new"},t)});break;case"FULL_SCREEN":r=Me.t("If you currently have a full-screen application running, you\u2019ll have to close it to receive notifications.");break;case"AERO_GLASS_UNAVAILABLE":r=Me.rt("The Desktop Window Manager has been disabled because you\u2019re using a Windows Classic Theme. This means that Slack is delivering notifications through a secondary system, which might not look that great. To learn how to enable better notifications from Slack, <a>visit our Help Center</a>.",null,function(e){var t=e.text;return n.a.createElement(de["a"],{href:a},t)});break;case"GPU_COMPOSITION_UNAVAILABLE":r=Me.t("Since built-in notifications cannot be supported, you\u2019re seeing a version of notifications that can be displayed with your current graphics card driver.");break;case"QUIET_HOURS":r=Me.t("You\u2019ve turned on \u201cFocus Assist\u201d in your Windows settings, meaning you won\u2019t receive notifications from any application. If you turn this feature off, you\u2019ll receive notifications again.");break;case"FAILOVER_WITHIN_LAST_WEEK":r=Me.t("Some time in the past week, the Windows Action Center was unable to deliver your notifications. To ensure that you still receive notifications, Slack automatically switched to its built-in notifications.");break;default:xe.warn("Unable to match Desktop Notification Warning with id:",t);r=null}return r}}]);return t}(r["PureComponent"]);Fe.displayName="NotificationWarning";function Le(){var e={QUIET_TIME:n.a.createElement(Fe,{id:"QUIET_TIME"}),AC_USER:n.a.createElement(Fe,{id:"AC_USER"}),AC_GROUP:n.a.createElement(Fe,{id:"AC_GROUP"}),FULL_SCREEN:n.a.createElement(Fe,{id:"FULL_SCREEN"}),CORRUPTION:n.a.createElement(Fe,{id:"CORRUPTION"}),AERO_GLASS_UNAVAILABLE:n.a.createElement(Fe,{id:"AERO_GLASS_UNAVAILABLE"}),GPU_COMPOSITION_UNAVAILABLE:n.a.createElement(Fe,{id:"GPU_COMPOSITION_UNAVAILABLE"}),QUIET_HOURS:n.a.createElement(Fe,{id:"QUIET_HOURS"}),FAILOVER_WITHIN_LAST_WEEK:n.a.createElement(Fe,{id:"FAILOVER_WITHIN_LAST_WEEK"})};var t={UNKNOWN_HTML_STYLE:e.CORRUPTION,UNKNOWN_METHOD:e.CORRUPTION,ZERO_MAX_NOTIFICATIONS:e.CORRUPTION,ZERO_TIMEOUT:e.CORRUPTION};if(Object(oe["isWindows"])())return C()({},t,{AC_DISABLED_BY_GROUP_POLICY:e.AC_GROUP,AC_DISABLED_BY_MANIFEST:e.AC_USER,AC_DISABLED_FOR_APPLICATION:e.AC_GROUP,AC_DISABLED_FOR_USER:e.AC_GROUP,AERO_GLASS_UNAVAILABLE:e.AERO_GLASS_UNAVAILABLE,FAILOVER_WITHIN_LAST_WEEK:e.FAILOVER_WITHIN_LAST_WEEK,PRESENTATION_BUSY:e.FULL_SCREEN,PRESENTATION_D3D_FULL_SCREEN:e.FULL_SCREEN,PRESENTATION_MODE:e.FULL_SCREEN,PRESENTATION_QUIET_TIME:e.QUIET_TIME,QUIET_HOURS:e.QUIET_HOURS});return t}var Be=a(19);var Ue=a(11);var qe=a(139);var Ge=a(693);var We=a(50);var He=a(299);var Ve=new y["b"]("prefs");var Ke={channelId:s["b"].string.isRequired,last:s["b"].bool,changePrefsActiveSection:s["b"].func,channelName:s["b"].string,isMuted:s["b"].bool,isSuppressed:s["b"].bool,desktopSetting:s["b"].string,mobileSetting:s["b"].string,desktopDefault:s["b"].string,mobileDefault:s["b"].string,resetChannelNotificationOverrideAndCallApi:s["b"].func};var ze={last:false,changePrefsActiveSection:i["noop"],channelName:void 0,isMuted:false,isSuppressed:false,desktopSetting:void 0,mobileSetting:void 0,desktopDefault:void 0,mobileDefault:void 0,resetChannelNotificationOverrideAndCallApi:i["noop"]};var Ye=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.openChannelSettings=a.openChannelSettings.bind(a);a.resetToDefaults=a.resetToDefaults.bind(a);return a}p()(t,[{key:"openChannelSettings",value:function e(){var t=this.props,a=t.changePrefsActiveSection,r=t.channelId;a({sectionId:"channel",channelId:r})}},{key:"resetToDefaults",value:function e(){var t=this.props.channelId;this.props.resetChannelNotificationOverrideAndCallApi({channelId:t})}},{key:"renderReadableSetting",value:function e(){var t=this.props,a=t.desktopSetting,r=t.mobileSetting,i=t.desktopDefault,s=t.mobileDefault;if(!a&&!r)return null;if(a===r){if("everything"===a)return Ve.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Desktop and Mobile:</span> All new messages');if("mentions_dms"===a)return Ve.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Desktop and Mobile:</span> Direct messages, mentions & keywords');return Ve.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Desktop and Mobile:</span> Nothing')}var o=void 0;var l=void 0;a!==i&&(o="everything"===a?Ve.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Desktop:</span> All new messages'):"mentions_dms"===a?Ve.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Desktop:</span> Direct messages, mentions & keywords'):Ve.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Desktop:</span> Nothing'));r!==s&&(l="everything"===r?Ve.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Mobile:</span> All new messages'):"mentions_dms"===r?Ve.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Mobile:</span> Direct messages, mentions & keywords'):Ve.rt('<span className="p-prefs_modal__channel_overrides_row__platform">Mobile:</span> Nothing'));if(o&&l)return n.a.createElement(n.a.Fragment,null,o,n.a.createElement("br",null),l);return o||l}},{key:"render",value:function e(){var t=this.props,a=t.isMuted,r=t.isSuppressed,i=t.last,s=t.channelName;var o=_()("p-prefs_modal__channel_overrides_row",{"p-prefs_modal__channel_overrides_row--last":i});var l=_()("p-prefs_modal__channel_overrides_row__name",{"p-prefs_modal__channel_overrides_row__name--muted":a});var c=Ve.t("Reset {channelName} to default settings",{channelName:Object(y["o"])(s)});return n.a.createElement("div",{className:o,role:"listitem"},n.a.createElement(Pe["c"],{className:"p-prefs_modal__channel_overrides_row__details",onClick:this.openChannelSettings},n.a.createElement("div",{className:l},n.a.createElement(qe["a"],{channelId:this.props.channelId,iconProps:{inherit:true,align:"baseline"}})," ",a?n.a.createElement(Se["b"],{type:"bell-slash",size:"inherit"}):null),a?n.a.createElement("div",{className:"p-prefs_modal__channel_overrides_row__setting"},Ve.t("Muted")):n.a.createElement("div",{className:"p-prefs_modal__channel_overrides_row__setting"},this.renderReadableSetting()),r?n.a.createElement("div",{className:"p-prefs_modal__channel_overrides_row__setting"},Ve.rt('No notifications for <span className="p-prefs_modal__channel_overrides_row__keyword">{atChannel}</span> and <span className="p-prefs_modal__channel_overrides_row__keyword">{atHere}</span>',{atChannel:"@"+Object(He["b"])({ms_name:"channel"}),atHere:"@"+Object(He["b"])({ms_name:"here"})})):null),n.a.createElement("div",{className:"p-prefs_modal__channel_overrides_row__reset"},n.a.createElement(We["c"],{tip:c},n.a.createElement("span",null,n.a.createElement(Ge["a"],{className:"p-prefs_modal__channel_overrides_row__reset_button",icon:"times-circle",onClick:this.resetToDefaults,"aria-label":c})))))}}]);return t}(r["Component"]);Ye.displayName="ChannelOverridesRow";Ye.defaultProps=ze;function Qe(e,t){var a=t.channelId;var r=Object(Be["d"])(e,a);return{channelName:Object(Ue["getDisplayNameForChannel"])(e,r),isMuted:Object(W["c"])(e,a,"muted"),isSuppressed:Object(W["c"])(e,a,"suppress_at_channel"),desktopSetting:Object(W["c"])(e,a,"desktop"),mobileSetting:Object(W["c"])(e,a,"mobile"),desktopDefault:Object($["j"])(e,a),mobileDefault:Object($["k"])(e,a)}}function Je(e){return{resetChannelNotificationOverrideAndCallApi:function t(){return e(V["a"].apply(void 0,arguments))}}}var Ze=Object(b["connect"])(Qe,Je)(Ye);var Xe=a(74);var $e=a.n(Xe);var et=new y["b"]("prefs");var tt="idle";var at=function e(){if("Windows"===$e.a.osname&&"10"===$e.a.osversion){if(!Object(i["isEmpty"])(Object(se["getEnvironmentState"])())&&!Object(se["getEnvironmentState"])().isGpuCompositionAvailable)return null;return"winrt"}return"html"};var rt={corner:"bottom_right",display:"same_as_app"};var nt=[{value:"html",label:function e(){return et.t("Slack\u2019s built-in notifications")},enabled:Object(i["isEmpty"])(Object(se["getEnvironmentState"])())?"Windows"===$e.a.osname:Object(se["getEnvironmentState"])().isGpuCompositionAvailable},{value:"winrt",label:function e(){return et.t("Windows Action Center")},enabled:"Windows"===$e.a.osname&&"10"===$e.a.osversion},{value:"window",label:function e(){return et.t("Windows Action Center (abbreviated)")},enabled:"Windows"===$e.a.osname&&"10"===$e.a.osversion},{value:"window",label:function e(){return et.t("Windows Action Center")},enabled:"Windows"===$e.a.osname&&("8"===$e.a.osversion||"8.1"===$e.a.osversion)},{value:"window",label:function e(){return et.t("Windows\u2019 notifications")},enabled:"Windows"===$e.a.osname&&"7"===$e.a.osversion}];var it=[{value:"bottom_right",label:function e(){return et.t("bottom-right")}},{value:"top_right",label:function e(){return et.t("top-right")}},{value:"top_left",label:function e(){return et.t("top-left")}},{value:"bottom_left",label:function e(){return et.t("bottom-left")}}];var st=[{value:"same_as_app",label:function e(){return et.t("same display as app")}},{value:"primary",label:function e(){return et.t("primary display")}}];var ot=[];var lt=new y["b"]("prefs");var ct=1e3;var ut=100;var dt="instant";var pt="2";var ht=["0","1","2","5","10","15","20","30"];var vt=["none","instant","hourly"];var mt={clogger:s["b"].object.isRequired,logger:s["b"].object.isRequired,fetchHelpCenterTrackingToken:s["b"].func.isRequired,helpCenterTrackingToken:s["b"].string.isRequired,notificationsBehaviorGlobalDesktop:s["b"].string.isRequired,notificationsBehaviorGlobalMobile:s["b"].string.isRequired,threadsEverything:s["b"].bool.isRequired,channelsWithOverrides:s["b"].arrayOf(s["b"].string).isRequired,globalKeywords:s["b"].string,teamName:s["b"].string.isRequired,memberName:s["b"].string.isRequired,noTextInNotifications:s["b"].bool.isRequired,muteSounds:s["b"].bool.isRequired,newMsgSnd:s["b"].string.isRequired,allNotificationSounds:s["b"].objectOf(s["b"].shape({display:s["b"].func.isRequired,url:s["b"].oneOfType([s["b"].object,s["b"].string]).isRequired})).isRequired,pushIdleWait:s["b"].oneOf(ht).isRequired,globalNotificationsDisabled:s["b"].bool.isRequired,globalDesktopNotificationsDisabled:s["b"].bool.isRequired,globalMobileNotificationsDisabled:s["b"].bool.isRequired,emailAlerts:s["b"].oneOf(vt).isRequired,macSSBBullet:s["b"].bool,macSSBBounce:s["b"].oneOf(["","short","long"]),setNotificationsGlobalPrefByApi:s["b"].func.isRequired,setUserPrefByApi:s["b"].func.isRequired,sendTestNotification:s["b"].func.isRequired,changePrefsActiveSection:s["b"].func,promptForPermission:s["b"].func.isRequired,featureGranularDnd:s["b"].bool,hasHipaaCompliance:s["b"].bool};var ft={globalKeywords:"",macSSBBullet:true,macSSBBounce:"",changePrefsActiveSection:i["noop"],featureGranularDnd:false,hasHipaaCompliance:false};var bt=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(i["bindAll"])(a,["onChangeThreadsEverything","onChangeNotificationsBehaviorGlobalDesktop","onChangeNotificationsBehaviorGlobalMobile","onChangeSyncGlobalMobileDesktop","onChangeGlobalKeywords","onChangeNoTextInNotifications","onChangePlaySounds","onChangeMuteSounds","onChangeNewMsgSnd","onChangeWindowFlashBehavior","onChangeWindowFlashBehaviorOnlyInactive","onChangeNotificationMethod","onChangeNotifyPositionCorner","onChangeNotifyPositionDisplay","onChangeEmailAlerts","onChangeEmailAlertsDelay","onChangePushIdleWait","onChangeMacDockBadge","onChangeMacDockBounce","onChangeMacDockBounceDuration","onClickShowExampleNotification","onClickPromptForPermission","onClickJumpToOverrides"]);var r=a.props,s=r.notificationsBehaviorGlobalDesktop,o=r.notificationsBehaviorGlobalMobile,l=r.globalKeywords,c=r.newMsgSnd,d=r.emailAlerts,p=r.macSSBBounce;var h=Object(se["hasPreference"])("notificationMethod")&&Object(se["getPreference"])("notificationMethod")||at();var m=Object(Z["b"])({csv:l,max:ut});a.state={syncGlobalMobileDesktop:s===o,globalKeywords:l.replace(/,/g,", "),globalKeywordsMaxReached:m.maxViolation,lastNewMsgSnd:"none"===c?ne["a"]:c,lastEmailAlertsDelay:"none"===d?dt:d,macSSBBounceDuration:""===p?"short":p,promptForPermissionActive:false,windowFlashBehavior:Object(se["hasPreference"])("windowFlashBehavior")&&Object(se["getPreference"])("windowFlashBehavior")||tt,initialNotificationMethod:h,notificationMethod:h,notifyPosition:Object(se["hasPreference"])("notifyPosition")&&Object(se["getPreference"])("notifyPosition")||rt};a.zdLocale=Object(Q["a"])();a.setGlobalKeywordsByApi=Object(i["debounce"])(a.setGlobalKeywordsByApi,ct);a.overridesListRef=n.a.createRef();return a}p()(t,[{key:"componentDidMount",value:function e(){this.fetchHelpCenterTrackingToken();Object(ie["a"])().then(function(e){var t=Le();ot=e.filter(function(e){return!!t[e]}).map(function(e){return t[e]})})}},{key:"onChangeNotificationsBehaviorGlobalDesktop",value:function e(t){var a=this.props.logger;var r=t.target.value;a.action("Changed notificationsBehaviorGlobalDesktop: "+r);this.setGlobalDesktopNotificationByApi(r,this.state.syncGlobalMobileDesktop);this.clogDesktopNotificationsChange(r)}},{key:"onChangeNotificationsBehaviorGlobalMobile",value:function e(t){var a=this.props.logger;var r=t.value;a.action("Changed notificationsBehaviorGlobalMobile: "+r);this.props.setNotificationsGlobalPrefByApi({name:"global_mobile",value:r,sync:false,reason:"prefs_dialog_open"})}},{key:"onChangeThreadsEverything",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed threads_everything: "+r);this.props.setNotificationsGlobalPrefByApi({name:"threads_everything",value:r})}},{key:"onChangeSyncGlobalMobileDesktop",value:function e(t){var a=!t.target.checked;var r=this.props.notificationsBehaviorGlobalDesktop;this.setState(function(){return{syncGlobalMobileDesktop:a}});a&&this.setGlobalDesktopNotificationByApi(r,a)}},{key:"onChangeGlobalKeywords",value:function e(t){var a=Object(Z["b"])({csv:t,max:ut});this.setState(function(){return{globalKeywords:t,globalKeywordsMaxReached:a.maxViolation}});if(a.maxViolation)return;this.setGlobalKeywordsByApi(t.replace(/, /g,","))}},{key:"onChangeNoTextInNotifications",value:function e(t){var a=this.props.logger;var r=!t.target.checked;a.action("Changed no_text_in_notifications: "+r);this.props.setNotificationsGlobalPrefByApi({name:"no_text_in_notifications",value:r})}},{key:"onChangePlaySounds",value:function e(t){var a=this.props.logger;var r=t.target.checked?this.state.lastNewMsgSnd:"none";a.action("Changed desktop_sound: "+r);this.props.setNotificationsGlobalPrefByApi({name:"desktop_sound",value:r})}},{key:"onChangeMuteSounds",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed mute_sounds: "+r);this.props.setUserPrefByApi({pref:"mute_sounds",value:r})}},{key:"onChangeNewMsgSnd",value:function e(t){var a=this.props.logger;var r=t.target.value;a.action("Changed desktop_sound: "+r);Object(te["a"])()?Object(ae["a"])(this.props.allNotificationSounds[r].url):Object(re["c"])(r,{ignore_mute:true});this.setState(function(){return{lastNewMsgSnd:r}});this.props.setNotificationsGlobalPrefByApi({name:"desktop_sound",value:r})}},{key:"onChangeWindowFlashBehavior",value:function e(t){var a=this.props.logger;var r=t.target.checked?"always":"never";a.action("Changed windowFlashBehavior: "+r);Object(se["setPreference"])({name:"windowFlashBehavior",value:r});this.setState(function(){return{windowFlashBehavior:r}})}},{key:"onChangeWindowFlashBehaviorOnlyInactive",value:function e(t){var a=this.props.logger;var r=t.target.checked?"idle":"always";a.action("Changed windowFlashBehavior: "+r);Object(se["setPreference"])({name:"windowFlashBehavior",value:r});this.setState(function(){return{windowFlashBehavior:r}})}},{key:"onChangeNotificationMethod",value:function e(t){var a=this.props.logger;var r=t.value;a.action("Changed notificationMethod: "+r);Object(se["setPreference"])({name:"notificationMethod",value:r});this.setState(function(){return{notificationMethod:r}})}},{key:"onChangeNotifyPositionCorner",value:function e(t){var a=this.props.logger;var r=t.value;a.action("Changed notifyPosition.corner: "+r);var n={corner:r,display:this.state.notifyPosition.display};Object(se["setPreference"])({name:"notifyPosition",value:n});this.setState(function(){return{notifyPosition:n}})}},{key:"onChangeNotifyPositionDisplay",value:function e(t){var a=this.props.logger;var r=t.value;a.action("Changed notifyPosition.display: "+r);var n={corner:this.state.notifyPosition.corner,display:r};Object(se["setPreference"])({name:"notifyPosition",value:n});this.setState(function(){return{notifyPosition:n}})}},{key:"onChangeEmailAlerts",value:function e(t){var a=this.props.logger;var r=t.target.checked?this.state.lastEmailAlertsDelay:"none";a.action("Changed emailAlerts: "+r);this.props.setUserPrefByApi({pref:"email_alerts",value:r})}},{key:"onChangeEmailAlertsDelay",value:function e(t){var a=this.props.logger;var r=t.target.value;a.action("Changed emailAlerts: "+r);this.setState(function(){return{lastEmailAlertsDelay:r}});this.props.setUserPrefByApi({pref:"email_alerts",value:r})}},{key:"onChangePushIdleWait",value:function e(t){var a=this.props.logger;var r=t.value;a.action("Changed push_idle_wait: "+r);this.props.setNotificationsGlobalPrefByApi({name:"push_idle_wait",value:r})}},{key:"onChangeMacDockBadge",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed mac_ssb_bullet: "+r);this.props.setUserPrefByApi({pref:"mac_ssb_bullet",value:r})}},{key:"onChangeMacDockBounce",value:function e(t){var a=this.props.logger;var r=this.state.macSSBBounceDuration;var n=t.target.checked?r:"";a.action("Changed mac_ssb_bounce: "+n);this.props.setUserPrefByApi({pref:"mac_ssb_bounce",value:n})}},{key:"onChangeMacDockBounceDuration",value:function e(t){var a=this.props.logger;var r=t.target.checked?"short":"long";a.action("Changed mac_ssb_bounce: "+r);this.setState(function(){return{macSSBBounceDuration:r}});this.props.setUserPrefByApi({pref:"mac_ssb_bounce",value:r})}},{key:"onClickShowExampleNotification",value:function e(){this.props.sendTestNotification({text:lt.t("What do you know, it works?")})}},{key:"onClickPromptForPermission",value:function e(){var t=this;var a=this.props.logger;this.setState(function(){return{promptForPermissionActive:true}});this.props.promptForPermission({callback:function e(r,n){t.setState(function(){return{promptForPermissionActive:false}});if(r&&"granted"===n){a.action("Enabled desktop notifications");t.props.setUserPrefByApi({pref:"growls_enabled",value:true})}else{a.action("Disabled desktop notifications");t.props.setUserPrefByApi({pref:"growls_enabled",value:false})}}})}},{key:"onClickJumpToOverrides",value:function e(){var t=this.overridesListRef.current;t&&t.scrollIntoView({behavior:"smooth"})}},{key:"setGlobalKeywordsByApi",value:function e(t){var a=this.props.logger;a.action("Changed global_keywords");this.props.setNotificationsGlobalPrefByApi({name:"global_keywords",value:t})}},{key:"setGlobalDesktopNotificationByApi",value:function e(t,a){this.props.setNotificationsGlobalPrefByApi({name:"global_desktop",value:t,sync:a,reason:"prefs_dialog_open"})}},{key:"clogDesktopNotificationsChange",value:function e(t){var a=this.props.clogger;var r="never";"everything"===t?r="all":"mentions_dms"===t&&(r="mentions");a.track("PREF_USER_CLIENT_UPDATE",{updated_user_client_prefs:{desktop_notifications:r}})}},{key:"fetchHelpCenterTrackingToken",value:function e(){this.props.helpCenterTrackingToken||this.props.fetchHelpCenterTrackingToken()}},{key:"renderNotificationExample",value:function e(t){var a=this.props,r=a.teamName,i=a.memberName;var s=_()("p-prefs_modal__notification_example",{"p-prefs_modal__notification_example--mac":Object(oe["isMac"])(),"p-prefs_modal__notification_example--windows":Object(oe["isWindows"])(),"p-prefs_modal__notification_example--linux":Object(oe["isLinux"])(),"p-prefs_modal__notification_example--none":"nothing"===t});var o=r;Object(oe["isMac"])()||(o=lt.t("from {team_name}",{team_name:r}));var l=void 0;"nothing"===t&&(l=lt.t("Hi!"));"everything"===t&&(l=lt.t("Good morning everyone!"));"mentions_dms"===t&&(l=n.a.createElement("span",null,lt.rt("{wave_emoji} Hi <strong>@{username}</strong>",{wave_emoji:n.a.createElement(je["b"],{text:":wave:",emojiSize:je["a"].SMALL}),username:i})));return n.a.createElement("div",{className:s},n.a.createElement("div",{className:"p-prefs_modal__notification_example__slack_app_icon"}),n.a.createElement("div",{className:"bold overflow_ellipsis"},o),l)}},{key:"renderNotificationsPrompt",value:function e(){var t=this.state.promptForPermissionActive;var a=n.a.createElement("h3",{className:"margin_bottom_50 inline_block"},lt.t("Desktop notifications are currently disabled"));if(Object($["r"])())return n.a.createElement(r["Fragment"],null,a,t?n.a.createElement(Ie["a"],{level:"info",icon:"info-circle",className:"margin_bottom_100"},lt.rt("Click <strong>Allow</strong> in your browser's pop-up to enable notifications.")):n.a.createElement(r["Fragment"],null,n.a.createElement("p",null,lt.t("We strongly recommend enabling notifications so that you'll know when important activity happens in your Slack workspace.")),n.a.createElement(Pe["d"],{onClick:this.onClickPromptForPermission,className:"margin_bottom_100"},n.a.createElement(Se["b"],{type:"bell",className:"margin_right_50"}),lt.t("Enable desktop notifications"))));return n.a.createElement(r["Fragment"],null,a,n.a.createElement(Ie["a"],{level:"error",icon:"warning",className:"margin_bottom_100"},lt.t("You've disallowed notifications in your browser. You'll need to open your browser preferences to change that.")))}},{key:"renderGlobalPrefs",value:function e(){var t=this;var a=this.props,s=a.helpCenterTrackingToken,o=a.notificationsBehaviorGlobalDesktop,l=a.notificationsBehaviorGlobalMobile,c=a.threadsEverything,u=a.globalNotificationsDisabled,d=a.channelsWithOverrides;var p=this.state.syncGlobalMobileDesktop;var h=Object(J["a"])("https://get.slack.help/hc/"+this.zdLocale+"/articles/201355156-Desktop-notifications",s);var v="notifications";var m=[{label:lt.t("All new messages"),value:"everything"},{label:lt.t("Direct messages, mentions and keywords"),value:"mentions_dms"},{label:lt.t("Nothing"),value:"nothing"}];var f=Object(i["find"])(m,["value",l]);var b=d.length;var g=b>0;return n.a.createElement(r["Fragment"],null,n.a.createElement(de["a"],{href:h,target:"_blank",className:"float_right sk_light_gray"},lt.t("About notifications")," ",n.a.createElement(Se["b"],{type:"question_circle"})),Object($["f"])()?n.a.createElement(r["Fragment"],null,n.a.createElement("h3",{className:"margin_bottom_50 inline_block"},lt.t("Notify me about\u2026")),n.a.createElement(Ae["a"],{className:"p-prefs_modal__radiogroup"},n.a.createElement(Ce,{text:lt.t("All new messages"),description:lt.t("You'll be notified for every new message"),selected:"everything"===o},n.a.createElement(Te["a"],{name:v,value:"everything",checked:"everything"===o,onChange:this.onChangeNotificationsBehaviorGlobalDesktop}),n.a.createElement("div",{className:"p-prefs_modal__radio_decorator"},this.renderNotificationExample("everything"))),n.a.createElement(Ce,{text:lt.t("Direct messages, mentions & keywords"),description:lt.t("You'll be notified when a teammate mentions you, sends you a direct message, or uses one of your keywords"),selected:"mentions_dms"===o},n.a.createElement(Te["a"],{name:v,value:"mentions_dms",checked:"mentions_dms"===o,onChange:this.onChangeNotificationsBehaviorGlobalDesktop}),n.a.createElement("div",{className:"p-prefs_modal__radio_decorator"},this.renderNotificationExample("mentions_dms"))),n.a.createElement(Ce,{text:lt.t("Nothing"),description:lt.rt("You won't receive notifications from Slack. Note: you will still see badges ({mentionBadge}) within Slack",{mentionBadge:n.a.createElement(we["a"],{count:1,className:"margin_left_0"})}),selected:"nothing"===o},n.a.createElement(Te["a"],{name:v,value:"nothing",checked:"nothing"===o,onChange:this.onChangeNotificationsBehaviorGlobalDesktop}),n.a.createElement("div",{className:"p-prefs_modal__radio_decorator"},this.renderNotificationExample("nothing"))))):this.renderNotificationsPrompt(),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:lt.t("Notify me about replies to threads I'm following"),isDisabled:u,id:"prefs_threads_everything"},n.a.createElement(ue["a"],{onChange:this.onChangeThreadsEverything,name:"threads_everything",checked:c&&!u,disabled:u})),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:lt.t("Use different settings for my mobile devices")},n.a.createElement(ue["a"],{onChange:this.onChangeSyncGlobalMobileDesktop,name:"sync_global_mobile_desktop",checked:!p})),p?null:n.a.createElement(pe["a"],{selectId:"keyboard",selectedOption:f,onOptionSelected:this.onChangeNotificationsBehaviorGlobalMobile,options:m,width:345}),g?n.a.createElement("p",{className:"margin_top_100"},lt.rt("You've also set notification preferences for <a>{allNotificationOverridesCount, plural, =1 {# channel} other {# channels}}</a>.",{allNotificationOverridesCount:b},function(e){var a=e.text;return n.a.createElement(Re["a"],{onClick:t.onClickJumpToOverrides},a)})):null)}},{key:"renderKeywords",value:function e(){var t=this.state,a=t.globalKeywords,i=t.globalKeywordsMaxReached;var s="global_keywords";return n.a.createElement(r["Fragment"],null,n.a.createElement("h3",{className:"margin_top_200 margin_bottom_50"},lt.t("My keywords")),n.a.createElement("p",null,lt.rt("Show a badge ({mentionBadge}) in my channel list when someone uses one of my keywords:",{mentionBadge:n.a.createElement(we["a"],{count:1,className:"margin_left_0"})})),n.a.createElement(Ne["a"],{name:s,id:s,value:a,hintText:lt.t("Use commas to separate each keyword. Keywords are not case sensitive."),errorLevel:"error",errorText:i?lt.t("A maximum of {MAX_KEYWORDS_COUNT} keywords are allowed.",{MAX_KEYWORDS_COUNT:ut,fallbackHash:"92c404bc05c04cc6c63491f463f0ec39688f741a",fallbackHashNs:"client"}):"",onChange:this.onChangeGlobalKeywords}))}},{key:"renderNotificationWarnings",value:function e(){if(0===ot.length)return null;return n.a.createElement(Ie["a"],{level:"warning",type:"boxed",icon:"warning",heading:lt.t("Looks like there might be an issue with your notifications"),className:"margin_bottom_100"},n.a.createElement("p",{className:"margin_bottom_50"},lt.t("The following conditions might be preventing them from appearing how they should:")),n.a.createElement("ul",{className:"margin_bottom_50"},ot.map(function(e,t){return n.a.createElement("li",{key:"warning_"+t},e)})))}},{key:"renderSoundPrefs",value:function e(){var t=this;var a=this.props,s=a.noTextInNotifications,o=a.muteSounds,l=a.allNotificationSounds,c=a.newMsgSnd,u=a.globalDesktopNotificationsDisabled;var d=Object(i["map"])(l,function(e,a){return n.a.createElement(ce["a"],{text:e.display(),type:"inline",cursor:"pointer",className:"p-prefs_modal__sound_label",key:a},n.a.createElement(Te["a"],{name:"desktop_sound",value:a,checked:a===c,onChange:t.onChangeNewMsgSnd}))});var p=n.a.createElement(Ae["a"],{className:"p-prefs_modal__inset_radiogroup nudge_left_3"},d);return n.a.createElement(r["Fragment"],null,n.a.createElement("h3",{className:"margin_top_200 margin_bottom_50"},lt.t("Sound & appearance")),Object(oe["isSSBAndAtLeastVersion"])("3.3")?this.renderNotificationWarnings():null,n.a.createElement("p",null,lt.t("Choose how notifications look, sound, and behave.")," ",Object($["f"])()?n.a.createElement(Re["a"],{onClick:this.onClickShowExampleNotification},lt.t("Show me an example notification.")):null),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:lt.rt('<strong>Include a preview of the message in each notification</strong> <span class="sk_light_gray">(disable this for extra privacy)</span>'),isDisabled:u},n.a.createElement(ue["a"],{onChange:this.onChangeNoTextInNotifications,name:"no_text_in_notifications",checked:!s,disabled:u})),n.a.createElement("div",null,n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:lt.t("Play a sound when receiving a notification"),isDisabled:o||u||Object($["r"])(),className:"inline_flex"},n.a.createElement(ue["a"],{onChange:this.onChangePlaySounds,name:"play_sound",checked:"none"!==c,disabled:o||u||Object($["r"])()})),"none"===c||o||u||Object($["r"])()?null:p),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:lt.t("Mute all sounds from Slack")},n.a.createElement(ue["a"],{onChange:this.onChangeMuteSounds,name:"mute_sounds",checked:o})))}},{key:"renderMobileEmailPrefs",value:function e(){var t=this.props,a=t.pushIdleWait,s=t.emailAlerts,o=t.globalMobileNotificationsDisabled,l=t.hasHipaaCompliance;var c="email_alerts_delay";var u=Object(i["map"])(ht,function(e){return{label:"0"===e?lt.t("as soon as I'm inactive"):lt.t("after I've been inactive for {value, plural, =1 {# minute} other {# minutes}}",{value:e}),value:e}});var d=Object(i["find"])(u,["value",a])||Object(i["find"])(u,["value",pt]);var p=n.a.createElement(r["Fragment"],null,n.a.createElement("h3",{className:"margin_top_200 margin_bottom_50"},lt.t("When I'm not active on desktop ...")),n.a.createElement(ce["a"],{text:lt.t("Send notifications to my mobile devices:"),className:"margin_bottom_100",isDisabled:o},n.a.createElement(pe["a"],{selectId:"push_idle_wait",selectedOption:d,onOptionSelected:this.onChangePushIdleWait,options:u,width:300,isDisabled:o})));var h=l?null:n.a.createElement(r["Fragment"],null,n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:lt.t("Send me email notifications for mentions and direct messages")},n.a.createElement(ue["a"],{onChange:this.onChangeEmailAlerts,name:"email_alerts",checked:"none"!==s})),"none"===s?null:n.a.createElement(Ae["a"],{className:"p-prefs_modal__inset_radiogroup nudge_left_3"},n.a.createElement(ce["a"],{text:lt.t("once every 15 minutes"),type:"inline",cursor:"pointer"},n.a.createElement(Te["a"],{name:c,value:"instant",checked:"instant"===s,onChange:this.onChangeEmailAlertsDelay})),n.a.createElement(ce["a"],{text:lt.t("once an hour"),type:"inline",cursor:"pointer"},n.a.createElement(Te["a"],{name:c,value:"hourly",checked:"hourly"===s,onChange:this.onChangeEmailAlertsDelay}))));return n.a.createElement(r["Fragment"],null,p,h)}},{key:"renderMacAppearancePrefs",value:function e(){var t=this.props,a=t.macSSBBullet,i=t.macSSBBounce,s=t.globalDesktopNotificationsDisabled;var o=this.state.macSSBBounceDuration;return n.a.createElement(r["Fragment"],null,n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:lt.rt("<strong>Show a badge {imgMacDockBadge} on Slack's icon to indicate new activity</strong>",{imgMacDockBadge:n.a.createElement("img",{src:cdn_url+"/9135/img/prefs_mac_dock_badge@2x.png",alt:lt.t("A dock badge on Mac"),className:"p-prefs_modal__img_mac_dock_badge"})})},n.a.createElement(ue["a"],{onChange:this.onChangeMacDockBadge,name:"mac_ssb_bullet",checked:a})),n.a.createElement("div",{className:"inline_flex margin_right_150"},n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:lt.t("Bounce Slack's icon when receiving a notification"),isDisabled:s},n.a.createElement(ue["a"],{onChange:this.onChangeMacDockBounce,name:"mac_ssb_bounce",checked:""!==i,disabled:s}))),n.a.createElement("div",{className:"inline_flex"},n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:lt.rt('<span className="sk_light_gray normal">Only bounce it once</span>'),isDisabled:""===i||s},n.a.createElement(ue["a"],{onChange:this.onChangeMacDockBounceDuration,name:"mac_ssb_bounce_short",checked:"short"===o,disabled:""===i||s}))))}},{key:"renderWindowsAppearancePrefs",value:function e(){var t=this.state,a=t.windowFlashBehavior,s=t.initialNotificationMethod,o=t.notificationMethod,l=t.notifyPosition;var c=n.a.createElement(r["Fragment"],null,n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:lt.t("Flash window when receiving a notification")},n.a.createElement(ue["a"],{onChange:this.onChangeWindowFlashBehavior,name:"winssb_window_flash_behavior",checked:"never"!==a})),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",className:"margin_left_150",text:lt.t("Only flash window when I'm not actively using my computer"),isDisabled:"never"===a},n.a.createElement(ue["a"],{onChange:this.onChangeWindowFlashBehaviorOnlyInactive,name:"winssb_window_flash_behavior",checked:"idle"===a,disabled:"never"===a})));var u=Object(i["map"])(Object(i["filter"])(nt,{enabled:true}),function(e){return{label:e.label(),value:e.value}});var d=Object(i["find"])(u,["value",o]);var p=s!==o?n.a.createElement("p",{className:"margin_top_50"},lt.t("You'll need to restart Slack for this to take effect.")):null;var h=n.a.createElement(r["Fragment"],null,n.a.createElement(ce["a"],{text:lt.t("Deliver notifications via..."),className:"margin_top_100"},n.a.createElement(pe["a"],{selectId:"winssb_notification_method",selectedOption:d,onOptionSelected:this.onChangeNotificationMethod,options:u,width:400})),p);var v=null;if("html"===o){var m=Object(i["map"])(it,function(e){return{label:e.label(),value:e.value}});var f=Object(i["find"])(m,["value",l.corner]);var b=Object(i["map"])(st,function(e){return{label:e.label(),value:e.value}});var g=Object(i["find"])(b,["value",l.display]);v=n.a.createElement(r["Fragment"],null,n.a.createElement(ce["a"],{text:lt.t("Notification position"),className:"inline_block margin_right_100 margin_top_100"},n.a.createElement(pe["a"],{selectId:"winssb_notify_corner",selectedOption:f,onOptionSelected:this.onChangeNotifyPositionCorner,options:m,width:300})),n.a.createElement(ce["a"],{text:lt.t("Display"),className:"inline_block margin_top_100"},n.a.createElement(pe["a"],{selectId:"winssb_notify_display",selectedOption:g,onOptionSelected:this.onChangeNotifyPositionDisplay,options:b,width:300})))}return n.a.createElement(r["Fragment"],null,c,h,v)}},{key:"renderChannelOverridesList",value:function e(){var t=this.props,a=t.channelsWithOverrides,s=t.changePrefsActiveSection;if(!a||!a.length)return null;var o=Object(i["last"])(a);var l=a.map(function(e){return n.a.createElement(Ze,{channelId:e,key:e,last:e===o,changePrefsActiveSection:s})});return n.a.createElement(r["Fragment"],null,n.a.createElement("h3",{className:"margin_top_200 margin_bottom_50",ref:this.overridesListRef},lt.t("Channel-specific notifications")),n.a.createElement("div",{role:"list","aria-label":lt.t("Channel-specific notifications")},l))}},{key:"renderDndPreferences",value:function e(){var t=this.props,a=t.featureGranularDnd,r=t.changePrefsActiveSection;if(a)return n.a.createElement("div",{id:"prefs_dnd"},n.a.createElement("h3",{className:"margin_top_200 margin_bottom_50"},lt.t("Notification schedule")),n.a.createElement(le["a"],{changePrefsActiveSection:r}));return n.a.createElement("div",{id:"prefs_dnd"},n.a.createElement("h3",{className:"margin_top_200 margin_bottom_50"},lt.t("Do Not Disturb")),n.a.createElement(Oe,{changePrefsActiveSection:r}))}},{key:"render",value:function e(){return n.a.createElement("section",null,n.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},lt.t("Notifications")),this.renderGlobalPrefs(),this.renderKeywords(),this.renderDndPreferences(),this.renderSoundPrefs(),se["isDesktop"]&&Object(oe["isMac"])()?this.renderMacAppearancePrefs():null,se["isDesktop"]&&Object(oe["isWindows"])()?this.renderWindowsAppearancePrefs():null,this.renderMobileEmailPrefs(),this.renderChannelOverridesList())}}]);return t}(r["Component"]);bt.displayName="BasePrefsSectionNotifications";bt.defaultProps=ft;var gt=function e(t){var a=Object(K["b"])(t);var r=Object(W["d"])(t,"push_idle_wait");return{featureGranularDnd:Object(T["isFeatureEnabled"])(t,"feature_granular_dnd"),clogger:Object(U["a"])({state:t}),logger:Object(O["a"])({state:t,label:"PREFS"}),notificationsBehaviorGlobalDesktop:Object(W["d"])(t,"global_desktop"),notificationsBehaviorGlobalMobile:Object(W["d"])(t,"global_mobile"),helpCenterTrackingToken:Object(Y["getHelpCenterTrackingToken"])(t),threadsEverything:Object(W["d"])(t,"threads_everything"),globalKeywords:Object(W["d"])(t,"global_keywords"),teamName:Object(D["getTeamDisplayName"])(Object(M["d"])(t)),memberName:Object(z["getPrefCompliantMemberName"])(t,a),noTextInNotifications:Object(W["d"])(t,"no_text_in_notifications"),muteSounds:Object(q["f"])(t,"mute_sounds"),newMsgSnd:Object(W["d"])(t,"desktop_sound"),allNotificationSounds:Object(ne["b"])(),pushIdleWait:"undefined"===typeof r||null===r?pt:r.toString(),globalNotificationsDisabled:Object($["d"])(t),globalDesktopNotificationsDisabled:Object($["b"])(t),globalMobileNotificationsDisabled:Object($["c"])(t),emailAlerts:Object(q["f"])(t,"email_alerts"),macSSBBullet:Object(q["f"])(t,"mac_ssb_bullet"),macSSBBounce:Object(q["f"])(t,"mac_ssb_bounce"),channelsWithOverrides:Object($["i"])(t),hasHipaaCompliance:Object(G["a"])(t,"has_hipaa_compliance")}};var _t={fetchHelpCenterTrackingToken:X["b"],setNotificationsGlobalPrefByApi:V["c"],setUserPrefByApi:H["c"],sendTestNotification:ee["c"],promptForPermission:ee["b"]};var yt=Object(b["connect"])(gt,_t)(bt);var Ot=a(249);var kt=a(4273);var Et=a(4198);var Ct=new y["b"]("prefs");var jt={keyboard:s["b"].string,tz:s["b"].string.isRequired,locale:s["b"].string.isRequired,teamId:s["b"].string.isRequired,setUserPrefByApi:s["b"].func.isRequired,featureLocaleEnGb:s["b"].bool,featureLocalePtBr:s["b"].bool,featureLocaleEsLa:s["b"].bool,featureLocalizationPhaseTwo:s["b"].bool,setShowOpenTransition:s["b"].func.isRequired,openChangeLanguageDialog:s["b"].func.isRequired,setLocaleForTeam:s["b"].func.isRequired,logger:s["b"].object.isRequired};var wt={featureLocaleEnGb:false,featureLocalePtBr:false,featureLocaleEsLa:false,featureLocalizationPhaseTwo:false,keyboard:null};var St=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(i["bindAll"])(a,["onChangeLocale","onChangeTZ","onChangeKeyboard","renderLocalePref","renderTZPref","maybeRenderKeyboardPref"]);return a}p()(t,[{key:"onChangeLocale",value:function e(t){var a=this.props,r=a.teamId,n=a.logger;var i=t.value;n.action("Changed locale: "+i);if(Object(te["a"])()){this.props.setShowOpenTransition(false);this.props.setLocaleForTeam({locale:i,teamId:r})}else this.props.openChangeLanguageDialog({locale:i})}},{key:"onChangeTZ",value:function e(t){var a=this.props.logger;var r=t.value;a.action("Changed tz: "+r);this.props.setUserPrefByApi({pref:"tz",value:r})}},{key:"onChangeKeyboard",value:function e(t){var a=this.props.logger;var r=t.value;a.action("Changed keyboard: "+r);this.props.setUserPrefByApi({pref:"keyboard",value:r})}},{key:"maybeRenderKeyboardPref",value:function e(){if(Object(se["canAutoGetKeyboard"])())return null;var t=this.props,a=t.keyboard,r=t.featureLocaleEnGb,s=t.featureLocalePtBr;var o=Object(i["map"])(Object(Ot["f"])({featureLocaleEnGb:r,featureLocalePtBr:s}),function(e,t){return{label:e,value:t}});var l=Object(i["find"])(o,["value",a])||Object(i["find"])(o,["value",Ot["a"]]);return n.a.createElement(ce["a"],{text:Ct.t("Keyboard layout")},n.a.createElement(pe["a"],{selectId:"keyboard",selectedOption:l,onOptionSelected:this.onChangeKeyboard,options:o,size:"large",width:"100%"}))}},{key:"renderLocalePref",value:function e(){var t=this.props,a=t.locale,s=t.featureLocaleEnGb,o=t.featureLocalePtBr,l=t.featureLocaleEsLa,c=t.featureLocalizationPhaseTwo;var u=Object(i["map"])(Object(Q["e"])({featureLocaleEnGb:s,featureLocalePtBr:o,featureLocaleEsLa:l,featureLocalizationPhaseTwo:c}),function(e,t){return{label:e,value:t}});var d=Object(i["sortBy"])(u,"label");var p=Object(i["find"])(u,["value",a])||Object(i["find"])(u,["value",y["b"].DEFAULT_LOCALE]);return n.a.createElement(r["Fragment"],null,n.a.createElement(ce["a"],{text:Ct.t("Language"),className:"margin_bottom_50"},n.a.createElement(pe["a"],{selectId:"locale",selectedOption:p,onOptionSelected:this.onChangeLocale,options:d,size:"large",width:"100%",selectDataQa:"locale"})),n.a.createElement("p",{className:"sk_dark_gray margin_bottom_200"},Ct.t("Choose the language you\u2019d like to use with Slack.")))}},{key:"renderTZPref",value:function e(){var t=this.props,a=t.tz,r=t.locale;var s=Object(kt["a"])(r);var o=Object(i["map"])(s,function(e){return{label:e[0],value:e[1]}});var l=Object(i["find"])(o,["value",a])||Object(i["find"])(o,["value",y["b"].DEFAULT_TZ]);return n.a.createElement(ce["a"],{text:Ct.t("Time zone"),className:"margin_bottom_50",id:"prefs_timezone"},n.a.createElement(pe["a"],{selectId:"tz",selectedOption:l,onOptionSelected:this.onChangeTZ,options:o,size:"large",width:"100%"}))}},{key:"render",value:function e(){return n.a.createElement("section",null,n.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},Ct.t("Language & Region")),this.renderLocalePref(),this.renderTZPref(),this.maybeRenderKeyboardPref())}}]);return t}(r["Component"]);St.displayName="PrefsSectionLanguageRegion";St.defaultProps=wt;function It(e){var t=Object(M["d"])(e).id;return{featureLocaleEnGb:Object(T["isFeatureEnabled"])(e,"feature_locale_en_GB"),featureLocalePtBr:Object(T["isFeatureEnabled"])(e,"feature_locale_pt_BR"),featureLocaleEsLa:Object(T["isFeatureEnabled"])(e,"feature_locale_es_LA"),featureLocalizationPhaseTwo:Object(T["isFeatureEnabled"])(e,"feature_localization_phase_two"),keyboard:Object(q["f"])(e,"keyboard"),tz:Object(q["f"])(e,"tz"),locale:Object(q["a"])(e),teamId:t,logger:Object(O["a"])({state:e,label:"PREFS"})}}var Tt={setUserPrefByApi:function e(){return H["c"].apply(void 0,arguments)},setShowOpenTransition:function e(){return R["b"].apply(void 0,arguments)},openChangeLanguageDialog:function e(){return Et["a"].apply(void 0,arguments)},setLocaleForTeam:function e(){return H["a"].apply(void 0,arguments)}};var At=Object(b["connect"])(It,Tt)(St);var Nt=a(124);var Pt=a(25);var Rt=a(29);var Mt=Object(Pt["a"])("Get the user's email token, if it exists.",function(e){return e(Object(Rt["a"])({method:"users.emailtoken.get",reason:"users.emailtoken.get"}))});var Dt=Object(Pt["a"])("Create a new token, replacing an existing one if it exists.",function(e){return e(Object(Rt["a"])({method:"users.emailtoken.create",reason:"users.emailtoken.create"}))});var xt=Object(Pt["a"])("Delete the user's email token",function(e){return e(Object(Rt["a"])({method:"users.emailtoken.delete",reason:"users.emailtoken.delete"}))});var Ft=a(1165);var Lt=a(276);var Bt=a(357);var Ut=a(303);var qt=a(365);var Gt=new y["b"]("prefs");var Wt={messagesTheme:s["b"].string.isRequired,showTyping:s["b"].bool.isRequired,time24:s["b"].bool.isRequired,locale:s["b"].string.isRequired,hideHexSwatch:s["b"].bool.isRequired,jumbomoji:s["b"].bool.isRequired,convertEmoticons:s["b"].bool.isRequired,expandInternalInlineImgs:s["b"].bool.isRequired,expandInlineImgs:s["b"].bool.isRequired,expandNonMediaAttachments:s["b"].bool.isRequired,obeyInlineImgLimit:s["b"].bool.isRequired,displayRealNames:s["b"].bool.isRequired,setUserPrefByApi:s["b"].func.isRequired,shouldDisplayRealNames:s["b"].bool.isRequired,shouldRenderEmojiAsText:s["b"].bool.isRequired,emailForwardingEnabled:s["b"].bool.isRequired,getEmailToken:s["b"].func,createEmailToken:s["b"].func,deleteEmailToken:s["b"].func,openModal:s["b"].func,closeModal:s["b"].func.isRequired,logger:s["b"].object.isRequired};var Ht={getEmailToken:i["noop"],createEmailToken:i["noop"],deleteEmailToken:i["noop"],openModal:i["noop"]};var Vt=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(i["bindAll"])(a,["onChangeMessagesTheme","onChangeDisplayRealNamesOverride","onChangeShowTyping","onChangeTime24","onChangeHideHexSwatch","onChangeEmojiMode","onChangeJumbomoji","onChangeConvertEmoticons","onChangeExpandInternalInlineImgs","onChangeExpandInlineImgs","onChangeObeyInlineImageLimit","onClickProfileLink","onClickCreateEmailForwardingAddress","onClickCopyEmailForwardingAddress","onClickDeleteEmailForwardingAddress","onConfirmDeleteEmailForwardingAddress","onLeaveCopyButton","onChangeExpandNonMediaAttachments"]);a.state={emailForwardingAddress:"",emailAddressCopied:false};var r=Date.now();a.currentTimestamp=Math.floor(r/1e3);return a}p()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.getEmailToken().then(function(e){if(e.email_address){var a=e.email_address;t.setState(function(){return{emailForwardingAddress:a}})}}).catch(function(e){if(e&&e.data&&"no_emailtoken"===e.data.error)return;t.props.logger.error("Unable to get email token",e)})}},{key:"onChangeMessagesTheme",value:function e(t){var a=this.props.logger;var r=t.target.value;a.action("Changed messages_theme: "+r);this.props.setUserPrefByApi({pref:"messages_theme",value:r})}},{key:"onChangeDisplayRealNamesOverride",value:function e(t){var a=this.props,r=a.displayRealNames,n=a.logger;var i="real_names"===t.target.value;var s=void 0;s=r?i?0:-1:i?1:0;n.action("Changed display_real_names_override: "+s);this.props.setUserPrefByApi({pref:"display_real_names_override",value:s})}},{key:"onChangeShowTyping",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed show_typing: "+r);this.props.setUserPrefByApi({pref:"show_typing",value:r})}},{key:"onChangeTime24",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed time24: "+r);this.props.setUserPrefByApi({pref:"time24",value:r})}},{key:"onChangeHideHexSwatch",value:function e(t){var a=this.props.logger;var r=!t.target.checked;a.action("Changed hide_hex_swatch: "+r);this.props.setUserPrefByApi({pref:"hide_hex_swatch",value:r})}},{key:"onChangeEmojiMode",value:function e(t){var a=this.props.logger;var r=t.target.checked?"as_text":"default";a.action("Changed emoji_mode: "+r);this.props.setUserPrefByApi({pref:"emoji_mode",value:r})}},{key:"onChangeJumbomoji",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed jumbomoji: "+r);this.props.setUserPrefByApi({pref:"jumbomoji",value:r})}},{key:"onChangeConvertEmoticons",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed convert_emoticons: "+r);this.props.setUserPrefByApi({pref:"convert_emoticons",value:r})}},{key:"onChangeExpandInternalInlineImgs",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed expand_internal_inline_imgs: "+r);this.props.setUserPrefByApi({pref:"expand_internal_inline_imgs",value:r})}},{key:"onChangeExpandInlineImgs",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed expand_inline_imgs: "+r);this.props.setUserPrefByApi({pref:"expand_inline_imgs",value:r})}},{key:"onChangeObeyInlineImageLimit",value:function e(t){var a=this.props.logger;var r=!t.target.checked;a.action("Changed obey_inline_img_limit: "+r);this.props.setUserPrefByApi({pref:"obey_inline_img_limit",value:r})}},{key:"onChangeExpandNonMediaAttachments",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed expand_non_media_attachments: "+r);this.props.setUserPrefByApi({pref:"expand_non_media_attachments",value:r})}},{key:"onClickProfileLink",value:function e(t){t.preventDefault();this.props.closeModal();Object(te["a"])()||Object(Ft["a"])()}},{key:"onClickCreateEmailForwardingAddress",value:function e(){var t=this;var a=this.props.logger;this.props.createEmailToken().then(function(e){var r=e.email_address;t.setState(function(){return{emailForwardingAddress:r}});a.action("Created email forwarding address")}).catch(function(e){a.error("Unable to create email token",e)})}},{key:"onClickCopyEmailForwardingAddress",value:function e(){var t=this.props.logger;var a=this.state.emailForwardingAddress;Object(Lt["writeText"])(Gt.t("Send to Slack <{emailForwardingAddress}>",{emailForwardingAddress:a}));t.action("Copied email forwarding address");this.setState(function(){return{emailAddressCopied:true}})}},{key:"onLeaveCopyButton",value:function e(){if(!this.state.emailAddressCopied)return;this.setState(function(){return{emailAddressCopied:false}})}},{key:"onClickDeleteEmailForwardingAddress",value:function e(){var t=this.state.emailForwardingAddress;this.props.openModal({element:n.a.createElement(qt["a"],{title:Gt.t("This address will be permanently deleted"),goButtonType:"danger",goButtonText:Gt.t("Disable Address"),onGo:this.onConfirmDeleteEmailForwardingAddress,showCancelButton:true},n.a.createElement("p",null,Gt.rt("The address <strong>{emailForwardingAddress}</strong> will no longer work. If you'd like, you can always request a new forwarding address.",{emailForwardingAddress:t}))),isStackable:true})}},{key:"onConfirmDeleteEmailForwardingAddress",value:function e(){var t=this;var a=this.props.logger;this.props.deleteEmailToken().then(function(){t.setState(function(){return{emailForwardingAddress:""}});a.action("Deleted email forwarding address")}).catch(function(e){a.error("Unable to delete email token",e)})}},{key:"renderEmailForwarding",value:function e(){var t=this.state,a=t.emailForwardingAddress,i=t.emailAddressCopied;var s="email_forwarding_address";return n.a.createElement(r["Fragment"],null,n.a.createElement("hr",{className:"margin_top_150 margin_bottom_150"}),n.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},Gt.t("Bring Emails into Slack")),n.a.createElement("p",null,Gt.t("You can upload any important email to Slack by forwarding it to a unique email address. Slackbot will deliver the email, and you can keep it private or share it with your team.")),a?n.a.createElement(r["Fragment"],null,n.a.createElement("p",null,n.a.createElement(Ut["b"],{id:s,name:s,value:a,className:"p-prefs_modal__email_forwarding_address_input"}),n.a.createElement(We["c"],{tip:i?Gt.t("Copied!"):Gt.t("Copy email address"),onMouseLeave:this.onLeaveCopyButton},n.a.createElement(Pe["d"],{type:"outline",onClick:this.onClickCopyEmailForwardingAddress},Gt.t("Copy")))),n.a.createElement("p",null,n.a.createElement(Re["a"],{onClick:this.onClickDeleteEmailForwardingAddress},Gt.t("Disable this address")))):n.a.createElement("p",null,n.a.createElement(Pe["d"],{type:"outline",onClick:this.onClickCreateEmailForwardingAddress},Gt.t("Get a Forwarding Address"))))}},{key:"renderAvatar",value:function e(t){var a=cdn_url+"/2b909/img/name_pref/avatar_meg@2x.png";"slackbot"===t&&(a=cdn_url+"/16510/img/slackbot_72.png");return n.a.createElement("div",{className:"p-prefs_modal__message_example__avatar"},n.a.createElement("img",{className:"c-avatar__image",src:a,alt:"user avatar"}))}},{key:"renderMessage",value:function e(t,a){return n.a.createElement("div",{className:"p-prefs_modal__message_example"},this.renderAvatar(t),n.a.createElement("div",{className:"p-prefs_modal__message_example__message_body"},n.a.createElement("span",{className:"c-message__sender"},t),n.a.createElement("span",{className:"c-timestamp"},Object(Bt["a"])(this.currentTimestamp,"{time}")),n.a.createElement("br",null),n.a.createElement("span",null,a)))}},{key:"renderCompactMessage",value:function e(t,a){return n.a.createElement("div",{className:"p-prefs_modal__message_example p-prefs_modal__message_example--compact"},n.a.createElement("div",{className:"p-prefs_modal__message_example__gutter"},n.a.createElement("span",{className:"c-timestamp"},Object(Bt["a"])(this.currentTimestamp,"{time}"))),n.a.createElement("div",{className:"p-prefs_modal__message_example__message_content"},n.a.createElement("span",{className:"c-message__sender"},t),n.a.createElement("span",{className:""},a)))}},{key:"renderMessageThemeExample",value:function e(t){var a=Gt.t("Feeling great!");if("dense"===t)return this.renderCompactMessage("slackbot",a);return this.renderMessage("slackbot",a)}},{key:"renderMessageExampleForNames",value:function e(t){var a=this.props,r=a.messagesTheme,i=a.shouldRenderEmojiAsText;var s=Gt.t("Meg");"real_names"===t&&(s=Gt.t("Megan Anne"));var o=Gt.rt("{wave_emoji} Hi, I'm <span>{name}</span>",{wave_emoji:n.a.createElement(je["b"],{text:":wave:",emojiSize:je["a"].MEDIUM,emojiMode:i?"as_text":"default"}),name:"@Meg"},function(e){var t=e.text;return n.a.createElement("span",{className:"c-member_slug c-member_slug--link"},t)});if("dense"===r)return this.renderCompactMessage(s,o);return this.renderMessage(s,o)}},{key:"render",value:function e(){var t=this.props,a=t.messagesTheme,i=t.showTyping,s=t.time24,o=t.locale,l=t.hideHexSwatch,c=t.jumbomoji,u=t.convertEmoticons,d=t.expandInternalInlineImgs,p=t.expandInlineImgs,h=t.obeyInlineImgLimit,v=t.expandNonMediaAttachments,m=t.displayRealNames,f=t.shouldDisplayRealNames,b=t.shouldRenderEmojiAsText,g=t.emailForwardingEnabled;var _="messages_theme_set";var O="display_real_names_override_set";var k=n.a.createElement(je["b"],{text:":smile:",emojiMode:b?"as_text":"default"});var E=n.a.createElement(Re["a"],{onClick:this.onClickProfileLink},Gt.t("your profile"));var C=n.a.createElement(r["Fragment"],null,n.a.createElement("p",{className:"margin_bottom_0"},n.a.createElement("strong",null,Gt.t("Show JUMBOMOJI"))),n.a.createElement("p",{className:"normal margin_bottom_0"},Gt.t("Display the jumbo versions of emoji (up to 23 at a time!) in messages without text.")));var j=o===y["b"].DEFAULT_LOCALE;return n.a.createElement("section",null,n.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},Gt.t("Messages")),n.a.createElement("h3",{className:"margin_bottom_50"},Gt.t("Theme")),n.a.createElement(Ae["a"],{className:"p-prefs_modal__radiogroup"},n.a.createElement(Ce,{text:Gt.t("Clean"),description:Gt.t("Clear, friendly, and focused"),selected:"light_with_avatars"===a||"default"===a},n.a.createElement(Te["a"],{name:_,value:"light_with_avatars",checked:"light_with_avatars"===a||"default"===a,onChange:this.onChangeMessagesTheme}),n.a.createElement("div",{className:"p-prefs_modal__radio_decorator"},this.renderMessageThemeExample("clean"))),n.a.createElement(Ce,{text:Gt.t("Compact"),description:Gt.t("The most messages you can fit on screen at once"),selected:"dense"===a},n.a.createElement(Te["a"],{name:_,value:"dense",checked:"dense"===a,onChange:this.onChangeMessagesTheme}),n.a.createElement("div",{className:"p-prefs_modal__radio_decorator"},this.renderMessageThemeExample("dense")))),n.a.createElement("h3",{className:"margin_bottom_50"},Gt.t("Names")),n.a.createElement(Ae["a"],{className:"p-prefs_modal__radiogroup margin_bottom_50"},n.a.createElement(Ce,{text:Gt.t("Full & display names"),description:Gt.rt("Show display names in conversation and full names everywhere else <strong>{workspaceDefault}</strong>",{workspaceDefault:m?"(workspace default)":""}),selected:f},n.a.createElement(Te["a"],{name:O,value:"real_names",checked:f,onChange:this.onChangeDisplayRealNamesOverride}),n.a.createElement("div",{className:"p-prefs_modal__radio_decorator"},this.renderMessageExampleForNames("real_names"))),n.a.createElement(Ce,{text:Gt.t("Just display names"),description:Gt.rt("Always show display names <strong>{workspaceDefault}</strong>",{workspaceDefault:m?"":"(workspace default)"}),selected:!f},n.a.createElement(Te["a"],{name:O,value:"display_names",checked:!f,onChange:this.onChangeDisplayRealNamesOverride}),n.a.createElement("div",{className:"p-prefs_modal__radio_decorator"},this.renderMessageExampleForNames("display_names")))),n.a.createElement("p",null,Gt.rt("To change your full or display name, head to {profileLink}.",{profileLink:E})),n.a.createElement("h3",{className:"margin_bottom_50"},Gt.t("Additional options")),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:Gt.t("Display information about who is currently typing a message")},n.a.createElement(ue["a"],{onChange:this.onChangeShowTyping,name:"show_typing",checked:i})),j?n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:Gt.rt('<strong>Show times with 24-hour clock</strong> <span class="normal">(16:00 rather than 4:00 PM)</span>')},n.a.createElement(ue["a"],{onChange:this.onChangeTime24,name:"time24",checked:s})):null,n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:Gt.t("Display color swatches next to hexadecimal values"),className:"margin_bottom_100"},n.a.createElement(ue["a"],{onChange:this.onChangeHideHexSwatch,name:"hide_hex_swatch",checked:!l})),n.a.createElement("h3",{className:"margin_bottom_50"},Gt.t("Emoji")),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:Gt.t("Display emoji as plain text")},n.a.createElement(ue["a"],{onChange:this.onChangeEmojiMode,name:"emoji_mode",checked:b})),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:C,isDisabled:b||"dense"===a},n.a.createElement(ue["a"],{onChange:this.onChangeJumbomoji,name:"jumbomoji",checked:c,disabled:b||"dense"===a})),"dense"===a?Gt.rt('<p className="margin_bottom_50 margin_left_150"><strong>Note:</strong> In compact mode, all emoji remain at a smaller, more sensible size.</p>'):"",n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:Gt.rt("Convert my typed emoticons to emoji, so :D becomes {smileEmoji}",{smileEmoji:k}),isDisabled:b,className:"margin_bottom_150 bold"},n.a.createElement(ue["a"],{onChange:this.onChangeConvertEmoticons,name:"convert_emoticons",checked:u,disabled:b})),n.a.createElement("hr",{className:"margin_bottom_150"}),n.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},Gt.t("Inline Media & Links")),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:Gt.t("Show images and files uploaded to Slack")},n.a.createElement(ue["a"],{onChange:this.onChangeExpandInternalInlineImgs,name:"expand_internal_inline_imgs",checked:d})),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:Gt.t("Show images and files from linked websites")},n.a.createElement(ue["a"],{onChange:this.onChangeExpandInlineImgs,name:"expand_inline_imgs",checked:p})),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:Gt.t("Even if they're larger than 2MB"),className:"margin_left_150",isDisabled:!p,id:"prefs_inline_media"},n.a.createElement(ue["a"],{onChange:this.onChangeObeyInlineImageLimit,name:"obey_inline_img_limit",checked:!h,disabled:!p})),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:Gt.t("Show text previews of linked websites")},n.a.createElement(ue["a"],{onChange:this.onChangeExpandNonMediaAttachments,name:"expand_non_media_attachments",checked:v})),g?this.renderEmailForwarding():null)}}]);return t}(r["Component"]);Vt.displayName="PrefsSectionMessagesMedia";Vt.defaultProps=Ht;var Kt=function e(t){return{messagesTheme:Object(q["f"])(t,"messages_theme"),showTyping:Object(q["f"])(t,"show_typing"),time24:Object(q["f"])(t,"time24"),locale:Object(q["a"])(t),hideHexSwatch:Object(q["f"])(t,"hide_hex_swatch"),jumbomoji:Object(q["f"])(t,"jumbomoji"),convertEmoticons:Object(q["f"])(t,"convert_emoticons"),expandInternalInlineImgs:Object(q["f"])(t,"expand_internal_inline_imgs"),expandInlineImgs:Object(q["f"])(t,"expand_inline_imgs"),expandNonMediaAttachments:Object(q["f"])(t,"expand_non_media_attachments"),obeyInlineImgLimit:Object(q["f"])(t,"obey_inline_img_limit"),displayRealNames:Object(G["a"])(t,"display_real_names"),shouldDisplayRealNames:Object(q["g"])(t),shouldRenderEmojiAsText:Object(Nt["o"])(t),emailForwardingEnabled:Object(z["isEmailForwardingEnabled"])(t),logger:Object(O["a"])({state:t,label:"PREFS"})}};var zt={setUserPrefByApi:H["c"],openModal:l["openModal"],closeModal:l["closeModal"],getEmailToken:Mt,createEmailToken:Dt,deleteEmailToken:xt};var Yt=Object(b["connect"])(Kt,zt)(Vt);var Qt=a(580);var Jt=a(311);var Zt=a(181);var Xt=a(518);var $t=a(801);var ea=a(37);var ta=a.n(ea);var aa=a(128);var ra=a(1154);var na=a(1248);var ia=a(887);var sa=a(58);var oa=a.n(sa);var la=a(1521);var ca=a(2788);var ua=new y["b"]("color_picker");var da={hue:s["b"].number,value:s["b"].shape({saturation:s["b"].number.isRequired,brightness:s["b"].number.isRequired}),onChange:s["b"].func,onFocus:s["b"].func,onBlur:s["b"].func,hasKeyboardFocus:s["b"].bool.isRequired};var pa={hue:0,value:{saturation:0,brightness:1},onChange:i["noop"],onFocus:i["noop"],onBlur:i["noop"]};var ha=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={width:160,height:160};a.top=0;a.left=0;a.isMouseDown=false;a.gradientBoxRef=n.a.createRef();Object(i["bindAll"])(a,["handleKeyDown","handleMouseDown","handleMouseUp","handleMouseMove","updateDimensions"]);return a}p()(t,[{key:"componentDidMount",value:function e(){requestAnimationFrame(this.updateDimensions)}},{key:"componentDidUpdate",value:function e(){requestAnimationFrame(this.updateDimensions)}},{key:"componentWillUnmount",value:function e(){this.removeDragListeners()}},{key:"getAriaValue",value:function e(){var t=this.props,a=t.hue,r=t.value;var n=r.saturation,i=r.brightness;var s=Object(Jt["h"])([a,n,i]);return Object(Jt["j"])(s)}},{key:"updateDimensions",value:function e(){if(this.gradientBoxRef.current){var t=this.gradientBoxRef.current.getBoundingClientRect(),a=t.top,r=t.left,n=t.width,i=t.height;this.top=a;this.left=r;this.setState(function(){return{width:n,height:i}})}}},{key:"addDragListeners",value:function e(){window.addEventListener("mouseup",this.handleMouseUp);window.addEventListener("mousemove",this.handleMouseMove)}},{key:"removeDragListeners",value:function e(){window.removeEventListener("mouseup",this.handleMouseUp);window.removeEventListener("mousemove",this.handleMouseMove)}},{key:"updateValue",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.saturation,r=t.brightness;this.props.onChange({saturation:Number(Math.min(1,Math.max(0,a)).toFixed(2)),brightness:Number(Math.min(1,Math.max(0,r)).toFixed(2))})}},{key:"handleKeyDown",value:function e(t){var a={Up:"ArrowUp",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight"}[t.key]||t.key;var r={ArrowUp:{saturationDelta:0,brightnessDelta:.01},ArrowDown:{saturationDelta:0,brightnessDelta:-.01},ArrowLeft:{saturationDelta:-.01,brightnessDelta:0},ArrowRight:{saturationDelta:.01,brightnessDelta:0}}[a];if(!r)return;t.stopPropagation();t.preventDefault();var n=r.saturationDelta,i=r.brightnessDelta;var s=this.props.value,o=s.saturation,l=s.brightness;this.updateValue({saturation:o+n,brightness:l+i})}},{key:"handleMouseEvent",value:function e(t){var a=t.clientX,r=t.clientY;var n=this.state,i=n.width,s=n.height;var o=a-this.left;var l=r-this.top;var c=o/i;var u=1-l/s;this.updateValue({saturation:c,brightness:u})}},{key:"handleMouseDown",value:function e(t){this.isMouseDown=true;this.addDragListeners();this.handleMouseEvent(t)}},{key:"handleMouseUp",value:function e(){this.isMouseDown=false;this.removeDragListeners()}},{key:"handleMouseMove",value:function e(t){this.isMouseDown&&this.handleMouseEvent(t)}},{key:"renderThumb",value:function e(){var t=this.state,a=t.width,r=t.height;var i=this.props.value,s=i.saturation,o=i.brightness;var l=Math.min(1,Math.max(0,s));var c=Math.min(1,Math.max(0,o));var u=l*a;var d=(1-c)*r;var p={left:u,top:d};var h=_()("c-sv_picker__thumb",{"c-sv_picker__thumb--focus-visible":this.props.hasKeyboardFocus});var v=ua.t("color wheel");var m=this.getAriaValue();return n.a.createElement("span",{className:h,style:p,role:"slider",tabIndex:0,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onKeyDown:this.handleKeyDown,"aria-describedby":"sv-picker-description","aria-label":v,"aria-valuenow":m,"aria-valuetext":m})}},{key:"renderAriaDescription",value:function e(){var t=ua.t("Use up and down to move the slider along the Y axis, left and right to move along the X axis.");return n.a.createElement("div",{id:"sv-picker-description",className:"offscreen"},t)}},{key:"render",value:function e(){var t=this.props.hue;var a="linear-gradient(hsla("+t+", 100%, 100%, 0), hsla("+t+", 100%, 0%, 1)), linear-gradient(90deg, hsla("+t+", 0%, 100%), hsla("+t+", 100%, 50%))";return n.a.createElement("div",{ref:this.gradientBoxRef,className:"c-sv_picker__gradient_box",style:{background:a},role:"presentation",onMouseDown:this.handleMouseDown,"data-qa":"sv_picker_gradient_box"},this.renderThumb(),this.renderAriaDescription())}}]);return t}(r["PureComponent"]);ha.displayName="SVPicker";ha.defaultProps=pa;var va=Object(la["a"])(ha);var ma=a(705);var fa=a(2790);var ba={className:s["b"].string,onChange:s["b"].func,value:s["b"].number,forwardedRef:s["b"].oneOfType([s["b"].object,s["b"].func]).isRequired,hasKeyboardFocus:s["b"].bool.isRequired};var ga={className:void 0,onChange:i["noop"],value:0};var _a=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleChange=a.handleChange.bind(a);return a}p()(t,[{key:"handleChange",value:function e(t){this.props.onChange(Number(t.target.value))}},{key:"render",value:function e(){var t=this.props,a=t.className,r=t.forwardedRef,i=t.hasKeyboardFocus,s=t.onChange,o=t.value,l=ta()(t,["className","forwardedRef","hasKeyboardFocus","onChange","value"]);var c=_()("c-slider__input",a,{"c-slider__input--focus-visible":i});return n.a.createElement("input",C()({ref:r,type:"range",className:c,onChange:this.handleChange,value:o},l))}}]);return t}(r["PureComponent"]);_a.displayName="Slider";_a.defaultProps=ga;var ya=Object(ma["a"])(n.a.forwardRef(function(e,t){return n.a.createElement(_a,C()({},e,{forwardedRef:t||n.a.createRef()}))}));var Oa=a(2378);function ka(e){return n.a.createElement("span",{className:"c-color_slider"},n.a.createElement("span",{className:"c-color_slider__outer_hue_track"}),n.a.createElement("span",{className:"c-color_slider__inner_hue_track"}),n.a.createElement(ya,C()({className:"c-color_slider__slider",min:0,max:359},e)))}ka.displayName="HueSlider";var Ea=ka;var Ca=function e(t){var a=false;var r=Object(Jt["i"])(t,a);return"linear-gradient(to right,rgba(0,0,0,0),#"+r+")"};var ja={color:s["b"].string};var wa={color:"FFFFFF"};function Sa(e){var t=e.color,a=ta()(e,["color"]);return n.a.createElement("span",{className:"c-color_slider"},n.a.createElement("span",{className:"c-color_slider__opacity_checkerboard_track"}),n.a.createElement("span",{className:"c-color_slider__opacity_gradient_track",style:{background:Ca(t)}}),n.a.createElement("span",{className:"c-color_slider__opacity_right_fill_track",style:{background:"#"+t}}),n.a.createElement(ya,C()({className:"c-color_slider__slider",min:0,max:1,step:.01},a)))}Sa.displayName="OpacitySlider";Sa.defaultProps=wa;var Ia=Sa;var Ta={className:s["b"].string,value:s["b"].string.isRequired,alpha:s["b"].bool,onChange:s["b"].func.isRequired};var Aa={className:"",alpha:false};var Na=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state=a.getStateFromHex(e.value);Object(i["bindAll"])(a,["handleSVChange","handleHueChange","handleOpacityChange"]);return a}p()(t,[{key:"getStateFromHex",value:function e(t){var a=this.props.alpha;var r=Object(Jt["e"])(t),n=oa()(r,4),i=n[0],s=n[1],o=n[2],l=n[3];return{hue:i,saturation:s,brightness:o,opacity:a?l:1}}},{key:"getHexFromState",value:function e(t){var a=this.props.alpha;var r=t.hue,n=t.saturation,i=t.brightness,s=t.opacity;var o=[r,n,i];return Object(Jt["g"])(a?[].concat(o,[s]):o).substr(1)}},{key:"handleChange",value:function e(t){var a=this;this.setState(function(e){return C()({},e,t)},function(){var e=a.getHexFromState(a.state);a.props.onChange(e)})}},{key:"handleSVChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.saturation,r=t.brightness;this.handleChange({saturation:a,brightness:r})}},{key:"handleHueChange",value:function e(t){this.handleChange({hue:t})}},{key:"handleOpacityChange",value:function e(t){this.handleChange({opacity:t})}},{key:"maybeRenderOpacitySlider",value:function e(){if(!this.props.alpha)return null;var t=this.state,a=t.hue,r=t.saturation,i=t.brightness,s=t.opacity;var o=Object(Jt["g"])([a,r,i]).slice(1);return n.a.createElement(Ia,{color:o,value:s,onChange:this.handleOpacityChange})}},{key:"render",value:function e(){var t=this.props.className;var a=this.state,r=a.hue,i=a.saturation,s=a.brightness;return n.a.createElement("div",{className:t},n.a.createElement(va,{hue:r,value:{saturation:i,brightness:s},onChange:this.handleSVChange}),n.a.createElement(Ea,{value:r,onChange:this.handleHueChange}),this.maybeRenderOpacitySlider())}}]);return t}(r["PureComponent"]);Na.displayName="HSVPicker";Na.defaultProps=Aa;var Pa=Na;var Ra=a(2793);var Ma="FFFFFF00";var Da={x:-4,y:-4};var xa={value:s["b"].string.isRequired,alpha:s["b"].bool,onChange:s["b"].func,onClose:s["b"].func,onBlur:s["b"].func,onFocus:s["b"].func,"data-qa":s["b"].string,position:s["b"].string};var Fa={alpha:false,onChange:i["noop"],onClose:i["noop"],onBlur:i["noop"],onFocus:i["noop"],"data-qa":"color_picker",position:"bottom-left"};var La=function e(t){return t&&t.stopPropagation()};var Ba=function(e){f()(t,e);p()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,a){var r=t.value,n=t.alpha;var i=a.focused;if(i)return null;var s=Object(Jt["i"])(r,n);if(!s)return null;return{inputValue:s,lastNormalizedValue:s}}}]);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=e.value,s=e.alpha;var o=Object(Jt["i"])(r,s)||Object(Jt["i"])(Ma,s);a.state={inputValue:o,lastNormalizedValue:o,invalid:false,focused:false};a.inputRef=n.a.createRef();Object(i["bindAll"])(a,["focus","handleContainerClick","handleInputFocus","handleInputBlur","handleInputChange","handleHSVChange","renderPopover"]);return a}p()(t,[{key:"focus",value:function e(){this.inputRef.current&&this.inputRef.current.focus()}},{key:"maybeTriggerOnChange",value:function e(t){var a=this.props.value;t&&a!==t&&this.props.onChange(t)}},{key:"handleContainerClick",value:function e(){if(this.state.focused)return;this.setState(function(){return{focused:true}},this.focus)}},{key:"handleInputFocus",value:function e(t){if(this.state.focused)return;this.setState(function(){return{focused:true}});if(this.props.onFocus){t.persist();this.props.onFocus(t)}}},{key:"handleInputBlur",value:function e(t){this.setState(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.lastNormalizedValue;return{inputValue:t,invalid:!t,focused:false}});if(this.props.onBlur){t.persist();this.props.onBlur(t)}}},{key:"handleInputChange",value:function e(t){var a=t.target.value;var r=Object(Jt["i"])(a);this.setState(function(e){return{inputValue:a,lastNormalizedValue:r||e.lastNormalizedValue,invalid:!r}});this.maybeTriggerOnChange(r)}},{key:"handleHSVChange",value:function e(t){var a=Object(Jt["i"])(t);this.setState(function(){return{lastNormalizedValue:a,inputValue:a,invalid:!a}});this.maybeTriggerOnChange(a)}},{key:"renderPopover",value:function e(t){var a=this.props,r=a.alpha,i=a.value;var s=this.props.position.includes("top")?-Da.y:Da.y;return n.a.createElement(ra["a"],C()({},t,{position:this.props.position,offsetX:Da.x,offsetY:s}),n.a.createElement(Pa,{className:"c-color_picker__popover",value:i,alpha:r,onChange:this.handleHSVChange}))}},{key:"renderColorBlock",value:function e(){var t={background:"#"+this.state.lastNormalizedValue};var a=this.props["data-qa"]&&this.props["data-qa"]+"_color_block";return n.a.createElement("span",{className:"c-color_picker__color_block_container",role:"presentation",onClick:La},n.a.createElement(na["a"],{onClose:this.props.onClose,renderPopover:this.renderPopover,onClick:this.setHSVFromValue},n.a.createElement(aa["a"],{className:"c-color_picker__color_block",style:t,"data-qa":a})))}},{key:"render",value:function e(){var t=this.props,a=t["data-qa"],r=t.value,i=t.alpha,s=t.onChange,o=t.onClose,l=t.onBlur,c=t.onFocus,u=t.position,d=ta()(t,["data-qa","value","alpha","onChange","onClose","onBlur","onFocus","position"]);var p=this.state,h=p.focused,v=p.invalid;var m=_()("c-color_picker__container",{"c-color_picker__container--alpha":i,"c-color_picker__container--focus-within":h,"c-color_picker__container--invalid":v});var f="c-color_picker__input";var b="c-color_picker__hex_hash";return n.a.createElement("div",{className:m,"data-qa":this.props["data-qa"],onClick:this.handleContainerClick,role:"presentation"},this.renderColorBlock(),n.a.createElement("span",{className:b},"#"),n.a.createElement("input",C()({className:f,"data-qa":this.props["data-qa"]?this.props["data-qa"]+"_input":void 0,ref:this.inputRef,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onChange:this.handleInputChange,type:"text",value:this.state.inputValue,"aria-invalid":!!this.state.invalid},Object(ia["a"])(d))))}}]);return t}(r["PureComponent"]);Ba.displayName="ColorPicker";Ba.defaultProps=Fa;var Ua=Ba;var qa=new y["b"]("prefs");var Ga=150;var Wa=[{name:"default_theme",label:function e(){return qa.t("Aubergine")},thumb:cdn_url+"/d65d3/img/themes/aubergine.png"},{name:"aubergine_classic_theme",label:function e(){return qa.t("Aubergine Classic")},thumb:cdn_url+"/d65d3/img/themes/aubergine_classic.png"},{name:"hoth_theme",label:function e(){return qa.t("Hoth")},thumb:cdn_url+"/c41f9/img/themes/hoth.png"},{name:"monument_theme",label:function e(){return qa.t("Monument")},thumb:cdn_url+"/c41f9/img/themes/monument.png"},{name:"chocolate_theme",label:function e(){return qa.t("Choco Mint")},thumb:cdn_url+"/c41f9/img/themes/chocolate.png"},{name:"ocean_theme",label:function e(){return qa.t("Ochin")},thumb:cdn_url+"/c41f9/img/themes/ocean.png"},{name:"workhard_theme",label:function e(){return qa.t("Work Hard")},thumb:cdn_url+"/c41f9/img/themes/workhard.png"},{name:"nocturne_theme",label:function e(){return qa.t("Nocturne")},thumb:cdn_url+"/c1d2/img/themes/nocturne.png"}];var Ha=[{name:"midnight_theme",label:function e(){return qa.t("Midnight")},thumb:cdn_url+"/33aef/img/themes/midnight.png"},{name:"stark_theme",label:function e(){return qa.t("Stark")},thumb:cdn_url+"/af3644/img/themes/stark.png"},{name:"cloud_theme",label:function e(){return qa.t("Cloud")},thumb:cdn_url+"/cbe92/img/themes/cloud.png"},{name:"kaiyo_theme",label:function e(){return qa.t("Kaiyo")},thumb:cdn_url+"/cbe92/img/themes/kaiyo.png"}];var Va=[{name:"brinjal_theme",label:function e(){return qa.t("Tritanopia")},thumb:cdn_url+"/c41f9/img/themes/brinjal.png"},{name:"solanum_theme",label:function e(){return qa.t("Protanopia & Deuteranopia",{fallbackHash:"fc1efd15a53303d74c9c5f779ced7e1d47a756d6"})},thumb:cdn_url+"/c41f9/img/themes/solanum.png"}];var Ka=[{id:"column_bg",label:function e(){return qa.t("Column BG")}},{id:"nav_bar_bg",label:function e(){return qa.t("Nav Bar BG")}},{id:"nav_bar_text",label:function e(){return qa.t("Nav Bar Text")}},{id:"menu_bg",label:function e(){return qa.t("Menu BG Hover")}},{id:"active_item",label:function e(){return qa.t("Active Item")}},{id:"active_item_text",label:function e(){return qa.t("Active Item Text")}},{id:"hover_item",label:function e(){return qa.t("Hover Item")}},{id:"text_color",label:function e(){return qa.t("Text Color")}},{id:"active_presence",label:function e(){return qa.t("Active Presence")}},{id:"badge",label:function e(){return qa.t("Mention Badge")}}];var za={featureChannelIsRemoveCreateSharedChannel:s["b"].bool.isRequired,sidebarBehavior:s["b"].string.isRequired,channelSort:s["b"].string,separatePrivateChannels:s["b"].bool.isRequired,separateSharedChannels:s["b"].bool.isRequired,separateOrgChannels:s["b"].bool,enableUnreadView:s["b"].bool.isRequired,showSidebarQuickswitcherButton:s["b"].bool.isRequired,sidebarTheme:s["b"].string,customTheme:s["b"].shape({column_bg:s["b"].string.isRequired,nav_bar_bg:s["b"].string,nav_bar_text:s["b"].string,menu_bg:s["b"].string,active_item:s["b"].string.isRequired,active_item_text:s["b"].string.isRequired,hover_item:s["b"].string.isRequired,text_color:s["b"].string.isRequired,active_presence:s["b"].string.isRequired,badge:s["b"].string.isRequired}),useGlobalNav:s["b"].bool.isRequired,teamName:s["b"].string.isRequired,paidTeam:s["b"].bool.isRequired,enterpriseTeam:s["b"].bool.isRequired,setUserPrefByApi:s["b"].func.isRequired,setMultipleUserPrefsByApi:s["b"].func.isRequired,logger:s["b"].object.isRequired};var Ya={channelSort:"default",separateOrgChannels:true,sidebarTheme:"default_theme",customTheme:Jt["a"]};var Qa=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(i["bindAll"])(a,["onChangeSidebarBehavior","onChangeChannelSort","onChangeSeparatePrivateChannels","onChangeSeparateOrgChannels","onChangeSeparateSharedChannels","onChangeEnableAllUnreadView","onChangeShowSidebarQuickswitcherButton","onChangeSidebarTheme","onClickOpenCustomThemes","onChangeCustomThemePicker","onChangeCustomThemeValues","onClickCopyCustomTheme"]);a.state={customThemesOpen:"custom_theme"===a.props.sidebarTheme,customTheme:a.props.customTheme};a.setCustomThemeByAPI=Object(i["debounce"])(a.setCustomThemeByAPI,Ga);return a}p()(t,[{key:"onChangeSidebarBehavior",value:function e(t){var a=this.props.logger;var r=t.target.value;a.action("Changed sidebar_behavior: "+r);this.props.setUserPrefByApi({pref:"sidebar_behavior",value:r})}},{key:"onChangeChannelSort",value:function e(t){var a=this.props.logger;var r=t.target.value;a.action("Changed channel_sort: "+r);this.props.setUserPrefByApi({pref:"channel_sort",value:r})}},{key:"onChangeSeparatePrivateChannels",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed separate_private_channels: "+r);this.props.setUserPrefByApi({pref:"separate_private_channels",value:r})}},{key:"onChangeSeparateSharedChannels",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed separate_shared_channels: "+r);this.props.setUserPrefByApi({pref:"separate_shared_channels",value:r})}},{key:"onChangeSeparateOrgChannels",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed ent_org_wide_channels_sidebar: "+r);this.props.setUserPrefByApi({pref:"ent_org_wide_channels_sidebar",value:r})}},{key:"onChangeEnableAllUnreadView",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed enable_unread_view: "+r);this.props.setUserPrefByApi({pref:"enable_unread_view",value:r})}},{key:"onChangeShowSidebarQuickswitcherButton",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed show_sidebar_quickswitcher_button: "+r);this.props.setUserPrefByApi({pref:"show_sidebar_quickswitcher_button",value:r})}},{key:"onChangeSidebarTheme",value:function e(t){var a=this.props,r=a.useGlobalNav,n=a.logger;var i=t.target.value;n.action("Changed sidebarTheme: "+i);var s=Object(Qt["e"])(i,null,{useGlobalNav:r});this.setState(function(){return{customTheme:C()({},s)}});this.props.setMultipleUserPrefsByApi({sidebar_theme:i,sidebar_theme_custom_values:JSON.stringify(s)})}},{key:"onClickOpenCustomThemes",value:function e(){this.setState(function(){return{customThemesOpen:true}})}},{key:"onChangeCustomThemePicker",value:function e(t,a){var r=this.state.customTheme;r[t]="#"+a;this.setCustomTheme(r)}},{key:"onChangeCustomThemeValues",value:function e(t){var a=this.props.useGlobalNav;var r=Object(Qt["c"])(a,t.replace(/ /g,"").split(","));r&&this.setCustomTheme(r)}},{key:"onClickCopyCustomTheme",value:function e(){var t=this.state.customTheme;var a=this.props.useGlobalNav;var r=Object(Qt["d"])(t,a);Object(Lt["writeText"])(r)}},{key:"setCustomTheme",value:function e(t){this.setState(function(){return{customTheme:t}});this.setCustomThemeByAPI(t)}},{key:"setCustomThemeByAPI",value:function e(t){var a=this.props.logger;var r=JSON.stringify(t);a.action("Changed customTheme: "+r);this.props.setMultipleUserPrefsByApi({sidebar_theme:"custom_theme",sidebar_theme_custom_values:r})}},{key:"renderSidebarBehavior",value:function e(){var t=this.props.sidebarBehavior;var a="sidebar_behavior_set";var i=n.a.createElement(r["Fragment"],null,n.a.createElement("p",{className:"margin_bottom_0"},n.a.createElement("strong",null,qa.t("Everything"))),n.a.createElement("p",{className:"margin_bottom_0"},qa.t("All of your conversations.")));var s=n.a.createElement(r["Fragment"],null,n.a.createElement("p",{className:"margin_bottom_0"},n.a.createElement("strong",null,qa.t("Unreads and starred conversations"))),n.a.createElement("p",{className:"margin_bottom_0"},qa.t("Your unread conversations and conversations you've starred.")));var o=n.a.createElement(r["Fragment"],null,n.a.createElement("p",{className:"margin_bottom_0"},n.a.createElement("strong",null,qa.t("Unreads only"))),n.a.createElement("p",{className:"margin_bottom_0"},qa.t("Only your unread conversations.")));return n.a.createElement(r["Fragment"],null,n.a.createElement("h3",{className:"margin_bottom_50"},qa.t("Appearance")),n.a.createElement("p",null,qa.t("Choose what is visible in your sidebar.")),n.a.createElement(Ae["a"],null,n.a.createElement(ce["a"],{text:i,type:"inline",cursor:"pointer"},n.a.createElement(Te["a"],{name:a,value:"",checked:""===t,onChange:this.onChangeSidebarBehavior})),n.a.createElement(ce["a"],{text:s,type:"inline",cursor:"pointer"},n.a.createElement(Te["a"],{name:a,value:"hide_read_channels_unless_starred",checked:"hide_read_channels_unless_starred"===t,onChange:this.onChangeSidebarBehavior})),n.a.createElement(ce["a"],{text:o,type:"inline",cursor:"pointer"},n.a.createElement(Te["a"],{name:a,value:"hide_read_channels",checked:"hide_read_channels"===t,onChange:this.onChangeSidebarBehavior}))))}},{key:"renderChannelSort",value:function e(){var t=this.props.channelSort;var a="channel_sort_set";var i=n.a.createElement(r["Fragment"],null,n.a.createElement("p",{className:"margin_bottom_0"},n.a.createElement("strong",null,qa.t("Alphabetical"))),n.a.createElement("p",{className:"margin_bottom_0"},qa.t("Sort conversations alphabetically (default)")));var s=n.a.createElement(r["Fragment"],null,n.a.createElement("p",{className:"margin_bottom_0"},n.a.createElement("strong",null,qa.t("Priority"))),n.a.createElement("p",{className:"margin_bottom_0"},qa.t("Sort conversations scientifically (based on how you use Slack)")));return n.a.createElement(r["Fragment"],null,n.a.createElement("h3",{className:"margin_bottom_50"},qa.t("Sorting and grouping")),n.a.createElement("p",null,qa.t("Choose how channels in your sidebar are sorted.")),n.a.createElement(Ae["a"],null,n.a.createElement(ce["a"],{text:i,type:"inline",cursor:"pointer"},n.a.createElement(Te["a"],{name:a,value:"default",checked:"default"===t,onChange:this.onChangeChannelSort})),n.a.createElement(ce["a"],{text:s,type:"inline",cursor:"pointer"},n.a.createElement(Te["a"],{name:a,value:"priority",checked:"priority"===t,onChange:this.onChangeChannelSort}))))}},{key:"renderChannelGroupings",value:function e(){var t=this.props,a=t.featureChannelIsRemoveCreateSharedChannel,i=t.separatePrivateChannels,s=t.separateSharedChannels,o=t.enterpriseTeam,l=t.separateOrgChannels;var c=n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:qa.t("List organization channels separately")},n.a.createElement(ue["a"],{onChange:this.onChangeSeparateOrgChannels,name:"ent_org_wide_channels_sidebar",checked:l}));var u=n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:qa.t("List shared channels separately")},n.a.createElement(ue["a"],{onChange:this.onChangeSeparateSharedChannels,name:"separate_shared_channels",checked:s}));var d=!a&&Object($t["e"])();return n.a.createElement(r["Fragment"],null,n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:qa.t("List private channels separately")},n.a.createElement(ue["a"],{onChange:this.onChangeSeparatePrivateChannels,name:"separate_private_channels",checked:i})),d?u:null,o?c:null)}},{key:"renderAdditionalOptions",value:function e(){var t=this.props,a=t.enableUnreadView,i=t.showSidebarQuickswitcherButton;var s=n.a.createElement(r["Fragment"],null,n.a.createElement("p",{className:"margin_bottom_0"},n.a.createElement("strong",null,qa.t("Show All Unreads"))),n.a.createElement("p",{className:"margin_bottom_0"},qa.t("This collects all the messages you've missed in one handy place.")));var o=n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:s},n.a.createElement(ue["a"],{onChange:this.onChangeEnableAllUnreadView,name:"enable_unread_view",checked:a}));var l=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(oe["isMac"])()?qa.t("Cmd"):qa.t("Ctrl"));var c=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"K");var u=n.a.createElement(r["Fragment"],null,n.a.createElement("p",{className:"margin_bottom_0"},n.a.createElement("strong",null,qa.t("Show the Quick Switcher"))),n.a.createElement("p",{className:"margin_bottom_0"},qa.t("This lets you jump to conversations in a snap.")),n.a.createElement("p",{className:"margin_bottom_0"},qa.rt("(You can also use {modKey}{kKey})",{modKey:l,kKey:c})));var d=n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:u},n.a.createElement(ue["a"],{onChange:this.onChangeShowSidebarQuickswitcherButton,name:"show_sidebar_quickswitcher_button",checked:i}));return n.a.createElement(r["Fragment"],null,n.a.createElement("h3",{className:"margin_bottom_50 margin_top_200"},qa.t("Additional Options")),o,d)}},{key:"renderThemeOption",value:function e(t){var a=this.props.sidebarTheme;var i="sidebar_theme";var s=n.a.createElement(r["Fragment"],null,t.label(),n.a.createElement("br",null),n.a.createElement("img",{alt:qa.t("Switch to the {themeName} theme",{themeName:t.label()}),src:t.thumb,className:"p-prefs_modal__theme_thumb"}));return n.a.createElement(ce["a"],{text:s,type:"inline",cursor:"pointer",key:t.name,className:"p-prefs_modal__theme_label"},n.a.createElement(Te["a"],{name:i,value:t.name,checked:a===t.name,onChange:this.onChangeSidebarTheme}))}},{key:"renderThemeSection",value:function e(){var t=this;var a=this.props,i=a.teamName,s=a.useGlobalNav;var o=s&&Ha.map(function(e){return t.renderThemeOption(e)});var l=Wa.map(function(e){return t.renderThemeOption(e)});var c=Va.map(function(e){return t.renderThemeOption(e)});return n.a.createElement(r["Fragment"],null,n.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},qa.t("Theme")),n.a.createElement("p",null,qa.rt("Customize the look of the <strong>{teamName}</strong> workspace. Only you will see this.",{teamName:i})),n.a.createElement(Ae["a"],null,s?n.a.createElement(r["Fragment"],null,n.a.createElement("h3",{className:"margin_bottom_100"},qa.t("Fresh New Themes")),o,n.a.createElement("h3",{className:"margin_top_100 margin_bottom_100"},qa.t("Classic Themes"))):null,l,n.a.createElement("h3",{className:"margin_top_100 margin_bottom_100"},qa.t("Accessible Themes")),c))}},{key:"renderCustomThemePickers",value:function e(){var t=this;var a=this.props,r=a.useGlobalNav,i=a.sidebarTheme;var s=this.state.customTheme;var o=Object(Qt["e"])(i,C()({},s),{useGlobalNav:r});r&&(o=Object(Zt["a"])(o));return Ka.map(function(e){if(!r&&Qt["a"].includes(e.id))return null;if(r&&Qt["b"].includes(e.id))return null;var a=o[e.id]?o[e.id].replace(/#/,""):"FFFFFF";return n.a.createElement("div",{className:"p-prefs_modal__custom_theme_picker",key:e.id},n.a.createElement("span",{className:"bold"},e.label()),n.a.createElement("br",null),n.a.createElement(Ua,{value:a,onChange:function a(r){return t.onChangeCustomThemePicker(e.id,r)}}))})}},{key:"renderCustomThemeSection",value:function e(){var t=this.props,a=t.sidebarTheme,i=t.useGlobalNav;var s=this.state,o=s.customThemesOpen,l=s.customTheme;var c=Object(Qt["d"])(l,i);var u="custom_theme_input";return o||"custom_theme"===a?n.a.createElement("div",{className:"margin_bottom_400"},n.a.createElement("h3",{className:"margin_bottom_100"},qa.t("Custom Theme")),this.renderCustomThemePickers(),n.a.createElement(ce["a"],{text:qa.t("Copy and paste these values to share your custom theme with others"),htmlFor:u,cursor:"pointer",className:"clear_left"},n.a.createElement(Ut["b"],{name:u,id:u,className:"p-prefs_modal__custom_theme_input",value:c,onChange:this.onChangeCustomThemeValues}),n.a.createElement(Pe["d"],{type:"outline",onClick:this.onClickCopyCustomTheme},qa.t("Copy")))):n.a.createElement(r["Fragment"],null,n.a.createElement("p",{className:"margin_bottom_0"},qa.t("Feeling adventurous?")),n.a.createElement("p",null,n.a.createElement(Re["a"],{onClick:this.onClickOpenCustomThemes,className:"bold"},qa.t("Customize your theme and share it with others"))))}},{key:"render",value:function e(){var t=this.props.paidTeam;return n.a.createElement("section",null,n.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},qa.t("Sidebar Settings")),this.renderSidebarBehavior(),t?this.renderChannelSort():null,this.renderChannelGroupings(),this.renderAdditionalOptions(),n.a.createElement("hr",{className:"margin_top_200 margin_bottom_200"}),this.renderThemeSection(),this.renderCustomThemeSection())}}]);return t}(r["Component"]);Qa.displayName="PrefsSectionSidebar";Qa.defaultProps=Ya;var Ja=function e(t){var a=Object(M["d"])(t);var r=Object(Zt["b"])(t);var n=Object(q["f"])(t,"sidebar_theme");"default"===n&&(n="default_theme");var i=Object(q["f"])(t,"sidebar_theme_custom_values");var s=Object(Xt["a"])(i);""===i&&(s=Object(Qt["e"])(n,null,{useGlobalNav:r}));return{featureChannelIsRemoveCreateSharedChannel:Object(T["isFeatureEnabled"])(t,"feature_channel_is_remove_create_shared_channel"),sidebarBehavior:Object(q["f"])(t,"sidebar_behavior"),channelSort:Object(q["f"])(t,"channel_sort"),separatePrivateChannels:Object(q["f"])(t,"separate_private_channels"),separateSharedChannels:Object(q["f"])(t,"separate_shared_channels"),separateOrgChannels:Object(q["f"])(t,"ent_org_wide_channels_sidebar"),enableUnreadView:Object(q["f"])(t,"enable_unread_view"),showSidebarQuickswitcherButton:Object(q["f"])(t,"show_sidebar_quickswitcher_button"),sidebarTheme:n,customTheme:s,useGlobalNav:r,teamName:Object(D["getTeamDisplayName"])(a),paidTeam:Object(D["isPaidTeam"])(a),enterpriseTeam:Object(D["isEnterpriseTeam"])(a),logger:Object(O["a"])({state:t,label:"PREFS"})}};var Za={setUserPrefByApi:function e(){return H["c"].apply(void 0,arguments)},setMultipleUserPrefsByApi:function e(){return H["b"].apply(void 0,arguments)}};var Xa=Object(b["connect"])(Ja,Za)(Qa);var $a=a(1738);var er=new y["b"]("prefs");var tr={readStateTrackingPref:s["b"].string.isRequired,setMultipleUserPrefsByApi:s["b"].func.isRequired,logger:s["b"].object.isRequired};var ar=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(i["bindAll"])(a,["onChangeReadStateTracking"]);return a}p()(t,[{key:"onChangeReadStateTracking",value:function e(t){var a=this.props.logger;var r=t.target.value;a.action("Changed read_state_tracking: "+r);this.props.setMultipleUserPrefsByApi({mark_msgs_read_immediately:"immediate_scroll"===r||"immediate"===r,start_scroll_at_oldest:"immediate_scroll"===r})}},{key:"render",value:function e(){var t=this.props.readStateTrackingPref;var a="read_state_tracking";var r=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},er.t("Esc"));var i=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},er.t("Shift"));var s=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(oe["isMac"])()?er.t("Option",{fallbackHash:"e31d972229de381b461860014dd710856361917a",fallbackHashNs:"keys"}):er.t("Alt",{fallbackHash:"e30eff925100b7c3e119ed678e39009e962455b0",fallbackHashNs:"keys"}));return n.a.createElement("section",null,n.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},er.t("Mark as Read")),n.a.createElement("p",null,er.t("Slack marks a channel read as soon as you view it. You can change this if you\u2019d like.")),n.a.createElement("h3",{className:"margin_bottom_50"},er.t("When I view a channel:")),n.a.createElement(Ae["a"],{className:"margin_bottom_100"},n.a.createElement(ce["a"],{text:er.t("Start me where I left off, and mark the channel read"),type:"inline",cursor:"pointer"},n.a.createElement(Te["a"],{name:a,value:"immediate_scroll",checked:"immediate_scroll"===t,onChange:this.onChangeReadStateTracking})),n.a.createElement(ce["a"],{text:er.t("Start me at the newest message, and mark the channel read"),type:"inline",cursor:"pointer"},n.a.createElement(Te["a"],{name:a,value:"immediate",checked:"immediate"===t,onChange:this.onChangeReadStateTracking})),n.a.createElement(ce["a"],{text:er.t("Start me at the newest message, but leave unseen messages unread"),type:"inline",cursor:"pointer"},n.a.createElement(Te["a"],{name:a,value:"default",checked:"default"===t,onChange:this.onChangeReadStateTracking}))),n.a.createElement("h3",{className:"margin_bottom_50"},er.t("Shortcuts")),n.a.createElement("p",{className:"margin_bottom_50"},n.a.createElement(je["b"],{text:":information_desk_person::skin-tone-2:",className:"margin_right_50"}),er.rt("<strong>Mark a channel as read</strong> by hitting the {escKey} key.",{escKey:r})),n.a.createElement("p",{className:"margin_bottom_50"},n.a.createElement(je["b"],{text:":ok_woman::skin-tone-4:",className:"margin_right_50"}),er.rt("<strong>Mark everything as read</strong> by pressing {shiftKey}{escKey}.",{shiftKey:i,escKey:r})),n.a.createElement("p",{className:"margin_bottom_50"},n.a.createElement(je["b"],{text:":raising_hand::skin-tone-6:",className:"margin_right_50 float_left margin_bottom_100"}),er.rt("<strong>Mark a message unread</strong> by selecting \u201cMark unread\u201d from the message's menu. Or simply hold down the {modifierKey} key and click on it.",{modifierKey:s})))}}]);return t}(r["Component"]);ar.displayName="PrefsSectionMarkAsRead";var rr=function e(t){return{readStateTrackingPref:Object($a["a"])(t),logger:Object(O["a"])({state:t,label:"PREFS"})}};var nr={setMultipleUserPrefsByApi:H["b"]};var ir=Object(b["connect"])(rr,nr)(ar);var sr=a(100);var or=a(279);var lr=a(186);var cr=new y["b"]("prefs");var ur={a11yAnimations:s["b"].bool.isRequired,setUserPrefByApi:s["b"].func.isRequired,closeModal:s["b"].func.isRequired,showKeyboardShortcuts:s["b"].func.isRequired,logger:s["b"].object.isRequired};var dr=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(i["bindAll"])(a,["onChangeZoom","onChangeA11yAnimations","onClickKeyboardShortcutsLink","onKeyPressCmdPlus","onKeyPressCmdMinus"]);a.state={currentZoomLevel:Object(se["getZoom"])()};return a}p()(t,[{key:"componentDidMount",value:function e(){if(se["isDesktop"]){this.keyCommands=new lr["a"];this.keyCommands.bindAll([{keys:["mod+="],handler:this.onKeyPressCmdPlus},{keys:["mod+-"],handler:this.onKeyPressCmdMinus}])}}},{key:"componentWillUnmount",value:function e(){se["isDesktop"]&&this.keyCommands.reset()}},{key:"onKeyPressCmdPlus",value:function e(){var t=this.state.currentZoomLevel;t<3&&this.setState(function(){return{currentZoomLevel:t+1}})}},{key:"onKeyPressCmdMinus",value:function e(){var t=this.state.currentZoomLevel;t>-3&&this.setState(function(){return{currentZoomLevel:t-1}})}},{key:"onChangeZoom",value:function e(t){var a=this.props.logger;var r=t.target.value;a.action("Changed zoomLevel: "+r);Object(se["setZoom"])(r);this.setState(function(){return{currentZoomLevel:r}})}},{key:"onChangeA11yAnimations",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed a11y_animations: "+r);this.props.setUserPrefByApi({pref:"a11y_animations",value:r})}},{key:"onClickKeyboardShortcutsLink",value:function e(t){t.preventDefault();this.props.closeModal();Object(te["a"])()?this.props.showKeyboardShortcuts():Object(or["d"])("shortcuts")}},{key:"getZoomOptions",value:function e(){var t=[{value:-3,label:function e(){return cr.t("70%")}},{value:-2,label:function e(){return cr.t("80%")}},{value:-1,label:function e(){return cr.t("90%")}},{value:0,label:function e(){return cr.rt("<strong>100%</strong> Default")}},{value:1,label:function e(){return cr.t("110%")}},{value:2,label:function e(){return cr.t("125%")}},{value:3,label:function e(){return cr.t("150%")}}];return t}},{key:"renderZoomSection",value:function e(){var t=this;if(!se["isDesktop"])return null;var a=Object(oe["isMac"])()?cr.t("Cmd"):cr.t("Ctrl");var i=parseInt(this.state.currentZoomLevel,10);var s=this.getZoomOptions().map(function(e){return n.a.createElement(ce["a"],{text:e.label(),type:"inline",cursor:"pointer",key:"zoom_option_"+e.value},n.a.createElement(Te["a"],{name:"zoom_set",value:e.value,checked:i===e.value,onChange:t.onChangeZoom}))});return n.a.createElement(r["Fragment"],null,n.a.createElement("h3",{className:"margin_bottom_50"},cr.t("Zoom")),n.a.createElement(Ae["a"],null,s),n.a.createElement("p",{className:"sk_dark_gray margin_bottom_200"},cr.t("You can also change the zoom level by pressing {cmdKey} +/-",{cmdKey:a})))}},{key:"render",value:function e(){var t=this.props.a11yAnimations;var a=n.a.createElement(Re["a"],{onClick:this.onClickKeyboardShortcutsLink},cr.t("handy keyboard shortcuts"));return n.a.createElement("section",null,n.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},cr.t("Accessibility")),this.renderZoomSection(),n.a.createElement("h3",{className:"margin_bottom_50"},cr.t("Animation")),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:cr.t("Allow animated images and emoji"),className:"margin_bottom_200"},n.a.createElement(ue["a"],{onChange:this.onChangeA11yAnimations,name:"a11y_animations",checked:t})),n.a.createElement("h3",{className:"margin_bottom_50"},cr.t("Keyboard")),n.a.createElement("p",null,cr.rt("You can improve the way you use Slack by learning our {keyboardShortcutsLink}.",{keyboardShortcutsLink:a})))}}]);return t}(r["Component"]);dr.displayName="PrefsSectionAccessibility";var pr=function e(t){return{a11yAnimations:Object(q["f"])(t,"a11y_animations"),logger:Object(O["a"])({state:t,label:"PREFS"})}};var hr={setUserPrefByApi:H["c"],closeModal:l["closeModal"],showKeyboardShortcuts:function e(){return sr["h"].apply(void 0,arguments)}};var vr=Object(b["connect"])(pr,hr)(dr);var mr=a(61);var fr=a(1853);var br=a(1556);var gr=a(1258);var _r=a(574);var yr=new y["b"]("prefs");var Or="automatic";var kr=false;var Er={featureSonicInputs:s["b"].bool.isRequired,webappSpellcheck:s["b"].bool.isRequired,fKeySearch:s["b"].bool.isRequired,kKeyOmnibox:s["b"].bool.isRequired,arrowHistory:s["b"].bool.isRequired,excludedChannels:s["b"].array.isRequired,enterIsSpecialInTbt:s["b"].bool.isRequired,msgInputSendBtn:s["b"].bool.isRequired,pagekeysHandled:s["b"].bool.isRequired,confirmUserMarkedAway:s["b"].bool.isRequired,overloadedMessageEnabled:s["b"].bool.isRequired,inProdSurveysEnabled:s["b"].bool.isRequired,allowCallsToSetCurrentStatus:s["b"].bool.isRequired,setUserPrefByApi:s["b"].func.isRequired,logger:s["b"].object.isRequired};var Cr=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(i["bindAll"])(a,["onChangeWebappSpellCheck","onChangeWebappSpellCheckLanguage","onChangeEnterIsSpecial","onChangeArrowHistory","onChangeMsgInputSendBtn","onChangePageKeysHandled","onChangeFKeySearch","onChangeKKeyOmnibox","onChangeSearchExcludeChannels","onClickAppDownloadPathBtn","onChangeConfirmUserMarkedAway","onChangeOverloadedMessageEnabled","onChangeInProdSurveysEnabled","onChangeAllowCallsToSetCurrentStatus","onChangeUseHwAcceleration","onChangeLaunchOnStartup","onChangeRunFromTray"]);a.state={appDownloadPath:Object(se["hasPreference"])("PrefSSBFileDownloadPath")&&Object(se["getPreference"])("PrefSSBFileDownloadPath")||null,launchOnStartup:Object(se["getPreference"])("launchOnStartup"),runFromTray:Object(se["getPreference"])("runFromTray"),useHwAcceleration:Object(se["hasPreference"])("useHwAcceleration")&&Object(se["getPreference"])("useHwAcceleration")||kr,spellcheckerLanguage:Object(se["hasPreference"])("spellcheckerLanguage")&&Object(se["getPreference"])("spellcheckerLanguage")||Or};return a}p()(t,[{key:"onChangeWebappSpellCheck",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed webapp_spellcheck: "+r);this.props.setUserPrefByApi({pref:"webapp_spellcheck",value:r})}},{key:"onChangeWebappSpellCheckLanguage",value:function e(t){var a=this.props.logger;var r=t.value===Or?null:t.value;a.action("Changed spellcheckerLanguage: "+r);Object(se["setPreference"])({name:"spellcheckerLanguage",value:r});this.setState(function(e){return C()({},e,{spellcheckerLanguage:t.value})})}},{key:"onChangeEnterIsSpecial",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed enter_is_special_in_tbt: "+r);this.props.setUserPrefByApi({pref:"enter_is_special_in_tbt",value:r})}},{key:"onChangeArrowHistory",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed arrow_history: "+r);this.props.setUserPrefByApi({pref:"arrow_history",value:r})}},{key:"onChangeMsgInputSendBtn",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed msg_input_send_btn: "+r);this.props.setUserPrefByApi({pref:"msg_input_send_btn",value:r})}},{key:"onChangePageKeysHandled",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed pagekeys_handled: "+r);this.props.setUserPrefByApi({pref:"pagekeys_handled",value:r})}},{key:"onChangeFKeySearch",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed f_key_search: "+r);this.props.setUserPrefByApi({pref:"f_key_search",value:r})}},{key:"onChangeKKeyOmnibox",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed k_key_omnibox: "+r);this.props.setUserPrefByApi({pref:"k_key_omnibox",value:r})}},{key:"onChangeSearchExcludeChannels",value:function e(t){var a=this.props.logger;var r=Object(i["map"])(t,function(e){return e.value});var n=r.join(",");a.action("Changed search_exclude_channels: "+n);this.props.setUserPrefByApi({pref:"search_exclude_channels",value:n})}},{key:"onClickAppDownloadPathBtn",value:function e(){var t=this;var a=this.props.logger;var r=Object(se["getPreference"])("PrefSSBFileDownloadPath")||"";var n={type:"openDirectory",title:yr.t("Select a download location"),defaultPath:r};Object(se["showOpenDialog"])(n,function(e){if(!e)return;var r=e[0];a.action("Changed PrefSSBFileDownloadPath");Object(se["setPreference"])({name:"PrefSSBFileDownloadPath",value:r});t.setState(function(e){return C()({},e,{appDownloadPath:r})})})}},{key:"onChangeConfirmUserMarkedAway",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed confirm_user_marked_away: "+r);this.props.setUserPrefByApi({pref:"confirm_user_marked_away",value:r})}},{key:"onChangeOverloadedMessageEnabled",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed overloaded_message_enabled: "+r);this.props.setUserPrefByApi({pref:"overloaded_message_enabled",value:r})}},{key:"onChangeInProdSurveysEnabled",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed in_prod_surveys_enabled: "+r);this.props.setUserPrefByApi({pref:"in_prod_surveys_enabled",value:r})}},{key:"onChangeAllowCallsToSetCurrentStatus",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed allow_calls_to_set_current_status: "+r);this.props.setUserPrefByApi({pref:"allow_calls_to_set_current_status",value:r})}},{key:"onChangeUseHwAcceleration",value:function e(t){var a=this.props.logger;var r=!t.target.checked;a.action("Changed useHwAcceleration: "+r);Object(se["setPreference"])({name:"useHwAcceleration",value:r});this.setState(function(e){return C()({},e,{useHwAcceleration:r})})}},{key:"onChangeLaunchOnStartup",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed launchOnStartup: "+r);Object(se["setPreference"])({name:"launchOnStartup",value:r});this.setState(function(e){return C()({},e,{launchOnStartup:r})})}},{key:"onChangeRunFromTray",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed runFromTray: "+r);Object(se["setPreference"])({name:"runFromTray",value:r});this.setState(function(e){return C()({},e,{runFromTray:r})})}},{key:"renderSpellCheckLanguages",value:function e(){var t=this.props.webappSpellcheck;var a=this.state.spellcheckerLanguage;if(!window.desktop||!window.desktop.spellCheckingHelper||!window.desktop.spellCheckingHelper.getDictionaries)return null;var r=window.desktop.spellCheckingHelper.getDictionaries();var s=Object(i["map"])(r,function(e){return{label:e.label,value:e.key}});s.unshift({label:yr.t("Automatic by language"),value:Or});var o=Object(i["find"])(s,["value",a]);return n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(fr["a"],{selectId:"spellchecker_languages",selectedOption:o,onOptionSelected:this.onChangeWebappSpellCheckLanguage,options:s,isDisabled:!t}))}},{key:"renderKeyboardShortcutPrefs",value:function e(){var t=this.props,a=t.fKeySearch,i=t.kKeyOmnibox;var s=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(oe["isMac"])()?yr.t("Cmd"):yr.t("Ctrl"));var o=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"F");var l=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"K");var c=n.a.createElement(r["Fragment"],null,yr.rt("<strong>{modKey}{fKey} starts a Slack search</strong>",{modKey:s,fKey:o}),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_light_gray"},yr.t("Overrides normal browser search behavior")));var u=n.a.createElement(r["Fragment"],null,yr.rt("<strong>{modKey}{kKey} starts the Quick Switcher</strong>",{modKey:s,kKey:l}),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_light_gray"},yr.t("Overrides normal behavior in some browsers")));return n.a.createElement(r["Fragment"],null,n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:c},n.a.createElement(ue["a"],{onChange:this.onChangeFKeySearch,checked:a})),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:u},n.a.createElement(ue["a"],{onChange:this.onChangeKKeyOmnibox,checked:i,"data-qa":"quickswitcher_checkbox"})))}},{key:"renderSearchPrefs",value:function e(){var t=this.props.excludedChannels;var a=function e(t){return n.a.createElement(gr["a"],{channelId:t.value,size:"small"})};return n.a.createElement(r["Fragment"],null,n.a.createElement("h2",{className:"margin_bottom_100"},yr.t("Search Options")),se["isDesktop"]?null:this.renderKeyboardShortcutPrefs(),n.a.createElement(ce["a"],{text:yr.t("Exclude these channels from search results:"),cursor:"pointer",className:"margin_top_50"},n.a.createElement(br["a"],{selectedOptions:t,renderOption:a,width:"100%",onSelectedItemsChange:this.onChangeSearchExcludeChannels,selectId:"search_exclude_channels_picker",placeholderText:yr.t("Type a channel name ..."),searcherOptions:{entities:{channels:{includePrivate:false},members:false,userGroups:false},limit:24,sort:{frecency:false,preferChannelsUserBelongsTo:false}}})))}},{key:"renderDownloadLocationPref",value:function e(){var t=this.state.appDownloadPath;return n.a.createElement(r["Fragment"],null,n.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},yr.t("Download Location")),n.a.createElement("p",null,yr.t("Note: this setting is for this computer only and affects all workspaces you are signed in to.")),n.a.createElement(Ut["b"],{name:"app_download_path",id:"app_download_path_input",type:"text",value:t,isDisabled:true,className:"p-prefs_modal__downloads_input"}),n.a.createElement(_r["b"],{onClick:this.onClickAppDownloadPathBtn,type:"outline",className:"p-prefs_modal__downloads_button"},yr.t("Change ...")),n.a.createElement("hr",{className:"margin_top_150 margin_bottom_150"}))}},{key:"renderDesktopPrefs",value:function e(){var t=this.state,a=t.launchOnStartup,i=t.runFromTray,s=t.useHwAcceleration;var o=null;var l=null;var c=null;if(Object(se["hasPreference"])("useHwAcceleration")){var u=n.a.createElement(r["Fragment"],null,n.a.createElement("strong",null,yr.t("Disable hardware acceleration")),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_light_gray"},yr.t("Restart Slack for this preference to take effect.")));o=n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:u},n.a.createElement(ue["a"],{onChange:this.onChangeUseHwAcceleration,checked:!s}))}if(Object(oe["isWindows"])()||Object(oe["isLinux"])()){l=n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:yr.t("Launch app on login")},n.a.createElement(ue["a"],{onChange:this.onChangeLaunchOnStartup,checked:a}));c=n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:yr.t("Leave app running in notification area when the window is closed")},n.a.createElement(ue["a"],{onChange:this.onChangeRunFromTray,checked:i}))}return n.a.createElement(r["Fragment"],null,o,l,c)}},{key:"render",value:function e(){var t=this.props,a=t.featureSonicInputs,i=t.webappSpellcheck,s=t.enterIsSpecialInTbt,o=t.arrowHistory,l=t.msgInputSendBtn,c=t.pagekeysHandled,u=t.confirmUserMarkedAway,d=t.overloadedMessageEnabled,p=t.inProdSurveysEnabled,h=t.allowCallsToSetCurrentStatus;var v=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},yr.t("Shift"));var m=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(oe["isMac"])()?yr.t("Cmd"):yr.t("Ctrl"));var f=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},yr.t("Enter"));var b=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},yr.t("Page Up"));var g=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},yr.t("Page Down"));var _=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"\u2191");var y=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"\u2193");var O=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},yr.t("Home"));var k=n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},yr.t("End"));var E=n.a.createElement(r["Fragment"],null,yr.rt("<strong>When typing code with ```, {enterKey} should not send the message.</strong>",{enterKey:f}),n.a.createElement("br",null),yr.rt('<span className="sk_light_gray">With this checked use {shiftKey}{enterKey} to send.</span>',{shiftKey:v,enterKey:f}));var C=n.a.createElement(r["Fragment"],null,yr.rt("<strong>Use {upKey} and {downKey} to cycle through your typed history.</strong>",{upKey:_,downKey:y}),n.a.createElement("br",null),yr.rt('<span className="sk_light_gray">With this checked use {modKey}{upKey} to edit your last message.</span>',{modKey:m,upKey:_}));var j=n.a.createElement(r["Fragment"],null,yr.rt("<strong>Show send button</strong>"),n.a.createElement("br",null),yr.rt('<span className="sk_light_gray">Press {enterKey} to add a new line.</span>',{enterKey:f}));var w=n.a.createElement(r["Fragment"],null,n.a.createElement("strong",null,yr.t("Send me occasional surveys via Slackbot")),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_light_gray"},yr.t("We\u2019re always working to make Slack better, and we\u2019d love your thoughts.")));var S=n.a.createElement(r["Fragment"],null,yr.rt("<strong>Set my status to \u201c{callEmoji} On a call\u201d when I join a Slack call</strong>",{callEmoji:n.a.createElement(je["b"],{text:":telephone_receiver:"})}),n.a.createElement("br",null),yr.rt('<span className="sk_light_gray">If you already have a status set, Slack won\u2019t change it.</span>'));return n.a.createElement("section",null,n.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},yr.t("Input Options")),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:yr.t("Enable spellcheck on your messages")},n.a.createElement(ue["a"],{onChange:this.onChangeWebappSpellCheck,checked:i})),se["isDesktop"]?this.renderSpellCheckLanguages():null,n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:E},n.a.createElement(ue["a"],{onChange:this.onChangeEnterIsSpecial,checked:s})),a?null:n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:C},n.a.createElement(ue["a"],{onChange:this.onChangeArrowHistory,checked:o})),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:j,className:"margin_bottom_150",id:"msg_input_send_btn_label"},n.a.createElement(ue["a"],{onChange:this.onChangeMsgInputSendBtn,checked:l})),n.a.createElement("hr",{className:"margin_bottom_150 margin_top_150"}),this.renderSearchPrefs(),n.a.createElement("hr",{className:"margin_bottom_150 margin_top_150"}),se["isDesktop"]&&Object(se["hasPreference"])("PrefSSBFileDownloadPath")?this.renderDownloadLocationPref():null,n.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},yr.t("Other Options")),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:yr.rt("<strong>{pageUpKey}, {pageDownKey}, {homeKey}, and {endKey} keys always scroll messages</strong>",{pageUpKey:b,pageDownKey:g,homeKey:O,endKey:k})},n.a.createElement(ue["a"],{onChange:this.onChangePageKeysHandled,checked:c})),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:yr.t("Ask if I want to toggle my away status when I log in after having set myself away")},n.a.createElement(ue["a"],{onChange:this.onChangeConfirmUserMarkedAway,checked:u})),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:yr.t("Send me occasional channel suggestions via Slackbot")},n.a.createElement(ue["a"],{onChange:this.onChangeOverloadedMessageEnabled,checked:d})),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:w},n.a.createElement(ue["a"],{onChange:this.onChangeInProdSurveysEnabled,checked:p})),n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:S},n.a.createElement(ue["a"],{onChange:this.onChangeAllowCallsToSetCurrentStatus,checked:h})),se["isDesktop"]?this.renderDesktopPrefs():null)}}]);return t}(r["Component"]);Cr.displayName="PrefsSectionAdvanced";var jr=function e(t){var a=Object(q["f"])(t,"search_exclude_channels");var r=[];a&&(r=a.split(",").map(function(e){return Object(Be["d"])(t,e)}).filter(function(e){return Object(mr["b"])(e)}).map(function(e){return{label:Object(Ue["getDisplayNameForChannel"])(t,e),value:e.id}}));return{featureSonicInputs:Object(T["isFeatureEnabled"])(t,"feature_sonic_inputs"),webappSpellcheck:Object(q["f"])(t,"webapp_spellcheck"),arrowHistory:Object(q["f"])(t,"arrow_history"),fKeySearch:Object(q["f"])(t,"f_key_search"),kKeyOmnibox:Object(q["f"])(t,"k_key_omnibox"),excludedChannels:r,enterIsSpecialInTbt:Object(q["f"])(t,"enter_is_special_in_tbt"),msgInputSendBtn:Object(q["f"])(t,"msg_input_send_btn"),pagekeysHandled:Object(q["f"])(t,"pagekeys_handled"),confirmUserMarkedAway:Object(q["f"])(t,"confirm_user_marked_away"),overloadedMessageEnabled:Object(q["f"])(t,"overloaded_message_enabled"),inProdSurveysEnabled:Object(q["f"])(t,"in_prod_surveys_enabled"),allowCallsToSetCurrentStatus:Object(q["f"])(t,"allow_calls_to_set_current_status"),logger:Object(O["a"])({state:t,label:"PREFS"})}};var wr={setUserPrefByApi:H["c"]};var Sr=Object(b["connect"])(jr,wr)(Cr);var Ir=a(122);var Tr=new y["b"]("prefs");var Ar={foldersEnabled:s["b"].bool.isRequired,foldersExperimentOn:s["b"].bool.isRequired,featureElectronMemoryLogging:s["b"].bool.isRequired,showMemoryInstrument:s["b"].bool.isRequired,setUserPrefByApi:s["b"].func.isRequired,logger:s["b"].object.isRequired};var Nr=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(i["bindAll"])(a,["onChangeFoldersEnabled","onChangeMemoryInstrument"]);return a}p()(t,[{key:"onChangeFoldersEnabled",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed folders_enabled: "+r);this.props.setUserPrefByApi({pref:"folders_enabled",value:r})}},{key:"onChangeMemoryInstrument",value:function e(t){var a=this.props.logger;var r=t.target.checked;a.action("Changed show_memory_instrument: "+r);this.props.setUserPrefByApi({pref:"show_memory_instrument",value:r})}},{key:"renderFoldersEnabledPref",value:function e(){var t=this.props,a=t.foldersExperimentOn,r=t.foldersEnabled;if(!a)return null;return n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:Tr.t("Make custom collections of channels in your sidebar")},n.a.createElement(ue["a"],{onChange:this.onChangeFoldersEnabled,checked:r}))}},{key:"renderMemoryInstrumentPref",value:function e(){var t=this.props,a=t.featureElectronMemoryLogging,r=t.showMemoryInstrument;if(!a||!se["isDesktop"]||Object(te["a"])())return null;return n.a.createElement(ce["a"],{type:"inline",cursor:"pointer",text:Tr.t("Output memory usage in lower right corner")},n.a.createElement(ue["a"],{onChange:this.onChangeMemoryInstrument,checked:r}))}},{key:"render",value:function e(){return n.a.createElement("section",null,n.a.createElement("h2",{className:"margin_bottom_100","data-qa":"prefs_section_heading"},Tr.t("Labs")),n.a.createElement("p",null,Tr.t("These prefs are internal to Slack Corp. They are not available to customers.")),this.renderFoldersEnabledPref(),this.renderMemoryInstrumentPref())}}]);return t}(r["Component"]);Nr.displayName="PrefsSectionLabs";var Pr=function e(t){return{foldersEnabled:Object(q["f"])(t,"folders_enabled"),foldersExperimentOn:"enabled"===Object(Ir["getGroupForUser"])(t,"folders_sidebar"),showMemoryInstrument:Object(q["f"])(t,"show_memory_instrument"),featureElectronMemoryLogging:Object(T["isFeatureEnabled"])(t,"feature_electron_memory_logging"),logger:Object(O["a"])({state:t,label:"PREFS"})}};var Rr={setUserPrefByApi:H["c"]};var Mr=Object(b["connect"])(Pr,Rr)(Nr);var Dr=a(1739);var xr=new y["b"]("prefs");var Fr={channelId:s["b"].string.isRequired,changePrefsActiveSection:s["b"].func.isRequired,resetChannelNotificationOverrideAndCallApi:s["b"].func.isRequired};var Lr=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onReset=a.onReset.bind(a);a.onGo=a.onGo.bind(a);return a}p()(t,[{key:"onReset",value:function e(){this.props.resetChannelNotificationOverrideAndCallApi({channelId:this.props.channelId})}},{key:"onGo",value:function e(){this.props.changePrefsActiveSection("notifications")}},{key:"render",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Dr["a"],{channelId:this.props.channelId,openPrefsModal:this.onGo}),n.a.createElement("div",{className:"p-prefs_modal__channel_prefs_footer"},n.a.createElement(Re["a"],{onClick:this.onReset},xr.t("Reset to your default notification settings")),n.a.createElement(_r["b"],{type:"primary",onClick:this.onGo},xr.t("Done"))))}}]);return t}(r["Component"]);Lr.displayName="ChannelNotifications";function Br(e){return{resetChannelNotificationOverrideAndCallApi:function t(){return e(V["a"].apply(void 0,arguments))}}}var Ur=Object(b["connect"])(null,Br)(Lr);var qr=a(1205);var Gr=a(2800);var Wr=new y["b"]("prefs");var Hr={featureTinyspeck:s["b"].bool.isRequired,teamId:s["b"].string.isRequired,teamName:s["b"].string.isRequired,activeSection:s["b"].oneOf(Object(i["map"])(qr["a"],"id")),activeSubsection:s["b"].string,setLastActiveSection:s["b"].func.isRequired,showOpenTransition:s["b"].bool.isRequired,teamSidebarVisible:s["b"].bool.isRequired};var Vr={activeSection:null,activeSubsection:null};var Kr=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={activeSection:e.activeSection,activeSubsection:e.activeSubsection,channelId:null};a.savedScrollTop=0;a.bodyRef=null;Object(i["bindAll"])(a,["renderActiveSection","renderSidebarItems","setActiveSection","onBack","setBodyRef"]);return a}p()(t,[{key:"componentDidMount",value:function e(){this.maybeHighlightSubsection()}},{key:"componentDidUpdate",value:function e(){this.maybeHighlightSubsection()}},{key:"onBack",value:function e(){this.setActiveSection({sectionId:"notifications"})}},{key:"setBodyRef",value:function e(t){this.bodyRef=t}},{key:"setActiveSection",value:function e(t){var a=this;var r=t.sectionId,n=t.subsectionId,i=t.channelId;var s=this.state.activeSection;if(!r||r===s)return;"channel"===r?this.bodyRef&&(this.savedScrollTop=this.bodyRef.scrollTop):this.props.setLastActiveSection(r);this.setState(function(){return{activeSection:r,activeSubsection:n,channelId:i}},function(){if("channel"===s&&"notifications"===r&&a.bodyRef&&a.savedScrollTop){a.bodyRef.scrollTop=a.savedScrollTop;a.savedScrollTop=0}})}},{key:"maybeHighlightSubsection",value:function e(){var t=this;if(!this.state.activeSubsection)return;var a=this.state,r=a.activeSection,n=a.activeSubsection;var i=this.props.teamId;requestAnimationFrame(function(){var e=t.bodyRef.querySelector("#"+n);if(!e){Object(O["a"])({teamId:i}).warn("Unable to scroll to element #"+n+" in section "+r+". This is a programming error.");return}e.scrollIntoView({behavior:"smooth"});e.classList.add("c-highlight");t.setState(function(){return{activeSubsection:""}})})}},{key:"renderActiveSection",value:function e(){switch(this.state.activeSection){case"notifications":return n.a.createElement(yt,{changePrefsActiveSection:this.setActiveSection});case"language_region":return n.a.createElement(At,null);case"messages_media":return n.a.createElement(Yt,null);case"sidebar":return n.a.createElement(Xa,null);case"mark_as_read":return n.a.createElement(ir,null);case"accessibility":return n.a.createElement(vr,null);case"advanced":return n.a.createElement(Sr,null);case"labs":return n.a.createElement(Mr,null);case"channel":return n.a.createElement(Ur,{channelId:this.state.channelId,changePrefsActiveSection:this.setActiveSection});default:return n.a.createElement(yt,null)}}},{key:"renderSidebarItems",value:function e(){var t=this;var a=this.props.featureTinyspeck;var r=Object(i["filter"])(qr["a"],function(e){return(!e.tsOnly||e.tsOnly&&a)&&"channel"!==e.id});return r.map(function(e){return n.a.createElement(F["a"],{itemId:e.id,onClick:function a(){return t.setActiveSection({sectionId:e.id})},key:e.id,"data-qa":"prefs_modal_"+e.id},e.name())})}},{key:"render",value:function e(){var t=this.props,a=t.teamName,r=t.showOpenTransition,i=t.teamSidebarVisible;var s=this.state,o=s.activeSection,l=s.channelId;var c="channel"===o?Wr.rt("Notification Preferences: {channelName}",{channelName:n.a.createElement(B["b"],{channelId:l,inline:true})}):Wr.rt("Your preferences for {teamName}",{teamName:a});return n.a.createElement(L["a"],{title:c,withHeader:true,showGoButton:false,showCancelButton:false,showOpenTransition:r,modalClasses:_()("p-prefs_modal",{"p-prefs_modal--sidebar-open":"sidebar"===o&&!i,"p-prefs_modal--sidebar-open-multi-team":"sidebar"===o&&i}),contentLabel:"prefs-modal","data-qa":"prefs_modal",fullBleedModalBodyContent:true,showBackButton:"channel"===o,onBack:this.onBack,setBodyRef:this.setBodyRef},n.a.createElement("div",{className:"p-prefs_modal__sidebar_overlay"}),"channel"===o?null:n.a.createElement("div",{className:"p-prefs_modal__sidebar_container"},n.a.createElement(F["b"],{activeItemId:o},this.renderSidebarItems())),n.a.createElement("div",{className:"p-prefs_modal__content_container"},n.a.createElement(I,{key:this.state.activeSection,subtype:"prefs_modal"},this.renderActiveSection())))}}]);return t}(r["Component"]);Kr.displayName="PrefsModal";Kr.defaultProps=Vr;var zr=function e(t,a){var r=Object(M["d"])(t);return{featureTinyspeck:Object(T["isFeatureEnabled"])(t,"feature_tinyspeck"),teamId:r.id,teamName:Object(D["getTeamDisplayName"])(r),showOpenTransition:N(t),activeSection:a.activeSection||P(t),teamSidebarVisible:Object(x["b"])(t)}};var Yr={setLastActiveSection:function e(){return R["a"].apply(void 0,arguments)}};var Qr=Object(b["connect"])(zr,Yr)(Kr);var Jr=Qr;var Zr=Object(o["b"])("Opens the prefs modal",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(l["openModal"])({element:n.a.createElement(Jr,a)}))});Zr.propTypes={activeSection:s["b"].oneOf(Object(i["map"])(qr["a"],"id")),activeSubsection:s["b"].string};var Xr=t["a"]=Zr},function(e,t,a){"use strict";var r=a(1853);t["a"]=r["a"]},,function(e,t,a){"use strict";a.d(t,"c",function(){return i});a.d(t,"a",function(){return s});a.d(t,"b",function(){return o});a.d(t,"d",function(){return l});var r=a(0);var n=a(18);var i=Object(n["b"])("Set a channel notification override");i.propTypes={channelId:r["b"].string.isRequired,name:r["b"].string.isRequired,value:r["b"].any,sync:r["b"].bool};var s=Object(n["b"])("Remove a channel from the list of overrides");s.propTypes={channelId:r["b"].string.isRequired};var o=Object(n["b"])("Insert a channel notification override");o.propTypes={channelId:r["b"].string.isRequired,override:r["b"].object.isRequired};var l=Object(n["b"])("Set a notification pref");l.propTypes={name:r["b"].string.isRequired,value:r["b"].any,sync:r["b"].bool}},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var r,n,i;false;e.exports=a(2268)()},,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",function(){return s});a.d(t,"a",function(){return l});var r=a(2);var n=a.n(r);var i=a(14);var s=Object(i["b"])(function(e,t){return!!(e&&e.topics&&e.topics[t]&&e.topics[t].desynced)});var o=Object(r["memoize"])(r["some"]);var l=Object(i["b"])(function(e){return o(e&&e.topics,function(e){return e.desynced})})},,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return l});a.d(t,"c",function(){return c});a.d(t,"d",function(){return u});a.d(t,"b",function(){return d});var r=a(0);var n=a(29);var i=a(25);var s=a(332);var o=a(1077);var l={internalError:"internal_error",validationFailed:"validation_failed"};var c=Object(i["a"])("get the contents of an app view",function(e,t,a){var r=e(Object(n["a"])({method:"views.get",reason:"get-view-by-id",args:{view_id:a}})).then(function(e){var t=e.view;return t});return Object(o["a"])(r)});c.propTypes=r["b"].string;var u=Object(i["a"])("submit an app view dialog",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.view,i=a.viewState;var o=s["a"].generateAndEnqueue();var l={client_token:o,view_id:r.id,state:JSON.stringify(i)};return e(Object(n["a"])({method:"views.submit",reason:"submit-view",args:l})).catch(function(e){var t=e.data||{};throw t})});u.propTypes={view:r["b"].object,viewState:r["b"].object};var d=Object(i["a"])("close an app view",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.view;var i=s["a"].generateAndEnqueue();var l={client_token:i,view_id:r.id};var c=e(Object(n["a"])({method:"views.close",reason:"close-view",args:l})).catch(function(e){var t=e.data||{};var a=new Error(e.message);a.data={error:t.error,dialogErrors:t.dialog_errors};throw a});return Object(o["a"])(c)});d.propTypes={view:r["b"].object}},,,,,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"setPaidFeatures",function(){return h});a.d(t,"getPaidFeatures",function(){return f});a.d(t,"isFeaturePurchased",function(){return b});a.d(t,"isEKMPurchased",function(){return g});var r=a(5);var n=a.n(r);var i=a(26);var s=a.n(i);var o=a(0);var l=a(18);var c=a(36);var u=a(14);var d=a(2);var p=a.n(d);var h=Object(l["b"])("Store the paid features in redux.");h.propTypes=o["b"].arrayOf(o["b"].string);var v=[];var m=Object(c["b"])(n()({},h,function(e,t){if(!Array.isArray(t)||Object(d["isEqual"])([].concat(s()(t)).sort(),[].concat(s()(e)).sort()))return e;return[].concat(s()(t))}),v,{persistenceEnabled:true});m.propTypes=o["b"].arrayOf(o["b"].string);t["default"]=m;var f=Object(u["b"])(function(e){return e&&e.paidFeatures});var b=Object(u["b"])(function(e,t){return e&&e.paidFeatures&&-1!==e.paidFeatures.indexOf(t)});var g=Object(u["b"])(function(e){return b(e,"ekm")})},,,,,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(2);var l=a(47);var c=a(4);var u=a(302);var d=a(52);var p=a(840);var h=a(0);var v=a(25);var m=a(29);var f=a(71);var b=a(49);var g=Object(o["random"])(1,100);var _=["apps_uninstalled","channel_deleted","channel_history_changed","commands_changed","email_shared","emoji_changed","external_org_migration_started","external_org_migration_finished","file_deleted","group_history_changed","im_deleted","im_history_changed","message","mpim_history_changed","pin_added","pin_removed","star_added","star_removed","subteam_deleted","teams_left_shared_channel"];var y=[].concat(_,["channel_converted_to_shared","team_rename","team_domain_change"]);var O=function e(){return Object(b["a"])()?_.join(","):y.join(",")};var k=function e(){return g<=5?3e3:2e3};var E=Object(v["a"])("Immediately calls eventlog.history",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.start,n=a.count,i=void 0===n?k():n,s=a.noPayloadIfHasMore,o=void 0===s||s,l=a.batchDeletedFiles,u=void 0===l||l,d=a.include,p=void 0===d?O():d;if(!r)return Promise.reject(new Error("A start timestamp is required"));var h={start:r,count:i,no_payload_if_has_more:o,batch_deleted_files:u};Object(c["isFeatureEnabled"])(t(),"feature_message_history_cfm")&&(h.include_events=p);return e(Object(m["a"])({method:"ublockworkaround.history",reason:"fetchEventLogHistoryImmediately",args:h,EXPEDITED:true})).tap(function(e){var a=Object(f["c"])({getState:t});o&&e&&e.has_more&&(g<=5?a.count("overflow_3000_5p"):g<=10&&a.count("overflow_2000_5p"))})});E.propTypes=h["b"].object;var C={EVENTS:_,LEGACY:y,getDefaultInclude:O};var j=a(12);var w=a(288);var S=a(23);var I=a(27);var T=a(228);var A=a(26);var N=a.n(A);var P=a(525);var R=a.n(P);function M(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=r.beforeEachChunk,i=r.afterEachChunk;var s=Object(o["chunk"])(e,t);return new Promise(function(e,t){return D(s,a,e,t,n,i)})}function D(e,t,a,r,n,i){var s=R()(e),o=s[0],l=void 0===o?[]:o,c=s.slice(1);var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];setTimeout(function(){try{n&&n();var e=[].concat(N()(u),N()(l.map(t)));i&&i();if(!c.length)return a(e);return D(c,t,a,r,n,i,e)}catch(e){return r(e)}},0)}var x={};Object.defineProperty(x,"recursivelyProcessChunksAsync",{get:function e(){return D},set:function e(t){D=t}});var F=a(65);a.d(t,"a",function(){return G});a.d(t,"b",function(){return W});a.d(t,"c",function(){return Y});a.d(t,"d",function(){return Q});a.d(t,"f",function(){return J});a.d(t,"e",function(){return Z});var L={};var B="EVENTLOG";var U=Object(T["a"])(1);var q=100;function G(e){if(!L[e]){L[e]=new z(e);Object(F["exportToTeamDebugger"])(e,"eventlog",{instance:L[e],triggerGapDetection:function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(I["a"])(e,Object(u["eventlogGapDetected"])(a))}})}}function W(e){return L[e]}function H(e){switch(e.type){case"file_change":if(e.file&&e.file.id)return e.type+"_"+e.file.id;break;case"user_change":if(e.user&&e.user.id)return e.type+"_"+e.user.id;break;case"emoji_changed":if("add"===e.subtype&&Object(o["isString"])(e.name)&&Object(o["isString"])(e.value)){var t={name:e.name,value:e.value};return"emoji_changed_add_"+JSON.stringify(t)}if("remove"===e.subtype&&Object(o["isArray"])(e.names))return"emoji_changed_remove_"+JSON.stringify(e.names);return e.type;case"message.channel_history_changed":case"message.group_history_changed":case"message.mpim_history_changed":case"message.im_history_changed":if(Object(o["isString"])(e.channel))return e.type+"_"+e.channel;break;default:}return}function V(e,t){return Object(o["reduceRight"])(e,function(e,a){t(a)&&e.unshift(a);return e},[])}function K(e){var t={};var a=V(e,function(e){var a=H(e);if(!a)return true;if(t[a])return false;t[a]=true;return true});return a}var z=function(){function e(t){n()(this,e);if(!t)throw new Error("Eventlog requires a teamId");this._teamId=t;this._logger=Object(j["a"])({teamId:this._teamId});this._telemeter=Object(f["c"])({state:this._getState()});this._lastAttemptWasCancelled=false;this._eventlogHistoryP=void 0;this._shouldPersistLastEventTimestamp=true;Object(w["a"])(this)}s()(e,[{key:"_dispatchReduxAction",value:function e(t){return Object(I["a"])(this._teamId,t)}},{key:"_getState",value:function e(){return Object(I["c"])(this._teamId)}},{key:"_info",value:function e(t){this._logger.info(B,t)}},{key:"_warn",value:function e(t){this._logger.warn(B,t)}},{key:"_eventlogErrorHandler",value:function e(t){var a=t&&t.data?t.data.error:null;if("timestamp_too_old"===a){U&&this._telemeter.count("el_reload_too_old");this._dispatchReduxAction(Object(u["eventlogGapDetected"])(u["EVENTLOG_GAP_REASON_TIMESTAMP_TOO_OLD"]));return}this._warn("eventlog: encountered error");this._logger.error(t,"eventlog");U&&this._telemeter.count("el_error");this._dispatchReduxAction(Object(u["eventlogGapDetected"])(u["EVENTLOG_GAP_REASON_ERROR"]))}},{key:"_eventlogOKHandler",value:function e(t){var a=this;if(t.has_more){U&&this._telemeter.count("el_reload_has_more");this._dispatchReduxAction(Object(u["eventlogGapDetected"])(u["EVENTLOG_GAP_REASON_HAS_MORE"]));return Promise.resolve()}U&&this._telemeter.count("el_ok");if(!t.events){this._warn("eventlog: history call did not include events");return Promise.resolve()}U&&this._telemeter.store("el_event_count",t.events.length);if(!t.events.length){this._info("nothing to process");return Promise.resolve()}t.events.forEach(function(e){e._from_evt_log=true});var r=K(t.events);this._info("processing "+r.length+" events out of a total set of "+t.events.length);U&&this._telemeter.mark("el_processing_mark");this._dispatchReduxAction(Object(l["g"])());return M(r,q,function(e){a._dispatchReduxAction(Object(d["socketMessageReceived"])(e))},{beforeEachChunk:function e(){U&&a._telemeter.mark("el_chunk_processing_mark")},afterEachChunk:function e(){U&&a._telemeter.measureAndClear("el_chunk_processing_mark","eventlog_chunk_processing_timings")}}).then(function(){if(U){var e=void 0;var t=r.length;e=t<256?"128_256":t<512?"256_512":t<1024?"512_1024":"1024_inf";a._telemeter.measureAndClear("el_processing_mark","eventlog_processing_"+e)}U&&a._telemeter.store("el_event_count_filtered",r.length);if(r.length>0){var n=r[r.length-1].event_ts;if(n){var i=Object(u["getLastKnownEventTimestamp"])(a._getState())||0;n>i&&a.setLastEventTimestamp(n)}}}).finally(function(){a._dispatchReduxAction(Object(l["h"])())})}},{key:"onSocketConnected",value:function e(t){var a=this;var r=Object(u["getLastKnownEventTimestamp"])(this._getState());if(!r){this._shouldPersistLastEventTimestamp=true;return}this._info("fr="+t+", lc="+this._lastAttemptWasCancelled+", lt="+r);if(t&&!this._lastAttemptWasCancelled){this._shouldPersistLastEventTimestamp=true;return}var n=Math.round(Math.ceil(Date.now()/1e3)-r);this._info("fetching events since "+r+" ("+n+" seconds ago)");var i=this._dispatchReduxAction(E({start:r})).then(function(e){return a._eventlogOKHandler(e)}).catch(function(e){return a._eventlogErrorHandler(e)});i.finally(function(){a._eventlogHistoryP=void 0;a._info("fetched finish (cancelled? "+i.isCancelled()+")");a._lastAttemptWasCancelled=!!i.isCancelled();if(!i.isCancelled()){a._info("dispatching signal and clearing timestamp");a._dispatchReduxAction(Object(u["setLastKnownEventTimestamp"])(null));a._shouldPersistLastEventTimestamp=true}});this._eventlogHistoryP=i}},{key:"onSocketDisconnected",value:function e(){this._shouldPersistLastEventTimestamp=false;if(this._eventlogHistoryP){this._info("socket was closed while we were fetching history; cancelling our request");this._eventlogHistoryP.cancel();this._eventlogHistoryP=void 0}}},{key:"replayEventlog",value:function e(t){var a=this;var r=t.start,n=t.include;this._dispatchReduxAction(E({start:r,include:n})).then(function(e){return a._eventlogOKHandler(e)}).catch(function(e){return a._eventlogErrorHandler(e)})}},{key:"setLastEventTimestamp",value:function e(t){var a=this._getState();if(t&&this._shouldPersistLastEventTimestamp){if(Object(c["isFeatureEnabled"])(a,"feature_desync_resync")&&Object(p["a"])(a))return;this._dispatchReduxAction(Object(u["setLastKnownEventTimestamp"])(t))}}}]);return e}();function Y(e,t){var a=e();var r=Object(S["c"])(a);var n=L[r];if(!n)return;n.onSocketConnected(t)}function Q(e){var t=e();var a=Object(S["c"])(t);var r=L[a];if(!r)return;r.onSocketDisconnected()}function J(e,t){var a=t.start,r=t.include;var n=e();var i=Object(S["c"])(n);var s=L[i];if(!s)return;s.replayEventlog({start:a,include:r})}function Z(e,t){if(t._from_evt_log)return;var a=t.event_ts;if(!a)return;var r=e();var n=Object(S["c"])(r);var i=L[n];if(!i)return;i.setLastEventTimestamp(a)}var X={LOG_PREFIX:B};Object.defineProperty(X,"filterEvents",{get:function e(){return K},set:function e(t){K=t}});Object.defineProperty(X,"instances",{get:function e(){return L},set:function e(t){L=t}});Object.defineProperty(X,"onSocketConnected",{get:function e(){return Y},set:function e(t){Y=t}});Object.defineProperty(X,"onSocketDisconnected",{get:function e(){return Q},set:function e(t){Q=t}});Object.defineProperty(X,"onSocketMessage",{get:function e(){return Z},set:function e(t){Z=t}})},,,,function(e,t,a){"use strict";a.d(t,"a",function(){return o});a.d(t,"b",function(){return l});a.d(t,"c",function(){return c});var r=a(209);var n=a(108);var i=a(48);var s=a(196);var o={MESSAGE_PANE:"message_pane",WINDOW_NOT_FOCUSED:"window_not_focused",WORKSPACE_NOT_FOCUSED:"workspace_not_focused",MODAL:"fs_modal_is_showing",SEARCH:"universal_search_is_showing"};function l(e){if(!Object(n["h"])(e))return o.WORKSPACE_NOT_FOCUSED;if(!Object(r["isWindowFocused"])(e))return o.WINDOW_NOT_FOCUSED;if(Object(i["isModalOpen"])(e))return o.MODAL;if(Object(s["o"])(e))return o.SEARCH;return o.MESSAGE_PANE}function c(e){return l(e)===o.MESSAGE_PANE}},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(1361);t["a"]=r["a"]},,,,,,,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(0);var p=a(1);var h=a(13);var v=a(2);var m=a(23);var f=function e(t,a){return t+"-"+a};var b={add:function e(t,a,r){this.sections||(this.sections={});var n=f(t,a);if(this.sections[n])return;this.sections[n]=r},remove:function e(t,a){if(!this.sections)return;var r=f(t,a);if(!this.sections[r])return;this.sections[r]=null;delete this.sections[r]},get:function e(t,a){if(!this.sections)return;return this.sections[f(t,a)]}};var g=b;var _={teamId:d["b"].string.isRequired,order:d["b"].number.isRequired,component:d["b"].object.isRequired,children:d["b"].node};var y={children:null};var O=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=e.component,i=r.focus,s=r.blur;var o=Object(v["isFunction"])(i)&&Object(v["isFunction"])(s);if(o)return l()(a);throw new Error("FocusableSection requires a single child that implements focus and blur methods.")}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.teamId,r=t.order,n=t.component;g.add(a,r,n)}},{key:"componentWillUnmount",value:function e(){var t=this.props,a=t.teamId,r=t.order;g.remove(a,r)}},{key:"render",value:function e(){return this.props.children}}]);return t}(p["PureComponent"]);O.displayName="FocusableSection";O.defaultProps=y;var k=function e(t){return{teamId:Object(m["c"])(t)}};var E=Object(h["connect"])(k)(O);a.d(t,"a",function(){return E});a.d(t,"b",function(){return g})},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(0);var s=a(4);var o=a(24);var l=a(34);var c=a(35);var u=a(23);var d=a(11);var p=a(17);var h=a(41);var v=a(31);var m=a(514);var f=a(42);var b=a(30);var g=a(10);var _=a(1219);var y=a(38);var O=a(478);var k=a(573);var E=a(2);var C=a(124);var j=a(1208);var w=a(393);var S=a(1168);function I(e,t){var a=Object(j["a"])(e,{text:t,tsfMode:"GROWL"});var r=Object(w["a"])(a);var n=Object(C["o"])(e)?r:Object(S["a"])(e,{messageText:r,teamId:Object(u["c"])(e)});if(f["isDesktop"]&&Object(f["canShowHtmlNotifications"])())return Object(E["escape"])(n);return n}var T=I;var A=new g["b"]("growl");function N(e,t,a,r){var n=F(e,t,a._ignore_dnd);var i=L(e,t);var s=r.skip_formatting?a.content:P(e,x(e,t,a),a);return{title:n,subtitle:i,content:s}}function P(e,t,a){if(Object(y["a"])())return T(e,t,a);return Object(O["c"])(t,a,{for_growl:true})}function R(e,t,a,r,n){var i={teamId:Object(u["c"])(e),msg:D(a),channel:t.id||"",thread_ts:a&&a.thread_ts,ssbFilename:Object(k["a"])(n),launchUri:r.launch_uri||B(e,t,a),imageUri:r.image_uri||Object(h["getMessageAttachmentImage"])(e,a)};!i.ssbFilename&&Object(b["isSSBAndAtLeastVersion"])("3.0.0")&&(i.silent=true);if(Object(b["isSSBAndAtLeastVersion"])("3.3.0")){i.channelName=Object(d["getDisplayNameForChannel"])(e,t,{imIncludeAtSign:false})||"";i.authorName=a&&Object(p["getPrefCompliantMemberNameById"])(e,a.user);i.avatarImage=Object(o["h"])(e,a.user,192)||r.avatar_image}else i.avatarImage=r.avatar_image||Object(o["h"])(e,a.user);return i}function M(e,t){var a="tag_"+(t&&(t.id||t.ts)||Date.now());var r=Object(s["getFromBootData"])(e,"img");var n=r&&r.app_icon;return{icon:n,tag:a}}function D(e){return e&&(e.ts||e.msg)||""}function x(e,t,a){var r=Object(l["f"])(e,"no_text_in_notifications");var n=r?"":U(e,a);if(Object(d["isIm"])(t))return n;var i=Object(p["getPrefCompliantMemberNameById"])(e,a.user)||"";var s="";i&&(s+=r?A.t("a message from {name}",{name:i}):i+": ");s+=n;return s}function F(e,t,a){if(!t)return"";var r=Object(g["o"])(Object(d["getDisplayNameForChannel"])(e,t,{imIncludeAtSign:false}));if(Object(s["signedIntoOtherAccounts"])(e)&&f["isDesktop"]){var n=Object(c["d"])(e);if(Object(b["isMac"])())return Object(v["getTeamDisplayName"])(n);if(Object(d["isIm"])(t))return a?A.t("{name} is trying to reach you",{name:r}):A.t("[{team_domain}] from {name}",{team_domain:n.domain,name:r});return A.t("[{team_domain}] in {channel}",{team_domain:n.domain,channel:r})}if(Object(d["isIm"])(t))return a?A.t("{name} is trying to reach you",{name:r}):A.t("New message from {name}",{name:r});return A.t("New message in {channel}",{channel:r})}function L(e,t){if(!t||!Object(b["isMac"])()||!f["isDesktop"]||!Object(s["signedIntoOtherAccounts"])(e))return"";return Object(d["getDisplayNameForChannel"])(e,t,{imIncludeAtSign:false})}function B(e,t,a){if(!t||!a||!a.ts)return null;return["slack://channel","?id="+t.id,"&message="+a.ts,"&team="+Object(u["c"])(e),a.thread_ts?"&thread_ts="+a.thread_ts:""].join("")}function U(e,t){if(!t)return"";var a=Object(h["shouldRenderFileThread"])(t,{featureFileThreads:Object(s["isFeatureEnabled"])(e,"feature_file_threads"),featureFileThreadsDarkLaunch:Object(s["isFeatureEnabled"])(e,"feature_file_threads_dark_launch")});var r=a&&t.files&&t.files.length?t.files[0]:t.file;var n=r&&a&&!t.text||Object(m["b"])(t.subtype);var i=void 0;i=n?Object(_["b"])(e,t,r):t.text?t.text:t.attachments&&t.attachments.length?q(t.attachments)||i:t.type+" "+t.subtype+" "+A.t("(message missing text)");return G(i)}function q(e){for(var t=0;t<e.length;t+=1){var a=e[t];if(a.fallback)return a.fallback;if(a.text)return a.text;if(a.pretext)return a.pretext;if(a.footer)return a.footer}return null}function G(e){return e.replace(":simple_smile:",":)")}var W=a(12);var H=a(308);var V=a(100);var K=a(19);var z=a(15);var Y=a(1079);var Q=a(239);var J=a(1209);var Z=a(281);var X=a(771);var $=a(298);a.d(t,"a",function(){return re});a.d(t,"d",function(){return ne});a.d(t,"c",function(){return ie});a.d(t,"b",function(){return oe});var ee={DEFAULT:5e3,LONG:1e4};var te=80;var ae=Object(W["b"])();var re=Object(z["b"])("Switch primary or secondary view on notification click",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.messageTs,i=a.threadTs;if("launch_uri"===r&&i)Object($["f"])(i);else{var s=i&&i!==n;e(s?Object(V["l"])({channelId:r,threadTs:i,highlightTs:n}):Object(H["a"])({id:r}))}});re.propTypes={channelId:i["b"].string.isRequired,messageTs:i["b"].string.isRequired,threadTs:i["b"].string};var ne=Object(z["b"])("Show a desktop notification",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.message,i=a.modelObject,o=a.options;if(!r||!i||Object(d["isNonExistent"])(i)){ae.warn("NOTIFICATIONS","Cannot show notification, missing arguments");return}if(!Object(Q["f"])()){ae.warn("NOTIFICATIONS","Cannot show notification, permission denied");return}if(Object(Z["d"])()&&!o.is_call_notification){ae.warn("NOTIFICATIONS","Cannot show notification while screen-sharing");return}var l=t();var c=o||{};var u=Object(s["isFeatureEnabled"])(l,"feature_modern_sounds");le(l);Object(Z["b"])().then(function(t){var a="new_message";if(t)a="none";else if(Object(y["a"])()&&u){Object(Q["e"])(l)&&Object(J["a"])(Object(Q["l"])(l));a="none"}else if(!Object(f["shouldAttachSoundToNotification"])()){Object(k["c"])("new_message");a="none"}if(f["isDesktop"])Object(f["notify"])(n()({},N(l,i,r,c),R(l,i,r,c,a)));else{var s=function t(){e(re({channelId:i.id,messageTs:D(r),threadTs:r.thread_ts}))};se(n()({},N(l,i,r,c),M(l,r)),s)}})});ne.propTypes={modelObject:i["b"].object.isRequired,message:i["b"].object.isRequired,options:i["b"].object};var ie=Object(z["b"])("Show a desktop notification",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.text;var n=t();var i=Object(K["i"])(n,"USLACKBOT");e(ne({message:{channel:i.id,user:"USLACKBOT",text:r,ts:Object(X["a"])()},modelObject:i}))});ie.propTypes={text:i["b"].string.isRequired};function se(e,t){var a=e.title,r=e.content,n=e.icon,i=e.tag;if(!window.Notification){ae.warn("NOTIFICATIONS","window.Notification is not supported");return}var s=new Notification(a,{body:r,icon:n,tag:i});var o=function e(){window.focus();t&&t();s.close()};var l=function e(){setTimeout(function(){return s.close()},r&&r.length>te?ee.LONG:ee.DEFAULT)};try{s.onclick=o;s.onshow=l}catch(e){ae.error("NOTIFICATIONS","Unable to assign Notification event handlers",e);l()}}var oe=Object(z["b"])("Prompt for permission to send desktop notifications",function(e,t,a){var r=a.callback;if(!Q["a"]){r&&r(false,-1);return}var n=function t(){r&&r(Object(Q["f"])(),Object(Q["n"])());e(Object(Y["setNotificationPermission"])(Object(Q["n"])()))};window.webkitNotifications&&window.webkitNotifications.requestPermission&&window.webkitNotifications.checkPermission?window.webkitNotifications.requestPermission(n):window.Notification&&window.Notification.requestPermission(n)});oe.propTypes={callback:i["b"].func};function le(e){if(!f["isDesktop"])return;if(!Object(l["f"])(e,"mac_ssb_bounce"))return;"long"===Object(l["f"])(e,"mac_ssb_bounce")?Object(f["bounceIndefinitely"])():Object(f["bounceOnce"])()}},,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"shiftToast",function(){return O});a.d(t,"clearQueue",function(){return E});a.d(t,"getCurrentToast",function(){return j});a.d(t,"getToastQueue",function(){return w});a.d(t,"queueToast",function(){return I});var r=a(3);var n=a.n(r);var i=a(5);var s=a.n(i);var o=a(26);var l=a.n(o);var c=a(0);var u=a(2);var d=a.n(u);var p=a(18);var h=a(36);var v=a(14);var m=a(15);var f;var b=c["b"].shape({key:c["b"].string.isRequired,emoji:c["b"].string.isRequired,userId:c["b"].string.isRequired,channelId:c["b"].string.isRequired,otherUsers:c["b"].objectOf(c["b"].bool)}).isRequired;var g=c["b"].arrayOf(b);var _=[];var y=Object(p["b"])("Push a toast object to the back of the queue");y.propTypes=b;var O=Object(p["b"])("Shift/pop a toast object off the front of the queue");O.propTypes=null;var k=Object(p["b"])("Replace the queue object");k.propTypes=g;var E=Object(p["b"])("Clear the queue");E.propTypes=null;var C=Object(h["b"])((f={},s()(f,y,function(e,t){return[].concat(l()(e),[t])}),s()(f,O,function(e){return e.slice(1)}),s()(f,k,function(e,t){return t}),s()(f,E,function(){return[]}),f),_,{persistenceEnabled:false});C.propTypes=g;t["default"]=C;var j=Object(v["b"])(function(e){return e.reactionsToast&&e.reactionsToast[0]});var w=Object(v["b"])(function(e){return e.reactionsToast});var S=function e(t,a){return t.key===a.key&&t.emoji===a.emoji};var I=Object(m["b"])("Push a reaction key to the back of the queue if it's not in the queue already",function(e,t,a){var r=w(t());var i=Object(u["find"])(r,function(e){return S(e,a)});if(i){var o=n()({},i,{otherUsers:n()({},i.otherUsers,s()({},a.userId,true))});var l=r.map(function(e){return e===i?o:e});e(k(l));return}e(y(a))});I.propTypes=b},,,,function(e,t,a){"use strict";a.r(t);a.d(t,"addPendingOpenChannel",function(){return v});a.d(t,"clearPendingOpenChannel",function(){return m});a.d(t,"getShouldBecomeActive",function(){return g});a.d(t,"getPendingMsgForChannel",function(){return _});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(2);var c=a.n(l);var u=a(18);var d=a(36);var p=a(14);var h;var v=Object(u["b"])("Store intent to make a channel active (display it) and/or send a message after opening it");v.propTypes={channelId:o["b"].string,memberId:o["b"].string,shouldBecomeActive:o["b"].bool,msgText:o["b"].string};var m=Object(u["b"])("Clear intent to make a channel active (display it) and send a message after opening it");m.propTypes={channelId:o["b"].string,memberId:o["b"].string};var f={};var b=Object(d["b"])((h={},n()(h,v,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.memberId,i=t.msgText,o=t.shouldBecomeActive,l=void 0===o||o;var c=a||r;if(!c)return e;if(e&&e[c]&&e[c].msgText===i)return e;return s()({},e,n()({},c,{msgText:i,shouldBecomeActive:l}))}),n()(h,m,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.memberId;if(!a&&!r)return e;if(!e[a]&&!e[r])return e;return c.a.omit(e,[a,r])}),h),f,{persistenceEnabled:true});b.propTypes=o["b"].objectOf(o["b"].shape({msgText:o["b"].string,shouldBecomeActive:o["b"].bool}));t["default"]=b;var g=Object(p["b"])(function(e,t){return e&&e.pendingOpenChannel&&e.pendingOpenChannel[t]&&e.pendingOpenChannel[t].shouldBecomeActive});var _=Object(p["b"])(function(e,t){return e&&e.pendingOpenChannel&&e.pendingOpenChannel[t]&&e.pendingOpenChannel[t].msgText})},,,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(0);var p=a(1);var h=a.n(p);var v=a(2);var m=a.n(v);var f=a(927);var b={headers:d["b"].array,rows:d["b"].array,headerItemOnClick:d["b"].func,rowHeaderItemClassName:d["b"].string,rowClassName:d["b"].string,onRequestNextPage:d["b"].func,sortBy:d["b"].string,sortDir:d["b"].string,searchQuery:d["b"].string,height:d["b"].string,onResetData:d["b"].func,isLoading:d["b"].bool,newQuery:d["b"].bool,useKeyboardNavigableTable:d["b"].bool,autoHeight:d["b"].bool};var g={headers:[],rows:[],rowHeaderItemClassName:null,rowClassName:null,headerItemOnClick:v["noop"],onRequestNextPage:v["noop"],sortBy:null,sortDir:null,searchQuery:"",height:null,onResetData:v["noop"],isLoading:false,newQuery:false,useKeyboardNavigableTable:false,autoHeight:false};var _=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.headerItemOnClick=a.headerItemOnClick.bind(a);a.onResetData=a.onResetData.bind(a);a.onRequestNextPage=a.onRequestNextPage.bind(a);a.setContainerNodeRef=a.setContainerNodeRef.bind(a);a.getDOMNode=a.getDOMNode.bind(a);return a}s()(t,[{key:"onRequestNextPage",value:function e(t,a){var e=this.props.onRequestNextPage;e&&e(t,a)}},{key:"onResetData",value:function e(){var e=this.props.onResetData;e&&e()}},{key:"getDOMNode",value:function e(){return this.tableViewContainerNode}},{key:"setContainerNodeRef",value:function e(t){this.tableViewContainerNode=t}},{key:"headerItemOnClick",value:function e(t,a){var e=this.props.headerItemOnClick;e&&e(t,a)}},{key:"render",value:function e(){var t=this.props,a=t.autoHeight,r=t.headers,n=t.height,i=t.isLoading,s=t.newQuery,o=t.rows,l=t.rowHeaderItemClassName,c=t.rowClassName,u=t.sortBy,d=t.sortDir,p=t.searchQuery,v=t.useKeyboardNavigableTable;var m={autoHeight:a,headerItemOnClick:this.headerItemOnClick,headers:r,height:n,isLoading:i,newQuery:s,onRequestNextPage:this.onRequestNextPage,onResetData:this.onResetData,rowHeaderItemClassName:l,rowClassName:c,rows:o,sortBy:u,sortDir:d,searchQuery:p};var b=v?h.a.createElement(f["a"],m):h.a.createElement(f["b"],m);return h.a.createElement("div",{className:"c-table_view_container",ref:this.setContainerNodeRef},b)}}]);return t}(p["PureComponent"]);_.displayName="TableViewController";_.defaultProps=g;t["a"]=_},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(1);var v=a.n(h);var m=a(13);var f=a(16);var b=a.n(f);var g=a(2);var _=a.n(g);var y=a(0);var O=a(195);var k=a(384);var E=a(900);var C=a(96);var j=a(1349);var w=a(1350);var S=a(3134);var I=a.n(S);var T={offsetX:24,offsetY:134};var A={className:y["b"].string,bodyClassName:y["b"].string,flexOrigin:y["b"].string,isEmpty:y["b"].bool,isOffline:y["b"].bool,isLoading:y["b"].bool,onBlur:y["b"].func,onFocus:y["b"].func,renderBody:y["b"].func.isRequired,renderEmpty:y["b"].func,onOptionsClick:y["b"].func,renderControls:y["b"].func,renderSubtitle:y["b"].func,title:y["b"].node.isRequired,viewId:y["b"].string.isRequired,kbNavOrder:y["b"].number.isRequired,dataQa:y["b"].string,headerProps:y["b"].object};var N={className:void 0,bodyClassName:void 0,flexOrigin:void 0,isEmpty:false,isOffline:false,isLoading:false,onBlur:g["noop"],onFocus:g["noop"],renderEmpty:g["noop"],renderControls:g["noop"],renderSubtitle:g["noop"],onOptionsClick:void 0,dataQa:void 0,headerProps:{}};var P=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"blur",value:function e(){var t=this.props.onBlur;t.apply(void 0,arguments)}},{key:"focus",value:function e(){var t=this.props.onFocus;t.apply(void 0,arguments)}},{key:"isLoading",value:function e(){var t=this.props,e=t.isLoading,a=t.isOffline;return e&&!a}},{key:"renderBody",value:function e(){var t=this.props,a=t.isEmpty,r=t.isOffline,e=t.renderBody,n=t.renderEmpty;if(a){if(this.isLoading())return null;return n({isOffline:r})}return e()}},{key:"renderSubtitle",value:function e(){var e=this.props.renderSubtitle;var t=e();if(!t)return null;return v.a.createElement("div",{className:"p-flexpane__subtitle","data-qa":"subtitle"},t)}},{key:"render",value:function e(){var t=this.props,a=t.className,r=t.bodyClassName,i=t.flexOrigin,s=t.isEmpty,o=t.onOptionsClick,l=t.title,c=t.viewId,u=t.kbNavOrder,d=t.dataQa,p=t.renderControls,h=t.headerProps;return v.a.createElement(E["a"],{component:this,order:u},v.a.createElement(k["a"],{id:c},v.a.createElement("div",{"data-qa":d,className:b()("p-flexpane",a)},v.a.createElement(j["a"],n()({onOptionsClick:o,renderSecondary:p},h),v.a.createElement(w["a"],{flexOrigin:i,size:"medium"}),v.a.createElement("div",null,l,this.renderSubtitle())),v.a.createElement("div",{className:b()("p-flexpane__body",r,{"p-flexpane__body--empty":s&&!this.isLoading(),"p-flexpane__body--empty_loading":s&&this.isLoading()})},this.isLoading()&&v.a.createElement("div",{className:"p-flexpane__floating_loader","data-qa":"floating_loader"},v.a.createElement(C["a"],{size:"medium",noMargin:true})),this.renderBody()))))}}]);return t}(v.a.Component);P.displayName="Flexpane";P.defaultProps=N;var R=function e(t){return{isOffline:!Object(O["d"])(t)}};t["a"]=Object(m["connect"])(R,null,null,{pure:false})(P)},function(e,t,a){"use strict";a.d(t,"b",function(){return U});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(6);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var h=a(9);var v=a.n(h);var m=a(1);var f=a.n(m);var b=a(0);var g=a(13);var _=a(16);var y=a.n(_);var O=a(2);var k=a.n(O);var E=a(1797);var C=a(441);var j=a(329);var w=a(41);var S=a(706);var I=a(428);var T=a(1799);var A=a(3261);var N=a.n(A);var P=Object(m["createContext"])(O["noop"]);var R=3e3;var M=200;var D={msg:b["b"].object,className:b["b"].string,hover:b["b"].bool,onClick:b["b"].func,highlight:b["b"].bool,clearHighlight:b["b"].func,children:b["b"].node,isDeleting:b["b"].bool,removeMessageAndTimestamp:b["b"].func,logMessage:b["b"].func};var x={msg:void 0,className:void 0,hover:true,onClick:O["noop"],highlight:void 0,clearHighlight:O["noop"],children:void 0,isDeleting:void 0,removeMessageAndTimestamp:O["noop"],logMessage:b["b"].func};var F=function(e){v()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setBackground=a.setBackground.bind(a);a.onClick=a.onClick.bind(a);a.onDeleteAnimationEnd=a.onDeleteAnimationEnd.bind(a);a.onDeleteAnimationTick=a.onDeleteAnimationTick.bind(a);a.highlightTimer=null;a.state={};a.ref=f.a.createRef();return a}u()(t,[{key:"componentDidMount",value:function e(){this.props.highlight&&this.startHighlightTimer();this.props.isDeleting&&this.onDeleteAnimationEnd()}},{key:"componentDidUpdate",value:function e(t){!t.highlight&&this.props.highlight&&this.startHighlightTimer();!t.isDeleting&&this.props.isDeleting&&this.startDeleteAnimation()}},{key:"componentWillUnmount",value:function e(){if(this.highlightTimer){clearTimeout(this.highlightTimer);this.props.clearHighlight()}if(this.deleteAnimation){this.deleteAnimation.cancel();this.onDeleteAnimationEnd()}}},{key:"onClick",value:function e(t){var a=this.props.msg;if(t.shiftKey&&Object(I["a"])(t)&&!Object(T["a"])(t.target)){t.preventDefault();this.props.logMessage({channelId:a.channel,ts:a.ts})}this.props.onClick(t)}},{key:"onDeleteAnimationEnd",value:function e(){var t=this.props.msg;this.props.removeMessageAndTimestamp({channelId:t.channel,ts:t.ts});this.deleteAnimation=null}},{key:"onDeleteAnimationTick",value:function e(t){var a=t.value,r=t.nextTick;this.setState(function(){return{height:a}},r)}},{key:"setBackground",value:function e(t){this.setState(function(e){return s()({},e,t)})}},{key:"startDeleteAnimation",value:function e(){var t=this.ref.current&&this.ref.current.clientHeight||0;this.deleteAnimation=Object(S["a"])({fromValue:t,toValue:0,duration:M,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"startHighlightTimer",value:function e(){var t=this;this.highlightTimer&&clearTimeout(this.highlightTimer);this.highlightTimer=setTimeout(function(){t.highlightTimer=null;t.props.clearHighlight()},R)}},{key:"render",value:function e(){var t;var a=this.state.height;var r="number"===typeof a?{height:a}:null;var i=y()("c-message_kit__background",(t={"c-message_kit__background--hovered":this.props.hover&&this.state.hover,"c-message_kit__background--labels":this.state.labels},n()(t,"c-message_kit__background--labels--"+this.state.labels,this.state.labels),n()(t,"c-message_kit__background--editing",this.state.editing),n()(t,"c-message_kit__background--highlight",this.props.highlight),n()(t,"c-message_kit__background--deleting",this.props.isDeleting),t),this.props.className);return f.a.createElement(P.Provider,{value:this.setBackground},f.a.createElement("div",{role:"document",className:i,ref:this.ref,style:r,onClick:this.onClick,"data-qa":"message_container","data-qa-unprocessed":Object(w["isUnprocessedMsg"])(this.props.msg)},this.props.children))}}]);return t}(m["PureComponent"]);F.displayName="MessageBackground";F.defaultProps=x;function L(e,t){var a=t.msg;var r=false;if(a){var n=Object(j["getMessageMetaData"])(e,{channelId:a.channel,ts:a.ts});r=n.isDeleting}return{isDeleting:r}}var B=function e(t){return{removeMessageAndTimestamp:function e(a){return t(Object(C["a"])(a))},logMessage:function e(a){return t(Object(E["a"])(a))}}};t["a"]=Object(g["connect"])(L,B)(F);function U(e){return function t(a){return f.a.createElement(P.Consumer,null,function(t){return f.a.createElement(e,s()({},a,{setBackground:t}))})}}},,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"d",function(){return n});a.d(t,"e",function(){return i});a.d(t,"c",function(){return s});a.d(t,"a",function(){return o});a.d(t,"b",function(){return l});a.d(t,"f",function(){return c});var r=a(20);var n=Object(r["b"])("TS.newxp.slackbot_response_sent_sig.dispatch");var i=Object(r["b"])("TS.newxp.slackbot_skip_or_stop_sig.dispatch");var s=Object(r["b"])("TS.newxp.slackbot_continue_sig.dispatch");var o=Object(r["b"])("TS.newxp.cancelOnboarding");var l=Object(r["b"])("TS.newxp.resumeOnboarding");var c=Object(r["b"])("TS.newxp.startOnboardingClick")},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(0);var l=a(15);var c=a(12);var u=a(48);var d=a(564);var p=a(1216);var h=a(73);var v=a(6);var m=a.n(v);var f=a(7);var b=a.n(f);var g=a(8);var _=a.n(g);var y=a(9);var O=a.n(y);var k=a(2);var E=a(13);var C=a(16);var j=a.n(C);var w=a(87);var S=a(4);var I=a(195);var T=a(122);var A=a(10);var N=a(772);var P=a(45);var R=a(21);var M=a(308);var D=a(1344);var x=a(39);var F=a(376);var L=a(714);var B=a(68);var U=a(1253);var q=a(1517);function G(e){return new Promise(function(t,a){var r=Object(c["b"])();try{var n=new FileReader;n.onload=function(e){var a=Object(q["readFromBinaryFile"])(e.target.result);a&&"number"===typeof a.Orientation?t(a.Orientation):t(null)};n.readAsArrayBuffer(e)}catch(e){r.warn("Error reading exif data");r.warn(e);a(e)}})}var W=a(35);var H=a(31);var V=a(1542);var K=a(391);var z=a(208);var Y=a(4168);var Q=a(863);var J=a(152);var Z=a(84);var X=a(28);var $=a(179);var ee=a(54);var te=a(126);var ae=a(51);var re=a(1351);var ne=a(2414);var ie=a(1768);var se={fileId:o["b"].string.isRequired,channelId:o["b"].string.isRequired,threadTs:o["b"].string,initialFileTitle:o["b"].string,renamePendingFile:o["b"].func.isRequired};var oe={threadTs:void 0,initialFileTitle:void 0};var le=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleRename=a.handleRename.bind(a);return a}b()(t,[{key:"handleRename",value:function e(t){var a=this.props,r=a.fileId,n=a.channelId,i=a.threadTs;this.props.renamePendingFile({channelId:n,threadTs:i,fileId:r,title:Object(k["trim"])(t)})}},{key:"render",value:function e(){var t=this.props.initialFileTitle;return s.a.createElement(ie["a"],{initialFileTitle:t,handleRename:this.handleRename})}}]);return t}(i["PureComponent"]);le.displayName="RenamePendingFileDialog";le.defaultProps=oe;var ce={renamePendingFile:function e(){return d["renamePendingFile"].apply(void 0,arguments)}};var ue=Object(E["connect"])(null,ce)(le);var de=Object(l["b"])("Opens the rename file dialog",function(e,t,a){e(Object(u["openModal"])({element:s.a.createElement(ue,a),isStackable:true}))});de.propTypes={file:w["a"].File().isRequired,channelId:o["b"].string.isRequired,threadTs:o["b"].string};var pe=de;var he=a(77);var ve=a(30);var me=a(706);var fe=a(22);var be={arrowDirection:o["b"].oneOf(["left","right"]).isRequired,isShowing:o["b"].bool,onClick:o["b"].func};var ge={isShowing:true,onClick:k["noop"]};var _e=function e(t){var a=t.arrowDirection,r=t.onClick,n=t.isShowing;var i=j()("p-gallery_scroller__arrow","p-gallery_scroller__"+a+"_arrow",{"p-gallery_scroller__arrow_hidden":!n});return s.a.createElement("div",{className:i},s.a.createElement(fe["b"],{type:"circle-fill",className:"p-gallery_scroller__arrow_fill",size:"inherit"}),s.a.createElement(fe["b"],{type:"arrow-large-"+a,className:"p-gallery_scroller__arrow_icon",onClick:function e(t){return r(t,a)}}))};_e.displayName="GalleryScrollerArrow";_e.defaultProps=ge;var ye=_e;var Oe=a(3213);var ke={children:o["b"].node.isRequired,width:o["b"].number.isRequired,pageSize:o["b"].number};var Ee={pageSize:100};var Ce={right:"right",left:"left"};var je=160;var we=50;var Se=50;var Ie=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onArrowClick=a.onArrowClick.bind(a);a.onScroll=Object(k["throttle"])(a.onScroll,we).bind(a);a.onContentMutation=a.onContentMutation.bind(a);a.setWrapperRef=a.setWrapperRef.bind(a);a.setContentRef=a.setContentRef.bind(a);a.wrapper=void 0;a.content=void 0;a.mutationObserver=new MutationObserver(a.onContentMutation);a.state={scrollLeft:0,scrollWidth:void 0};return a}b()(t,[{key:"componentDidMount",value:function e(){this.content&&this.mutationObserver.observe(this.content,{childList:true,subtree:true})}},{key:"componentWillUnmount",value:function e(){this.mutationObserver.disconnect()}},{key:"onArrowClick",value:function e(t,a){t.preventDefault();var r=this.props.pageSize;var n=this.state.scrollLeft;var i=a===Ce.right;var s=i?r:-r;var o=n+s;var l=this.getMinScroll();var c=this.getMaxScroll();var u=Object(k["clamp"])(o,l,c);c-u<Se?u=c:u-l<Se&&(u=l);this.scrollWithAnimation(u)}},{key:"onScroll",value:function e(t){if(!t)return;var a=t.scrollLeft;this.setState(function(){return{scrollLeft:a}})}},{key:"onContentMutation",value:function e(){var t=this.state.scrollWidth;var a=this.content&&this.content.scrollWidth;t!==a&&this.setState(function(e){return n()({},e,{scrollWidth:a})})}},{key:"getMinScroll",value:function e(){return 0}},{key:"getMaxScroll",value:function e(){if(!this.content)return 0;var t=this.props.width;var a=this.state.scrollWidth;return a-t}},{key:"setWrapperRef",value:function e(t){if(!t)return;this.wrapper=t;var a=this.wrapper.scrollLeft;this.setState(function(e){return n()({},e,{scrollLeft:a})})}},{key:"setContentRef",value:function e(t){if(!t)return;this.content=t;var a=this.content.scrollWidth;this.setState(function(e){return n()({},e,{scrollWidth:a})})}},{key:"shouldShowArrow",value:function e(t){var a=t.arrowDirection;var r=this.props.width;var n=this.state,i=n.scrollLeft,s=n.scrollWidth;var o=this.getMinScroll();var l=this.getMaxScroll();if(a===Ce.right){var c=i<l;var u=s>r;return c&&u}return i>o}},{key:"scrollWithAnimation",value:function e(t){var a=this;var r=0;var n=function e(t){var n=t.value,i=t.nextTick;var s=a.wrapper.scrollLeft+n+r;var o=Math.round(s);r=s-o;a.wrapper.scrollLeft=o;i()};this.trackAnimation&&this.trackAnimation.cancel();this.trackAnimation=Object(me["a"])({fromValue:this.wrapper.scrollLeft,toValue:t,duration:je,delta:true,onTick:n})}},{key:"renderArrow",value:function e(t){var a=t.arrowDirection;var r=this.shouldShowArrow({arrowDirection:a});return s.a.createElement(ye,{arrowDirection:a,onClick:this.onArrowClick,isShowing:r})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.width,n=a.children;var i=j()("p-galler_scroller__wrapper",{"p-galler_scroller__wrapper--can_scroll":Object(ve["isChrome"])()});return s.a.createElement("div",{className:"p-gallery_scroller",style:{width:r}},s.a.createElement("div",{className:i,ref:this.setWrapperRef,onScroll:function e(a){return t.onScroll(a&&a.target)}},s.a.createElement("div",{className:"p-gallery_scroller__content",ref:this.setContentRef},n)),this.renderArrow({arrowDirection:Ce.left}),this.renderArrow({arrowDirection:Ce.right}))}}]);return t}(i["Component"]);Ie.displayName="GalleryScroller";Ie.defaultProps=Ee;var Te=Ie;var Ae=Te;var Ne=a(1551);var Pe=a(1088);var Re=a(1090);var Me=a(1572);var De=a(3217);var xe=new A["b"]("multi_file_upload");var Fe={file:o["b"].object.isRequired,isCompact:o["b"].bool,className:o["b"].string,onEditFile:o["b"].func};var Le={isCompact:false,className:null,onEditFile:null};var Be=function(e){O()(t,e);function t(){m()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"renderEditFileButton",value:function e(){var t=this.props.onEditFile;if(!t)return null;return s.a.createElement(X["c"],{className:"p-pending_file__edit_btn","aria-label":xe.t("Edit file title"),onClick:t},xe.t("Edit"))}},{key:"render",value:function e(){var t=this.props,a=t.file,r=t.className,n=t.isCompact;var i=j()("p-pending_file",r,{"p-pending_file--compact":n});var o=n?s.a.createElement(Me["a"],{file:a,isCompact:true}):s.a.createElement(Re["a"],{file:a,showThumbnail:false},this.renderEditFileButton());return s.a.createElement(Pe["a"],{file:a,className:i,showActions:false},o)}}]);return t}(i["PureComponent"]);Be.displayName="PendingFile";Be.defaultProps=Le;var Ue=Be;var qe=a(1763);var Ge=a(693);var We=a(2385);var He=new A["b"]("multi_file_upload");var Ve={fileId:o["b"].string,channelId:o["b"].string,threadTs:o["b"].string,title:o["b"].string,closeModal:o["b"].func,openRenamePendingFileDialog:o["b"].func};var Ke={fileId:void 0,channelId:void 0,threadTs:void 0,title:void 0,closeModal:k["noop"],openRenamePendingFileDialog:k["noop"]};var ze=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.closeModal=a.closeModal.bind(a);a.renameFile=a.renameFile.bind(a);return a}b()(t,[{key:"closeModal",value:function e(){this.props.closeModal()}},{key:"renameFile",value:function e(){var t=this.props,a=t.fileId,r=t.channelId,n=t.threadTs,i=t.title;this.props.openRenamePendingFileDialog({fileId:a,channelId:r,threadTs:n,initialFileTitle:i})}},{key:"render",value:function e(){var t=this.props.title;return s.a.createElement("div",{className:"p-file_viewer__header"},s.a.createElement("div",{className:"p-file_viewer__header__meta"},s.a.createElement("div",{className:"p-file_viewer__header__meta__stack"},s.a.createElement("div",{className:"bold"},t),s.a.createElement(X["c"],{className:"p-file_viewer__header__meta__minor p-file_viewer__header__edit_btn","aria-label":He.t("Edit file title"),onClick:this.renameFile},He.t("Edit")))),s.a.createElement("div",{className:"p-file_viewer__header__actions"},s.a.createElement(Ge["a"],{className:"p-file_viewer__header__button",icon:"times",backgroundStyle:null,onClick:this.closeModal})))}}]);return t}(i["PureComponent"]);ze.displayName="Header";ze.defaultProps=Ke;var Ye=function e(t){return{closeModal:function e(){return t(Object(u["closeModal"])())},openRenamePendingFileDialog:function e(a){return t(pe(a))}}};var Qe=Object(E["connect"])(null,Ye)(ze);var Je=a(1836);var Ze={fileId:o["b"].string.isRequired,channelId:o["b"].string.isRequired,threadTs:o["b"].string,title:o["b"].string,image:o["b"].shape({src:o["b"].string,width:o["b"].number,height:o["b"].number,orientation:o["b"].number})};var Xe={threadTs:void 0,title:void 0,image:void 0};var $e=function(e){O()(t,e);function t(){m()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"render",value:function e(){var t=this.props,a=t.image,r=t.title,n=t.fileId,i=t.channelId,o=t.threadTs;return s.a.createElement(qe["a"],null,s.a.createElement(Qe,{title:r,fileId:n,channelId:i,threadTs:o}),s.a.createElement(Je["a"],{title:r,image:a}))}}]);return t}(i["Component"]);$e.displayName="FileViewer";$e.defaultProps=Xe;var et=function e(t,a){var r=a.fileId,n=a.channelId,i=a.threadTs,s=a.image;if(!r||!n||!s)return null;var o=Object(d["getPendingFileById"])(t,{fileId:r,channelId:n,threadTs:i});var l=o.title||o.name;return{fileId:r,channelId:n,threadTs:i,title:l,image:s}};var tt=Object(E["connect"])(et)($e);var at=Object(l["b"])("Opens the FileViewer",function(e,t,a){e(Object(u["openModal"])({element:s.a.createElement(tt,a),isStackable:true}))});at.propTypes=n()({},tt.propTypes);var rt=at;function nt(e){var t=e.replace(/^data:([^;]+);base64,/gim,"");var a=atob(t);var r=a.length;var n=new Uint8Array(r);for(var i=0;i<r;i++)n[i]=a.charCodeAt(i);return n.buffer}var it=function(e){return new Promise(function(t,a){if(!e||!(e instanceof File)){a(new Error("Invalid file argument provided to getPendingFileData"));return}if(!window.FileReader){a(new Error("Cannot read file data, browser does not support FileReader"));return}if(e.dataUrl){t({dataUrl:e.dataUrl,orientation:e.orientation,width:e.width,height:e.height});return}var r=new FileReader;r.onload=function(a){var r=a.target.result;var n=nt(r);var i=Object(q["readFromBinaryFile"])(n);var s=i&&"number"===typeof i.Orientation;var o=s?i.Orientation:null;var l=new Image;l.onload=function(){var a=l.width;var n=l.height;e.dataUrl=r;e.orientation=o;e.width=a;e.height=n;t({dataUrl:r,orientation:o,width:a,height:n})};l.src=r};r.onloadstart=function(e){Object(k["noop"])(e)};r.onerror=function(e){r.abort();a(e)};r.readAsDataURL(e)})};var st=a(96);var ot=a(3219);var lt=new A["b"]("multi_file_upload");var ct={file:o["b"].object.isRequired,channelId:o["b"].string,threadTs:o["b"].string,useThumbnail:o["b"].bool,className:o["b"].string,openPendingFileViewer:o["b"].func};var ut={channelId:void 0,threadTs:void 0,useThumbnail:false,className:null,openPendingFileViewer:k["noop"]};var dt=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.state={dataUrl:void 0,orientation:void 0,height:void 0,width:void 0,isLoading:true};return a}b()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props.file;it(a).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.dataUrl,r=e.orientation,n=e.height,i=e.width;t.setState(function(){return{dataUrl:a,orientation:r,height:n,width:i}});requestAnimationFrame(function(){t.setState(function(){return{isLoading:false}})})}).catch(function(e){Object(k["noop"])(e)})}},{key:"onClick",value:function e(t){t.stopPropagation();var a=this.props,r=a.file,n=a.channelId,i=a.threadTs;var s=this.state,o=s.dataUrl,l=s.width,c=s.height,u=s.orientation;this.props.openPendingFileViewer({fileId:r.id,channelId:n,threadTs:i,title:r.title||r.name,image:{src:o,width:l,height:c,orientation:u}})}},{key:"renderImage",value:function e(){var t=this.props.file;var a=this.state.dataUrl;return s.a.createElement("img",{className:"p-pending_image_file__img",src:a,alt:Object(he["getFileDisplayName"])(t)})}},{key:"renderImageThumbnail",value:function e(){var t=this.props.file;var a=this.state||{},r=a.dataUrl;var n=r?{backgroundImage:"url('"+r+"')"}:null;return s.a.createElement("span",{className:"p-pending_image_file__thumbnail",style:n,ariaLabel:Object(he["getFileDisplayName"])(t)})}},{key:"render",value:function e(){var t=this.props,a=t.file,r=t.useThumbnail,n=t.className;var i=this.state,o=i.isLoading,l=i.orientation,c=i.height,u=i.width;var d=r?1:c/u;if(!Object(he["isPendingImageFile"])(a))return null;var p=j()("p-pending_image_file",n,{"p-pending_image_file__thumbnail_container":r,"p-pending_image_file__loading":o});return s.a.createElement(X["c"],{className:"p-pending_image_file__btn",onClick:this.onClick,"aria-label":lt.t("Preview image"),style:Object(he["getOrientationTransformStyles"])({orientation:l,imageDimensionRatio:d})},s.a.createElement("div",{className:p},r?this.renderImageThumbnail():this.renderImage(),s.a.createElement(st["a"],{size:"large",className:"p-pending_image_file__loading_spinner"})))}}]);return t}(i["PureComponent"]);dt.displayName="PendingImageFile";dt.defaultProps=ut;var pt=function e(t){return{openPendingFileViewer:function e(){return t(rt.apply(void 0,arguments))}}};var ht=Object(E["connect"])(null,pt)(dt);var vt=new A["b"]("multi_file_upload");var mt={fileId:o["b"].string.isRequired,channelId:o["b"].string.isRequired,threadTs:o["b"].string,removePendingFile:o["b"].func,featureMultiFileUpload:o["b"].bool};var ft={threadTs:null,removePendingFile:k["noop"],featureMultiFileUpload:true};var bt=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onRemoveFileClick=a.onRemoveFileClick.bind(a);return a}b()(t,[{key:"onRemoveFileClick",value:function e(t){t.stopPropagation();var a=this.props,r=a.fileId,n=a.channelId,i=a.threadTs;if(!r||!n)return;this.props.removePendingFile({channelId:n,threadTs:i,fileId:r})}},{key:"render",value:function e(){var t=this.props.featureMultiFileUpload;if(!t)return null;return s.a.createElement(X["c"],{className:"p-multi_file_upload__remove_btn",onClick:this.onRemoveFileClick,"aria-label":vt.t("Remove file")},s.a.createElement(fe["b"],{type:"circle-fill",className:"p-multi_file_upload__remove_btn_circle"}),s.a.createElement(fe["b"],{type:"times-circle",className:"p-multi_file_upload__remove_btn_times"}))}}]);return t}(i["PureComponent"]);bt.displayName="RemoveFileButton";bt.defaultProps=ft;var gt=Object(E["connect"])(null,{removePendingFile:d["removePendingFile"]})(bt);var _t=a(3221);var yt=new A["b"]("multi_file_upload");var Ot={files:o["b"].arrayOf(o["b"].object),channelId:o["b"].string.isRequired,threadTs:o["b"].string,isCompact:o["b"].bool,processAndAddPendingFiles:o["b"].func,openRenamePendingFileDialog:o["b"].func,filterFilesForUpload:o["b"].func};var kt={files:[],threadTs:null,isCompact:false,processAndAddPendingFiles:k["noop"],openRenamePendingFileDialog:k["noop"],filterFilesForUpload:k["noop"]};var Et=184;var Ct=26214400;var jt=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.hiddenFileInputRef=s.a.createRef();a.onAddFileClick=a.onAddFileClick.bind(a);a.onPendingFileClick=a.onPendingFileClick.bind(a);a.onFilesSelectedHandler=a.onFilesSelectedHandler.bind(a);return a}b()(t,[{key:"onAddFileClick",value:function e(){this.hiddenFileInputRef&&this.hiddenFileInputRef.current&&this.hiddenFileInputRef.current.click()}},{key:"onPendingFileClick",value:function e(t,a){t.stopPropagation();var r=this.props,n=r.channelId,i=r.threadTs;var s=a.title||a.name;this.props.openRenamePendingFileDialog({fileId:a.id,channelId:n,threadTs:i,initialFileTitle:s})}},{key:"onFilesSelectedHandler",value:function e(t){var a=this;if(!t||!t.length)return Promise.resolve();var r=this.props,n=r.channelId,i=r.threadTs;return this.props.filterFilesForUpload({selectedFiles:t,channelId:n,threadTs:i}).then(function(e){if(!e||!e.length)return;a.props.processAndAddPendingFiles({channelId:n,threadTs:i,files:e})})}},{key:"getComponentSize",value:function e(){var t=this.props,a=t.files,r=t.isCompact;if(r)return"small";var n=a&&1===a.length&&this.shouldRenderPendingImage(a[0]);if(n)return"large";return"medium"}},{key:"shouldRenderPendingImage",value:function e(t){return Object(he["isPendingImageFile"])(t)&&t.size<Ct}},{key:"renderRemoveFileButton",value:function e(t){var a=this.props,r=a.files,n=a.channelId,i=a.threadTs;if(r&&r.length<2)return null;return s.a.createElement(gt,{fileId:t,channelId:n,threadTs:i})}},{key:"renderPendingImageFile",value:function e(t){var a=this.props,r=a.files,n=a.channelId,i=a.threadTs,o=a.isCompact;var l=r&&r.length>1||o;return s.a.createElement(ht,{file:t,channelId:n,threadTs:i,useThumbnail:l})}},{key:"renderPendingFile",value:function e(t){var a=this;var r=this.props.isCompact;return s.a.createElement(Ue,{file:t,isCompact:r,onEditFile:function e(r){return a.onPendingFileClick(r,t)}})}},{key:"renderAddFileButton",value:function e(){var t=this.props.files;var a=t&&t.length||0;var r=a<x["MAX_FILE_UPLOAD_COUNT"];var n=a>1;var i=yt.t("Add file");var o=yt.t("({selectedFileCount} of {maxFileUploadCount} selected)",{selectedFileCount:a,maxFileUploadCount:x["MAX_FILE_UPLOAD_COUNT"]});return s.a.createElement("div",{className:"p-multi_file_upload__add_file_btn_container"},r?s.a.createElement(X["c"],{className:"p-multi_file_upload__add_file_btn","aria-label":i,onClick:this.onAddFileClick},i,s.a.createElement(Ne["a"],{ref:this.hiddenFileInputRef,onFilesSelectedHandler:this.onFilesSelectedHandler})):null,n?s.a.createElement("span",{className:"p-multi_file_upload__file_count"},o):null)}},{key:"renderFileGallery",value:function e(){var t=this;var a=this.props.files;return s.a.createElement("div",{className:"p-multi_file_upload__file_gallery"},a.map(function(e){return s.a.createElement("div",{className:"p-multi_file_upload__file_container",key:e.id},t.shouldRenderPendingImage(e)?t.renderPendingImageFile(e):t.renderPendingFile(e),t.renderRemoveFileButton(e.id))}))}},{key:"renderFileGalleryScroller",value:function e(){var t=this;var a=1.25*Et;return s.a.createElement(ne["a"],{disableHeight:true},function(e){var r=e.width;return s.a.createElement(Ae,{width:r,pageSize:a},t.renderFileGallery())})}},{key:"render",value:function e(){var t=this.props.files;if(!t)return null;var a=this.getComponentSize();var r=j()("p-multi_file_upload__container","p-multi_file_upload__container--"+a);return s.a.createElement("div",{className:r},this.renderFileGalleryScroller(),this.renderAddFileButton())}}]);return t}(i["Component"]);jt.displayName="MultiFileUpload";jt.defaultProps=kt;function wt(e,t){var a=t.channelId,r=t.threadTs;return{files:Object(d["getPendingFilesforInput"])(e,{channelId:a,threadTs:r})}}var St=Object(E["connect"])(wt,{processAndAddPendingFiles:d["processAndAddPendingFiles"],openRenamePendingFileDialog:pe,filterFilesForUpload:p["a"]})(jt);var It=St;var Tt=a(1537);var At=a(1538);var Nt=a(1328);var Pt=a(1539);var Rt=a(19);var Mt=a(67);var Dt=a(41);var xt=a(1565);var Ft=a(1160);var Lt=new A["b"]("file-upload");function Bt(e){var t=e.replyCount,a=e.replyUsers,r=e.replyUsersCount;if(!a)return null;return s.a.createElement("div",{className:"p-file_upload_dialog__thread_label"},Lt.t("Sharing file in a thread"),s.a.createElement("br",null),s.a.createElement(xt["a"],{replyCount:t,replyUsers:a,replyUsersCount:r}))}Bt.displayName="FileUploadThreadLabel";Bt.defaultProps={replyCount:void 0,replyUsers:void 0,replyUsersCount:void 0};function Ut(e,t){var a=t.channelId,r=t.threadTs;var n=Object(Mt["a"])(e,a,r);if(!n){var i=Object(Rt["d"])(e,a);n=Object(L["d"])(i,r);n||(n=Object(Ft["a"])(i,r))}if(!n)return{};var s=Object(Dt["getReplyUsers"])(n);var o=Object(Dt["getReplyUsersCount"])(n);if(n.replies){s=Object(k["map"])(n.replies,"user");n.user&&s.push(n.user);o=Object(k["uniq"])(s).length}else n.user&&s.push(n.user);return{replyCount:Object(Dt["getReplyCount"])(n),replyUsers:s,replyUsersCount:o}}var qt=Object(E["connect"])(Ut)(Bt);var Gt=a(3223);var Wt=new A["b"]("file-upload");var Ht="file-upload-name";var Vt="file-upload-share-with";var Kt={files:o["b"].array.isRequired,selectedChannelId:o["b"].string,setSelectedChannel:o["b"].func,canPostInSelectedChannel:o["b"].bool,canThread:o["b"].bool,closeModal:o["b"].func,switchToChannel:o["b"].func,getShareableChannelId:o["b"].func,msgText:o["b"].string,setMsgText:o["b"].func,disallowedKeywordInMsgText:o["b"].string,initialText:o["b"].string,initialBroadcast:o["b"].bool,retentionDuration:o["b"].number,threadTs:o["b"].string,overStorageLimit:o["b"].bool,isStdPlan:o["b"].bool,isPlusPlan:o["b"].bool,isEnterprisePlan:o["b"].bool,channelType:o["b"].string,selectedChannelName:o["b"].string,fromPaste:o["b"].bool,teamId:o["b"].string,inputProxy:o["b"].object,isOffline:o["b"].bool,featureOfflineMode:o["b"].bool,featureSonicInputs:o["b"].bool,featureWysiwygComposer:o["b"].bool,clientToolBar:o["b"].bool,currentChannelId:o["b"].string,metadata:o["b"].object,clogger:o["b"].object.isRequired,pendingFiles:o["b"].arrayOf(w["a"].File()),clearPendingFilesForDialog:o["b"].func,isInEnforceFileLimitTreatment:o["b"].bool};var zt={selectedChannelId:null,setSelectedChannel:k["noop"],canPostInSelectedChannel:false,canThread:false,closeModal:k["noop"],switchToChannel:k["noop"],getShareableChannelId:k["noop"],msgText:"",setMsgText:k["noop"],disallowedKeywordInMsgText:null,initialText:"",initialBroadcast:false,retentionDuration:null,threadTs:null,overStorageLimit:false,isStdPlan:false,isPlusPlan:false,isEnterprisePlan:false,channelType:"channel",selectedChannelName:"",fromPaste:false,teamId:void 0,inputProxy:void 0,isOffline:false,featureOfflineMode:false,featureSonicInputs:false,featureWysiwygComposer:false,clientToolBar:false,currentChannelId:void 0,pendingFiles:null,clearPendingFilesForDialog:k["noop"],isInEnforceFileLimitTreatment:false,metadata:void 0};var Yt=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(k["bindAll"])(a,["onGo","onCancel","onCancelAll","onCancelDiscard","closeDialog","onTextChange","onFileNameChange","onShareWithChange","onBroadcastChange","onEditCollapsedFileNameClick","setFileNameInputRef","clogPricingLinkClick"]);a.fileNameInput=null;a.initialText=a.props.initialText;a.logger=Object(c["b"])();a.state=n()({confirmClose:false,confirmCancelAll:false,submitting:false},a.getStateForFileAtIndex(0),{broadcast:e.initialBroadcast});return a}b()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.files,r=t.clogger;var n=this.state||0,i=n.fileIndex;this.shouldShowStorageWarning()&&r.track(R["k"].GROWTH_PRICING,{contexts:{ui_context:{action:R["v"].IMPRESSION,step:R["z"].FILE_UPLOAD,ui_component:R["w"].FILE_STORAGE_LIMIT_BANNER}}});if(this.isMultiFileUpload())return;a&&this.maybeLoadImagePreview(a[i])}},{key:"onCancel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var a=this.props.msgText;var r=this.state,n=r.confirmClose,i=r.confirmCancelAll;if(!n&&a&&a.length>x["CONFIRM_DISCARD_TEXT_LENGTH"]){this.setState(function(){return{confirmClose:true,confirmCancelAll:t}});return false}t||!this.hasMoreFiles()||i?this.closeDialog():this.goToNextFile();return false}},{key:"onCancelAll",value:function e(){return this.onCancel(true)}},{key:"onCancelDiscard",value:function e(){this.setState(function(){return{confirmClose:false,confirmCancelAll:false}});return false}},{key:"onGo",value:function e(){var t=this;var a=this.state,r=a.shareWith,n=a.fileName,i=a.fileIndex,s=a.confirmClose,o=a.broadcast;var l=this.props,c=l.selectedChannelId,u=l.msgText,d=l.threadTs,p=l.teamId,h=l.pendingFiles;if(this.isGoDisabled())return false;if(s)return this.onCancel();this.initialText=null;var v=this.props,m=v.switchToChannel,f=v.files,b=v.getShareableChannelId,g=v.metadata;var _=r?Object(K["a"])():void 0;var y=r?b({channelOrMemberId:c}):Promise.resolve(null);y.then(function(e){if(t.isMultiFileUpload()){t.closeDialog();var a=Object(Q["a"])(p);a.uploadFiles({files:h,shareData:{channelId:e,clientMsgId:_,introMessage:r?u:null,threadTs:e?d:null,broadcast:e&&d?o:null,metadata:g}}).then(function(){t.logger.info("UPLOAD-DIALOG","Multi-file upload complete for: "+_)}).catch(function(e){t.logger.warn("Multi-file upload failed for: "+_+"; with error "+e)});t.logger.info("UPLOAD-DIALOG","Beginning multi-file upload for: "+_)}else{t.hasMoreFiles()||t.closeDialog();var s=f[i];var l=Object(Q["a"])(p);l.uploadFiles({files:[s],shareData:{channelId:e,clientMsgId:_,title:n||t.initialFileName(s),link:s.link,introMessage:r?u:null,threadTs:e?d:null,broadcast:e&&d?o:null,isBox:s.is_box,isDropbox:s.is_dropbox,metadata:g}})}t.hasMoreFiles()?t.goToNextFile():e&&!d&&m({id:e});t.setState(function(){return{submitting:false}})});this.setState(function(){return{submitting:true}});return false}},{key:"onTextChange",value:function e(t){var a=t.text,r=t.overLimit;this.props.setMsgText(a);this.setState(function(){return{overMsgLengthLimit:r}})}},{key:"onFileNameChange",value:function e(t){this.setState(function(){return{fileName:t,overFileNameLimit:t.length>x["MAX_FILENAME_LENGTH"]}})}},{key:"onShareWithChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{shareWith:!!a}})}},{key:"onBroadcastChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{broadcast:!!a}})}},{key:"onEditCollapsedFileNameClick",value:function e(){this.setState(function(){return{collapseFileNameInput:false}});this.fileNameInput.focus()}},{key:"setFileNameInputRef",value:function e(t){this.fileNameInput=t}},{key:"getStateForFileAtIndex",value:function e(t){var a=this.props.files;var r=a[t];var n=r&&Object(k["includes"])(r.type,"image");return{fileIndex:t,defaultFileName:this.initialFileName(r),fileName:"",shareWith:true,previewDataUrl:null,overMsgLengthLimit:false,overFileNameLimit:false,exifOrientation:null,previewImageDimensionsRatio:null,collapseFileNameInput:n,broadcast:false}}},{key:"getStorageWarning",value:function e(){var t=this;var a=this.props,r=a.isStdPlan,n=a.isPlusPlan,i=a.isEnterprisePlan,o=a.isInEnforceFileLimitTreatment;if(!this.shouldShowStorageWarning())return null;var l=function e(a){var r=a.text;return s.a.createElement("a",{href:"/pricing?ui_step="+R["z"].FILE_UPLOAD+"&ui_element="+R["y"].PRICING_LINK,target:"_blank",rel:"noopener noreferrer",onClick:t.clogPricingLinkClick,"data-qa":"file-upload-dialog_pricing-link"},r)};if(r)return Wt.rt("Your workspace has reached the Standard plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,l);if(n)return Wt.rt("Your workspace has reached the Plus plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,l);if(i)return Wt.rt("It looks like your organization\u2019s reached the file storage limit. If that sounds wrong, you may want to <a>contact Slack</a>.",null,function(e){var t=e.text;return s.a.createElement("a",{href:"/help/requests/new",target:"_blank"},t)});if(o)return Wt.rt("Your free workspace is limited to 5 GB of files. If you upload more files, you\u2019ll lose access to some older ones. To view them again and get more space, <a>upgrade to a paid plan</a>.",null,l);return Wt.rt("Your workspace has reached the Free plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade to a paid plan</a>.",null,l)}},{key:"shouldShowStorageWarning",value:function e(){var t=this.props,a=t.overStorageLimit,r=t.files;var n=this.state.fileIndex;var i=r[n];return a&&!i.is_dropbox&&!i.is_box&&!i.is_external}},{key:"clogPricingLinkClick",value:function e(){this.props.clogger.track(R["k"].GROWTH_PRICING,{contexts:{ui_context:{action:R["v"].CLICK,step:R["z"].FILE_UPLOAD,ui_element:R["y"].PRICING_LINK,ui_component:R["w"].FILE_STORAGE_LIMIT_BANNER}}})}},{key:"isMultiFileUpload",value:function e(){var t=this.props.files;return!Object(k["some"])(t,function(e){return e.is_box||e.is_dropbox})}},{key:"isMultipleFiles",value:function e(){if(this.isMultiFileUpload())return false;return this.props.files.length>1}},{key:"hasMoreFiles",value:function e(){if(!this.isMultipleFiles())return false;var t=this.props.files;var a=this.state.fileIndex;return t.length>a+1}},{key:"goToNextFile",value:function e(){var t=this;var a=this.props,r=a.files,i=a.setMsgText;var s=this.state.fileIndex;this.setState(function(){return n()({confirmClose:false},t.getStateForFileAtIndex(s+1))},function(){t.maybeLoadImagePreview(r[s+1])});i("")}},{key:"closeDialog",value:function e(){var t=this.props,a=t.initialBroadcast,r=t.inputProxy,n=t.threadTs,i=t.featureSonicInputs,s=t.currentChannelId;this.props.closeModal();this.isMultiFileUpload()&&this.props.clearPendingFilesForDialog();if(this.initialText){var o=this.initialText;setTimeout(function(){if(r){r.setText(o);r.setBroadcast(a);r.focus()}else if(n)Object(L["g"])(o,a);else if(i){var e=Object(z["a"])({viewContext:x["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:s});e&&e.setText(o)}else Object(F["e"])(o)},10)}}},{key:"initialFileName",value:function e(t){if(!t.name||this.props.fromPaste)return Wt.t("Pasted image at {date}",{date:Object(N["a"])(Date.now()/1e3)});return t.name}},{key:"isGoDisabled",value:function e(){var t=this.state,a=t.submitting,r=t.shareWith,n=t.overMsgLengthLimit,i=t.overFileNameLimit;var s=this.props,o=s.canPostInSelectedChannel,l=s.threadTs,c=s.canThread,u=s.disallowedKeywordInMsgText,d=s.isOffline,p=s.featureOfflineMode;return a||r&&!o&&!l||r&&l&&!c||r&&!!u||n||i||p&&d}},{key:"maybeLoadImagePreview",value:function e(t){var a=this;if(!window.FileReader)return;if(t.is_box||t.is_dropbox)return;if("string"===typeof t){this.setState(function(){return{previewDataUrl:"data:image/png;base64,"+t,collapseFileNameInput:true}});return}try{var r=new FileReader;r.onload=function(e){var r=e.target.result;if(!Object(k["startsWith"])(r,"data:image/"))return;a.loadImagePreviewWithOrientation(t,r)};r.onloadstart=function(e){if(e.total>33554432){a.logger.info("UPLOAD-DIALOG","Skipping image preview for large file: "+e.total);r.abort()}};r.readAsDataURL(t)}catch(e){this.logger.warn("Error loading upload preview");this.logger.warn(e)}}},{key:"loadImagePreviewWithOrientation",value:function e(t,a){var r=this;G(t).then(function(e){if(!e||1===e){r.setState(function(){return{previewDataUrl:a,collapseFileNameInput:true}});return}var t=new Image;t.onload=function(){var n=t.width;var i=t.height;var s=i/n;r.setState(function(){return{previewDataUrl:a,previewImageDimensionsRatio:s,exifOrientation:e,collapseFileNameInput:true}})};t.src=a})}},{key:"renderBroadcastCheckbox",value:function e(){var t=this.props,a=t.threadTs,r=t.canPostInSelectedChannel,n=t.channelType,i=t.selectedChannelName;var o=this.state.broadcast;if(!a||!r)return null;var l="broadcast-to-channel";var c="";c="mpim"===n?Wt.t("Also send to the group"):"im"===n?Wt.t("Also send as direct message"):Wt.rt("Also send to <span></span>",null,function(){return s.a.createElement("span",{className:"p-file_upload_dialog__broadcast_channel_name"},i)});return s.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--broadcast"},s.a.createElement(ee["a"],{text:c,className:"p-file_upload_dialog__broadcast_label",htmlFor:l,type:"inline"},s.a.createElement(te["a"],{className:"p-file_upload_dialog__broadcast_checkbox",id:l,checked:o,onChange:this.onBroadcastChange})))}},{key:"renderImagePreview",value:function e(){var t=this.state,a=t.previewDataUrl,r=t.previewImageDimensionsRatio,n=t.exifOrientation,i=t.fileName;if(!this.state.previewDataUrl)return null;var o=Wt.t("Preview of {fileName}",{fileName:i});var l=void 0;2===n?l="scaleX(-1)":3===n?l="rotate(180deg)":4===n?l="rotate(180deg) scaleX(-1)":5===n?l="rotate(90deg) scale("+r+", -"+r+")":6===n?l="rotate(90deg) scale("+r+")":7===n?l="rotate(90deg) scale(-"+r+", "+r+")":8===n&&(l="rotate(-90deg) scale("+r+", "+r+")");var c={};l&&(c.transform=l);return s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement("div",{className:"p-file_upload_dialog__preview"},s.a.createElement("div",{style:c},s.a.createElement("img",{className:"p-file_upload_dialog__preview_image",src:a,alt:o}))))}},{key:"renderShareWith",value:function e(){var t=this.props,a=t.threadTs,r=t.selectedChannelId;var n=this.state.shareWith;if(a)return s.a.createElement(qt,{channelId:r,threadTs:a});return s.a.createElement(ee["a"],{text:Wt.t("Share with:"),htmlFor:Vt,type:"inline"},s.a.createElement(te["a"],{id:Vt,defaultChecked:n,onChange:this.onShareWithChange}))}},{key:"renderChannelPicker",value:function e(){var t=this.props,a=t.selectedChannelId,r=t.setSelectedChannel,n=t.threadTs;var i=this.state.shareWith;if(n)return null;return s.a.createElement(At["a"],{initialChannelId:a,onChange:r,isDisabled:!i,optionsListOffsetBottom:window.innerHeight})}},{key:"renderCancelAllButton",value:function e(){return s.a.createElement(X["d"],{type:"outline",className:"p-file_upload_dialog__footer_cancel_all",onClick:this.onCancelAll,tabIndex:"-1","data-qa":"dialog-cancel-all"},Wt.t("Cancel All"))}},{key:"renderMultiFileShareInputs",value:function e(){if(!this.isMultipleFiles())return null;return s.a.createElement("div",{className:"p-file_upload_dialog__section"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderFooterExtra",value:function e(){if(this.isMultipleFiles())return this.renderCancelAllButton();return s.a.createElement("div",{className:"p-file_upload_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderWarning",value:function e(){var t=this.getStorageWarning();var a=Object(Pt["a"])(this.props);if(!a&&!t)return null;var r=this.props.isInEnforceFileLimitTreatment?"info":"warning";return s.a.createElement("div",{className:"p-file_upload_dialog__section","data-qa":"share-dialog_warning"},s.a.createElement(J["d"],{type:"inline",level:r},t?s.a.createElement("span",{className:"p-share_dialog__warning_message"},t):null,a))}},{key:"renderCollapsedFileName",value:function e(){var t=this.state,a=t.defaultFileName,r=t.collapseFileNameInput;var n=j()("p-file-upload_dialog__preview_file_name",{"p-file-upload_dialog__preview_file_name--hide":!r});var i=Wt.rt("edit");var o=Wt.rt("Edit file name: {fileName}",{fileName:a});return s.a.createElement("div",{className:n},s.a.createElement("span",{className:"p-file-upload_dialog__preview_file_name_text"},a),s.a.createElement(ae["a"],{className:"p-file-upload_dialog__preview_file_name_edit",onClick:this.onEditCollapsedFileNameClick,tabIndex:r?null:"-1","aria-label":o},i))}},{key:"renderExpandedFileNameInput",value:function e(){var t=this.state,a=t.fileName,r=t.defaultFileName,n=t.collapseFileNameInput;var i=j()("p-file_upload_dialog__file_name_input",{"p-file_upload_dialog__file_name_input--hide":n});return s.a.createElement(ee["a"],{text:Wt.t("File name"),htmlFor:Ht,className:i},s.a.createElement($["a"],{id:Ht,name:Ht,value:a,maxCharacterLimit:x["MAX_FILENAME_LENGTH"],counterMinimumCharacters:x["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"],onChange:this.onFileNameChange,placeholder:r,tabIndex:n?"-1":null,ref:this.setFileNameInputRef}))}},{key:"renderFileNameInput",value:function e(){return s.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section_file_name"},this.renderCollapsedFileName(),this.renderExpandedFileNameInput())}},{key:"renderMultiFileUpload",value:function e(){return s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement(It,{channelId:d["DIALOG_PENDING_FILES_ID"]}))}},{key:"renderRetentionWarning",value:function e(){var t=this.props.retentionDuration;if(!t)return null;return s.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--retention_duration"},s.a.createElement("span",null,Wt.t("Due to your custom file retention policy, this file will be deleted after {duration}",{duration:Object(U["a"])(t)})))}},{key:"render",value:function e(){var t=this.props,a=t.files,r=t.msgText,n=t.selectedChannelId,i=t.threadTs,o=t.featureOfflineMode,l=t.isOffline,c=t.clientToolBar,u=t.featureWysiwygComposer;var d=this.state,p=d.fileIndex,h=d.shareWith,v=d.confirmClose;var m=Wt.t("Add a message about the file",{fallbackHash:"76426947fe26fc3fa06b6bf272f55b1b45248641"});var f=Wt.t("Upload a file",{fallbackHash:"1ed2e7b50fa1dbbf1693d1c38adf270c04db10c6"});this.isMultipleFiles()&&(f=Wt.t("Upload a file ({number} of {total})",{number:p+1,total:a.length,fallbackHash:"98feccd29dda6dfff23692d85c563aada4877d37"}));var b=false;var g=j()("p-file_upload_dialog",{"p-file_upload_dialog--multiple":this.isMultipleFiles()&&!v,"p-file_upload_dialog--client_toolbar":c||u});var _="";o&&l&&(_=s.a.createElement(re["a"],{tooltipLabel:Wt.t("Upload file")}));return s.a.createElement(Z["a"],{className:g,title:f,shouldCloseOnOverlayClick:b,onClose:this.onCancel,onCancel:v?this.onCancelDiscard:this.onCancel,onGo:v?this.onCancel:this.onGo,useSlackScrollbarWithPadding:true,cancelText:v?Wt.t("No, keep it"):null,goButtonIsDisabled:this.isGoDisabled(),goButtonTooltip:_,goButtonText:v?Wt.t("Yes, discard the message"):Wt.t("Upload"),footerText:v?Wt.t("Closing the window will discard your message"):this.renderFooterExtra(),goButtonType:v?"danger":"primary",showCancelButton:v},this.renderWarning(),s.a.createElement("div",{className:"p-file_upload_dialog__section"},s.a.createElement(Tt["a"],{channelId:n,threadTs:i,text:r,onTextChange:this.onTextChange,ariaLabel:m,placeholder:m,enabled:h,focusOnMount:true,onEnter:this.onGo,enableBroadcastKeywords:!i,maxLines:6})),this.renderBroadcastCheckbox(),this.isMultiFileUpload()?this.renderMultiFileUpload():s.a.createElement(s.a.Fragment,null,this.renderImagePreview(),this.renderFileNameInput(),this.renderMultiFileShareInputs()),this.renderRetentionWarning())}}]);return t}(i["PureComponent"]);Yt.displayName="FileUploadDialog";Yt.defaultProps=zt;function Qt(e,t){var a=Object(W["d"])(e);var r={overStorageLimit:Object(H["isOverStorageLimit"])(a),isStdPlan:Object(H["isOnStandardPlan"])(a),isPlusPlan:Object(H["isOnPlusPlan"])(a),isEnterprisePlan:Object(H["isEnterpriseTeam"])(a),isInEnforceFileLimitTreatment:Object(V["a"])(e)};return n()({},Object(Nt["b"])(e,t),r,{retentionDuration:parseInt(Object(B["a"])(e,"file_retention_type"),10)?Object(B["a"])(e,"file_retention_duration"):null,teamId:a.id,isOffline:!Object(I["d"])(e),featureOfflineMode:Object(S["isFeatureEnabled"])(e,"feature_offline_mode"),featureSonicInputs:Object(S["isFeatureEnabled"])(e,"feature_sonic_inputs"),featureWysiwygComposer:Object(Y["a"])(e),currentChannelId:Object(h["a"])(e),pendingFiles:Object(d["getPendingFilesforDialog"])(e),clogger:Object(P["a"])({state:e}),clientToolBar:"composer_toolbar"===Object(T["getGroupForUser"])(e,"composer_toolbar")})}var Jt={closeModal:u["closeModal"],switchToChannel:M["a"],getShareableChannelId:D["a"],clearPendingFilesForDialog:d["clearPendingFilesForDialog"]};var Zt=Object(E["connect"])(Qt,Jt)(Yt);var Xt=Object(Nt["a"])(Zt);var $t=Object(l["b"])("Takes N files and opens the file upload dialog",function(e,t,a){var r=a.files,i=a.threadTs,o=a.inputProxy;if(!r||!r.length){Object(c["a"])({getState:t}).error("No files passed to openFileUploadDialog");return null}var l=t();var v=function t(c){if(!c||!c.length)return null;var p=Object(S["isFeatureEnabled"])(l,"feature_sonic_inputs");var v=Object(h["a"])(l);var m=ta(i,o);var f=ea(i,{inputProxy:o,featureSonicInputs:p,currentChannelId:v});e(Object(d["processAndAddPendingFilesForDialog"])({files:c}));return e(Object(u["openModal"])({element:s.a.createElement(Xt,n()({},a,{files:c,initialText:f,initialBroadcast:m,fileSizeExceeded:c.length<r.length}))}))};return e(Object(p["a"])({selectedFiles:r})).then(function(e){return v(e)})});function ea(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.inputProxy,r=t.featureSonicInputs,n=t.currentChannelId;if(a){var i=a.getText();i&&a.setText("");return i}if(e&&Object(L["b"])()===e){var s=Object(L["h"])();s&&Object(L["c"])();return s}if(r){var o=Object(z["a"])({viewContext:x["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:n});var l=o.getText();l&&o.setText("");return l}var c=Object(F["d"])();c&&Object(F["e"])("");return c}function ta(e,t){if(t){var a=t.getBroadcast();a&&t.setBroadcast(false);return a}if(!e||Object(L["b"])()!==e)return false;return Object(L["e"])()}var aa=t["a"]=$t},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(15);var o=a(48);var l=a(1226);var c=a(34);var u=a(132);var d=Object(s["b"])("Opens the custom status input in a dialog",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.fromKeyboardShortcut,i=void 0!==r&&r;if(i){var s=t();Object(c["f"])(s,"used_custom_status_kb_shortcut")||e(Object(u["c"])({pref:"used_custom_status_kb_shortcut",value:true}))}e(Object(o["openModal"])({element:n.a.createElement(l["c"],{useDialog:true,focusOnMount:true,openedFromKeyboardShortcut:i})}))});d.propTypes={fromKeyboardShortcut:i["b"].bool};t["a"]=d},function(e,t,a){"use strict";var r=a(2);var n=a.n(r);var i=a(14);var s=a(98);var o=a(19);var l=a(23);var c=a(27);var u=a(73);var d=a(12);var p=a(284);var h=function e(t,a){var r=Object(u["a"])(t);return a&&a!==r&&Object(o["u"])(t,a)};var v=Object(i["b"])(function(e){if(!(n.a.isObject(e)&&e.messagePane))return"";var t=Object(p["k"])(e);if(h(e,t))return t;var a=Object(o["f"])(e);var r=a&&1===a.length&&a[0];if(r)return r.id;var i=Object(c["a"])(Object(l["c"])(e),Object(s["m"])());if(i)return i.id;var u=Object(o["j"])(e,"USLACKBOT");if(u)return u;Object(d["a"])({state:e}).error("failed to find previous channel id or a suitable fallback");return});t["a"]=v},,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(3);var n=a.n(r);var i=a(0);var s=a(25);var o=a(29);var l=Object(s["a"])("Calls client.counts endpoint",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason,i=void 0===r?"client-counts-api/fetchClientCounts":r;return e(Object(o["a"])({method:"client.counts",args:{thread_counts_by_channel:true},reason:i})).then(function(e){if(!e||!e.ok)return{};var t=e.channels,a=void 0===t?[]:t,r=e.ims,i=void 0===r?[]:r,s=e.mpims,o=void 0===s?[]:s,l=e.threads,c=void 0===l?{}:l;return{channels:a,ims:i.map(function(e){return n()({},e,{is_im:true})}),mpims:o.map(function(e){return n()({},e,{is_mpim:true})}),threads:c}})});l.propTypes={reason:i["b"].string}},,,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(112);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(1063);var v=function(e){p()(t,e);function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.keys,r=e.heightCache,i=e.containerHeight,s=void 0===i?0:i,o=e.stickToBottom,c=void 0!==o&&o,u=e.bottomMargin,d=void 0===u?0:u,p=e.ANCHOR_OFFSET,h=void 0===p?0:p,v=e.STICKY_EPSILON,m=void 0===v?2:v,f=e.STICKY_EPSILON_SETHEIGHT,b=void 0===f?2:f;n()(this,t);var g=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{keys:a,heightCache:r}));g.containerHeight=s;g.stickToBottom=c;g.bottomMargin=d;g.STICKY_EPSILON=m;g.STICKY_EPSILON_SETHEIGHT=b;g.ANCHOR_OFFSET=h;g.anchorOffset=h;g.anchor=false;return g}s()(t,[{key:"getOffsetForKey",value:function e(t){if(!t)return this.totalHeight;var a=this.getTop(t);if(void 0===a)return 0;return a-this.anchorOffset}},{key:"setHeight",value:function e(a,r,n){if(false!==this.anchor){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setHeight",this).call(this,a,r);return this.bracketScrollTop(this.getOffsetForKey(this.anchor))}if(this.shouldStickToBottom(n,this.STICKY_EPSILON_SETHEIGHT)){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setHeight",this).call(this,a,r);return this.bracketScrollTop(Infinity)}var i=n;var s=this.getBottom(a);if(s<=n+this.anchorOffset){var o=r-this.getHeight(a);i+=o}u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setHeight",this).call(this,a,r);return this.bracketScrollTop(i)}},{key:"setKeys",value:function e(a,r){if(false!==this.anchor){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,a);return this.bracketScrollTop(this.getOffsetForKey(this.anchor))}if(this.shouldStickToBottom(r)){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,a);return this.bracketScrollTop(Infinity)}var n=r+this.anchorOffset;var i=this.findAnchor(this.keys,a,n);if(!i){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,a);return this.bracketScrollTop(r)}var s=this.getTop(i)-n;u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setKeys",this).call(this,a);var o=this.getTop(i)-n;var l=s-o;return this.bracketScrollTop(r-l)}},{key:"setContainerHeight",value:function e(t,a){if(false!==this.anchor){this.containerHeight=t;this.layout();return this.bracketScrollTop(this.getOffsetForKey(this.anchor))}if(this.shouldStickToBottom(a)){this.containerHeight=t;this.layout();return this.bracketScrollTop(Infinity)}this.containerHeight=t;this.layout();return a}},{key:"setBottomMargin",value:function e(t){this.bottomMargin=t}},{key:"setStickToBottom",value:function e(t){this.stickToBottom=t}},{key:"setAnchor",value:function e(t,a){this.anchor=t;this.anchorOffset="number"!==typeof a?this.ANCHOR_OFFSET:a}},{key:"findAnchor",value:function e(t,a,r){for(var n=0;n<t.length;n++){var i=t[n];if(this.getBottom(i)>r)for(var s=0;s<a.length;s++)if(a[s]===i)return i}return null}},{key:"bracketScrollTop",value:function e(t){return Math.max(0,Math.min(this.totalHeight-this.containerHeight+this.bottomMargin,t))}},{key:"shouldStickToBottom",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.STICKY_EPSILON;if(!this.stickToBottom)return false;return t>=this.totalHeight-this.containerHeight-a+this.bottomMargin}}]);return t}(h["a"]);t["a"]=v},function(e,t,a){"use strict";var r=a(1809);t["a"]=function(e){if(!e)return false;if("INPUT"===e.nodeName)return true;if("SELECT"===e.nodeName)return true;if("TEXTAREA"===e.nodeName)return true;return Object(r["a"])(e)}},function(e,t,a){"use strict";a.d(t,"b",function(){return i});a.d(t,"a",function(){return s});var r=a(0);var n=a(18);var i=Object(n["b"])("Initialize enterprise preferences");i.propTypes={unlocked_prefs:r["b"].object,locked_prefs:r["b"].object,org_prefs:r["b"].object};var s=Object(n["b"])("Update on enterprise org pref");s.propTypes={pref:r["b"].string.isRequired,value:r["b"].any}},,,,,,,,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=function e(){n()(this,e);var t={};t.promise=new Promise(function(e,a){t.resolve=e;t.reject=a});return t};var s=i;a.d(t,"a",function(){return o});function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;var a=new s;e.then(a.resolve,a.reject);setTimeout(function(){if(e.isPending()){e.cancel();var r=new Error("Maximum timeout ("+t+"ms) exceeded.");a.reject(r)}},t);return a.promise}},,function(e,t,a){"use strict";a.r(t);a.d(t,"setSupportsStickyPosition",function(){return p});a.d(t,"setNotificationPermission",function(){return h});a.d(t,"getSupportStickyPosition",function(){return f});a.d(t,"getNotificationPermission",function(){return b});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(18);var c=a(36);var u=a(14);var d;var p=Object(l["b"])("Update the supports_sticky_position");p.propTypes=o["b"].bool.isRequired;var h=Object(l["b"])("Update the notificationPermission");h.propTypes=o["b"].string.isRequired;var v={};var m=Object(c["b"])((d={},n()(d,p,function(e,t){return s()({},e,{supportsStickyPosition:t})}),n()(d,h,function(e,t){return s()({},e,{notificationPermission:t})}),d),v,{persistenceEnabled:true});m.propTypes={supportsStickyPosition:o["b"].bool,notificationPermission:o["b"].string};t["default"]=m;var f=Object(u["b"])(function(e){return e&&e.environment&&e.environment.supportsStickyPosition});var b=Object(u["b"])(function(e){return e&&e.environment&&e.environment.notificationPermission})},function(e,t,a){"use strict";a.r(t);a.d(t,"setActiveAppTab",function(){return f});a.d(t,"setNewUnreads",function(){return b});a.d(t,"setReactionToast",function(){return g});a.d(t,"getActiveAppTab",function(){return y});a.d(t,"getNewUnreads",function(){return O});a.d(t,"getReactionToast",function(){return k});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(18);var c=a(36);var u=a(14);var d;var p=o["b"].oneOf(["messages","about"]);var h=o["b"].shape({emoji:o["b"].string,memberName:o["b"].string,channelName:o["b"].string});var v=o["b"].shape({activeAppTab:p,newUnreads:o["b"].number,toaster:h});var m={activeAppTab:"messages",newUnreads:0};var f=Object(l["b"])("Notifies modern of the active tab for app/bot users");f.propTypes=p;var b=Object(l["b"])("Set the number of new unread messages that came in while in the All Unreads view");b.propTypes=o["b"].number;var g=Object(l["b"])("Sets the currently active reaction toast; null or undefined to clear");g.propTypes=h;var _=Object(c["b"])((d={},n()(d,f,function(e,t){if(!t)return e;return s()({},e,{activeAppTab:t})}),n()(d,b,function(e,t){return s()({},e,{newUnreads:t})}),n()(d,g,function(e,t){return s()({},e,{toaster:t})}),d),m,{persistenceEnabled:true});_.propTypes=v;t["default"]=_;var y=Object(u["b"])(function(e){return e&&e.globalNav&&e.globalNav.activeAppTab});var O=Object(u["b"])(function(e){return e&&e.globalNav&&e.globalNav.newUnreads});var k=Object(u["b"])(function(e){return e&&e.globalNav&&e.globalNav.toaster})},,,function(e,t,a){"use strict";a.r(t);a.d(t,"upsertAppsInChannel",function(){return k});a.d(t,"removeAppsInChannelUserId",function(){return E});a.d(t,"getAppsInChannelByChannelId",function(){return w});a.d(t,"fetchAppsInChannel",function(){return S});a.d(t,"markAppsInChannelAsStale",function(){return N});a.d(t,"getConditionalFetchManager",function(){return M});a.d(t,"markObjectsAsStale",function(){return D});a.d(t,"getFreshObjects",function(){return x});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(2);var c=a.n(l);var u=a(18);var d=a(36);var p=a(14);var h=a(15);var v=a(61);var m=a(192);var f=a(27);var b=a(23);var g=a(230);var _;var y=50;var O=o["b"].shape({id:o["b"].string.isRequired,userIds:o["b"].arrayOf(o["b"].string).isRequired}).isRequired;var k=Object(u["b"])("adds array of user IDs corresponding to apps in the channel to the store");k.propTypes={channelId:o["b"].string.isRequired,channelApps:O};var E=Object(u["b"])("removes user id from store");E.propTypes={channelId:o["b"].string.isRequired,userId:o["b"].string.isRequired};var C={};var j=Object(d["b"])((_={},n()(_,k,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.channelApps;if(!a||!r)return e;return s()({},e,n()({},a,r))}),n()(_,E,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.userId;if(!a||!r)return e;var i=e[a];if(!i)return e;return s()({},e,n()({},a,s()({},i,{userIds:Object(l["without"])(i.userIds,r)})))}),_),C,{persistenceEnabled:true});j.propTypes=o["b"].objectOf(O);t["default"]=j;var w=Object(p["b"])(function(e,t){var a=e&&e.appsInChannels&&e.appsInChannels[t];var r=Object(b["c"])(e);if(!a)return R().fetchObjectWithId(r,t);M().maybeRefetch(r,t);return a});var S=Object(h["b"])("Fetches apps in the channel",function(e,t,a){return e(Object(g["d"])({query:{count:y,channels:[a],filter:"apps",index:"users_by_realname"}})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{members:[]},t=e.members;return{id:a,userIds:t.map(function(e){return e.id})}})});S.propTypes=o["b"].string;var I=Object(h["b"])("Fetches channel apps for multiple channels given an array of channel IDs",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Promise.map(a,function(t){return e(S(t))})});I.propTypes=o["b"].arrayOf(o["b"].string).isRequired;var T=Object(h["b"])("Upserts channel apps for multiple channels given an array of channel Ids",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];a.forEach(function(t){return e(k({channelId:t.id,channelApps:t}))});var r=a.filter(v["b"]).map(function(e){return e.id});M().markObjectsAsFresh(Object(b["c"])(t()),r);return a});T.propTypes=o["b"].arrayOf(o["b"].object).isRequired;var A=Object(h["b"])("Fetchs and upserts channel apps for multiple channels given an array of channelIds",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e(I(a)).then(function(t){return e(T(t))})});A.propTypes=o["b"].arrayOf(o["b"].string).isRequired;var N=Object(h["b"])("Marks apps in channel as stale so they will be refetched when needed",function(e,t,a){var r=t();var n=Object(b["c"])(r);M().markObjectsAsStale(n,[a])});N.propTypes=o["b"].string.isRequired;var P=function e(t){return function(e,a){return Object(f["a"])(e,t(a))}};var R=Object(l["memoize"])(function(){return new v["a"]({fetch:P(I),upsertKnown:P(T),upsertNonExistent:P(T)})});var M=Object(l["memoize"])(function(){return new m["b"]({fetch:P(A),isEnabled:function e(){return true}})});var D=function e(t,a){return M().markObjectsAsStale(t,a)};var x=function e(t){return M().getFreshObjects(t)}},,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",function(){return w});var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(1);var v=a.n(h);var m=a(0);var f=a(16);var b=a.n(f);var g=a(2);var _=a.n(g);var y=a(1521);var O=a(922);var k=Object(h["createContext"])({hover:false,setHover:g["noop"]});var E={className:m["b"].string,children:m["b"].node,hovered:m["b"].bool,setBackground:m["b"].func,"data-qa":m["b"].string,hasKeyboardFocus:m["b"].bool,hasKeyboardFocusWithin:m["b"].bool,onFocus:m["b"].func,onBlur:m["b"].func};var C={className:null,children:void 0,hovered:false,setBackground:g["noop"],"data-qa":void 0,hasKeyboardFocus:false,hasKeyboardFocusWithin:false,onFocus:g["noop"],onBlur:g["noop"]};var j=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMouseOver=a.onMouseOver.bind(a);a.onMouseOut=a.onMouseOut.bind(a);a.onMutation=a.onMutation.bind(a);a.setHover=a.setHover.bind(a);a.hoveredElement=null;a.mutationObserver=null;a.state={hoverCount:0,hover:false};return a}l()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"componentWillUnmount",value:function e(){if(this.mutationObserver){this.mutationObserver.disconnect();this.mutationObserver=null}}},{key:"onMouseOver",value:function e(t){var a=t.target,r=t.currentTarget,n=t.relatedTarget;if(!r.contains(a))return;if(!r.contains(n)){this.setHover(true);if(!this.mutationObserver){this.mutationObserver=new MutationObserver(this.onMutation);this.mutationObserver.observe(r,{childList:true,subtree:true})}}this.hoveredElement=a}},{key:"onMouseOut",value:function e(t){var a=t.target,r=t.currentTarget,n=t.relatedTarget;if(!r.contains(a))return;if(!this.hoveredElement)return;if(!r.contains(n)){this.setHover(false);this.hoveredElement=null;if(this.mutationObserver){this.mutationObserver.disconnect();this.mutationObserver=null}}}},{key:"onMutation",value:function e(t){var a=this;var r=t.some(function(e){return Array.from(e.removedNodes).some(function(e){return e.contains(a.hoveredElement)})});if(r){this.hoveredElement=null;this.setHover(false)}}},{key:"setHover",value:function e(t){this.setState(function(e){var a=Math.max(0,e.hoverCount+(t?1:-1));var r=a>0;return{hoverCount:a,hover:r}})}},{key:"setBackground",value:function e(){this.props.setBackground({hover:this.isHovered()})}},{key:"isHovered",value:function e(){var e=this.props.hovered||this.state.hover;var t=this.props.hasKeyboardFocus||this.props.hasKeyboardFocusWithin;return e||t}},{key:"render",value:function e(){var t=this.isHovered();var a=b()("c-message_kit__hover",{"c-message_kit__hover--hovered":t},this.props.className);var r=this.props["data-qa"];return v.a.createElement(k.Provider,{value:{hover:t,setHover:this.setHover}},v.a.createElement("div",{role:"document",className:a,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onFocus:this.props.onFocus,onBlur:this.props.onBlur,"data-qa":r},this.props.children))}}]);return t}(h["PureComponent"]);j.displayName="MessageHover";j.defaultProps=C;t["a"]=Object(O["b"])(Object(y["a"])(j));function w(e){return function t(a){return v.a.createElement(k.Consumer,null,function(t){var r=t.hover,i=t.setHover;return v.a.createElement(e,n()({},a,{hover:r,setHover:i}))})}}},,,,function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a(0);var i=a(29);var s=a(25);var o=Object(s["a"])("Fetch custom emoji from the API",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;return e(Object(i["a"])({method:"emoji.list",args:{include_complex_values:1},reason:r})).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{emoji:e.emoji,cacheTs:e.cache_ts}})});o.propTypes={reason:n["b"].string.isRequired};var l=a(15);var c=a(23);var u=a(124);var d=a(158);var p=a(1306);var h=a(12);var v=a(717);var m=a(210);a.d(t,"bulkAddCustomEmoji",function(){return b});a.d(t,"loadEmoji",function(){return y});a.d(t,"maybeReloadEmoji",function(){return O});var f=100;var b=Object(l["b"])("Process and add custom emoji data",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.teamId,i=a.cacheTs,s=a.emojis,o=void 0===s?{}:s,l=a.aliases,c=void 0===l?{}:l;if(!n||!i)return;var d=Object(r["pickBy"])(o,function(e,t){return Object(u["k"])(t)});var p=Object(r["size"])(o)-Object(r["size"])(d);var m=Object(r["pickBy"])(c,function(e,t){return Object(u["k"])(t)});var f=Object(r["size"])(c)-Object(r["size"])(m);(p||f)&&Object(h["a"])({teamId:n}).info("EMOJI_STORE","Excluded "+p+" unsafe emoji and "+f+" unsafe alias name(s) while ingesting customs");var b=t();var g=E({state:b,teamId:n,aliases:m,emojis:d});e(Object(v["innerAddCustomEmoji"])({teamId:n,cacheTs:i,emojis:d,aliases:g}))});var g={};var _=function e(t){return!!(g[t]&&g[t].isPending&&g[t].isPending())};var y=Object(l["b"])("Load custom emoji",function(e,t){var a=t();var n=Object(c["c"])(a);Object(p["a"])(n);g[n]=e(o({reason:"loadEmoji"})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.emoji,i=t.cacheTs;if(Object(r["isEmpty"])(a))return;var s=Object(d["i"])(a),o=s.emojis,l=s.aliases;e(b({teamId:n,cacheTs:i,emojis:o,aliases:l}))});return g[n]});y.propTypes=null;var O=Object(l["b"])("Reload custom emoji if we are out of sync with the server",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.serverCacheTs;var i=t();var s=Object(c["c"])(i);var o=i.emoji&&i.emoji[s]||{},l=o.cacheTs,u=o.customEmoji;var d=Object(r["isEmpty"])(u);var p=Object(r["isUndefined"])(l)||parseFloat(l,10)<parseFloat(n,10);var h=d||p;var v=_(s);if(h&&!v)return e(y());return Promise.resolve()});O.propTypes={serverCacheTs:n["b"].string};function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,a=e.teamId,r=e.aliasValue,n=e.aliases,i=void 0===n?{}:n,s=e.emojis,o=void 0===s?{}:s,l=e.depth,c=void 0===l?0:l;if(c>f){Object(h["a"])({teamId:a}).warn("Exceeded the max alias chain depth for an emoji. There is potentially an alias loop in this user's emoji data.");return null}var u=Object(m["getCanonicalEmojiName"])(t,{text:r,teamId:a});if(u)return u;if(o[r])return r;if(i[r])return k({state:t,teamId:a,aliasValue:i[r],aliases:i,emojis:o,depth:c+1});Object(h["a"])({teamId:a}).warn("Could not resolve emoji alias to an existing emoji.");return null}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,a=e.teamId,n=e.aliases,i=e.emojis;var s={};Object(r["forEach"])(n,function(e,r){var o=k({state:t,teamId:a,aliasValue:e,aliases:n,emojis:i});if(!o)return;s[r]=o});return s}b.propTypes={teamId:n["b"].string.isRequired,cacheTs:n["b"].string.isRequired,emojis:n["b"].object,aliases:n["b"].object}},,,function(e,t,a){"use strict";a.d(t,"a",function(){return u});a.d(t,"d",function(){return d});a.d(t,"c",function(){return p});a.d(t,"b",function(){return h});var r=a(40);var n=a.n(r);var i=a(125);var s=a(770);var o=a(164);var l=a(10);var c=new l["b"]("do_not_disturb");var u=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.currentTime,o=void 0===r?n()().unix():r;var l=Object(i["a"])(o);var c=Object(i["a"])(t);var u=Math.ceil(Object(s["a"])(c,l));return u};var d=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.time,r=void 0===a?"09:00":a;var i=n()().add(1,"days").format("YYYY-MM-DD");var s=n()(i+" "+r).unix();return u(s)};var p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.time,r=void 0===a?"09:00":a;var i=n()().add(1,"week").startOf("isoWeek").format("YYYY-MM-DD");var s=n()(i+" "+r).unix();return u(s)};var h=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.do24hrTime,i=void 0!==r&&r,s=a.today,l=void 0===s?n()().format("YYYY-MM-DD"):s,u=a.tomorrow,d=void 0===u?n()().add(1,"day").format("YYYY-MM-DD"):u;if(!t)return"";var p=Object(o["n"])(t,{do24hrTime:i});var h=Object(o["k"])(t,{omitTime:true});if(h===l)return c.t("Notifications paused until {time}",{time:p});if(h===d)return c.t("Notifications paused until tomorrow at {time}",{time:p});return c.t("Notifications paused until {expires}",{expires:Object(o["c"])(t,"{status_expiration}",{do24hrTime:i})})}},,,,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(2);var l=a(688);var c=a(71);var u=a(20);var d=Object(u["b"])("TS.debug_widget.isVisible");var p=Object(u["b"])("TS.debug_widget.setFrameRate");a.d(t,"f",function(){return O});a.d(t,"h",function(){return k});a.d(t,"j",function(){return E});a.d(t,"d",function(){return C});a.d(t,"b",function(){return j});a.d(t,"c",function(){return w});a.d(t,"g",function(){return S});a.d(t,"i",function(){return I});a.d(t,"e",function(){return T});a.d(t,"a",function(){return A});var h=100;var v=1e3;var m=300;var f=1e3;var b=500;var g=60;var _=function(){function e(){n()(this,e);this.enabledForPRQMetrics=false;this.enabledForClientStats=false;this.resetCountersForClientStats();this.resetCountersForPRQMetrics();this.beachballsTotal=0;this.stuttersTotal=0;this.rafHandler=this.rafHandler.bind(this)}s()(e,[{key:"isEnabled",value:function e(){return this.isEnabledForClientStats()||this.isEnabledForPRQMetrics()}},{key:"rafHandler",value:function e(){this.isEnabledForClientStats()&&this.rafHandlerForClientStats();this.isEnabledForPRQMetrics()&&this.rafHandlerForPRQMetrics();this.isEnabled()&&window.requestAnimationFrame(this.rafHandler)}},{key:"resetCountersForClientStats",value:function e(){this.beachballs=0;this.frameRates=[];this.stutters=0;this.lastRafHandlerTimeForClientStats=window.performance.now();this.fpsIndex=0;this.fpsStartTime=null}},{key:"rafHandlerForClientStats",value:function e(){if(!this.isEnabledForClientStats())return;var t=window.performance.now();var a=t-this.lastRafHandlerTimeForClientStats;this.lastRafHandlerTimeForClientStats=t;if(a>v){this.beachballs+=1;this.beachballsTotal+=1}else if(a>h){this.stutters+=1;this.stuttersTotal+=1}0===this.fpsIndex&&(this.fpsStartTime=t);this.fpsIndex+=1;if(this.fpsIndex===m){var r=(t-this.fpsStartTime)/1e3;var n=Math.floor(this.fpsIndex/r);this.fpsIndex=0;d()&&p(n);this.frameRates.push(n)}}},{key:"startClientStats",value:function e(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler);this.enabledForClientStats=true;this.resetCountersForClientStats()}},{key:"stopClientStats",value:function e(){this.enabledForClientStats=false}},{key:"storeClientStats",value:function e(){var t=Object(c["a"])();t.count("stutters",this.stutters);t.count("beachballs",this.beachballs);if(!Object(o["isEmpty"])(this.frameRates)){var a=Object(o["min"])(this.frameRates);var r=void 0;var n=this.frameRates.sort();var i=Math.floor(n.length/2);r=n.length%2===1?n[i]:(n[i-1]+n[i])/2;t.store("fps_min",a);t.store("fps_median",r)}this.stutters=void 0;this.beachballs=void 0;this.frameRates=void 0}},{key:"isEnabledForClientStats",value:function e(){return!!this.enabledForClientStats}},{key:"getTotalBeachballCount",value:function e(){return this.beachballsTotal}},{key:"getTotalStutterCount",value:function e(){return this.stuttersTotal}},{key:"resetCountersForPRQMetrics",value:function e(){this.histJankyWindows={};this.histFrameRenderTime={};this.durationMs=0;this.lastRafHandlerTimeForPRQMetrics=void 0;this.nextJankyWindowSampleIntervalNumber=1;this.framesInPreviousJankyWindowSample=0;this.framesInCurrentJankyWindowSample=0}},{key:"recordJankyWindows",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(a<1)return;var r=Math.max(g-t,0);this.histJankyWindows[r]=(this.histJankyWindows[r]||0)+a}},{key:"sampleJankyWindows",value:function e(){var t=Object(l["d"])(this.durationMs,9)>b*this.nextJankyWindowSampleIntervalNumber;var a=Math.floor(this.durationMs/b);var r=a-this.nextJankyWindowSampleIntervalNumber;if(t){if(this.durationMs>=f){this.recordJankyWindows(0,r-1);this.recordJankyWindows(this.framesInCurrentJankyWindowSample,r>0?1:0);this.recordJankyWindows(this.framesInCurrentJankyWindowSample+this.framesInPreviousJankyWindowSample)}this.nextJankyWindowSampleIntervalNumber=a+1;this.framesInPreviousJankyWindowSample=r>0?0:this.framesInCurrentJankyWindowSample;this.framesInCurrentJankyWindowSample=0}this.framesInCurrentJankyWindowSample+=1}},{key:"rafHandlerForPRQMetrics",value:function e(){if(!this.isEnabledForPRQMetrics())return;var t=window.performance.now();if("undefined"===typeof this.lastRafHandlerTimeForPRQMetrics){this.lastRafHandlerTimeForPRQMetrics=t;return}var a=t-this.lastRafHandlerTimeForPRQMetrics;var r=Object(l["d"])(Math.round(a,0),2);this.histFrameRenderTime[r]=(this.histFrameRenderTime[r]||0)+1;this.lastRafHandlerTimeForPRQMetrics=t;this.durationMs+=a;this.sampleJankyWindows()}},{key:"startPRQMetrics",value:function e(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler);this.enabledForPRQMetrics=true;this.resetCountersForPRQMetrics()}},{key:"stopPRQMetrics",value:function e(){this.enabledForPRQMetrics=false}},{key:"isEnabledForPRQMetrics",value:function e(){return!!this.enabledForPRQMetrics}},{key:"getPRQMetrics",value:function e(){return{durationMs:Math.round(this.durationMs),histJankyWindows:this.histJankyWindows,histFrameRenderTime:this.histFrameRenderTime}}}]);return e}();_.instance=null;function y(){null===_.instance&&(_.instance=new _);return _.instance}var O=y().startClientStats.bind(_.instance);var k=y().stopClientStats.bind(_.instance);var E=y().storeClientStats.bind(_.instance);var C=y().isEnabledForClientStats.bind(_.instance);var j=y().getTotalBeachballCount.bind(_.instance);var w=y().getTotalStutterCount.bind(_.instance);var S=y().startPRQMetrics.bind(_.instance);var I=y().stopPRQMetrics.bind(_.instance);var T=y().isEnabledForPRQMetrics.bind(_.instance);var A=y().getPRQMetrics.bind(_.instance)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";t.__esModule=true;t["default"]=s;function r(e){return e&&e.__esModule?e:{default:e}}var n=a(2222);var i=r(n);function s(e,t){return!(0,i["default"])(this.props,e)||!(0,i["default"])(this.state,t)}e.exports=t["default"]},,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a(0);var n=a(18);var i=Object(n["b"])("sets persistence hashes in the persistence hashes store");i.propTypes=r["b"].object},,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(0);var n=a(158);var i=a(210);var s=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.messageText,s=a.teamId;if(!r||!s)return null;var o=Object(n["c"])();return r.replace(o,function(e){var a=Object(i["getNativeEmojiFromText"])(t,{text:e,teamId:s});if(a)return a;return e})};t["a"]=s;s.propTypes={messageText:r["b"].string,teamId:r["b"].string}},,function(e,t,a){"use strict";a.r(t);a.d(t,"addInviter",function(){return v});a.d(t,"removeInviter",function(){return m});a.d(t,"getInviter",function(){return b});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(2);var c=a.n(l);var u=a(18);var d=a(36);var p=a(14);var h;var v=Object(u["b"])("Add an inviter for a channel");v.propTypes={channelId:o["b"].string.isRequired,inviter:o["b"].string.isRequired};var m=Object(u["b"])("Remove an inviter for a channel");m.propTypes=o["b"].string.isRequired;var f=Object(d["b"])((h={},n()(h,v,function(e,t){var a=t.channelId,r=t.inviter;if(!a||!r)return e;return s()({},e,n()({},a,r))}),n()(h,m,function(e,t){if(!t||!e[t])return e;return c.a.omit(e,t)}),h),{},{persistenceEnabled:true});f.propTypes=o["b"].objectOf(o["b"].string);t["default"]=f;var b=Object(p["b"])(function(e,t){return e&&e.channelsMeta&&e.channelsMeta.inviters&&e.channelsMeta.inviters[t]})},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(1);var v=a.n(h);var m=a(0);var f=a(13);var b=a(2);var g=a(17);var _=a(10);var y=a(186);var O=a(258);var k=a(202);var E=a(22);var C=a(37);var j=a.n(C);var w=a(26);var S=a.n(w);var I=a(16);var T=a.n(I);var A=a(1280);var N=a(442);var P=a(321);var R=a(28);var M=a(1294);var D=a(1510);var x={default:"default",short:"short"};var F=new _["b"]("form");var L={autoSelectFirstOption:m["b"].bool,className:m["b"].string,displayValue:m["b"].string,id:m["b"].string,isLoading:m["b"].bool,labelId:m["b"].string,membersOnly:m["b"].bool,name:m["b"].string,onChange:m["b"].func,onClearButtonClick:m["b"].func.isRequired,onClose:m["b"].func,onFilterInputChange:m["b"].func,onOptionHighlighted:m["b"].func,onOutsideClick:m["b"].func,onOpen:m["b"].func,onScroll:m["b"].func,optionClassName:m["b"].string,optionGroups:m["b"].array,options:m["b"].array,optionsListOffsetBottom:m["b"].number,optionsListOffsetTop:m["b"].number,optionsListWidth:m["b"].number,optionsRowHeight:m["b"].number,pillarClassName:m["b"].string,placeholder:m["b"].string,selectedOption:m["b"].object,selectedValueClassName:m["b"].string,type:m["b"].oneOf(Object(b["values"])(x)),useFullWidthOptions:m["b"].bool,usePlaceholderOption:m["b"].bool,wrapperClassName:m["b"].string,value:m["b"].string};var B={className:null,displayValue:void 0,id:"select-"+Object(P["d"])(),isLoading:false,labelId:null,membersOnly:true,name:null,onChange:b["noop"],onClose:b["noop"],onFilterInputChange:b["noop"],onOptionHighlighted:b["noop"],onOutsideClick:b["noop"],onOpen:b["noop"],optionClassName:void 0,optionGroups:void 0,options:void 0,optionsListOffsetBottom:0,optionsListOffsetTop:0,optionsListWidth:void 0,pillarClassName:void 0,placeholder:F.t("Choose an option\u2026"),selectedOption:void 0,selectedValueClassName:void 0,type:x.default,usePlaceholderOption:true,wrapperClassName:null,value:""};var U=function(e){p()(t,e);function t(e){s()(this,t);if(!e.optionGroups&&!e.options)throw new Error('WorkspaceSearchSelect requires an "optionGroups" or "options" prop.');var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.preventFocusAndBlur=false;a.state={filterQuery:"",isOpen:false,selectedOptionValue:""};Object(b["bindAll"])(a,["getFilteredOptions","getFilteredOptionGroups","onBlurred","onClearInput","onClicked","onFilterInputChanged","onFocused","onKeyPressedEsc","onKeyPressedUpOrDown","onOptionSelected","onOutsideClicked","onWrapperMouseDownOrTouchStart","onWrapperMouseUpOrTouchEnd","setRef"]);return a}l()(t,[{key:"componentDidMount",value:function e(){this.initKeyCommands()}},{key:"componentWillReceiveProps",value:function e(){this.setState(function(e){return{isOpen:e.isOpen}})}},{key:"componentDidUpdate",value:function e(t,a){var r=this.props,n=r.onClose,i=r.onOpen,s=r.selectedOption;var o=this.state,l=o.isOpen,c=o.selectedOptionValue;if(s){var u=Object(k["h"])(s)?Object(g["getMemberRealName"])(s):Object(b["get"])(s,"name");u!==c&&this.setSelectedOptionValue(u)}else c&&this.setSelectedOptionValue("");if(this.state.isOpen){document.addEventListener("click",this.onOutsideClicked);if(!a.isOpen){this.filterInput&&this.filterInput.focus();i(this.filterInput)}}else{document.removeEventListener("click",this.onOutsideClicked);a.isOpen&&n()}this.filterInput&&l&&this.filterInput.focus()}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("click",this.onOutsideClicked);this.resetKeyCommads()}},{key:"onBlurred",value:function e(){this.preventFocusAndBlur||this.toggleOpenState(false)}},{key:"onClicked",value:function e(t){var a=t.target===this.filterInput;a?this.toggleOpenState(true):this.toggleOpenState()}},{key:"onClearInput",value:function e(){var t=this.props.onClearButtonClick;this.filterInput&&(this.filterInput.value="");this.setFilterQuery("");this.setSelectedOptionValue("");this.toggleOpenState(false);t()}},{key:"onFilterInputChanged",value:function e(){if(this.filterInput){var t=this.filterInput.value;this.props.onFilterInputChange(t);this.setFilterQuery(t)}}},{key:"onFocused",value:function e(){this.preventFocusAndBlur||this.toggleOpenState(true);var t=this.props.displayValue;t&&this.filterInput&&(this.filterInput.value=t)}},{key:"onKeyPressedEsc",value:function e(){if(this.state.isOpen){this.toggleOpenState(false);this.focus()}}},{key:"onKeyPressedUpOrDown",value:function e(t){if(!this.state.isOpen){this.toggleOpenState(true);t.stopPropagation()}}},{key:"onOptionSelected",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value;if(!a)return;var r=this.getSelectedOptionDisplayValue({value:a});this.setSelectedOptionValue(r);this.props.onChange(a);this.toggleOpenState(false);this.filterInput&&this.filterInput.blur()}},{key:"onOutsideClicked",value:function e(t){if(this.wrapper&&!this.wrapper.contains(t.target)){this.toggleOpenState(false);this.props.onOutsideClick()}}},{key:"onWrapperMouseDownOrTouchStart",value:function e(){this.preventFocusAndBlur=true}},{key:"onWrapperMouseUpOrTouchEnd",value:function e(){this.preventFocusAndBlur=false}},{key:"onSearchAgainTriggered",value:function e(){var t=this.props.onClearButtonClick;this.preventFocusAndBlur=true;this.filterInput&&(this.filterInput.value="");this.setFilterQuery("");this.setSelectedOptionValue("");t();this.filterInput.focus();this.toggleOpenState();this.preventFocusAndBlur=false}},{key:"maybeShowOptions",value:function e(){var t=this.props,a=t.selectedOption,r=t.membersOnly;var n=this.getFilterQuery();var i=r?this.getFilteredOptions:this.getFilteredOptionGroups;if(n.length>0||a)return i();return[]}},{key:"getFilteredOptionGroups",value:function e(){var t=this.props,a=t.optionGroups,r=t.usePlaceholderOption;var n=this.getFilterQuery();if(!a)return null;if(!n&&r)return[this.getPlaceholderOptionGroup()].concat(S()(a));return a}},{key:"getFilteredOptions",value:function e(){var t=this.props,a=t.options,r=t.usePlaceholderOption;var n=this.getFilterQuery();if(!a)return null;if(!n&&r)return[this.getPlaceholderOption()].concat(S()(a));return a}},{key:"getFilterQuery",value:function e(){return Object(b["get"])(this,"filterInput.value","")}},{key:"getOptionsListEmptyMessage",value:function e(){var t=this.getFilterQuery();return t.length>0?this.renderOptionsListEmptyMessage():this.renderOptionsListHintText()}},{key:"getOptionsListTargetMeasurements",value:function e(){var t=this.props,a=t.optionsListOffsetBottom,r=t.optionsListOffsetTop,n=t.optionsListWidth;var i=this.select.getBoundingClientRect();var s=this.select.offsetTop-Object(A["a"])(this.select,this.select.offsetParent);var o=this.select.offsetLeft;var l=this.select.offsetParent.clientHeight-s;var c=s+i.height;var u=i.bottom;var d=i.top;var p=n||i.width;return{bottom:u,offsetBottom:a,offsetTop:r,relativeBottom:c,relativeLeft:o,relativeTop:l,top:d,width:p}}},{key:"getPlaceholderOption",value:function e(){return{isPlaceholder:true,label:this.props.placeholder,value:""}}},{key:"getPlaceholderOptionGroup",value:function e(){return{isPlaceholder:true,options:[this.getPlaceholderOption()]}}},{key:"getSelectedOptionDisplayValue",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value;var r=this.props,n=r.optionGroups,i=r.options;var s=n?Object(b["flatMap"])(n,"options"):i;var o=Object(b["find"])(s,{value:a});return Object(b["get"])(o,"displayValue")}},{key:"setFilterQuery",value:function e(t){this.setState(function(){return{filterQuery:t}})}},{key:"setSelectedOptionValue",value:function e(t){this.setState(function(){return{selectedOptionValue:t}})}},{key:"setRef",value:function e(t){var a=this;return function(e){a[t]=e}}},{key:"focus",value:function e(){this.preventFocusAndBlur=true;this.select.focus();this.preventFocusAndBlur=false}},{key:"blur",value:function e(){this.select.blur();this.filterInput&&this.filterInput.blur()}},{key:"filterOption",value:function e(t){var a=t.label.toLowerCase();var r=this.getFilterQuery().toLowerCase();return-1!==a.indexOf(r)}},{key:"initKeyCommands",value:function e(){this.keyCommands=new y["a"](this.select);this.keyCommands.bindAll([{keys:["esc"],handler:this.onKeyPressedEsc},{keys:["up","down"],handler:this.onKeyPressedUpOrDown}])}},{key:"resetKeyCommads",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"toggleOpenState",value:function e(t){this.setState(function(e){var a={isOpen:Object(b["isUndefined"])(t)?!e.isOpen:t};a.isOpen||(a.filterQuery="");return a})}},{key:"renderFilterInput",value:function e(){var t=this.state,a=t.filterQuery,r=t.selectedOptionValue;var n=this.props.displayValue;var i={"aria-label":"Filter for option list",className:"c-input_select__filter_input p-workspace-search__select",onChange:this.onFilterInputChanged,placeholder:this.props.placeholder,ref:this.setRef("filterInput"),type:"text"};i.value=r&&!a?r:r||!n||a?a:n;return v.a.createElement("input",i)}},{key:"renderOptionsListMaybe",value:function e(){if(!this.state.isOpen)return null;var t=this.props,a=t.autoSelectFirstOption,r=t.isLoading,n=t.membersOnly,i=t.optionClassName,s=t.optionsRowHeight,o=t.pillarClassName,l=t.useFullWidthOptions,c=t.value,u=t.onScroll,d=t.onOptionHighlighted;var p=n?240:400;return v.a.createElement(M["a"],{autoSelectFirstOption:a,emptyStateMessage:this.getOptionsListEmptyMessage(),isLoading:r,maxListHeight:p,onOptionSelected:this.onOptionSelected,optionClassName:i,onScroll:u,optionGroups:n?null:this.maybeShowOptions(),options:n?this.maybeShowOptions():null,optionsRowHeight:s,pillarClassName:o,targetMeasurements:this.getOptionsListTargetMeasurements(),useFullWidthOptions:l,value:c,onActiveOptionUpdated:d})}},{key:"renderOptionsListEmptyMessage",value:function e(){var t=this.getFilterQuery();var a=F.rt('No workspaces found matching <span class="sk_black bold">{query}</span>.',{query:t});var r=F.t("Try searching for another workspace or searching for a teammate\u2019s workspaces.");return v.a.createElement("div",{className:"p-workspace_search__no-results-message"},v.a.createElement("p",{className:"margin_0"},a),v.a.createElement("p",{className:"margin_0"},r))}},{key:"renderOptionsListHintText",value:function e(){var t=this.props.membersOnly;var a=t?F.rt('Enter a teammate\u2019s <span class="sk_black bold">name</span> or <span class="sk_black bold">email address</span>.'):F.rt('Enter a teammate\u2019s <span class="sk_black bold">name</span> or <span class="sk_black bold">email address</span>, or search for a <span class="sk_black bold">specific workspace</span>.');return v.a.createElement("div",{className:"p-workspace_search__no-results-message"},v.a.createElement("p",{className:"margin_0"},a))}},{key:"render",value:function e(){var t=this.props,a=t.autoSelectFirstOption,r=t.className,i=t.displayValue,s=t.isLoading,o=t.labelId,l=t.membersOnly,c=t.name,u=t.onChange,d=t.onClearButtonClick,p=t.onClose,h=t.onFilterInputChange,m=t.onOutsideClick,f=t.onOpen,b=t.onOptionHighlighted,g=t.onScroll,_=t.optionClassName,y=t.options,O=t.optionsListOffsetBottom,k=t.optionsListOffsetTop,E=t.optionsListWidth,C=t.optionsRowHeight,w=t.optionGroups,S=t.pillarClassName,I=t.placeholder,A=t.selectedOption,N=t.selectedValueClassName,P=t.type,M=t.useFullWidthOptions,D=t.usePlaceholderOption,x=t.wrapperClassName,F=j()(t,["autoSelectFirstOption","className","displayValue","isLoading","labelId","membersOnly","name","onChange","onClearButtonClick","onClose","onFilterInputChange","onOutsideClick","onOpen","onOptionHighlighted","onScroll","optionClassName","options","optionsListOffsetBottom","optionsListOffsetTop","optionsListWidth","optionsRowHeight","optionGroups","pillarClassName","placeholder","selectedOption","selectedValueClassName","type","useFullWidthOptions","usePlaceholderOption","wrapperClassName"]);var L=this.state.filterQuery;var B=T()("c-input_select__wrapper",x);var U=T()("c-input_select",{"c-input_select--active":this.state.isOpen,"c-input_select--short":"short"===P},r);var q=T()("p-workspace_search__clear-button",{hidden:!L&&!i});return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:B,onMouseDown:this.onWrapperMouseDownOrTouchStart,onMouseUp:this.onWrapperMouseUpOrTouchEnd,onTouchStart:this.onWrapperMouseDownOrTouchStart,onTouchEnd:this.onWrapperMouseUpOrTouchEnd,ref:this.setRef("wrapper"),role:"group"},v.a.createElement("div",n()({},F,{"aria-labelledby":o,className:U,"data-name":c,onBlur:this.onBlurred,onMouseDown:this.onClicked,onFocus:this.onFocused,ref:this.setRef("select")}),this.renderFilterInput()),this.renderOptionsListMaybe()),v.a.createElement(R["c"],{className:q,onClick:this.onClearInput,tabIndex:"0",ref:this.setRef("closeButton")}))}}]);return t}(N["a"]);U.displayName="WorkspaceSearchSelect";U.propTypes=L;U.defaultProps=B;var q=U;var G=a(444);var W=a(2130);var H={item:m["b"].object,type:m["b"].oneOf(["member","workspace"]),featureReactMessages:m["b"].bool.isRequired,featureReactMemberProfileCard:m["b"].bool.isRequired};var V={item:{},type:"member"};var K=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(b["bindAll"])(a,["maybeRenderTitle","maybeRenderEmail"]);return a}l()(t,[{key:"maybeRenderTitle",value:function e(t){if(!t)return null;return v.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},t)}},{key:"maybeRenderEmail",value:function e(t){if(!t)return null;return v.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},t)}},{key:"renderEntityIcon",value:function e(t){var a=t.item,r=t.type;var n=this.props,i=n.featureReactMemberProfileCard,s=n.featureReactMessages;return v.a.createElement(G["a"],{entityType:r,dimension:36,entityData:a,customClasses:"p-workspace_search_options_list_item__avatar",featureReactMessages:s,featureReactMemberProfileCard:i})}},{key:"renderItemAsMember",value:function e(t){var a=t.item,r=t.type;var n=Object(b["get"])(a,"profile");var i=n.real_name,s=n.email,o=n.title;return v.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:a,type:r}),v.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},v.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},i),v.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},this.maybeRenderTitle(o),this.maybeRenderEmail(s))))}},{key:"renderItemAsWorkspace",value:function e(t){var a=t.item,r=t.type;var n=a.name,i=a.description;return v.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:a,type:r}),v.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},v.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},n),v.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},i)))}},{key:"render",value:function e(){var t=this.props,a=t.item,r=t.type;return"member"===r?this.renderItemAsMember({item:a,type:r}):this.renderItemAsWorkspace({item:a,type:r})}}]);return t}(h["PureComponent"]);K.displayName="WorkspaceSearchOptionsListItem";var z=K;K.defaultProps=V;var Y=a(2132);var Q=new _["b"]("workspace_directory");var J={className:m["b"].string,containerIdSelector:m["b"].string,fetchDirectoryWorkspaces:m["b"].func.isRequired,fetchMembers:m["b"].func.isRequired,membersOnly:m["b"].bool,onClearInput:m["b"].func,onOptionsListOpened:m["b"].func,onOptionsListClosed:m["b"].func,prepopulatedOption:m["b"].object,triggerAction:m["b"].func};var Z={className:"",containerIdSelector:"",membersOnly:true,onClearInput:b["noop"],onOptionsListClosed:b["noop"],onOptionsListOpened:b["noop"],prepopulatedOption:void 0,triggerAction:b["noop"]};var X=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={nextCursorMark:"*",totalResultsCount:null,memberResultsCount:null,workspaceResultsCount:null,currentOptionsData:[],currentSearchQuery:"",prepopulatedOptionData:void 0,selectedOptionData:void 0,value:void 0,loadingResults:true,isAnOptionHighlighted:false};Object(b["bindAll"])(a,["clearInput","formatMemberOptionData","formatOptionsDataArrayOrObject","getOptionsFetcher","fetchMemberData","fetchMemberAndWorkspaceData","onChange","onClearButtonClicked","onFilterInputChange","onOptionHighlighted","onScroll","renderMemberItemTemplate","setIsAnOptionHighlighted","setCurrentSearchQuery","setIsLoading","setValue","triggerActionWithValue","onClose","onKeyPressedEnter","onOpen","setSelectRef"]);a.select=null;a.debouncedOnFilterInputChange=Object(b["debounce"])(a.onFilterInputChange,100);return a}l()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.prepopulatedOption,r=t.membersOnly;Object(b["isEmpty"])(a)||this.setPrepopulatedOptionData(a);this.getOptionsFetcher();r||(this.keyCommands=this.initKeyCommands())}},{key:"componentDidUpdate",value:function e(t){var a=this.props.prepopulatedOption;var r=t.prepopulatedOption;Object(b["isEmpty"])(a)||a===r||this.setPrepopulatedOptionData(a)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onChange",value:function e(t){var a=this.props.membersOnly;var r=this.state,n=r.currentOptionsData,i=r.currentSearchQuery;var s=void 0;var o=void 0;var l=void 0;if(t===k["b"]){s={id:k["b"],displayValue:i};l=n}else if(a){s=Object(b["find"])(n,{id:t});o=Object(g["getMemberRealName"])(s);l=[s]}else{s=Object(b["find"])(Object(b["flatten"])(Object(b["values"])(n)),{id:t});var c=Object(k["h"])(s);o=c?Object(g["getMemberRealName"])(s):Object(b["get"])(s,"name");l=c?{members:[s],workspaces:[]}:{members:[],workspaces:[s]}}this.setState(function(){var e={value:t,selectedOptionData:s,currentSearchQuery:t===k["b"]?i:o,nextCursorMark:"*",currentOptionsData:l};return e},this.triggerActionWithValue)}},{key:"onClearButtonClicked",value:function e(){var t=this.props.onClearInput;this.clearInput();t()}},{key:"onFilterInputChange",value:function e(t){var a=this.props,r=a.triggerAction,n=a.membersOnly;this.setIsLoading(true);this.setSelectedOptionData(null);this.setPrepopulatedOptionData(null);this.setValue(null);n&&r({selectedOptionData:null});this.getOptionsFetcher(t)}},{key:"onOptionHighlighted",value:function e(t){var a=!Object(b["isEmpty"])(t);this.setIsAnOptionHighlighted(a)}},{key:"onScroll",value:function e(t){var a=200;var r=this.state,n=r.currentSearchQuery,i=r.currentOptionsData,s=void 0===i?[]:i,o=r.totalResultsCount;var l=t.clientHeight,c=t.scrollHeight,u=t.scrollTop;var d=c-(u+l)<a;d&&s.length<o&&this.getOptionsFetcher(n,{doFetchNextPage:true})}},{key:"onClose",value:function e(){var t=this.props.onOptionsListClosed;this.setIsAnOptionHighlighted(false);t()}},{key:"onOpen",value:function e(){var t=this.props.onOptionsListOpened;t()}},{key:"onSearchAgainTriggered",value:function e(){this.select.onSearchAgainTriggered()}},{key:"onKeyPressedEnter",value:function e(){if(this.props.membersOnly)return;var t=this.state,a=t.selectedOptionData,r=t.currentSearchQuery,n=t.isAnOptionHighlighted;if(!r||n)return;var i=Object(b["get"])(this.select,"filterInput.value",r);if(!a){this.select.blur();this.setState(function(){var e={selectedOptionData:{id:k["b"],displayValue:i},currentSearchQuery:i,nextCursorMark:"*"};return e},this.triggerActionWithValue)}}},{key:"setSelectRef",value:function e(t){this.select=t}},{key:"setCurrentOptionsData",value:function e(t){var a=t.optionData,r=t.isNewSearch,n=t.totalResultsCount;var i=this.state.currentOptionsData;var s=void 0;s=r?a:Object(b["unionBy"])(i,a,"id");this.setState(function(){return{currentOptionsData:s,totalResultsCount:n}});this.setIsLoading(false)}},{key:"setCurrentOptionGroupsData",value:function e(t){var a=t.memberOptionData,r=t.workspaceOptionData,n=t.isNewSearch,i=t.totalResultsCount,s=t.memberResultsCount,o=void 0===s?0:s,l=t.workspaceResultsCount,c=void 0===l?0:l;var u=this.state.currentOptionsData;var d=void 0;var p=!o&&!c||i?i:o+c;d=n?{members:a,workspaces:r}:{members:Object(b["unionBy"])(Object(b["get"])(u,"members"),a,"id"),workspaces:Object(b["unionBy"])(Object(b["get"])(u,"workspaces"),r,"id")};this.setState(function(){return{currentOptionsData:d,totalResultsCount:p,memberResultsCount:o,workspaceResultsCount:c}});this.setIsLoading(false)}},{key:"setCurrentSearchQuery",value:function e(t){this.setState(function(){return{currentSearchQuery:t}})}},{key:"setIsLoading",value:function e(t){this.setState(function(){return{loadingResults:t}})}},{key:"setIsAnOptionHighlighted",value:function e(t){this.setState(function(){return{isAnOptionHighlighted:t}})}},{key:"setNextCursorMark",value:function e(t){this.setState(function(){return{nextCursorMark:t}})}},{key:"setPrepopulatedOptionData",value:function e(t){this.setState(function(){return{prepopulatedOptionData:t}})}},{key:"setSelectedOptionData",value:function e(t){this.setState(function(){return{selectedOptionData:t}})}},{key:"setValue",value:function e(t){this.setState(function(){return{value:t}})}},{key:"getBoundingRect",value:function e(t){this._workspaceSearchBoundingContainer||(this._workspaceSearchBoundingContainer=document.getElementById(t));return this._workspaceSearchBoundingContainer?this._workspaceSearchBoundingContainer.getBoundingClientRect():{}}},{key:"getPlaceHolderText",value:function e(t){var a=Q.t("Search for a teammate");var r=Q.t("Search");return t?a:r}},{key:"getOptionsFetcher",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.forceNewSearch,n=void 0!==r&&r,i=a.doFetchNextPage,s=void 0!==i&&i;var o=this.state.currentSearchQuery;var l=this.props.membersOnly;var c=l?this.fetchMemberData:this.fetchMemberAndWorkspaceData;var u={searchTerm:t};if(!s&&t===o&&!n)return null;u.nextCursorMark=o===t?this.state.nextCursorMark:"";this.setCurrentSearchQuery(t);return c({args:u,forceNewSearch:n,newSearchQuery:t,stashedSearchQuery:o})}},{key:"initKeyCommands",value:function e(){var t=new y["a"];t.bindAll([{keys:["enter"],handler:this.onKeyPressedEnter}]);return t}},{key:"fetchMemberData",value:function e(t){var a=this;var r=t.args,n=t.forceNewSearch,i=t.newSearchQuery,s=t.stashedSearchQuery;var o=this.props.fetchMembers;return o(r).then(function(e){var t=e.items,r=void 0===t?[]:t,o=e.next_cursor_mark,l=e.num_found;if(!r.length&&"*"!==o)return;a.setNextCursorMark(o);a.setCurrentOptionsData({optionData:r,isNewSearch:n||s!==i,totalResultsCount:l})})}},{key:"fetchMemberAndWorkspaceData",value:function e(t){var a=this;var r=t.args,n=t.forceNewSearch,i=t.newSearchQuery,s=t.stashedSearchQuery;var o=this.props.fetchMembers;var l=[o(r),this.props.fetchDirectoryWorkspaces(r)];return Promise.all(l).then(function(e){var t=e[0],r=t.items,o=void 0===r?[]:r,l=t.next_cursor_mark,c=t.num_found;var u=e[1],d=u.items,p=void 0===d?[]:d,h=u.next_cursor_mark,v=u.num_found;var m=void 0;if(!o.length&&"*"!==l&&!p.length&&"*"!==h)return;o.length&&!p.length?a.setNextCursorMark(l):p.length&&!o.length&&a.setNextCursorMark(h);o.length&&!p.length?m=c:p.length&&!o.length&&(m=v);a.setCurrentOptionGroupsData({memberOptionData:o,workspaceOptionData:p,isNewSearch:n||s!==i,totalResultsCount:m,memberResultsCount:c,workspaceResultsCount:v})})}},{key:"clearInput",value:function e(){var t=this.props.triggerAction;this.setSelectedOptionData(null);this.setCurrentSearchQuery(null);this.setPrepopulatedOptionData(null);this.setValue(null);this.getOptionsFetcher();t({selectedOptionData:null,type:null});this.select.toggleOpenState()}},{key:"focus",value:function e(){this.select.focus()}},{key:"blur",value:function e(){this.select.blur()}},{key:"triggerActionWithValue",value:function e(){var t=this.props.triggerAction;var a=this.state.selectedOptionData;var r=Object(k["h"])(a)?"member":"workspace";t({selectedOptionData:a,type:r})}},{key:"formatOptionsDataArrayOrObject",value:function e(t){var a=this;var r=this.props.membersOnly;var n=[];if(r)n=Object(b["map"])(t,function(e){return a.formatMemberOptionData(e)});else{var i=t.members,s=t.workspaces;var o=Object(b["get"])(i,"length",0);var l=Object(b["get"])(s,"length",0);if(o){var c={label:this.formatMemberOptionsGroupsHeader(),options:[]};var u=l>0?Object(b["slice"])(i,0,4):i;c.options=Object(b["map"])(u,function(e){return a.formatMemberOptionData(e)});n.push(c)}if(l){var d={label:this.formatWorkspaceOptionsGroupsHeader(),options:[]};d.options=Object(b["map"])(s,function(e){return a.formatWorkspaceOptionData(e)});n.push(d)}}return n}},{key:"formatMemberOptionData",value:function e(t){var a=Object(g["getMemberRealName"])(t);var r=Object(b["get"])(t,"id");return{label:this.renderMemberItemTemplate({item:t,type:"member"}),value:r,displayValue:a}}},{key:"formatWorkspaceOptionData",value:function e(t){var a=Object(b["get"])(t,"name");var r=Object(b["get"])(t,"id");return{label:this.renderMemberItemTemplate({item:t,type:"workspace"}),value:r,displayValue:a}}},{key:"formatMemberOptionsGroupsHeader",value:function e(){var t=this.state,a=t.memberResultsCount,r=t.selectedOptionData;var n=r?1:a;return Q.t("Search by coworker ({num})",{num:n})}},{key:"formatWorkspaceOptionsGroupsHeader",value:function e(){var t=this.props.prepopulatedOption;var a=this.state,r=a.currentSearchQuery,n=a.workspaceResultsCount,i=a.selectedOptionData;var s=Object(b["get"])(t,"displayValue","")?Object(b["get"])(t,"displayValue",""):r;var o=i?1:n;var l=Object(k["c"])()?50:150;var c=Object(b["get"])(s,"length",0)>l?s.slice(0,l)+"...":s;return Q.t("Workspaces matching \u201c{query}\u201d ({num})",{query:Object(_["o"])(c),num:o})}},{key:"renderShowAllWorkspacesListItem",value:function e(){var t=this.state.currentSearchQuery;return v.a.createElement("div",{className:"p-workspace_search_options_list_item"},v.a.createElement("div",{className:"p-workspace_search__search_icon_wrapper"},v.a.createElement(E["b"],{type:"search"})),v.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_1"},v.a.createElement("div",{className:"p-workspace_search_options_list_item__alternate_content"},Q.rt('All workspace results for <span class="p-workspace_search_options_list_item__alternate_content--highlight">{query}</span>',{query:Object(_["o"])(t)}))))}},{key:"renderMemberItemTemplate",value:function e(t){var a=t.item,r=t.type;return v.a.createElement(z,{item:a,type:r,featureReactMessages:true,featureReactMemberProfileCard:true})}},{key:"render",value:function e(){var t=this.props,a=t.containerIdSelector,r=t.membersOnly;var i=this.state,s=i.value,o=i.currentOptionsData,l=i.loadingResults,c=i.currentSearchQuery,u=i.prepopulatedOptionData,d=i.selectedOptionData;var p=this.getBoundingRect(a),h=p.bottom,m=void 0===h?0:h,f=p.top,g=void 0===f?0:f;var _={autoSelectFirstOption:true,className:"p-workspace_search",displayValue:c,isLoading:l,membersOnly:r,onChange:this.onChange,onClearButtonClick:this.onClearButtonClicked,onClose:this.onClose,onFilterInputChange:this.debouncedOnFilterInputChange,onOpen:this.onOpen,onOptionHighlighted:this.onOptionHighlighted,onScroll:this.onScroll,optionsListOffsetBottom:window.innerHeight-m,optionsListOffsetTop:g,optionsRowHeight:48,placeholder:this.getPlaceHolderText(r),pillarClassName:"p-workspace_search",selectedOption:d,usePlaceholderOption:false,useFullWidthOptions:true,value:s,wrapperClassName:"p-workspace_search__wrapper"};r?_.options=this.formatOptionsDataArrayOrObject(o):_.optionGroups=this.formatOptionsDataArrayOrObject(o);if(u&&!s)if(Object(b["get"])(u,"id")===k["b"]){_.selectedOption=u;_.displayValue=Object(b["get"])(u,"displayValue")}else{var y=Object(k["h"])(u)?this.formatMemberOptionData(u):this.formatWorkspaceOptionData(u);_.selectedOption=u;_.displayValue=Object(b["get"])(y,"displayValue")}return v.a.createElement("div",{className:"position_relative"},v.a.createElement(q,n()({},_,{ref:this.setSelectRef})))}}]);return t}(h["Component"]);X.displayName="WorkspaceSearch";X.defaultProps=Z;var $={fetchMembers:O["q"],fetchDirectoryWorkspaces:O["j"]};var ee=Object(f["connect"])(null,$,null,{withRef:true})(X);var te=t["a"]=ee},,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(95);var o=a(16);var l=a.n(o);var c=a(50);var u=a(10);var d=a(2297);var p=new u["b"]("app_token");var h={type:r["b"].oneOf(["unknown","non-existent"]),subtler:r["b"].bool,invert:r["b"].bool};var v={type:"unknown",subtler:false,invert:false};var m=function e(t){var a=l()("c-missing_app",{"c-missing_app--unknown":"unknown"===t.type,"c-missing_app--nonexistent":"non-existent"===t.type,"c-missing_app--subtler":t.subtler,"c-missing_app-unknown--invert":"unknown"===t.type&&t.invert,"c-missing_app-non_existent--invert":"non-existent"===t.type&&t.invert});if("unknown"===t.type)return i.a.createElement(c["c"],{tip:p.t("Loading\u2026")},i.a.createElement("span",{className:a}));if("non-existent"===t.type)return i.a.createElement(c["c"],{tip:p.t("Private app info")},i.a.createElement("span",{className:a}));return null};m.defaultProps=v;var f=Object(s["pure"])(m);var b=t["a"]=f},,,function(e,t,a){"use strict";a.d(t,"c",function(){return n});a.d(t,"e",function(){return i});a.d(t,"a",function(){return s});a.d(t,"b",function(){return o});a.d(t,"d",function(){return l});var r=a(20);var n=Object(r["b"])("TS.ui.channel_options_dialog.promiseToGetWhoCanPostListData",function(){return false});var i=Object(r["b"])("TS.ui.team_picker.createFilterFunction",function(){return function(){return Promise.resolve({items:[]})}});var s=Object(r["b"])("TS.permissions.members.canCreateSharedChannel",function(){return false});var o=Object(r["b"])("TS.permissions.members.canDisconnectSharedChannels",function(){return false});var l=Object(r["b"])("TS.ui.im_browser.showRequestToDisconnectSharedChannelModal",function(){return false})},,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"updateLastNetworkSend",function(){return c});a.d(t,"getLastNetworkSend",function(){return p});var r=a(5);var n=a.n(r);var i=a(18);var s=a(36);var o=a(14);var l=a(0);var c=Object(i["b"])("Update the last time we sent something over the network");c.propTypes=null;var u=null;var d=Object(s["b"])(n()({},c,function(){return Date.now()}),u,{persistenceEnabled:false});d.propTypes=l["b"].number;t["default"]=d;var p=Object(o["b"])(function(e){return e&&e.lastNetworkSend})},function(e,t,a){"use strict";a.r(t);a.d(t,"setLastEKMChangeTimestamp",function(){return d});a.d(t,"getLastEKMChangeTimestamp",function(){return v});a.d(t,"test",function(){return b});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(18);var c=a(36);var u=a(14);var d=Object(l["b"])("Sets the last-ekm-change timestamp");d.propTypes=o["b"].string;var p={ekmTs:m()};var h=Object(c["b"])(n()({},d,function(e,t){if(void 0===t||t===e.ekmTs)return e;return s()({},e,{ekmTs:t})}),p,{persistenceEnabled:true});h.propTypes={ekmTs:o["b"].string};t["default"]=h;var v=Object(u["b"])(function(e){return e&&e.ekmChanges&&e.ekmChanges.ekmTs});function m(){return f()}function f(){return Math.floor(Date.now()/1e3)+".000000"}var b={getDefaultLastEKMChangeTimestamp:m}},function(e,t,a){"use strict";a.r(t);a.d(t,"noopAction",function(){return l});var r=a(5);var n=a.n(r);var i=a(0);var s=a(18);var o=a(36);var l=Object(s["b"])("NOOP");l.propTypes=null;var c=0;var u=Object(o["b"])(n()({},l,function(e){return e+1}),c,{persistenceEnabled:false});u.propTypes=i["b"].number;t["default"]=u},,,function(e,t,a){"use strict";a.d(t,"b",function(){return J});a.d(t,"c",function(){return Z});var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(0);var v=a(1);var m=a.n(v);var f=a(13);var b=a(2374);var g=a(2);var _=a.n(g);var y=a(16);var O=a.n(y);var k=a(12);var E=a(183);var C=a(150);var j=a(4);var w=a(301);var S=a(258);var I=a(17);var T=a(10);var A=a(45);var N=a(22);var P=a(51);var R=a(28);var M=a(157);var D=a(444);var x=a(1171);var F=a(96);var L=a(1487);var B=a(778);var U=a(202);var q=a(1718);var G=a.n(q);var W=new T["b"]("grid_onboarding");var H={orgName:h["b"].string,selectedMember:h["b"].object.isRequired,featureZeroWorkspaceOnboarding:h["b"].bool.isRequired,fetchDirectoryWorkspaces:h["b"].func.isRequired,scrollElement:h["b"].any,enqueueToast:h["b"].func,onFooterClick:h["b"].func,clogger:h["b"].object.isRequired};var V={orgName:"",scrollElement:window,enqueueToast:g["noop"],onFooterClick:g["noop"]};var K=24;var z=1200;var Y=Object(k["b"])();function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(g["filter"])(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"open"===e.discoverable||"closed"===e.discoverable||"unlisted"===e.discoverable&&e.is_assigned})}function J(e){var t=e.totalWorkspaces,a=e.onWorkspaces;return!t&&a}function Z(e){var t=e.totalWorkspaces,a=e.onWorkspaces;return!t&&!a}function X(e){if(!e)return"";return{oneJoinableWorkspace:W.t("Join this workspace to start working with them on Slack."),moreThanOneJoinableWorkspaces:W.t("Join the workspace that seems right for your role to get started."),noAccess:W.t("Get in touch with them to be invited to a workspace they\u2019re in."),noWorkspaces:W.t("Try searching for someone else on your team."),onApiError:W.rt("You may want to try <a>reloading this page</a> and searching again, or try searching for someone else.",null,function(e){var t=e.text,a=e.key,r=e.tag;if("a"===r)return m.a.createElement(P["a"],{onClick:function e(){return window.location.reload(true)},target:"_self",key:a},t);return{text:t}})}}var $=function e(t){var a=t.workspaces,r=t.noAccessToWorkspaces,n=t.noWorkspaces,i=t.hasApiError,s=t.featureZeroWorkspaceOnboarding;if(!s)return"";var o=X(s);if(i)return o.onApiError;var l=Q(a).length;if(1===l)return o.oneJoinableWorkspace;if(l>1)return o.moreThanOneJoinableWorkspaces;if(r)return o.noAccess;if(n)return o.noWorkspaces;return""};var ee=function e(t){var a=t.noAccessToWorkspaces,r=t.noWorkspaces,n=t.memberRealName,i=t.totalWorkspaces,s=t.hasApiError,o=t.featureZeroWorkspaceOnboarding;if(!o)return"";if(s)return W.t("We ran into some trouble fetching {memberName}\u2019s workspaces",{memberName:Object(T["o"])(n)});if(a)return W.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:Object(T["o"])(n)});if(r)return W.t("{memberName} hasn\u2019t joined a workspace",{memberName:Object(T["o"])(n)});return W.t("{memberName} is in {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{memberName:Object(T["o"])(n),numWorkspaces:i})};var te=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isMobileView:false,loadingWorkspaces:false,nextCursorMark:null,memberRealName:"",selectedMember:{},workspaces:[],totalWorkspaces:0,onWorkspaces:false,hasApiError:false};a.resultsList=null;a.searchBar=null;a.userHasNoAccessToWorkspaces=false;a.memberHasNoWorkspaces=false;a.noWorkspacesToDisplay=false;a.doRenderSearchAgainButton=false;Object(g["bindAll"])(a,["onFooterClick","onResize","onScroll","setListRef","setSearchBarRef","renderWorkspaceCard","getListKeys","onSearchAgainButtonClick","onSelectColleague","setWorkspaceFetchOptions","fetchWorkspaces","onButtonActionReject","onButtonActionResolve","setToastText","setLoadingWorkspaces"]);return a}l()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.onResize);this.clientHeight=window.innerHeight;this.setSelectedMember(this.props.selectedMember)}},{key:"componentDidUpdate",value:function e(t,a){this.maybeFetchNextPage(a);this.maybeTriggerNewSearch(a);this.maybeUpdateMemberRealName(a)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onFooterClick",value:function e(){this.props.onFooterClick()}},{key:"onResize",value:function e(){this.clientHeight=window.innerHeight;var t=Object(U["c"])();var a=this.state.isMobileView!==t;(t||a)&&this.resultsList.invalidateRowHeights()}},{key:"onScroll",value:function e(t){var a=t.scrollTop,r=t.scrollHeight;this.doInfiniteScrollHandler({scrollTop:a,scrollHeight:r})}},{key:"onSearchAgainButtonClick",value:function e(t){t.preventDefault();t.stopPropagation();this.searchBar&&this.searchBar.getWrappedInstance&&this.searchBar.getWrappedInstance().onSearchAgainTriggered()}},{key:"onSelectColleague",value:function e(t){var a=t.selectedOptionData;a&&this.setSelectedMember(a)}},{key:"onButtonActionReject",value:function e(t){var a=t.node;a&&this.setToastText(a)}},{key:"onButtonActionResolve",value:function e(t){var a=t.node,r=t.i,n=t.workspace;Object(g["isNumber"])(r)&&n&&this.setWorkspaceByIndex({index:r,workspace:n});a&&this.setToastText(a)}},{key:"setListRef",value:function e(t){this.resultsList=t}},{key:"setSearchBarRef",value:function e(t){this.searchBar=t}},{key:"getListKeys",value:function e(){if(!this.state.workspaces)return[];return this.state.workspaces.map(function(e){return String(e.id)})}},{key:"setHasApiError",value:function e(t){this.setState(function(){return{hasApiError:t}})}},{key:"setSelectedMember",value:function e(t){this.setState(function(){return{selectedMember:t}})}},{key:"setMemberRealName",value:function e(t){this.setState(function(){return{memberRealName:t}})}},{key:"setWorkspaceFetchOptions",value:function e(t){var a=t.workspaces,r=t.totalWorkspaces,n=t.onWorkspaces,i=t.nextCursorMark;this.setState(function(){return{workspaces:a,totalWorkspaces:r,onWorkspaces:n,nextCursorMark:i}})}},{key:"setWorkspaceByIndex",value:function e(t){var a=t.index,r=t.workspace;this.setState(function(e){var t=[].concat(e.workspaces);if(a>=t.length){Y.warn("SearchResultsScreen: Out of bounds index "+a+" passed into setWorkspaceByIndex");return e}t[a]=r;return{workspaces:t}})}},{key:"setLoadingWorkspaces",value:function e(t){this.setState(function(){return{loadingWorkspaces:t}})}},{key:"setToastText",value:function e(t){this.props.enqueueToast({element:m.a.createElement(M["b"],{position:"bottom-right",offsetY:50},t)})}},{key:"maybeTriggerNewSearch",value:function e(t){if(t.selectedMember!==this.state.selectedMember){this.clearWorkspaceFetchOptions();this.setLoadingWorkspaces(true)}}},{key:"maybeUpdateMemberRealName",value:function e(t){if(t.selectedMember!==this.state.selectedMember){var a=Object(I["getMemberRealName"])(this.state.selectedMember);this.setMemberRealName(a)}}},{key:"doInfiniteScrollHandler",value:function e(t){var a=t.scrollTop,r=t.scrollHeight;var n=this.hasScrolledWithinScrollThreshold({scrollTop:a,scrollHeight:r});n&&!this.hasFetchedAllWorkspaces()?this.setLoadingWorkspaces(true):!n&&this.hasFetchedAllWorkspaces()&&this.setLoadingWorkspaces(false)}},{key:"fetchWorkspaces",value:function e(){var t=this;var a=this.state,r=a.nextCursorMark,n=a.selectedMember;this.setHasApiError(false);return this.props.fetchDirectoryWorkspaces({nextCursorMark:r,id:Object(g["get"])(n,"id"),type:"single_user"}).then(function(e){t.setLoadingWorkspaces(false);var a=e.num_found,n=e.on_workspaces,i=e.items;var s=i?[].concat(t.state.workspaces,i):[];t.setWorkspaceFetchOptions({workspaces:s,totalWorkspaces:a,onWorkspaces:n,nextCursorMark:e.next_cursor_mark});r||Object(U["e"])({anchorPage:"grid_onboarding",numSearchResults:Object(g["get"])(e,"num_found",0),clogger:t.props.clogger})}).catch(function(e){t.setHasApiError(true);t.setLoadingWorkspaces(false);Y.error("SearchResultsScreen: Error in FetchWorkspaces -",e)})}},{key:"maybeFetchNextPage",value:function e(t){!t.loadingWorkspaces&&this.state.loadingWorkspaces&&this.fetchWorkspaces()}},{key:"hasScrolledWithinScrollThreshold",value:function e(t){var a=t.scrollHeight,r=t.scrollTop;return a-(r+this.clientHeight)<z}},{key:"hasFetchedAllWorkspaces",value:function e(){return this.state.workspaces.length===this.state.totalWorkspaces}},{key:"clearWorkspaceFetchOptions",value:function e(){this.setWorkspaceFetchOptions({workspaces:[],totalWorkspaces:0,onWorkspaces:false,nextCursorMark:null})}},{key:"renderSearchBar",value:function e(){return m.a.createElement("div",{className:"p-grid_onboarding_results__search"},m.a.createElement(x["a"],{triggerAction:this.onSelectColleague,containerIdSelector:"colleagueSearchResults",membersOnly:true,className:"margin_bottom_200",prepopulatedOption:this.props.selectedMember,ref:this.setSearchBarRef}))}},{key:"renderHeading",value:function e(){var t=this.props.featureZeroWorkspaceOnboarding;if(!t)return null;var a=this.state,r=a.totalWorkspaces,n=a.selectedMember,i=a.hasApiError;var s=Object(I["getMemberRealName"])(n);var o=ee({noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,totalWorkspaces:r,memberRealName:s,hasApiError:i,featureZeroWorkspaceOnboarding:t});var l=O()("p-grid_onboarding__results_heading_container",{align_center:this.noWorkspacesToDisplay});return m.a.createElement("div",{className:l},m.a.createElement("span",{className:"p-grid_onboarding__results_heading"},m.a.createElement(D["a"],{entityType:"member",dimension:K,entityData:n,featureReactMessages:true,customClasses:"p-grid_onboarding_results__icon"}),o))}},{key:"renderSubheading",value:function e(){var t=this.props.featureZeroWorkspaceOnboarding;if(!t)return null;var a=this.state,r=a.workspaces,n=a.hasApiError;var i=$({workspaces:r,featureZeroWorkspaceOnboarding:t,noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,hasApiError:n});var s=O()("p-grid_onboarding__results_subheading",{align_center:this.noWorkspacesToDisplay});return m.a.createElement("div",{className:s},i)}},{key:"renderWorkspaceCard",value:function e(t){var a=this;var r=this.state,i=r.workspaces,s=r.totalWorkspaces;var o=O()("p-grid_onboarding_results__list_item",{margin_bottom_0:t===s-1});return m.a.createElement(L["a"],{team:i[t],size:"large",featureZeroWorkspaceOnboarding:true,className:o,onActionResolve:function e(r){return a.onButtonActionResolve(n()({},r,{i:t}))},onActionReject:function e(r){return a.onButtonActionReject(n()({},r,{i:t}))},anchorPage:"grid_onboarding"})}},{key:"renderWorkspaceList",value:function e(){var t=this;var a=this.props.scrollElement;return m.a.createElement(b["a"],{scrollElement:a,onScroll:this.onScroll},function(e){var r=e.height,n=e.isScrolling,i=e.onChildScroll,s=e.scrollTop,o=e.registerChild;return m.a.createElement("div",{className:"p-grid_onboarding_results__list",ref:o},m.a.createElement(B["a"],{keys:t.getListKeys(),rowRenderer:t.renderWorkspaceCard,ref:t.setListRef,scrollElement:a,onScroll:i,height:r,isScrolling:n,scrollTop:s}))})}},{key:"renderSearchAgainButton",value:function e(){return m.a.createElement(E["a"],{enabled:["feature_zero_workspace_onboarding"]},m.a.createElement("div",{className:"display_flex justify_content_center margin_top_150"},m.a.createElement(R["d"],{type:"outline",onClick:this.onSearchAgainButtonClick},W.t("Search Again"))))}},{key:"renderFooter",value:function e(){var t=this.props.orgName;var a=O()("p-grid_onboarding__footer","p-grid_onboarding__footer_link",{margin_top_250:!this.noWorkspacesToDisplay||!this.doRenderSearchAgainButton,margin_top_150:this.noWorkspacesToDisplay});return m.a.createElement(E["a"],{enabled:["feature_zero_workspace_onboarding"]},m.a.createElement(P["a"],{onClick:this.onFooterClick,className:a},W.t("View all {orgName} workspaces",{orgName:t}),m.a.createElement(N["a"],{type:"chevron-right",key:"footer-chevron-icon",className:"p-grid_onboarding__footer_icon"})))}},{key:"renderInfiniteSpinner",value:function e(){return m.a.createElement("div",{className:"p-grid_onboarding__spinner"},m.a.createElement(F["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderResults",value:function e(){var t=this.state,a=t.loadingWorkspaces,r=t.selectedMember;var n=a&&this.memberHasNoWorkspaces;if(n||!r)return this.renderInfiniteSpinner();return m.a.createElement(m.a.Fragment,null,this.renderHeading(),this.renderSubheading(),!this.noWorkspacesToDisplay&&this.renderWorkspaceList(),a&&this.renderInfiniteSpinner(),this.doRenderSearchAgainButton&&this.renderSearchAgainButton(),!a&&this.renderFooter())}},{key:"render",value:function e(){var t=this.state,a=t.totalWorkspaces,r=t.onWorkspaces,n=t.loadingWorkspaces,i=t.hasApiError;this.userHasNoAccessToWorkspaces=J({totalWorkspaces:a,onWorkspaces:r});this.memberHasNoWorkspaces=Z({totalWorkspaces:a,onWorkspaces:r});this.noWorkspacesToDisplay=this.userHasNoAccessToWorkspaces||this.memberHasNoWorkspaces;this.doRenderSearchAgainButton=!n&&this.noWorkspacesToDisplay&&!i;return m.a.createElement(E["a"],{enabled:["feature_zero_workspace_onboarding"]},m.a.createElement("div",{className:"p-grid_onboarding__results",id:"colleagueSearchResults"},this.renderSearchBar(),this.renderResults()))}}]);return t}(v["Component"]);te.displayName="SearchResultsScreen";te.defaultProps=V;var ae=function e(t,a){var r=a.selectedMember,n=a.workspaces;var i=Object(w["a"])(t);var s=Object(A["a"])({state:t});return{selectedMember:r,workspaces:n,orgName:i,clogger:s,featureZeroWorkspaceOnboarding:Object(j["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding"),featureSingleUserWorkspacePagination:Object(j["isFeatureEnabled"])(t,"feature_single_user_workspace_pagination")}};var re={enqueueToast:C["enqueueToast"],fetchDirectoryWorkspaces:S["j"]};t["a"]=Object(f["connect"])(ae,re)(te)},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(1);var v=a.n(h);var m=a(0);var f=a(13);var b=a(2);var g=a(4);var _=a(231);var y=a(151);var O=a(48);var k=a(150);var E=a(100);var C=a(99);var j=a(10);var w=a(12);var S=a(157);var I=a(84);var T=a(135);var A=a(54);var N=a(179);var P=a(687);var R=a(15);var M=a(271);var D=a(1153);var x=80;var F=new j["b"]("user_groups");var L=void 0;function B(e){if(!Object(g["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return;L={hasNameRequiredWarning:F.t("Please enter a name for this group."),hasMaxLengthWarning:F.t("Names can\u2019t be more than {maxLength} characters.",{maxLength:x}),hasNameTakenWarning:F.t("This name is already in use by another group."),unknownError:F.t("Sorry, something went wrong. Please try a different name.")}}var U=Object(R["b"])("Validate user group name",function(e,t,a){var r=a.name,n=a.prevName;if(r===n)return Promise.resolve("");B(t());if(!r.trim())return Promise.resolve(L.hasNameRequiredWarning);if(Object(D["a"])(r)>x)return Promise.resolve(L.hasMaxLengthWarning);return e(Object(M["n"])({name:r})).then(function(e){var t=e.error;if("name_already_exists"===t)return L.hasNameTakenWarning;if(t)return L.unknownError;return""})});U.propTypes={name:m["b"].string,prevName:m["b"].string};var q=U;var G={};Object.defineProperty(G,"handleErrorSnameErrorStringstrings",{get:function e(){return L},set:function e(t){L=t}});var W=new j["b"]("user_groups");var H=80;var V=void 0;function K(e){if(!Object(g["isFeatureEnabled"])(e,"feature_sonic_user_groups"))return;V={hasHandleRequiredWarning:W.t("Please enter a handle for this group."),hasMaxLengthWarning:W.t("Handles can\u2019t be more than {maxLength} characters.",{maxLength:H}),hasSpecialsWarning:W.t("Handles can only contain letters or numbers."),hasPunctuationWarning:W.t("Handles can only contain letters or numbers."),hasLowercaseWarning:W.t("Handles can only be in lowercase."),hasHandleTakenWarning:W.t("This handle is already in use by a member, channel, or another group."),unknownError:W.t("Sorry, something went wrong. Please try a different handle.")}}var z=Object(R["b"])("Validate user group handle",function(e,t,a){var r=a.handle,n=a.prevHandle;if(r===n)return Promise.resolve("");K(t());if(!r.trim())return Promise.resolve(V.hasHandleRequiredWarning);if(/[ .,;'`~!@#$%^&*+=\\:"<>?|]/.test(r.trim()))return Promise.resolve(V.hasSpecialsWarning);if(/^[-|_]+$/.test(r))return Promise.resolve(V.hasPunctuationWarning);if(/[A-Z]/.test(r))return Promise.resolve(V.hasLowercaseWarning);if(Object(D["a"])(r)>H)return Promise.resolve(V.hasMaxLengthWarning);return e(Object(M["m"])({handle:r})).then(function(e){var t=e.error;if("handle_already_exists"===t)return V.hasHandleTakenWarning;if(t)return V.unknownError;return""})});z.propTypes={handle:m["b"].string,prevHandle:m["b"].string};var Y=z;var Q={};Object.defineProperty(Q,"handleErrorStrings",{get:function e(){return V},set:function e(t){V=t}});var J=a(1727);var Z=new j["b"]("user_groups");var X={detailsFormValues:m["b"].shape({name:m["b"].string,handle:m["b"].string,purpose:m["b"].string,channels:m["b"].array}),validateUserGroupHandle:m["b"].func.isRequired,validateUserGroupName:m["b"].func.isRequired,setFormErrors:m["b"].func.isRequired,featureSonicUserGroups:m["b"].bool.isRequired,onRef:m["b"].func.isRequired,errors:m["b"].shape({nameError:m["b"].string,handleError:m["b"].string,purposeError:m["b"].string}),submitError:m["b"].string,setRequiredFieldsEmpty:m["b"].func.isRequired};var $={detailsFormValues:{name:"",handle:"",purpose:"",channels:[]},errors:{nameError:"",handleError:"",purposeError:""},submitError:""};var ee=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={name:e.detailsFormValues.name,handle:e.detailsFormValues.handle,purpose:e.detailsFormValues.purpose,channels:e.detailsFormValues.channels};var r=!a.state.name||!a.state.handle;a.props.setRequiredFieldsEmpty(r);Object(b["bindAll"])(a,["onNameChange","onHandleChange","onPurposeChange","onChannelsUpdate","onSubmit","setUserGroupFormRef","maybeRenderApiError"]);a.postValidateHandle=null;a.postValidateName=null;return a}l()(t,[{key:"componentDidMount",value:function e(){this.props.onRef(this)}},{key:"componentDidUpdate",value:function e(t){if(t!==this.props){var a=!this.state.name||!this.state.handle;this.props.setRequiredFieldsEmpty(a)}}},{key:"componentWillUnmount",value:function e(){this.props.onRef(void 0)}},{key:"onNameChange",value:function e(t){var a=this;if(this.postValidateName){this.postValidateName.cancel();this.postValidateName=null}this.setState(function(){return{name:t}});this.postValidateName=this.props.validateUserGroupName({name:t}).then(function(e){a.props.setFormErrors({nameError:e})}).finally(function(){a.postValidateName=null});return this.postValidateName}},{key:"onHandleChange",value:function e(t){var a=this;if(this.postValidateHandle){this.postValidateHandle.cancel();this.postValidateHandle=null}var r=t.replace(/ /g,"");this.setState(function(){return{handle:r}});if(" "!==t.charAt(0)){this.postValidateHandle=this.props.validateUserGroupHandle({handle:r}).then(function(e){a.props.setFormErrors({handleError:e})}).finally(function(){a.postValidateHandle=null});return this.postValidateHandle}return Promise.resolve()}},{key:"onPurposeChange",value:function e(t){this.setState(function(){return{purpose:t}})}},{key:"onChannelsUpdate",value:function e(t){this.setState(function(){return{channels:t}})}},{key:"onSubmit",value:function e(){var t=this.defaultChannelsRef.onGetSelectedDefaultChannels();this.onChannelsUpdate(t);return n()({},this.state,{channels:t})}},{key:"setUserGroupFormRef",value:function e(t){this.defaultChannelsRef=t}},{key:"hasValidationErrors",value:function e(t){return Object(b["find"])(t,function(e){return e})}},{key:"maybeRenderApiError",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(this.props.submitError){var t=Z.t("We\u2019re not sure why, but that didn\u2019t work. Try again?");return v.a.createElement(T["a"],{level:"error",type:"inline",className:"margin_bottom_100"},t)}return false}},{key:"renderUserGroupNameField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=Z.t("Name");var r=Z.t("e.g. Accounts Team");return v.a.createElement("div",null,v.a.createElement(A["a"],{htmlFor:"name_label",id:"user_group_name",key:"user_group_name",text:a},v.a.createElement(N["a"],{name:"user_group_name",id:"name_input",placeholder:r,labelId:"user_group_name",value:this.state.name,type:"text",onChange:function e(a){return t.onNameChange(a)},errorText:this.props.errors.nameError,isRequired:true})))}},{key:"renderUserGroupHandleField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=Z.t("e.g. accounts-team");var r=Z.t("You\u2019ll use the display name to get the group\u2019s attention. It should be all lowercase, with no spaces.");var n=Z.t("Handle");return v.a.createElement("div",null,v.a.createElement(A["a"],{htmlFor:"handle_label",id:"user_group_handle",key:"user_group_handle",text:n},v.a.createElement(N["a"],{name:"user_group_handle",id:"handle_input",placeholder:a,labelId:"user_group_handle",value:this.state.handle,type:"text",onChange:function e(a){return t.onHandleChange(a)},errorText:this.props.errors.handleError,hintText:r,isRequired:true,icon:"mentions"})))}},{key:"renderUserGroupPurposeField",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=140;var r=Z.t("Purpose");var n=Z.t("What is this group about?");return v.a.createElement("div",null,v.a.createElement(A["a"],{htmlFor:"purpose_label",id:"user_group_purpose",key:"user_group_purpose",text:r,optional:true},v.a.createElement(P["a"],{name:"user_group_purpose",id:"purpose_input",labelId:"user_group_purpose",value:this.state.purpose,type:"text",onChange:function e(a){return t.onPurposeChange(a)},errorText:this.props.errors.purposeError,hintText:n,maxCharacterLimit:a})))}},{key:"renderDefaultChannelSelect",value:function e(){var t=this;return v.a.createElement(J["a"],{selectedChannels:this.state.channels,onRef:function e(a){return t.setUserGroupFormRef(a)}})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement("div",null,this.maybeRenderApiError(),v.a.createElement("form",{className:"p-user_group_create_form"},this.renderUserGroupNameField(),this.renderUserGroupHandleField(),this.renderUserGroupPurposeField(),this.renderDefaultChannelSelect()))}}]);return t}(h["PureComponent"]);ee.displayName="UserGroupEditCreateForm";ee.defaultProps=$;var te=function e(t){return{featureSonicUserGroups:Object(g["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var ae={validateUserGroupName:q,validateUserGroupHandle:Y};var re=Object(f["connect"])(te,ae)(ee);var ne=a(1795);var ie=a(58);var se=a.n(ie);var oe=Object(R["b"])("Validate the user group form",function(e,t,a){var r=a.name,n=a.handle,i=a.prevName,s=a.prevHandle;return Promise.all([e(q({name:r,prevName:i})),e(Y({handle:n,prevHandle:s}))]).then(function(e){var t=se()(e,2),a=t[0],r=t[1];return{nameError:a,handleError:r}})});oe.propTypes={name:m["b"].string,handle:m["b"].string,prevName:m["b"].string,prevHandle:m["b"].string};var le=oe;var ce=new j["b"]("user_groups");var ue={userGroupId:m["b"].string,userGroupName:m["b"].string,userGroupHandle:m["b"].string,userGroupPurpose:m["b"].string,userGroupDefaultChannels:m["b"].array,createUserGroup:m["b"].func.isRequired,updateUserGroup:m["b"].func.isRequired,validate:m["b"].func.isRequired,featureSonicUserGroups:m["b"].bool.isRequired,closeModal:m["b"].func,enqueueToast:m["b"].func,showUserGroupDetails:m["b"].func};var de={userGroupId:"",userGroupName:null,userGroupHandle:null,userGroupPurpose:"",userGroupDefaultChannels:[],closeModal:b["noop"],enqueueToast:b["noop"],showUserGroupDetails:b["noop"]};var pe=void 0;var he=Object(w["b"])();var ve=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={formSubmitPending:false,errors:{nameError:"",handleError:"",purposeError:""},formStep:"",submitError:"",requiredFieldsEmpty:false,detailsFormValues:{name:a.props.userGroupName,handle:a.props.userGroupHandle,purpose:a.props.userGroupPurpose,channels:a.props.userGroupDefaultChannels}};Object(b["bindAll"])(a,["setFormErrors","setUserGroupFormRef","setUserGroupMemberManagementRef","setRequiredFieldsEmpty","onSubmitSuccess","onSubmitFailure","onDetailsStepComplete","onEditDialogSubmit","onCreateDialogSubmit","createDialogViewInfo","shouldShowCloseDialogSpeedBump"]);a.formRef=null;return a}l()(t,[{key:"componentWillMount",value:function e(){this.createDialogViewInfo();this.props.userGroupId?this.setDialogStep(pe.edit.id):this.setDialogStep(pe.details.id)}},{key:"onDetailsStepComplete",value:function e(){var t=this;var a=this.formRef.onSubmit();this.setFormSubmitPending(true);return this.props.validate(n()({},a,{prevName:this.props.userGroupName,prevHandle:this.props.userGroupHandle})).then(function(e){t.setFormErrors(e);if(t.hasValidationErrors(e)){t.setFormSubmitPending(false);return}if(t.state.formStep===pe.edit.id)t.onEditDialogSubmit(a);else{t.setDetailsFormValues(a);t.setDialogStep(pe.members.id);t.setFormSubmitPending(false)}})}},{key:"onEditDialogSubmit",value:function e(t){var a=this;var r=t.name,n=t.handle,i=t.purpose,s=t.channels;if(!this.props.featureSonicUserGroups)return null;var o=this.props.userGroupId;return this.props.updateUserGroup({groupId:o,name:Object(b["trim"])(r),handle:n,description:i,channels:s}).then(function(){a.props.enqueueToast({element:v.a.createElement(S["b"],null,ce.t("Group has been updated."))});a.onSubmitSuccess()}).catch(function(e){he.error("Error editing user group: "+e);a.onSubmitFailure(e)})}},{key:"onCreateDialogSubmit",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=this.state.detailsFormValues;a=void 0===a?{}:a;var r=a.name,n=a.handle,i=a.purpose,s=a.channels;if(!this.userGroupMemberManagementRef)return false;var o=this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount();if(!o)return false;var l=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.createUserGroup({name:Object(b["trim"])(r),handle:n,description:i,channels:s,users:l}).then(function(e){var a=e.id;return t.props.showUserGroupDetails({groupId:a})}).then(function(){t.props.enqueueToast({element:v.a.createElement(S["b"],null,ce.t("User group created!"))});t.onSubmitSuccess()}).catch(function(e){he.error("Error creating user group: "+e);t.onSubmitFailure(e)})}},{key:"onSubmitSuccess",value:function e(){this.setFormSubmitPending(false);this.props.closeModal();this.setApiError("")}},{key:"onSubmitFailure",value:function e(t){this.setFormSubmitPending(false);this.setApiError(t)}},{key:"getMemberSelectorDialogProps",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;return{title:pe.members.title,contentLabel:pe.members.title,shouldCloseOnGo:true,bodyClassName:"p-user_group_member_management__dialog_body",onGo:this.onCreateDialogSubmit,goButtonText:pe.members.goButtonText,shouldCloseOnCancel:false,cancelText:ce.t("Back"),onCancel:function e(){t.setDialogStep(pe.details.id)},footerText:pe.members.footerText}}},{key:"getDetailsFormDialogProps",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.state.formStep;var a=Object(b["find"])(pe,function(e){return e.id===t});return{title:a.title,contentLabel:a.title,goButtonText:a.goButtonText,onGo:this.onDetailsStepComplete,shouldCloseOnCancel:true,cancelText:ce.t("Cancel"),shouldCloseOnGo:false,footerText:a.footerText}}},{key:"setFormErrors",value:function e(t){this.setState(function(e){return{errors:n()({},e.errors,t)}})}},{key:"setDetailsFormValues",value:function e(t){this.setState(function(e){return{detailsFormValues:n()({},e.detailsFormValues,t)}})}},{key:"setFormSubmitPending",value:function e(t){this.setState(function(){return{formSubmitPending:t}})}},{key:"setDialogStep",value:function e(t){this.setState(function(){return{formStep:t}})}},{key:"setUserGroupFormRef",value:function e(t){this.formRef=t}},{key:"setApiError",value:function e(t){this.setState(function(){return{submitError:t}})}},{key:"setUserGroupMemberManagementRef",value:function e(t){this.userGroupMemberManagementRef=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"setRequiredFieldsEmpty",value:function e(t){this.setState(function(){return{requiredFieldsEmpty:t}})}},{key:"shouldShowCloseDialogSpeedBump",value:function e(t){if("go"===t||this.state.formStep===pe.members.id)return false;var a=this.formRef.onSubmit();return!Object(b["isEqual"])(this.state.detailsFormValues,a)}},{key:"createDialogViewInfo",value:function e(){if(!this.props.featureSonicUserGroups)return;pe={details:{id:"details",footerText:ce.t("Step 1 of 2"),title:ce.t("Create User Group"),goButtonText:ce.t("Next")},members:{id:"members",footerText:ce.t("Step 2 of 2"),title:ce.t("Add members"),goButtonText:ce.t("Create Group")},edit:{id:"edit",footerText:null,title:ce.t("Edit User Group"),goButtonText:ce.t("Save")}}}},{key:"hasValidationErrors",value:function e(t){return!!Object(b["find"])(t,function(e){return e.length})}},{key:"renderDetailsForm",value:function e(){var t=this;return v.a.createElement("div",null,v.a.createElement(re,n()({},this.props,{detailsFormValues:this.state.detailsFormValues,errors:this.state.errors,submitError:this.state.submitError,setFormErrors:this.setFormErrors,onRef:function e(a){return t.setUserGroupFormRef(a)},setRequiredFieldsEmpty:this.setRequiredFieldsEmpty})))}},{key:"renderMemberSelector",value:function e(){if(!this.props.featureSonicUserGroups)return null;return v.a.createElement(ne["a"],{groupId:this.props.userGroupId,ref:this.setUserGroupMemberManagementRef})}},{key:"renderDialogStep",value:function e(){if(this.state.formStep===pe.details.id||this.state.formStep===pe.edit.id)return this.renderDetailsForm();if(this.state.formStep===pe.members.id)return this.renderMemberSelector();return""}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.hasValidationErrors(this.state.errors)||this.state.requiredFieldsEmpty;var a=this.state.formStep===pe.details.id||this.state.formStep===pe.edit.id?this.getDetailsFormDialogProps():this.getMemberSelectorDialogProps();return v.a.createElement(I["a"],n()({showCancelButton:true,goButtonIsDisabled:t,goButtonIsPending:this.state.formSubmitPending},a,{getShouldShowSpeedBump:this.shouldShowCloseDialogSpeedBump,speedBumpCancelButtonText:ce.t("Keep Editing"),speedBumpContinueButtonText:ce.t("Close"),speedBumpBodyText:ce.t("Your work won\u2019t be saved - are you sure you want to close?")}),this.renderDialogStep())}}]);return t}(h["PureComponent"]);ve.displayName="UserGroupEditCreateDialog";ve.defaultProps=de;var me=function e(t,a){var r=Object(y["g"])(t,a.userGroupId);return{userGroupName:Object(C["h"])(r),userGroupHandle:Object(C["f"])(r,{includeAtSign:false}),userGroupPurpose:Object(C["e"])(r),userGroupDefaultChannels:Object(C["d"])(t,r),featureSonicUserGroups:Object(g["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var fe={createUserGroup:_["f"],updateUserGroup:_["o"],closeModal:O["closeModal"],enqueueToast:k["enqueueToast"],showUserGroupDetails:E["n"],validate:le};var be=t["a"]=Object(f["connect"])(me,fe)(ve)},,,,function(e,t,a){"use strict";a.d(t,"b",function(){return c});a.d(t,"a",function(){return u});a.d(t,"c",function(){return d});var r=a(0);var n=a(15);var i=a(12);var s=a(905);var o=a(305);var l=a(806);var c=Object(n["b"])("Set channel notification override, and call API",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.name,n=a.value,c=a.channelId,u=a.sync;if(u&&"desktop"!==r)throw new Error("Cannot use sync arg with "+r+", can only be applied when name is 'desktop'");var d=Object(o["c"])(t(),c,r);e(Object(l["c"])({name:r,value:n,channelId:c,sync:u}));return e(Object(s["b"])({name:r,value:n,channelId:c,sync:u,reason:"prefs-store/setChannelNotificationOverride"})).catch(function(a){e(Object(l["c"])({name:r,value:d,channelId:c,sync:u}));var n=a&&a.data&&a.data.error||"unknown error";Object(i["a"])({getState:t}).error("PREFS","users.prefs.setNotifications failed to set "+c+": "+n)})});c.propTypes={name:r["b"].string.isRequired,value:r["b"].any.isRequired,channelId:r["b"].string.isRequired,sync:r["b"].bool};var u=Object(n["b"])("Resets a channel's notification overrides",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId;var n=Object(o["b"])(t(),r);if(!n)return Promise.resolve();e(Object(l["a"])({channelId:r}));return e(Object(s["b"])({channelId:r,name:"reset",value:"default",reason:"prefs-store/resetChannelNotificationOverride"})).catch(function(a){e(Object(l["b"])({channelId:r,override:n}));var s=a&&a.data&&a.data.error||"unknown error";Object(i["a"])({getState:t}).error("PREFS","users.prefs.setNotifications failed to reset "+r+": "+s)})});u.propTypes={channelId:r["b"].string.isRequired};var d=Object(n["b"])("Set a global notification pref via the users.prefs.setNotifications API, updating local prefs optimistically first",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.name,n=a.value,i=a.sync,c=void 0!==i&&i,u=a.reason;if(!r||null==n)return Promise.reject(new Error("setNotificationsGlobalPrefByApi requires a name and value to be passed."));var d=t();var p=Object(o["d"])(d,r);e(Object(l["d"])({name:r,value:n,sync:c}));return e(Object(s["c"])({name:r,value:n,sync:c,reason:u})).catch(function(){e(Object(l["d"])({name:r,value:p,sync:c}))})});d.propTypes={name:r["b"].oneOf(["global_mobile","global_mpdm_mobile","global_desktop","global_mpdm_desktop","global_keywords","mobile_sound","desktop_sound","no_text_in_notifications","push_show_preview","push_idle_wait","threads_everything"]).isRequired,value:r["b"].oneOfType([r["b"].string,r["b"].number,r["b"].bool]).isRequired,sync:r["b"].bool,reason:r["b"].string}},,,function(e,t,a){"use strict";a.d(t,"a",function(){return n});a.d(t,"b",function(){return i});var r=a(12);function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return null;var a=o(e)||l(e);a.loop=!!t.loop;a.currentTime=0;return a.play().catch(function(t){Object(r["b"])().error("Failed to play sound: "+e+" with reason: "+t);throw new Error(t)})}function i(e){var t=o(e);if(!t){Object(r["b"])().warn("Tried to stop sound, but no sound was playing matching url: "+e);return}t.pause()}var s={};function o(e){return s[e]}function l(e){var t=new Audio(e);s[e]=t;return t}},,,,function(e,t,a){"use strict";a.d(t,"d",function(){return D});a.d(t,"c",function(){return x});a.d(t,"a",function(){return B});var r=a(5);var n=a.n(r);var i=a(26);var s=a.n(i);var o=a(3);var l=a.n(o);var c=a(6);var u=a.n(c);var d=a(7);var p=a.n(d);var h=a(8);var v=a.n(h);var m=a(9);var f=a.n(m);var b=a(0);var g=a(1);var _=a.n(g);var y=a(2);var O=a.n(y);var k=a(16);var E=a.n(k);var C=a(126);var j=a(51);var w=a(574);var S=a(1143);var I=a(477);var T=a(854);var A=a(775);var N=a(1043);var P=a(10);var R=a(3041);var M=a.n(R);var D=b["b"].shape({selectionElementId:b["b"].string,previewText:b["b"].string,isSelected:b["b"].bool});var x=b["b"].shape({id:b["b"].string.isRequired,label:b["b"].node.isRequired,isPrimary:b["b"].bool,isDanger:b["b"].bool,disabled:b["b"].bool,appliesToCount:b["b"].number});var F={availableCount:b["b"].number.isRequired,selectedCount:b["b"].number.isRequired,items:b["b"].arrayOf(D).isRequired,actions:b["b"].arrayOf(x).isRequired,titleFormatter:b["b"].func,showingSelection:b["b"].bool,onToggleShowingSelection:b["b"].func,onToggleSelect:b["b"].func,onAction:b["b"].func,"data-qa":b["b"].string,position:b["b"].string};var L={showingSelection:false,titleFormatter:void 0,onToggleShowingSelection:void 0,onToggleSelect:void 0,onAction:void 0,"data-qa":"selection_bar",position:void 0};var B=76;var U=3;var q=new P["b"]("selection_bar");var G=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onCheckboxChange=a.onCheckboxChange.bind(a);a.onShowClick=a.onShowClick.bind(a);a.renderActionMenu=a.renderActionMenu.bind(a);a.getDefaultTitle=a.getDefaultTitle.bind(a);return a}p()(t,[{key:"onCheckboxChange",value:function e(){var t=this.props,a=t.selectedCount,r=t.availableCount,n=t.onToggleSelect;n(r!==a)}},{key:"onShowClick",value:function e(){var t=this.props,a=t.showingSelection,r=t.onToggleShowingSelection;r(!a)}},{key:"getDataQAAttr",value:function e(t){return this.props["data-qa"]+"_"+t}},{key:"getDefaultTitle",value:function e(t){return q.t("{selectedCount, plural,=1 {# item selected} other {# items selected}}",{selectedCount:t})}},{key:"getPreviewText",value:function e(t,a){var r=null;(t.length>0||a>0)&&(r=a>0?q.rt("{previewSelectionItems}{ moreItemsCount, plural,=1 {, and # more} other {, and # more}}.",{previewSelectionItems:Object(P["g"])(t,{noConj:true,noEscape:true}).join(""),moreItemsCount:a}):q.rt("{previewSelectionItems}.",{previewSelectionItems:Object(P["g"])(t,{noEscape:true}).join("")}));return r}},{key:"getItemListProps",value:function e(t,a){return Object(y["reduce"])(t,function(e,t,a){var r=0===a?"":" ";e.ariaControls+=""+r+t.selectionElementId;if(t.isSelected&&e.previewItems.length<U){e.previewItems.push(t.previewText);e.moreItemsCount-=1}return e},{ariaControls:"",previewItems:[],moreItemsCount:a})}},{key:"getActionProps",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var a=void 0;var r=Object(y["findIndex"])(t,{isPrimary:true});r=-1!==r?r:0;var n=l()({},t[r],{isPrimary:true});var i=t.length>=3;if(t.length<=1)a={primaryAction:n,isMenu:i};else if(2===t.length){var o=0===r?t[1]:t[0];a={primaryAction:n,secondaryAction:o,isMenu:i}}else{var c=[].concat(s()(t.slice(0,r)),s()(t.slice(r+1)));a={primaryAction:n,menuActions:c,isMenu:i}}return a}},{key:"renderActionLabel",value:function e(t){var a=t.label,r=t.appliesToCount;return r&&r>0?q.t("{action} ({count})",{action:a,count:r}):a}},{key:"renderActionButton",value:function e(t){var a=this;var r=t.id,n=t.isPrimary,i=t.isDanger,s=t.disabled;var o=w["a"].outline;i?o=w["a"].danger:n&&(o=w["a"].primary);return _.a.createElement(w["b"],{key:r,type:o,className:n?void 0:"c-selection_bar__secondary_action","data-qa":this.getDataQAAttr("action_"+r),disabled:s,onClick:function e(){return a.props.onAction(r)}},this.renderActionLabel(t))}},{key:"renderActionMenuButton",value:function e(){var t=q.rt("More {chevronDownIcon}",{chevronDownIcon:_.a.createElement(N["a"],{type:"chevron-down",inline:true})});return _.a.createElement(S["a"],{renderMenu:this.renderActionMenu,position:"top-right",offsetY:-8},_.a.createElement(w["b"],{className:"c-selection_bar__secondary_action","data-qa":this.getDataQAAttr("action_menu"),type:w["a"].outline},t))}},{key:"renderActionMenu",value:function e(t){var a=this;var r=this.getActionProps(this.props.actions),n=r.menuActions;if(!n||0===n.length)return null;return _.a.createElement(A["a"],t,n.map(function(e){return _.a.createElement(I["a"],{key:e.id,label:a.renderActionLabel(e),disabled:e.disabled,"data-qa":a.getDataQAAttr("action_menu_item_"+e.id),onSelected:function t(){return a.props.onAction(e.id)},danger:true===e.isDanger})}))}},{key:"render",value:function e(){var t;var a=this.props,r=a.availableCount,i=a.selectedCount,s=a.items,o=a.titleFormatter,l=a.showingSelection,c=a.actions,u=a.position;var d=r===i;var p=!d&&i>0;var h=this.getItemListProps(s,i),v=h.ariaControls,m=h.previewItems,f=h.moreItemsCount;var b=this.getPreviewText(m,f);var g=o||this.getDefaultTitle;var y=this.getActionProps(c),O=y.primaryAction,k=y.secondaryAction,w=y.isMenu;var S="c-selection_bar--position_"+u;var I=(t={},n()(t,S,!!u),n()(t,"c-selection_bar--position_relative","relative"===u),n()(t,"c-selection_bar--slide_up",i>0),t);var A=p||0===i?q.t("Select all"):q.t("Deselect all");var N=l?q.t("Show all"):q.t("Show selection");return _.a.createElement("div",{className:E()("c-selection_bar",I)},_.a.createElement("div",{className:"c-selection_bar__checkbox"},_.a.createElement(T["c"],{tip:A},_.a.createElement("div",null,_.a.createElement(C["a"],{className:"c-selection_bar__checkbox_input","aria-label":b,"data-qa":this.getDataQAAttr("checkbox"),checked:d,indeterminate:p,"aria-controls":v,onChange:this.onCheckboxChange})))),_.a.createElement("div",{className:"c-selection_bar__body"},_.a.createElement("div",{className:"c-selection_bar__selected_count","data-qa":this.getDataQAAttr("title")},g(i)),_.a.createElement("div",null,_.a.createElement("span",{className:"c-selection_bar__selected_preview","data-qa":this.getDataQAAttr("preview")},b),_.a.createElement(j["a"],{className:"c-selection_bar__show_link",onClick:this.onShowClick,"data-qa":this.getDataQAAttr("show_link")},N))),_.a.createElement("div",{className:"c-selection_bar__actions"},w&&this.renderActionMenuButton(),k&&this.renderActionButton(k),O&&this.renderActionButton(O)))}}]);return t}(g["PureComponent"]);G.displayName="BaseSelectionBar";G.defaultProps=L;t["b"]=G},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(13);var v=a(0);var m=a(16);var f=a.n(m);var b=a(423);var g=a(3259);var _=a.n(g);var y={light:v["b"].node,compact:v["b"].node,children:v["b"].node,className:v["b"].string,theme:v["b"].oneOf(["light","dense"])};var O={light:void 0,compact:void 0,className:void 0,children:void 0,theme:"light"};var k=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.light,r=t.compact,n=t.children,i=t.theme;var s=f()("c-message_kit__gutter",this.props.className,{"c-message_kit__gutter--compact":"dense"===i});if("dense"===i&&!r||"light"===i&&!a)return p.a.createElement("div",{className:s},p.a.createElement("div",{className:"c-message_kit__gutter__right"},n));var o="light"===i?a:r;return p.a.createElement("div",{className:s},p.a.createElement("div",{className:"c-message_kit__gutter__left"},o),p.a.createElement("div",{className:"c-message_kit__gutter__right"},n))}}]);return t}(d["PureComponent"]);k.displayName="MessageGutter";k.defaultProps=O;t["a"]=Object(h["connect"])(function(e){return{theme:Object(b["a"])(e)}})(k)},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(13);var v=a(0);var m=a(16);var f=a.n(m);var b=a(2);var g=a.n(b);var _=a(358);var y=a(360);var O=a(41);var k=a(39);var E=a(384);var C=a(1803);var j=a(1095);var w=a(3263);var S=a.n(w);var I={msg:v["b"].object.isRequired,className:v["b"].string,children:v["b"].node,position:v["b"].oneOf(["default","inside","above"]),show:v["b"].bool,showComment:v["b"].bool,showShare:v["b"].bool,showReact:v["b"].bool,showJump:v["b"].bool,showMoreActions:v["b"].bool,jumpOrigin:v["b"].string,messageContainerType:v["b"].oneOf(Object(b["values"])(k["MESSAGE_CONTAINERS"])),viewContext:v["b"].string,hover:v["b"].bool,setHover:v["b"].func,isEditing:v["b"].bool,maybeStartEditingMessage:v["b"].func,renderOffscreen:v["b"].bool,clogLinkClick:v["b"].func,clogThreadEvent:v["b"].func};var T={className:void 0,children:void 0,position:"default",show:void 0,showComment:true,showShare:true,showReact:true,showJump:false,showMoreActions:true,jumpOrigin:void 0,messageContainerType:void 0,viewContext:void 0,hover:false,setHover:b["noop"],isEditing:false,maybeStartEditingMessage:b["noop"],renderOffscreen:false,clogLinkClick:b["noop"],clogThreadEvent:b["noop"]};var A=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMenuOpen=a.onMenuOpen.bind(a);a.onMenuClose=a.onMenuClose.bind(a);a.startEditing=a.startEditing.bind(a);a.renderActions=a.renderActions.bind(a);return a}s()(t,[{key:"onMenuOpen",value:function e(){this.props.setHover(true)}},{key:"onMenuClose",value:function e(){this.props.setHover(false)}},{key:"startEditing",value:function e(){var t=this.props,a=t.msg,r=t.viewContext;var n=a.channel,i=a.ts;this.props.maybeStartEditingMessage({viewContext:r,channelId:n,ts:i})}},{key:"renderActions",value:function e(){var t=this.props,a=t.msg,r=t.hover,n=t.show,i=t.showComment,s=t.showShare,o=t.showReact,l=t.showJump,c=t.showMoreActions,u=t.jumpOrigin,d=t.messageContainerType,h=t.isEditing,v=t.renderOffscreen,m=t.clogLinkClick,f=t.clogThreadEvent;if(false===n)return null;if(void 0===n&&!r&&!v)return null;if(h)return null;if(Object(O["isEKMAccessDeniedMessage"])(a))return null;if(a.isEKMError)return null;var b=a.ts,g=a.thread_ts,_=a.channel,k=a.file,E=a.comment,j=a.subtype;return p.a.createElement(C["a"],{ts:b,threadTs:g,channelId:_,reactionKey:Object(y["b"])(a),isStarred:Object(O["isStarred"])(a,k,E),isReply:Object(O["isReply"])(a),isEphemeral:Object(O["isEphemeral"])(a),subtype:j,comment:a.comment&&a.comment.id,fileIds:a.files,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,onEmojiPickerOpen:this.onMenuOpen,onEmojiPickerClose:this.onMenuClose,showComment:i,showShare:s,showReact:o,showJump:l,showMoreActions:c,jumpOrigin:u,editHandler:this.startEditing,messageContainerType:d,renderOffscreen:v&&!r&&!n,clogLinkClick:m,clogThreadEvent:f})}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.position;var n=f()("c-message_kit__actions","c-message_kit__actions--"+r,this.props.className);return p.a.createElement("div",{className:n,style:{position:"relative"}},a,this.renderActions())}}]);return t}(d["PureComponent"]);A.displayName="MessageActions";A.defaultProps=T;var N=function e(t,a){var r=a.msg,n=a.viewContext;var i=r.channel,s=r.ts;var o=Object(_["getMessageEditData"])(t,{channelId:i,ts:s,viewContext:n}),l=o.isEditing;return{isEditing:l}};var P={maybeStartEditingMessage:function e(){return _["maybeStartEditingMessage"].apply(void 0,arguments)}};t["a"]=Object(E["b"])(Object(j["b"])(Object(h["connect"])(N,P)(A)))},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(2);var o=a(15);var l=a(4);var c=a(48);var u=a(68);var d=a(564);var p=a(77);var h=a(39);var v=a(365);var m=a(10);var f=new m["b"]("files");function b(e){var t=e.proceedToNextDialog,a=e.disableFileUploadsPref;var r=f.t("Uploads disabled");var i="";"disable_all"===a&&(i=f.t("At the request of your administrator, file uploads have been disabled on this workspace."));"disable_all_except_images"===a&&(i=f.t("At the request of your administrator, only images can be uploaded to this workspace."));var o=function e(){return Object(s["defer"])(function(){t()})};return n.a.createElement(v["a"],{title:r,onGo:o},n.a.createElement("p",null,i))}b.displayName="FileUploadsDisabledAlert";b.defaultProps={proceedToNextDialog:s["noop"],disableFileUploadsPref:""};var g=b;var _=new m["b"]("file_upload");function y(e){var t=e.proceedToNextDialog,a=e.excludedFiles,r=e.goodFiles;var i=void 0;var o=void 0;var l=void 0;var c=void 0;var u=void 0;var d=void 0;var p="";var h=a.length+r.length;if(a.length){i=[];c="";d="";i=a.map(function(e){return n.a.createElement("li",{key:e.name},n.a.createElement("strong",null,e.name))});if(a.length>1){o=a.length===h?_.t("All files unsupported"):_.t("Some files unsupported");u=_.t("Try uploading a .zip version of these files instead.");c=n.a.createElement("ul",null,i)}else if(1===a.length){o=_.t("File unsupported");u=_.t("Try uploading a .zip version of this file instead.")}r.length>1?d=_.t("(Don\u2019t worry, your other files are next.)"):1===r.length&&(d=_.t("(Don\u2019t worry, your other file is next.)"));l=1===a.length?_.rt("Sorry, {excluded_file} is a type of file not supported by Slack",{excluded_file:n.a.createElement("strong",null,a[0].name)}):a.length===h?_.t("Sorry, none of those file types are supported by Slack."):_.t("Sorry, some of those file types are not supported by Slack.");p=n.a.createElement("div",null,n.a.createElement("p",null,l),c,n.a.createElement("p",null,u),n.a.createElement("p",null,d))}var m=function e(){Object(s["defer"])(function(){t()})};return n.a.createElement(v["a"],{title:o,onGo:m},p)}y.displayName="FileUploadUnsupportedAlert";y.defaultProps={proceedToNextDialog:s["noop"],goodFiles:[],excludedFiles:[]};var O=y;var k=a(869);var E=new m["b"]("file-upload");var C={SINGLE:"single",MULTIPLE:"multiple",ALL:"all"};function j(e){var t=e.type,a=e.proceedToNextDialog,r=e.featureI18nFilesize;var i=E.t("File too large");var o="";o=t===C.ALL?E.t("All of those files are too large and cannot be uploaded. The limit is {limit}.",{limit:Object(k["a"])(h["UPLOAD_FILE_SIZE_LIMIT_BYTES"],{featureI18nFilesize:r})}):t===C.SINGLE?E.t("That file is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(k["a"])(h["UPLOAD_FILE_SIZE_LIMIT_BYTES"],{featureI18nFilesize:r})}):E.t("We\u2019ll upload what we can, but one or more of those files is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(k["a"])(h["UPLOAD_FILE_SIZE_LIMIT_BYTES"],{featureI18nFilesize:r})});var l=t===C.MULTIPLE?function(){Object(s["defer"])(function(){a()})}:s["noop"];return n.a.createElement(v["a"],{title:i,onGo:l},n.a.createElement("p",null,o))}j.displayName="FileUploadSizeAlert";j.defaultProps={type:C.SINGLE,proceedToNextDialog:s["noop"],featureI18nFilesize:false};var w=j;var S=a(150);var I=a(157);var T=new m["b"]("multi_file_upload");var A=Object(o["b"])("renders a toast with error message for uploading too many files",function(e){var t=T.t("You can only upload {count, plural, =1 {# file} other {# files}} at a time.",{count:h["MAX_FILE_UPLOAD_COUNT"]});var a=n.a.createElement(I["b"],{icon:"warning",iconClassName:"sk_colonel_mustard"},n.a.createElement("span",null,t));setTimeout(function(){return e(Object(S["enqueueToast"])({element:a}))},500)});var N=A;var P=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dispatch,r=t.getState,i=t.files;if(!i)return Promise.resolve();return new Promise(function(e){var t=Object(u["a"])(r(),"disable_file_uploads");if("disable_all"===t){a(Object(c["openModal"])({element:n.a.createElement(g,{disableFileUploadsPref:t,proceedToNextDialog:function t(){return e()}}),isStackable:true}));return}if("disable_all_except_images"===t){var o=Object(s["filter"])(i,function(e){return Object(p["isPendingImageFile"])(e)});if(o.length!==i.length){a(Object(c["openModal"])({element:n.a.createElement(g,{disableFileUploadsPref:t,proceedToNextDialog:function t(){return e(o)}}),isStackable:true}));return}}e(i)})};var R=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dispatch,r=t.files;if(!r)return Promise.resolve();return new Promise(function(e){Object(p["validateFiles"])(r,function(t){if(t.excludedFiles.length){a(Object(c["openModal"])({element:n.a.createElement(O,{goodFiles:t.goodFiles,excludedFiles:t.excludedFiles,proceedToNextDialog:function a(){return e(t.goodFiles)}}),isStackable:true}));return}e(t.goodFiles)})})};var M=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dispatch,r=t.getState,i=t.files;if(!i)return Promise.resolve();var o=r();var u=Object(l["isFeatureEnabled"])(o,"feature_i18n_filesize");return new Promise(function(e){var t=i.filter(function(e){return Object(s["isString"])(e)||"undefined"===typeof e.size||e.size<=h["UPLOAD_FILE_SIZE_LIMIT_BYTES"]});if(t.length<i.length){if(1===i.length){a(Object(c["openModal"])({element:n.a.createElement(w,{type:C.SINGLE,featureI18nFilesize:u}),isStackable:true}));e();return}if(!t.length){a(Object(c["openModal"])({element:n.a.createElement(w,{type:C.ALL,featureI18nFilesize:u}),isStackable:true}));e();return}a(Object(c["openModal"])({element:n.a.createElement(w,{type:C.MULTIPLE,featureI18nFilesize:u,proceedToNextDialog:function a(){return e(t)}}),isStackable:true}));return}e(t)})};var D=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dispatch,r=t.getState,n=t.files,i=t.channelId,o=t.threadTs;if(!n)return Promise.resolve();var l=r();var c=Object(d["getPendingFilesforInput"])(l,{channelId:i,threadTs:o})||[];if(c.length+n.length>h["MAX_FILE_UPLOAD_COUNT"]){a(N());var u=h["MAX_FILE_UPLOAD_COUNT"]-c.length;var p=Object(s["take"])(n,u);return Promise.resolve(p)}return Promise.resolve(n)};var x=Object(o["b"])("filters invalid files before they can be uploaded",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.selectedFiles,n=a.channelId,i=a.threadTs;return P({dispatch:e,getState:t,files:r}).then(function(t){return R({dispatch:e,files:t})}).then(function(a){return M({dispatch:e,getState:t,files:a})}).then(function(a){return D({dispatch:e,getState:t,files:a,channelId:n,threadTs:i})})});x.propTypes={selectedFiles:i["b"].array.isRequired,channelId:i["b"].string,threadTs:i["b"].string};var F=t["a"]=x},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(15);var o=a(48);var l=a(6);var c=a.n(l);var u=a(7);var d=a.n(u);var p=a(8);var h=a.n(p);var v=a(9);var m=a.n(v);var f=a(13);var b=a(803);var g=a(10);var _=a(1044);var y=a(915);var O=a(28);var k=a(187);var E=a(1739);var C=a(2379);var j=new g["b"]("prefs");var w={channelId:i["b"].string.isRequired,closeModal:i["b"].func.isRequired,openPrefsModal:i["b"].func.isRequired};var S=function(e){m()(t,e);function t(e){c()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onGo=a.onGo.bind(a);a.onOpenPreferences=a.onOpenPreferences.bind(a);return a}d()(t,[{key:"onGo",value:function e(){this.props.closeModal()}},{key:"onOpenPreferences",value:function e(){this.props.closeModal();this.props.openPrefsModal()}},{key:"render",value:function e(){var t=this;var a=this.props.channelId;var r=j.rt("Notification Preferences: {channelName}",{channelName:n.a.createElement(_["b"],{channelId:a,inline:true})});return n.a.createElement(y["a"],{title:r,showCancelButton:false,showGoButton:false,withHeader:true},n.a.createElement(E["a"],{channelId:a,openPrefsModal:this.onOpenPreferences}),n.a.createElement("div",{className:"p-channel_notification_prefs_modal__footer"},n.a.createElement("span",{className:"p-channel_notification_prefs_modal__footer_hint"},j.rt("Set your default notifications settings in your <a>Account Preferences</a>",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.text;return n.a.createElement(k["a"],{onClick:t.onOpenPreferences},a)})),n.a.createElement(O["d"],{type:"primary",onClick:this.onGo},j.t("Done"))))}}]);return t}(r["Component"]);S.displayName="ChannelNotificationPrefsModal";function I(e){return{closeModal:function t(){return e(o["closeModal"].apply(void 0,arguments))},openPrefsModal:function t(){return e(b["a"].apply(void 0,arguments))}}}var T=Object(f["connect"])(null,I)(S);var A=Object(s["b"])("Opens the channel notif prefs modal",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Object(o["openModal"])({element:n.a.createElement(T,a)}))});A.propTypes={channelId:i["b"].string.isRequired};var N=t["a"]=A},,,,,,,function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(1);var v=a.n(h);var m=a(0);var f=a(13);var b=a(2);var g=a.n(b);var _=a(16);var y=a.n(_);var O=a(34);var k=a(511);var E=a(711);var C=a(928);var j=a(1220);var w=a(1802);var S=a(384);var I=a(55);var T=a(1772);var A=20;var N=10;var P={msg:m["b"].object.isRequired,className:m["b"].string,blocksContainerContext:m["b"].oneOf(Object(b["values"])(I["a"])),expandInlineImgsPref:m["b"].bool,expandNonMediaAttachmentsPref:m["b"].bool,viewContext:m["b"].string};var R={className:void 0,expandInlineImgsPref:false,expandNonMediaAttachmentsPref:false,viewContext:void 0,blocksContainerContext:I["a"].message_attachment};var M=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"renderAttachmentsOverLimitMaybe",value:function e(t,a){if(!t.length)return null;var r=this.props.viewContext;var i={useAttachmentRules:false,shouldBeExpandedByDefault:false,expandableKey:Object(k["a"])("attachmentsOverLimit",this.props.msg.ts,{limit:a,viewContext:r})};return v.a.createElement("div",null,v.a.createElement(C["a"],i,t),v.a.createElement(j["a"],n()({},i,{render:function e(a,r){return v.a.createElement(w["a"],{isExpanded:a.isExpanded,onClick:r,attachmentsOverLimitCount:t.length})}})))}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.expandInlineImgsPref,n=t.expandNonMediaAttachmentsPref,i=t.blocksContainerContext;var s=Object(E["c"])(a,r,n);if(!a||!s||!s.length)return null;var o=A;var l=Object(b["map"])(s,function(e,t){var r=e.id||t+1;e.blocks&&(o=N);return v.a.createElement(T["a"],{msg:a,attachment:e,key:r,blocksContainerContext:i})});var c=l.splice(o);var u=y()("c-message_kit__attachments",this.props.className);return v.a.createElement("div",{className:u},l,this.renderAttachmentsOverLimitMaybe(c,o))}}]);return t}(h["PureComponent"]);M.displayName="MessageKitAttachments";M.defaultProps=R;var D=function e(t){return{expandInlineImgsPref:Object(O["f"])(t,"expand_inline_imgs"),expandNonMediaAttachmentsPref:Object(O["f"])(t,"expand_non_media_attachments")}};t["a"]=Object(S["b"])(Object(f["connect"])(D)(M))},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(0);var v=a(13);var m=a(16);var f=a.n(m);var b=a(1834);var g=a(360);var _=a(3271);var y=a.n(_);var O={className:h["b"].string,reactionKey:h["b"].string};var k={className:void 0,reactionKey:null};var E=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.className,r=t.reactionKey;var n=f()("c-message_kit__reaction_bar",a);return p.a.createElement(b["a"],{className:n,reactionKey:r})}}]);return t}(d["PureComponent"]);E.displayName="MessageReactionBar";E.defaultProps=k;var C=function e(t,a){var r=a.msg;if(!r)return null;var n=Object(g["b"])(r);return{reactionKey:n}};t["a"]=Object(v["connect"])(C)(E)},,,,,,,,,function(e,t,a){var r=a(1030);var n=r(Object,"create");e.exports=n},function(e,t,a){var r=a(2148),n=a(2149),i=a(2150),s=a(2151),o=a(2152);function l(e){var t=-1,a=null==e?0:e.length;this.clear();while(++t<a){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r;l.prototype["delete"]=n;l.prototype.get=i;l.prototype.has=s;l.prototype.set=o;e.exports=l},function(e,t,a){var r=a(1639);function n(e,t){var a=e.length;while(a--)if(r(e[a][0],t))return a;return-1}e.exports=n},function(e,t,a){var r=a(2154);function n(e,t){var a=e.__data__;return r(t)?a["string"==typeof t?"string":"hash"]:a.map}e.exports=n},function(e,t,a){var r=a(1405);var n=1/0;function i(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}e.exports=i},function(e,t,a){var r,n,i;false;e.exports=a(2220)()},,,,,,,,,,,,,,,,function(e,t,a){"use strict";t.__esModule=true;var r=a(1641);Object.defineProperty(t,"instrument",{enumerable:true,get:function e(){return s(r).default}});Object.defineProperty(t,"ActionCreators",{enumerable:true,get:function e(){return r.ActionCreators}});Object.defineProperty(t,"ActionTypes",{enumerable:true,get:function e(){return r.ActionTypes}});var n=a(2176);Object.defineProperty(t,"persistState",{enumerable:true,get:function e(){return s(n).default}});var i=a(2215);Object.defineProperty(t,"createDevTools",{enumerable:true,get:function e(){return s(i).default}});function s(e){return e&&e.__esModule?e:{default:e}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return n});a.d(t,"b",function(){return i});var r=a(20);var n=Object(r["b"])("TS.ensureFullyBooted",function(){throw new Error("Not implemented (and only ever intended for use in non-Sonic Land)")});var i=Object(r["b"])("TS.legacyResynced",function(){throw new Error("Not implemented (and only ever intended for use in non-Sonic Land)")})},function(e,t,a){"use strict";a.d(t,"b",function(){return n});a.d(t,"a",function(){return i});var r=a(20);var n=Object(r["b"])("TS.onboarding.inOnboarding");var i=Object(r["b"])("TS.onboarding.cancelOnboarding")},function(e,t,a){"use strict";var r=a(0);var n=a(15);var i=a(293);var s=a(123);var o=Object(n["b"])("Process message data from the api/socket and add it to the messages-store (but not the channel-history-store)",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.message,n=a.channelId;var o=e(Object(i["a"])({imsgs:[r],channelId:n}));e(Object(s["a"])(o));return o[0]});o.propTypes={message:r["b"].shape({ts:r["b"].string.isRequired}).isRequired,channelId:r["b"].string.isRequired};t["a"]=o},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(1707);t["a"]=r["a"]},function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a(348);function n(e){return Object(r["a"])((e||"").trim().toLowerCase())}},,,,,,,function(e,t,a){"use strict";var r=a(0);var n=a(13);var i=a(195);var s={children:r["b"].node,isOnline:r["b"].bool};var o={children:null,isOnline:null};var l=function e(t){var a=t.isOnline,r=t.children;return a?r:null};l.propTypes=s;l.defaultProps=o;var c=function e(t){return{isOnline:Object(i["c"])(t)}};var u=Object(n["connect"])(c)(l);var d={children:r["b"].node,isOnline:r["b"].bool};var p={children:null,isOnline:null};var h=function e(t){var a=t.isOnline,r=t.children;return a?null:r};h.propTypes=d;h.defaultProps=p;var v=function e(t){return{isOnline:Object(i["c"])(t)}};var m=Object(n["connect"])(v)(h);var f=a(52);var b={children:r["b"].node,isDegradedMode:r["b"].bool};var g={children:null,isDegradedMode:null};var _=function e(t){var a=t.isDegradedMode,r=t.children;return a?r:null};_.propTypes=b;_.defaultProps=g;var y=function e(t){return{isDegradedMode:Object(f["isHavingTroubleReconnecting"])(t)}};var O=Object(n["connect"])(y)(_);a.d(t,"b",function(){return u});a.d(t,"a",function(){return m})},,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return n});a.d(t,"b",function(){return i});a.d(t,"c",function(){return s});var r=a(20);var n=Object(r["b"])("TS.client.unread.bulk_unread_count_change_sig.dispatch");var i=Object(r["b"])("TS.client.unread.legacyUpdateSortOrder");var s=Object(r["b"])("TS.client.unread.reload")},,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(0);var v=a(13);var m=a(16);var f=a.n(m);var b=a(2);var g=a.n(b);var _=a(100);var y=a(693);var O=a(50);var k=a(10);var E=a(3132);var C=a.n(E);var j=new k["b"]("flexpane");var w=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.children,r=t.className,n=t.onOptionsClick,i=t.optionsIconType,s=t.optionsTooltipText,o=t.renderSecondary;var l=n?O["a"]:1e3;var c=o();var u=s||j.t("View options",{fallbackHash:"a09052c3b42360a3492e17c37d74b78324785541",fallbackHashNs:"mentions"});return p.a.createElement("div",{className:f()("p-flexpane_header",r)},p.a.createElement("div",{className:"p-flexpane_header__primary"},p.a.createElement("div",{className:"p-flexpane_header__primary_content"},a),n&&p.a.createElement(O["c"],{delay:l,tip:u},p.a.createElement(y["a"],{"aria-label":j.t("View options",{fallbackHash:"a09052c3b42360a3492e17c37d74b78324785541",fallbackHashNs:"mentions"}),className:"p-flexpane_header__control",icon:i,onClick:n})),p.a.createElement(O["c"],{delay:l,tip:j.t("Close",{fallbackHash:"1f863990d6ec5b308a2330f10e271f087ccf0bf7"})},p.a.createElement(y["a"],{"aria-label":j.t("Close Right Sidebar"),className:"p-flexpane_header__control",onClick:this.props.closeFlexpane,"data-qa":"close_flexpane",icon:"times"}))),c&&p.a.createElement("div",{className:"p-flexpane_header__secondary"},c))}}]);return t}(d["PureComponent"]);w.displayName="FlexpaneHeader";w.defaultProps={children:null,className:void 0,closeFlexpane:b["noop"],onOptionsClick:void 0,optionsIconType:"filters",optionsTooltipText:void 0,renderSecondary:b["noop"]};t["a"]=Object(v["connect"])(null,{closeFlexpane:_["a"]})(w)},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(0);var v=a(13);var m=a(2);var f=a.n(m);var b=a(16);var g=a.n(b);var _=a(108);var y=a(285);var O=a(100);var k=a(567);var E=a(504);var C=a(168);var j=a(279);var w=a(693);var S=a(38);var I=a(191);var T={flexName:h["b"].string,flexParams:h["b"].arrayOf(h["b"].string),flexOrigin:h["b"].string,flexOriginId:h["b"].string,previewFile:h["b"].func,showUserGroupList:h["b"].func,setSecondaryView:h["b"].func,toggleActivityFlexpane:h["b"].func,showMemberDirectory:h["b"].func,size:h["b"].oneOf(["large","medium"]),className:h["b"].string};var A={flexName:void 0,flexParams:void 0,flexOrigin:void 0,flexOriginId:void 0,previewFile:m["noop"],showUserGroupList:m["noop"],setSecondaryView:m["noop"],toggleActivityFlexpane:m["noop"],showMemberDirectory:m["noop"],size:"large",className:void 0};var N=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.getOrigin=a.getOrigin.bind(a);a.openOrigin=a.openOrigin.bind(a);return a}s()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.flexOrigin,r=t.flexName;if(a)return this.openOrigin();switch(r){case"files":return Object(S["a"])()?this.props.setSecondaryView({routeName:I["h"],flexName:"files"}):Object(j["d"])("files");case"team":return Object(C["m"])();case"groups":case"user_groups":return this.props.showUserGroupList();default:return null}}},{key:"getOrigin",value:function e(){var t=this.props,a=t.flexOrigin,r=t.flexName,n=t.flexParams;var i=n&&n[0];if(a)return a;switch(r){case"files":return Object(k["a"])(i)?"files":null;case"team":case"groups":return Object(E["a"])(i)?"groups":null;case"user_groups":return Object(E["a"])(i)?"user_groups":null;default:return null}}},{key:"openOrigin",value:function e(){var t=this.props,a=t.flexOrigin,r=t.flexOriginId;switch(a){case"member_preview":return Object(C["m"])();case"directory":return this.props.showMemberDirectory();case"starred_items":if(Object(S["a"])())return this.props.setSecondaryView({routeName:I["k"],flexName:"starred_items"});return Object(j["d"])("stars");case"channel_page":case"group_page":case"im_page":return Object(j["d"])("details");case"activity":case"mentions":return this.props.toggleActivityFlexpane();case"file_details":return Object(k["a"])(r)?this.props.previewFile({fileId:r}):Object(j["d"])("files");default:return null}}},{key:"render",value:function e(){var t=this.getOrigin();if(!t)return null;var a=this.props,r=a.size,n=a.className;var i="chevron-"+r+"-left";return p.a.createElement(w["a"],{className:g()("p-global_nav__flex_btn","p-global_nav__flex_btn--back",n),icon:i,onClick:this.onClick})}}]);return t}(d["Component"]);N.displayName="FlexBack";N.defaultProps=A;var P=function e(t,a){var r=a.flexOrigin;return{flexName:Object(_["g"])(t),flexParams:Object(_["c"])(t),flexOrigin:r||Object(_["a"])(t),flexOriginId:Object(_["b"])(t)}};var R={previewFile:O["c"],showUserGroupList:O["o"],setSecondaryView:y["a"],toggleActivityFlexpane:O["q"],showMemberDirectory:O["i"]};t["a"]=Object(v["connect"])(P,R)(N)},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(0);var v=a(10);var m=a(22);var f=a(138);var b=new v["b"]("offline_mode");var g=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.featureOfflineMode,r=t.tooltipLabel;if(!a)return"";return p.a.createElement(d["Fragment"],null,r,p.a.createElement("br",null),p.a.createElement("span",{className:"sk_light_gray"},p.a.createElement(m["b"],{type:"cloud-offline-small",className:"margin_right_25",size:"inherit"}),b.t("No connection")))}}]);return t}(d["Component"]);g.displayName="OfflineTooltipLabel";t["a"]=Object(f["a"])("feature_offline_mode")(g)},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(15);var s=a(0);var o=a(87);var l=a(1759);var c=a(1219);var u=a(358);var d=a(683);var p=Object(i["b"])("build message summary for aria labels",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,i=a.ts,s=a.isFirstUnreadMsg,o=a.isFirstMsgForDay,p=a.isLastMsgForDay,h=a.previousMessageTs,v=a.day,m=a.rollup,f=a.hasFocus;var b=t();var g=Object(d["isScreenReaderEnabled"])(b);var _=Object(u["getMessageEditData"])(b,{channelId:r,ts:i}),y=_.isEditing;if(y)return;if(!(g||f))return;var O=Object(c["a"])(b,{channelId:r,ts:i,previousMessageTs:h,rollup:m,hasFocus:f});return Object(l["a"])(n()({},O,{isFirstUnreadMsg:s,isFirstMsgForDay:o,isLastMsgForDay:p,day:v}))});p.propTypes={channelId:s["b"].string.isRequired,ts:s["b"].string.isRequired,isFirstUnreadMsg:s["b"].bool,isFirstMsgForDay:s["b"].bool,isLastMsgForDay:s["b"].bool,previousMessageTs:s["b"].string,day:s["b"].object,rollup:o["a"].Rollup(),hasFocus:s["b"].bool};t["a"]=p},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(13);var v=a(4);var m=a(0);var f=a(12);var b={msg:m["b"].object.isRequired,children:m["b"].node,featureTinyspeck:m["b"].bool,logger:m["b"].object.isRequired};var g={children:null,featureTinyspeck:false};var _=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={error:false};return a}s()(t,[{key:"componentDidCatch",value:function e(t,a){this.setState(function(){return{error:true}});var r=t?t.message:"";var n=t?t.stack:"";var i=this.props.msg,s=i.ts,o=i.channel,l=i.subtype;this.props.logger.error("Message Kit componentDidCatch: "+l+" "+s+" in "+o+", "+r);n&&this.props.logger.error(n);a&&a.componentStack&&this.props.logger.error(a.componentStack)}},{key:"render",value:function e(){if(!this.state.error)return this.props.children;if(!this.props.featureTinyspeck)return null;var t=this.props.msg,a=t.ts,r=t.channel;return p.a.createElement("div",{className:"sk_warning_red_bg sk_white padding_100 padding_bottom_25"},p.a.createElement("p",null,p.a.createElement("strong",null,"Message ",a," in ",r," failed to render."," ")),p.a.createElement("p",null,"Please go to #escal-messages and,"," ",p.a.createElement("strong",null,"if it has not been reported yet"),", post a report including a screenshot and a link to the previous message if this is a public channel."),p.a.createElement("p",null,"This message is only displayed to workspaces in the Slack org."))}}]);return t}(d["Component"]);_.displayName="MessageErrorBoundary";_.defaultProps=g;var y=_;var O=function e(t){return{featureTinyspeck:Object(v["isFeatureEnabled"])(t,"feature_tinyspeck"),logger:Object(f["a"])({state:t})}};t["a"]=Object(h["connect"])(O)(_)},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(1);var v=a.n(h);var m=a(13);var f=a(0);var b=a(16);var g=a.n(b);var _=a(2);var y=a.n(_);var O=a(19);var k=a(329);var E=a(4);var C=a(423);var j=a(73);var w=a(316);var S=a(101);var I=a(41);var T=a(11);var A=a(1698);var N=a(1798);var P=a(1804);var R=a(22);var M=a(51);var D=a(1033);var x=a(1805);var F=a(279);var L=a(922);var B=a(3273);var U=a.n(B);var q={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled",broadcast:"jump"};var G={msg:f["b"].object.isRequired,className:f["b"].string,children:f["b"].node,showPinned:f["b"].bool,showStarred:f["b"].bool,showBroadcast:f["b"].bool,theme:f["b"].oneOf(["light","dense"]),sliHighlight:f["b"].object,currentUserId:f["b"].string,primaryView:f["b"].string,isSelfIm:f["b"].bool,isSlackbotIm:f["b"].bool,dispatch:f["b"].func,setBackground:f["b"].func};var W={className:void 0,children:void 0,showPinned:true,showStarred:true,showBroadcast:false,theme:"light",sliHighlight:void 0,currentUserId:void 0,primaryView:void 0,isSelfIm:false,isSlackbotIm:false,dispatch:_["noop"],setBackground:_["noop"]};var H=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onBroadcastClick=a.onBroadcastClick.bind(a);a.renderHighlight=a.renderHighlight.bind(a);a.renderStarButton=a.renderStarButton.bind(a);a.renderBroadcast=a.renderBroadcast.bind(a);a.labelText=null;a.primaryLabelType=null;return a}l()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"onStarClick",value:function e(){Object(F["d"])("stars")}},{key:"onBroadcastClick",value:function e(t){var a=this.props,r=a.dispatch,n=a.msg,i=a.primaryView;t.preventDefault();if(i===n.channel){r(Object(S["c"])({ts:n.ts,highlight:true}));return}r(Object(w["a"])({id:n.channel,startTs:n.ts}))}},{key:"setBackground",value:function e(){var e=this.props.setBackground;e({labels:this.labelText&&this.primaryLabelType})}},{key:"getLabelTypes",value:function e(){var t=this.props,a=t.msg,r=t.sliHighlight,n=t.showPinned,i=t.showStarred,s=t.showBroadcast;var o=Object(I["getMessagePinnedInfo"])(a);return Object(A["a"])({isPinned:n&&!!o,isEphemeral:Object(I["isEphemeral"])(a),isStarred:i&&Object(I["isStarred"])(a),isBroadcast:s&&Object(I["isThreadBroadcast"])(a),subtype:a.subtype,sliHighlight:!!r})}},{key:"renderPinnedBy",value:function e(t){return v.a.createElement(D["a"],{className:"c-message_kit__labels__link",id:t})}},{key:"renderStarButton",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.text;if(!a)return null;return v.a.createElement(M["a"],{onClick:this.onStarClick,className:"c-message_kit__labels__link"},a)}},{key:"renderBroadcast",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.text;if(!a)return null;return v.a.createElement(M["a"],{onClick:this.onBroadcastClick,className:"c-message_kit__labels__link"},a)}},{key:"renderLabelText",value:function e(t){var a=this.props,r=a.msg,i=a.currentUserId,s=a.isSelfIm,o=a.isSlackbotIm;var l=Object(I["getMessagePinnedInfo"])(r);var c=l&&l.pinnedBy;var u=Object(P["a"])(n()({},t,{isSelfIm:s,isSlackbotIm:o,currentUserId:i,pinnedBy:c,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton,renderHighlight:this.renderHighlight,renderBroadcast:this.renderBroadcast,featureMessageLabelsCopy:true}));if(!u)return null;return v.a.createElement("span",{className:"c-message_kit__labels__text"},u)}},{key:"renderLabelIcon",value:function e(t){var a=q[t];if(!a)return null;return v.a.createElement("div",{className:"c-message_kit__labels__icon"},v.a.createElement(R["b"],{type:a,size:"inherit"}))}},{key:"renderHighlight",value:function e(){var t=this.props,a=t.msg,r=t.sliHighlight;var n=a.channel,i=a.ts;if(!Object(k["shouldShowHighlightsLabel"])(r))return null;return v.a.createElement(x["a"],{sliHighlight:r,channelId:n,ts:i})}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.theme;var n=this.getLabelTypes();var i=Object(N["a"])(n);var s=this.renderLabelIcon(i);var o=this.renderLabelText(n);this.labelText=o;this.primaryLabelType=i;if(!o)return a;var l=g()(this.props.className,"c-message_kit__labels","c-message_kit__labels--"+i,"c-message_kit__labels--"+r);return v.a.createElement("div",{className:l},v.a.createElement("div",{className:"c-message_kit__labels__label"},s,o),a)}}]);return t}(h["PureComponent"]);H.displayName="MessageLabels";H.defaultProps=W;var V=function e(t,a){var r=a.msg;if(!r)return null;var n=r.channel,i=r.ts;var s=Object(E["getCurrentUserId"])(t);var o=Object(O["d"])(t,n);var l=Object(j["a"])(t);var c=Object(k["getMessageMetaData"])(t,{channelId:n,ts:i}),u=c.sliHighlight;var d=Object(T["isSlackbot"])(o);var p=Object(T["isYou"])(s,o);return{theme:Object(C["a"])(t),currentUserId:s,primaryView:l,sliHighlight:u,isSlackbotIm:d,isSelfIm:p}};t["a"]=Object(L["b"])(Object(m["connect"])(V)(H))},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(13);var v=a(0);var m=a(16);var f=a.n(m);var b=a(2);var g=a.n(b);var _=a(358);var y=a(384);var O=a(1835);var k=a(922);var E=a(3275);var C=a.n(E);var j={msg:v["b"].object.isRequired,className:v["b"].string,children:v["b"].node,isEditing:v["b"].bool,setBackground:v["b"].func,viewContext:v["b"].string};var w={className:void 0,children:void 0,isEditing:false,setBackground:b["noop"],viewContext:void 0};var S=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){this.setBackground()}},{key:"componentDidUpdate",value:function e(){this.setBackground()}},{key:"setBackground",value:function e(){var t=this.props,a=t.isEditing,e=t.setBackground;e({editing:a})}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.isEditing,n=t.children,i=t.viewContext;if(!r)return n;var s=a.channel,o=a.ts;var l=f()(this.props.className,"c-message_kit__edit");return p.a.createElement("div",{className:l},p.a.createElement(O["a"],{channelId:s,ts:o,messageContainerType:i}))}}]);return t}(d["PureComponent"]);S.displayName="MessageEdit";S.defaultProps=w;var I=function e(t,a){var r=a.msg,n=a.viewContext;var i=r.channel,s=r.ts;var o=Object(_["getMessageEditData"])(t,{channelId:i,ts:s,viewContext:n}),l=o.isEditing;return{isEditing:l}};t["a"]=Object(k["b"])(Object(y["b"])(Object(h["connect"])(I)(S)))},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(13);var v=a(0);var m=a(16);var f=a.n(m);var b=a(423);var g=a(3277);var _=a.n(g);var y={children:v["b"].node,className:v["b"].string,theme:v["b"].oneOf(["light","dense"])};var O={className:void 0,children:void 0,theme:"light"};var k=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.children,r=t.theme;if("light"===r)return a;var n=f()("c-message_kit__indent",this.props.className);return p.a.createElement("div",{className:n},a)}}]);return t}(d["Component"]);k.displayName="MessageIndent";k.defaultProps=O;t["a"]=Object(h["connect"])(function(e){return{theme:Object(b["a"])(e)}})(k)},,,,,function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(0);var v=a(1);var m=a.n(v);var f=a(16);var b=a.n(f);var g=a(540);var _=a.n(g);var y=a(2);var O=a(2414);var k=a(1862);var E=a(10);var C=a(96);function j(e,t){return e<t}function w(e){var t=e.sluggifyEnabled,a=e.sluggifyDelimiter,r=e.sluggifyKeyName,n=e.single;if(!t||!a||!r||n)return false;return true}function S(e){return void 0!==e.slugId}function I(e,t){var a=t.canSlug,r=t.noDefaultSelection;var n=[];var i=[];var s={};e.forEach(function(e){var t=e;if(a&&S(t)){i.push(t);return}n.push(t);s[t.id]=t;if(t.group||t.children&&t.children.length){t.group=true;t.children.forEach(function(e){var a=e;a.isChild=true;a.parentId=t.id;n.push(a);s[a.id]=a;e.preselected&&!r&&i.push(a)})}t.preselected&&!r&&i.push(t)});return{currentItems:n,itemMapById:s,preselected:i}}var T=a(50);var A=new E["b"]("channel_options");var N={active:h["b"].bool,dataQaPrefix:h["b"].string,disabled:h["b"].bool,item:h["b"].object,onClick:h["b"].func,onMouseLeave:h["b"].func,onMouseMove:h["b"].func,selected:h["b"].bool,style:h["b"].object,template:h["b"].func,customClasses:h["b"].string};var P={active:false,dataQaPrefix:"lfs",disabled:false,item:{},onClick:y["noop"],onMouseLeave:y["noop"],onMouseMove:y["noop"],selected:false,style:"",template:function e(t){return t.label},customClasses:""};var R=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClickHandler=a.onClickHandler.bind(a);return a}l()(t,[{key:"onClickHandler",value:function e(t){t.preventDefault();t.stopPropagation();if(this.props.disabled)return;this.props.onClick(this.props.item)}},{key:"render",value:function e(){var t=this.props.item;var a=b()("c-lazy_filter_select__item",{"c-lazy_filter_select__item--active":this.props.active,"c-lazy_filter_select__item--selected":this.props.selected,"c-lazy_filter_select__item--child":t.isChild,"c-lazy_filter_select__item--group":t.group,"c-lazy_filter_select__item--disabled":this.props.disabled},this.props.customClasses);var r="lfs-item-"+t.id;var n=this.props.dataQaPrefix+"-item-"+t.id;var i=m.a.createElement("div",{className:a,"data-id":t.id,"data-qa":n,id:r,onClick:this.onClickHandler,onMouseLeave:this.props.onMouseLeave,onMouseMove:this.props.onMouseMove,role:"option",style:this.props.style,tabIndex:"-1",key:"list-item-"+t.id},this.props.template(t));if(this.props.disabled){var s=A.t("Cannot be removed");return m.a.createElement(T["c"],{position:"top",tip:s},i)}return i}}]);return t}(v["PureComponent"]);R.displayName="LazyFilterSelectListItem";var M=R;R.defaultProps=P;var D=new E["b"]("channel_options");var x={dataQaPrefix:h["b"].string,disabled:h["b"].bool,highlighted:h["b"].bool,item:h["b"].object,onClick:h["b"].func,onHighlight:h["b"].func,single:h["b"].bool,template:h["b"].func};var F={dataQaPrefix:"lfs",disabled:false,highlighted:false,item:{},onClick:y["noop"],onHighlight:y["noop"],single:false,template:function e(t){return t.label}};var L=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClickHandler=a.onClickHandler.bind(a);return a}l()(t,[{key:"onClickHandler",value:function e(t){if(this.props.disabled||this.props.single)return;var a=t.clientX;var r=t.target.getBoundingClientRect();t.stopPropagation();a>r.width+r.left?this.props.onClick(this.props.item):this.props.onHighlight(this.props.item)}},{key:"render",value:function e(){var t=this.props.item;var a=b()("c-lazy_filter_select__token","c-lazy_filter_select__token--selected",{"c-lazy_filter_select__token--single":this.props.single,"c-lazy_filter_select__token--highlighted":this.props.highlighted,"c-lazy_filter_select__token--disabled":this.props.disabled});var r=t.slugId?t.slugId:t.id;var n="lfs-token-"+r;var i=this.props.dataQaPrefix+"-item-"+r;var s=m.a.createElement("div",{className:a,"data-id":r,"data-qa":i,id:n,key:"token-"+t.id,onClick:this.onClickHandler,tabIndex:-1},this.props.template(t));if(this.props.disabled){var o=D.t("Cannot be removed");return m.a.createElement(T["c"],{position:"top",tip:o},s)}return s}}]);return t}(v["PureComponent"]);L.displayName="LazyFilterSelectToken";var B=L;L.defaultProps=F;var U=a(2137);var q=new E["b"]("lazy_filter_select");var G={default:"normal",filter_in_list:"filter_in_list",normal:"normal",small:"small"};var W={allowItemUnselect:h["b"].bool,allowListPositionAbove:h["b"].bool,alwaysVisible:h["b"].bool,approxDividerHeight:h["b"].number,approxItemHeight:h["b"].number,dataPromise:h["b"].func,dataQaPrefix:h["b"].string,disabled:h["b"].bool,dividerTemplate:h["b"].func,filter:h["b"].func,forceListAbove:h["b"].bool,items:h["b"].array,inputClasses:h["b"].string,listItemClass:h["b"].func,maxHeightOfList:h["b"].number,maxSelectedItems:h["b"].number,noDefaultSelection:h["b"].bool,noResultsTemplate:h["b"].func,onInputBlur:h["b"].func,onInputFocus:h["b"].func,onItemAdded:h["b"].func,onItemRemoved:h["b"].func,onKeyDown:h["b"].func,onKeyUp:h["b"].func,onListHidden:h["b"].func,onListShown:h["b"].func,onMaxItemsSelected:h["b"].func,onReady:h["b"].func,onValueChange:h["b"].func,placeholderText:h["b"].string,restrictPreselectedItemRemoval:h["b"].bool,scrollThreshold:h["b"].number,single:h["b"].bool,sluggifyEnabled:h["b"].bool,sluggifyDelimiter:h["b"].any,sluggifyKeyName:h["b"].string,sluggifyValidator:h["b"].func,styling:h["b"].oneOf(Object(y["values"])(G)),tabToNav:h["b"].bool,template:h["b"].func,tokenTemplate:h["b"].func,hideList:h["b"].bool,preventScroll:h["b"].bool,setSelected:h["b"].bool};var H={alwaysVisible:false,allowItemUnselect:true,allowListPositionAbove:false,approxDividerHeight:30,approxItemHeight:30,dataPromise:null,dataQaPrefix:"lfs",disabled:false,dividerTemplate:function e(t){return t.label},filter:function e(t,a){return t.toLowerCase().indexOf(a)>-1},forceListAbove:false,items:[],inputClasses:null,listItemClass:y["noop"],maxHeightOfList:250,maxSelectedItems:Infinity,noDefaultSelection:false,noResultsTemplate:function e(t){return q.rt("No items matched <strong>{query}</strong>",{query:t})},onInputBlur:y["noop"],onInputFocus:y["noop"],onItemAdded:y["noop"],onItemRemoved:y["noop"],onKeyDown:y["noop"],onKeyUp:y["noop"],onListHidden:y["noop"],onListShown:y["noop"],onMaxItemsSelected:y["noop"],onReady:y["noop"],onValueChange:y["noop"],placeholderText:q.t("Choose an option\u2026"),restrictPreselectedItemRemoval:false,scrollThreshold:1e3,single:false,sluggifyEnabled:false,sluggifyDelimiter:null,sluggifyKeyName:"",sluggifyValidator:y["noop"],styling:G.default,tabToNav:false,template:function e(t){return t.label},tokenTemplate:function e(t){return t.label},hideList:false,preventScroll:void 0,setSelected:true};var V=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.fetchInitialList=a.fetchInitialList.bind(a);a.filterItems=a.filterItems.bind(a);a.getSelectedValue=a.getSelectedValue.bind(a);a.handlePromiseReturn=a.handlePromiseReturn.bind(a);a.hideList=a.hideList.bind(a);a.isRunningPromisePending=a.isRunningPromisePending.bind(a);a.listItemRenderer=a.listItemRenderer.bind(a);a.listNoRowsRenderer=a.listNoRowsRenderer.bind(a);a.onBlurInput=a.onBlurInput.bind(a);a.onChangeInput=a.onChangeInput.bind(a);a.onClickContainer=a.onClickContainer.bind(a);a.onClickItem=a.onClickItem.bind(a);a.onFocusInput=a.onFocusInput.bind(a);a.onFocusInputContainer=a.onFocusInputContainer.bind(a);a.onKeyDownInput=a.onKeyDownInput.bind(a);a.onKeyUpInput=a.onKeyUpInput.bind(a);a.onListScroll=a.onListScroll.bind(a);a.onMouseDownListContainer=a.onMouseDownListContainer.bind(a);a.onMouseLeaveContainer=a.onMouseLeaveContainer.bind(a);a.onMouseLeaveItem=a.onMouseLeaveItem.bind(a);a.onMouseMoveItem=a.onMouseMoveItem.bind(a);a.onMouseUpListContainer=a.onMouseUpListContainer.bind(a);a.onTokenClick=a.onTokenClick.bind(a);a.onTokenHighlight=a.onTokenHighlight.bind(a);a.runQuery=a.runQuery.bind(a);a.setListRef=a.setListRef.bind(a);a.showList=a.showList.bind(a);a.inputIsFocused=a.props.alwaysVisible;a.mouse={};a.pageNumber=1;a.preventBlur=false;a.slugIdCounter=0;a.itemMapById={};var r=[];var n=[];if(!a.props.dataPromise){var i=a.processItems(a.props.items);r=i.currentItems;n=i.selected}a.state={activeItemKey:null,currentItems:r,cursorHighlightedItem:null,listVisible:a.props.alwaysVisible,previousVal:"",runningPromise:null,selected:n};return a}l()(t,[{key:"componentDidMount",value:function e(){this.props.dataPromise&&this.fetchInitialList();this.inputIsFocused&&this.input.focus();this.props.onReady(this)}},{key:"componentDidUpdate",value:function e(t){this.inputIsFocused&&this.input.focus();t.hideList&&!this.props.hideList&&this.showList();this.props.hideList&&this.hideList()}},{key:"onClickContainer",value:function e(){this.input.focus();this.inputIsFocused=true;this.showList()}},{key:"onKeyDownInput",value:function e(t){if(this.props.disabled)return;var a=false;switch(_()(t)){case"down":t.preventDefault();a=true;this.selectDown();break;case"up":t.preventDefault();a=true;this.selectUp();break;case"enter":t.preventDefault();a=true;this.selectActiveItem();break;case"del":case"delete":case"backspace":if(""===this.state.previousVal){t.preventDefault();a=true;this.state.cursorHighlightedItem?this.removeSelected(this.state.cursorHighlightedItem):this.removeLastSelected()}break;case"tab":if(this.props.tabToNav){t.preventDefault();a=true;t.shiftKey?this.selectUp():this.selectDown()}break;case"esc":this.hideList();this.input.blur();break;default:break}this.props.onKeyDown(t,a)}},{key:"onKeyUpInput",value:function e(t){if(this.props.disabled)return;var a=false;var r=t.target,n=r.selectionStart,i=r.selectionEnd;var s=n===i&&0===n;switch(_()(t)){case"left":s&&this.maybeHighlightPreviousSelectedItem();break;case"right":s&&this.state.cursorHighlightedItem&&this.maybeHightlightNextSelectedItem();break;default:this.resetHighlightedSelectedItem();break}this.props.onKeyUp(t,a)}},{key:"onMouseDownListContainer",value:function e(){this.preventBlur=true}},{key:"onMouseLeaveContainer",value:function e(){this.preventBlur=false}},{key:"onMouseMoveItem",value:function e(t){if(this.props.disabled)return;var a=this.mouse;var r={lastX:t.clientX,lastY:t.clientY};if(Object(y["isEqual"])(a,r))return;var n=t.target.getAttribute("data-id");this.mouse=r;this.setState(function(){return{activeItemKey:n}});this.List.forceUpdateGrid()}},{key:"onMouseLeaveItem",value:function e(t){var a=null;var r=this.state.mouse;var n={lastX:t.clientX,lastY:t.clientY};if(Object(y["isEqual"])(r,n))return;this.setState(function(){return{activeItemKey:a}})}},{key:"onMouseUpListContainer",value:function e(){this.preventBlur&&this.input.focus()}},{key:"onBlurInput",value:function e(){this.preventBlur||this.hideList();this.inputIsFocused=false;this.props.onInputBlur()}},{key:"onFocusInput",value:function e(){if(this.inputIsFocused||this.props.disabled)return;this.showList();this.props.onInputFocus()}},{key:"onFocusInputContainer",value:function e(){this.input.focus({preventScroll:this.props.preventScroll});this.onFocusInput()}},{key:"onChangeInput",value:function e(t){var a=this;var r=null;var n=t.target.value;this.pageNumber=1;var i=void 0;if(w(this.props)&&n.match(this.props.sluggifyDelimiter)){var s=n.split(this.props.sluggifyDelimiter);s.forEach(function(e){e.length&&a.addUserCreatedSlugFromString(e)});var o=false;var l=this.processItems(this.props.items,o);i=l.currentItems;n=""}else i=this.runQuery(n);this.setState(function(){return{activeItemKey:r,currentItems:i,previousVal:n}});this.List.forceUpdateGrid();this.List.scrollToRow(0)}},{key:"onClickItem",value:function e(t){if(this.props.disabled)return;if(!this.isItemSelectable(t.id))return;var a=this.state.selected.slice();if(!this.props.single&&this.props.allowItemUnselect&&this.isItemSelected(t)){this.removeSelected(t);return}if(!j(this.state.selected.length,this.props.maxSelectedItems))return;this.props.single&&(a=[]);a.push(t);var r=!this.props.single||this.props.alwaysVisible;this.inputIsFocused=!this.props.single;var n="";this.preventBlur=false;this.setState(function(){return{listVisible:r,previousVal:n,selected:a}});this.List.forceUpdateGrid();this.props.onItemAdded(t);this.props.onValueChange(a);a.length>=this.props.maxSelectedItems&&this.props.onMaxItemsSelected()}},{key:"onListScroll",value:function e(t){var a=t.scrollTop;if(this.props.dataPromise){var r=this.calculateListHeight();var n=r-a;n<=this.props.scrollThreshold&&a>0&&this.loadMoreItems()}}},{key:"onTokenClick",value:function e(t){this.removeSelected(t)}},{key:"onTokenHighlight",value:function e(t){this.setState(function(e){var a=t;e.cursorHighlightedItem&&e.cursorHighlightedItem.id===t.id&&(a=null);return n()({},e,{cursorHighlightedItem:a})})}},{key:"getSelectedValue",value:function e(){return this.state.selected}},{key:"setListRef",value:function e(t){this.List=t}},{key:"getItemById",value:function e(t){return this.itemMapById[t]||false}},{key:"maybeHightlightNextSelectedItem",value:function e(){var t=this.state.selected;if(!t.length)return;var a=this.state.cursorHighlightedItem;var r=0;if(a){r=Object(y["findIndex"])(t,function(e){return e.id===a.id&&e.slugId===a.slugId})+1;r>t.length&&(r=null)}if(null!==r){a=Object(y["findLast"])(t,function(e){return!e.group},r);Object(y["isEqual"])(this.state.cursorHighlightedItem,a)&&(a=null);a?this.setState(function(){return{cursorHighlightedItem:a}}):this.resetHighlightedSelectedItem()}else this.resetHighlightedSelectedItem()}},{key:"maybeHighlightPreviousSelectedItem",value:function e(){var t=this.state.selected;if(!t.length)return;var a=this.state.cursorHighlightedItem;var r=t.length-1;a&&(r=Object(y["findIndex"])(t,function(e){return e.id===a.id&&e.slugId===a.slugId})-1);if(r>=0){a=Object(y["findLast"])(t,function(e){return!e.group},r);a&&this.setState(function(){return{cursorHighlightedItem:a}})}}},{key:"resetHighlightedSelectedItem",value:function e(){this.setState(function(){return{cursorHighlightedItem:null}})}},{key:"handlePromiseReturn",value:function e(t){var a=t.items;this.setState(function(){return{runningPromise:null}});if(!a.length){this.List.forceUpdateGrid();return[]}t.replace_all_items||(a=Object(y["uniqBy"])(this.state.currentItems.concat(a),"id"));this.processItems(a,this.props.setSelected);return a}},{key:"isRunningPromisePending",value:function e(){return this.state.runningPromise&&this.state.runningPromise.isPending()}},{key:"addUserCreatedSlugFromString",value:function e(t){if(!w(this.props))return;if(!j(this.state.selected.length,this.props.maxSelectedItems))return;var a=t.trim();if(!a)return;var r={};r[this.props.sluggifyKeyName]=a;r.id=null;r.label=a;r.slugId=String(this.slugIdCounter);this.slugIdCounter+=1;var n=this.props.sluggifyValidator(r);if(n||"undefined"===typeof n){var i=this.state.selected.slice();i.push(r);var s="";this.setState(function(){return{previousVal:s,selected:i}});this.props.onItemAdded(r);this.props.onValueChange(i);i.length>=this.props.maxSelectedItems&&this.props.onMaxItemsSelected()}}},{key:"removeUserCreatedSlug",value:function e(t){if(!w(this.props))return;var a=this.state.selected.slice();var r=Object(y["reject"])(a,function(e){return e.slugId===t.slugId});this.setState(function(){return{selected:r}});this.List.forceUpdateGrid();this.props.onItemRemoved(t);this.props.onValueChange(r)}},{key:"unsluggifySlug",value:function e(t){if(!w(this.props)||!S(t))return;var a=t.label;this.removeUserCreatedSlug(t);this.setState(function(){return{previousVal:a}})}},{key:"processItems",value:function e(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var r={canSlug:w(this.props),noDefaultSelection:this.props.noDefaultSelection};var n=I(t,r),i=n.currentItems,s=n.itemMapById,o=n.preselected;this.itemMapById=Object(y["merge"])(this.itemMapById,s);var l=this.state&&this.state.selected?this.state.selected:[];var c=Object(y["uniqBy"])(o.concat(l),"id");this.props.single&&c.length&&(c=c.slice(0,1));this.state&&(a?this.setState(function(){return{currentItems:i,selected:c}}):this.setState(function(){return{currentItems:i}}));return{currentItems:i,selected:c}}},{key:"isItemSelectable",value:function e(t){var a=this.getItemById(t);if(a.group)return false;if(a.preselected&&(this.props.restrictPreselectedItemRemoval||a.preselected.disabled))return false;if(this.props.allowItemUnselect)return true;return!this.isItemSelected(a)}},{key:"isItemSelected",value:function e(t){return this.state.selected.filter(function(e){if(t.slugId)return e.slugId===t.slugId;return e.id===t.id}).length>0}},{key:"listItemRenderer",value:function e(t){var a=t.index,r=t.key,n=t.style;var i=this.state.currentItems[a]||{};var s=this.state.activeItemKey===i.id;var o=i.preselected&&(this.props.restrictPreselectedItemRemoval||i.preselected.disabled)||i.disabled;var l=this.isItemSelected(i);var c=i.group?this.props.dividerTemplate:this.props.template;var u=this.props.listItemClass(i);return m.a.createElement(M,{active:s,dataQaPrefix:this.props.dataQaPrefix,disabled:o,item:i,key:"rlfs-list-item-"+r,onClick:this.onClickItem,onMouseLeave:this.onMouseLeaveItem,onMouseMove:this.onMouseMoveItem,selected:l,style:n,template:c,customClasses:u})}},{key:"listNoRowsRenderer",value:function e(){if(this.isRunningPromisePending())return m.a.createElement("div",{className:"c-lazy_filter_select__status c-lazy_filter_select__status--loading"},m.a.createElement(C["a"],{size:"large",className:"inline_block"}));return m.a.createElement("div",{className:"c-lazy_filter_select__status"},this.props.noResultsTemplate(this.state.previousVal))}},{key:"calculateListHeight",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var a=this.props.maxHeightOfList;var r=this.state.currentItems.length;var n=this.props.approxItemHeight;var i=r*n;var s=30;if(t)return Math.min(Math.max(i,s),a);return i}},{key:"filterItems",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.previousVal;var r=a.toLowerCase();var n=this.props.items;var i=[];n.forEach(function(e){if(e.group){var a=e.children.filter(function(e){return t.props.filter(e.label,r)});a.length&&(i=i.concat(e,a))}else t.props.filter(e.label,r)&&i.push(e)});return i}},{key:"hideList",value:function e(){if(this.props.alwaysVisible)return;var t=false;this.setState(function(){return{listVisible:t}});this.props.onListHidden()}},{key:"loadMoreItems",value:function e(){if(!this.props.dataPromise)return this.state.currentItems;var t=this.state.runningPromise;this.isRunningPromisePending()&&t.cancel("Scrolling happened");this.pageNumber+=1;t=this.props.dataPromise(this.state.previousVal,this.pageNumber).then(this.handlePromiseReturn);this.setState(function(){return{runningPromise:t}});return t}},{key:"removeLastSelected",value:function e(){var t=this.state.selected.slice(-1)[0];if(w(this.props)&&S(t)){this.unsluggifySlug(t);return}this.removeSelected(t)}},{key:"removeSelected",value:function e(t){if(!t||t.disabled)return;var a=this.state.selected.slice();if(S(t)){this.removeUserCreatedSlug(t);return}var r=Object(y["reject"])(a,function(e){return e.id===t.id});var n=this.state.currentItems.map(function(e){var a=e;a.id===t.id&&(a.preselected=false);return a});this.setState(function(){return{currentItems:n,cursorHighlightedItem:null,selected:r}});this.List.forceUpdateGrid();this.props.onItemRemoved(t);this.props.onValueChange(r)}},{key:"fetchInitialList",value:function e(){var t=this;if(!this.props.dataPromise)return;var a=this.state.runningPromise;this.isRunningPromisePending()&&a.cancel("Uhhh ... ?");a=this.props.dataPromise("",this.pageNumber).then(function(e){var a=e.items;var r=t.processItems(a);var n=r.currentItems,i=r.selected;t.setState(function(){return{currentItems:n,selected:i,runningPromise:null}})});this.setState(function(){return{runningPromise:a}})}},{key:"runQuery",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.previousVal;if(this.props.dataPromise){var a=this.state.runningPromise;this.isRunningPromisePending()&&a.cancel("User entered more text");this.pageNumber=1;a=this.props.dataPromise(t,this.pageNumber).then(this.handlePromiseReturn);this.setState(function(){return{runningPromise:a}});return[]}return this.filterItems(t)}},{key:"selectDown",value:function e(){if(this.props.disabled)return;this.state.listVisible||this.showList();var t=this.state.currentItems;if(!t)return;var a=this.state.activeItemKey;var r=0;if(a){r=Object(y["findIndex"])(t,function(e){return e.id===a})+1;r>t.length&&(r=t.length)}var n=Object(y["find"])(t,function(e){return!e.group},r);if(n){a=n.id;r=Object(y["findIndex"])(t,function(e){return e.id===n.id});this.setState(function(){return{activeItemKey:a}});this.List.forceUpdateGrid();this.List.scrollToRow(r)}}},{key:"selectUp",value:function e(){if(this.props.disabled)return;this.state.listVisible||this.showList();var t=this.state.currentItems;if(!t)return;var a=this.state.activeItemKey;var r=t.length-1;if(a){r=Object(y["findIndex"])(t,function(e){return e.id===a})-1;r<0&&(r=0)}var n=Object(y["findLast"])(t,function(e){return!e.group},r);if(n){a=n.id;r=Object(y["findIndex"])(t,function(e){return e.id===n.id});this.setState(function(){return{activeItemKey:a}});this.List.forceUpdateGrid();this.List.scrollToRow(r)}}},{key:"selectActiveItem",value:function e(){var t=this.state.activeItemKey;if(!t)return;if(!j(this.state.selected.length,this.props.maxSelectedItems))return;if(!this.isItemSelectable(t))return;var a=this.getItemById(t);if(!this.props.single&&this.props.allowItemUnselect&&this.isItemSelected(a)){this.removeSelected(a);return}var r=this.state.selected.slice();this.props.single&&(r=[]);r.push(a);var n=!this.props.single;this.inputIsFocused=!this.props.single;var i="";this.preventBlur=false;this.setState(function(){return{listVisible:n,previousVal:i,selected:r}});this.List.forceUpdateGrid();this.props.onItemAdded(a);this.props.onValueChange(r);r.length>=this.props.maxSelectedItems&&this.props.onMaxItemsSelected()}},{key:"showList",value:function e(){if(this.state.listVisible||this.props.disabled)return;!this.props.dataPromise||this.state.previousVal||this.state.currentItems.length||this.fetchInitialList();this.props.preventScroll||(this.inputIsFocused=true);var t=true;var a=this.state.previousVal;this.props.single&&!this.props.alwaysVisible&&(a="");this.setState(function(){return{listVisible:t,previousVal:a}});this.props.onListShown()}},{key:"renderSelected",value:function e(){var t=this;var a="";if(!(this.props.single&&this.state.listVisible)||this.props.alwaysVisible){var r=this.state.cursorHighlightedItem;a=this.state.selected.map(function(e){var a=e.id||e.slugId;var n=r&&r.id===e.id&&r.slugId===e.slugId;var i=e.preselected&&(t.props.restrictPreselectedItemRemoval||e.preselected.disabled)||e.disabled;return m.a.createElement(B,{dataQaPrefix:t.props.dataQaPrefix,disabled:i,highlighted:n,item:e,key:"rlfs-token-"+a,onClick:t.onTokenClick,onHighlight:t.onTokenHighlight,single:t.props.single,template:t.props.tokenTemplate})})}return a}},{key:"render",value:function e(){var t=this;var a=b()("c-lazy_filter_select","c-lazy_filter_select--"+this.props.styling,{"c-lazy_filter_select--single":this.props.single});var r=b()("c-lazy_filter_select__input_container",this.props.inputClasses,{"c-lazy_filter_select__input_container--active":this.inputIsFocused,"c-lazy_filter_select__input_container--value":this.state.selected.length});var i=b()("c-lazy_filter_select__list_container",{"c-lazy_filter_select__list_container--visible":this.state.listVisible,"c-lazy_filter_select__list_container--above":this.props.forceListAbove});var s=this.props.dataQaPrefix+"-value";var o=this.props.dataQaPrefix+"-input-value";var l={"aria-autocomplete":"list","aria-owns":"c-lazy_filter_select__list_container","aria-expanded":this.state.listVisible,role:"combobox"};if(this.state.cursorHighlightedItem){var c=this.state.cursorHighlightedItem;var u=c.id||c.slugId;l["aria-activedescendant"]="lfs-token-"+u}else this.state.activeItemKey&&(l["aria-activedescendant"]="lfs-item-"+this.state.activeItemKey);var d=this.state.selected.length?"":this.props.placeholderText;var p={};this.state.previousVal.length?p.size=this.state.previousVal.length+1:this.state.selected.length&&(p.size=1);return m.a.createElement("div",{className:a,"data-qa":this.props.dataQaPrefix,onClick:this.onClickContainer,onMouseLeave:this.onMouseLeaveContainer,role:"presentation"},m.a.createElement("div",{className:r,"data-qa":s,onFocus:this.onFocusInputContainer,onBlur:this.onBlurInput},m.a.createElement("div",{className:"c-lazy_filter_select__value"},this.renderSelected(),m.a.createElement("input",n()({},l,p,{className:"c-lazy_filter_select__input c-input_text","data-qa":o,onBlur:this.onBlurInput,onChange:this.onChangeInput,onFocus:this.onFocusInput,onKeyDown:this.onKeyDownInput,onKeyUp:this.onKeyUpInput,placeholder:d,ref:function e(a){t.input=a},type:"text",value:this.state.previousVal})))),m.a.createElement(O["a"],null,function(e){var a=e.width;return m.a.createElement("div",{className:i,id:"c-lazy_filter_select__list_container",onMouseDown:t.onMouseDownListContainer,onMouseUp:t.onMouseUpListContainer,role:"listbox"},m.a.createElement("div",{className:"c-lazy_filter_select__list"},m.a.createElement(k["a"],{height:t.calculateListHeight(true),noRowsRenderer:t.listNoRowsRenderer,onScroll:t.onListScroll,ref:t.setListRef,rowCount:t.state.currentItems.length,rowHeight:t.props.approxItemHeight,rowRenderer:t.listItemRenderer,width:a-10})))}))}}]);return t}(v["PureComponent"]);V.displayName="LazyFilterSelect";var K=t["a"]=V;V.defaultProps=H},,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return s});a.d(t,"b",function(){return o});var r=a(20);var n=Object(r["b"])("TS.ui.needToBlockAtChannelKeyword");var i=Object(r["b"])("TS.ui.needToShowAtChannelWarning");var s=Object(r["b"])("TS.ui.showVersionInfo");var o=Object(r["b"])("TS.ui.teamSelectionChanged")},function(e,t,a){"use strict";a.d(t,"b",function(){return p});a.d(t,"a",function(){return v});var r=a(1);var n=a.n(r);var i=a(13);var s=a(4);var o=a(23);var l=a(67);var c=a(41);var u=a(516);var d=function e(t,a){var r=a.ts,n=a.channelId;var i=Object(l["a"])(t,n,r);Object(s["isFeatureEnabled"])(t,"feature_message_history_cfm")&&r&&Object(u["d"])(Object(o["c"])(t),n,r);return{msg:i}};function p(e){return Object(i["connect"])(d)(function(t){if(!t.msg)return null;return n.a.createElement(e,t)})}var h=function e(t,a){var r=a.ts,n=a.prevTs,i=a.channelId;var d=Object(l["a"])(t,i,r);var p=Object(l["a"])(t,i,n);if(Object(s["isFeatureEnabled"])(t,"feature_message_history_cfm")){var h=Object(o["c"])(t);r&&Object(u["d"])(h,i,r);n&&Object(u["d"])(h,i,n)}return{msg:d,adjacent:Object(c["isAdjacentMessage"])(t,d,p)}};function v(e){return Object(i["connect"])(h)(function(t){if(!t.msg)return null;return n.a.createElement(e,t)})}},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(1);var v=a.n(h);var m=a(0);var f=a(2);var b=a(16);var g=a.n(b);var _=a(28);var y=a(187);var O=a(3192);var k={className:m["b"].string,imageUrl:m["b"].string,imageUrl2x:m["b"].string,title:m["b"].string,description:m["b"].node.isRequired,primaryActionText:m["b"].string,onClickPrimaryAction:m["b"].func,secondaryActionText:m["b"].string,onClickSecondaryAction:m["b"].func};var E={className:void 0,imageUrl:void 0,imageUrl2x:void 0,title:"",primaryActionText:"",secondaryActionText:"",onClickPrimaryAction:f["noop"],onClickSecondaryAction:f["noop"]};var C=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"render",value:function e(){var t=g()(this.props.className,"c-empty_state");var a=void 0;this.props.imageUrl&&this.props.imageUrl2x&&(a={srcSet:this.props.imageUrl+", "+this.props.imageUrl2x+" 2x"});return v.a.createElement("div",{role:"presentation",className:t},this.props.imageUrl&&v.a.createElement("div",{className:"c-empty_state__image_wrapper"},v.a.createElement("img",n()({},a,{src:this.props.imageUrl,className:"c-empty_state__image",alt:""}))),!!this.props.title.length&&v.a.createElement("div",{className:"c-empty_state__title"},this.props.title),v.a.createElement("div",{className:"c-empty_state__description"},this.props.description),this.props.primaryActionText&&v.a.createElement("div",{className:"c-empty_state__action","data-qa":"empty_state_primary_action"},v.a.createElement(_["d"],{type:"outline",onClick:this.props.onClickPrimaryAction},this.props.primaryActionText)),this.props.secondaryActionText&&v.a.createElement("div",{className:"c-empty_state__secondary_action","data-qa":"empty_state_secondary_action"},v.a.createElement(y["a"],{onClick:this.props.onClickSecondaryAction},this.props.secondaryActionText)))}}]);return t}(h["PureComponent"]);C.displayName="EmptyState";C.defaultProps=E;var j=C;var w=t["a"]=j},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var r=a(1400),n=a(2158),i=a(2159);function s(e){var t=-1,a=null==e?0:e.length;this.__data__=new r;while(++t<a)this.add(e[t])}s.prototype.add=s.prototype.push=n;s.prototype.has=i;e.exports=s},function(e,t,a){var r=a(2141),n=a(2153),i=a(2155),s=a(2156),o=a(2157);function l(e){var t=-1,a=null==e?0:e.length;this.clear();while(++t<a){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r;l.prototype["delete"]=n;l.prototype.get=i;l.prototype.has=s;l.prototype.set=o;e.exports=l},function(e,t,a){var r=a(1030),n=a(524);var i=r(n,"Map");e.exports=i},function(e,t){function a(e,t){return e.has(t)}e.exports=a},function(e,t){function a(e){var t=-1,a=Array(e.size);e.forEach(function(e){a[++t]=e});return a}e.exports=a},function(e,t,a){var r=a(502),n=a(1405);var i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function o(e,t){if(r(e))return false;var a=typeof e;if("number"==a||"symbol"==a||"boolean"==a||null==e||n(e))return true;return s.test(e)||!i.test(e)||null!=t&&e in Object(t)}e.exports=o},function(e,t,a){var r=a(755),n=a(682);var i="[object Symbol]";function s(e){return"symbol"==typeof e||n(e)&&r(e)==i}e.exports=s},function(e,t,a){"use strict";function r(e){return function(){return e}}var n=function e(){};n.thatReturns=r;n.thatReturnsFalse=r(false);n.thatReturnsTrue=r(true);n.thatReturnsNull=r(null);n.thatReturnsThis=function(){return this};n.thatReturnsArgument=function(e){return e};e.exports=n},function(e,t,a){"use strict";var r=function e(t){};false;function n(e,t,a,n,i,s,o,l){r(t);if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[a,n,i,s,o,l];var d=0;c=new Error(t.replace(/%s/g,function(){return u[d++]}));c.name="Invariant Violation"}c.framesToPop=1;throw c}}e.exports=n},function(e,t,a){"use strict";t.__esModule=true;var r=a(882);var n=j(r);var i=a(6);var s=j(i);var o=a(8);var l=j(o);var c=a(9);var u=j(c);var d=a(3);var p=j(d);var h=a(1);var v=j(h);var m=a(828);var f=j(m);var b=a(1660);var g=j(b);var _=a(2274);var y=j(_);var O=a(1658);var k=j(O);var E=a(2275);var C=j(E);function j(e){return e&&e.__esModule?e:{default:e}}function w(e,t,a){var r=e.nodeType,n=e.data,i=e.collectionLimit,s=e.circularCache,o=e.keyPath,l=e.postprocessValue,c=e.sortObjectKeys;var u=[];(0,y["default"])(r,n,c,i,t,a).forEach(function(t){if(t.to)u.push(v["default"].createElement(C["default"],(0,p["default"])({},e,{key:"ItemRange--"+t.from+"-"+t.to,from:t.from,to:t.to,renderChildNodes:w})));else{var a=t.key,r=t.value;var n=-1!==s.indexOf(r);var c=v["default"].createElement(k["default"],(0,p["default"])({},e,{postprocessValue:l,collectionLimit:i},{key:"Node--"+a,keyPath:[a].concat(o),value:l(r),circularCache:[].concat(s,[r]),isCircular:n,hideRoot:false}));false!==c&&u.push(c)}});return u}function S(e){var t=!(!e.shouldExpandNode||e.isCircular)&&e.shouldExpandNode(e.keyPath,e.data,e.level);return{expanded:t}}var I=function(e){(0,u["default"])(t,e);function t(a){(0,s["default"])(this,t);var r=(0,l["default"])(this,e.call(this,a));r.handleClick=function(){r.props.expandable&&r.setState({expanded:!r.state.expanded})};r.state=S(a);return r}t.prototype.componentWillReceiveProps=function e(t){var a=S(t);S(this.props).expanded!==a.expanded&&this.setState(a)};t.prototype.shouldComponentUpdate=function e(t,a){var r=this;return!!(0,n["default"])(t).find(function(e){return"circularCache"!==e&&("keyPath"===e?t[e].join("/")!==r.props[e].join("/"):t[e]!==r.props[e])})||a.expanded!==this.state.expanded};t.prototype.render=function e(){var t=this.props,a=t.getItemString,r=t.nodeTypeIndicator,n=t.nodeType,i=t.data,s=t.hideRoot,o=t.createItemString,l=t.styling,c=t.collectionLimit,u=t.keyPath,d=t.labelRenderer,h=t.expandable;var m=this.state.expanded;var f=m||s&&0===this.props.level?w((0,p["default"])({},this.props,{level:this.props.level+1})):null;var b=v["default"].createElement("span",l("nestedNodeItemType",m),r);var _=a(n,i,b,o(i,c));var y=[u,n,m,h];return s?v["default"].createElement("li",l.apply(void 0,["rootNode"].concat(y)),v["default"].createElement("ul",l.apply(void 0,["rootNodeChildren"].concat(y)),f)):v["default"].createElement("li",l.apply(void 0,["nestedNode"].concat(y)),h&&v["default"].createElement(g["default"],{styling:l,nodeType:n,expanded:m,onClick:this.handleClick}),v["default"].createElement("label",(0,p["default"])({},l.apply(void 0,[["label","nestedNodeLabel"]].concat(y)),{onClick:this.handleClick}),d.apply(void 0,y)),v["default"].createElement("span",(0,p["default"])({},l.apply(void 0,["nestedNodeItemString"].concat(y)),{onClick:this.handleClick}),_),v["default"].createElement("ul",l.apply(void 0,["nestedNodeChildren"].concat(y)),f))};return t}(v["default"].Component);I.propTypes={getItemString:f["default"].func.isRequired,nodeTypeIndicator:f["default"].any,nodeType:f["default"].string.isRequired,data:f["default"].any,hideRoot:f["default"].bool.isRequired,createItemString:f["default"].func.isRequired,styling:f["default"].func.isRequired,collectionLimit:f["default"].number,keyPath:f["default"].arrayOf(f["default"].oneOfType([f["default"].string,f["default"].number])).isRequired,labelRenderer:f["default"].func.isRequired,shouldExpandNode:f["default"].func,level:f["default"].number.isRequired,sortObjectKeys:f["default"].oneOfType([f["default"].func,f["default"].bool]),isCircular:f["default"].bool,expandable:f["default"].bool};I.defaultProps={data:[],circularCache:[],level:0,expandable:true};t["default"]=I},function(e,t){function a(e,t,a){return Math.min(Math.max(e,t),a)}e.exports=a},,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(2);var l=a.n(o);var c=a(0);var u=a(36);var d=a(717);var p;var h=Object(u["b"])((p={},n()(p,d["innerAddCustomEmoji"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.teamId,r=t.cacheTs,i=t.emojis,l=t.aliases;if(!a||!r||!i&&!l)return e;var c={};Object(o["forEach"])(i,function(e,t){if(!e||!t)return;c[t]={url:e}});Object(o["forEach"])(l,function(e,t){if(!e||!t)return;c[t]={aliasOf:e}});var u=e[a]&&e[a].customEmoji||{};var d=e[a]&&e[a].cacheTs;if(Object(o["isEmpty"])(c)||d===r)return e;return s()({},e,n()({},a,{customEmoji:s()({},u,c),cacheTs:r}))}),n()(p,d["bulkRemoveCustomEmoji"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.teamId,r=t.cacheTs,i=t.names;if(!e[a]||!r||Object(o["isEmpty"])(i))return e;var l=Object(o["omit"])(e[a].customEmoji,i);return s()({},e,n()({},a,{customEmoji:l,cacheTs:r}))}),n()(p,d["renameCustomEmoji"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.teamId,r=t.cacheTs,i=t.prevName,l=t.nextName;if(!i||!l||!e[a]||!e[a].customEmoji||!e[a].customEmoji[i]||!r)return e;var c=s()({},e[a].customEmoji);c[l]=s()({},c[i]);delete c[i];Object(o["forEach"])(c,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.aliasOf;var a=arguments[1];t===i&&(c[a]=s()({},c[a],{aliasOf:l}))});return s()({},e,n()({},a,{customEmoji:c,cacheTs:r}))}),p),{},{persistenceEnabled:true});h.propTypes=c["b"].objectOf(c["b"].shape({cacheTs:c["b"].string,customEmoji:c["b"].objectOf(c["b"].shape({url:c["b"].string}))}));t["a"]=h},,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return h});var r=a(146);var n=a(23);var i=a(35);var s=a(24);var o=a(17);var l=a(31);var c=a(184);var u=a(33);var d=a(57);var p=function e(t,a,r){return"USD"===t&&a!==u["e"].UNITED_STATES&&"es-ES"!==r&&"fr-FR"!==r};var h=function e(t){var a=Object(n["c"])(t);var u=Object(i["i"])(t,a);var h=Object(l["getTeamDisplayName"])(u);var v=Object(o["isRestricted"])(Object(s["b"])(t));var m=Object(r["selectActiveCurrency"])(t);var f=Object(d["f"])();var b=p(m,Object(c["getCompanyAddressCountry"])(t),f);var g=Object(r["selectActiveProductId"])(t);var _={teamName:h,isUserRestricted:v,yearlyPlanCostPerTerm:Object(r["selectCostPerTermForYearlyPlan"])(t),monthlyPlanCostPerTerm:Object(r["selectCostPerTermForMonthlyPlan"])(t),availableCurrencies:Object(r["selectAvailableCurrencies"])(t),planCostPerTerm:Object(r["selectActivePlanCostPerTerm"])(t),planIsYearly:Object(r["selectActivePlanIsYearly"])(t),numMonthsPerPlan:Object(r["selectActivePlanMonthsCount"])(t),planCurrency:m,numBillableMembers:Object(r["selectBillableActiveUsers"])(t),numInactiveMembers:Object(r["selectInactiveUsers"])(t),isZeroActiveMembers:Object(r["isZeroRealActiveUsers"])(t),totalMembers:Object(r["selectTotalUsers"])(t),paidSeats:Object(r["selectPaidSeats"])(t),tax:Object(r["selectTax"])(t),teamCredits:Object(r["selectCurrentTeamCredits"])(t),currentTeamCredits:Object(r["selectCurrentTeamCredits"])(t),totalCost:Object(r["selectSubtotal"])(t),totalCostWithTax:Object(r["selectTotalRecurring"])(t),totalRecurringTax:Object(r["selectTotalRecurringTax"])(t),isCostValid:Object(r["isCostValid"])(t),didCostFetchFail:Object(r["isAPIError"])(t),isPlansAndCostDataLoaded:Object(r["selectIsPlansAndCostDataLoaded"])(t),showCurrencyLabel:b,activeProductId:g};return _}},,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(0);var s=a(15);var o=a(48);var l=a(25);var c=a(29);var u=Object(l["a"])("Fetch the active message pane banner for this team/user, if any",function(e,t,a){return e(Object(c["a"])({method:"surveys.submit",reason:"submit-survey-feedback",args:a}))});u.propTypes={type:i["b"].string,response:i["b"].string};var d=u;var p=a(6);var h=a.n(p);var v=a(7);var m=a.n(v);var f=a(8);var b=a.n(f);var g=a(9);var _=a.n(g);var y=a(13);var O=a(10);var k=a(4);var E=a(84);var C=new O["b"]("survey_dialog");var j={featurePlansPageTrialI18n:i["b"].bool};var w={featurePlansPageTrialI18n:false};var S=function(e){_()(t,e);function t(){h()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){if(!this.props.featurePlansPageTrialI18n)return null;return n.a.createElement(E["a"],{title:C.t("Thanks for the feedback!"),showCancelButton:false,goButtonType:"outline",goButtonText:C.t("Close"),shouldCloseOnOverlayClick:false},n.a.createElement("p",null,C.t("We\u2019ll pass your feedback along to the team. Thanks for taking the time to share it with us.")))}}]);return t}(r["PureComponent"]);S.displayName="SurveyConfirm";S.defaultProps=w;var I=function e(t){return{featurePlansPageTrialI18n:Object(k["isFeatureEnabled"])(t,"feature_plans_page_trial_i18n")}};var T=Object(y["connect"])(I)(S);a.d(t,"submitSurvey",function(){return A});var A=Object(s["b"])("Opens survey feedback confirmation dialog",function(e,t,a){e(d(a)).then(function(){e(Object(o["closeModal"])());e(Object(o["openModal"])({element:n.a.createElement(T),name:"SURVEY_CONFIRM"}))})});A.propTypes={type:i["b"].string,response:i["b"].string}},,,,function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(95);var o=a(10);var l=a(1043);var c=new o["b"]("pricing_calculator");var u={planIsYearly:i["b"].bool,formattedPlanCost:i["b"].string,billedMembers:i["b"].number,numInactiveMembers:i["b"].number,isInvoice:i["b"].bool};var d={planIsYearly:true,formattedPlanCost:"",billedMembers:0,numInactiveMembers:0,isInvoice:false};function p(e){var t=e.planIsYearly,a=e.billedMembers,r=e.numInactiveMembers,i=e.formattedPlanCost,s=e.isInvoice;var o=n.a.createElement(l["a"],{type:"times-small",className:"sk_light_gray"});var u=r&&!s?c.rt("{billedMembers, plural, =1 {# active member} other {# active members}}",{billedMembers:a}):c.rt("{billedMembers, plural, =1 {# member} other {# members}}",{billedMembers:a});var d=t?c.t("1 year"):c.t("1 month");return n.a.createElement("div",{className:"display_flex flex_wrap align_items_center"},n.a.createElement("div",null,i),o,n.a.createElement("div",null,u),o,n.a.createElement("div",null,d))}p.displayName="SubtotalCalculation";p.defaultProps=d;t["a"]=Object(s["pure"])(p)},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",function(){return o});var r=a(0);var n=a(25);var i=a(29);var s=a(38);var o=Object(n["a"])("Calls users.counts endpoint",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason,n=void 0===r?"users-counts-api/fetchUsersCounts":r;return e(Object(i["a"])({method:"users.counts",args:{mpim_aware:true,only_relevant_ims:true,simple_unreads:true,include_threads:true,mpdm_dm_users:Object(s["a"])()},reason:n})).then(function(e){if(!e||!e.ok)return{};var t=e.channels,a=e.groups,r=e.ims,n=e.mpims,i=e.threads;return{channels:t,groups:a,ims:r,mpims:n,threads:i}})});o.propTypes={reason:r["b"].string}},function(e,t,a){"use strict";a.d(t,"a",function(){return v});var r=a(0);var n=a(15);var i=a(24);var s=a(11);var o=a(12);var l=a(917);var c=a(308);var u=a(98);var d=a(19);var p=a(472);var h=a(505);var v=Object(n["b"])("Open a conversation by channel and member ID",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channel,n=a.user;var v=t();var m=Object(d["u"])(v,r)&&Object(d["d"])(v,r);if(!m){Object(o["a"])({getState:t}).error("Unknown channel "+r);return}e(Object(u["B"])({id:r,is_open:true}));if(Object(s["isIm"])(m)){var f=Object(i["m"])(v,n)&&Object(i["d"])(v,n);if(!f){Object(o["a"])({getState:t}).error("Unknown member "+n);return}}if(Object(l["getShouldBecomeActive"])(t(),n||r)){var b=Object(l["getPendingMsgForChannel"])(t(),n||r);b&&e(Object(h["a"])({channelId:r,text:b}));e(Object(c["a"])({id:r}));e(Object(l["clearPendingOpenChannel"])({memberId:n,channelId:r}))}e(Object(u["B"])({id:r,opened_this_session:true}));Object(s["isIm"])(m)&&Object(p["b"])(Object(d["d"])(t(),r))});v.propTypes={channelId:r["b"].string,memberId:r["b"].string}},function(e,t,a){"use strict";var r=a(0);var n=a(13);var i=a(40);var s=a.n(i);var o=a(10);var l=a(357);var c=a(834);var u=new o["b"]("enterprise_dashboard");var d={getRelativeTimestamp:r["b"].func.isRequired};function p(e){var t=e.timestamp,a=e.getRelativeTimestamp;if(0===t)return u.t("Never");var r=s()();var n=s.a.unix(t);var i=r.diff(n,"h");if(i>23)return Object(l["a"])(n,"{date} at {time}");var o=r.diff(n,"m");var c=void 0;c=0===o?u.t("a few seconds ago"):o>59?u.t("{hours, plural, =1 {1 hour} other {# hours}} ago",{hours:i}):u.t("{minutes, plural, =1 {1 minute} other {# minutes}} ago",{minutes:o});return a(t)+" ("+c+")"}p.propTypes=d;var h=function e(t){return{getRelativeTimestamp:function e(a){return 0===a?"":Object(c["a"])(t,a,{uncapitalized:false})}}};t["a"]=Object(n["connect"])(h)(p)},function(e,t,a){"use strict";var r=a(0);var n=a(2);var i=a.n(n);var s=a(15);var o=a(259);var l=a(331);var c=a(35);var u=a(23);var d=a(87);function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.existingFields,a=void 0===t?[]:t,r=e.fields,i=void 0===r?[]:r;var s=Object(n["keyBy"])(a,"id");return Object(n["filter"])(i,function(e){return e.possible_values&&void 0!==s[e.id]&&"options_list"===s[e.id].type&&Object(n["some"])(s[e.id].possible_values,function(t){return-1===e.possible_values.indexOf(t)})})}var h=Object(s["b"])("Update profile fields in a team and its members if necessary",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.teamId,n=a.fields,i=void 0===n?[]:n;var s=t();var d=r||Object(u["c"])(s);var h=false;var v=Object(c["i"])(s,d,h);if(v&&v.profile&&v.profile.fields){e(Object(l["j"])({teamId:d,fields:i}));var m=p({existingFields:v.profile.fields,fields:i});m.length>0&&e(Object(o["d"])({fields:m}))}});h.propTypes=r["b"].shape({teamId:r["b"].string,fields:r["b"].arrayOf(d["a"].TeamProfileField).isRequired});t["a"]=h},function(e,t,a){"use strict";var r=a(0);var n=a(15);var i=a(259);var s=a(331);var o=a(23);var l=Object(n["b"])("delete profile fields from a team and its members",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.teamId,n=a.fieldsToDelete,l=void 0===n?[]:n;var c=t();var u=r||Object(o["c"])(c);e(Object(s["a"])({teamId:u,fieldsToDelete:l}));e(Object(i["e"])({fieldsToDelete:l}))});l.propTypes=r["b"].shape({teamId:r["b"].string,fieldsToDelete:r["b"].arrayOf(r["b"].string).isRequired});t["a"]=l},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(1255);var s=a.n(i);var o=a(1682);var l=a.n(o);var c=Object(i["createDevTools"])(n.a.createElement(l.a,{expandActionRoot:false,expandStateRoot:false}));t["a"]=c},,function(e,t,a){"use strict";a.r(t);var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(2);var l=a.n(o);var c=a(0);var u=a(36);var d=a(120);var p=a(11);var h;function v(e){if(!e||!e.id)return false;if(Object(p["isIm"])(e)&&!e.name&&!Object(p["getMemberIdFromIm"])(e))return false;if(Object(p["isMpim"])(e)&&!e.name&&!e._internal_name)return false;if(!e.name)return false;return true}function m(e,t){if(!t||!t.id||Object(p["isFromAnotherTeam"])(t))return e;if(Object(p["isIm"])(t)&&Object(p["getMemberIdFromIm"])(t)){var a=Object(p["getMemberIdFromIm"])(t);var r=e.ims[a];var n=t.id;if(r&&r>n)return e}e=f(e,t.id);var i=t.id;var s=l.a.toLower(t.name);var o={};if(Object(p["isIm"])(t)&&Object(p["getMemberIdFromIm"])(t)){var c=Object(p["getMemberIdFromIm"])(t);e.ims[c]=i;e.ims[s]=i;o.ims=[c,s]}else if(Object(p["isMpim"])(t)&&t._internal_name){var u=t._internal_name;e.mpims[u]=i;e.mpims[s]=i;o.mpims=[u,s]}else{e.channelsAndGroups[s]=i;o.channelsAndGroups=[s]}e.reverseMap[i]=o;return e}function f(e,t){if(!t)return e;if(!e.reverseMap||!e.reverseMap[t]||l.a.isEmpty(e.reverseMap[t]))return e;var a=s()({},e);var r=e.reverseMap[t];Object.keys(r).forEach(function(e){var t=r[e];if(!t||!t.length)return;t.forEach(function(t){delete a[e][t]})});a.reverseMap[t]={};return a}function b(e,t){if(!t||!t.length||!l.a.isArray(t))return e;var a=l.a.filter(t,v);if(!a.length)return e;var r={channelsAndGroups:s()({},e.channelsAndGroups),ims:s()({},e.ims),mpims:s()({},e.mpims),reverseMap:s()({},e.reverseMap)};a.forEach(function(e){m(r,e)});return r}var g={channelsAndGroups:{},ims:{},mpims:{},reverseMap:{}};var _=Object(u["b"])((h={},n()(h,d["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channels,r=t.reason;if(!r)return e;return b(e,a)}),n()(h,d["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ids;if(!a||!a.length)return e;var r={channelsAndGroups:s()({},e.channelsAndGroups),ims:s()({},e.ims),mpims:s()({},e.mpims),reverseMap:s()({},e.reverseMap)};a.forEach(function(e){f(r,e)});return r}),h),g,{persistenceEnabled:true});_.propTypes={channelsAndGroups:c["b"].objectOf(c["b"].string),ims:c["b"].objectOf(c["b"].string),mpims:c["b"].objectOf(c["b"].string),reverseMap:c["b"].objectOf(c["b"].shape({channelsAndGroups:c["b"].arrayOf(c["b"].string),ims:c["b"].arrayOf(c["b"].string),mpims:c["b"].arrayOf(c["b"].string)}))};t["default"]=_},function(e,t,a){"use strict";a.r(t);a.d(t,"setMarkingState",function(){return m});a.d(t,"clearAllMarkingFlags",function(){return f});a.d(t,"clearMarkingFlagsForIds",function(){return b});a.d(t,"getAllIdsNeedingMarking",function(){return y});a.d(t,"getAllUnmutedIdsNeedingMarking",function(){return O});a.d(t,"getAllMutedIdsNeedingMarking",function(){return k});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(2);var l=a.n(o);var c=a(0);var u=a(18);var d=a(36);var p=a(14);var h=a(217);var v;var m=Object(u["b"])("Update the apiNeedsMarking flag for a channel");m.propTypes={id:c["b"].string.isRequired,needsApiMarking:c["b"].bool.isRequired};var f=Object(u["b"])("Wipe out all API needs marking flags when they are all completed");f.propTypes=null;var b=Object(u["b"])("Remove API needs marking flags for specified IDs");b.propTypes=c["b"].arrayOf(c["b"].string).isRequired;var g={};var _=Object(d["b"])((v={},n()(v,m,function(e,t){if(t.needsApiMarking)return s()({},e,n()({},t.id,t.needsApiMarking));return l.a.omit(e,t.id)}),n()(v,f,function(e){if(l.a.isEqual(e,g))return e;return g}),n()(v,b,function(e,t){if(l.a.isEqual(e,g))return e;return l.a.omit(e,t)}),v),g,{persistenceEnabled:true});_.propTypes=c["b"].objectOf(c["b"].bool);t["default"]=_;var y=Object(p["b"])(function(e){var t=e&&e.channelsMeta&&e.channelsMeta.needsApiMarking;if(!t)return[];return l.a.keys(t)});var O=Object(p["b"])(function(e){var t=y(e);return l.a.filter(t,function(t){return!Object(h["isChannelMutedById"])(e,t)})});var k=Object(p["b"])(function(e){var t=y(e);return l.a.filter(t,function(t){return Object(h["isChannelMutedById"])(e,t)})})},function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(0);var s=a(36);var o=a(1155);var l={};var c=Object(s["b"])(n()({},o["a"],function(e,t){return t}),l,{persistenceEnabled:true});c.propTypes=i["b"].object;t["a"]=c},,,function(e,t,a){"use strict";var r=a(250);var n=a(23);var i=a(27);var s=a(538);var o=a(26);var l=a.n(o);var c=a(6);var u=a.n(c);var d=a(7);var p=a.n(d);var h=a(288);var v=a(1260);var m=a(243);var f=a(294);var b=m["a"].INTERNAL_SERVER_ERROR,g=m["a"].TOO_MANY_REQUESTS,_=m["a"].UNAVAILABLE_FOR_LEGAL_REASONS,y=m["a"].TIMEOUT,O=m["a"].UNKNOWN;var k=1e3;var E=10;var C=5;var j=10;var w=function e(){return Promise.delay(5e3)};var S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.maxMsBetweenTicks,r=void 0===a?k:a,n=t.maxActiveRequests,i=void 0===n?E:n,o=t.maxActiveRequestsPerMethod,l=void 0===o?C:o,c=t.errorThreshold,d=void 0===c?j:c,p=t.shouldMeasure,v=void 0!==p&&p,m=t.isOnline,f=void 0===m?function(){return true}:m,b=t.isClientOnline,g=void 0===b?function(){return Object(s["b"])()}:b,_=t.reconnectService,y=void 0===_?w:_,O=t.reconnectClient,S=void 0===O?w:O;u()(this,e);this._maxMsBetweenTicks=r;this._maxActiveRequests=i;this._maxActiveRequestsPerMethod=l;this._errorThreshold=d;this._shouldMeasure=v;this._isOnline=f;this._isClientOnline=g;this._requestsActive=[];this._requestsEnqueued=[];this._emptyPromise=void 0;this._resolveEmptyPromise=Promise.resolve;this._consecutiveServiceErrors=0;this._consecutiveClientErrors=0;this._requestAccepts=0;this._requestRejects=0;this._queueDepths=[0];this._isPaused=false;this._nextScheduledTick=void 0;this._reconnectService=y;this._reconnectClient=S;this._tick=this._tick.bind(this);this._resetEmptyPromise=this._resetEmptyPromise.bind(this);Object(h["a"])(this)}p()(e,[{key:"_resetEmptyPromise",value:function e(){this._emptyPromise=void 0;this._resolveEmptyPromise=Promise.resolve}},{key:"_resetErrorCounts",value:function e(){this._consecutiveServiceErrors=0;this._consecutiveClientErrors=0}},{key:"_countSuccess",value:function e(){this._resetErrorCounts();this._requestAccepts+=1}},{key:"_countError",value:function e(t){this._consecutiveServiceErrors=t>=b?this._consecutiveServiceErrors+1:0;this._consecutiveClientErrors=t===O?this._consecutiveClientErrors+1:0;(t>=b||t===g||t===y)&&(this._requestRejects+=1)}},{key:"_passedErrorThreshold",value:function e(){if(this._consecutiveServiceErrors>=this._errorThreshold){this._pauseToReconnect(this._reconnectService);return true}if(this._consecutiveClientErrors>=this._errorThreshold||!this._isClientOnline()){this._pauseToReconnect(this._reconnectClient);return true}return false}},{key:"_pauseToReconnect",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w;this._pause();a().then(function(){t._unpause()}).catch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Error("Could not reconnect and resume ApiQ.");throw e})}},{key:"_pause",value:function e(){this._isPaused=true}},{key:"_unpause",value:function e(){this._isPaused=false;this._resetErrorCounts();this._tick()}},{key:"_enqueue",value:function e(t){var a=t.request,r=t.resolve,n=t.reject,i=t.expedited;if(!a.enqueue())return false;var s={request:a,resolve:r,reject:n};i?this._requestsEnqueued.unshift(s):this._requestsEnqueued.push(s);this._tick();return true}},{key:"_tick",value:function e(){if(this.isPaused())return;window.clearTimeout(this._nextScheduledTick);this._nextScheduledTick=window.setTimeout(this._tick,this._maxMsBetweenTicks);if(this._passedErrorThreshold()||!this._isOnline()||this._requestsActiveFull())return;var t=this._getNext();t&&this._activate(t);this._emptyPromise&&this._isEmpty()&&this._resolveEmptyPromise()}},{key:"_activate",value:function e(t){var a=this;var r=t.request,n=t.resolve,i=t.reject;this._shouldMeasure&&this._queueDepths.push(this._requestsEnqueued.length);this._requestsActive.push(r);r.send().finally(function(){a._maybeDequeueAndTick(r)}).then(function(e){n(e);a._countSuccess()}).catch(function(e){var n=e.status,s=e.retryAfter;n===_&&Object(f["a"])({reason:"451-service-unavailable-for-legal-reasons"});var o=r.shouldRetry()&&a._enqueue(t);if(o)window.setTimeout(a._tick,s);else{r.reject();i(e)}a._countError(n)})}},{key:"_maybeDequeueAndTick",value:function e(t){var a=this._requestsActive.indexOf(t);a>=0&&this._requestsActive.splice(a,1);var r=this._requestsEnqueued.indexOf(t);r>=0&&this._requestsEnqueued.splice(r,1);(a>=0||r>=0)&&this._tick()}},{key:"_getNext",value:function e(){var t=this;if(!this._requestsEnqueued.length)return null;var a=this._requestsEnqueued.findIndex(function(e){var a=e.request;return t._isFair(a)&&a.canRetryNow()});return a>=0&&this._requestsEnqueued.splice(a,1)[0]}},{key:"_getUnfairMethods",value:function e(){var t=this;var a=[];var r={};this._requestsActive.forEach(function(e){var n=e.method;r[n]=r[n]?r[n]+1:1;r[n]===t._maxActiveRequestsPerMethod&&a.push(n)});return a}},{key:"_getOrCreateEmptyPromise",value:function e(){var t=this;this._emptyPromise||(this._emptyPromise=new Promise(function(e){t._resolveEmptyPromise=e}));return this._emptyPromise}},{key:"_isValid",value:function e(t){return t instanceof v["a"]}},{key:"_isFair",value:function e(t){var a=t.method;return!this._getUnfairMethods().includes(a)}},{key:"_isEmpty",value:function e(){return 0===this._requestsEnqueued.length&&0===this._requestsActive.length}},{key:"_requestsActiveFull",value:function e(){return this._requestsActive.length>=this._maxActiveRequests}},{key:"debugServiceDisconnect",value:function e(){this._consecutiveServiceErrors=this._errorThreshold+1}},{key:"getStats",value:function e(){return{requestAccepts:this._requestAccepts,requestRejects:this._requestRejects,totalRequests:this._requestAccepts+this._requestRejects,maxQueueDepth:Math.max.apply(Math,l()(this._queueDepths))}}},{key:"clearStats",value:function e(){this._requestAccepts=0;this._requestRejects=0;this._queueDepths=[0]}},{key:"isPaused",value:function e(){return this._isPaused}},{key:"awaitEmptyQ",value:function e(){return this._isEmpty()?Promise.resolve():this._getOrCreateEmptyPromise().finally(this._resetEmptyPromise)}},{key:"stop",value:function e(){window.clearTimeout(this._nextScheduledTick);this._nextScheduledTick=void 0;this._pause()}},{key:"restart",value:function e(){this.isPaused()&&this._unpause()}},{key:"q",value:function e(t){var a=this;var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._isValid(t))return Promise.reject(new Error("Tried to enqueue an invalid request object. This is a programming error."));return new Promise(function(e,n,i){if(!a._enqueue({request:t,resolve:e,reject:n,expedited:r})){n(new Error("Tried and failed to enqueue a request object."));return}i(function(){t.cancel();a._maybeDequeueAndTick(t)})})}}]);return e}();var I=S;var T=a(424);var A=a(12);var N=a(38);var P=a(65);var R=a(29);var M=a(1304);var D=a(1172);function x(e){var t=e.teamId,a=e.q,r=e.dispatch;Object(P["exportToTeamDebugger"])(t,"api",{q:a,call:function e(t){return r(Object(R["a"])(t))},callExpedited:function e(t){return r(Object(R["b"])(t))}})}function F(e){var t=e.teamId,a=e.q,r=e.dispatch;Object(P["exportToTeamDebugger"])(t,"grapevine",{q:a,call:function e(t){return r(Object(M["a"])(t))}})}function L(e){var t=e.teamId,a=e.q,r=e.dispatch;Object(P["exportToTeamDebugger"])(t,"flannel",{q:a,call:function e(t){return r(Object(D["a"])(t))}})}var B=a(1196);var U=a(320);var q=a(195);var G=a(4);var W=a(71);var H=a(228);var V=a(15);var K=5e3;var z=Object(H["a"])(1);var Y=null;var Q=null;var J=Object(V["b"])("Resolves only when we have established and upserted client online status",function(e){return e(Object(U["d"])()).catch(function(){var t=new Promise(function(t){Y=window.setTimeout(function(){t(e(J()))},K)});return t})});J.propTypes=null;var Z=Object(V["b"])("Resolves only when we have established and upserted client online status",function(e){if(!Q){z&&Object(W["a"])().mark("api_connectivity_lost");Q=e(J()).tap(function(){z&&Object(W["a"])().measureAndClear("api_connectivity_lost","api_connectivity_lost")}).finally(function(){clearTimeout(Y);Q=null;Y=null})}return Q});Z.propTypes=null;var X=Z;var $={};Object.defineProperties($,{awaitServiceReconnectionTimeout:{get:function e(){return Y},set:function e(t){Y=t}},awaitServiceReconnectionPromise:{get:function e(){return Q},set:function e(t){Q=t}},retryServiceConnection:{get:function e(){return J}},DEFAULT_RECONNECTION_RETRY_AFTER_MS:{get:function e(){return K}},shouldRecordTimingData:{get:function e(){return z},set:function e(t){z=t}}});var ee=a(1265);a.d(t,"b",function(){return ce});var te="API-Q";var ae="api_q_pause_service_offline";var re="api_q_pause_service_offline_total_time";var ne="api_q_pause_client_offline";var ie="api_q_pause_unpause";var se={};var oe=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.dispatch,n=a.getState;if(!se[t]){var o=Object(A["a"])({teamId:t});var l=Object(H["a"])(1);var c=Object(W["c"])({getState:n});var u=new I({shouldMeasure:l,isOnline:function e(){return Object(q["d"])(n())},isClientOnline:function e(){if(Object(G["isFeatureEnabled"])(n(),"feature_connectivity_manager"))return Object(q["c"])(n());return Object(s["b"])()},reconnectService:function e(){var t=Object(G["isFeatureEnabled"])(n(),"feature_connectivity_manager")&&Object(N["a"])()?Object(i["b"])().dispatch:r;t(Object(U["b"])(false));o.info(te,"Pausing queue because service is offline");c.count(ae);c.mark(re);if(Object(G["isFeatureEnabled"])(n(),"feature_connectivity_manager"))return t(X()).finally(function(){o.info(te,"Unpausing queue, back online");c.count(ie);c.measureAndClear(re)});return Object(s["c"])().then(function(){r(Object(U["b"])(true));r(Object(U["a"])(true));o.info(te,"Unpausing queue, back online");c.count(ie);c.measureAndClear(re)})},reconnectClient:function e(){var t=Object(G["isFeatureEnabled"])(n(),"feature_connectivity_manager")&&Object(N["a"])()?Object(i["b"])().dispatch:r;t(Object(U["a"])(false));o.info(te,"Pausing queue because client is offline");c.count(ne);if(Object(G["isFeatureEnabled"])(n(),"feature_connectivity_manager"))return t(Object(ee["a"])()).finally(function(){o.info(te,"Unpausing queue, back online");c.count(ie)});return Object(s["c"])().then(function(){r(Object(U["b"])(true));r(Object(U["a"])(true));o.info(te,"Unpausing queue, back online");c.count(ie)})}});se[t]=u;x({teamId:t,q:u,dispatch:r});F({teamId:t,q:u,dispatch:r});L({teamId:t,q:u,dispatch:r});l&&setInterval(function(){var e=u.getStats(),t=e.requestAccepts,a=e.requestRejects,r=e.totalRequests,n=e.maxQueueDepth;c.count("api_q_successful_requests",t);c.count("api_q_rejected_requests",a);c.count("api_q_total_requests",r);c.count("api_q_max_queue_depth",n);c.count("api_q_successful_request_percentage",Math.floor(t/r*100));u.clearStats()},6e4)}return se[t]};var le=Object(r["b"])("Dispatches requests to the API Queue",function(e,t,a){var r=e.dispatch;var i=e.getState();var s=Object(n["c"])(i);switch(a.type){case T["d"].getType():Object(A["a"])({state:i}).info("Halting the API queue");var o=oe(s,e);o.stop();return;case T["c"].getType():Object(A["a"])({state:i}).info("Restarting the API queue");var l=oe(s,e);l.restart();return;case T["b"].getType():var c=a.payload,u=c.request,d=c.expedited,p=void 0!==d&&d;r(Object(B["updateLastNetworkSend"])());var h=Object(P["getFromGlobalDebugger"])("networkDelay.api")||0;var v=oe(s,e);return Promise.delay(h,v.q(u,p));case T["a"].getType():var m=oe(s,e);return m.awaitEmptyQ();default:return t(a)}});function ce(e){var t=Object(n["c"])(e);return se[t]}var ue={};Object.defineProperties(ue,{instances:{get:function e(){return se},set:function e(t){se=t}},getOrCreateInstance:{get:function e(){return oe},set:function e(t){oe=t}}});var de=t["a"]=le},function(e,t,a){"use strict";var r=a(58);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(6);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var h=a(9);var v=a.n(h);var m=a(1);var f=a.n(m);var b=a(13);var g=a(2);var _=a(0);var y=a(138);var O=a(31);var k=a(35);var E=a(10);var C=a(84);var j=a(51);var w=a(707);var S=a(92);var I=a(16);var T=a.n(I);var A=a(96);var N=a(22);var P=a(2299);var R=new E["b"]("pricing_plans");var M={planTopFeatures:_["b"].array.isRequired,featureBringPlansPageToSsbTranslations:_["b"].bool};var D={featureBringPlansPageToSsbTranslations:false};var x=function(e){v()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"render",value:function e(){var t=this.props,a=t.planTopFeatures,r=t.featureBringPlansPageToSsbTranslations;if(!r)return null;return f.a.createElement("div",{className:"p-pricing_plan_top_features"},f.a.createElement("div",{className:"p-pricing_plan_top_features__title"},R.t("Top features:")),f.a.createElement("ul",{className:"p-pricing_plan_top_features__list"},a.map(function(e){return f.a.createElement("li",{key:e.id,className:"p-pricing_plan_top_features__item"},f.a.createElement(N["b"],{type:"check-small",className:"p-pricing_plan_top_features__item_icon",inline:true}),f.a.createElement("span",null,e.description))})))}}]);return t}(m["Component"]);x.displayName="PricingPlanTopFeatures";x.defaultProps=D;var F=Object(y["a"])("feature_bring_plans_page_to_ssb_translations")(x);var L=a(381);var B=a(2301);var U=new E["b"]("pricing_plans");var q={planCostPerMemberBilledAnnually:_["b"].number.isRequired,planCostPerMemberBilledMonthly:_["b"].number.isRequired,planCurrency:_["b"].string.isRequired,featureBringPlansPageToSsbTranslations:_["b"].bool};var G={featureBringPlansPageToSsbTranslations:false};var W=function(e){v()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"render",value:function e(){var t=this.props,a=t.planCostPerMemberBilledAnnually,r=t.planCostPerMemberBilledMonthly,n=t.planCurrency,i=t.featureBringPlansPageToSsbTranslations;if(!i)return null;return f.a.createElement("div",{className:"p-pricing_plan_cost_details"},f.a.createElement("div",{className:"p-pricing_plan_cost_details__title"},U.t("Pricing")),f.a.createElement("div",null,U.t("{formattedCost} per member per month if billed annually",{formattedCost:Object(L["a"])(a,n)})),f.a.createElement("div",null,U.t("{formattedCost} per member per month if billed monthly",{formattedCost:Object(L["a"])(r,n)})))}}]);return t}(m["PureComponent"]);W.displayName="PricingPlanCostDetails";W.defaultProps=G;var H=Object(y["a"])("feature_bring_plans_page_to_ssb_translations")(W);var V=a(2303);var K={planDescription:_["b"].object.isRequired,planCurrency:_["b"].string,planCostPerMemberBilledAnnually:_["b"].number,planCostPerMemberBilledMonthly:_["b"].number,showPlanCostDetails:_["b"].bool,isPlansDataLoaded:_["b"].bool,planTopFeatures:_["b"].array.isRequired,featureBringPlansPageToSsbTranslations:_["b"].bool};var z={planCurrency:null,planCostPerMemberBilledAnnually:0,planCostPerMemberBilledMonthly:0,showPlanCostDetails:true,isPlansDataLoaded:false,featureBringPlansPageToSsbTranslations:false};var Y=function(e){v()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"renderPricingPlanCostDetails",value:function e(){var t=this.props,a=t.planCurrency,r=t.planCostPerMemberBilledAnnually,n=t.planCostPerMemberBilledMonthly;if(!a||!r||!n)return null;return f.a.createElement(H,{planCurrency:a,planCostPerMemberBilledAnnually:r,planCostPerMemberBilledMonthly:n})}},{key:"render",value:function e(){var t=this.props,a=t.planDescription,r=t.showPlanCostDetails,n=t.planTopFeatures,i=t.isPlansDataLoaded,s=t.featureBringPlansPageToSsbTranslations;if(!s)return null;var o=T()("p-pricing_plan_summary",{"p-pricing_plan_summary--loading":!i});return f.a.createElement("div",{className:o},!i&&f.a.createElement(A["a"],{size:"jumbo","data-qa":"pricing_plan_summary_loader"}),i&&f.a.createElement(m["Fragment"],null,f.a.createElement("div",{className:"p-pricing_plan_summary__description"},a),r&&this.renderPricingPlanCostDetails(),f.a.createElement(F,{planTopFeatures:n})))}}]);return t}(m["Component"]);Y.displayName="PricingPlanSummary";Y.defaultProps=z;var Q=Object(y["a"])("feature_bring_plans_page_to_ssb_translations")(Y);var J=a(341);var Z=a(190);var X=a(45);var $=a(21);var ee=a(2305);var te=new E["b"]("pricing_plans");var ae={onClose:_["b"].func,standardPlanProductId:_["b"].string.isRequired,plusPlanProductId:_["b"].string.isRequired,standardPlanCostPerMemberBilledMonthly:_["b"].number.isRequired,standardPlanCostPerMemberBilledAnnually:_["b"].number.isRequired,plusPlanCostPerMemberBilledMonthly:_["b"].number.isRequired,plusPlanCostPerMemberBilledAnnually:_["b"].number.isRequired,planCurrency:_["b"].string.isRequired,team:_["b"].object.isRequired,loadPlansData:_["b"].func.isRequired,source:_["b"].string,clogger:_["b"].object.isRequired,featureBringPlansPageToSsbTranslations:_["b"].bool};var re={onClose:g["noop"],source:null,featureBringPlansPageToSsbTranslations:false};var ne=function(e){v()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={selectedPricingPlan:S["d"].standard.id,isPlansDataLoaded:false};Object(g["bindAll"])(a,["onPricingPlanChange","onGoButtonClick","onClickContactSales","onClickFooterLink","onClosePricingPlansModal"]);return a}u()(t,[{key:"componentDidMount",value:function e(){var t=this;this.state.isPlansDataLoaded||this.props.loadPlansData().then(function(){return t.setIsPlansDataLoaded(true)});this.clogPricingPlanModalEvent({step:$["z"].PRICING_PLANS_DIALOG_STANDARD_PLAN,action:$["v"].IMPRESSION,source:this.props.source})}},{key:"onPricingPlanChange",value:function e(t){if(this.state.selectedPricingPlan===t)return;this.setState(function(e){return s()({},e,{selectedPricingPlan:t})});this.clogPricingPlanModalEvent({step:this.getPricingPlanClogStep(this.state.selectedPricingPlan),action:$["v"].CLICK,elementType:$["j"].TAB,elementName:"pricing_plans_"+t+"_tab"})}},{key:"onGoButtonClick",value:function e(){switch(this.state.selectedPricingPlan){case S["d"].plus.id:this.redirectToCheckoutPage(this.props.plusPlanProductId);break;case S["d"].enterprise.id:this.redirectToContactSalesPage();break;case S["d"].standard.id:default:this.redirectToCheckoutPage(this.props.standardPlanProductId);break}this.clogPricingPlanModalEvent({step:this.getPricingPlanClogStep(this.state.selectedPricingPlan),action:$["v"].CLICK,elementType:$["j"].BUTTON,elementName:"pricing_plans_"+this.state.selectedPricingPlan+"_main_cta"})}},{key:"onClickContactSales",value:function e(){Object(O["openAuthenticatedUrlInBrowser"])(this.props.team,S["b"]);this.clogPricingPlanModalEvent({step:this.getPricingPlanClogStep(this.state.selectedPricingPlan),action:$["v"].CLICK,elementType:$["j"].LINK,elementName:"pricing_plans_enterprise_contact_sales_link"})}},{key:"onClickFooterLink",value:function e(t){t.preventDefault();Object(O["openAuthenticatedUrlInBrowser"])(this.props.team,S["f"]);this.clogPricingPlanModalEvent({step:this.getPricingPlanClogStep(this.state.selectedPricingPlan),action:$["v"].CLICK,elementType:$["j"].LINK,elementName:"pricing_plans_info_footer_link"})}},{key:"onClosePricingPlansModal",value:function e(){this.clogPricingPlanModalEvent({step:this.getPricingPlanClogStep(this.state.selectedPricingPlan),action:$["v"].CLOSE});this.props.onClose()}},{key:"getStandardPlanDescription",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return null;return te.rt("<strong>Standard</strong> is the plan for small- and medium-sized businesses that want to maximize their productivity with Slack.")}},{key:"getStandardPlanTopFeatures",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return[];return[{id:1,description:te.t("Smarter, unlimited search")},{id:2,description:te.t("Unlimited apps")},{id:3,description:te.t("Group calls with screen sharing")},{id:4,description:te.t("Guest accounts & shared channels")}]}},{key:"getPlusPlanDescription",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return[];return te.rt("<strong>Plus</strong> is the plan for larger or regulated businesses with additional administrative and compliance needs.")}},{key:"getPlusPlanTopFeatures",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return[];return[{id:1,description:te.t("99% guaranteed uptime SLA")},{id:2,description:te.t("User provisioning and deprovisioning")},{id:3,description:te.t("SAML-based single sign-on (SSO)")},{id:4,description:te.t("Corporate exports for all messages")}]}},{key:"getEnterprisePlanDescription",value:function e(){var t=this;if(!this.props.featureBringPlansPageToSsbTranslations)return[];return te.rt("<strong>Enterprise Grid</strong> is the plan that lets businesses connect multiple Slack workspaces across their company. <Link>Contact Sales</Link> for pricing.",null,function(e){var a=e.tag,r=e.text;if("Link"===a)return f.a.createElement(j["a"],{onClick:t.onClickContactSales,"data-qa":"pricing_plans_modal_contact_sales_link"},r);return null})}},{key:"getEnterprisePlanTopFeatures",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return[];return[{id:1,description:te.t("Unlimited workspaces")},{id:2,description:te.t("Support data loss prevention (DLP), e-Discovery and offline backup providers")},{id:3,description:te.t("Designated customer success teams")},{id:4,description:te.t("Shared channels between workspaces")}]}},{key:"getPricingPlansTabConfig",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return[];return[{id:S["d"].standard.id,title:te.t("Standard"),content:f.a.createElement(m["Fragment"],null),"data-qa":"standard_pricing_plan_tab"},{id:S["d"].plus.id,title:te.t("Plus"),content:f.a.createElement(m["Fragment"],null),"data-qa":"plus_pricing_plan_tab"},{id:S["d"].enterprise.id,title:te.t("Enterprise Grid"),content:f.a.createElement(m["Fragment"],null),"data-qa":"enterprise_grid_pricing_plan_tab"}]}},{key:"getGoButtonText",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return null;if(this.state.selectedPricingPlan===S["d"].enterprise.id)return te.t("Contact Us");return te.t("Upgrade Now")}},{key:"setIsPlansDataLoaded",value:function e(t){this.setState(function(e){return s()({},e,{isPlansDataLoaded:t})})}},{key:"getPricingPlanClogStep",value:function e(t){var a=$["z"].PRICING_PLANS_DIALOG_STANDARD_PLAN;t===S["d"].plus.id?a=$["z"].PRICING_PLANS_DIALOG_PLUS_PLAN:t===S["d"].enterprise.id&&(a=$["z"].PRICING_PLANS_DIALOG_ENTERPRISE_PLAN);return a}},{key:"clogPricingPlanModalEvent",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.step,r=t.action,n=t.elementType,i=t.elementName,s=t.source;var o={step:a,action:r};n&&i&&(o.ui_properties={element_type:n,element_name:i});s&&(o.entry_point=s);this.props.clogger.track($["k"].PRICING_PLANS_DIALOG,{contexts:{ui_context:o}})}},{key:"redirectToContactSalesPage",value:function e(){Object(O["openAuthenticatedUrlInBrowser"])(this.props.team,S["b"])}},{key:"redirectToCheckoutPage",value:function e(t){Object(O["openAuthenticatedUrlInBrowser"])(this.props.team,S["a"]+"?s=1&p="+t)}},{key:"renderPricingPlanContent",value:function e(){var t=f.a.createElement(m["Fragment"],null);switch(this.state.selectedPricingPlan){case S["d"].standard.id:t=f.a.createElement(Q,{planDescription:this.getStandardPlanDescription(),planCurrency:this.props.planCurrency,planCostPerMemberBilledAnnually:this.props.standardPlanCostPerMemberBilledAnnually,planCostPerMemberBilledMonthly:this.props.standardPlanCostPerMemberBilledMonthly,planTopFeatures:this.getStandardPlanTopFeatures(),isPlansDataLoaded:this.state.isPlansDataLoaded});break;case S["d"].plus.id:t=f.a.createElement(Q,{planDescription:this.getPlusPlanDescription(),planCurrency:this.props.planCurrency,planCostPerMemberBilledAnnually:this.props.plusPlanCostPerMemberBilledAnnually,planCostPerMemberBilledMonthly:this.props.plusPlanCostPerMemberBilledMonthly,planTopFeatures:this.getPlusPlanTopFeatures(),isPlansDataLoaded:this.state.isPlansDataLoaded});break;case S["d"].enterprise.id:t=f.a.createElement(Q,{planDescription:this.getEnterprisePlanDescription(),planTopFeatures:this.getEnterprisePlanTopFeatures(),showPlanCostDetails:false,isPlansDataLoaded:this.state.isPlansDataLoaded});break;default:}return t}},{key:"render",value:function e(){if(!this.props.featureBringPlansPageToSsbTranslations)return null;return f.a.createElement(C["a"],{className:"p-pricing_plans_modal",title:te.t("Level up with a premium plan"),cancelText:te.t("Close"),goButtonText:this.getGoButtonText(),onGo:this.onGoButtonClick,onClose:this.onClosePricingPlansModal,footerIcon:"question-circle",footerLink:"/"+S["f"],footerText:te.t("Compare plans and prices"),onFooterLinkClick:this.onClickFooterLink,shouldCloseOnGo:false,truncateTitle:false,"data-qa":"pricing_plans_modal"},f.a.createElement("div",{className:"p-pricing_plans_modal__content"},f.a.createElement(w["a"],{tabs:this.getPricingPlansTabConfig(),defaultTabId:this.state.selectedPricingPlan,onTabChange:this.onPricingPlanChange,fullWidthMenu:true}),this.renderPricingPlanContent()))}}]);return t}(m["Component"]);ne.displayName="PricingPlansModal";ne.defaultProps=re;var ie=function e(t){var a=Object(Z["t"])(t);var r=n()(a,1),i=r[0];return{team:Object(k["d"])(t),standardPlanProductId:Object(Z["e"])(t,i,S["e"].monthly,S["d"].standard.id,S["c"].CREDIT_CARD)||"",plusPlanProductId:Object(Z["e"])(t,i,S["e"].monthly,S["d"].plus.id,S["c"].CREDIT_CARD)||"",standardPlanCostPerMemberBilledMonthly:Object(Z["d"])(t,i,S["e"].monthly,S["d"].standard.id,S["c"].CREDIT_CARD)||0,standardPlanCostPerMemberBilledAnnually:Object(Z["d"])(t,i,S["e"].yearly,S["d"].standard.id,S["c"].CREDIT_CARD)||0,plusPlanCostPerMemberBilledMonthly:Object(Z["d"])(t,i,S["e"].monthly,S["d"].plus.id,S["c"].CREDIT_CARD)||0,plusPlanCostPerMemberBilledAnnually:Object(Z["d"])(t,i,S["e"].yearly,S["d"].plus.id,S["c"].CREDIT_CARD)||0,planCurrency:i||"",clogger:Object(X["a"])({state:t})}};var se=function e(t){return{loadPlansData:function e(){return t(Object(J["f"])())}}};var oe=t["a"]=Object(b["connect"])(ie,se)(Object(y["a"])("feature_bring_plans_page_to_ssb_translations")(ne))},,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(0);var p=a(1);var h=a.n(p);var v=a(13);var m=a(16);var f=a.n(m);var b=a(2);var g=a(4);var _=a(1489);var y=a(10);var O=a(444);var k=a(202);var E=a(2134);var C=new y["b"]("workspace_directory");var j={large:"large",small:"small"};var w={large:64,small:48};var S={team:d["b"].shape({id:d["b"].string,description:d["b"].string,discoverable:d["b"].string,name:d["b"].string,domain:d["b"].string,is_member:d["b"].bool,date_requested_join:d["b"].oneOfType([d["b"].string,d["b"].number]),icon:d["b"].object,is_inactive:d["b"].bool,user_counts:d["b"].object}).isRequired,size:d["b"].oneOf(Object(b["values"])(j)),featureZeroWorkspaceOnboarding:d["b"].bool.isRequired,className:d["b"].string,onActionReject:d["b"].func,onActionResolve:d["b"].func,anchorPage:d["b"].string,openDialog:d["b"].func,doLaunchInNewTab:d["b"].bool};var I={size:j.large,className:"",onActionResolve:b["noop"],onActionReject:b["noop"],anchorPage:"",openDialog:b["noop"],doLaunchInNewTab:false};var T=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onCardClick=a.onCardClick.bind(a);a.onKeyPress=a.onKeyPress.bind(a);a.onResize=a.onResize.bind(a);a.openDialog=a.openDialog.bind(a);a.state={isMobileView:false};return a}s()(t,[{key:"componentDidMount",value:function e(){this.setIsMobileView(Object(k["c"])());window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function e(){this.setIsMobileView(Object(k["c"])())}},{key:"onCardClick",value:function e(t){t.stopPropagation();t.preventDefault();this.isSmallVariationCard()&&this.openDialog()}},{key:"onKeyPress",value:function e(t,a){t.preventDefault();if("Enter"===t.key)switch(a){case"openDialog":if(this.isSmallVariationCard())return this.openDialog();break;default:}return null}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{isMobileView:t}})}},{key:"isSmallVariationCard",value:function e(){return this.props.size===j.small}},{key:"isLargeVariationCard",value:function e(){return this.props.size===j.large}},{key:"openDialog",value:function e(){var t=this.props,a=t.team,e=t.openDialog;e({team:a})}},{key:"renderAvatar",value:function e(){var t=this.props.team;var a=this.isLargeVariationCard()&&!this.state.isMobileView?w[j.large]:w[j.small];return h.a.createElement("div",{className:"display_flex"},h.a.createElement(O["a"],{entityType:"workspace",customClasses:this.isSmallVariationCard()?"cursor_pointer":"",dimension:a,entityData:t,featureReactMessages:true,featureReactMemberProfileCard:true}))}},{key:"renderWorkspaceName",value:function e(){var t=this.props.team.name;return h.a.createElement("span",{className:"p-workspace_directory_card__title","data-qa-ws-directory-card-title":true,title:t},t)}},{key:"renderWorkspaceSubtitle",value:function e(){var t=this.props,a=t.featureZeroWorkspaceOnboarding,r=t.team;if(!a)return null;var n=this.state.isMobileView;var i=r.date_requested_join,s=r.discoverable,o=r.domain,l=r.user_counts;l=void 0===l?{}:l;var c=l.active_members,u=void 0===c?0:c;var d=C.t("{activeMembers} active members",{activeMembers:u?Object(y["l"])(u):0});var p=void 0;p=this.isLargeVariationCard()&&!n?h.a.createElement("div",null,h.a.createElement("span",{className:"border_right padding_right_50 margin_right_50 float_left"},d),h.a.createElement("span",{className:"overflow_ellipsis"},o+".slack.com")):this.isSmallVariationCard()&&"closed"===s&&i?h.a.createElement("span",null,C.t("Awaiting admin approval")):h.a.createElement("span",{className:"overflow_ellipsis"},d);return h.a.createElement("div",{className:"p-workspace_directory_card__subtitle","data-qa-ws-directory-card-subtitle":true},p)}},{key:"renderWorkspaceStatus",value:function e(){var t=this.props,a=t.featureZeroWorkspaceOnboarding,r=t.team;if(!a||this.isSmallVariationCard())return null;var n=Object(k["f"])(r,{context:"largeCard",featureZeroWorkspaceOnboarding:a});if(!n)return null;return h.a.createElement("div",{className:"p-workspace_directory_card__status"},n)}},{key:"renderWorkspaceDescription",value:function e(){var t=this.props.team.description;return h.a.createElement("div",{className:"p-workspace_directory_card__description","data-qa-ws-directory-card-description":true},t)}},{key:"renderButton",value:function e(){var t=this.props,a=t.team,r=t.size,n=t.onActionReject,i=t.onActionResolve,s=t.anchorPage,o=t.doLaunchInNewTab;var l=this.isLargeVariationCard()?"large":"medium";return h.a.createElement(_["a"],{team:a,buttonContext:r+"Card",featureZeroWorkspaceOnboarding:true,customClasses:"p-workspace_directory_card__button",onDefaultButtonClick:this.openDialog,onActionReject:n,onActionResolve:i,anchorPage:s,doLaunchInNewTab:o,size:l})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.featureZeroWorkspaceOnboarding,n=a.size,i=a.className;if(!r)return null;var s=this.props.team.id;var o=f()("p-workspace_directory_card",i,{"p-workspace_directory_card--large":this.isLargeVariationCard(),"p-workspace_directory_card--small":this.isSmallVariationCard()});return h.a.createElement("div",{className:o,onClick:this.onCardClick,onKeyPress:function e(a){return t.onKeyPress(a,"openDialog")},"data-workspace-id":s,"data-qa-ws-directory-card":true,"data-qa-ws-directory-card-size":n,role:"button",tabIndex:"0"},h.a.createElement("div",{className:"display_flex flex_direction_column"},h.a.createElement("div",{className:"display_flex align_self_start full_width"},this.renderAvatar(),h.a.createElement("div",{className:"p-workspace_directory_card__heading nudge_top_1"},this.renderWorkspaceName(),this.renderWorkspaceSubtitle())),this.renderWorkspaceStatus(),this.renderWorkspaceDescription()),this.renderButton())}}]);return t}(p["Component"]);T.displayName="WorkspaceDirectoryCard";T.defaultProps=I;var A=function e(t){return{featureZeroWorkspaceOnboarding:Object(g["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding")}};var N={};var P=Object(v["connect"])(A)(T);var R=t["a"]=P},,function(e,t,a){"use strict";var r=a(37);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(6);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var h=a(9);var v=a.n(h);var m=a(0);var f=a(1);var b=a.n(f);var g=a(13);var _=a(2);var y=a(258);var O=a(872);var k=a(435);var E=a(4);var C=a(24);var j=a(28);var w=a(22);var S=a(10);var I=a(38);var T=a(202);var A=new S["b"]("workspace_directory");var N={launch:"launch",join:"join",request:"request",request_sent:"request_sent",default:"default"};var P={team:m["b"].shape({id:m["b"].string,description:m["b"].string,discoverable:m["b"].string,name:m["b"].string,domain:m["b"].string,is_member:m["b"].bool,date_requested_join:m["b"].oneOfType([m["b"].string,m["b"].number]),icon:m["b"].object,is_inactive:m["b"].bool,user_counts:m["b"].object}).isRequired,buttonContext:m["b"].oneOf(Object(_["values"])(T["a"])),featureZeroWorkspaceOnboarding:m["b"].bool.isRequired,customClasses:m["b"].string,onWorkspaceLaunch:m["b"].func,onDefaultButtonClick:m["b"].func,doLaunchInNewTab:m["b"].bool,displayDirectoryInModal:m["b"].bool,onActionReject:m["b"].func,onActionResolve:m["b"].func,anchorPage:m["b"].string,doUpsertJoin:m["b"].bool,callJoinWorkspace:m["b"].func,callRequestToJoinWorkspace:m["b"].func,size:m["b"].oneOf(["medium","large"])};var R={buttonContext:"largeCard",customClasses:"",onWorkspaceLaunch:_["noop"],onDefaultButtonClick:_["noop"],doLaunchInNewTab:false,displayDirectoryInModal:false,callJoinWorkspace:_["noop"],callRequestToJoinWorkspace:_["noop"],size:"large",onActionReject:_["noop"],onActionResolve:_["noop"],anchorPage:void 0,doUpsertJoin:false};var M=function e(t){var a=t.displayDirectoryInModal;var r="primary";var n="join";var i=a?A.t("Join and Open"):A.t("Join and Launch Slack");return{text:i,type:r,"data-qa-ws-directory-button-type":r,"data-qa-ws-directory-button-text":n,"data-qa":n}};var D=function e(){var t="primary";var a="request_to_join";return{text:A.t("Request to Join"),type:t,"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":a,"data-qa":a}};var x=function e(){var t="primary";var a="request_sent";return{text:A.t("Request Sent"),type:t,"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":a,"data-qa":a,disabled:true}};var F=function e(t){var a=t.displayDirectoryInModal;var r="primary";var n="launch";var i=a?A.t("Open"):A.t("Launch in Slack");return{text:i,type:r,"data-qa-ws-directory-button-type":r,"data-qa-ws-directory-button-text":n,"data-qa":n}};var L=function e(){var t="outline";var a="default";return{type:t,text:A.t("View Details",{fallbackHash:"6319b15f86fee6c8e5aa4846437f377ec352787c"}),"data-qa-ws-directory-button-type":t,"data-qa-ws-directory-button-text":a,"data-qa":a}};var B=function(e){v()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={loading:false};a.buttonType=null;a.onClick=a.onClick.bind(a);a.onKeyPress=a.onKeyPress.bind(a);return a}u()(t,[{key:"onKeyPress",value:function e(t){t.stopPropagation();t.preventDefault();13===t.which&&this.handleButtonAction()}},{key:"onClick",value:function e(t){t.stopPropagation();t.preventDefault();this.handleButtonAction()}},{key:"onWorkspaceJoin",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.windowOpener;var n=this.props,i=n.team,o=n.onActionReject,l=n.onActionResolve,c=n.anchorPage,u=n.doUpsertJoin;Object(I["a"])()&&Object(O["c"])(false);return this.props.callJoinWorkspace({teamId:i.id,anchorPage:c,doUpsertJoin:u}).then(function(){var e={};u&&(e.workspace=s()({},i,{is_member:true}));l(e);Object(I["a"])()&&!Object(k["b"])()&&Object(O["c"])(true)}).then(function(){return t.props.onWorkspaceLaunch(r)}).catch(function(e){Object(I["a"])()&&Object(O["c"])(true);if(r){t.setLoading(false);r.close()}o({node:b.a.createElement("span",null,A.rt("Workspace couldn\u2019t be joined. Please reload and try again.")),err:e})})}},{key:"onWorkspaceRequestToJoin",value:function e(){var t=this;var a=this.props,r=a.team,n=a.onActionReject,i=a.onActionResolve,o=a.anchorPage;return this.props.callRequestToJoinWorkspace({teamId:r.id,anchorPage:o}).then(function(){i({node:b.a.createElement("div",{className:"display_flex"},b.a.createElement(w["b"],{type:"check-circle-o",className:"margin_right_50 sk_seafoam_green"}),b.a.createElement("span",null,A.rt("<strong>Request sent!</strong> You\u2019ll be notified by email when a Workspace Admin grants access."))),workspace:s()({},r,{date_requested_join:String(Math.floor(Date.now()))})})}).then(function(){t.setLoading(false)}).catch(function(e){n({node:b.a.createElement("span",null,A.rt("Your request couldn\u2019t be sent. Please reload and try again.")),err:e})})}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"getButtonProps",value:function e(t){var a=this.props.displayDirectoryInModal;switch(t){case N.launch:return F({displayDirectoryInModal:a});case N.request:return D();case N.join:return M({displayDirectoryInModal:a});case N.request_sent:return x();case N.default:return L();default:return null}}},{key:"handleButtonAction",value:function e(){var t=this.props.doLaunchInNewTab;if("default"===this.buttonType)return this.props.onDefaultButtonClick();this.setLoading(true);if("join"===this.buttonType){if(t){var a=window.open("","_blank");return this.onWorkspaceJoin({windowOpener:a})}return this.onWorkspaceJoin()}if("request"===this.buttonType)return this.onWorkspaceRequestToJoin();if("launch"===this.buttonType){this.props.onWorkspaceLaunch();t&&this.setLoading(false)}return null}},{key:"render",value:function e(){var t=this.props,a=t.featureZeroWorkspaceOnboarding,r=t.team,i=t.buttonContext,o=t.customClasses,l=t.size;var c=this.state.loading;var u=W(r,{context:i,featureZeroWorkspaceOnboarding:a});this.buttonType=u;var d=this.getButtonProps(u);if(!u||Object(_["isEmpty"])(d))return null;var p=r.id;var h=d.text,v=n()(d,["text"]);var m=v.disabled||c;return b.a.createElement(j["b"],s()({},v,{className:o,role:"button",tabIndex:"0",onClick:this.onClick,onKeyPress:this.onKeyPress,"data-workspace-id":p,"data-qa-ws-directory-button":true,loading:c,disabled:m,size:l}),h)}}]);return t}(f["Component"]);B.displayName="WorkspaceDirectoryButton";B.defaultProps=R;var U=function e(t,a){var r=a.team,n=a.onActionResolve,i=a.anchorPage,s=a.doLaunchInNewTab,o=a.channelRedirect,l=a.postLaunchAction,c=a.userIdFromURL;var u=Object(C["b"])(t);return{featureZeroWorkspaceOnboarding:Object(E["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding"),displayDirectoryInModal:Object(E["isClientApp"])(t),onWorkspaceLaunch:function e(a){return Object(T["i"])(t,{team:r,user:u,onActionResolve:n,anchorPage:i,doLaunchInNewTab:s,windowOpener:a,channelRedirect:o,postLaunchAction:l,userIdFromURL:c})}}};var q={callJoinWorkspace:y["c"],callRequestToJoinWorkspace:y["e"]};var G=Object(g["connect"])(U,q)(B);function W(e,t){var a=t.context,r=void 0===a?T["a"].smallCard:a,n=t.featureZeroWorkspaceOnboarding,i=void 0===n||n;if(!i)return null;var s=e.is_member,o=e.date_requested_join,l=e.is_assigned,c=e.discoverable;if(s)return N.launch;if(r!==T["a"].smallCard){if(l)return N.join;switch(c){case"open":return N.join;case"closed":if(!o)return N.request;if(r===T["a"].largeCard)return N.request_sent;break;case"unlisted":break;default:}return null}return N.default}var H=t["a"]=G},,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(26);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(0);var v=a(1);var m=a.n(v);var f=a(88);var b=a(16);var g=a.n(b);var _=a(2);var y=a(28);var O=a(22);var k=a(277);var E=a(10);var C=a(3052);var j=new E["b"]("coachmarks");var w=150;var S=-500;var I={children:h["b"].element,className:h["b"].string,position:h["b"].string,delay:h["b"].number,content:h["b"].oneOfType([h["b"].node,h["b"].func]),zIndex:h["b"].oneOf(["above_fs","fs","menu","below_menu"]),onContinue:h["b"].func,onShow:h["b"].func,onSkip:h["b"].func,hasCloseButton:h["b"].bool,hasSkipLink:h["b"].bool,hasSkipButton:h["b"].bool,skipButtonText:h["b"].string,continueButtonText:h["b"].string,skipLinkPre:h["b"].string,skipLinkText:h["b"].string,title:h["b"].node,shouldShow:h["b"].oneOfType([h["b"].func,h["b"].bool])};var T={children:void 0,className:void 0,position:"right",delay:0,content:"",zIndex:"above_fs",onContinue:_["noop"],onShow:_["noop"],onSkip:_["noop"],hasCloseButton:true,hasSkipLink:true,hasSkipButton:false,skipButtonText:"",skipLinkPre:j.t("Done?"),skipLinkText:j.t("Click here to skip"),continueButtonText:j.t("Got it!"),title:"",shouldShow:false};var A=function(e){p()(t,e);function t(){s()(this,t);var e=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={isShowing:false,contentsRect:null};e.setCoachmarkedContentRef=e.setCoachmarkedContentRef.bind(e);e.setCoachmarkRef=e.setCoachmarkRef.bind(e);e.maybeShowCoachmark=e.maybeShowCoachmark.bind(e);e.measureContents=e.measureContents.bind(e);e.onSkipClick=e.onSkipClick.bind(e);e.onCloseClick=e.onCloseClick.bind(e);e.onContinueClick=e.onContinueClick.bind(e);e.containClickEvents=e.containClickEvents.bind(e);e.onResize=Object(_["debounce"])(e.measureContentsAndSetState.bind(e),w,{maxWait:w});return e}l()(t,[{key:"componentWillMount",value:function e(){this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay)}},{key:"componentWillReceiveProps",value:function e(t){this.props.shouldShow!==t.shouldShow&&true===t.shouldShow?this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay):this.props.shouldShow!==t.shouldShow&&false===t.shouldShow&&this.hideCoachmark()}},{key:"componentWillUnmount",value:function e(){this.hideCoachmark();window.clearTimeout(this.delayTimer);this.onResize.cancel();if(this.listenerInstalled){window.removeEventListener("resize",this.onResize);this.listenerInstalled=false}}},{key:"onSkipClick",value:function e(t){this.hideCoachmark();this.props.onSkip(t,"SKIP")}},{key:"onCloseClick",value:function e(t){this.hideCoachmark();this.props.onSkip(t,"CLOSE")}},{key:"onContinueClick",value:function e(t){this.hideCoachmark();this.props.onContinue(t)}},{key:"setCoachmarkedContentRef",value:function e(t){this.coachmarkedContent=t}},{key:"setCoachmarkRef",value:function e(t){this.coachmark=t}},{key:"containClickEvents",value:function e(t){t.stopPropagation()}},{key:"measureContents",value:function e(){if(this.coachmarkedContent)return Object(f["findDOMNode"])(this.coachmarkedContent).getBoundingClientRect();return null}},{key:"measureContentsAndSetState",value:function e(){var t=this;this.setState(function(){return{contentsRect:t.measureContents()}})}},{key:"maybeShowCoachmark",value:function e(){var t=this;var a=Object(_["isFunction"])(this.props.shouldShow)?this.props.shouldShow():this.props.shouldShow;if(a){this.setState(function(){return{isShowing:true,contentsRect:t.measureContents()}});window.addEventListener("resize",this.onResize);this.listenerInstalled=true;this.props.onShow()}else this.hideCoachmark()}},{key:"hideCoachmark",value:function e(){this.setState(function(){return{isShowing:false,contentsRect:null}});window.removeEventListener("resize",this.onResize);this.listenerInstalled=false}},{key:"renderCloseButton",value:function e(){if(!this.props.hasCloseButton)return null;return m.a.createElement(y["c"],{className:"p-coachmark__close_btn","data-qa":"coachmark_close_btn",onClick:this.onCloseClick,"aria-label":j.t("Close")},m.a.createElement(O["a"],{type:"times"}))}},{key:"renderTitle",value:function e(){return m.a.createElement("h3",{className:"p-coachmark__title"},this.props.title)}},{key:"renderContent",value:function e(){return m.a.createElement("div",{className:"p-coachmark__content"},this.props.content)}},{key:"renderSkipLink",value:function e(){if(!this.props.hasSkipLink)return null;var t=this.props.skipLinkPre;var a=this.props.skipLinkText;return m.a.createElement("div",{className:"p-coachmark__skip_link"},m.a.createElement("span",null,t),t&&" ",m.a.createElement(y["c"],{className:"p-coachmark__skip_link_button","data-qa":"coachmark_skip_link",onClick:this.onSkipClick},a))}},{key:"renderSkipButton",value:function e(){if(!this.props.hasSkipButton)return null;return m.a.createElement(y["d"],{onClick:this.onSkipClick,type:"outline",className:"p-coachmark__skip_button margin_right_50","data-qa":"coachmark_skip_btn"},this.props.skipButtonText)}},{key:"renderFooter",value:function e(){var t=this.props.hasSkipLink?"p-coachmark__footer":g()("p-coachmark__footer","margin_top_100");return m.a.createElement("div",{className:t},this.renderSkipLink(),this.renderSkipButton(),m.a.createElement(y["d"],{onClick:this.onContinueClick,className:"p-coachmark__continue_button","data-qa":"coachmark_continue_btn"},this.props.continueButtonText))}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.position,i=t.zIndex;var s=this.state,o=s.isShowing,l=s.contentsRect;var c=g()("p-coachmark","p-coachmark--"+r,this.props.className);var u=o&&m.a.createElement(k["a"],{isOpen:o,position:r,targetBounds:l,allowanceX:S,allowanceY:S,zIndex:i,key:"coachmark-popover",onClose:this.onCloseClick},m.a.createElement("div",{className:c,"data-qa":"coachmark",onClick:this.containClickEvents,ref:this.setCoachmarkRef,role:"presentation"},m.a.createElement("div",{className:"p-coachmark__callout"}),this.renderCloseButton(),this.renderTitle(),this.renderContent(),this.renderFooter()));return m.a.cloneElement(a,{ref:this.setCoachmarkedContentRef},[].concat(n()(m.a.Children.toArray(a.props.children)),[u]))}}]);return t}(v["PureComponent"]);A.displayName="Coachmark";A.defaultProps=T;var N=A;var P=t["a"]=N},function(e,t,a){"use strict";a.d(t,"a",function(){return o});var r=a(2);var n=a.n(r);var i=/\.spec\.jsx?$/;function s(e){return!i.test(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a={};if(!e||!Object(r["isFunction"])(e.keys))throw new Error("Cannot call importAll without a valid require.context.\n\t\t\tSee https://webpack.js.org/guides/dependency-management/#require-context.");var n=t?e.keys():e.keys().filter(s);n.forEach(function(t){a[t]=e(t)});return a}},,function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a(30);var n=a(12);function i(e,t,a){var i="noversion";var s=Date.now()/1e3;var o="/api/"+e+"?_x_id="+i+"-"+s;var l=new XMLHttpRequest;l.onreadystatechange=function(){if(4===l.readyState){l.onreadystatechange=null;var e={};if(200===l.status||429===l.status)try{e=JSON.parse(l.responseText)}catch(e){Object(n["b"])().warn("API","Unable to do anything with api response")}e=e||{ok:false};if(a)a(e.ok,e,t);else if(r["isDev"]){Object(n["b"])().warn("API","No callback provided. Printing response");Object(n["b"])().warn("API",e.ok,e,t)}}};var c=true;l.open("POST",o,c);var u=new FormData;var d=false;t?Object.keys(t).forEach(function(e){if("_"===e[0])return;u.append(e,t[e]);d=true}):r["isDev"]&&Object(n["b"])().warn("API","No args provided. Bold, very bold.");d?l.send(u):l.send()}window.callSlackAPIUnauthed=function(e,t,a){Object(n["b"])().warn("API","Don't use me directly! Please import callSlackApiUnauthed from api-unauthed.js");i(e,t,a)}},,,,function(e,t,a){"use strict";a.r(t);a.d(t,"addView",function(){return b});a.d(t,"updateView",function(){return g});a.d(t,"bulkAddViews",function(){return _});a.d(t,"getViewContent",function(){return y});a.d(t,"getView",function(){return E});a.d(t,"getViewIds",function(){return C});a.d(t,"getViews",function(){return j});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(1041);var c=a(18);var u=a(36);var d=a(14);var p=a(15);var h=a(2);var v=a.n(h);var m=a(846);var f;var b=Object(c["b"])("add an app view");b.propTypes=o["b"].object;var g=Object(c["b"])("update a view");g.propTypes=o["b"].object;var _=Object(c["b"])("bulk add views");_.propTypes=null;var y=Object(p["b"])("get view content to put into store",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.viewId;return e(Object(m["c"])(r)).then(function(a){Object(l["b"])(e,t,a.blocks);e(g(a))})});y.propTypes={viewId:o["b"].string.isRequired};var O={};var k=Object(u["b"])((f={},n()(f,b,function(e,t){if(!t||!t.id)return e;var a=s()({},e,n()({},t.id,s()({},t)));return a}),n()(f,g,function(e,t){if(!t||!t.id)return e;var a=s()({},e,n()({},t.id,s()({},t)));return a}),n()(f,_,function(e){var t=s()({},e);return t}),f),O,{persistenceEnabled:true});k.propTypes=o["b"].objectOf(o["b"].object);t["default"]=k;var E=Object(d["b"])(function(e,t){return e&&e.views&&e.views[t]});var C=Object(d["b"])(function(e,t){return e&&e.views&&e.views.channels&&e.views.channels[t]||[]});var j=Object(d["b"])(function(e,t){var a=[];var r=e&&e.views&&e.views.channels&&e.views.channels[t];if(!r)return a;Object(h["forEach"])(r,function(t){var r=e&&e.views&&e.views[t];r&&a.push(r)});return a})},function(e,t,a){"use strict";a.r(t);a.d(t,"toggleExpandEmailMeta",function(){return p});a.d(t,"toggleQuotedText",function(){return h});a.d(t,"isEmailQuoteTextExpanded",function(){return v});a.d(t,"isEmailMetaInfoExpanded",function(){return m});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(18);var c=a(36);var u=a(14);var d;var p=Object(l["b"])("Expand name and label of a email");p.propTypes={fileId:o["b"].string.isRequired};var h=Object(l["b"])("Toggle show/hide quoted text for the email");h.propTypes={fileId:o["b"].string.isRequired};var v=Object(u["b"])(function(e,t){return!!e.emailRender.expandedQuotedText[t]});var m=Object(u["b"])(function(e,t){return!!e.emailRender.expandedEmailMeta[t]});var f=Object(c["b"])((d={},n()(d,p,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.fileId;return s()({},e,{expandedEmailMeta:s()({},e.expandedEmailMeta,n()({},a,!e.expandedEmailMeta[a]))})}),n()(d,h,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.fileId;return s()({},e,{expandedQuotedText:s()({},e.expandedQuotedText,n()({},a,!e.expandedQuotedText[a]))})}),d),{expandedEmailMeta:{},expandedQuotedText:{}},{persistenceEnabled:true});f.propTypes={expandedEmailMeta:o["b"].objectOf(o["b"].bool),expandedQuotedText:o["b"].objectOf(o["b"].bool)};t["default"]=f},function(e,t,a){"use strict";a.r(t);a.d(t,"ONBOARDING_STEPS_MAP",function(){return f});a.d(t,"ONBOARDING_STATUSES",function(){return b});a.d(t,"setIsOnboarding",function(){return g});a.d(t,"setOnboardingStepToNext",function(){return _});a.d(t,"setOnboardingStatus",function(){return y});a.d(t,"getOnboardingStep",function(){return E});a.d(t,"getOnboardingStatus",function(){return C});a.d(t,"hasCancelledOnboarding",function(){return j});a.d(t,"hasCompletedOnboarding",function(){return w});a.d(t,"hasNotStartedOnboarding",function(){return S});a.d(t,"isOnboarding",function(){return I});a.d(t,"startOnboarding",function(){return T});a.d(t,"cancelOnboarding",function(){return A});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(4);var c=a(34);var u=a(18);var d=a(36);var p=a(14);var h=a(15);var v;var m=["NOT_STARTED","START","BANNER","CHANNELS","DIRECT_MESSAGES","INVITES","SLACKBOT_CONVERSATION_SEEN","SLACKBOT_CONVERSATION_CLICKED","COMPLETE"];var f=new Map(m.map(function(e){return[e,e]}));var b=Object.freeze({NOT_STARTED:"NOT_STARTED",LOADING:"LOADING",ACTIVE:"ACTIVE",CANCELLED:"CANCELLED",COMPLETE:"COMPLETE"});var g=Object(u["b"])("Sets whether the current user is in onboarding.");g.propTypes=o["b"].bool.isRequired;var _=Object(u["b"])("Advance to the next step of onboarding.");_.propTypes=null;var y=Object(u["b"])("Sets current onboarding status.");y.propTypes=o["b"].oneOf(Object.values(b)).isRequired;var O={inOnboarding:false,onboardingStep:f.get("NOT_STARTED"),onboardingStatus:b.NOT_STARTED};var k=Object(d["b"])((v={},n()(v,g,function(e,t){return s()({},e,{inOnboarding:t})}),n()(v,_,function(e){var t=m.indexOf(e.onboardingStep);return t>-1&&t<m.length-2?s()({},e,{onboardingStep:f.get(m[t+1])}):s()({},e,{inOnboarding:false,onboardingStep:f.get("COMPLETE")})}),n()(v,y,function(e,t){return s()({},e,{onboardingStatus:t})}),v),O,{persistenceEnabled:true});k.propTypes={inOnboarding:o["b"].bool,onboardingStep:o["b"].oneOf(m).isRequired,onboardingStatus:o["b"].oneOf(Object.values(b)).isRequired};t["default"]=k;var E=Object(p["b"])(function(e){return e&&e.onboarding&&e.onboarding.onboardingStep});var C=Object(p["b"])(function(e){return e&&e.onboarding&&e.onboarding.onboardingStatus});var j=Object(p["b"])(function(e){return C(e)===b.CANCELLED});var w=Object(p["b"])(function(e){return C(e)===b.COMPLETE});var S=Object(p["b"])(function(e){return C(e)===b.NOT_STARTED});var I=Object(p["b"])(function(e){var t=e&&e.onboarding,a=t.inOnboarding;if(Object(c["f"])("tractor_enabled"))return a;if(Object(l["isFeatureEnabled"])(e,"feature_lesson_onboarding")&&Object(c["f"])("lessons_enabled"))return a;return!(j(e)||w(e)||S(e))});var T=Object(h["b"])("Starts onboarding",function(e){e(g(true))});var A=Object(h["b"])("Cancels onboarding",function(e){e(g(false))})},function(e,t,a){"use strict";a.r(t);a.d(t,"setChannels",function(){return d});a.d(t,"getChannels",function(){return v});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(18);var c=a(36);var u=a(14);var d=Object(l["b"])("Example action to store channels for channel discovery");d.propTypes={channels:o["b"].arrayOf(o["b"].object)};var p={channels:[]};var h=Object(c["b"])(n()({},d,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channels;return s()({},e,{channels:a})}),p,{persistenceEnabled:true});h.propTypes={channels:o["b"].arrayOf(o["b"].object)};t["default"]=h;var v=Object(u["b"])(function(e){return e&&e.searchChannelsUsers&&e.searchChannelsUsers.channels})},function(e,t,a){"use strict";a.r(t);a.d(t,"setUsersCounts",function(){return d});a.d(t,"getUsersCounts",function(){return h});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(18);var c=a(36);var u=a(14);var d=Object(l["b"])("Initialize the raw users counts");d.propTypes=o["b"].shape({channels:o["b"].array,groups:o["b"].array,ims:o["b"].array,mpims:o["b"].array,threads:o["b"].object});var p=Object(c["b"])(n()({},d,function(e,t){return s()({},e,{counts:t})}),{},{persistenceEnabled:true});p.propTypes={counts:o["b"].shape({channels:o["b"].array,groups:o["b"].array,ims:o["b"].array,mpims:o["b"].array,threads:o["b"].object})};t["default"]=p;var h=Object(u["b"])(function(e){return e&&e.usersCounts&&e.usersCounts.counts})},function(e,t,a){"use strict";a.r(t);a.d(t,"upsertFetchedChannelOrderedMemberList",function(){return m});a.d(t,"initialState",function(){return f});a.d(t,"getMemberListForChannel",function(){return g});a.d(t,"getMarker",function(){return _});a.d(t,"fetchAndUpsertFirstNMembersForChannel",function(){return y});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(18);var c=a(36);var u=a(14);var d=a(15);var p=a(2);var h=a.n(p);var v=a(1281);var m=Object(l["b"])("Upsert fetched ordered membership list for channel");m.propTypes={channelId:o["b"].string.isRequired,memberList:o["b"].array.isRequired};var f={};var b=Object(c["b"])(n()({},m,function(e,t){if(!Object(p["isObject"])(t)||!Object(p["isString"])(t.channelId)||!Object(p["isObject"])(t.memberList)||Object(p["isEmpty"])(t.memberList))return e;var a=t.memberList.map(function(e){return e.id});return s()({},e,n()({},t.channelId,a))}),f,{persistenceEnabled:true});b.propTypes=o["b"].objectOf(o["b"].arrayOf(o["b"].string));t["default"]=b;var g=Object(u["b"])(function(e,t){return e&&e.membershipOrdered&&e.membershipOrdered[t]?e.membershipOrdered[t]:[]});var _=Object(u["b"])(function(e){return e&&e.membershipOrdered&&e.membershipOrdered.marker});var y=Object(d["b"])("Fetches top members for the channel",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.count;return Object(v["a"])(e,t,r,n).then(function(t){return e(m({channelId:r,memberList:t}))})});y.propTypes={channelId:o["b"].string.isRequired,count:o["b"].number.isRequired}},function(e,t,a){(function(t){e.exports=t["EXIF"]=a(2307)}).call(this,a(70))},,,function(e,t,a){"use strict";var r=a(2);var n=a.n(r);var i=a(142);var s=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dndDays,n=t.dndEnabledDays,s=void 0===n?{}:n,o=t.dndEnabledPrefValue;if(!a)return false;if(a===i["a"].EVERY_DAY)return Object(r["every"])(s,function(e){return e===i["b"].DISABLED});if(a===i["a"].WEEKDAYS){var l=Object(r["omit"])(s,["saturday","sunday"]);return Object(r["every"])(l,function(e){return e===i["b"].DISABLED})}return o===i["b"].DISABLED};t["a"]=s},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(37);var s=a.n(i);var o=a(6);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var h=a(9);var v=a.n(h);var m=a(2);var f=a.n(m);var b=a(1);var g=a.n(b);var _=a(0);var y=a(705);var O=function e(t){var a=function(e){v()(a,e);function a(e){l()(this,a);var t=p()(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));t.onFocus=t.onFocus.bind(t);t.onBlur=t.onBlur.bind(t);t.onMutation=t.onMutation.bind(t);t.state={hasKeyboardFocus:false,hasKeyboardFocusWithin:false};t.mutationObserver=null;return t}u()(a,[{key:"componentDidUpdate",value:function e(t,a){if(!this.focusedElement)return;var r=this.props.hasKeyboardFocus;r&&!(a.hasKeyboardFocus||a.hasKeyboardFocusWithin)&&this.setFocus();r||!a.hasKeyboardFocus&&!a.hasKeyboardFocusWithin||this.clearFocus()}},{key:"componentWillUnmount",value:function e(){if(this.mutationObserver){this.mutationObserver.disconnect();this.mutationObserver=null}}},{key:"onMutation",value:function e(t){var a=this;var r=t.some(function(e){return Array.from(e.removedNodes).some(function(e){return e.contains(a.focusedElement)})});if(r){this.focusedElement=null;this.setState(function(){return{hasKeyboardFocus:false,hasKeyboardFocusWithin:false}})}}},{key:"onFocus",value:function e(t){var a=t.target,r=t.currentTarget;this.node=r;this.focusedElement=a;this.props.hasKeyboardFocus&&this.setFocus();if(this.props.onFocus){t.persist();this.props.onFocus(t)}}},{key:"onBlur",value:function e(t){var a=t.currentTarget,r=t.relatedTarget;a.contains(r)||this.clearFocus();if(this.props.onBlur){t.persist();this.props.onBlur(t)}}},{key:"setFocus",value:function e(){var t=this.node===this.focusedElement;var a=this.node!==this.focusedElement&&this.node.contains(this.focusedElement);this.setState(function(){return{hasKeyboardFocus:t,hasKeyboardFocusWithin:a}});if(!this.mutationObserver){this.mutationObserver=new MutationObserver(this.onMutation);this.mutationObserver.observe(this.node,{childList:true,subtree:true})}}},{key:"clearFocus",value:function e(){this.focusedElement=null;this.setState(function(){return{hasKeyboardFocus:false,hasKeyboardFocusWithin:false}});if(this.mutationObserver){this.mutationObserver.disconnect();this.mutationObserver=null}}},{key:"render",value:function e(){var a=this.state,r=a.hasKeyboardFocus,i=a.hasKeyboardFocusWithin;var o=this.props,l=o.forwardedRef,c=s()(o,["forwardedRef"]);return g.a.createElement(t,n()({ref:l},c,{hasKeyboardFocus:r,hasKeyboardFocusWithin:i,onFocus:this.onFocus,onBlur:this.onBlur}))}}]);return a}(b["PureComponent"]);a.displayName="KeboardFocusPropsProvider";a.defaultProps={children:null,hasKeyboardFocus:false,forwardedRef:void 0,onFocus:m["noop"],onBlur:m["noop"]};return Object(y["a"])(g.a.forwardRef(function(e,t){return g.a.createElement(a,n()({},e,{forwardedRef:t}))}))};t["a"]=O},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(13);var l=a(16);var c=a.n(l);var u=a(0);var d=a(38);var p=a(4);var h=a(10);var v=a(50);var m=new h["b"]("sonic_pilot");function f(e){var t=e.children,a=e.featureSonicPlaceholderLabels,r=e.unstyled,i=e.tooltipPosition;if(!a)return t;if(Object(d["a"])()){var o=s.a.cloneElement(t,n()({},t.props,{className:c()(t.props.className,{"c-button--sonic-placeholder":!r,"c-button-unstyled--sonic-placeholder":r})}),t.props.children);return s.a.createElement(v["c"],{tip:s.a.createElement("div",{className:"c-tooltip__sonic_placeholder","data-qa":"sonic-placeholder-text"},m.t("Coming soon")),position:i||"top",zIndex:"above_fs"},o)}return t}f.defaultProps={unstyled:false,tooltipPosition:void 0};var b=function e(t){return{featureSonicPlaceholderLabels:Object(p["isFeatureEnabled"])(t,"feature_sonic_placeholder_labels")}};t["a"]=Object(o["connect"])(b)(f)},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(0);var p=a(1);var h=a.n(p);var v={item:d["b"].object};var m={item:{}};var f=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.item;if(!t)return null;var a=t.member.profile||t.member.member&&t.member.member.profile;if(!a)return null;var r=a.image_48+" 1x, "+a.image_72+" 2x";return h.a.createElement("div",{className:"c-lazy_filter_select__member_item"},h.a.createElement("img",{alt:"",className:"c-lazy_filter_select__member_list_icon",src:a.image_48,srcSet:r}),h.a.createElement("div",{className:"c-lazy_filter_select__member_token_name"},a.real_name),h.a.createElement("div",{className:"c-lazy_filter_select__member_token_name"},"@",t.member.name))}}]);return t}(p["PureComponent"]);f.displayName="LazyFilterSelectMemberListItem";t["a"]=f;f.defaultProps=m},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(0);var p=a(1);var h=a.n(p);var v={item:d["b"].object};var m={item:{}};var f=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props.item;if(!t)return null;var a=t.member.profile||t.member.member&&t.member.member.profile;if(!a)return null;return h.a.createElement("div",{className:"c-lazy_filter_select__member_token",key:t.id},h.a.createElement("img",{alt:"",className:"c-lazy_filter_select__member_token_icon",src:a.image_48}),h.a.createElement("div",{className:"c-lazy_filter_select__member_token_name"},a.real_name))}}]);return t}(p["PureComponent"]);f.displayName="LazyFilterSelectMemberToken";t["a"]=f;f.defaultProps=m},,function(e,t,a){"use strict";a.d(t,"c",function(){return i});a.d(t,"a",function(){return s});a.d(t,"b",function(){return s});var r=a(0);var n=a(18);var i=Object(n["b"])("set new message count for unreads view");i.propTypes=r["b"].number.isRequired;var s=Object(n["b"])("increments refreshId for Unreads View");s.propTypes=null},function(e,t,a){"use strict";a.d(t,"a",function(){return u});a.d(t,"b",function(){return d});var r=a(3);var n=a.n(r);var i=a(0);var s=a(29);var o=a(25);var l=a(12);var c=a(332);var u=Object(o["a"])("Adds a reminder for a message via API call",function(e,t,a){var r=c["a"].generateAndEnqueue();var i=n()({},a,{client_token:r});return e(Object(s["a"])({method:"reminders.addFromMessage",args:i}))});u.propTypes={time:i["b"].oneOf(["in 20 minutes","in 1 hour","in 3 hours","tomorrow","next week","custom"]).isRequired,message_channel:i["b"].string.isRequired,message_ts:i["b"].string.isRequired,respond_in_channel:i["b"].bool};var d=Object(o["a"])("Fetches a summarized version of a message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts,i=a.reason;return e(Object(s["a"])({method:"chat.summarizeMessage",args:{channel:r,ts:n},reason:i})).then(function(){Object(l["a"])({getState:t}).info("MESSAGE_ACTIONS","Fetched the summary for the following message "+n+" in "+r)}).catch(function(){Object(l["a"])({getState:t}).error("MESSAGE_ACTIONS","Failed to fetch the summary for the following message "+n+" in "+r)})});d.propTypes={channelId:i["b"].string.isRequired,ts:i["b"].string.isRequired,reason:i["b"].string.isRequired}},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(0);var v=a(13);var m=a(2);var f=a.n(m);var b=a(87);var g=a(384);var _=a(39);var y=a(67);var O=a(41);var k=a(4);var E=a(85);var C=a(10);var j=a(1838);var w=a(84);var S=a(3921);var I=a(55);var T=new C["b"]("msg_edit");var A={ts:h["b"].string.isRequired,channelId:h["b"].string.isRequired,subtype:h["b"].string,removeMessage:h["b"].func,hasFile:h["b"].bool,fileMode:h["b"].string,rollup:b["a"].Rollup(),useBulkDelete:h["b"].bool};var N={removeMessage:m["noop"],subtype:void 0,hasFile:false,fileMode:void 0,rollup:void 0,useBulkDelete:false};var P=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onGo=e.onGo.bind(e);return e}s()(t,[{key:"onGo",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.removeMessage,i=t.useBulkDelete,s=t.rollup;var o=i?Object(m["reduce"])(s,function(e,t){return e.concat(t.timestamps)},[]):[];o.sort();n({channelId:r,ts:a,rollupTimestamps:i&&o?o:[]}).catch(m["noop"])}},{key:"getBodyText",value:function e(){var t=this.props.subtype;if(!t)return null;var a=this.getFileLabel();if("file_upload"===t){if("file"===a)return T.t("Note that deleting this message will not delete the file that was uploaded.");if("snippet"===a)return T.t("Note that deleting this message will not delete the snippet that was uploaded.");if("post"===a)return T.t("Note that deleting this message will not delete the post that was uploaded.")}else if("file_share"===t){if("file"===a)return T.t("Note that deleting this message will not unshare the file.");if("snippet"===a)return T.t("Note that deleting this message will not unshare the snippet.");if("post"===a)return T.t("Note that deleting this message will not unshare the post.")}else if("file_comment"===t)return T.t("Note that deleting this message will not delete the comment.");return null}},{key:"getFileLabel",value:function e(){var t=this.props,a=t.hasFile,r=t.fileMode;if(!a)return null;if("snippet"===r)return"snippet";if("post"===r)return"post";return"file"}},{key:"render",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.rollup,i=t.useBulkDelete;var s=this.getBodyText();return p.a.createElement(g["a"],{id:_["MESSAGE_CONTAINERS"].DELETE_MSG_DIALOG},p.a.createElement(w["a"],{title:T.t("Delete message"),goButtonText:T.t("Delete"),goButtonType:"danger",onGo:this.onGo},T.t("Are you sure you want to delete this message? This cannot be undone."),s&&p.a.createElement("div",{className:"margin_top_50"},s),p.a.createElement("div",{className:"margin_top_100"},p.a.createElement(S["a"],{ts:a,channelId:r,rollup:i&&n?n:null,blocksContainerContext:I["a"].delete_dialog,isStandalone:true}))))}}]);return t}(d["PureComponent"]);P.displayName="BaseDeleteMessageDialog";P.defaultProps=N;var R=function e(t,a){var r=a.channelId,n=a.ts,i=a.rollup;var s=Object(k["isFeatureEnabled"])(t,"feature_file_threads");var o=Object(k["isFeatureEnabled"])(t,"feature_allow_bulk_delete_join_leave_messages");var l=Object(y["a"])(t,r,n);var c=s?null:l.file;var u=s?l.files:null;var d=s?Object(E["getFileById"])(t,Object(m["first"])(u)):Object(E["getFileById"])(t,c);var p=false;var h=void 0;if(d){p=true;h=d.mode}var v=!!(o&&i);return{hasFile:p,fileMode:h,subtype:Object(O["getMessageSubtype"])(l),rollup:i,useBulkDelete:v}};var M={removeMessage:j["a"]};var D=Object(v["connect"])(R,M)(P);D.propTypes={channelId:h["b"].string.isRequired,ts:h["b"].string.isRequired};t["a"]=D},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(0);var v=a(13);var m=a(2);var f=a.n(m);var b=a(11);var g=a(10);var _=a(19);var y=a(1838);var O=a(84);var k=a(3921);var E=new g["b"]("msg_edit");var C={ts:h["b"].string.isRequired,channelId:h["b"].string.isRequired,channelType:h["b"].string,removeMessage:h["b"].func};var j={channelType:void 0,removeMessage:m["noop"]};var w=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onGo=e.onGo.bind(e);return e}s()(t,[{key:"onGo",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.removeMessage;n({channelId:r,ts:a,broadcastDelete:true}).catch(m["noop"])}},{key:"render",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.channelType;var i=void 0;var s=void 0;if("channel"===n){i=E.t("Remove from channel");s=E.t("Are you sure you want to remove this message from the channel?")}else{i=E.t("Remove from conversation");s=E.t("Are you sure you want to remove this message from the conversation?")}return p.a.createElement(O["a"],{title:i,goButtonText:E.t("Remove message"),onGo:this.onGo},p.a.createElement("div",{className:"margin_bottom_100"},s,E.t("The original reply will still be visible in its thread.")),p.a.createElement(k["a"],{ts:a,channelId:r,isStandalone:true}))}}]);return t}(d["PureComponent"]);w.displayName="BaseRemoveBroadcastDialog";w.defaultProps=j;var S=function e(t,a){var r=a.channelId;var n=Object(_["d"])(t,r);var i=Object(b["getChannelType"])(n);return{channelType:i}};var I={removeMessage:y["a"]};var T=Object(v["connect"])(S,I)(w);T.propTypes={channelId:h["b"].string.isRequired};t["a"]=T},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(2);var v=a.n(h);var m=a(1);var f=a.n(m);var b=a(0);var g=a(13);var _=a(934);var y=a(68);var O=a(208);var k=a(21);var E=a(3215);var C=a.n(E);var j={channelId:b["b"].string,threadTs:b["b"].string,viewContext:b["b"].string,disableFileUploadsPref:b["b"].string,forwardedRef:b["b"].object,openFileUploadDialog:b["b"].func,onFilesSelectedHandler:b["b"].func};var w={channelId:void 0,threadTs:void 0,viewContext:void 0,disableFileUploadsPref:void 0,forwardedRef:void 0,openFileUploadDialog:h["noop"],onFilesSelectedHandler:null};var S=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onFilesSelected=a.onFilesSelected.bind(a);return a}l()(t,[{key:"onFilesSelected",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext,i=t.forwardedRef,s=t.onFilesSelectedHandler;var o={fileUploadAction:k["l"].PLUS_MENU,fileUploadSrc:k["m"].LOCAL};var l=i.current.files;var c=Object(h["map"])(l);if(s)s(c);else{var u=Object(O["a"])({viewContext:n,channelId:a,threadTs:r});this.props.openFileUploadDialog({files:c,initialChannelId:a,threadTs:r,inputProxy:u,metadata:o})}i.current.value=""}},{key:"render",value:function e(){var t=this.props,a=t.disableFileUploadsPref,r=t.forwardedRef;var i="disable_all_except_images"===a;var s={};i&&(s.accept="image/*");return f.a.createElement("input",n()({type:"file",className:"p-hidden_file_input",multiple:true,"aria-hidden":"true","data-qa":"file_upload",tabIndex:"-1"},s,{ref:r,onClick:this.onClick,onChange:this.onFilesSelected}))}}]);return t}(m["Component"]);S.displayName="HiddenFileInput";S.defaultProps=w;function I(e){return{disableFileUploadsPref:Object(y["a"])(e,"disable_file_uploads")}}function T(e){return{openFileUploadDialog:function t(){return e(_["a"].apply(void 0,arguments))}}}var A=Object(g["connect"])(I,T)(S);t["a"]=f.a.forwardRef(function(e,t){return f.a.createElement(A,n()({},e,{forwardedRef:t}))})},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(2);var p=a.n(d);var h=a(1);var v=a.n(h);var m=a(0);var f=a(13);var b=a(4);var g=a(10);var _=a(16);var y=a.n(_);var O=a(19);var k=a(11);var E=a(109);var C=a(22);var j=a(3267);var w=a.n(j);var S=new g["b"]("threads");var I=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={spriteLoaded:false};return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=new Image;this.spritePromise=new Promise(function(e){a.onload=function(){e()};a.src=cdn_url+"/a7c8f/img/dragdrop_threads_sprites@2x.png"}).then(function(){t.setState(function(){return{spriteLoaded:true}})})}},{key:"componentWillUnmount",value:function e(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function e(){var t=this.props,a=t.featureAnnounceOnly,r=t.userCanThread,n=t.useNightIllustration;var i=this.state.spriteLoaded;var s=false;if(Object(d["isBoolean"])(n))s=n;else{var o=new Date;var l=o.getHours();s=l>=20||l<8}var c=y()("p-thread_drag_overlay",{"p-thread_drag_overlay--night":!!s});var u="";a&&!r?u=v.a.createElement("div",{className:"p-thread_drag_overlay__anim--readonly"},v.a.createElement("div",{className:"p-thread_drag_overlay__anim_circle"}),v.a.createElement(C["b"],{type:"emoji-objects",className:"p-thread_drag_overlay__anim_readonly",inline:true})):i&&(u=v.a.createElement("div",{className:"p-thread_drag_overlay__anim"},v.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_01"}),v.a.createElement("div",{className:"p-thread_drag_overlay__anim_card_01"}),v.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_02"})));var p=a&&!r?S.t("Read-only"):S.t("Upload to thread");var h=S.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately');var m=a&&!r?S.t("Only selected team members can post in this thread."):h;return v.a.createElement("div",{className:c},v.a.createElement("div",{className:"p-thread_drag_overlay__info"},u,v.a.createElement("div",{className:"p-thread_drag_overlay__title"},p),v.a.createElement("div",{className:"p-thread_drag_overlay__subtitle"},m)))}}]);return t}(h["PureComponent"]);I.displayName="DragOverlay";I.defaultProps={featureAnnounceOnly:false,useNightIllustration:void 0};function T(e){var t=Object(E["getCurrentThreadKey"])(e);var a=Object(E["decodeThreadKey"])(t),r=a.channelId;var n=Object(O["d"])(e,r);return{featureAnnounceOnly:Object(b["isFeatureEnabled"])(e,"feature_announce_only"),userCanThread:Object(k["canThread"])(e,n)}}t["a"]=Object(f["connect"])(T)(I)},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(15);var s=a(48);var o=a(2);var l=a(58);var c=a.n(l);var u=a(6);var d=a.n(u);var p=a(7);var h=a.n(p);var v=a(8);var m=a.n(v);var f=a(9);var b=a.n(f);var g=a(0);var _=a(16);var y=a.n(_);var O=a(13);var k=a(2414);var E=a(10);var C=a(1329);var j=a(84);var w=a(537);var S=a(1050);var I=a(1059);var T=a(28);var A=a(22);var N=a(290);var P=a(4);var R=a(19);var M=a(23);var D=a(316);var x=a(186);var F=a(11);var L=a(17);var B=a(31);var U=a(71);var q=a(443);var G=a(145);var W=a(886);var H=a(278);var V=a(1543);var K=a(1183);var z=a(3);var Y=a.n(z);var Q=a(790);var J=a(61);var Z=a(426);var X=a(35);var $=a(4200);var ee=[230,132,102,88,68,44,34];var te={className:g["b"].string,size:g["b"].number.isRequired,team:g["b"].object};var ae={className:void 0,team:void 0};function re(e){var t=e.size,a=e.team;var r=Object(B["getTeamIcon"])(a);if(!r||r.image_default)return null;var n=2*t;var i=Object(Z["a"])(n,ee);return r["image_"+i]}function ne(e){var t=Object(B["getTeamDisplayName"])(e);return Object(B["getTeamInitials"])(t,{limit:2})}function ie(e){var t=e.className,a=e.size,r=e.team;var i=Object(J["c"])(r);var s=Object(J["d"])(r);if(i||s)return n.a.createElement($["a"],{className:y()(t,"c-team_entity__icon"),isNonExistent:i,size:a});var o=re({size:a,team:r});var l=!o&&ne(r);return n.a.createElement("span",{"aria-hidden":"true",className:y()(t,"c-team_entity__icon",{"c-team_entity__icon--default":!o}),style:{backgroundImage:o&&"url("+o+")",fontSize:Math.round(a/1.8)+"px",height:a,lineHeight:a+"px",width:a}},l)}ie.displayName="TeamIcon";ie.defaultProps=ae;function se(e,t){var a=t.id;return{team:Object(X["i"])(e,a)}}var oe=Object(O["connect"])(se)(ie);oe.propTypes={id:g["b"].string.isRequired};var le=oe;var ce=a(763);var ue={team:g["b"].object};var de={team:void 0};function pe(e){var t=e.team;var a=Object(J["c"])(t);var r=Object(J["d"])(t);if(a||r)return n.a.createElement(ce["b"],{isNonExistent:a,size:"random"});var i=Object(B["getTeamDisplayName"])(t);return n.a.createElement("strong",null,i)}pe.displayName="TeamName";pe.defaultProps=de;function he(e,t){var a=t.id;return{team:Object(X["i"])(e,a)}}var ve=Object(O["connect"])(he)(pe);var me=a(3151);var fe={className:g["b"].string,id:g["b"].string.isRequired,isDeactivated:g["b"].bool};var be={className:void 0,isDeactivated:false};function ge(e){var t=e.className,a=e.id,r=e.isDeactivated;return n.a.createElement(Q["c"],{avatar:function e(t){return n.a.createElement(le,Y()({},t,{id:a,size:20}))},className:t,isDeactivated:r,size:"small",text:n.a.createElement(ve,{id:a})})}ge.displayName="SmallTeamEntity";ge.defaultProps=be;var _e=ge;var ye={className:g["b"].string,id:g["b"].string.isRequired,isDeactivated:g["b"].bool,isSelected:g["b"].bool,secondaryContent:g["b"].node};var Oe={className:void 0,isDeactivated:false,isSelected:false,secondaryContent:void 0};function ke(e){var t=e.className,a=e.id,r=e.isDeactivated,i=e.isSelected,s=e.secondaryContent;return n.a.createElement(K["a"],{className:t,isSelected:i,primaryContent:n.a.createElement(_e,{id:a,isDeactivated:r}),secondaryContent:s,size:"small"})}ke.displayName="SmallTeamListEntity";ke.defaultProps=Oe;var Ee=ke;var Ce=a(274);var je=a(3153);function we(e,t){var a=[];Object(o["forEach"])(e,function(e){var r=e.item;if(Object(G["b"])(r.id))return;if(Object(G["a"])(r.id)){if(r.id===t)return;if(!Object(B["isTeamOpen"])(r))return}a.push(r)});return a}var Se=new E["b"]("quick_switcher");var Ie={featureSonicQuickSwitcher:g["b"].bool,search:g["b"].func,setPrimaryView:g["b"].func.isRequired,getDraftAndUnreadChannels:g["b"].func.isRequired,getTeamIdForChannelFromAnotherTeam:g["b"].func.isRequired,currentTeamId:g["b"].string.isRequired,closeModal:g["b"].func.isRequired,featureOfflineMode:g["b"].bool.isRequired,telemeter:g["b"].object.isRequired,recordFrecencyEvent:g["b"].func.isRequired,isChannelDeletedMember:g["b"].func.isRequired};var Te={featureSonicQuickSwitcher:false,search:o["noop"]};var Ae=38;var Ne=300;var Pe="qs_result_rendering_ms";var Re="qs_input_change";var Me={open:false,searchQuery:"",results:[],index:0,deletedResults:[],initialFocusSet:false,searchMetaData:[]};var De={entities:{channels:{includePublic:true,includePrivate:true,includeFromAnotherTeam:true,includeMpims:true,includeArchived:true,onlyIfMember:false,searchPreviousNames:true,onlyVisibleMpims:false},members:{includeSelf:true,includeSlackbot:true,includeBots:true,onlyLocalTeam:false,onlyAdmins:false,includeDeleted:true},teams:true,userGroups:false,views:false},limit:24,sort:{preferExactMatch:true,frecency:true,preferChannelsUserBelongsTo:true,selfFirst:true},allowEmptyQuery:true,returnMetadata:true,tiered:true};var xe=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(o["bindAll"])(a,["onInput","renderResult","onShowDeactivatedClick","onItemClick","handleUpOrShiftTabKey","handleDownOrTabKey","handleEnterKey","getBestFormerName"]);a.state=Me;a.searchInputRef=n.a.createRef();return a}h()(t,[{key:"componentDidMount",value:function e(){this.bindKeyCommands();this.setResultsToUnreadsAndDrafts()}},{key:"componentDidUpdate",value:function e(t,a){var r=this.props.telemeter;r.getLatestMark(Re)&&r.measureAndClear(Re,Pe);if(!a.initialFocusSet&&this.searchInputRef.current){this.setInitialFocus();this.searchInputRef.current.focus()}}},{key:"componentWillUnmount",value:function e(){this.unbindKeyCommands()}},{key:"onItemClick",value:function e(){this.openChannelOrDm()}},{key:"onItemHover",value:function e(t){this.state.index!==t&&this.setState(function(){return{index:t}})}},{key:"onShowDeactivatedClick",value:function e(){var t=Object(o["filter"])(this.state.results,function(e){return"hasDeactivated"!==e.id});t=t.concat(this.state.deletedResults);this.setState(function(){return{results:t,deletedResults:[]}})}},{key:"onInput",value:function e(t){this.props.telemeter.mark(Re);var a=t.target.value;this.setState(function(){return{searchQuery:a}});this.search(a)}},{key:"setResultsToUnreadsAndDrafts",value:function e(){this.resetResultsState(this.props.getDraftAndUnreadChannels())}},{key:"setInitialFocus",value:function e(){this.setState(function(){return{initialFocusSet:true}})}},{key:"setSearchMetaData",value:function e(t){this.setState(function(){return{searchMetaData:t}})}},{key:"getBestFormerName",value:function e(t){var a=this.state.searchMetaData;var r=Object(o["find"])(a,["item.id",t]);if(!r)return null;var n=Object(o["get"])(r,"bestPreviousNameMatch");if(!n)return null;return n}},{key:"handleUpOrShiftTabKey",value:function e(t){t.preventDefault();t.stopPropagation();var a=this.state,r=a.index,n=a.results;this.setState(function(){return{index:0===r?n.length-1:r-1}})}},{key:"handleDownOrTabKey",value:function e(t){t.preventDefault();t.stopPropagation();var a=this.state,r=a.index,n=a.results;this.setState(function(){return{index:(r+1)%n.length}})}},{key:"handleEnterKey",value:function e(t){t.preventDefault();this.openChannelOrDm()}},{key:"bindKeyCommands",value:function e(){var t=[{keys:["up","shift+tab"],handler:this.handleUpOrShiftTabKey},{keys:["down","tab"],handler:this.handleDownOrTabKey},{keys:["enter"],handler:this.handleEnterKey}];this.keyCommands||(this.keyCommands=new x["a"](document.body));this.keyCommands.bindAll(t)}},{key:"unbindKeyCommands",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"openChannelOrDm",value:function e(){var t=this.state,a=t.results,r=t.index,n=t.searchQuery;var i=this.props,s=i.currentTeamId,o=i.getTeamIdForChannelFromAnotherTeam;var l=a[r];var c=l.id;if(Object(G["a"])(c)){Object(H["c"])(W["a"],{teamId:c},{reason:"quickswitcher:openChannelOrDm"});return}var u=Object(F["isFromAnotherTeam"])(l);var d=u?o(l):s;this.props.recordFrecencyEvent({id:c,text:n});this.props.setPrimaryView({id:c,teamId:d});this.setState(function(){return Me});this.props.closeModal()}},{key:"search",value:function e(t){var a=this;this.remoteSearchPromise&&this.remoteSearchPromise.isPending()&&this.remoteSearchPromise.cancel();if(!t){this.setResultsToUnreadsAndDrafts();return null}return this.props.search({query:t,options:De}).then(function(e){a.remoteSearchPromise=e.promise;a.setSearchMetaData(e);var t=we(e,a.props.currentTeamId);a.resetResultsState(t);return a.remoteSearchPromise.then(function(e){var t=false;a.setSearchMetaData(e);var r=we(e,a.props.currentTeamId);a.resetResultsState(r,t)})})}},{key:"resetResultsState",value:function e(t){var a=this;var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n=Object(o["partition"])(t,function(e){return Object(L["isDeleted"])(e)||a.props.isChannelDeletedMember(e)}),i=c()(n,2),s=i[0],l=i[1];var u=void 0;var d=void 0;if(s.length>1&&l.length){u=l.concat({id:"hasDeactivated"});d=s}else{u=l.concat(s);d=[]}var p=this.state,h=p.index,v=p.results;var m=0;if(!r&&v.length){var f=v[h];f&&f.id&&(m=Object(o["findIndex"])(u,function(e){return f.id===e.id}))}this.setState(function(){return{results:u,deletedResults:d,index:-1===m?0:m}})}},{key:"renderResult",value:function e(t){var a=this;if(!this.props.featureSonicQuickSwitcher)return null;var r=this.state.results[t].id;var i=this.getBestFormerName(r);var s=t===this.state.index;if("hasDeactivated"===r)return this.renderDeletedOptionRow();var o=y()("p-quick_switcher__searcher_result",{"p-quick_switcher__searcher_result--selected":t===this.state.index});var l=void 0;l=r===Ce["a"].allThreads?n.a.createElement(I["a"],{invert:s,label:Se.t("Threads"),prefix:n.a.createElement(A["b"],{type:"comment-alt",size:"inherit"}),"data-qa":"quick_switcher_result_threads"}):Object(G["a"])(r)?n.a.createElement(Ee,{id:r,isSelected:s}):n.a.createElement(S["a"],{channelId:r,showMemberAvatar:true,invert:s,"data-qa":"quick_switcher_result_channel",displayBestFormerNameOnly:true,bestFormerName:i});return n.a.createElement(T["c"],{onClick:this.onItemClick,onMouseMove:function e(){return a.onItemHover(t)},className:o,"data-qa":"quick_switcher_result"},l)}},{key:"renderEmptyResults",value:function e(){if(!this.props.featureSonicQuickSwitcher)return null;var t=this.state.searchQuery;var a=Se.t("Create a channel named #{channelName}",{channelName:t});var r=Se.t("No matches found. Did you spell it correctly?");return n.a.createElement("div",{className:"p-quick_switcher__empty_results_container","data-qa":"quick_switcher_empty_results"},n.a.createElement("span",{className:"p-quick_switcher__empty_results_label"},r),n.a.createElement(V["a"],null,n.a.createElement(T["d"],{type:"outline",size:"small"},a)))}},{key:"renderDeletedOptionRow",value:function e(){var t=y()("p-quick_switcher__show_deactivated");var a=Se.t("Show { deletedLength, plural, =1 { # deactivated account } other { # deactivated accounts }}",{deletedLength:this.state.deletedResults.length,fallbackHash:"feba4c19a527da3284a69be904d33a90e6fb3f17",fallbackHashNs:"jumper"});return n.a.createElement(T["c"],{onClick:this.onShowDeactivatedClick,className:t},a)}},{key:"renderResultsFromSearcher",value:function e(){var t=this;var a=this.state,r=a.results,i=a.index;this.keys=Object(o["map"])(r,"id");var s=this.keys[i];var l=Math.min(r.length*Ae,Ne);return n.a.createElement("div",{"data-qa":"quick_switcher_results"},n.a.createElement(k["a"],{disableHeight:true},function(e){var a=e.width;return n.a.createElement(w["a"],{width:a,height:l,keys:t.keys,rowRenderer:t.renderResult,itemToScroll:s,animateOnScroll:false})}))}},{key:"renderResults",value:function e(){if(this.state.results.length)return this.renderResultsFromSearcher();if(this.state.searchQuery)return this.renderEmptyResults();return null}},{key:"renderFooter",value:function e(){var t=Se.rt('{iconUpArrow}{iconDownArrow} to navigate {iconEnter} to select <strong className="margin_left_150">esc</strong> to dismiss',{iconUpArrow:n.a.createElement(A["b"],{type:"arrow-large-up",size:"inherit",className:"p-quick_switcher__footer_icon"}),iconDownArrow:n.a.createElement(A["b"],{type:"arrow-large-down",size:"inherit",className:"p-quick_switcher__footer_icon"}),iconEnter:n.a.createElement(A["b"],{type:"enter",size:"inherit",className:"p-quick_switcher__footer_icon margin_left_150"}),fallbackHash:"6073ad556716a850199fe235793ca2e2a12dc636",fallbackHashNs:"jumper"});if(!this.props.featureOfflineMode)return n.a.createElement("div",{className:"t-display-as-micro"},t);var a=Se.rt("{iconOffline} No connection \u2014\xa0some results may not be available.",{iconOffline:n.a.createElement(A["b"],{type:"cloud-offline",size:"inherit",className:"p-quick_switcher__footer_icon p-quick_switcher__footer_icon_offline"})});return n.a.createElement("div",{className:"t-display-as-micro"},n.a.createElement(C["b"],null,t),n.a.createElement(C["a"],null,a))}},{key:"render",value:function e(){if(!this.props.featureSonicQuickSwitcher)return null;return n.a.createElement(j["a"],{showHeader:false,showFooter:true,className:"p-quick_switcher","data-qa":"quick_switcher",showCancelButton:false,showCloseButton:false,showGoButton:false,footerText:this.renderFooter(),overlayClassName:"p-quick_swticher_overlay",titleAria:Se.t("Quick Switcher")},n.a.createElement("input",{placeholder:Se.t("Jump to..."),className:"p-quick_switcher__input","data-qa":"quick_switcher_input",onChange:this.onInput,value:this.state.searchQuery,ref:this.searchInputRef,spellCheck:false}),this.renderResults())}}]);return t}(r["PureComponent"]);xe.displayName="QuickSwitcher";xe.defaultProps=Te;var Fe=function e(t){return{featureSonicQuickSwitcher:Object(P["isFeatureEnabled"])(t,"feature_sonic_quick_switcher"),getDraftAndUnreadChannels:function e(){return Object(R["h"])(t)},getTeamIdForChannelFromAnotherTeam:function e(a){return Object(F["teamIdForChannelFromAnotherTeam"])(t,a)},isChannelDeletedMember:function e(a){return Object(F["isImWithDeletedMember"])(t,a)},currentTeamId:Object(M["c"])(t),featureOfflineMode:Object(P["isFeatureEnabled"])(t,"feature_offline_mode"),telemeter:Object(U["c"])({state:t})}};var Le={search:N["a"],setPrimaryView:D["a"],closeModal:s["closeModal"],recordFrecencyEvent:q["c"]};var Be=Object(O["connect"])(Fe,Le)(xe);var Ue=Be;var qe=a(540);var Ge=a(366);var We=a(1792);var He="quick-switcher";function Ve(e,t){var a=Object(s["getCurrentModals"])(t());if(Object(o["find"])(a,{name:He})){e(Object(s["closeModal"])());return}e(Object(s["openModal"])({element:n.a.createElement(Ue,null),name:He}))}function Ke(e){var t=Object(s["getCurrentModals"])(e);return!!Object(o["find"])(t,{name:He})}var ze=Object(i["b"])("maybe shows quick switcher modal",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.event,n=a.keyCode;r&&r.preventDefault();if(Object(Ge["a"])(t())){var i=void 0;n&&n===qe["codes"].k?i="k":n&&n===qe["codes"].t&&(i="t");e(Object(We["a"])({key:i||"button"}));return true}if(Ve(e,t))return true;return false});ze.propTypes={event:g["b"].object,keyCode:g["b"].number};var Ye=t["a"]=ze},,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(0);var p=a(1);var h=a.n(p);var v=a(13);var m=a(2);var f=a(10);var b=a(1366);var g=a(912);var _=a(100);var y=function e(t,a){var r=Math.min(a||5e5,5e5);if(t.length>r)return Object(m["escapeRegExp"])(t.slice(0,r));return Object(m["escapeRegExp"])(t)};var O=a(204);var k=a(57);var E=a(45);var C=a(2414);var j=a(354);var w=a(392);var S=new f["b"]("help");var I={tickets:d["b"].shape({open:d["b"].number,closed:d["b"].number,unread:d["b"].number}),clogger:d["b"].object.isRequired,helpCenterToken:d["b"].string};var T={tickets:{open:0,closed:0,unread:0},helpCenterToken:d["b"].string};var A="HELP_MODAL_ACTION";var N="/help";var P=function e(t,a){var r={action:"view_request_history",trigger:"click_view_request_history"};t.track(A,r);window.open(Object(O["a"])(N,a))};var R=function e(t,a){var r={action:"view_new_replies",trigger:"click_view_new_replies"};t.track(A,r);window.open(Object(O["a"])(N,a))};var M=function e(t,a){var r={action:"view_open_requests",trigger:"click_view_open_requests"};t.track(A,r);window.open(Object(O["a"])(N,a))};var D=function e(t,a,r){if(t.closed>0&&0===t.unread&&0===t.open)return h.a.createElement("div",null,h.a.createElement("span",null,S.t("No pending requests.")),h.a.createElement("span",{role:"link",tabIndex:0,className:"p-help_modal__requests",onClick:function e(){return P(a,r)},"data-qa":"help_modal_requests_closed"},h.a.createElement("span",{className:"p-help_modal__requests__message bold"},S.t("View your help request history"),".")));return null};var x=function e(t,a,r){if(t>0){var n=t>1?S.t("You have new replies to your help requests."):S.t("You have a new reply to your help request.");return h.a.createElement("div",{role:"link",tabIndex:0,className:"p-help_modal__requests",onClick:function e(){return R(a,r)},"data-qa":"help_modal_requests_unread"},h.a.createElement("span",{className:"p-help_modal__requests_badge unread"},t),h.a.createElement("span",{className:"p-help_modal__requests__message bold"},n))}return null};var F=function e(t,a,r){if(t>0){var n=t>1?S.t("You have open help requests."):S.t("You have an open help request.");return h.a.createElement("div",{role:"link",tabIndex:0,className:"p-help_modal__requests",onClick:function e(){return M(a,r)},"data-qa":"help_modal_requests_read"},h.a.createElement("span",{className:"p-help_modal__requests_badge read"},t),h.a.createElement("span",{className:"p-help_modal__requests__message read bold"},n))}return null};var L=function e(t){return h.a.createElement("div",{className:"display_flex flex_direction_column"},D(t.tickets,t.clogger,t.helpCenterToken),h.a.createElement("div",{className:t.tickets.unread>0?"padding_top_50":""},x(t.tickets.unread,t.clogger,t.helpCenterToken)),h.a.createElement("div",{className:t.tickets.closed>0||t.tickets.unread>0?"padding_top_50":""},F(t.tickets.open,t.clogger,t.helpCenterToken)))};L.displayName="TicketsStatus";L.defaultProps=T;var B=L;var U=a(904);var q=a(574);var G=a(22);var W=a(96);var H=function e(t){return h.a.createElement("div",{className:"padding_right_75"},h.a.createElement("div",{role:"link",tabIndex:"0","data-qa":"article-"+t.article.id,className:"p-help_modal__list__item display_flex align_items_center justify_content_between "+(t.isFocus?"p-help_modal__list__item__focus":""),key:t.article.id+"-list-item",onClick:function e(){t.onClickArticle(t.article.url)},onKeyDown:function e(a){13===a.keyCode&&t.onClickArticle(t.article.url)}},h.a.createElement("div",{className:"p-help_modal__list__item__title"},t.article.title),h.a.createElement(G["b"],{type:"enter",className:"p-help_modal__list__icon"})))};H.displayName="Article";H.defaultProps={article:{},isFocus:false,onClickArticle:m["noop"]};var V=H;var K=a(3126);var z=new f["b"]("help");var Y={query:d["b"].string,helpCenterToken:d["b"].string,articles:d["b"].arrayOf(d["b"].shape({id:d["b"].number,images:d["b"].array,label_names:d["b"].array,title:d["b"].node,url:d["b"].string})),tickets:d["b"].shape({open:d["b"].number,closed:d["b"].number,unread:d["b"].number}),onClose:d["b"].func,onQueryChange:d["b"].func,showKeyboardShortcuts:d["b"].func,isLoading:d["b"].bool,trigger:d["b"].string.isRequired,clogger:d["b"].object.isRequired};var Q={query:"",helpCenterToken:"",articles:[],tickets:{closed:0,read:0,unread:0},onClose:m["noop"],onQueryChange:m["noop"],showKeyboardShortcuts:m["noop"],isLoading:false};var J=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={query:a.props.query,articles:a.props.articles,isModalOpen:true,focusFirstResult:true,isLoading:a.props.isLoading};a.zdLocale=Object(k["a"])();Object(m["bindAll"])(a,["onSearchInputChange","onSearchInputSubmit","onSearchInputBlur","onListMouseEnter","onClickArticle","onClickBrowseLink","onClickContactUsButton","onClickShortcutsButton","renderArticles"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.trigger,r=t.clogger;r.track("HELP_MODAL_ACTION",{action:"open_modal",trigger:a})}},{key:"componentWillReceiveProps",value:function e(t){t.articles!==this.state.articles&&this.setState(function(){return{articles:t.articles,isLoading:t.isLoading}})}},{key:"onListMouseEnter",value:function e(){this.setState(function(){return{focusFirstResult:false}})}},{key:"onSearchInputChange",value:function e(t){var a=t.target.value;this.setState(function(){return{query:a,focusFirstResult:true}});this.props.onQueryChange(a)}},{key:"onSearchInputSubmit",value:function e(){this.state.articles.length&&this.openLinkInNewWindow(Object(O["a"])(this.state.articles[0].url,this.props.helpCenterToken))}},{key:"onClickArticle",value:function e(t){this.openLinkInNewWindow(Object(O["a"])(t,this.props.helpCenterToken))}},{key:"onClickBrowseLink",value:function e(){var t=this.state.query;var a=this.props.clogger;var r=Object(O["b"])({zdLocale:this.zdLocale,query:t,sidTrackingToken:this.props.helpCenterToken});t&&a.track("HELP_MODAL_SEARCH",{search_terms:t});a.track("HELP_MODAL_ACTION",{action:"browse_all",trigger:"click_browse_all"});window.open(r)}},{key:"onClickContactUsButton",value:function e(){var t="/help/requests/new";var a=this.props.clogger;var r="HELP_MODAL_ACTION";var n={action:"submit_new_request",trigger:"click_submit_new_request"};a.track(r,n);window.open(Object(O["a"])(t,this.props.helpCenterToken))}},{key:"onClickShortcutsButton",value:function e(){var t=this.props.clogger;var a="HELP_MODAL_ACTION";var r={action:"keyboard_shorcuts",trigger:"click_keyboard_shorcuts"};this.setState(function(){return{isModalOpen:false}});t.track(a,r);this.props.showKeyboardShortcuts()}},{key:"onSearchInputBlur",value:function e(){this.setState(function(){return{focusFirstResult:false}})}},{key:"openLinkInNewWindow",value:function e(t){var a=this.props.clogger;this.state.query&&a.track("HELP_MODAL_SEARCH",{search_terms:this.state.query,locale:this.zdLocale});a.track("HELP_MODAL_ZD_HIT",{zd_article_url:t});window.open(Object(O["a"])(t,this.props.helpCenterToken))}},{key:"renderArticles",value:function e(t){var a=this.state.articles;var r=a[t];return h.a.createElement(V,{article:r,isFocus:this.state.focusFirstResult&&0===t,onClickArticle:this.onClickArticle})}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.query,n=a.articles,i=a.isModalOpen;var s=this.props,o=s.tickets,l=s.clogger,c=s.onClose;this.keys=Object(m["map"])(n,"id").map(function(e){return e.toString()});return h.a.createElement(j["a"],{isOpen:i,showCancelButton:false,showGoButton:false,onCancel:c,modalClasses:"p-help_modal",contentLabel:"help-modal","data-qa":"help_modal"},h.a.createElement("div",{"data-qa":"help_modal_contents"},h.a.createElement(q["b"],{className:"p-help_modal__shortcuts__button c-button--outline",type:"outline",onClick:this.onClickShortcutsButton,"data-qa":"help_modal_shortcuts_button"},h.a.createElement(G["b"],{type:"keyboard",className:"small_right_margin"}),h.a.createElement("strong",null,z.t("Keyboard shortcuts"))),h.a.createElement("div",{className:"display_flex align_items_baseline justify_content_between padding_top_200"},h.a.createElement("h1",{className:"p-help_modal_title"},z.t("How can we help?")),h.a.createElement("div",{tabIndex:0,role:"link",className:"p-help_modal__browse display_flex align_items_end",onClick:this.onClickBrowseLink,"data-qa":"help_modal_browse"},h.a.createElement("span",{className:"p-help_modal__browse__text"},z.t("Browse all answers")),h.a.createElement(G["b"],{type:"arrow-large-right",className:"padding_left_100 p-help_modal__browse__icon"}))),h.a.createElement(w["a"],{placeholder:z.t("Search the Help Center"),value:r,icon:"search",autoFocus:true,hasResetButton:true,onChange:this.onSearchInputChange,onSubmit:this.onSearchInputSubmit,blurOnSubmit:true,className:"margin_top_200 margin_bottom_100",size:"large",onBlur:this.onSearchInputBlur}),r?null:h.a.createElement("div",{className:"p-help_modal__popular_topics padding_bottom_100 bold"},z.t("Popular help topics")),h.a.createElement("div",{role:"list",className:"p-help_modal__list display_flex flex_direction_column justify_content_between",onMouseEnter:this.onListMouseEnter},this.state.isLoading?h.a.createElement(W["a"],{size:"large",color:"blue",noMargin:true}):h.a.createElement("div",{className:"full_height"},h.a.createElement(C["a"],null,function(e){var a=e.width,r=e.height;return h.a.createElement(U["a"],{width:a,height:r,keys:t.keys,rowRenderer:t.renderArticles})}))),h.a.createElement("div",{className:"p-help_modal__footer display_flex align_items_center justify_content_between"},h.a.createElement("div",{className:"p-help_modal__footer_tickets display_flex flex_direction_column"},h.a.createElement(B,{tickets:o,clogger:l,helpCenterToken:this.props.helpCenterToken})),h.a.createElement("div",{className:"p-help_modal__footer_contact"},h.a.createElement("div",null,h.a.createElement("span",{className:"p-help_modal__contact_us__message"},z.t("Can\u2019t find what you need, or have some feedback?")),h.a.createElement(q["b"],{type:"primary",size:"medium",className:"margin_left_100 p-help_modal__contact_us__button",onClick:this.onClickContactUsButton,"data-qa":"help_modal_contact_button"},z.t("Contact Us")))))))}}]);return t}(p["Component"]);J.displayName="HelpModal";J.defaultProps=Q;var Z=J;var X=new f["b"]("help");var $={query:d["b"].string,helpCenterTrackingToken:d["b"].string,fetchHelpIssues:d["b"].func,fetchHelpArticles:d["b"].func,fetchHelpCenterTrackingToken:d["b"].func,showKeyboardShortcuts:d["b"].func,trigger:d["b"].string.isRequired,clogger:d["b"].object.isRequired,onClose:d["b"].func};var ee={query:"",helpCenterTrackingToken:"",fetchHelpIssues:m["noop"],fetchHelpArticles:m["noop"],fetchHelpCenterTrackingToken:m["noop"],showKeyboardShortcuts:m["noop"],onClose:m["noop"]};var te=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={query:a.props.query,articles:[],tickets:{open:0,closed:0,unread:0},isLoading:true};a.allArticles=[];a.onQueryChange=a.onQueryChange.bind(a);a.zdLocale=Object(k["a"])();return a}s()(t,[{key:"componentDidMount",value:function e(){this.fetchHelpIssues();this.fetchHelpArticles();this.fetchHelpCenterTrackingToken()}},{key:"onQueryChange",value:function e(t){var a=t?this.filterArticlesByQuery(t):this.popularArticles;if(t&&a.length<7){var r=Object(O["b"])({query:t,zdLocale:this.zdLocale,sidTrackingToken:this.props.helpCenterTrackingToken});a.push({id:-99999,images:[],label_names:[],title:X.rt('Search for "{query}" on the Help Center',{query:t}),url:r})}this.setState(function(){return{query:t,articles:a}})}},{key:"filterPopularArticles",value:function e(t){var a=[];t.forEach(function(e){e.popular&&a.push(e)});a.sort(function(e,t){if(void 0===e.order)return 1;if(void 0===t.order)return-1;return e.order-t.order});return a}},{key:"filterArticlesByQuery",value:function e(t){var a=y(t);var r=new RegExp(a,"i");var n=-1;var i=this.allArticles.filter(function(e,t){if(e.title.toLowerCase()===a.toLowerCase()){n=t;return false}return e.title.match(r)});-1!==n&&i.unshift(this.allArticles[n]);return i}},{key:"fetchHelpIssues",value:function e(){var t=this;this.props.fetchHelpIssues().then(function(e){var a=e.ok,r=e.issues;if(a&&r){var n={open:0,closed:0,unread:0};r.forEach(function(e){"unread"===e.state?n.unread+=1:"open"===e.state?n.open+=1:(e.is_resolved||e.is_closed)&&(n.closed+=1)});t.setState(function(){return{tickets:n}})}})}},{key:"processArticles",value:function e(t){var a=this;this.allArticles=JSON.parse(t.articles).articles;this.popularArticles=this.filterPopularArticles(this.allArticles);this.state.query?this.setState(function(){return{articles:a.filterArticlesByQuery(a.props.query),isLoading:false}}):this.setState(function(){return{articles:a.popularArticles,isLoading:false}})}},{key:"fetchHelpArticles",value:function e(){var t=this;this.props.fetchHelpArticles({locale:this.zdLocale}).then(function(e){t.processArticles(e)})}},{key:"fetchHelpCenterTrackingToken",value:function e(){this.props.helpCenterTrackingToken||this.props.fetchHelpCenterTrackingToken()}},{key:"render",value:function e(){var t=this.state,a=t.articles,r=t.query,n=t.tickets,i=t.isLoading;var s=this.props,o=s.trigger,l=s.clogger,c=s.onClose;return h.a.createElement(Z,{articles:a,query:r,helpCenterToken:this.props.helpCenterTrackingToken,tickets:n,onQueryChange:this.onQueryChange,onClose:c,showKeyboardShortcuts:this.props.showKeyboardShortcuts,isLoading:i,trigger:o,clogger:l})}}]);return t}(p["Component"]);te.displayName="HelpModalContainer";te.defaultProps=ee;var ae=function e(t){return{clogger:Object(E["a"])({state:t}),helpCenterTrackingToken:Object(g["getHelpCenterTrackingToken"])(t)}};var re={fetchHelpIssues:b["c"],fetchHelpArticles:b["a"],fetchHelpCenterTrackingToken:b["b"],showKeyboardShortcuts:_["h"]};var ne=Object(v["connect"])(ae,re)(te);var ie=t["a"]=ne},,,,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(0);var v=a(13);var m=a(38);var f=a(34);var b=a(4);var g=a(10);var _=a(773);var y=a(220);var O=a(923);var k=a(141);var E=a(2);var C=a(865);var j=a(20);var w=Object(j["b"])("TS.ui.comments.startDelete");var S=a(22);var I=a(66);var T=a(128);var A=new g["b"]("comments");var N={isStarred:h["b"].bool,updateStar:h["b"].func,commentId:h["b"].string,fileId:h["b"].string,featureReactThreads:h["b"].bool};var P={isStarred:false,updateStar:E["noop"],commentId:void 0,fileId:void 0,featureReactThreads:false};var R=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderMenu=a.renderMenu.bind(a);a.toggleStar=a.toggleStar.bind(a);a.deleteComment=a.deleteComment.bind(a);return a}s()(t,[{key:"toggleStar",value:function e(){var t=this.props,a=t.commentId,r=t.fileId,n=t.isStarred;if(!a||!r)return;this.props.updateStar(!n,{file_comment:a,file_comment_file:r})}},{key:"deleteComment",value:function e(){var t=this.props,a=t.commentId,r=t.fileId;if(!a||!r)return;w(r,a)}},{key:"renderMenu",value:function e(t){if(!this.props.featureReactThreads)return null;var a=this.props.isStarred;return p.a.createElement(I["f"],t,p.a.createElement(I["b"],{label:a?A.t("Unstar this file comment"):A.t("Star this file comment"),onSelected:this.toggleStar}),p.a.createElement(I["d"],null),p.a.createElement(I["b"],{label:A.t("Delete comment"),danger:true,onSelected:this.deleteComment}))}},{key:"render",value:function e(){if(!this.props.featureReactThreads)return null;return p.a.createElement(I["e"],{renderMenu:this.renderMenu,position:"left-bottom"},p.a.createElement(T["a"],{className:"p-comment__actions","aria-label":A.t("Show more actions")},p.a.createElement(S["b"],{type:"cog",size:"inherit"})))}}]);return t}(d["PureComponent"]);R.displayName="CommentActions";R.defaultProps=P;var M=Object(v["connect"])(function(e){return{featureReactThreads:Object(b["isFeatureEnabled"])(e,"feature_react_threads")}},{updateStar:C["a"]})(R);var D=a(3172);var x=new g["b"]("comments");var F={featureFileThreads:h["b"].bool,featureReactThreads:h["b"].bool,time24:h["b"].bool,comment:h["b"].shape({id:h["b"].string,user:h["b"].string,timestamp:h["b"].number,comment:h["b"].string}).isRequired,fileId:h["b"].string};var L={featureFileThreads:true,featureReactThreads:false,time24:false,fileId:void 0};var B=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.comment,r=t.time24,n=t.featureFileThreads,i=t.featureReactThreads,s=t.fileId;if(!n&&!Object(m["a"])())return null;var o=a.user,l=a.timestamp,c=a.comment,u=a.is_starred,d=a.id;return p.a.createElement("div",{className:"p-comment"},p.a.createElement("div",{className:"p-comment__header"},o?p.a.createElement(O["a"],{userId:o}):null,p.a.createElement("span",{className:"p-comment__timestamp"},x.t("{date} at {time}",{date:Object(_["a"])(l,{shortenMonth:true}),time:Object(y["a"])(l,{do24hrTime:r})})),i&&p.a.createElement(M,{isStarred:u,commentId:d,fileId:s})),p.a.createElement("div",{className:"p-comment__body"},p.a.createElement(k["a"],{text:c,memberId:o})))}}]);return t}(d["PureComponent"]);B.displayName="Comment";B.defaultProps=L;function U(e){return{featureFileThreads:Object(b["isFeatureEnabled"])(e,"feature_file_threads"),featureReactThreads:Object(b["isFeatureEnabled"])(e,"feature_react_threads"),time24:Object(f["f"])(e,"time24")}}var q=t["a"]=Object(v["connect"])(U)(B)},,function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(2);var v=a(1);var m=a.n(v);var f=a(13);var b=a(16);var g=a.n(b);var _=a(0);var y=a(35);var O=a(236);var k=a(10);var E=a(28);var C=a(282);var j=a(863);var w=a(3170);var S=new k["b"]("files");var I={status:_["b"].oneOf([O["IDLE"],O["UPLOADING"],O["PROCESSING"],O["COMPLETE"],O["CANCELED"]]),fileName:_["b"].string,fileCount:_["b"].number,percentComplete:_["b"].number,cancelable:_["b"].bool,cancelUpload:_["b"].func,isRetry:_["b"].bool,teamId:_["b"].string};var T={fileName:"",fileCount:0,percentComplete:0,status:O["UPLOADING"],cancelable:false,cancelUpload:h["noop"],isRetry:false,teamId:void 0};var A=function(e){p()(t,e);u()(t,null,[{key:"renderComplete",value:function e(){var t=S.t("Processing uploaded file\u2026 complete!");return m.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},m.a.createElement("div",{className:"p-file_upload_banner__text"},t))}}]);function t(e){s()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.cancel=a.cancel.bind(a);a.clearOverrides=a.clearOverrides.bind(a);a.doneProlongingStatus=a.doneProlongingStatus.bind(a);a.state={statusOverride:null,fileNameOverride:null,timer:null,fading:false};return a}u()(t,[{key:"componentWillReceiveProps",value:function e(t){var a=this;var r=[O["COMPLETE"],O["CANCELED"]];this.props.status!==t.status&&Object(h["includes"])(r,t.status)&&this.setState(function(){return{statusOverride:t.status,fileNameOverride:t.fileName,timer:setTimeout(a.doneProlongingStatus,1e3)}})}},{key:"componentWillUnmount",value:function e(){this.state.timer&&clearTimeout(this.state.timer)}},{key:"getStatus",value:function e(){var t=this.props.status;var a=this.state.statusOverride;return a||t}},{key:"getFileName",value:function e(){var t=this.props.fileName;var a=this.state.fileNameOverride;return a||t}},{key:"cancel",value:function e(){var t=this.props.teamId;var a=this.props.cancelUpload;var r=Object(j["a"])(t);a=r.cancelCurrentUpload.bind(r);setTimeout(function(){a()},1)}},{key:"clearOverrides",value:function e(){this.setState(function(){return{statusOverride:null,fileNameOverride:null,timer:null,fading:false}})}},{key:"doneProlongingStatus",value:function e(){var t=this;this.props.status===O["IDLE"]?this.setState(function(){return{fading:true,timer:setTimeout(t.clearOverrides,250)}}):this.clearOverrides()}},{key:"renderMultiFileUploadComplete",value:function e(){var t=this.props.fileCount;var a=S.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026 complete!",{fileCount:t});return m.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},m.a.createElement("div",{className:"p-file_upload_banner__text"},a))}},{key:"renderCanceled",value:function e(){var t=this.props.fileCount;var a=this.getFileName();var r=S.t("Canceling {fileName}\u2026",{fileName:Object(k["o"])(a)});t>1&&(r=S.t("Canceling upload\u2026"));return m.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--canceled"},m.a.createElement("div",{className:"p-file_upload_banner__text"},r))}},{key:"renderUploading",value:function e(){var t=this.props,a=t.fileName,r=t.fileCount,n=t.percentComplete,i=t.cancelable,s=t.isRetry;var o=this.getStatus();var l=o===O["PROCESSING"]||n>=99;var c=void 0;if(l)c=S.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026",{fileCount:r});else{if(s){c=S.t("Re-uploading {fileName}",{fileName:Object(k["o"])(a)});r>1&&(c=S.t("Re-uploading {fileCount} files",{fileCount:r}))}else{c=S.t("Uploading {fileName}",{fileName:Object(k["o"])(a)});r>1&&(c=S.t("Uploading {fileCount} files",{fileCount:r}))}c+="\u2026"+n+"%"}var u=g()("p-file_upload_banner__progress_inner",{"p-file_upload_banner__progress_inner--animated":l});var d={width:n+"%"};var p=null;i&&!l&&(p=m.a.createElement(E["c"],{key:"cancel",className:"p-file_upload_banner__cancel",onClick:this.cancel},S.t("cancel")));return[m.a.createElement("div",{key:"bar",className:"p-file_upload_banner__progress"},m.a.createElement("span",{className:u,style:d})),m.a.createElement("div",{key:"text",className:"p-file_upload_banner__text"},c),p]}},{key:"render",value:function e(){var t=this.getStatus();var a=this.state.fading;if(t===O["IDLE"])return null;var r=void 0;r=t===O["UPLOADING"]||t===O["PROCESSING"]?this.renderUploading():t===O["COMPLETE"]?this.renderMultiFileUploadComplete():this.renderCanceled();var n=g()("p-file_upload_banner p-message_pane__banner",{"p-file_upload_banner--fading":a});return m.a.createElement("div",{className:n},r)}}]);return t}(v["PureComponent"]);A.displayName="FileUploadBanner";A.defaultProps=T;function N(e){var t=Object(O["getFileUploadState"])(e);var a=Object(y["d"])(e);return n()({},t,{teamId:a.id,cancelUpload:C["a"]})}var P=Object(f["connect"])(N)(A);var R=t["a"]=P},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(3);var p=a.n(d);var h=a(0);var v=a(1);var m=a.n(v);var f=a(2);var b=a(354);var g={stepIndex:h["b"].number,steps:h["b"].arrayOf(h["b"].shape(p()({},b["a"].propTypes))).isRequired,isSteppingBack:h["b"].bool,breadcrumbTitles:h["b"].arrayOf(h["b"].string),modalClasses:h["b"].string,onCancel:h["b"].func.isRequired,position:h["b"].string,isOpen:h["b"].bool,showOpenTransition:h["b"].bool,showCloseTransition:h["b"].bool};var _={stepIndex:0,isSteppingBack:false,breadcrumbTitles:[],modalClasses:"",position:null,isOpen:true,showOpenTransition:true,showCloseTransition:true};var y=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClickBack=a.onClickBack.bind(a);a.onClickGo=a.onClickGo.bind(a);a.state={stepIndex:a.props.stepIndex,isSteppingBack:a.props.isSteppingBack};return a}s()(t,[{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateStepState(t.stepIndex)}},{key:"onClickGo",value:function e(){var t=this.state.stepIndex;var a=this.getStep(t);if(a.onGo){a.onGo();return}this.goToNextStep()}},{key:"onClickBack",value:function e(){var t=this.state.stepIndex;var a=this.getStep(t);if(a.onBack){a.onBack();return}this.goToPreviousStep()}},{key:"setStepDirection",value:function e(t){this.setState(function(){return{isSteppingBack:t}})}},{key:"getIndex",value:function e(){return this.state.stepIndex}},{key:"setIndex",value:function e(t){this.setState(function(){return{stepIndex:t}})}},{key:"getStepNumber",value:function e(){return this.getIndex()+1}},{key:"setStepNumber",value:function e(t){this.setIndex(t-1)}},{key:"getCurrentStep",value:function e(){return this.getStep(this.state.stepIndex)}},{key:"getStep",value:function e(t){var a=this.props.steps;return a[t]}},{key:"getStepContent",value:function e(){var t=this.getCurrentStep();if(Object(f["isFunction"])(t.children))return t.children();return t.children}},{key:"maybeUpdateStepState",value:function e(t){var a=t!==this.props.stepIndex;if(a){this.setIndex(t);var r=t<this.props.stepIndex;this.setStepDirection(r)}}},{key:"isModalSteppingBack",value:function e(){return this.state.isSteppingBack}},{key:"goToNextStep",value:function e(){var t=this.props.steps;this.setState(function(e){var a=e.stepIndex+1;if(a<t.length)return{stepIndex:a,isSteppingBack:false};return e})}},{key:"goToPreviousStep",value:function e(){this.setState(function(e){var t=e.stepIndex-1;if(e.stepIndex>=0)return{stepIndex:t,isSteppingBack:true};return e})}},{key:"render",value:function e(){var t=this.getCurrentStep();var a=this.getIndex();var r=this.isModalSteppingBack();var n=this.props,i=n.breadcrumbTitles,s=n.isOpen,o=n.showOpenTransition,l=n.showCloseTransition,c=n.position;var u=p()({},t,{isSteppingBack:r,currentStepIndex:a,breadcrumbTitles:i,isOpen:s,showCloseTransition:l,showOpenTransition:o,position:c,onGo:this.onClickGo,onBack:this.onClickBack,modalClasses:this.props.modalClasses,onCancel:this.props.onCancel});return m.a.createElement(b["a"],u,this.getStepContent())}}]);return t}(v["PureComponent"]);y.displayName="SteppedFullscreenModal";y.defaultProps=_;var O=y;var k=t["a"]=O},,,function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(13);var o=a(95);var l=a(2);var c=a(16);var u=a.n(c);var d=a(4);var p=a(50);var h=a(10);var v=a(1732);var m=a(17);var f=new h["b"]("threads");var b={className:r["b"].string,participantNames:r["b"].arrayOf(r["b"].string).isRequired,replyUsersCount:r["b"].number.isRequired,replyCount:r["b"].number,prefixWithReplyCount:r["b"].bool,includesSelf:r["b"].bool,broadcastPreabmle:r["b"].bool};var g={className:void 0,replyCount:0,prefixWithReplyCount:false,includesSelf:false,broadcastPreabmle:false};function _(e){var t=e.participantNames,a=e.includesSelf,r=e.replyCount,n=e.replyUsersCount,i=e.prefixWithReplyCount,s=e.broadcastPreabmle;if(s&&1===r)return f.rt("1 reply");if(a)switch(n){case 1:if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from you",{replyCount:r});return f.t("Just you");case 2:if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName} and you",{replyCount:r,userName:t[0]});return f.rt("{userName} and you",{userName:t[0]});default:if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and you",{replyCount:r,userName1:t[0],userName2:t[1]});return f.rt("{userName1}, {userName2}, and you",{userName1:t[0],userName2:t[1]})}var o=Object(h["g"])(t,{noEscape:true}).join("");if(i)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {names}",{replyCount:r,names:o});return o}function y(e){var t=e.participantNames,a=e.replyUsersCount,r=e.replyCount,n=e.prefixWithReplyCount;var s=a-2;var o=Object(l["drop"])(t,2);o.length<s&&o.push(f.rt("others"));var c=Object(h["g"])(o,{noEscape:true}).join("");if(n)return f.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{replyCount:r,userName1:t[0],userName2:t[1],numOthers:s},function(e){var t=e.text;return i.a.createElement(p["c"],{tip:c},i.a.createElement("span",null,t))});return f.rt("{userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{userName1:t[0],userName2:t[1],numOthers:s},function(e){var t=e.text;return i.a.createElement(p["c"],{tip:c},i.a.createElement("span",null,t))})}function O(e){var t=e.className,a=e.participantNames,r=e.replyUsersCount,n=e.replyCount,s=e.prefixWithReplyCount,o=e.includesSelf,l=e.broadcastPreabmle;if(0===r)return null;var c=u()("p-thread_participant_list",t);return i.a.createElement("span",{className:c,"data-qa":"thread_participant_list"},r<=3?_({participantNames:a,replyCount:n,replyUsersCount:r,prefixWithReplyCount:s,includesSelf:o,broadcastPreabmle:l}):y({participantNames:a,replyCount:n,replyUsersCount:r,prefixWithReplyCount:s}))}O.displayName="ThreadParticipantList";O.defaultProps=g;var k=Object(o["pure"])(O);function E(e,t){var a=t.replyUsers;var r=t.replyUsersCount;var n=Object(d["getCurrentUserId"])(e);var i=Object(l["includes"])(a,n);var s=Object(l["includes"])(a,m["REVOKED_ID"]);var o=Object(v["a"])(e,a);r||(r=a.length);return{participantNames:s?Object(l["reject"])(o,function(e){return e===m["REVOKED_USER_NAME"]}):o,replyUsersCount:s?r-1:r,includesSelf:i}}var C=Object(s["connect"])(E)(O);var j=t["a"]=C},,,function(e,t,a){"use strict";var r=a(58);var n=a.n(r);var i=a(2);var s=a.n(i);t["a"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.time,a=e.time24;if(!t||Object(i["isUndefined"])(a))return"";if(a)return t;var r=t.split(":"),s=n()(r,2),o=s[0],l=s[1];var c=parseInt(o,10);if(c>12)return c-12+":"+l+" PM";if(c>9)return t+" AM";if(0===c)return"12:"+l+" AM";return c+":"+l+" AM"}},,,,,,function(e,t,a){"use strict";a.r(t);a.d(t,"setShouldLogAppBootMetrics",function(){return p});a.d(t,"setShouldLogTeamSwitchMetrics",function(){return h});a.d(t,"shouldLogAppBootMetrics",function(){return f});a.d(t,"shouldLogTeamSwitchMetrics",function(){return b});var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(0);var l=a(18);var c=a(36);var u=a(14);var d;var p=Object(l["b"])("Have we already sent boot metrics");p.propTypes=o["b"].bool.isRequired;var h=Object(l["b"])("Should we log team switch metrics");h.propTypes=o["b"].bool.isRequired;var v={shouldLogAppBootMetrics:true,shouldLogTeamSwitchMetrics:false};var m=Object(c["b"])((d={},n()(d,p,function(e,t){return s()({},e,{shouldLogAppBootMetrics:t})}),n()(d,h,function(e,t){return s()({},e,{shouldLogTeamSwitchMetrics:t})}),d),v,{persistenceEnabled:true});m.propTypes={shouldLogAppBootMetrics:o["b"].bool,shouldLogTeamSwitchMetrics:o["b"].bool};t["default"]=m;var f=Object(u["b"])(function(e){return e&&e.telemetry&&e.telemetry.shouldLogAppBootMetrics});var b=Object(u["b"])(function(e){return e&&e.telemetry&&e.telemetry.shouldLogTeamSwitchMetrics})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";t.__esModule=true;t.INIT_ACTION=t.ActionCreators=t.ActionTypes=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.liftAction=y;t.liftReducerWith=O;t.unliftState=k;t.unliftStore=E;t.default=C;var i=a(2139);var s=h(i);var o=a(2170);var l=h(o);var c=a(2174);var u=h(c);var d=a(844);var p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}var v=t.ActionTypes={PERFORM_ACTION:"PERFORM_ACTION",RESET:"RESET",ROLLBACK:"ROLLBACK",COMMIT:"COMMIT",SWEEP:"SWEEP",TOGGLE_ACTION:"TOGGLE_ACTION",SET_ACTIONS_ACTIVE:"SET_ACTIONS_ACTIVE",JUMP_TO_STATE:"JUMP_TO_STATE",JUMP_TO_ACTION:"JUMP_TO_ACTION",REORDER_ACTION:"REORDER_ACTION",IMPORT_STATE:"IMPORT_STATE",LOCK_CHANGES:"LOCK_CHANGES",PAUSE_RECORDING:"PAUSE_RECORDING"};var m=t.ActionCreators={performAction:function e(t){if(!(0,u.default)(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');return{type:v.PERFORM_ACTION,action:t,timestamp:Date.now()}},reset:function e(){return{type:v.RESET,timestamp:Date.now()}},rollback:function e(){return{type:v.ROLLBACK,timestamp:Date.now()}},commit:function e(){return{type:v.COMMIT,timestamp:Date.now()}},sweep:function e(){return{type:v.SWEEP}},toggleAction:function e(t){return{type:v.TOGGLE_ACTION,id:t}},setActionsActive:function e(t,a){var r=arguments.length<=2||void 0===arguments[2]||arguments[2];return{type:v.SET_ACTIONS_ACTIVE,start:t,end:a,active:r}},reorderAction:function e(t,a){return{type:v.REORDER_ACTION,actionId:t,beforeActionId:a}},jumpToState:function e(t){return{type:v.JUMP_TO_STATE,index:t}},jumpToAction:function e(t){return{type:v.JUMP_TO_ACTION,actionId:t}},importState:function e(t,a){return{type:v.IMPORT_STATE,nextLiftedState:t,noRecompute:a}},lockChanges:function e(t){return{type:v.LOCK_CHANGES,status:t}},pauseRecording:function e(t){return{type:v.PAUSE_RECORDING,status:t}}};var f=t.INIT_ACTION={type:"@@INIT"};function b(e,t,a){var r=a;var i=void 0;try{r=e(a,t)}catch(e){i=e.toString();"object"===("undefined"===typeof window?"undefined":n(window))&&("undefined"!==typeof window.chrome||"undefined"!==typeof window.process&&"renderer"===window.process.type)?setTimeout(function(){throw e}):console.error(e)}return{state:r,error:i}}function g(e,t,a,r){if(!r)return{state:e(a,t)};return b(e,t,a)}function _(e,t,a,r,n,i,s,o){if(!e||-1===t||t>=e.length&&e.length===i.length)return e;var l=e.slice(0,t);for(var c=t;c<i.length;c++){var u=i[c];var d=n[u].action;var p=l[c-1];var h=p?p.state:r;var v=s.indexOf(u)>-1;var m=void 0;m=v?p:o&&p&&p.error?{state:h,error:"Interrupted by an error up the chain"}:g(a,d,h,o);l.push(m)}return l}function y(e){return m.performAction(e)}function O(e,t,a,n){var i={monitorState:a(void 0,{}),nextActionId:1,actionsById:{0:y(f)},stagedActionIds:[0],skippedActionIds:[],committedState:t,currentStateIndex:0,computedStates:[],isLocked:true===n.shouldStartLocked,isPaused:false===n.shouldRecordChanges};return function(o,c){var u=o||i;var d=u.monitorState;var p=u.actionsById;var h=u.nextActionId;var m=u.stagedActionIds;var b=u.skippedActionIds;var O=u.committedState;var k=u.currentStateIndex;var E=u.computedStates;var C=u.isLocked;var j=u.isPaused;o||(p=r({},p));function w(e){var t=e;var a=m.slice(1,t+1);for(var r=0;r<a.length;r++){if(E[r+1].error){t=r;a=m.slice(1,t+1);break}delete p[a[r]]}b=b.filter(function(e){return-1===a.indexOf(e)});m=[0].concat(m.slice(t+1));O=E[t].state;E=E.slice(t);k=k>t?k-t:0}function S(t){var i;var s=void 0;if(t){s=E[k];d=a(d,c)}else s=g(e,c.action,E[k].state,false);if(!n.pauseActionType||1===h)return{monitorState:d,actionsById:{0:y(f)},nextActionId:1,stagedActionIds:[0],skippedActionIds:[],committedState:s.state,currentStateIndex:0,computedStates:[s],isLocked:C,isPaused:true};if(t){k===m.length-1&&k++;m=[].concat(m,[h]);h++}return{monitorState:d,actionsById:r({},p,(i={},i[h-1]=y({type:n.pauseActionType}),i)),nextActionId:h,stagedActionIds:m,skippedActionIds:b,committedState:O,currentStateIndex:k,computedStates:[].concat(E.slice(0,m.length-1),[s]),isLocked:C,isPaused:true}}var I=0;switch(c.type){case v.PERFORM_ACTION:if(C)return o||i;if(j)return S();n.maxAge&&m.length===n.maxAge&&w(1);k===m.length-1&&k++;var T=h++;p[T]=c;m=[].concat(m,[T]);I=m.length-1;break;case v.RESET:p={0:y(f)};h=1;m=[0];b=[];O=t;k=0;E=[];break;case v.COMMIT:p={0:y(f)};h=1;m=[0];b=[];O=E[k].state;k=0;E=[];break;case v.ROLLBACK:p={0:y(f)};h=1;m=[0];b=[];k=0;E=[];break;case v.TOGGLE_ACTION:var A=function(){var e=c.id;var t=b.indexOf(e);b=-1===t?[e].concat(b):b.filter(function(t){return t!==e});I=m.indexOf(e);return"break"}();if("break"===A)break;case v.SET_ACTIONS_ACTIVE:var N=c.start;var P=c.end;var R=c.active;var M=[];for(var D=N;D<P;D++)M.push(D);b=R?(0,s.default)(b,M):(0,l.default)(b,M);I=m.indexOf(N);break;case v.JUMP_TO_STATE:k=c.index;I=Infinity;break;case v.JUMP_TO_ACTION:var x=m.indexOf(c.actionId);-1!==x&&(k=x);I=Infinity;break;case v.SWEEP:m=(0,s.default)(m,b);b=[];k=Math.min(k,m.length-1);break;case v.REORDER_ACTION:var F=c.actionId;var L=m.indexOf(F);if(L<1)break;var B=c.beforeActionId;var U=m.indexOf(B);if(U<1){var q=m.length;U=B>m[q-1]?q:1}var G=L-U;if(G>0){m=[].concat(m.slice(0,U),[F],m.slice(U,L),m.slice(L+1));I=U}else if(G<0){m=[].concat(m.slice(0,L),m.slice(L+1,U),[F],m.slice(U));I=L}break;case v.IMPORT_STATE:if(Array.isArray(c.nextLiftedState)){p={0:y(f)};h=1;m=[0];b=[];k=c.nextLiftedState.length;E=[];O=c.preloadedState;I=0;c.nextLiftedState.forEach(function(e){p[h]=y(e);m.push(h);h++})}else{var W=c.nextLiftedState;d=W.monitorState;p=W.actionsById;h=W.nextActionId;m=W.stagedActionIds;b=W.skippedActionIds;O=W.committedState;k=W.currentStateIndex;E=W.computedStates;c.noRecompute&&(I=Infinity)}break;case v.LOCK_CHANGES:C=c.status;I=Infinity;break;case v.PAUSE_RECORDING:j=c.status;if(j)return S(true);p={0:y(f)};h=1;m=[0];b=[];O=E[k].state;k=0;E=[];break;case"@@redux/INIT":if(false===n.shouldHotReload){p={0:y(f)};h=1;m=[0];b=[];O=0===E.length?t:E[k].state;k=0;E=[]}I=0;if(n.maxAge&&m.length>n.maxAge){E=_(E,I,e,O,p,m,b,n.shouldCatchErrors);w(m.length-n.maxAge);I=Infinity}break;default:I=Infinity;break}E=_(E,I,e,O,p,m,b,n.shouldCatchErrors);d=a(d,c);return{monitorState:d,actionsById:p,nextActionId:h,stagedActionIds:m,skippedActionIds:b,committedState:O,currentStateIndex:k,computedStates:E,isLocked:C,isPaused:j}}}function k(e){var t=e.computedStates;var a=e.currentStateIndex;var r=t[a].state;return r}function E(e,t){var a;var i=void 0;function s(){var t=k(e.getState());void 0!==t&&(i=t);return i}return r({},e,(a={liftedStore:e,dispatch:function t(a){e.dispatch(y(a));return a},getState:s,replaceReducer:function a(r){e.replaceReducer(t(r))}},a[p.default]=function(){return r({},e[p.default](),{subscribe:function t(a){if("object"!==("undefined"===typeof a?"undefined":n(a)))throw new TypeError("Expected the observer to be an object.");function r(){a.next&&a.next(s())}r();var i=e.subscribe(r);return{unsubscribe:i}}})},a))}function C(){var e=arguments.length<=0||void 0===arguments[0]?function(){return null}:arguments[0];var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(null!=t.maxAge&&t.maxAge<2)throw new Error("DevTools.instrument({ maxAge }) option, if specified, may not be less than 2.");return function(a){return function(r,n,i){function s(a){if("function"!==typeof a){if(a&&"function"===typeof a.default)throw new Error('Expected the reducer to be a function. Instead got an object with a "default" field. Did you pass a module instead of the default export? Try passing require(...).default instead.');throw new Error("Expected the reducer to be a function.")}return O(a,n,e,t)}var o=a(s(r),i);if(o.liftedStore)throw new Error("DevTools instrumentation should not be applied more than once. Check your store configuration.");return E(o,s)}}}},function(e,t,a){var r=a(2160);function n(e,t){var a=null==e?0:e.length;return!!a&&r(e,t,0)>-1}e.exports=n},function(e,t){function a(e,t,a){var r=-1,n=null==e?0:e.length;while(++r<n)if(a(t,e[r]))return true;return false}e.exports=a},function(e,t){function a(e,t){var a=-1,r=null==e?0:e.length,n=Array(r);while(++a<r)n[a]=t(e[a],a,e);return n}e.exports=a},function(e,t,a){var r=a(1233),n=a(2164),i=a(2166);function s(e,t){return i(n(e,t,r),e+"")}e.exports=s},function(e,t,a){var r=a(2123),n=a(682);function i(e){return n(e)&&r(e)}e.exports=i},function(e,t,a){var r=a(1030),n=a(524);var i=r(n,"Set");e.exports=i},function(e,t,a){var r=a(1235),n=a(2181),i=a(2182),s=a(2183),o=a(2184),l=a(2185);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=n;c.prototype["delete"]=i;c.prototype.get=s;c.prototype.has=o;c.prototype.set=l;e.exports=c},function(e,t,a){var r=a(2186),n=a(682);function i(e,t,a,s,o){if(e===t)return true;if(null==e||null==t||!n(e)&&!n(t))return e!==e&&t!==t;return r(e,t,a,s,i,o)}e.exports=i},function(e,t,a){var r=a(1399),n=a(2187),i=a(1402);var s=1,o=2;function l(e,t,a,l,c,u){var d=a&s,p=e.length,h=t.length;if(p!=h&&!(d&&h>p))return false;var v=u.get(e);if(v&&u.get(t))return v==t;var m=-1,f=true,b=a&o?new r:void 0;u.set(e,t);u.set(t,e);while(++m<p){var g=e[m],_=t[m];if(l)var y=d?l(_,g,m,t,e,u):l(g,_,m,e,t,u);if(void 0!==y){if(y)continue;f=false;break}if(b){if(!n(t,function(e,t){if(!i(b,t)&&(g===e||c(g,e,a,l,u)))return b.push(t)})){f=false;break}}else if(!(g===_||c(g,_,a,l,u))){f=false;break}}u["delete"](e);u["delete"](t);return f}e.exports=l},function(e,t,a){var r=a(1716);function n(e){return e===e&&!r(e)}e.exports=n},function(e,t){function a(e,t){return function(a){if(null==a)return false;return a[e]===t&&(void 0!==t||e in Object(a))}}e.exports=a},function(e,t,a){var r=a(1654),n=a(1238);function i(e,t){t=r(t,e);var a=0,i=t.length;while(null!=e&&a<i)e=e[n(t[a++])];return a&&a==i?e:void 0}e.exports=i},function(e,t,a){var r=a(502),n=a(1404),i=a(2204),s=a(2207);function o(e,t){if(r(e))return e;return n(e,t)?[e]:i(s(e))}e.exports=o},function(e,t,a){"use strict";t.__esModule=true;function r(e){return e&&e.__esModule?e["default"]:e}var n=a(2224);t.threezerotwofour=r(n);var i=a(2225);t.apathy=r(i);var s=a(2226);t.ashes=r(s);var o=a(2227);t.atelierDune=r(o);var l=a(2228);t.atelierForest=r(l);var c=a(2229);t.atelierHeath=r(c);var u=a(2230);t.atelierLakeside=r(u);var d=a(2231);t.atelierSeaside=r(d);var p=a(2232);t.bespin=r(p);var h=a(2233);t.brewer=r(h);var v=a(2234);t.bright=r(v);var m=a(2235);t.chalk=r(m);var f=a(2236);t.codeschool=r(f);var b=a(2237);t.colors=r(b);var g=a(2238);t["default"]=r(g);var _=a(2239);t.eighties=r(_);var y=a(2240);t.embers=r(y);var O=a(2241);t.flat=r(O);var k=a(2242);t.google=r(k);var E=a(2243);t.grayscale=r(E);var C=a(2244);t.greenscreen=r(C);var j=a(2245);t.harmonic=r(j);var w=a(2246);t.hopscotch=r(w);var S=a(2247);t.isotope=r(S);var I=a(2248);t.marrakesh=r(I);var T=a(2249);t.mocha=r(T);var A=a(2250);t.monokai=r(A);var N=a(2251);t.ocean=r(N);var P=a(2252);t.paraiso=r(P);var R=a(2253);t.pop=r(R);var M=a(2254);t.railscasts=r(M);var D=a(2255);t.shapeshifter=r(D);var x=a(2256);t.solarized=r(x);var F=a(2257);t.summerfruit=r(F);var L=a(2258);t.tomorrow=r(L);var B=a(2259);t.tube=r(B);var U=a(2260);t.twilight=r(U)},function(e,t,a){"use strict";t.__esModule=true;t.updateScrollTop=n;t.startConsecutiveToggle=s;var r=t.UPDATE_SCROLL_TOP="@@redux-devtools-log-monitor/UPDATE_SCROLL_TOP";function n(e){return{type:r,scrollTop:e}}var i=t.START_CONSECUTIVE_TOGGLE="@@redux-devtools-log-monitor/START_CONSECUTIVE_TOGGLE";function s(e){return{type:i,id:e}}},function(e,t,a){"use strict";t.__esModule=true;var r=a(37);var n=C(r);var i=a(6);var s=C(i);var o=a(8);var l=C(o);var c=a(9);var u=C(c);var d=a(3);var p=C(d);var h=a(882);var v=C(h);var m=a(1);var f=C(m);var b=a(828);var g=C(b);var _=a(1658);var y=C(_);var O=a(2283);var k=C(O);var E=a(1661);function C(e){return e&&e.__esModule?e:{default:e}}var j=function e(t){return t};var w=function e(t,a,r){return 0===r};var S=function e(t,a,r,n){return f["default"].createElement("span",null,r," ",n)};var I=function e(t){var a=t[0];return f["default"].createElement("span",null,a,":")};var T=function e(){return false};function A(e,t){var a={getArrowStyle:"arrow",getListStyle:"nestedNodeChildren",getItemStringStyle:"nestedNodeItemString",getLabelStyle:"label",getValueStyle:"valueText"};var r=(0,v["default"])(a).filter(function(e){return t[e]});if(r.length>0){e="string"===typeof e?{extend:e}:(0,p["default"])({},e);r.forEach(function(r){console.error('Styling method "'+r+'" is deprecated, use "theme" property instead');e[a[r]]=function(e){for(var a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];var s=e.style;return{style:(0,p["default"])({},s,t[r].apply(t,n))}}})}return e}function N(e){var t=A(e.theme,e);e.invertTheme&&("string"===typeof t?t+=":inverted":t&&t.extend?t="string"===typeof t?(0,p["default"])({},t,{extend:t.extend+":inverted"}):(0,p["default"])({},t,{extend:(0,E.invertTheme)(t.extend)}):t&&(t=(0,E.invertTheme)(t)));return{styling:(0,k["default"])(t)}}var P=function(e){(0,u["default"])(t,e);function t(a){(0,s["default"])(this,t);var r=(0,l["default"])(this,e.call(this,a));r.state=N(a);return r}t.prototype.componentWillReceiveProps=function e(t){var a=this;["theme","invertTheme"].find(function(e){return t[e]!==a.props[e]})&&this.setState(N(t))};t.prototype.shouldComponentUpdate=function e(t){var a=this;return!!(0,v["default"])(t).find(function(e){return"keyPath"===e?t[e].join("/")!==a.props[e].join("/"):t[e]!==a.props[e]})};t.prototype.render=function e(){var t=this.props,a=t.data,r=t.keyPath,i=t.postprocessValue,s=t.hideRoot,o=t.theme,l=t.invertTheme,c=(0,n["default"])(t,["data","keyPath","postprocessValue","hideRoot","theme","invertTheme"]);var u=this.state.styling;return f["default"].createElement("ul",u("tree"),f["default"].createElement(y["default"],(0,p["default"])({},(0,p["default"])({postprocessValue:i,hideRoot:s,styling:u},c),{keyPath:s?[]:r,value:i(a)})))};return t}(f["default"].Component);P.propTypes={data:g["default"].oneOfType([g["default"].array,g["default"].object]).isRequired,hideRoot:g["default"].bool,theme:g["default"].oneOfType([g["default"].object,g["default"].string]),invertTheme:g["default"].bool,keyPath:g["default"].arrayOf(g["default"].oneOfType([g["default"].string,g["default"].number])),postprocessValue:g["default"].func,sortObjectKeys:g["default"].oneOfType([g["default"].func,g["default"].bool])};P.defaultProps={shouldExpandNode:w,hideRoot:false,keyPath:["root"],getItemString:S,labelRenderer:I,valueRenderer:j,postprocessValue:j,isCustomNode:T,collectionLimit:50,invertTheme:true};t["default"]=P},function(e,t,a){"use strict";t.__esModule=true;var r=a(3);var n=O(r);var i=a(37);var s=O(i);var o=a(1);var l=O(o);var c=a(828);var u=O(c);var d=a(2270);var p=O(d);var h=a(2271);var v=O(h);var m=a(2276);var f=O(m);var b=a(2277);var g=O(b);var _=a(2282);var y=O(_);function O(e){return e&&e.__esModule?e:{default:e}}var k=function e(t){var a=t.getItemString,r=t.keyPath,i=t.labelRenderer,o=t.styling,c=t.value,u=t.valueRenderer,d=t.isCustomNode,h=(0,s["default"])(t,["getItemString","keyPath","labelRenderer","styling","value","valueRenderer","isCustomNode"]);var m=d(c)?"Custom":(0,p["default"])(c);var b={getItemString:a,key:r[0],keyPath:r,labelRenderer:i,nodeType:m,styling:o,value:c,valueRenderer:u};var _=(0,n["default"])({},h,b,{data:c,isCustomNode:d});switch(m){case"Object":case"Error":case"WeakMap":case"WeakSet":return l["default"].createElement(v["default"],_);case"Array":return l["default"].createElement(f["default"],_);case"Iterable":case"Map":case"Set":return l["default"].createElement(g["default"],_);case"String":return l["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(t){return'"'+t+'"'}}));case"Number":return l["default"].createElement(y["default"],b);case"Boolean":return l["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(t){return t?"true":"false"}}));case"Date":return l["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(t){return t.toISOString()}}));case"Null":return l["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(){return"null"}}));case"Undefined":return l["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(){return"undefined"}}));case"Function":case"Symbol":return l["default"].createElement(y["default"],(0,n["default"])({},b,{valueGetter:function e(t){return t.toString()}}));case"Custom":return l["default"].createElement(y["default"],b);default:return null}};k.propTypes={getItemString:u["default"].func.isRequired,keyPath:u["default"].arrayOf(u["default"].oneOfType([u["default"].string,u["default"].number])).isRequired,labelRenderer:u["default"].func.isRequired,styling:u["default"].func.isRequired,value:u["default"].any,valueRenderer:u["default"].func.isRequired,isCustomNode:u["default"].func.isRequired};t["default"]=k},function(e,t,a){e.exports={default:a(2272),__esModule:true}},function(e,t,a){"use strict";t.__esModule=true;var r=a(3);var n=c(r);var i=a(1);var s=c(i);var o=a(828);var l=c(o);function c(e){return e&&e.__esModule?e:{default:e}}var u=function e(t){var a=t.styling,r=t.arrowStyle,i=t.expanded,o=t.nodeType,l=t.onClick;return s["default"].createElement("div",(0,n["default"])({},a("arrowContainer",r),{onClick:l}),s["default"].createElement("div",a(["arrow","arrowSign"],o,i,r),"\u25b6","double"===r&&s["default"].createElement("div",a(["arrowSign","arrowSignInner"]),"\u25b6")))};u.propTypes={styling:l["default"].func.isRequired,arrowStyle:l["default"].oneOf(["single","double"]),expanded:l["default"].bool.isRequired,nodeType:l["default"].string.isRequired,onClick:l["default"].func.isRequired};u.defaultProps={arrowStyle:"single"};t["default"]=u},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getBase16Theme=t.createStyling=t.invertTheme=void 0;var r=a(63);var n=E(r);var i=a(3);var s=E(i);var o=a(58);var l=E(o);var c=a(882);var u=E(c);var d=a(2284);var p=E(d);var h=a(1655);var v=k(h);var m=a(2285);var f=E(m);var b=a(2286);var g=E(b);var _=a(2291);var y=E(_);var O=a(2292);function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);t.default=e;return t}function E(e){return e&&e.__esModule?e:{default:e}}var C=v.default;var j=(0,u.default)(C);var w=function e(t){return t<.25?1:t<.5?.9-t:1.1-t};var S=(0,y.default)(g.default,O.rgb2yuv,function(e){var t=(0,l.default)(e,3),a=t[0],r=t[1],n=t[2];return[w(a),r,n]},O.yuv2rgb,f.default);var I=function e(t){return function(e){return{className:[e.className,t.className].filter(Boolean).join(" "),style:(0,s.default)({},e.style||{},t.style||{})}}};var T=function e(t,a){if(void 0===t)return a;if(void 0===a)return t;var r="undefined"===typeof t?"undefined":(0,n.default)(t);var i="undefined"===typeof a?"undefined":(0,n.default)(a);switch(r){case"string":switch(i){case"string":return[a,t].filter(Boolean).join(" ");case"object":return I({className:t,style:a});case"function":return function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return I({className:t})(a.apply(void 0,[e].concat(n)))}}case"object":switch(i){case"string":return I({className:a,style:t});case"object":return(0,s.default)({},a,t);case"function":return function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return I({style:t})(a.apply(void 0,[e].concat(n)))}}case"function":switch(i){case"string":return function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return t.apply(void 0,[I(e)({className:a})].concat(n))};case"object":return function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return t.apply(void 0,[I(e)({style:a})].concat(n))};case"function":return function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return t.apply(void 0,[a.apply(void 0,[e].concat(n))].concat(n))}}}};var A=function e(t,a){var r=(0,u.default)(a);for(var n in t)-1===r.indexOf(n)&&r.push(n);return r.reduce(function(e,r){return e[r]=T(t[r],a[r]),e},{})};var N=function e(t,a){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(null===a)return t;Array.isArray(a)||(a=[a]);var l=a.map(function(e){return t[e]}).filter(Boolean);var c=l.reduce(function(e,t){"string"===typeof t?e.className=[e.className,t].filter(Boolean).join(" "):"object"===("undefined"===typeof t?"undefined":(0,n.default)(t))?e.style=(0,s.default)({},e.style,t):"function"===typeof t&&(e=(0,s.default)({},e,t.apply(void 0,[e].concat(i))));return e},{className:"",style:{}});c.className||delete c.className;0===(0,u.default)(c.style).length&&delete c.style;return c};var P=t.invertTheme=function e(t){return(0,u.default)(t).reduce(function(e,a){return e[a]=/^base/.test(a)?S(t[a]):"scheme"===a?t[a]+":inverted":t[a],e},{})};var R=t.createStyling=(0,p.default)(function(e){for(var t=arguments.length,a=Array(t>3?t-3:0),r=3;r<t;r++)a[r-3]=arguments[r];var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o=n.defaultBase16,l=void 0===o?C:o,c=n.base16Themes,d=void 0===c?null:c;var h=M(i,d);h&&(i=(0,s.default)({},h,i));var v=j.reduce(function(e,t){return e[t]=i[t]||l[t],e},{});var m=(0,u.default)(i).reduce(function(e,t){return-1===j.indexOf(t)?(e[t]=i[t],e):e},{});var f=e(v);var b=A(m,f);return(0,p.default)(N,2).apply(void 0,[b].concat(a))},3);var M=t.getBase16Theme=function e(t,a){t&&t.extend&&(t=t.extend);if("string"===typeof t){var r=t.split(":"),n=(0,l.default)(r,2),i=n[0],s=n[1];t=(a||{})[i]||v[i];"inverted"===s&&(t=P(t))}return t&&t.hasOwnProperty("base00")?t:void 0}},function(e,t){var a=/-?\d+(\.\d+)?%?/g;function r(e){return e.match(a)}e.exports=r},,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(0);var v=a(13);var m=a(10);var f=a(4);var b=a(764);var g=a(135);var _=a(22);var y=a(51);var O=a(96);var k=a(1474);var E=a(2126);var C=a.n(E);var j=new m["b"]("enterprise_dashboard");var w={orgName:h["b"].string,featureEKMPhase2:h["b"].bool,getBackfillInfo:h["b"].func.isRequired};var S={orgName:"",featureEKMPhase2:false};var I=6e4;var T={MESSAGES:0,FILES:1,SEARCH:2};var A={ENROLL:"enroll",UNENROLL:"unenroll",REKEY:"rekey",MIGRATION:"migration"};var N=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={ekmBackfillInfo:{}};return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=function e(){t.props.getBackfillInfo().then(function(e){t.setState(function(){return{ekmBackfillInfo:e}})})};a();this.updateInterval=setInterval(a,I)}},{key:"componentWillUnmount",value:function e(){this.updateInterval&&clearInterval(this.updateInterval)}},{key:"getStatusLine1",value:function e(t,a){if(!this.props.featureEKMPhase2)return null;var r=this.state.ekmBackfillInfo,n=r.backfill_in_progress,i=r.backfill_reason,s=r.ekm_access_denied;var o=void 0;var l=void 0;if(100===t)if(n&&i===A.UNENROLL){o=p.a.createElement(_["b"],{type:"circle-minus-filled",className:"sk_dark_gray margin_right_25",size:"inherit"});l=[j.t("Unenrolled"),j.t("Unenrolled"),j.t("Unenrolled")][a]}else{o=p.a.createElement(_["b"],{type:"circle-checkbox-checked",className:"sk_seafoam_green margin_right_25",size:"inherit"});l=[j.t("Encrypted"),j.t("Encrypted"),j.t("Encrypted")][a]}else if(n&&!s){o=p.a.createElement(O["a"],{inline:true,className:"p_ekm_status__spinner"});var c=void 0;switch(i){case A.MIGRATION:c=[j.t("Encrypting messages from migrating workspace..."),j.t("Encrypting files from migrating workspace..."),j.t("Encrypting search history from migrating workspace...")];break;case A.REKEY:c=[j.t("Re-encrypting existing messages..."),j.t("Re-encrypting existing files..."),j.t("Re-encrypting existing search history...")];break;case A.UNENROLL:c=[j.t("In progress"),j.t("In progress"),j.t("In progress")];break;default:c=[j.t("Encrypting existing messages..."),j.t("Encrypting existing files..."),j.t("Encrypting existing search history...")]}l=c[a]}else{o=p.a.createElement(_["b"],{type:"circle-minus-filled",className:"sk_dark_gray margin_right_25",size:"inherit"});l=0===t?j.t("Not started"):j.t("Paused")}return p.a.createElement("div",{className:"bold"},o,l)}},{key:"getStatusLine2",value:function e(t,a){var r=this.props.featureEKMPhase2;if(!r)return null;var n=this.state.ekmBackfillInfo,i=n.backfill_in_progress,s=n.backfill_reason;var o=void 0;o=100!==t||i&&s===A.UNENROLL?j.t("{status}% complete",{status:t}):[j.t("Current and future messages"),j.t("Current and future files"),j.t("Current and future search history")][a];return p.a.createElement("div",{className:"sk_dark_gray"},o)}},{key:"getStatus",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var a=arguments[1];return p.a.createElement("div",{className:"p-ekm_status__status_description"},this.getStatusLine1(t,a),this.getStatusLine2(t,a))}},{key:"renderEncryptionStatusTable",value:function e(){var t=this.props.featureEKMPhase2;if(!t)return null;var a=this.state.ekmBackfillInfo,r=a.messages,n=a.files,i=a.search;return p.a.createElement("div",{className:"p-ekm_status__progress_container"},p.a.createElement("div",{className:"bold"},j.t("Messages")),this.getStatus(r,T.MESSAGES),p.a.createElement("div",{className:"bold"},j.t("Files")),this.getStatus(n,T.FILES),p.a.createElement("div",{className:"bold"},j.t("Search history")),this.getStatus(i,T.SEARCH))}},{key:"renderStatusMessage",value:function e(){var t=this.props,a=t.featureEKMPhase2,r=t.orgName;var n=this.state.ekmBackfillInfo,i=n.backfill_in_progress,s=n.backfill_reason,o=n.ekm_access_denied;if(!a||!(i||o))return null;var l="info";var c="info-circle";var u=void 0;var d=void 0;if(o){l="error";c="warning";u=j.rt("Encryption of <b>{orgName}</b> has been paused because Slack couldn\u2019t access your key family. To continue encrypting data, please review your key policy in AWS and ensure Slack has access to your key family.",{orgName:r})}else if(i)switch(s){case A.MIGRATION:u=j.t("A workspace has been migrated into your organization, so all data in that workspace will be encrypted.");d=p.a.createElement("div",null,p.a.createElement(y["a"],{href:"/manage/organization/migrations"},j.t("View scheduled migrations")));break;case A.REKEY:l="warning";c="warning";u=j.rt("<b>{orgName}</b>\u2019s key family was recently rotated, so all existing data is being encrypted with the new key. Ensure Slack has access to your previous keys until this is done.",{orgName:r});break;case A.UNENROLL:l="warning";c="warning";u=j.rt("Unenrollment from EKM for <b>{orgName}</b> is in progress. If your organization has a large amount of data, the process may take some time to complete. Ensure Slack has access to your keys until then.",{orgName:r});break;default:u=j.rt("EKM was recently enabled for <b>{orgName}</b> and all existing data is now being encrypted. If your organization has a large amount of data, the process may take some time to complete.",{orgName:r})}return p.a.createElement(g["a"],{type:"boxed",level:l,icon:c,align:"left",className:"margin_bottom_100"},u,d)}},{key:"render",value:function e(){var t=this.props.featureEKMPhase2;if(!t)return null;var a=this.state.ekmBackfillInfo.last_updated;return p.a.createElement("div",null,p.a.createElement("h2",{className:"p-ekm_status__subtitle"},"Encryption status"),p.a.createElement("div",{className:"sk_dark_gray margin_bottom_100"},p.a.createElement("span",{className:"bold"},j.t("Last updated: ")),p.a.createElement("span",null,p.a.createElement(k["a"],{timestamp:a}))),this.renderStatusMessage(),this.renderEncryptionStatusTable())}}]);return t}(d["PureComponent"]);N.displayName="EKMStatus";N.defaultProps=S;var P=function e(t){return{featureEKMPhase2:Object(f["isFeatureEnabled"])(t,"feature_ekm_phase_2")}};var R=function e(t,a){var r=a.isMissionControl,n=a.teamId;var i=r?b["d"]:b["b"];return{getBackfillInfo:function e(){return t(i({reason:"EKMStatus_getBackfillInfo",teamId:n}))}}};var M=Object(v["connect"])(P,R)(N);M.propTypes={isMissionControl:h["b"].bool,teamId:h["b"].string};M.defaultProps={isMissionControl:false,teamId:null};t["a"]=M},function(e,t,a){"use strict";t.__esModule=true;t.default=void 0;var r=a(2219);var n=i(r);function i(e){return e&&e.__esModule?e:{default:e}}t.default=n.default},function(e,t,a){"use strict";t.__esModule=true;function r(e){return function(t){var a=t.dispatch,r=t.getState;return function(t){return function(n){if("function"===typeof n)return n(a,r,e);return t(n)}}}}var n=r();n.withExtraArgument=r;t["default"]=n},function(e,t,a){"use strict";t.__esModule=true;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.batchedSubscribe=n;function n(e){if("function"!==typeof e)throw new Error("Expected batch to be a function.");var t=[];var a=t;function n(){a===t&&(a=t.slice())}function i(e){if("function"!==typeof e)throw new Error("Expected listener to be a function.");var t=true;n();a.push(e);return function r(){if(!t)return;t=false;n();var i=a.indexOf(e);a.splice(i,1)}}function s(){var e=t=a;for(var r=0;r<e.length;r++)e[r]()}function o(){e(s)}return function(e){return function(){var t=e.apply(void 0,arguments);var a=t.subscribe;function n(){var e=t.dispatch.apply(t,arguments);o();return e}return r({},t,{dispatch:n,subscribe:i,subscribeImmediate:a})}}}},function(e,t,a){"use strict";a.r(t);a.d(t,"getAppToEdit",function(){return s});a.d(t,"getAppName",function(){return o});a.d(t,"getAppIcons",function(){return l});var r=a(0);var n=a(14);var i=a(4);var s=Object(n["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.appId;var r=Object(i["getFromBootData"])(e,"app_to_edit");if(r&&r.encoded_id===a)return r;return null});s.propTypes={appId:r["b"].string.isRequired};var o=Object(n["b"])(function(e,t){var a=s(e,t);return a&&a.name});o.propTypes={appId:r["b"].string.isRequired};var l=Object(n["b"])(function(e,t){var a=s(e,t);return a&&a.payload&&a.payload.icons||{}});l.propTypes={appId:r["b"].string.isRequired}},,function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(2);var n=a.n(r);var i=a(34);var s=a(35);var o=a(31);function l(e){var t=Object(i["f"])(e,"all_unreads_sort_order");var a=["alphabetical","priority","oldest","newest"];if(t&&Object(r["includes"])(a,t))return t;return Object(o["isPaidTeam"])(Object(s["d"])(e))?"priority":"alphabetical"}},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(0);var v=a(13);var m=a(530);var f=a(20);var b=Object(f["b"])("TS.generic_notification_banner.banner_to_show_sig.dispatch");var g=Object(f["b"])("TS.ui.banner.isDunningBanner",function(){return false});var _=Object(f["b"])("TS.ui.banner.show");var y=a(4);var O=a(60);var k=a(10);var E=a(45);var C=a(34);var j=a(803);var w=a(30);var S=a(51);var I=a(2);var T=a(16);var A=a.n(T);var N=a(1043);var P=a(28);var R=a(3207);var M=new k["b"]("notification_banner");var D={learn_more:M.t("Learn More"),show_me:M.t("Show Me"),skip:M.t("Skip for Now")};var x={imgSrc:h["b"].string,imgAlt:h["b"].string,headerText:h["b"].node,bodyText:h["b"].node,bodyClass:h["b"].string,goButtonText:h["b"].string,goButtonClass:h["b"].string,onGo:h["b"].func,showGoButton:h["b"].bool,isLearnMoreButton:h["b"].bool,shouldCloseOnGo:h["b"].bool,cancelButtonText:h["b"].string,cancelButtonClass:h["b"].string,onCancel:h["b"].func,showCancelButton:h["b"].bool,showCloseIcon:h["b"].bool,onCloseIcon:h["b"].func,closeBanner:h["b"].func.isRequired,onCloseBanner:h["b"].func,bannerPrefs:h["b"].shape({countPref:h["b"].string.isRequired,tsPref:h["b"].string.isRequired})};var F={imgSrc:"",imgAlt:"",headerText:"",bodyText:"",bodyClass:"",goButtonText:"",goButtonClass:"",onGo:I["noop"],showGoButton:true,isLearnMoreButton:false,shouldCloseOnGo:true,cancelButtonText:D.skip,cancelButtonClass:"",onCancel:I["noop"],showCancelButton:true,showCloseIcon:false,onCloseIcon:I["noop"],onCloseBanner:I["noop"],bannerPrefs:{}};var L=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["handleGoButton","handleCancelButton","handleCloseIcon"]);return a}s()(t,[{key:"closeBanner",value:function e(){var t=this.props,a=t.onCloseBanner,r=t.bannerPrefs;this.props.closeBanner({bannerPrefs:r});a()}},{key:"handleGoButton",value:function e(){var t=this.props,a=t.onGo,r=t.shouldCloseOnGo;r&&this.closeBanner();a()}},{key:"handleCancelButton",value:function e(){var t=this.props.onCancel;this.closeBanner();t()}},{key:"handleCloseIcon",value:function e(){var t=this.props.onCloseIcon;this.closeBanner();t()}},{key:"renderHeader",value:function e(){var t=this.props,a=t.headerText,r=t.imgSrc,n=t.imgAlt;if(!a)return null;return p.a.createElement("h1",{className:"p-message_pane_banner__header"},r&&p.a.createElement("div",{className:"p-message_pane_banner__header_img_container"},p.a.createElement("img",{src:r,alt:n,className:"p-message_pane_banner__header_img","data-qa":"message_pane_banner_header_img"})),a)}},{key:"renderBody",value:function e(){var t=this.props,a=t.bodyText,r=t.bodyClass;if(!a)return null;var n=A()("p-message_pane_banner__body",r);return p.a.createElement("div",{className:n},a)}},{key:"renderGoButton",value:function e(){var t=this.props,a=t.goButtonText,r=t.goButtonClass,n=t.isLearnMoreButton;var i=n?D.learn_more:D.show_me;var s=A()("p-message_pane_banner__button ","p-message_pane_banner__button--go",r);return p.a.createElement(P["b"],{className:s,onClick:this.handleGoButton,size:"small","data-qa":"message_pane_banner_go_button"},a||i)}},{key:"renderCancelButton",value:function e(){var t=this.props,a=t.cancelButtonText,r=t.cancelButtonClass;var n=A()("p-message_pane_banner__button","p-message_pane_banner__button--cancel",r);return p.a.createElement(P["b"],{className:n,onClick:this.handleCancelButton,size:"small",type:"outline","data-qa":"message_pane_banner_cancel_button"},a)}},{key:"renderCloseIcon",value:function e(){return p.a.createElement(P["c"],{"aria-label":M.t("Close"),className:"p-message_pane_banner__close_icon",onClick:this.handleCloseIcon,"data-qa":"message_pane_banner_close_icon"},p.a.createElement(N["a"],{type:"times"}))}},{key:"render",value:function e(){var t=this.props,a=t.showGoButton,r=t.showCancelButton,n=t.showCloseIcon;return p.a.createElement("div",{className:"p-message_pane_banner"},this.renderHeader(),this.renderBody(),p.a.createElement("div",{className:"p-message_pane_banner__button_container"},r&&this.renderCancelButton(),a&&this.renderGoButton()),n&&this.renderCloseIcon())}}]);return t}(d["PureComponent"]);L.displayName="MessagePaneBanner";L.defaultProps=F;var B={closeBanner:m["closeBanner"]};var U=Object(v["connect"])(null,B)(L);var q=new k["b"]("send_btn");var G={closeBanner:h["b"].func.isRequired,hasSendButton:h["b"].bool.isRequired,sendButtonAutoSet:h["b"].bool.isRequired,clogger:h["b"].object.isRequired,openPrefsModal:h["b"].func.isRequired};var W={countPref:"i18n_japan_beta_send_btn_banner_cta_count",tsPref:"i18n_japan_beta_send_btn_banner_cta_last_ts"};var H=258;var V="I18N_BANNER";var K=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onPrefLinkClick=a.onPrefLinkClick.bind(a);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(V,{contexts:{ui_context:{step:H,action:"impression"}}})}},{key:"componentWillUpdate",value:function e(t){var a=this.props,r=a.hasSendButton,n=a.sendButtonAutoSet;n===t.sendButtonAutoSet&&r===t.hasSendButton||this.props.closeBanner()}},{key:"onPrefLinkClick",value:function e(){var t=this.props.clogger;t.track(V,{contexts:{ui_context:{step:H,action:"click",ui_element:"prefs_button"}}});this.props.openPrefsModal({activeSection:"advanced",activeSubsection:"msg_input_send_btn_label"});this.props.closeBanner()}},{key:"renderBodyText",value:function e(){var t=this;return p.a.createElement("div",null,q.rt("Send a message with a quick click, or by pressing <Keys>keys</Keys>",{},function(){return p.a.createElement("div",{className:"inline_block"},p.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(w["isMac"])()?"\u2318":"Ctrl"),p.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"Enter"))}),p.a.createElement("br",null),q.rt("Don\u2018t like the change? You can always switch back in <Link>your preferences</Link>.",{},function(e){var a=e.text;return p.a.createElement(S["a"],{onClick:t.onPrefLinkClick},a)}))}},{key:"render",value:function e(){var t=q.t("Just for Japan: a button for sending");var a=q.t("Got It");var r="p-message_pane_banner__body--taller-line-height";return p.a.createElement(U,{headerText:t,bodyText:this.renderBodyText(),bodyClass:r,goButtonText:a,showCancelButton:false,showCloseIcon:true,bannerPrefs:W})}}]);return t}(d["PureComponent"]);K.displayName="I18nJapanBetaSendBtnBanner";var z=function e(t){return{hasSendButton:Object(C["f"])(t,"msg_input_send_btn"),sendButtonAutoSet:Object(C["f"])(t,"msg_input_send_btn_auto_set"),clogger:Object(E["a"])({state:t})}};function Y(e){return{closeBanner:m["closeBanner"],openPrefsModal:function t(){return e(j["a"].apply(void 0,arguments))}}}var Q={CLOG_STEP:H,CLOG_EVENT_ID:V};var J=Object(v["connect"])(z,Y)(K);var Z=a(3);var X=a.n(Z);var $=a(73);var ee=a(19);var te=a(11);var ae=a(35);var re=a(31);var ne=a(512);var ie={isSharedChannel:h["b"].bool,sharedTeamNames:h["b"].arrayOf(h["b"].node),bannerPrefs:h["b"].shape({countPref:h["b"].string,tsPref:h["b"].string}).isRequired,clogStep:h["b"].number.isRequired,onGoUrl:h["b"].string.isRequired,goButtonText:h["b"].string.isRequired,headerText:h["b"].node.isRequired,renderBodyText:h["b"].func.isRequired,clogger:h["b"].object.isRequired,team:h["b"].object.isRequired,bodyClass:h["b"].string};var se={isSharedChannel:false,sharedTeamNames:[],bodyClass:""};var oe=["UPGRDEXP_FREE_TRIAL_FOR_SC","GROWTH_PRICING"];var le=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onCloseIcon","renderBodyText"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:"impression"})}},{key:"onGo",value:function e(){var t=this.props,a=t.onGoUrl,r=t.team;this.clog({action:"click",ui_element:"billing_link"});Object(re["openAuthenticatedUrlInBrowser"])(r,a)}},{key:"onCloseIcon",value:function e(){this.clog({action:"close",ui_element:"btn_close"})}},{key:"clog",value:function e(t){var a=this.props,r=a.clogStep,n=a.clogger;var i=X()({step:r},t);oe.forEach(function(e){n.track(e,{contexts:{ui_context:i}})})}},{key:"renderBodyText",value:function e(){var t=this.props,e=t.renderBodyText,a=t.sharedTeamNames;return e(a)}},{key:"render",value:function e(){var t=this.props,a=t.isSharedChannel,r=t.headerText,n=t.goButtonText,i=t.bannerPrefs,s=t.bodyClass;if(!a)return null;return p.a.createElement(U,{headerText:r,bodyText:this.renderBodyText(),goButtonText:n,showCancelButton:false,showCloseIcon:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:i,bodyClass:s})}}]);return t}(d["PureComponent"]);le.displayName="EscTrialBanner";le.defaultProps=se;var ce=function e(t){var a=Object($["a"])(t);var r=Object(ee["d"])(t,a);var n=Object(te["isExternallySharedChannel"])(r);var i=[];if(n){var s=Object(te["getPendingAndConnectedTeamIds"])(t,r);Object(I["isEmpty"])(s)||(i=Object(I["map"])(s,function(e){var a=Object(ae["i"])(t,e);return Object(re["isUnknown"])(a)?p.a.createElement(ne["a"],{type:"unknown"}):Object(re["getTeamDisplayName"])(a)}))}return{isSharedChannel:n,sharedTeamNames:i,clogger:Object(E["a"])({state:t}),team:Object(ae["d"])(t)}};var ue={clogEventIds:oe};var de=Object(v["connect"])(ce)(le);var pe=new k["b"]("trial_expiration_banners");var he={numDaysLeft:h["b"].number.isRequired,expirationDate:h["b"].string.isRequired};var ve={countPref:"two_weeks_left_esc_trial_cta_count",tsPref:"two_weeks_left_esc_trial_cta_last_ts"};var me=168;var fe="admin/billing";var be=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["renderBodyText","renderHeaderText"]);return a}s()(t,[{key:"renderBodyText",value:function e(t){var a=this.props.expirationDate;var r=Object(k["g"])(t,{noEscape:true,react:true});return pe.rt("When the trial ends, this channel will <b>no longer be shared</b> with {shared_team_name}. Upgrade by {expiration_date} to keep all the features of the Standard plan.",{expiration_date:a,shared_team_name:r})}},{key:"renderHeaderText",value:function e(){var t=this.props.numDaysLeft;return pe.t("Heads up: you have {num_of_days} more days on your free trial",{num_of_days:t})}},{key:"render",value:function e(){var t=pe.t("Upgrade Now");return p.a.createElement(de,{bannerPrefs:ve,clogStep:me,onGoUrl:fe,goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]);return t}(d["PureComponent"]);be.displayName="TwoWeeksLeftEscTrialBanner";var ge={LEARN_MORE_URL:fe};var _e=be;var ye=new k["b"]("trial_expiration_banners");var Oe={numDaysLeft:h["b"].number.isRequired,expirationDate:h["b"].string.isRequired};var ke={countPref:"one_week_left_esc_trial_cta_count",tsPref:"one_week_left_esc_trial_cta_last_ts"};var Ee=167;var Ce="admin/billing";var je=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["renderBodyText","renderHeaderText"]);return a}s()(t,[{key:"renderBodyText",value:function e(t){var a=this.props.expirationDate;var r=Object(k["g"])(t,{noEscape:true,react:true});return ye.rt("<b>You won\u2019t be able to use this channel with {shared_team_name}</b> afterward, even if you upgrade later. To keep sharing this channel, upgrade before {expiration_date}.",{expiration_date:a,shared_team_name:r},function(e){var t=e.text;return p.a.createElement("strong",{className:"sk_warning_red"},t)})}},{key:"renderHeaderText",value:function e(){var t=this.props.numDaysLeft;return ye.t("Only {num_of_days} days left on your free trial",{num_of_days:t})}},{key:"render",value:function e(){var t=ye.t("Upgrade Now");return p.a.createElement(de,{bannerPrefs:ke,clogStep:Ee,onGoUrl:Ce,goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]);return t}(d["PureComponent"]);je.displayName="OneWeekLeftEscTrialBanner";var we={LEARN_MORE_URL:Ce};var Se=je;var Ie=a(21);var Te=a(92);var Ae=new k["b"]("trial_expiration_banners");var Ne={countPref:"three_days_left_esc_trial_cta_count",tsPref:"three_days_left_esc_trial_cta_last_ts"};var Pe={featurePlansPageTrialI18n:h["b"].bool.isRequired,expirationDate:h["b"].string.isRequired,productId:h["b"].string.isRequired};var Re=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["renderBodyText"]);return a}s()(t,[{key:"renderBodyText",value:function e(t){if(!this.props.featurePlansPageTrialI18n)return null;return Ae.rt("Upgrade before your free trial ends on {expiration_date} to keep sharing this channel with {shared_team_name}. Otherwise, this channel will be permanently disconnected. (You can start a new shared channel if you decide to upgrade later.)",{expiration_date:this.props.expirationDate,shared_team_name:Object(k["g"])(t,{noEscape:true,react:true})})}},{key:"render",value:function e(){var t=this.props,a=t.featurePlansPageTrialI18n,r=t.productId;if(!a)return null;return p.a.createElement(de,{bannerPrefs:Ne,clogStep:Ie["z"].BANNER_SHARED_CHANNELS_TRIAL_THREE_DAY_REMINDER,onGoUrl:Te["a"]+"?s=1&p="+r,goButtonText:Ae.t("Upgrade Now"),headerText:Ae.t("Upgrade your workspace to keep sharing this channel"),renderBodyText:this.renderBodyText,bodyClass:"p-message_pane_banner__body--widest-text"})}}]);return t}(d["PureComponent"]);Re.displayName="ThreeDaysLeftEscTrialBanner";var Me=function e(t){return{featurePlansPageTrialI18n:Object(y["isFeatureEnabled"])(t,"feature_plans_page_trial_i18n")}};var De=Object(v["connect"])(Me)(Re);var xe=new k["b"]("trial_expiration_banners");var Fe="upgrade_button";var Le="close_button";var Be={countPref:"three_days_left_trial_cta_count",tsPref:"three_days_left_trial_cta_last_ts"};var Ue={featurePlansPageTrialI18n:h["b"].bool.isRequired,clogger:h["b"].object.isRequired,team:h["b"].object.isRequired,expirationDate:h["b"].string.isRequired,productId:h["b"].string.isRequired};var qe=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onClose"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.clog({action:Ie["v"].IMPRESSION})}},{key:"onGo",value:function e(){var t=this.props,a=t.team,r=t.productId;this.clog({action:Ie["v"].CLICK,ui_properties:{element_type:Ie["j"].BUTTON,element_name:Fe}});Object(re["openAuthenticatedUrlInBrowser"])(a,Te["a"]+"?s=1&p="+r)}},{key:"onClose",value:function e(){this.clog({action:Ie["v"].CLOSE,ui_properties:{element_type:Ie["j"].BUTTON,element_name:Le}})}},{key:"clog",value:function e(t){var a=this.props.clogger;var r=X()({step:Ie["z"].BANNER_TRIAL_THREE_DAY_REMINDER},t);a.track(Ie["k"].GROWTH_PRICING,{contexts:{ui_context:r}})}},{key:"render",value:function e(){var t=this.props,a=t.featurePlansPageTrialI18n,r=t.team,n=t.expirationDate;if(!a)return null;var i=Object(re["isOnStandardPlan"])(r)?xe.t("Standard"):xe.t("Plus");var s=xe.t("Your free trial ends soon");var o=xe.rt("Your workspace\u2019s trial of our <b>{plan_level} plan</b> only lasts through <b>{expiration_date}</b>. Upgrade to a paid plan to keep your access to features like unlimited messages and files, guest accounts, and more when your trial ends.",{plan_level:i,expiration_date:n});var l=xe.t("Upgrade Now");return p.a.createElement(U,{headerText:s,bodyText:o,goButtonText:l,onGo:this.onGo,showCancelButton:false,showCloseIcon:true,onCloseIcon:this.onClose,bannerPrefs:Be})}}]);return t}(d["PureComponent"]);qe.displayName="ThreeDaysLeftTrialBanner";var Ge=function e(t){return{team:Object(ae["d"])(t),clogger:Object(E["a"])({state:t}),featurePlansPageTrialI18n:Object(y["isFeatureEnabled"])(t,"feature_plans_page_trial_i18n")}};var We=Object(v["connect"])(Ge)(qe);var He=new k["b"]("free_trial_banners");var Ve={clogger:h["b"].object.isRequired,team:h["b"].object.isRequired};var Ke={countPref:"in_prod_trial_banner_cta_count",tsPref:"in_prod_trial_banner_cta_last_ts"};var ze=205;var Ye="UPGRDEXP_FREE_TRIAL_IN_PROD";var Qe="trial";var Je=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onCloseIcon"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(Ye,{contexts:{ui_context:{step:ze,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.clogger,r=t.team;a.track(Ye,{contexts:{ui_context:{step:ze,action:"click",ui_element:"learn_more_btn"}}});Object(re["openAuthenticatedUrlInBrowser"])(r,Qe)}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(Ye,{contexts:{ui_context:{step:ze,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function e(){return{headerText:He.t("Start your free trial of the Standard plan"),bodyText:He.t("With unlimited searchable messages, you\u2019ll never lose access to your conversations \u2014 or to things like project details, important docs, and key decisions made along the way.")}}},{key:"render",value:function e(){var t=this.getContent();if(Object(I["isEmpty"])(t))return null;return p.a.createElement(U,{headerText:t.headerText,bodyText:t.bodyText,showCancelButton:false,showCloseIcon:true,isLearnMoreButton:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:Ke})}}]);return t}(d["PureComponent"]);Je.displayName="InProdTrialMessagePaneBanner";var Ze=function e(t){return{clogger:Object(E["a"])({state:t}),team:Object(ae["d"])(t)}};var Xe=Object(v["connect"])(Ze)(Je);var $e=new k["b"]("free_trial_banners");var et={expirationDate:h["b"].string.isRequired,clogger:h["b"].object.isRequired,team:h["b"].object.isRequired};var tt={countPref:"in_prod_trial_reminder_banner_cta_count",tsPref:"in_prod_trial_reminder_banner_cta_last_ts"};var at=207;var rt="UPGRDEXP_FREE_TRIAL_IN_PROD";var nt="trial";var it=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onCloseIcon"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(rt,{contexts:{ui_context:{step:at,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.clogger,r=t.team;a.track(rt,{contexts:{ui_context:{step:at,action:"click",ui_element:"learn_more_btn"}}});Object(re["openAuthenticatedUrlInBrowser"])(r,nt)}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(rt,{contexts:{ui_context:{step:at,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function e(){var t=this.props.expirationDate;return{headerText:$e.t("Your free trial offer is about to expire"),bodyText:$e.rt("You still have time to try out the <b>Standard plan</b>. Start your trial by <b>{expiration_date}</b> to explore features like unlimited searchable messages, guest accounts, screen sharing, and more \u2014 free for 30 days. ",{expiration_date:t})}}},{key:"render",value:function e(){var t=this.getContent();return p.a.createElement(U,{headerText:t.headerText,bodyText:t.bodyText,showCancelButton:false,showCloseIcon:true,isLearnMoreButton:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:tt})}}]);return t}(d["PureComponent"]);it.displayName="InProdTrialReminderBanner";var st=function e(t){return{clogger:Object(E["a"])({state:t}),team:Object(ae["d"])(t)}};var ot=Object(v["connect"])(st)(it);var lt=a(100);var ct=new k["b"]("notification_banner");var ut={countPref:"approaching_file_limit_banner_cta_count",tsPref:"approaching_file_limit_banner_cta_last_ts"};var dt=200;var pt="UPGRDEXP_ENFORCE_FILE_LIMITS";var ht="pricing?ui_element=11&ui_step="+dt;var vt={team:h["b"].object.isRequired,userId:h["b"].string.isRequired,closeBanner:h["b"].func.isRequired,showFileList:h["b"].func.isRequired,showPricingPlans:h["b"].func.isRequired,clogger:h["b"].object.isRequired};var mt=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onCloseIcon","onDeleteFilesLinkClicked"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(pt,{contexts:{ui_context:{step:dt,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props.clogger;t.track(pt,{contexts:{ui_context:{step:dt,action:"click",ui_element:"pricing_button"}}});t.track("GROWTH_PRICING",{contexts:{ui_context:{step:dt,action:"click",ui_element:"pricing_button"}}});this.props.showPricingPlans({pricingPlansPageUrl:ht,source:"approaching_file_limit_banner"})}},{key:"onCloseIcon",value:function e(){var t=this.props.clogger;t.track(pt,{contexts:{ui_context:{step:dt,action:"close",ui_element:"btn_close"}}})}},{key:"onDeleteFilesLinkClicked",value:function e(){var t=this.props,a=t.userId,r=t.clogger;this.props.closeBanner({bannerPrefs:ut});this.props.showFileList({user:a});r.track(pt,{contexts:{ui_context:{step:dt,action:"click",ui_element:"file_storage_link"}}})}},{key:"getHeaderText",value:function e(){var t=this.props.team;return ct.rt("{name_of_workspace} is almost out of space",{name_of_workspace:t.name})}},{key:"getBodyText",value:function e(){return ct.rt('If your workspace goes over the free plan\u2019s <span class="bold">5 GB storage limit,</span> older files will no longer be viewable. To access all your files, you can upgrade to a paid plan.')}},{key:"render",value:function e(){var t=ct.t("See Plans");return p.a.createElement(U,{headerText:this.getHeaderText(),bodyText:this.getBodyText(),goButtonText:t,showCancelButton:false,showCloseIcon:true,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:ut})}}]);return t}(d["PureComponent"]);mt.displayName="ApproachingFileLimitBanner";var ft=function e(t){return{team:Object(ae["d"])(t),userId:Object(y["getCurrentUserId"])(t),clogger:Object(E["a"])({state:t})}};var bt={closeBanner:m["closeBanner"],showFileList:lt["g"],showPricingPlans:m["showPricingPlans"]};var gt=Object(v["connect"])(ft,bt)(mt);var _t=new k["b"]("client");var yt={countPref:"approaching_msg_limit_banner_cta_count",tsPref:"approaching_msg_limit_banner_cta_last_ts"};var Ot=63;var kt="GROWTH_PRICING";var Et="pricing?ui_element=11&ui_step="+Ot;var Ct={messagesCount:h["b"].number.isRequired,clogger:h["b"].object.isRequired,showPricingPlans:h["b"].func.isRequired};var jt=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onCloseBanner"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(kt,{limit_meter_messages_count:a,contexts:{ui_context:{step:Ot,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(kt,{limit_meter_messages_count:a,contexts:{ui_context:{step:Ot,action:"click",ui_element:"pricing_button"}}});this.props.showPricingPlans({pricingPlansPageUrl:Et,source:"approaching_msg_limit_banner"})}},{key:"onCloseBanner",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(kt,{limit_meter_messages_count:a,contexts:{ui_context:{step:Ot,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function e(){return{headerText:_t.t("Unlock unlimited messages for your team"),bodyText:_t.t("Your workspace is getting close to the 10,000 message limit for free teams. On Slack\u2019s paid plans, you can see and search unlimited messages.")}}},{key:"render",value:function e(){var t=this.getContent();return p.a.createElement(U,{headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:yt})}}]);return t}(d["PureComponent"]);jt.displayName="ApproachingMsgLimitBanner";var wt=function e(t){return{clogger:Object(E["a"])({state:t})}};var St={showPricingPlans:m["showPricingPlans"]};var It=Object(v["connect"])(wt,St)(jt);var Tt=new k["b"]("client");var At={countPref:"just_reached_msg_limit_banner_cta_count",tsPref:"just_reached_msg_limit_banner_cta_last_ts"};var Nt=64;var Pt="GROWTH_PRICING";var Rt="pricing?ui_element=11&ui_step="+Nt;var Mt={messagesCount:h["b"].number.isRequired,clogger:h["b"].object.isRequired,showPricingPlans:h["b"].func.isRequired};var Dt=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onCloseBanner"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(Pt,{limit_meter_messages_count:a,contexts:{ui_context:{step:Nt,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(Pt,{limit_meter_messages_count:a,contexts:{ui_context:{step:Nt,action:"click",ui_element:"pricing_button"}}});this.props.showPricingPlans({pricingPlansPageUrl:Rt,source:"just_reached_msg_limit_banner"})}},{key:"onCloseBanner",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(Pt,{limit_meter_messages_count:a,contexts:{ui_context:{step:Nt,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getCancelButtonText",value:function e(){return Tt.t("Not Now")}},{key:"getContent",value:function e(){return{headerText:Tt.t("You\u2019ve just reached the 10k message limit"),bodyText:Tt.t("Your workspace has over 10,000 messages in it! That\u2019s a lot of conversation and history. Upgrade to a paid plan to make sure you can access all of it whenever you need it.")}}},{key:"render",value:function e(){var t=this.getContent();return p.a.createElement(U,{headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:At,cancelButtonText:this.getCancelButtonText()})}}]);return t}(d["PureComponent"]);Dt.displayName="JustReachedMsgLimitBanner";var xt=function e(t){return{clogger:Object(E["a"])({state:t})}};var Ft={showPricingPlans:m["showPricingPlans"]};var Lt=Object(v["connect"])(xt,Ft)(Dt);var Bt=a(688);var Ut=new k["b"]("client");var qt={countPref:"thirty_days_after_msg_limit_banner_cta_count",tsPref:"thirty_days_after_msg_limit_banner_cta_last_ts"};var Gt=65;var Wt="GROWTH_PRICING";var Ht="pricing?ui_element=11&ui_step="+Gt;var Vt={messagesCount:h["b"].number.isRequired,clogger:h["b"].object.isRequired,showPricingPlans:h["b"].func.isRequired};var Kt=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onCloseBanner"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(Wt,{limit_meter_messages_count:a,contexts:{ui_context:{step:Gt,action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(Wt,{limit_meter_messages_count:a,contexts:{ui_context:{step:Gt,action:"click",ui_element:"pricing_button"}}});this.props.showPricingPlans({pricingPlansPageUrl:Ht,source:"thirty_days_after_msg_limit_banner"})}},{key:"onCloseBanner",value:function e(){var t=this.props,a=t.messagesCount,r=t.clogger;r.track(Wt,{limit_meter_messages_count:a,contexts:{ui_context:{step:Gt,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function e(){var t=this.props.messagesCount;var a=t-1e4;var r=this.roundNumOfMsgsBeyondLimit(a);if(!r||r<0)return null;return{headerText:Ut.t("Your workspace has {num_msgs_beyond_limit} messages more than the 10k limit",{num_msgs_beyond_limit:r}),bodyText:Ut.t("That\u2019s more than {num_msgs_beyond_limit} messages you can\u2019t see or search. Upgrade to a paid plan for access to your full history \u2014 plus features like guest accounts for contractors, group video calls, and unlimited apps.",{num_msgs_beyond_limit:r})}}},{key:"roundNumOfMsgsBeyondLimit",value:function e(t){if(t>9&&t<100)return 10*Math.floor(t/10);if(t>=100&&t<=999999){var a=100*Math.floor(t/100);return Object(k["l"])(a)}if(t>999999)return Object(Bt["a"])(t);return t}},{key:"render",value:function e(){var t=this.getContent();if(!t)return null;return p.a.createElement(U,{headerText:t.headerText,bodyText:t.bodyText,isLearnMoreButton:true,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:qt})}}]);return t}(d["PureComponent"]);Kt.displayName="ThirtyDaysAfterMsgLimitBanner";var zt=function e(t){return{clogger:Object(E["a"])({state:t})}};var Yt={showPricingPlans:m["showPricingPlans"]};var Qt=Object(v["connect"])(zt,Yt)(Kt);var Jt=a(12);var Zt=a(23);var Xt=a(232);var $t=a(24);var ea=a(1702);var ta=a(1094);var aa=a(508);var ra=new k["b"]("team_creation");var na={countPref:"team_creation_account_setup_banner_cta_count",tsPref:"team_creation_account_setup_banner_cta_last_ts"};var ia="team_creation_dialog_mount_point";var sa={clogger:h["b"].object.isRequired,logger:h["b"].object.isRequired,teamId:h["b"].string.isRequired,hasInvited:h["b"].bool,workflow:h["b"].object,activeWorkflowTask:h["b"].string,completeWorkflowTask:h["b"].func,nonBotMembersCount:h["b"].number.isRequired};var oa={hasInvited:false,workflow:null,activeWorkflowTask:"",completeWorkflowTask:I["noop"]};var la=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","getBannerContent"]);return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.activeWorkflowTask,r=t.clogger;this.loadFirstImageForDialog();"start_team_creator_account_setup"===a&&this.props.completeWorkflowTask({taskSubtype:"start_team_creator_account_setup"});var n=a;"start_team_creator_account_setup"!==a&&"complete_team_creator_account_setup"!==a&&(n="invite_team_creator_account_setup");r.track(Ie["k"].GROWTH_BANNER_TRACTOR,{contexts:{ui_context:{step:aa["a"][n],action:"impression"}}})}},{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.activeWorkflowTask,n=a.clogger;if(r===t.activeWorkflowTask)return;var i=r;"start_team_creator_account_setup"!==r&&"complete_team_creator_account_setup"!==r&&(i="invite_team_creator_account_setup");n.track(Ie["k"].GROWTH_BANNER_TRACTOR,{contexts:{ui_context:{step:aa["a"][i],action:"impression"}}})}},{key:"onGo",value:function e(){var t=this.props,a=t.activeWorkflowTask,r=t.teamId,n=t.hasInvited,i=t.clogger,s=t.logger;var o=a;"start_team_creator_account_setup"!==a&&"complete_team_creator_account_setup"!==a&&(o="invite_team_creator_account_setup");i.track(Ie["k"].GROWTH_BANNER_TRACTOR,{contexts:{ui_context:{step:aa["a"][o],action:"click",ui_element:Ie["y"].BANNER_TRACTOR_PRIMARY_CTA}}});if("start_team_creator_account_setup"===a||"complete_team_creator_account_setup"===a)return Object(ea["a"])(r,document.getElementById(ia));if(!n)return Object(ta["a"])({source:"team_creation_account_setup_banner"});var l={hasInvited:n,activeWorkflowTask:a};s.error(l,"SETUP_BANNER_ERROR");return null}},{key:"getBannerContent",value:function e(){var t=this.props,a=t.activeWorkflowTask,r=t.hasInvited;if("start_team_creator_account_setup"===a)return this.getFirstSetupBannerContent();if("complete_team_creator_account_setup"===a)return this.getSecondSetupBannerContent();if(!r)return this.getInvitesBannerContent();return{}}},{key:"getFirstSetupBannerContent",value:function e(){var t=this.props.hasInvited;var a=ra.t("Finish Signing Up");var r=t?ra.t("You can send messages here right away \u2014 but to get the most out of Slack, the next steps are to save your account and then get the conversation started."):ra.t("You can send messages here right away \u2013 but to get the most out of Slack, the next step is to save your account and invite a few people to join the conversation.");return{headerText:ra.t("Here it is! The first channel in your team\u2019s Slack workspace"),bodyText:r,imgSrc:cdn_url+"/08b1d/img/tractor/banners/first_setup@2x.png",goButtonText:a}}},{key:"getSecondSetupBannerContent",value:function e(){var t=this.props.hasInvited;var a=ra.t("Finish Signing Up");var r=t?ra.t("To see what teamwork is like in Slack, take a moment to save your account."):ra.t("To see what teamwork is like in Slack, take a moment to save your account and invite some teammates to join your workspace.");return{headerText:ra.t("Save your account and start collaborating"),bodyText:r,imgSrc:cdn_url+"/08b1d/img/tractor/banners/second_setup@2x.png",goButtonText:a}}},{key:"getInvitesBannerContent",value:function e(){return{headerText:ra.t("Bring your team into Slack"),bodyText:ra.t("Slack is better with teammates \u2013 invite them to start collaborating."),imgSrc:cdn_url+"/08b1d/img/tractor/banners/invite_others@2x.png",goButtonText:ra.t("Add People")}}},{key:"loadFirstImageForDialog",value:function e(){var t=new Image;var a=new Image;t.src=aa["b"].profile;a.src=aa["b"].profile.replace(".png","@2x.png")}},{key:"render",value:function e(){var t=this.props,a=t.hasInvited,r=t.workflow;if(null===r||"completed"===r.state&&(a||this.props.nonBotMembersCount>1))return null;var n=this.getBannerContent(),i=n.headerText,s=n.bodyText,o=n.imgSrc,l=n.goButtonText;return p.a.createElement(U,{bodyClass:"p-message_pane_banner__body--wider-text",headerText:i,bodyText:s,onGo:this.onGo,shouldCloseOnGo:false,imgSrc:o,goButtonText:l,showCancelButton:false,bannerPrefs:na})}}]);return t}(d["PureComponent"]);la.displayName="TeamCreationAccountSetupBanner";la.defaultProps=oa;var ca=function e(t){return{clogger:Object(E["a"])({state:t}),logger:Object(Jt["a"])({state:t}),teamId:Object(Zt["c"])(t),hasInvited:Object(C["f"])(t,"has_invited"),workflow:Object(Xt["getWorkflow"])(t),activeWorkflowTask:Object(Xt["getActiveWorkflowTask"])(t),nonBotMembersCount:Object(I["size"])(Object(I["filter"])(Object($t["a"])(t),function(e){return!e.is_bot&&!e.is_slackbot}))}};var ua={completeWorkflowTask:Xt["completeWorkflowTask"]};var da=Object(v["connect"])(ca,ua)(la);var pa=new k["b"]("paid_benefits_banners");var ha={clogger:h["b"].object.isRequired,team:h["b"].object.isRequired};var va={};var ma={countPref:"paid_benefits_banner_cta_count",tsPref:"paid_benefits_banner_cta_last_ts"};var fa=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(I["bindAll"])(a,["onGo","onCancel","onCloseIcon"]);return a}s()(t,[{key:"componentDidMount",value:function e(){this.props.clogger.track(Ie["k"].GROWTH_PRICING,{contexts:{ui_context:{step:Ie["z"].BANNER_PAID_BENEFITS_AWARENESS,action:Ie["v"].IMPRESSION}}})}},{key:"onGo",value:function e(){this.clogClick("learn_more");Object(re["openAuthenticatedUrlInBrowser"])(this.props.team,"benefits/standard")}},{key:"onCancel",value:function e(){this.clogClick("not_now")}},{key:"onCloseIcon",value:function e(){this.clogClick("close")}},{key:"getContent",value:function e(){return{headerText:pa.t("See all that Slack has to offer"),bodyText:pa.t("Discover what more your Slack team can do with a paid plan \u2014 including searching unlimited messages, installing unlimited apps, making group calls, and more."),cancelButtonText:pa.t("Not Now")}}},{key:"clogClick",value:function e(t){this.props.clogger.track(Ie["k"].GROWTH_PRICING,{contexts:{ui_context:{step:Ie["z"].BANNER_PAID_BENEFITS_AWARENESS,action:Ie["v"].CLICK,ui_properties:{element_type:Ie["j"].BUTTON,element_name:t}}}})}},{key:"render",value:function e(){var t=this.getContent();if(!t)return null;return p.a.createElement(U,{bodyClass:"p-message_pane_banner__body--wider-text",headerText:t.headerText,bodyText:t.bodyText,cancelButtonText:t.cancelButtonText,showCloseIcon:true,isLearnMoreButton:true,shouldCloseOnGo:false,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:ma})}}]);return t}(d["PureComponent"]);fa.displayName="PaidBenefitsAwarenessBanner";fa.defaultProps=va;var ba=function e(t){return{clogger:Object(E["a"])({state:t}),team:Object(ae["d"])(t)}};var ga=Object(v["connect"])(ba)(fa);var _a={bannerName:h["b"].string,bannerData:h["b"].object,throttledLoadBanner:h["b"].func.isRequired,featureModernizeBannersV3:h["b"].bool.isRequired};var ya={bannerName:"",bannerData:{}};var Oa=function e(){return p.a.createElement(J,null)};Oa.displayName="renderI18nJapanBetaSendBtnBanner";var ka=function e(t){var a=t.bannerData;return p.a.createElement(_e,{numDaysLeft:a.no_of_days_left,expirationDate:a.pay_date_next})};ka.displayName="renderTwoWeeksLeftEscTrialBanner";var Ea=function e(t){var a=t.bannerData;return p.a.createElement(Se,{numDaysLeft:a.no_of_days_left,expirationDate:a.pay_date_next})};Ea.displayName="renderOneWeekLeftEscTrialBanner";var Ca=function e(t){var a=t.bannerData;return p.a.createElement(De,{expirationDate:a.pay_date_next,productId:a.product_id})};Ca.displayName="renderThreeDaysLeftEscTrialBanner";var ja=function e(t){var a=t.bannerData;return p.a.createElement(We,{expirationDate:a.pay_date_next,productId:a.product_id})};ja.displayName="renderThreeDaysLeftTrialBanner";var wa=function e(){return p.a.createElement(gt,null)};wa.displayName="renderApproachingFileLimitBanner";var Sa=function e(t){var a=t.bannerData;return p.a.createElement(Xe,{numMsgs:a.messages_count_abbrev})};Sa.displayName="renderInProdTrialBanner";var Ia=function e(t){var a=t.bannerData;return p.a.createElement(ot,{expirationDate:a.expiration_date})};Ia.displayName="renderInProdTrialReminderBanner";var Ta=function e(t){var a=t.bannerData;return p.a.createElement(It,{messagesCount:a.messages_count})};Ta.displayName="renderApproachingMsgLimitBanner";var Aa=function e(t){var a=t.bannerData;return p.a.createElement(Lt,{messagesCount:a.messages_count})};Aa.displayName="renderJustReachedMsgLimitBanner";var Na=function e(t){var a=t.bannerData;return p.a.createElement(Qt,{messagesCount:a.messages_count})};Na.displayName="renderThirtyDaysAfterMsgLimitBanner";var Pa=function e(){return p.a.createElement(da,null)};Pa.displayName="renderTeamCreationAccountSetupBanner";var Ra=function e(){return p.a.createElement(ga,null)};Ra.displayName="renderPaidBenefitsAwarenessBanner";var Ma={activation_msg_limit_banner:null};var Da={i18n_japan_beta_send_btn_banner:Oa,two_weeks_left_esc_trial_banner:ka,one_week_left_esc_trial_banner:Ea,three_days_left_esc_trial_banner:Ca,three_days_left_trial_banner:ja,in_prod_trial_banner:Sa,in_prod_trial_reminder_banner:Ia,approaching_file_limit_banner:wa,approaching_msg_limit_banner:Ta,just_reached_msg_limit_banner:Aa,thirty_days_after_msg_limit_banner:Na,team_creation_account_setup_banner:Pa,paid_benefits_awareness_banner:Ra};var xa=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"componentDidMount",value:function e(){var t=this.parseUrlDebugArgs();this.props.throttledLoadBanner(t)}},{key:"parseUrlDebugArgs",value:function e(){var t=Object(O["urlQueryStringParse"])(window.location);var a={};if(t.banner_type){a.qa_banner_type=t.banner_type;a.qa_banner_data={};Object.keys(t).forEach(function(e){var r=e.split("banner_data_")[1];if(r){var n=parseInt(t[e],10);isNaN(n)&&(n=t[e]);a.qa_banner_data[r]=n}});a.qa_banner_data=JSON.stringify(a.qa_banner_data)}return a}},{key:"render",value:function e(){var t=this.props,a=t.bannerName,r=t.bannerData,n=t.featureModernizeBannersV3;if(!a)return null;if(g(a)){_(a,r);return null}var i=Da[a];n&&(i=i||Ma[a]);if(!i){b({name:a,data:r});return null}return i({bannerData:r})}}]);return t}(d["PureComponent"]);xa.displayName="MessagePaneBannerContainer";xa.defaultProps=ya;var Fa=function e(t){return{bannerName:Object(m["getMessagePaneBannerName"])(t),bannerData:Object(m["getMessagePaneBannerData"])(t),featureModernizeBannersV3:Object(y["isFeatureEnabled"])(t,"feature_modernize_banners_v3")}};var La={throttledLoadBanner:m["throttledLoadBanner"]};var Ba=t["a"]=Object(v["connect"])(Fa,La)(xa)},function(e,t,a){"use strict";var r=a(13);var n=a(146);var i=a(1438);var s=a(3);var o=a.n(s);var l=a(6);var c=a.n(l);var u=a(7);var d=a.n(u);var p=a(8);var h=a.n(p);var v=a(9);var m=a.n(v);var f=a(1);var b=a.n(f);var g=a(16);var _=a.n(g);var y=a(0);var O=a(2);var k=a(10);var E=a(381);var C=a(152);var j=a(28);var w=a(92);var S=a(51);var I=a(204);var T=a(57);var A=a(1450);var N=new k["b"]("pricing_calculator");var P={planIsYearly:y["b"].bool.isRequired,planCostPerTerm:y["b"].number.isRequired,planCurrency:y["b"].string.isRequired,teamName:y["b"].string,numInactiveMembers:y["b"].number.isRequired,isZeroActiveMembers:y["b"].bool.isRequired,totalMembers:y["b"].number.isRequired,paidSeats:y["b"].number.isRequired,totalCost:y["b"].number.isRequired,totalCostWithTax:y["b"].number.isRequired,totalRecurringTax:y["b"].number.isRequired,tax:y["b"].shape({value:y["b"].number,type:y["b"].string}),showCurrencyLabel:y["b"].bool,clogger:y["b"].object,clogMetadata:y["b"].object};var R={tax:null,teamName:"",showCurrencyLabel:false,clogger:{sendDataAndEmptyQueue:O["noop"],track:O["noop"]},clogMetadata:{params:{},paramsString:""}};var M=function(e){m()(t,e);function t(e){c()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(a,["onFairBillingLinkClick","onLearnMoreLinkClick"]);return a}d()(t,[{key:"onFairBillingLinkClick",value:function e(){var t=this.props,a=t.clogger,r=t.clogMetadata;a.track("billing_checkout_v2",o()({contexts:{ui_context:{step:"checkout_pricing_calculator",action:"click",ui_element:"link_calculator_fair_billing_policy",ui_component:"pricing_calculator"}}},r.params));a.sendDataAndEmptyQueue()}},{key:"onLearnMoreLinkClick",value:function e(){var t=this.props,a=t.clogger,r=t.clogMetadata;a.track("billing_checkout_v2",o()({contexts:{ui_context:{step:"checkout_pricing_calculator",action:"click",ui_element:"link_calculator_billing_help",ui_component:"pricing_calculator"}}},r.params));a.sendDataAndEmptyQueue()}},{key:"getTaxFormattedData",value:function e(t,a,r){var n=void 0;var i=void 0;if(t){switch(t.type){case w["g"].vat:n=N.t("Estimated VAT");break;case w["g"].jct:n=N.t("Estimated JCT");break;case w["g"].sales_tax:n=N.t("Estimated sales tax");break;default:n=N.t("Estimated tax");break}i=Object(E["a"])(a,r)}else{n=N.t("Tax");i=N.t("Applied at checkout")}return{taxKey:n,taxValue:i}}},{key:"renderRow",value:function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=_()("p-pricing_calculator__table_row","p-pricing_calculator__table_row--"+r.type);return b.a.createElement("div",{className:n},b.a.createElement("div",{className:"p-pricing_calculator__table_item p-pricing_calculator__table_item--key","data-qa":"pricing_calculator_table_item_"+r.type+"_key"},t),b.a.createElement("div",{className:"p-pricing_calculator__table_item p-pricing_calculator__table_item--value","data-qa":"pricing_calculator_table_item_"+r.type+"_value"},a))}},{key:"renderSubtotalRow",value:function e(){var t=this;var a=this.props,r=a.planIsYearly,n=a.planCostPerTerm,i=a.paidSeats,s=a.numInactiveMembers,o=a.isZeroActiveMembers,l=a.totalMembers,c=a.totalCost,u=a.teamName,d=a.planCurrency;var p=void 0;o?p=N.rt("Your team hasn\u2019t been especially active on Slack lately. We\u2019ll only charge you for one member today, but as your team becomes active that could change. <a>Learn about billing</a>",null,function(e){var a=e.text,r=e.key;return b.a.createElement(S["a"],{href:Object(I["b"])({articleId:"218915077",zdLocale:Object(T["a"])()}),key:r,className:"bold",target:"_blank",rel:"noopener noreferrer",onClick:t.onFairBillingLinkClick},a)}):s&&(p=N.rt("{teamName} has {totalMembers, plural, =1 {# member} other {# members}}, but {numInactiveMembers, plural, =1 {# isn\u2019t} other {# aren\u2019t}} actively using Slack. We won\u2019t charge you for {numInactiveMembers, plural, =1 {them} other {them}}, as part of our <a>Fair Billing policy</a>.",{teamName:u,totalMembers:l,numInactiveMembers:s,fallbackHash:"dbc00b53e0783bd19d07fb7811c83b75647ee285"},function(e){var a=e.text,r=e.key;return b.a.createElement(S["a"],{href:Object(I["b"])({articleId:"218915077",zdLocale:Object(T["a"])()}),key:r,className:"bold",target:"_blank",rel:"noopener noreferrer",onClick:t.onFairBillingLinkClick},a)}));var h=b.a.createElement("div",null,b.a.createElement(A["a"],{planIsYearly:r,billedMembers:i,numInactiveMembers:s,formattedPlanCost:Object(E["a"])(n,d)}),p&&b.a.createElement("div",{className:"p-pricing_calculator__table_item_caption"},p));var v=Object(E["a"])(c,d);return this.renderRow(h,v,{type:"subtotal"})}},{key:"renderTaxRow",value:function e(){var t=this.props,a=t.tax,r=t.totalRecurringTax,n=t.planCurrency;var i=this.getTaxFormattedData(a,r,n),s=i.taxKey,o=i.taxValue;return this.renderRow(s,o,{type:"tax"})}},{key:"renderTotalRow",value:function e(){var t=this;var a=this.props,r=a.planCurrency,n=a.totalCostWithTax,i=a.planIsYearly,s=a.showCurrencyLabel;var o=void 0;var l=void 0;if(i){o=N.t("Yearly payment");l=N.rt("Your yearly payment will change when members are added, removed, or go inactive. <a>Learn more</a>",null,function(e){var a=e.text,r=e.key;return b.a.createElement(S["a"],{href:Object(I["b"])({articleId:"218915077",zdLocale:Object(T["a"])()}),key:r,className:"bold",target:"_blank",rel:"noopener noreferrer",onClick:t.onLearnMoreLinkClick},a)})}else{o=N.t("Monthly payment");l=N.rt("Your monthly payment will change when members are added, removed, or go inactive. <a>Learn more</a>",null,function(e){var a=e.text,r=e.key;return b.a.createElement(S["a"],{href:Object(I["b"])({articleId:"218915077",zdLocale:Object(T["a"])()}),key:r,className:"bold",target:"_blank",rel:"noopener noreferrer",onClick:t.onLearnMoreLinkClick},a)})}var c=b.a.createElement("div",null,o,b.a.createElement("div",{className:"p-pricing_calculator__table_item_caption"},l));var u=""+Object(E["a"])(n,r);s&&(u=u+" "+r);return this.renderRow(c,u,{type:"total"})}},{key:"render",value:function e(){return b.a.createElement("div",{className:"p-pricing_calculator__table"},this.renderSubtotalRow(),this.renderTaxRow(),this.renderTotalRow())}}]);return t}(f["PureComponent"]);M.displayName="PricingCalculatorTable";M.defaultProps=R;var D=M;var x=a(1973);var F=new k["b"]("pricing_calculator");var L={isUserRestricted:y["b"].bool,title:y["b"].string,showHeader:y["b"].bool,headerBackgroundColor:y["b"].string,yearlyPlanCostPerTerm:y["b"].number,monthlyPlanCostPerTerm:y["b"].number,planLevel:y["b"].string.isRequired,planIsYearly:y["b"].bool,numMonthsPerPlan:y["b"].number,planCostPerTerm:y["b"].number,planCurrency:y["b"].string,numInactiveMembers:y["b"].number,isZeroActiveMembers:y["b"].bool,totalMembers:y["b"].number,paidSeats:y["b"].number,totalCost:y["b"].number,totalCostWithTax:y["b"].number,totalRecurringTax:y["b"].number,teamName:y["b"].string,tax:y["b"].object,teamCredits:y["b"].number,showSubmitButton:y["b"].bool,submitButtonText:y["b"].string,onSubmit:y["b"].func,display:y["b"].oneOf(["boxed","inline"]),loadPlansAndCostData:y["b"].func,switchTerms:y["b"].func,updatePlanLevel:y["b"].func,isPlansAndCostDataLoaded:y["b"].bool,showCurrencyLabel:y["b"].bool,clogger:y["b"].object,clogMetadata:y["b"].object};var B={isUserRestricted:false,title:"",showHeader:true,headerBackgroundColor:"sk_fill_blue",yearlyPlanCostPerTerm:0,monthlyPlanCostPerTerm:0,planIsYearly:false,numMonthsPerPlan:1,planCostPerTerm:0,planCurrency:"USD",numInactiveMembers:0,isZeroActiveMembers:true,totalMembers:0,paidSeats:0,totalCost:0,totalCostWithTax:0,totalRecurringTax:0,teamName:"",tax:null,teamCredits:0,showSubmitButton:true,submitButtonText:null,onSubmit:O["noop"],display:"inline",loadPlansAndCostData:O["noop"],switchTerms:O["noop"],updatePlanLevel:O["noop"],isPlansAndCostDataLoaded:false,showCurrencyLabel:false,clogger:{sendDataAndEmptyQueue:O["noop"],track:O["noop"]},clogMetadata:{params:{},paramsString:""}};var U=function(e){m()(t,e);function t(e){c()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={submitButtonIsPending:false};Object(O["bindAll"])(a,["handleSubmit","switchtoYearly","switchToMonthly"]);return a}d()(t,[{key:"componentDidMount",value:function e(){if(!this.props.isPlansAndCostDataLoaded){this.props.updatePlanLevel(this.props.planLevel);this.props.loadPlansAndCostData({isFinalReview:false})}}},{key:"switchtoYearly",value:function e(){this.props.clogger.track("billing_checkout_v2",o()({contexts:{ui_context:{step:"checkout_pricing_calculator",action:"product_term_switch",ui_element:"btn_calculator_term_switch",ui_component:"pricing_calculator"}}},this.props.clogMetadata.params,{product_term:"yearly"}));this.props.clogger.sendDataAndEmptyQueue();return this.props.switchTerms("yearly")}},{key:"switchToMonthly",value:function e(){this.props.clogger.track("billing_checkout_v2",o()({contexts:{ui_context:{step:"checkout_pricing_calculator",action:"product_term_switch",ui_element:"btn_calculator_term_switch",ui_component:"pricing_calculator"}}},this.props.clogMetadata.params,{product_term:"monthly"}));this.props.clogger.sendDataAndEmptyQueue();return this.props.switchTerms("monthly")}},{key:"handleSubmit",value:function e(){var t=this;this.props.clogger.track("billing_checkout_v2",o()({contexts:{ui_context:{step:"checkout_pricing_calculator",action:"click",ui_element:"btn_calculator_check_out",ui_component:"pricing_calculator"}}},this.props.clogMetadata.params));this.props.clogger.sendDataAndEmptyQueue();this.setState(function(e){return o()({},e,{submitButtonIsPending:true})},function(){try{t.props.onSubmit()}catch(e){t.setState(function(e){return o()({},e,{submitButtonIsPending:false})})}})}},{key:"renderHeader",value:function e(){var t=this.props,a=t.title,r=t.headerBackgroundColor;if(!a)return null;var n=_()("p-pricing_calculator__header","p-pricing_calculator__header--"+r);return b.a.createElement("h3",{className:n,"data-qa":"pricing_calculator_header"},a)}},{key:"renderTermsToggle",value:function e(){var t=this.props,a=t.yearlyPlanCostPerTerm,r=t.monthlyPlanCostPerTerm,n=t.planIsYearly,i=t.planCurrency;var s=Object(E["a"])(a,i);var o=Object(E["a"])(r,i);var l=_()("p-pricing_calculator__terms_toggle_button",{"p-pricing_calculator__terms_toggle_button--active":n});var c=_()("p-pricing_calculator__terms_toggle_button",{"p-pricing_calculator__terms_toggle_button--active":!n});return b.a.createElement("div",{className:"p-pricing_calculator__terms_toggle_container","data-qa":"pricing_calculator_terms_toggle_container"},b.a.createElement(j["c"],{onClick:this.switchtoYearly,className:l,"data-qa":"pricing_calculator_terms_toggle_yearly"},b.a.createElement("div",{tabIndex:"-1",className:"p-pricing_calculator__terms_toggle_button_focus_wrapper"}),b.a.createElement("h3",null,F.t("Pay each year")),b.a.createElement("span",{className:"p-pricing_calculator__terms_toggle_button_caption"},F.t("{yearlyPlanCostPerTermFormatted} per member, per year",{yearlyPlanCostPerTermFormatted:s}))),b.a.createElement(j["c"],{onClick:this.switchToMonthly,className:c,"data-qa":"pricing_calculator_terms_toggle_monthly"},b.a.createElement("div",{tabIndex:"-1",className:"p-pricing_calculator__terms_toggle_button_focus_wrapper"}),b.a.createElement("h3",null,F.t("Pay each month")),b.a.createElement("span",{className:"p-pricing_calculator__terms_toggle_button_caption"},F.t("{monthlyPlanCostPerTermFormatted} per member, per month",{monthlyPlanCostPerTermFormatted:o}))))}},{key:"renderSwitchCurrencyInfo",value:function e(){return b.a.createElement("div",{className:"p-pricing_calculator__currency_info"},b.a.createElement("span",{className:"p-pricing_calculator__currency_info--title"},F.t("Looking for a different currency?")),b.a.createElement("span",{className:"p-pricing_calculator__currency_info--description"},F.t("Depending on your company\u2019s location, you may be able to select GBP, EUR, or JPY on the next page.")))}},{key:"renderCreditToast",value:function e(){var t=this.props,a=t.teamName,r=t.teamCredits,n=t.planCurrency;if(!r)return null;var i=Object(E["a"])(Math.abs(r),n);var s=r>0?F.rt("{teamName} has <strong>{creditsAppliedFormatted} in credit</strong>, which will be applied at checkout.",{teamName:a,creditsAppliedFormatted:i}):F.rt("{teamName}\u2018s account has an outstanding balance of <strong>{creditsAppliedFormatted}</strong>, which will be added to the final price during checkout",{teamName:a,creditsAppliedFormatted:i});return b.a.createElement(C["d"],{type:"inline",className:"p-pricing_calculator__credit_alert","data-qa":"pricing_calculator_credit_alert"},s)}},{key:"renderSubmitBtn",value:function e(){var t=this.props,a=t.submitButtonText,r=t.showSubmitButton;var n=this.state.submitButtonIsPending;if(!r)return null;return b.a.createElement(j["b"],{id:"pricing_calculator_submit_btn",size:"large",className:"p-pricing_calculator__submit_btn",onClick:this.handleSubmit,loading:n,"data-qa":"pricing_calculator_submit_btn"},a||F.t("Upgrade"))}},{key:"render",value:function e(){var t=this.props,a=t.isUserRestricted,r=t.showHeader,n=t.showSubmitButton,i=t.display,s=t.teamCredits,o=t.isPlansAndCostDataLoaded;if(!o||a)return null;var l=_()("p-pricing_calculator","p-pricing_calculator--"+i,{"p-pricing_calculator--has-header":this.props.showHeader});return b.a.createElement("div",{className:l,"data-qa":"pricing_calculator_container"},r&&this.renderHeader(),b.a.createElement("div",{className:"p-pricing_calculator__body"},this.renderTermsToggle(),b.a.createElement(D,this.props),this.renderSwitchCurrencyInfo(),!!s&&this.renderCreditToast(),n&&this.renderSubmitBtn()))}}]);return t}(f["PureComponent"]);U.displayName="PricingCalculator";U.displayName="PricingCalculator";U.defaultProps=B;var q=U;var G=function e(t){return Object(i["a"])(t)};var W=function e(t){return{loadPlansAndCostData:function e(a){return t(Object(n["fetchPlansAndCostData"])(a))},switchTerms:function e(a){return t(Object(n["changeActivePlan"])({term:a}))},updatePlanLevel:function e(a){return t(Object(n["updatePlanLevel"])(a))}}};var H=Object(r["connect"])(G,W)(q);var V=t["a"]=H},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(0);var v=a(1);var m=a.n(v);var f=a(13);var b=a(2);var g=a(16);var _=a.n(g);var y=a(4);var O=a(1210);var k=a(536);var E=a(1363);var C=a(689);var j=a(10);var w=a(189);var S=a(28);var I=a(31);var T=a(2128);var A=new j["b"]("custom_tos");var N={hasCustomTOS:h["b"].bool,customTOSTimestamp:h["b"].number,disablePrivacyAndCookiePolicy:h["b"].bool,enterprise:h["b"].shape({name:h["b"].string,domain:h["b"].string}),orgUrl:h["b"].string,customTOSViewLink:h["b"].string,team:h["b"].shape({name:h["b"].string}),safeAbsRootURL:h["b"].string,featureZeroWorkspaceOnboarding:h["b"].bool.isRequired,onSubmit:h["b"].func,onlyDisplayCard:h["b"].bool};var P={hasCustomTOS:false,disablePrivacyAndCookiePolicy:false,enterprise:null,orgUrl:"",customTOSTimestamp:0,customTOSViewLink:"",team:null,safeAbsRootURL:"https://slack.com/",onSubmit:b["noop"],onlyDisplayCard:false};var R=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={buttonIsPending:false};a.onClick=a.onClick.bind(a);return a}l()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.setButtonPending(true);this.props.onSubmit()}},{key:"setButtonPending",value:function e(t){this.setState(function(){return{buttonIsPending:t}})}},{key:"maybeRenderSlackUserTOS",value:function e(){var t=this.props.hasCustomTOS;if(t)return null;return m.a.createElement("li",null,this.renderSlackUserTOS())}},{key:"maybeRenderEnterpriseTOS",value:function e(){var t=this.props.hasCustomTOS;if(!t)return null;return m.a.createElement("li",null,this.renderEnterpriseTOS())}},{key:"maybeRenderCookiePolicy",value:function e(){var t=this.props.disablePrivacyAndCookiePolicy;if(t)return null;return m.a.createElement("li",null,this.renderCookiePolicy())}},{key:"maybeRenderPrivacyPolicy",value:function e(){var t=this.props.disablePrivacyAndCookiePolicy;if(t)return null;return m.a.createElement("li",null,this.renderPrivacyPolicy())}},{key:"renderCookiePolicy",value:function e(){var t=this.props,a=t.safeAbsRootURL,r=t.featureZeroWorkspaceOnboarding;if(!r)return null;return m.a.createElement("a",{href:a+"cookie-policy",target:"_blank",rel:"noopener noreferrer"},A.t("Slack\u2019s Cookie Policy"))}},{key:"renderPrivacyPolicy",value:function e(){var t=this.props,a=t.safeAbsRootURL,r=t.featureZeroWorkspaceOnboarding;if(!r)return null;return m.a.createElement("a",{href:a+"privacy-policy",target:"_blank",rel:"noopener noreferrer"},A.t("Slack\u2019s Privacy Policy"))}},{key:"renderEnterpriseTOS",value:function e(){var t=this.props,a=t.customTOSViewLink,r=t.enterprise,n=t.featureZeroWorkspaceOnboarding;if(!n)return null;return m.a.createElement("a",{href:""+a,target:"_blank",rel:"noopener noreferrer"},A.rt("{enterpriseName}\u2019s Terms of Service",{enterpriseName:r.name}))}},{key:"renderSlackUserTOS",value:function e(){var t=this.props,a=t.safeAbsRootURL,r=t.featureZeroWorkspaceOnboarding;if(!r)return null;return m.a.createElement("a",{href:a+"terms-of-service/user",target:"_blank",rel:"noopener noreferrer"},A.t("Slack\u2019s User Terms of Service"))}},{key:"renderTOSHeading",value:function e(){var t=this.props,a=t.featureZeroWorkspaceOnboarding,r=t.customTOSTimestamp;if(!a)return null;var n=void 0;n=r?A.t("Review and accept the updated terms of service"):A.t("Review the terms of service");return m.a.createElement("div",{className:"p-tos__heading"},n)}},{key:"renderTOSSubheading",value:function e(){var t=this.props,a=t.customTOSTimestamp,r=t.enterprise,n=t.customTOSViewLink,i=t.team,s=t.featureZeroWorkspaceOnboarding;if(!s)return null;if(Object(b["isNull"])(Object(C["c"])(n))){if(!Object(b["isEmpty"])(i))return m.a.createElement("div",null,m.a.createElement("p",{className:"p-tos__subheading"},A.rt('<strong>{teamName}</strong> is a Slack workspace managed by <strong>{enterpriseName}</strong>. By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:',{teamName:Object(I["getTeamDisplayName"])(i),enterpriseName:r.name})),m.a.createElement("p",{className:"p-tos__subheading"},n));return m.a.createElement("div",null,m.a.createElement("p",{className:"p-tos__subheading"},A.rt('By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:')),m.a.createElement("p",{className:"p-tos__subheading"},n))}if(a)return m.a.createElement("p",{className:"p-tos__subheading"},A.rt('By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to <a>{enterpriseName}\u2019s Terms of Service</a>, updated on {TOSUpdatedOn}.',{enterpriseName:r.name,customTOSViewLink:n,TOSUpdatedOn:Object(w["a"])(a)},function(e){var t=e.text,a=e.key,r=e.tag;if("a"===r)return m.a.createElement("a",{href:n,target:"_blank",key:a,rel:"noopener noreferrer"},t);return null}));if(!Object(b["isEmpty"])(i))return m.a.createElement("p",{className:"p-tos__subheading"},A.rt('<strong>{teamName}</strong> is a Slack workspace managed by <strong>{enterpriseName}</strong>. By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:',{teamName:Object(I["getTeamDisplayName"])(i),enterpriseName:r.name}));return m.a.createElement("p",{className:"p-tos__subheading"},A.rt('By choosing <strong className="sk_black">\u201cI Agree\u201d</strong> you understand and agree to:'))}},{key:"renderTOSLinks",value:function e(){var t=this.props.customTOSTimestamp;if(t)return null;return m.a.createElement("div",{className:"p-tos__body"},m.a.createElement("ul",{className:"no_bullets margin_left_0"},this.maybeRenderSlackUserTOS(),this.maybeRenderPrivacyPolicy(),this.maybeRenderCookiePolicy(),this.maybeRenderEnterpriseTOS()))}},{key:"renderTOSBody",value:function e(){return m.a.createElement("div",{className:"p-tos__body"},this.renderTOSLinks(),this.renderSubmitButton())}},{key:"renderSubmitButton",value:function e(){if(!this.props.featureZeroWorkspaceOnboarding)return null;var t=this.state.buttonIsPending;return m.a.createElement(S["b"],{id:"submit_btn",type:"primary",className:"p-tos__button",onClick:this.onClick,loading:t,disabled:t,"data-qa":"submit_button"},A.t("I Agree"))}},{key:"renderCard",value:function e(){var t=_()("p-tos__card",{margin_top_0:this.props.onlyDisplayCard});return m.a.createElement("div",{className:t},m.a.createElement("div",{className:"p-tos__content"},this.renderTOSHeading(),this.renderTOSSubheading(),this.renderTOSBody()))}},{key:"render",value:function e(){var t=this.props,a=t.enterprise,r=t.onlyDisplayCard,n=t.orgUrl;return m.a.createElement("div",{className:"p-tos"},!r&&m.a.createElement(E["a"],{team:a,title:n,logoAriaLabel:"Slack"}),this.renderCard())}}]);return t}(v["PureComponent"]);R.displayName="TermsOfService";R.defaultProps=P;var M=function e(t){var a=Object(y["getFromBootData"])(t,"custom_tos");var r=a.enterprise;var i=Object(y["isFeatureEnabled"])(t,"feature_zero_workspace_onboarding");var s=Object(O["a"])(t);Object(b["isEmpty"])(s)||(r=s);var o=Object(k["c"])(t,r.domain);return n()({},a,{enterprise:r,orgUrl:o,featureZeroWorkspaceOnboarding:i})};var D=Object(f["connect"])(M)(R);a.d(t,"a",function(){return R});var x=t["b"]=D},,,,,,function(e,t,a){"use strict";a.d(t,"b",function(){return n});a.d(t,"a",function(){return i});var r=a(20);var n=Object(r["b"])("TS.ui.jumper.start",function(){return null});var i=Object(r["b"])("TS.ui.jumper.getSessionId",function(){return null});var s={start:n}},function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(13);var o=a(34);var l=a(181);var c=a(311);var u=a(580);var d=a(12);var p=a(4);var h={theme:r["b"].oneOf(["custom_theme","default","default_theme","aubergine_classic_theme","hoth_theme","monument_theme","chocolate_theme","ocean_theme","workhard_theme","nocturne_theme","solanum_theme","brinjal_theme","cotton_theme","eco_theme","neue_theme","cloud_theme","kaiyo_theme","midnight_theme","stark_theme"]),custom:r["b"].object,useGlobalNav:r["b"].bool,featureClassicNav:r["b"].bool};var v={theme:"default_theme",custom:{},useGlobalNav:false,featureClassicNav:false};var m=function e(t){var a=Object(u["e"])(t.theme,t.custom,{useGlobalNav:t.useGlobalNav});if(!a){Object(d["b"])().warn('Theme: could not identify theme "'+t.theme+'" ('+t.custom+")");return null}var r=Object(c["d"])(a,{useGlobalNav:t.useGlobalNav,featureClassicNav:t.featureClassicNav});var n=a.text_color;var s=Object(c["c"])(a.column_bg,25);var o=Object(c["c"])(a.column_bg,35);var p=Object(l["a"])(a);var h=Object(c["b"])(n,Object(c["k"])(n,.3));var v="\n\t\t.p-channel_sidebar {\n\t\t\tbackground: "+a.column_bg+";\n\t\t\tcolor: "+r+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel,\n\t\t.p-channel_sidebar__link,\n\t\t.p-channel_sidebar__channel:link,\n\t\t.p-channel_sidebar__link:link,\n\t\t.p-channel_sidebar__channel:visited,\n\t\t.p-channel_sidebar__link:visited,\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover {\n\t\t\tcolor: "+r+";\n\t\t}\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__channel--selected:link,\n\t\t.p-channel_sidebar__link--selected:link,\n\t\t.p-channel_sidebar__channel--selected:visited,\n\t\t.p-channel_sidebar__link--selected:visited,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected:hover,\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close {\n\t\t\tcolor: "+a.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover,\n\t\t.p-channel_sidebar__close_container:hover {\n\t\t\tbackground: "+a.hover_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__header {\n\t\t\tcolor: "+r+';\n\t\t}\n\n\t\t/* Folders */\n\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename {\n\t\t\tbackground: '+s+";\n\t\t\tcolor: "+r+';\n\t\t}\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename:hover {\n\t\t\tbackground: '+o+";\n\t\t\tcolor: "+r+";\n\t\t}\n\n\t\t/* Override presence icons */\n\t\t.p-channel_sidebar__channel--im .c-presence--active,\n\t\t.p-channel_sidebar__channel--im-slackbot:before {\n\t\t\tcolor: "+a.active_presence+";\n\t\t}\n\t\t.p-channel_sidebar__channel--im.p-channel_sidebar__channel--selected .c-presence,\n\t\t.p-channel_sidebar__channel--im-slackbot.p-channel_sidebar__channel--selected:before {\n\t\t\tcolor: "+a.active_item_text+";\n\t\t}\n\t\t.p-channel_sidebar__channel--im .c-presence--away {\n\t\t\tcolor: "+r+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__link--selected:hover {\n\t\t\tbackground: "+a.active_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel--selected:before,\n\t\t.p-channel_sidebar__channel--selected:hover:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__channel--selected:after,\n\t\t.p-channel_sidebar__channel--selected:hover:after,\n\t\t.p-channel_sidebar__link--selected:after,\n\t\t.p-channel_sidebar__link--selected:after {\n\t\t\tcolor: "+a.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__badge,\n\t\t.p-channel_sidebar__banner--mentions {\n\t\t\tbackground: "+a.badge+";\n\t\t}\n\n\t\t.p-channel_sidebar .c-custom_scrollbar__thumb_vertical,\n\t\t.p-channel_sidebar .c-scrollbar__bar {\n\t\t\tbackground: "+Object(c["k"])(n,.45)+";\n\t\t}\n\n\t\t.client_channels_list_container.focusablesection:focus .sectionfocusindicator,\n\t\t.client_channels_list_container .focus-ring,\n\t\t.p-channel_sidebar.focusablesection:focus .sectionfocusindicator,\n\t\t#team_menu.focusablesection:focus .sectionfocusindicator {\n\t\t\tbox-shadow: "+h+";\n\t\t}\n\t\t\t\t\n\t\t.p-channel_sidebar__jumper.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_label--clickable.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_plus.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__channel.c-link--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link.c-button--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__close.c-button--focus-visible:focus {\n\t\t\tbox-shadow: "+h+";\n\t\t}\n\n\t\t/** `opacity: 1` color overrides */\n\t\t.p-channel_sidebar__channel--unread:not(.p-channel_sidebar__channel--muted):not(.p-channel_sidebar__channel--suggested):not(.p-channel_sidebar__channel--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--unread:not(.p-channel_sidebar__link--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--invites:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--add-channel:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__section_heading_label--clickable:hover,\n\t\t.p-channel_sidebar__section_heading_label--unreads,\n\t\t.p-channel_sidebar__quickswitcher:hover {\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t.p-channel_sidebar__jumper {\n\t\t\tbackground: "+s+";\n\t\t}\n\t\t.p-channel_sidebar__jumper:hover {\n\t\t\tbackground: "+o+";\n\t\t}\n\t\t.p-channel_sidebar__history_button {\n\t\t\tbackground: "+s+";\n\t\t}\n\t\t.p-channel_sidebar__history_button:hover {\n\t\t\tbackground: "+o+";\n\t\t}\n\n\t\t/** Global Nav (DEPRECATED BUT KEEP FOR SONIC) **/\n\t\t.p-global_nav__top {\n\t\t\tbackground: "+p.nav_bar_bg+";\n\t\t\tcolor: "+p.nav_bar_text+";\n\t\t}\n\t\t.p-global_nav__top:after {\n\t\t\tbackground: "+p.nav_bar_bg+";\n\t\t}\n\t\t.p-global_nav__sidebar {\n\t\t\tbackground: "+a.column_bg+";\n\t\t\tcolor: "+r+";\n\t\t}\n\t\t.p-global_nav__top_user_presence {\n\t\t\tbackground: "+p.nav_bar_bg+";\n\t\t}\n\t\t.p-global_nav__top_user_presence.c-presence--active {\n\t\t\tcolor: "+a.active_presence+";\n\t\t}\n\t\t.p-global_nav__top_user_presence.c-presence--away {\n\t\t\tcolor: "+p.nav_bar_text+";\n\t\t}\n\t\t.p-global_nav__sidebar_jumper:hover,\n\t\t.p-global_nav__sidebar_button:hover {\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t/** Classic Nav (WIP) **/\n\t\t.p-classic_nav__team_header {\n\t\t\tbackground: "+a.column_bg+";\n\t\t\tcolor: "+n+";\n\t\t}\n\t\t.p-classic_nav__team_header:hover {\n\t\t\tbackground: "+a.menu_bg+";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--active {\n\t\t\tcolor: "+a.active_presence+";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--away {\n\t\t\tcolor: "+r+";\n\t\t}\n\t\t.p-classic_nav__team_header .c-link--focus-visible:focus,\n\t\t.p-classic_nav__team_header .c-button--focus-visible:focus {\n\t\t\tbox-shadow: "+h+";\n\t\t}\n\t";return i.a.createElement("style",{className:"p-channel_sidebar__theme--"+t.theme},v)};m.displayName="Theme";m.defaultProps=v;var f=function e(t){var a=Object(o["f"])(t,"sidebar_theme");var r=Object(o["c"])(t);return{theme:a,custom:r,useGlobalNav:Object(l["b"])(t),featureClassicNav:Object(p["isFeatureEnabled"])(t,"feature_classic_nav")}};t["a"]=Object(s["connect"])(f)(m)},function(e,t,a){"use strict";var r=a(329);t["a"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,a=void 0!==t&&t,n=e.isEphemeral,i=void 0!==n&&n,s=e.isStarred,o=void 0!==s&&s,l=e.isBroadcast,c=void 0!==l&&l,u=e.subtype,d=e.sliHighlight;var p="slackbot_response"===u;var h=Object(r["shouldShowHighlightsLabel"])(d);return{isPinned:a,isStarred:o,isEphemeral:i,isBroadcast:c,isCustomResponse:p,isSliHighlight:h}}},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(13);var v=a(0);var m=a(16);var f=a.n(m);var b=a(1796);var g=a(441);var _=a(41);var y=a(10);var O=a(187);var k=a(3281);var E=a.n(k);var C=new y["b"]("message");var j={msg:v["b"].object.isRequired,className:v["b"].string,children:v["b"].node,resendMessage:v["b"].func.isRequired,removeMessageAndTimestamp:v["b"].func.isRequired};var w={className:void 0,children:void 0};var S=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.resend=a.resend.bind(a);a.cancel=a.cancel.bind(a);return a}s()(t,[{key:"getText",value:function e(){var t=this.props.msg.isEKMError;if(t)return C.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel.");return C.t("Slack couldn\u2019t send this message")}},{key:"resend",value:function e(){var t=this.props.msg;var a=t.ts,r=t.channel;this.props.resendMessage(r,a)}},{key:"cancel",value:function e(){var t=this.props.msg;var a=t.ts,r=t.channel;this.props.removeMessageAndTimestamp({channelId:r,ts:a})}},{key:"renderFooter",value:function e(){var t=this.props.msg,a=t.showResend,r=t.showCancel,n=t.isEKMError;if(!a&&!r)return null;var i=a&&p.a.createElement(O["a"],{className:"c-message_kit__resend__resend",onClick:this.resend},C.t("Try again"));var s=r&&p.a.createElement(O["a"],{className:"c-message_kit__resend__cancel",onClick:this.cancel},n?C.t("Clear"):C.t("Cancel"));var o=i&&s&&p.a.createElement("span",{className:"c-message_kit__resend__separator"},"\xa0|\xa0");return p.a.createElement("div",{className:"c-message_kit__resend__footer"},p.a.createElement("div",{className:"c-message_kit__resend__footer__border"}),p.a.createElement("div",null,this.getText(),"\u2002",i,o,s))}},{key:"render",value:function e(){var t=this.props.msg,a=t.showResend,r=t.showCancel;var n=Object(_["isUnprocessedMsg"])(this.props.msg);if(!a&&!r&&!n)return this.props.children;var i=f()("c-message_kit__resend",this.props.className,{"c-message_kit__resend--with_buttons":a||r,"c-message_kit__resend--unprocessed":n});return p.a.createElement("div",{className:i},this.props.children,this.renderFooter())}}]);return t}(d["PureComponent"]);S.displayName="MessageResend";S.defaultProps=w;var I={resendMessage:function e(){return b["a"].apply(void 0,arguments)},removeMessageAndTimestamp:function e(){return g["a"].apply(void 0,arguments)}};t["a"]=Object(h["connect"])(null,I)(S)},,function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(37);var s=a.n(i);var o=a(6);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var h=a(9);var v=a.n(h);var m=a(1);var f=a.n(m);var b=a(0);var g=a(16);var _=a.n(g);var y=a(13);var O=a(2);var k=a(4);var E=a(231);var C=a(151);var j=a(19);var w=a(24);var S=a(48);var I=a(150);var T=a(100);var A=a(308);var N=a(99);var P=a(168);var R=a(38);var M=a(10);var D=a(12);var x=a(899);var F=a(157);var L=a(289);var B=a(139);var U=a(28);var q=a(66);var G=a(707);var W=a(537);var H=a(921);var V=a(50);var K=a(26);var z=a.n(K);var Y=a(1202);var Q={groupId:b["b"].string.isRequired,isActive:b["b"].bool.isRequired,isAutoGenerated:b["b"].bool.isRequired,isDetailsView:b["b"].bool,featureSonicUserGroups:b["b"].bool,onEnableUserGroup:b["b"].func,onDisableUserGroup:b["b"].func,openModal:b["b"].func,canEditUserGroups:b["b"].func,canCreateAndDeleteUserGroups:b["b"].func,menuProps:b["b"].object,onClick:b["b"].func};var J={isDetailsView:false,featureSonicUserGroups:false,onEnableUserGroup:O["noop"],onDisableUserGroup:O["noop"],canEditUserGroups:O["noop"],canCreateAndDeleteUserGroups:O["noop"],openModal:O["noop"],menuProps:{},onClick:O["noop"]};var Z=new M["b"]("user_groups");var X=function(e){v()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(a,["onEnableUserGroup","onDisableUserGroup","onEditDetails","onEditMembers"]);return a}u()(t,[{key:"onEnableUserGroup",value:function e(){this.props.onClick();return this.props.onEnableUserGroup()}},{key:"onDisableUserGroup",value:function e(){this.props.openModal({element:this.renderConfirmationDialog({action:"disable_group",onSubmit:this.props.onDisableUserGroup})});this.props.onClick()}},{key:"onEditDetails",value:function e(){this.props.openModal({element:this.renderEditDialog(this.props.groupId)})}},{key:"onEditMembers",value:function e(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"getEditMenuItems",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props,a=t.isAutoGenerated,r=t.isDetailsView;if(a&&r)return null;var n=[];r||a||n.push({key:"menu-edit-members",label:Z.t("Edit group members..."),onSelected:this.onEditMembers});n.push({key:"menu-edit-details",label:Z.t("Edit group details..."),onSelected:this.onEditDetails});return n}},{key:"getMenuItems",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;var a=[];if(this.userGroupIsEditable()){var r=this.getEditMenuItems();r&&a.push.apply(a,z()(r))}this.canEnableUserGroup()?a.push({key:"menu-enable",label:Z.t("Enable group"),onSelected:function e(){return t.onEnableUserGroup()}}):this.canDisableUserGroup()&&a.push({key:"menu-disable",label:Z.t("Deactivate group"),danger:true,onSelected:function e(){return t.onDisableUserGroup()}});return a}},{key:"userGroupIsEditable",value:function e(){return this.props.canEditUserGroups()&&this.props.isActive}},{key:"canDisableUserGroup",value:function e(){return this.props.canCreateAndDeleteUserGroups()&&this.props.isActive}},{key:"canEnableUserGroup",value:function e(){return this.props.canCreateAndDeleteUserGroups()&&!this.props.isActive}},{key:"renderConfirmationDialog",value:function e(t){var a=t.action,r=t.onSubmit;var n=this.props.groupId;return f.a.createElement(Te,{groupId:n,action:a,onSubmit:r})}},{key:"renderEditDialog",value:function e(t){return f.a.createElement(Y["a"],{userGroupId:t})}},{key:"renderEditMembersDialog",value:function e(){var t=this.props.groupId;return f.a.createElement(Ke,{groupId:t})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return f.a.createElement(q["f"],n()({},this.props.menuProps,{width:"auto"}),this.getMenuItems().map(function(e){return f.a.createElement(q["b"],e)}))}}]);return t}(m["PureComponent"]);X.displayName="UserGroupContextMenu";X.defaultProps=J;var $=function e(t,a){var r=a.groupId,n=a.isDetailsView;var i=Object(C["g"])(t,r);var s=Object(N["r"])(i);var o=Object(N["m"])(i);var l=Object(k["isFeatureEnabled"])(t,"feature_sonic_user_groups");return{isActive:s,isAutoGenerated:o,isDetailsView:n,canEditUserGroups:function e(){return Object(N["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(N["b"])(t)},featureSonicUserGroups:l}};var ee=function e(t,a){var r=a.groupId;return{openModal:function e(){return t(S["openModal"].apply(void 0,arguments))},onLoad:function e(){return t(Object(E["i"])({groupId:r}))},onDisableUserGroup:function e(){t(Object(E["g"])({groupId:r})).then(function(){return t(Object(T["o"])())})},onEnableUserGroup:function e(){t(Object(E["h"])({groupId:r})).then(function(){return t(Object(T["n"])({groupId:r}))})}}};var te=Object(y["connect"])($,ee)(X);var ae=a(2410);var re=new M["b"]("user_groups");var ne={userGroup:b["b"].object,onEditMembers:b["b"].func.isRequired,onEditDetails:b["b"].func.isRequired,featureSonicUserGroups:b["b"].bool.isRequired};var ie={userGroup:void 0};var se=function(e){v()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderUserGroupOptionsMenu=a.renderUserGroupOptionsMenu.bind(a);return a}u()(t,[{key:"renderUserGroupOptionsMenu",value:function e(t){return f.a.createElement(te,{menuProps:t,groupId:this.props.userGroup.id,isDetailsView:true})}},{key:"renderUserGroupOptions",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=re.t("More actions");return f.a.createElement(q["e"],{renderMenu:this.renderUserGroupOptionsMenu,position:"bottom-right"},f.a.createElement(V["c"],{tip:t,delay:V["a"],position:"top-right"},f.a.createElement(U["d"],{type:"outline",className:"p-user_group_details__button--options","data-qa-user-group-details-group-options-btn":true,"aria-label":t,icon:"ellipsis"})))}},{key:"renderEditMembersButton",value:function e(){if(!this.props.featureSonicUserGroups)return null;return f.a.createElement(U["d"],{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditMembers,"data-qa-user-group-details-edit-members-btn":true},re.t("Edit Members"))}},{key:"renderEditDetailsButton",value:function e(){if(!this.props.featureSonicUserGroups)return null;return f.a.createElement(U["d"],{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditDetails,"data-qa-user-group-details-edit-details-btn":true},re.t("Edit Details"))}},{key:"renderPrimaryAction",value:function e(){if(Object(N["m"])(this.props.userGroup))return this.renderEditDetailsButton();return this.renderEditMembersButton()}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;return f.a.createElement("div",{className:"p-user_group_details__actions"},this.renderPrimaryAction(),this.renderUserGroupOptions())}}]);return t}(m["Component"]);se.displayName="UserGroupsDetailsActionBar";var oe=function e(t,a){var r=a.groupId;return{userGroup:Object(C["g"])(t,r),featureSonicUserGroups:Object(k["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};se.defaultProps=ie;var le=Object(y["connect"])(oe)(se);var ce={members:"members",channels:"channels"};var ue=new M["b"]("user_groups");var de={userGroup:b["b"].shape({created_by:b["b"].string,date_create:b["b"].number,date_delete:b["b"].number,date_update:b["b"].number,deleted_by:b["b"].string,description:b["b"].string,enterprise_subteam_id:b["b"].string,handle:b["b"].string,id:b["b"].string,is_external:b["b"].bool,is_subteam:b["b"].bool,is_usergroup:b["b"].bool,name:b["b"].string,prefs:b["b"].shape({channels:b["b"].array,groups:b["b"].array}),team_id:b["b"].string,updated_by:b["b"].string,user_count:b["b"].number,users:b["b"].array,_name_lc:b["b"].string}),fetchUserGroupMembers:b["b"].func,onChannelSwitch:b["b"].func,removeMember:b["b"].func,removeChannel:b["b"].func,openModal:b["b"].func,openUserGroupList:b["b"].func,enqueueToast:b["b"].func,canEditUserGroups:b["b"].func,canCreateAndDeleteUserGroups:b["b"].func,groupId:b["b"].string.isRequired,userGroupMembers:b["b"].array,newMembers:b["b"].array,userGroupDefaultChannels:b["b"].array,featureSonicUserGroups:b["b"].bool};var pe={userGroup:{},fetchUserGroupMembers:O["noop"],onChannelSwitch:O["noop"],removeMember:O["noop"],removeChannel:O["noop"],openModal:O["noop"],openUserGroupList:O["noop"],enqueueToast:O["noop"],canEditUserGroups:O["noop"],canCreateAndDeleteUserGroups:O["noop"],userGroupMembers:[],newMembers:[],userGroupDefaultChannels:[],featureSonicUserGroups:false};var he=Object(D["b"])();var ve=function(e){v()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(a,["onViewProfile","onRemoveFromGroup","onAddMembers","onAddChannels","renderMemberItem","renderChannelItem","renderChannelsList","renderMembersList","renderListItemOptionsMenu","renderConfirmationDialog","renderContent"]);return a}u()(t,[{key:"componentDidMount",value:function e(){Object(N["r"])(this.props.userGroup)&&this.props.fetchUserGroupMembers("user-group-details/componentDidMount")}},{key:"componentDidUpdate",value:function e(t){var a=t.userGroup,r=a.users,n=s()(a,["users"]);var i=this.props.userGroup,o=i.users,l=s()(i,["users"]);Object(O["isEqual"])(n,l)||this.props.fetchUserGroupMembers("user-group-details/componentDidUpdate")}},{key:"onRemoveMember",value:function e(t){var a=this;if(!this.props.featureSonicUserGroups)return;this.props.openModal({element:this.renderConfirmationDialog({action:"remove_member",onSubmit:function e(){a.props.removeMember(t).then(function(){a.props.enqueueToast({element:f.a.createElement(F["b"],null,ue.t("Member removed from group."))})}).catch(function(e){he.error("Error removing member from user group: "+e);"no_users_provided"===e.data.error&&a.props.enqueueToast({element:f.a.createElement(F["b"],null,ue.t("User groups need to have at least one member."))})})},id:t})})}},{key:"onRemoveChannel",value:function e(t){var a=this;if(!this.props.featureSonicUserGroups)return;this.props.openModal({element:this.renderConfirmationDialog({action:"remove_channel",onSubmit:function e(){a.props.removeChannel(t).then(function(){a.props.enqueueToast({element:f.a.createElement(F["b"],null,ue.t("Channel removed from group."))})}).catch(function(e){he.error("Error removing default channel from user group: "+e)})},id:t})})}},{key:"onAddMembers",value:function e(){this.displayMemberManagementDialog()}},{key:"onAddChannels",value:function e(){this.displayEditDetailsDialog()}},{key:"onRemoveFromGroup",value:function e(t){var a=t.type,r=t.id;a===ce.members?this.onRemoveMember(r):a===ce.channels&&this.onRemoveChannel(r)}},{key:"onViewProfile",value:function e(t,a){var r=a.type,n=a.id;if(r===ce.members)return Object(P["i"])(n,"groups",{userGroupId:this.props.userGroup.id});if(r===ce.channels)return this.props.onChannelSwitch(n);return null}},{key:"getTabs",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props,a=t.userGroup,r=t.userGroupDefaultChannels,n=void 0===r?[]:r;var i=Object(N["l"])(a);return[{title:ue.rt("Members"),titleCount:i,id:"user-groups-members-tab",content:this.renderMembersList()},{title:ue.rt("Channels"),titleCount:n.length,id:"user-groups-channels-tab",content:this.renderChannelsList()}]}},{key:"displayMemberManagementDialog",value:function e(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"displayEditDetailsDialog",value:function e(){this.props.openModal({element:this.renderEditDetailsDialog()})}},{key:"userGroupIsEditable",value:function e(){var t=this.props.userGroup;return this.props.canEditUserGroups()&&Object(N["r"])(t)}},{key:"canRemoveItem",value:function e(t){var a=this.props.userGroup;if(t===ce.members&&Object(N["m"])(a))return false;return true}},{key:"renderHeader",value:function e(){var t=this.props.userGroup;return f.a.createElement("div",{className:"p-user_group_details__section"},f.a.createElement("div",{className:"p-user_group_details__name"},Object(N["h"])(t)),f.a.createElement("div",{className:"p-user_group_details__description"},Object(N["e"])(t)),f.a.createElement("div",{className:"p-user_group_details__handle"},Object(N["f"])(t,{includeAtSign:true})))}},{key:"renderActions",value:function e(){var t=this;if(!this.props.featureSonicUserGroups)return null;if(!this.userGroupIsEditable()||!this.props.canCreateAndDeleteUserGroups())return null;return f.a.createElement("div",{className:"p-user_group_details__section"},f.a.createElement(le,{groupId:this.props.groupId,onEditMembers:function e(){return t.displayMemberManagementDialog()},onEditDetails:function e(){return t.displayEditDetailsDialog()}}))}},{key:"renderTabs",value:function e(){var t="user-groups-members-tab";var a=this.getTabs();var r=_()("p-user_group_details__tab_container",{"p-user_group_details__tab_container--sonic":Object(R["a"])(),"p-user_group_details__tab_container--legacy":!Object(R["a"])()});return f.a.createElement("div",{className:r,"data-qa-user-group-details-tabs":true},f.a.createElement(G["a"],{tabs:a,defaultTabId:t,fullHeight:true,fullWidthMenu:true}))}},{key:"renderListItemOptionsMenu",value:function e(t){var a=this;var r=t.menuProps,i=t.id,s=t.type;if(!this.props.featureSonicUserGroups)return null;var o=s===ce.channels?ue.t("Open channel"):ue.t("View profile");var l=[f.a.createElement(q["b"],{key:i,label:o,onSelected:function e(t){return a.onViewProfile(t,{type:s,id:i})}})];this.canRemoveItem(s)&&l.push(f.a.createElement(q["b"],{key:i,label:ue.t("Remove from group..."),onSelected:function e(){return a.onRemoveFromGroup({type:s,id:i})},danger:true}));return f.a.createElement(q["f"],n()({},r,{width:"auto"}),l)}},{key:"renderMemberItem",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=this.userGroupIsEditable();var n=Object(O["includes"])(this.props.newMembers,a);var i=_()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":r,"p-user_group_base_row--active":n});var s={className:i,isContextButtonVisible:r,tooltip:this.renderTooltip(),onClick:function e(r){return t.onViewProfile(r,{type:ce.members,id:a.id})},renderMenu:function e(r){return t.renderListItemOptionsMenu({menuProps:r,id:a.id,type:ce.members})},customProps:{key:a.id,"data-qa-user-group-details-members-list-item":true,"data-qa-user-group-details-members-list-item-id":a.id}};return f.a.createElement(Fe,s,f.a.createElement("div",{className:"full_width"},f.a.createElement(L["b"],{id:a.id,size:"medium",showTooltip:false,forcedPrimary:"real_name",showPresence:false,showStatus:false,"data-qa-user-group-details-members-list-item-member":true})))}},{key:"renderChannelItem",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=this.userGroupIsEditable();var n=_()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":r});var i=a.purpose?f.a.createElement("div",{className:"p-user_group_details__channel_purpose"},a.purpose.value):null;var s={className:n,isContextButtonVisible:r,tooltip:this.renderTooltip(),onClick:function e(r){return t.onViewProfile(r,{type:ce.channels,id:a.id})},renderMenu:function e(r){return t.renderListItemOptionsMenu({menuProps:r,id:a.id,type:ce.channels})},customProps:{key:a.id,"data-qa-user-group-details-channels-list-item":true,"data-qa-user-group-details-channels-list-item-id":a.id}};return f.a.createElement(Fe,s,f.a.createElement("div",{className:"p-user_group_details__list_item_info"},f.a.createElement(B["a"],{channel:a,className:"bold cursor_pointer"}),i))}},{key:"renderTooltip",value:function e(){if(!this.props.featureSonicUserGroups)return null;return ue.t("More actions")}},{key:"renderMembersList",value:function e(){var t=this;var a=this.props.userGroupMembers;if(!a||Object(O["isEmpty"])(a))return this.renderEmptyMemberState();this.memberListKeys=Object(O["map"])(a,"id");return f.a.createElement(x["a"],null,function(e){var r=e.width,n=e.height,i=e.measureRef;return f.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-members-list":true,ref:i},f.a.createElement(W["a"],{width:r,height:n,keys:t.memberListKeys,rowRenderer:function e(r){return t.renderMemberItem(a[r])}}))})}},{key:"renderChannelsList",value:function e(){var t=this;var a=this.props.userGroupDefaultChannels;if(!a||Object(O["isEmpty"])(a))return this.renderEmptyChannelState();this.channelListKeys=Object(O["map"])(a,"id");return f.a.createElement(x["a"],null,function(e){var r=e.width,n=e.height,i=e.measureRef;return f.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-channels-list":true,ref:i},f.a.createElement(W["a"],{width:r,height:n,keys:t.channelListKeys,rowRenderer:function e(r){return t.renderChannelItem(a[r])}}))})}},{key:"renderEmptyMemberState",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.userGroupIsEditable()?f.a.createElement(U["d"],{type:"outline",size:"small",onClick:this.onAddMembers},ue.t("Add Members")):null;return f.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-details-empty-list":true,"data-qa-user-group-details-empty-list-type":ce.members},f.a.createElement("div",{className:"p-user_group_details__empty_list_header"},ue.t("No members")),t)}},{key:"renderEmptyChannelState",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.userGroupIsEditable()?f.a.createElement(U["d"],{type:"outline",size:"small",onClick:this.onAddChannels},ue.t("Add Default Channels")):null;return f.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-details-empty-list":true,"data-qa-user-group-details-empty-list-type":ce.channels},f.a.createElement("div",{className:"p-user_group_details__empty_list_header"},ue.t("No default channels")),f.a.createElement("div",{className:"p-user_group_details__empty_list_subtext"},ue.t("All members of a user group are automatically added to its default channels.")),t)}},{key:"renderConfirmationDialog",value:function e(t){var a=t.action,r=t.onSubmit,n=t.id;var i=this.props.groupId;return f.a.createElement(Te,{action:a,onSubmit:r,id:n,groupId:i})}},{key:"renderEditMembersDialog",value:function e(){var t=this.props.groupId;return f.a.createElement(Ke,{groupId:t})}},{key:"renderEditDetailsDialog",value:function e(){var t=this.props.groupId;return f.a.createElement(Y["a"],{userGroupId:t})}},{key:"renderContent",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.userGroup;return f.a.createElement("div",{className:"p-user_group_details p-user_group__content","data-qa-user-group-details":true,"data-qa-user-group-details-id":t.id},this.renderHeader(),this.renderActions(),this.renderTabs())}},{key:"render",value:function e(){var t=this.props.featureSonicUserGroups;if(!t)return null;return f.a.createElement(H["a"],{className:"p-user_groups_flexpane_container",onOptionsClick:this.onCreateUserGroup,renderBody:this.renderContent,title:ue.t("User Groups"),viewId:"user-group-details",kbNavOrder:7})}}]);return t}(m["PureComponent"]);ve.displayName="UserGroupDetails";ve.defaultProps=pe;var me=function e(t,a){var r=a.groupId;var n=Object(C["g"])(t,r);var i=Object(k["isFeatureEnabled"])(t,"feature_sonic_user_groups");if(Object(N["q"])(n))return{userGroup:n,featureSonicUserGroups:i};var s=Object(N["g"])(n);var o=Object(O["map"])(s,function(e){return Object(w["d"])(t,e)});var l=Object(N["d"])(t,n);var c=Object(O["map"])(l,function(e){return Object(j["d"])(t,e)});return{userGroup:n,featureSonicUserGroups:i,userGroupMembers:o,userGroupDefaultChannels:c,canEditUserGroups:function e(){return Object(N["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(N["b"])(t)}}};var fe=function e(t,a){var r=a.groupId;return{openModal:function e(){return t(S["openModal"].apply(void 0,arguments))},fetchUserGroupMembers:function e(a){return t(Object(E["i"])({groupId:r,reason:a}))},removeMember:function e(a){return t(Object(E["n"])({groupId:r,memberId:a}))},removeChannel:function e(a){return t(Object(E["m"])({groupId:r,channelId:a}))},onChannelSwitch:function e(a){return t(Object(A["a"])({id:a}))},openUserGroupList:function e(){return t(Object(T["o"])())},enqueueToast:function e(){return t(I["enqueueToast"].apply(void 0,arguments))}}};var be=Object(y["connect"])(me,fe)(ve);var ge=a(156);var _e=a(134);var ye=a(11);var Oe=a(17);var ke=a(84);var Ee=new M["b"]("user_groups");var Ce={disable_group:"disable_group",remove_member:"remove_member",remove_channel:"remove_channel"};var je={action:b["b"].oneOf(Object(O["values"])(Ce)).isRequired,onSubmit:b["b"].func.isRequired,label:b["b"].string,groupName:b["b"].string,featureSonicUserGroups:b["b"].bool};var we={label:"",groupName:"",featureSonicUserGroups:false};var Se=function(e){v()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onGo=a.onGo.bind(a);return a}u()(t,[{key:"onGo",value:function e(){return this.props.onSubmit()}},{key:"getTitle",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props,a=t.action,r=t.groupName;switch(a){case"disable_group":return Ee.t("Deactivate {groupName}?",{groupName:r});case"remove_member":return Ee.t("Remove from group?");case"remove_channel":return Ee.t("Remove default channel?");default:}return""}},{key:"getButtonText",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props.action;switch(t){case"disable_group":return Ee.t("Deactivate");case"remove_member":case"remove_channel":return Ee.t("Remove");default:}return""}},{key:"getDialogBody",value:function e(){if(!this.props.featureSonicUserGroups)return"";var t=this.props,a=t.groupName,r=t.label,n=t.action;switch(n){case"disable_group":return Ee.rt("If you deactivate this user group, you won\u2019t be able to use <strong>{groupName}</strong> or view a list of its members. You can reactivate this group at any time.",{groupName:a});case"remove_member":return Ee.rt("Are you sure you want to remove <strong>{label}</strong> from the <strong>{groupName}</strong> user group?",{label:r,groupName:a});case"remove_channel":return Ee.rt("Are you sure you want to remove <strong>{label}</strong> as a default channel for the <strong>{groupName}</strong> user group?",{label:r,groupName:a});default:}return""}},{key:"render",value:function e(){return f.a.createElement(ke["a"],{showHeader:true,showGoButton:true,title:this.getTitle(),goButtonText:this.getButtonText(),goButtonType:"danger",onGo:this.onGo},f.a.createElement("p",null,this.getDialogBody()))}}]);return t}(m["Component"]);Se.displayName="UserGroupConfirmationDialog";Se.defaultProps=we;var Ie=function e(t,a){var r=a.id,n=a.groupId;var i="";var s=Object(C["g"])(t,n);if(Object(_e["a"])(r)){var o=Object(j["d"])(t,r);i=Object(ye["getDisplayNameForChannel"])(t,o)}else if(Object(ge["a"])(r)){var l=Object(w["d"])(t,r);i=Object(Oe["getMemberRealName"])(l)}return{groupName:Object(N["h"])(s),label:i,featureSonicUserGroups:Object(k["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Te=Object(y["connect"])(Ie)(Se);var Ae=a(1727);var Ne=a(1509);var Pe=a(3304);var Re={renderMenu:b["b"].func.isRequired,className:b["b"].string,children:b["b"].node,isContextButtonVisible:b["b"].bool,tooltip:b["b"].string,onClick:b["b"].func.isRequired,customProps:b["b"].object};var Me=new M["b"]("user_groups");var De={className:"",children:"",isContextButtonVisible:false,customProps:{},tooltip:Me.t("Edit user groups")};var xe=function(e){v()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"renderContextButton",value:function e(){var t=this.props,a=t.isContextButtonVisible,r=t.renderMenu,n=t.tooltip;if(!a)return null;var i={tooltip:n,icon:"ellipsis",tooltipPosition:"top-right",onClick:r,menuProps:{renderMenu:r,width:"auto"}};return f.a.createElement(Ne["b"],{customClasses:"p-user_group_base_row__list_item_option"},f.a.createElement(Ne["a"],i))}},{key:"render",value:function e(){var t=this.props,a=t.className,r=t.onClick,i=t.customProps,s=t.children;var o=_()("p-user_group_base_row__list_item",a);return f.a.createElement("div",{className:"p-user_group_base_row"},f.a.createElement(U["c"],n()({onClick:r,className:o},i),s),this.renderContextButton())}}]);return t}(m["PureComponent"]);xe.displayName="UserGroupBaseRow";xe.defaultProps=De;var Fe=xe;var Le=a(1795);var Be=a(2403);var Ue=new M["b"]("user_groups");var qe={featureSonicUserGroups:b["b"].bool,groupId:b["b"].string.isRequired,bulkUpsertUserGroupMembers:b["b"].func.isRequired,enqueueToast:b["b"].func.isRequired};var Ge={featureSonicUserGroups:false};var We=function(e){v()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={searchResultMode:false};Object(O["bindAll"])(a,["onSave","onUpsertSuccess","onToggleSearchResultsMode","setUserGroupMemberManagementRef"]);a.userGroupMemberManagementRef=null;return a}u()(t,[{key:"onSave",value:function e(){if(!this.userGroupMemberManagementRef)return false;var t=this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount();if(!t)return false;var a=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.bulkUpsertUserGroupMembers(a).then(this.onUpsertSuccess).catch(this.onUpsertFailure)}},{key:"onUpsertSuccess",value:function e(){if(!this.props.featureSonicUserGroups)return;this.props.enqueueToast({element:f.a.createElement(F["b"],null,Ue.t("Group has been updated."))})}},{key:"onUpsertFailure",value:function e(t){Object(D["b"])().error("Error updating user group members: "+JSON.stringify(t))}},{key:"onToggleSearchResultsMode",value:function e(){this.setState(function(e){return{searchResultMode:!e.searchResultMode}})}},{key:"setUserGroupMemberManagementRef",value:function e(t){this.userGroupMemberManagementRef=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=Ue.t("Edit members");return f.a.createElement(ke["a"],{showHeader:true,showGoButton:true,showFooter:true,bodyClassName:"p-user_group_member_management__dialog_body",title:t,contentLabel:t,goButtonText:Ue.t("Save"),onGo:this.onSave,goOnEnterPressed:false},f.a.createElement(Le["a"],{groupId:this.props.groupId,ref:this.setUserGroupMemberManagementRef}))}}]);return t}(m["PureComponent"]);We.displayName="UserGroupMemberManagementDialog";We.defaultProps=Ge;var He=function e(t){return{featureSonicUserGroups:Object(k["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var Ve=function e(t,a){var r=a.groupId;return{bulkUpsertUserGroupMembers:function e(a){return t(Object(E["e"])({groupId:r,users:a}))},enqueueToast:function e(){return t(I["enqueueToast"].apply(void 0,arguments))}}};var Ke=Object(y["connect"])(He,Ve)(We);var ze=a(108);var Ye=a(692);var Qe=a(392);var Je=a(1827);var Ze=a(1818);var Xe=a(2411);var $e={userGroups:b["b"].object,featureSonicUserGroups:b["b"].bool,featureLazyUserGroups:b["b"].bool,fetchAndUpsertUserGroups:b["b"].func,openModal:b["b"].func,searchTerm:b["b"].string,searchQuery:b["b"].string,onSearchInputChange:b["b"].func,onClearSearch:b["b"].func,setSearchQuery:b["b"].func,shouldDisplayCreateUserGroupOption:b["b"].bool};var et={userGroups:{},featureSonicUserGroups:false,featureLazyUserGroups:false,fetchAndUpsertUserGroups:O["noop"],openModal:O["noop"],searchTerm:"",searchQuery:"",onSearchInputChange:O["noop"],onClearSearch:O["noop"],setSearchQuery:O["noop"],shouldDisplayCreateUserGroupOption:false};var tt=new M["b"]("user_groups");var at=function(e){v()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(a,["onCreateUserGroup","onSearchInputChange","renderRow","renderContent","onClearSearch"]);return a}u()(t,[{key:"componentDidMount",value:function e(){this.props.featureLazyUserGroups||this.props.fetchAndUpsertUserGroups()}},{key:"onCreateUserGroup",value:function e(){this.props.openModal({element:this.renderCreateEditDialog()})}},{key:"onSearchInputChange",value:function e(t){if(this.props.featureLazyUserGroups)return this.props.setSearchQuery(t.target.value);return this.props.onSearchInputChange(t)}},{key:"onClearSearch",value:function e(t){if(this.props.featureLazyUserGroups)return this.props.setSearchQuery("");return this.props.onClearSearch(t)}},{key:"getSortedResults",value:function e(t){return Object(O["sortBy"])(t,function(e){var t=Object(N["h"])(e);return t.toLocaleLowerCase()})}},{key:"getSearchResults",value:function e(t,a){var r=this;if(!a)return Object.values(t);return Object(O["filter"])(t,function(e){if(!e)return false;var t=Object(N["h"])(e);var n=Object(N["f"])(e)||"";var i=Object(N["e"])(e)||"";if(r.checkForMatch(t,a))return true;if(r.checkForMatch(n,a))return true;if(r.checkForMatch(i,a,false))return true;return false})}},{key:"getGroupedUserGroups",value:function e(t){var a=Object(O["groupBy"])(t,function(e){return Object(N["r"])(e)?"active":"inactive"});a.active=a.active||[];a.inactive=a.inactive||[];return a.active.concat(a.inactive)}},{key:"checkForMatch",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.prepStringForSearch(t,r).includes(this.prepStringForSearch(a,r))}},{key:"prepStringForSearch",value:function e(t,a){if(!t)return"";var r=t.toLocaleLowerCase();a&&(r=r.replace(/[\s-_]/g,""));return Object(M["a"])(r)}},{key:"renderSearch",value:function e(){var t=void 0;t=this.props.featureLazyUserGroups?this.props.searchQuery:this.props.searchTerm;if(!this.props.featureSonicUserGroups)return null;return f.a.createElement("div",{className:"p-user_group_list__search"},f.a.createElement(Qe["a"],{value:t,onChange:this.onSearchInputChange,placeholder:tt.t("Find by name..."),icon:"search"}))}},{key:"renderRow",value:function e(t){var a=this.keys[t];return f.a.createElement(Ze["a"],{id:a})}},{key:"renderEmptyListView",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=void 0;var a=void 0;if(this.props.shouldDisplayCreateUserGroupOption){t=tt.t("Organize your team");a=f.a.createElement(U["d"],{type:"outline",size:"small",onClick:this.onCreateUserGroup},tt.t("Create a User Group"))}else t=tt.t("No user groups yet");return f.a.createElement("div",{className:"p-user_group_list__empty_list"},f.a.createElement("div",{className:"p-user_group_list__empty_list_header"},t),f.a.createElement("div",{className:"p-user_group_list__empty_list_subtext"},tt.t("User groups make it easy to get the attention of many members at once.")),a)}},{key:"renderEmptySearchResults",value:function e(){if(!this.props.featureSonicUserGroups)return null;return f.a.createElement("div",{className:"p-user_group_list__empty_search_results"},f.a.createElement("div",{className:"p-user_group_list__empty_search_results_subtext"},tt.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:this.props.searchTerm})),f.a.createElement(U["d"],{type:"outline",size:"small",onClick:this.props.onClearSearch},tt.t("Clear Search")))}},{key:"renderSearchableList",value:function e(){return f.a.createElement(Je["a"],{onCreateUserGroup:this.onCreateUserGroup,includeDeactivated:true,onClearSearch:this.onClearSearch})}},{key:"renderGroupList",value:function e(){var t=this;var a=this.getSearchResults(this.props.userGroups,this.props.searchTerm);if(Object(O["isEmpty"])(a))return this.renderEmptySearchResults();var r=this.getSortedResults(a);var n=this.getGroupedUserGroups(r);this.keys=Object(O["map"])(n,"id");return f.a.createElement(x["a"],null,function(e){var a=e.width,r=e.height,n=e.measureRef;return f.a.createElement("div",{className:"p-user_group_list__groups",ref:n},f.a.createElement(W["a"],{width:a,height:r,keys:t.keys,rowRenderer:t.renderRow}))})}},{key:"renderContent",value:function e(){if(this.props.featureLazyUserGroups)return f.a.createElement("div",{className:"p-user_group__content"},this.renderSearch(),this.renderSearchableList());var t=this.props,a=t.featureSonicUserGroups,r=t.userGroups;if(!a)return null;var n=Object(O["isEmpty"])(r)?this.renderEmptyListView():f.a.createElement("div",{className:"p-user_group__content"},this.renderSearch(),this.renderGroupList());return f.a.createElement("div",{className:"p-user_group__content"},f.a.createElement("div",{className:"p-user_group_list"},n))}},{key:"renderCreateEditDialog",value:function e(){return f.a.createElement(Y["a"],null)}},{key:"render",value:function e(){var t=this.props,a=t.featureSonicUserGroups,r=t.shouldDisplayCreateUserGroupOption;if(!a)return null;var i={renderBody:this.renderContent,title:tt.t("User Groups"),viewId:"user-group-list"};if(r){i.onOptionsClick=this.onCreateUserGroup;i.headerProps={optionsIconType:"compose-dm",optionsTooltipText:tt.t("Create a user group")}}return f.a.createElement(H["a"],n()({className:"p-user_groups_flexpane_container"},i,{kbNavOrder:7}))}}]);return t}(m["PureComponent"]);at.displayName="UserGroupList";at.defaultProps=et;var rt=function e(t,a){var r=Object(C["b"])(t);var i=Object(k["isFeatureEnabled"])(t,"feature_sonic_user_groups");var s=Object(k["isFeatureEnabled"])(t,"feature_lazy_user_groups");var o=Object(N["b"])(t);return n()({userGroups:r,searchQuery:Object(Ye["getSearchQuery"])(t),featureSonicUserGroups:i,featureLazyUserGroups:s,shouldDisplayCreateUserGroupOption:o},a)};var nt={fetchAndUpsertUserGroups:E["j"],openModal:S["openModal"],setSearchQuery:Ye["setSearchQuery"]};var it=Object(y["connect"])(rt,nt)(at);var st=a(3309);var ot={groupId:b["b"].string,featureSonicUserGroups:b["b"].bool,userGroupMembers:b["b"].array};var lt={groupId:null,featureSonicUserGroups:false,userGroupMembers:[]};var ct=function(e){v()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={newMembers:[],timeoutId:null,searchTerm:""};Object(O["bindAll"])(a,["onSearchInputChange","onClearSearch"]);return a}u()(t,[{key:"componentDidUpdate",value:function e(t){var a=this;var r=[];t.userGroupMembers.length&&!Object(O["isEqual"])(t.userGroupMembers,this.props.userGroupMembers)&&(r=Object(O["differenceBy"])(this.props.userGroupMembers,t.userGroupMembers,"id"));if(r.length){this.setState(function(){return{newMembers:r}});var n=this.state.timeoutId;n&&clearTimeout(n);var i=setTimeout(function(){a.setState(function(){return{newMembers:[]}})},1050);this.setState(function(){return{timeoutId:i}})}}},{key:"onSearchInputChange",value:function e(t){var a=t.target.value;this.setState(function(){return{searchTerm:a}})}},{key:"onClearSearch",value:function e(){this.setState(function(){return{searchTerm:""}})}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=this.props.groupId;var a=this.state,r=a.newMembers,n=a.searchTerm;if(t)return f.a.createElement(be,{groupId:t,newMembers:r});return f.a.createElement(it,{searchTerm:n,onSearchInputChange:this.onSearchInputChange,onClearSearch:this.onClearSearch})}}]);return t}(m["PureComponent"]);ct.displayName="UserGroupsFlexpane";ct.defaultProps=lt;var ut=function e(t){var a=Object(ze["c"])(t)[0];var r=Object(C["g"])(t,a);var n=Object(N["g"])(r);var i=Object(O["map"])(n,function(e){return Object(w["d"])(t,e)});return{groupId:a,userGroupMembers:i,featureSonicUserGroups:Object(k["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var dt=Object(y["connect"])(ut)(ct);a.d(t,"d",function(){return Y["a"]});a.d(t,"b",function(){return Te});a.d(t,"c",function(){return te});a.d(t,"a",function(){return Fe});a.d(t,"e",function(){return Ke});var pt=t["f"]=dt},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(88);var l=a.n(o);var c=a(119);var u=a(2);var d=a(13);var p=a(27);var h=a(6);var v=a.n(h);var m=a(7);var f=a.n(m);var b=a(8);var g=a.n(b);var _=a(9);var y=a.n(_);var O=a(0);var k=a(16);var E=a.n(k);var C=a(232);var j=a(34);var w=a(10);var S=a(12);var I=a(45);var T=a(21);var A=a(84);var N={title:O["b"].string,children:O["b"].node.isRequired,step:O["b"].number.isRequired,currentStep:O["b"].number.isRequired,setModalTitle:O["b"].func.isRequired};var P={title:""};var R=function(e){y()(t,e);function t(){v()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"componentWillReceiveProps",value:function e(){var t=this.props,a=t.title,r=t.currentStep,n=t.step;var i=r===n;i&&this.props.setModalTitle(a)}},{key:"render",value:function e(){var t=this.props,a=t.currentStep,r=t.step;var n=a===r;var i=E()({"p-onboarding__step":true,"p-onboarding__step--active":n,"p-onboarding__step--inactive":!n});var o=s.a.createElement("div",{className:i},n&&this.props.children);return n?o:null}}]);return t}(i["Component"]);R.displayName="Step";R.defaultProps=P;var M={setModalTitle:C["setModalTitle"]};var D=Object(d["connect"])(null,M)(R);var x=a(5);var F=a.n(x);var L=a(585);var B=a(20);var U=Object(B["b"])("TS.utility.password.getErrorMessage",function(){return""});var q=a(508);var G=a(179);var W=a(364);var H=a(211);var V=a(126);var K=a(1052);var z=a(54);var Y={src:O["b"].string.isRequired};var Q=function e(t){var a=t.src;return s.a.createElement(i["Fragment"],null,s.a.createElement("div",{className:"p-onboarding__step__header"},s.a.createElement("img",{src:a,srcSet:a+" 1x, "+a.replace(".png","@2x.png")+" 2x",alt:""})))};Q.displayName="StepHeader";var J=Q;var Z={imgUrl:O["b"].string.isRequired,realName:O["b"].string,gdprPref:O["b"].bool,onPasswordSet:O["b"].func,gdpr:O["b"].bool.isRequired,inEU:O["b"].bool.isRequired,needsPasswordSet:O["b"].bool,updateRealName:O["b"].func,updateGdprPref:O["b"].func,updateStep:O["b"].func,setStepCallback:O["b"].func,submitCheckPasswordComplexity:O["b"].func};var X={realName:"",gdprPref:false,onPasswordSet:u["noop"],needsPasswordSet:true,updateRealName:u["noop"],updateGdprPref:u["noop"],updateStep:u["noop"],setStepCallback:u["noop"],submitCheckPasswordComplexity:u["noop"]};var $=new w["b"]("team_creation");var ee=Object(S["b"])();var te="TEAM_CREATOR_ONBOARDING";var ae=function(e){y()(t,e);function t(e){v()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=a.props.realName;Object(u["bindAll"])(a,["onRealNameChange","onPasswordChange","onGdprPrefChange","onGo","setRealNameInputRef","updateRealName","validateAndSaveStep"]);a.nameInput=null;a.updateRealNameDebounced=Object(u["debounce"])(a.updateRealNameApi,500);a.checkPasswordComplexityDebounced=Object(u["debounce"])(a.checkPasswordComplexityApi,500);a.state={realName:r,realNameError:null,password:"",passwordError:null,gdpr:null};return a}f()(t,[{key:"componentDidMount",value:function e(){this.nameInput.focus();this.props.setStepCallback(this.onGo);this.validateAndSaveStep()}},{key:"onRealNameChange",value:function e(){this.updateRealNameDebounced(this.state.realName)}},{key:"onPasswordChange",value:function e(t){var a=this;this.setState(function(){return{password:t}},function(){a.checkPasswordComplexityDebounced(t)})}},{key:"onGdprPrefChange",value:function e(t){var a=this;var r=t.target.classList.contains("gdpr_pref_radio");var n=!!r||t.target.checked;var i=t.target.value;this.setState(function(){return{gdpr:n,gdprRadioValue:i}},function(){a.props.updateGdprPref({gdprPref:n})})}},{key:"onGo",value:function e(){var t=this;var a=this.props.needsPasswordSet;this.validateAndSaveStep().then(function(e){if(!e.isValid)return;a&&t.props.onPasswordSet(t.state.password);t.props.updateStep({number:q["d"].workspace})}).catch(function(e){ee.info(te,e)})}},{key:"setRealNameInputRef",value:function e(t){this.nameInput=t}},{key:"updateRealName",value:function e(t){this.setState(function(){return{realName:t}})}},{key:"updateRealNameApi",value:function e(t){var a=this;this.props.updateRealName({realName:t}).then(function(){a.setState(function(){return{realNameError:null}})}).catch(function(e){a.setState(function(){return{realNameError:e}})}).finally(function(){a.validateAndSaveStep()})}},{key:"checkPasswordComplexityApi",value:function e(t){var a=this;this.props.submitCheckPasswordComplexity({password:t}).then(function(){a.setState(function(){return{passwordError:null}})}).catch(function(e){var t=e.data;a.setState(function(){return{passwordError:t.error}})}).finally(function(){a.validateAndSaveStep()})}},{key:"validateAndSaveStep",value:function e(){var t=this.state,a=t.realName,r=t.realNameError,n=t.password,i=t.passwordError;var s=this.props.needsPasswordSet;var o=!s||n;return this.props.updateStep({validated:!!(a&&o&&!r&&!i),forceValidation:true})}},{key:"renderRealNameField",value:function e(){var t=this.state,a=t.realName,r=t.realNameError;var i=r?r.message:null;var o=r?r.name:null;var l=E()("realName_input",F()({"c-input_text--with_error":i,"p-onboarding__step__real_name_input--success":!i},o,i));var c=i?{errorText:i,errorLevel:"error",errorType:"nested_box"}:null;var u={name:"real_name",hintText:$.t("Your name will be displayed with messages you send."),id:"real_name",className:l,"data-qa":"tractor-real-name-input",value:a,onChange:this.updateRealName,onBlur:this.onRealNameChange,ref:this.setRealNameInputRef};var d={text:$.t("Your full name"),className:"margin_bottom_150",htmlFor:"real_name",id:"real_name_label"};return s.a.createElement(z["a"],d,s.a.createElement(G["a"],n()({},u,c)))}},{key:"renderPasswordField",value:function e(){var t=this.state,a=t.password,r=t.passwordError;var i=E()("password_input",F()({"c-input_text--with_error":!!r,"p-onboarding__step__password_input--success":!r},r,!!r));var o={text:$.t("Your password"),className:"margin_bottom_150",htmlFor:"password_field",id:"passwordLabel"};var l={name:"password_field",hintText:$.t("Passwords must be at least 6 characters long, and can\u2019t be things like password, 123456, or abcdef."),id:"password_field","data-qa":"tractor-password-input",className:i,onChange:this.onPasswordChange,value:a,type:"password"};var c="";r&&(c=U(r));var u=r?{errorText:c,errorLevel:"error",errorType:"nested_box"}:null;return s.a.createElement(z["a"],o,s.a.createElement(G["a"],n()({},l,u)))}},{key:"renderGdprPref",value:function e(){var t=this.props.inEU;var a=this.props.gdpr;var r=this.state.gdpr;var n=s.a.createElement(z["a"],{type:"inline",cursor:"pointer",htmlFor:"gdpr_field",text:$.t("It\u2019s okay to send me email with Slack tips, news, and offers."),className:"margin_bottom_150 normal tractor_checkbox_label",id:"gdpr_checkbox_label"},s.a.createElement(V["a"],{id:"gdpr_field",checked:null===r?a:r,"data-qa":"tractor-gdpr-checkbox",onChange:this.onGdprPrefChange}));var i=s.a.createElement(W["a"],{className:"margin_bottom_150 normal tractor_checkbox_label","data-qa":"tractor-gdpr-radiogroup"},s.a.createElement(K["a"],null,$.rt("<strong>Can we send you email with Slack tips, news, and offers?</strong>")),s.a.createElement(z["a"],{htmlFor:"gdpr_field_yes",text:$.t("Sure!"),cursor:"pointer",type:"inline"},s.a.createElement(H["a"],{id:"gdpr_field_yes",className:"gdpr_pref_radio",value:"opt_in","data-qa":"tractor-gdpr-radio-yes",checked:"opt_in"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})),s.a.createElement(z["a"],{htmlFor:"gdpr_field_no",text:$.t("No thanks"),cursor:"pointer",type:"inline"},s.a.createElement(H["a"],{id:"gdpr_field_no",className:"gdpr_pref_radio",value:"opt_out","data-qa":"tractor-gdpr-radio-no",checked:"opt_out"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})));return t?i:n}},{key:"render",value:function e(){return s.a.createElement(i["Fragment"],null,s.a.createElement(J,{src:this.props.imgUrl}),s.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-profile-step"},this.renderRealNameField(),this.props.needsPasswordSet&&this.renderPasswordField(),this.renderGdprPref()))}}]);return t}(i["Component"]);ae.displayName="ProfileStep";ae.defaultProps=X;var re=function e(t){return{realName:Object(C["getRealName"])(t),gdpr:Object(C["getGdprPref"])(t),inEU:Object(C["getInEurope"])(t),needsPasswordSet:Object(j["f"])(t,"needs_initial_password_set")}};var ne={updateRealName:C["updateRealName"],updateGdprPref:C["updateGdprPref"],updateStep:C["updateStep"],setStepCallback:C["setStepCallback"],submitCheckPasswordComplexity:L["e"]};var ie=Object(d["connect"])(re,ne)(ae);var se=a(4);var oe=a(187);var le=a(687);var ce={imgUrl:O["b"].string.isRequired,invites:O["b"].array,domainWhitelistingPref:O["b"].bool,workspaceName:O["b"].string,channelName:O["b"].string.isRequired,signupDomain:O["b"].string,onDialogFinish:O["b"].func,validateInvites:O["b"].func,sendInvites:O["b"].func,setDomainWhitelistingPref:O["b"].func,updateStep:O["b"].func,setStepCallback:O["b"].func,canWhitelistDomain:O["b"].bool,featureTractorSharedInviteLink:O["b"].bool,featureTractorBackupChannelnameCopy:O["b"].bool,sharedInviteLink:O["b"].string,fetchAndSetSharedInviteLink:O["b"].func};var ue={invites:[],workspaceName:"",domainWhitelistingPref:false,signupDomain:"",onDialogFinish:u["noop"],validateInvites:u["noop"],sendInvites:u["noop"],setDomainWhitelistingPref:u["noop"],updateStep:u["noop"],setStepCallback:u["noop"],canWhitelistDomain:false,featureTractorSharedInviteLink:true,featureTractorBackupChannelnameCopy:false,sharedInviteLink:"",fetchAndSetSharedInviteLink:u["noop"]};var de=new w["b"]("team_creation");var pe=Object(S["b"])();var he="TEAM_CREATOR_ONBOARDING";var ve=function(e){y()(t,e);function t(e){v()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=a.props.invites;var n=r instanceof Array?r.join(", "):r;Object(u["bindAll"])(a,["onInvitesChange","onDomainWhitelistingCheckboxChange","onGo","setInvitesInputRef","renderSharedInviteLink","toggleSharedInviteLinkView"]);a.invitesInput=null;a.validateInvitesDebounced=Object(u["debounce"])(a.validateInvites,250);a.state={invites:n,invitesError:null,domainWhitelistingPref:false,toggleSharedInviteLink:false};return a}f()(t,[{key:"componentDidMount",value:function e(){this.invitesInput.focus();var t=this.props,a=t.sharedInviteLink,r=t.featureTractorSharedInviteLink;this.props.setStepCallback(this.onGo);r&&!a&&this.props.fetchAndSetSharedInviteLink();this.props.updateStep({validated:true})}},{key:"onInvitesChange",value:function e(t){var a=this;this.setState(function(){return{invites:t}},function(){a.validateInvitesDebounced(t)})}},{key:"onDomainWhitelistingCheckboxChange",value:function e(t){var a=this;var r=t.target.checked;this.setState(function(){return{domainWhitelistingPref:r}},function(){a.props.setDomainWhitelistingPref(r)})}},{key:"onGo",value:function e(){var t=this;this.props.sendInvites().then(function(){t.props.onDialogFinish().then(function(){t.props.updateStep({number:q["d"].completion})})}).catch(function(e){pe.info(he,e);t.setState(function(){return{invitesError:e}})})}},{key:"setInvitesInputRef",value:function e(t){this.invitesInput=t}},{key:"validateInvites",value:function e(t){var a=this;this.props.validateInvites({invites:t}).then(function(){a.setState(function(){return{invitesError:null}})}).catch(function(e){a.setState(function(){return{invitesError:e}})})}},{key:"toggleSharedInviteLinkView",value:function e(){var t=this.state.toggleSharedInviteLink;this.setState(function(){return{toggleSharedInviteLink:!t}})}},{key:"renderInvitesInput",value:function e(){var t=this.state,a=t.invites,r=t.invitesError;var i=this.props,o=i.workspaceName,l=i.channelName,c=i.featureTractorBackupChannelnameCopy;var u=r?r.message:null;var d=r?r.name:null;var p=E()("invites_input",F()({"c-input_textarea--with_error":u,"p-onboarding__step__invites_input--success":!u},d,u));var h=void 0;h=c?l&&void 0!==l&&""!==l?de.rt("We\u2019ll send invitations to join <strong>{workspaceName}</strong> on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:l,workspaceName:o}):de.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{workspaceName:o}):de.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:l,workspaceName:o});var v={name:"invites_field",id:"invites_field",className:p,onChange:this.onInvitesChange,value:a,"data-qa":"tractor-invites-input",hintText:r?null:h,ref:this.setInvitesInputRef};var m={className:"margin_bottom_150",text:de.t("Email addresses"),htmlFor:"invites_field",id:"invites_label"};var f=u?{errorText:u,errorLevel:"error",errorType:"nested_box"}:null;return s.a.createElement(z["a"],m,s.a.createElement(le["a"],n()({},v,f)))}},{key:"renderDomainWhitelistingCheckbox",value:function e(){var t=this.props.signupDomain;var a=this.state.domainWhitelistingPref;var r=this.props.domainWhitelistingPref;return s.a.createElement(z["a"],{className:"margin_bottom_150 normal tractor_checkbox_label",text:de.rt("Let other people sign up with their verified <strong>@{signupDomain}</strong> email address.",{signupDomain:t}),id:"domain_whitelisting_checkbox_label",htmlFor:"domain_whitelisting_field",type:"inline",cursor:"pointer"},s.a.createElement(V["a"],{id:"domain_whitelisting_field","data-qa":"tractor-domain-whitelisting-checkbox",checked:null===a?r:a,onChange:this.onDomainWhitelistingCheckboxChange}))}},{key:"renderSharedInviteLink",value:function e(){if(!this.props.featureTractorSharedInviteLink)return null;var t=this.props.sharedInviteLink;var a=this.state.toggleSharedInviteLink;var r=de.t("invite link");var n=de.rt("<b>Or, you could get an <u>{link}</u> to share with other people.</b>",{link:s.a.createElement(oe["a"],{"data-qa":"tractor_shared_invite_link_toggle",onClick:this.toggleSharedInviteLinkView},r)});var i={text:n,htmlFor:"shared_invite_link",id:"shared_invite_link_label","data-qa":"tractor_shared_invite_link_label"};var o={name:"shared_invite_link",id:"shared_invite_link","data-qa":"tractor-invites-shared-invite-input",hintText:de.t("Anyone can use this link to join your workspace. It will expire in 4 weeks and can be used for up to 2000 members."),value:t,onFocus:this.select};return s.a.createElement("div",{className:"margin_bottom_100"},!a&&s.a.createElement("span",null,n),a&&s.a.createElement(z["a"],i,s.a.createElement(G["a"],o)))}},{key:"render",value:function e(){return s.a.createElement(i["Fragment"],null,s.a.createElement(J,{src:this.props.imgUrl}),s.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-invites-step"},this.renderInvitesInput(),this.renderSharedInviteLink(),this.props.canWhitelistDomain&&this.renderDomainWhitelistingCheckbox()))}}]);return t}(i["Component"]);ve.displayName="InvitesStep";ve.defaultProps=ue;var me=function e(t){return{invites:Object(C["getInvites"])(t),workspaceName:Object(C["getWorkspaceName"])(t),domainWhitelistingPref:Object(C["getDomainWhitelistingPref"])(t),channelName:Object(C["getChannelName"])(t),signupDomain:Object(C["getSignupDomain"])(t),canWhitelistDomain:Object(C["getCanWhitelistOwnerEmailDomain"])(t),featureTractorSharedInviteLink:Object(se["isFeatureEnabled"])(t,"feature_tractor_shared_invite_link"),featureTractorBackupChannelnameCopy:Object(se["isFeatureEnabled"])(t,"feature_tractor_backup_channelname_copy"),sharedInviteLink:Object(C["getSharedInviteLink"])(t)}};var fe={validateInvites:C["validateInvites"],sendInvites:C["sendInvites"],setDomainWhitelistingPref:C["setDomainWhitelistingPref"],fetchAndSetSharedInviteLink:C["fetchAndSetSharedInviteLink"],updateStep:C["updateStep"],setStepCallback:C["setStepCallback"]};var be=Object(d["connect"])(me,fe)(ve);var ge={imgUrl:O["b"].string.isRequired,workspaceName:O["b"].string,workspaceDomain:O["b"].string,hasInvited:O["b"].bool,onDialogFinish:O["b"].func,updateWorkspaceName:O["b"].func,updateWorkspaceDomain:O["b"].func,updateStep:O["b"].func,setStepCallback:O["b"].func,fetchAndSetSharedInviteLink:O["b"].func,featureTractorSharedInviteLink:O["b"].bool};var _e={workspaceName:"",workspaceDomain:"",hasInvited:false,onDialogFinish:u["noop"],updateWorkspaceName:u["noop"],updateWorkspaceDomain:u["noop"],updateStep:u["noop"],setStepCallback:u["noop"],fetchAndSetSharedInviteLink:u["noop"],featureTractorSharedInviteLink:false};var ye=new w["b"]("team_creation");var Oe=Object(S["b"])();var ke="TEAM_CREATOR_ONBOARDING";var Ee=function(e){y()(t,e);function t(e){v()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=a.props,n=r.workspaceName,i=r.workspaceDomain;Object(u["bindAll"])(a,["onWorkspaceNameChange","onWorkspaceNameBlur","onWorkspaceDomainChange","onGo","setWorkspaceNameInputRef","validateAndSaveStep"]);a.nameInput=null;a.updateWorkspaceNameDebounced=Object(u["debounce"])(a.updateWorkspaceNameApi,500);a.updateWorkspaceDomainDebounced=Object(u["debounce"])(a.updateWorkspaceDomainApi,500);a.state={workspaceName:n,workspaceNameError:null,workspaceDomain:i,workspaceDomainError:null};return a}f()(t,[{key:"componentDidMount",value:function e(){this.nameInput.focus();this.props.setStepCallback(this.onGo);this.props.updateStep({validated:true})}},{key:"onWorkspaceNameChange",value:function e(t){var a=this;this.setState(function(){return{workspaceName:t}},function(){a.updateWorkspaceNameDebounced(t)})}},{key:"onWorkspaceNameBlur",value:function e(){var t=this.props.workspaceName;var a=this.state.workspaceName;a||this.onWorkspaceNameChange(t)}},{key:"onWorkspaceDomainChange",value:function e(t){var a=this;this.setState(function(){return{workspaceDomain:t}},function(){a.updateWorkspaceDomainDebounced(t)})}},{key:"onGo",value:function e(){var t=this;this.validateAndSaveStep().then(function(e){if(!e.isValid)return;t.props.hasInvited?t.props.onDialogFinish().then(function(){t.props.updateStep({number:q["d"].completion})}):t.props.updateStep({number:q["d"].invites})}).catch(function(e){Oe.info(ke,e)})}},{key:"setWorkspaceNameInputRef",value:function e(t){this.nameInput=t}},{key:"updateWorkspaceNameApi",value:function e(t){var a=this;this.props.updateWorkspaceName({workspaceName:t}).then(function(){a.setState(function(){return{workspaceNameError:null}})}).catch(function(e){a.setState(function(){return{workspaceNameError:e}})}).finally(function(){a.validateAndSaveStep()})}},{key:"updateWorkspaceDomainApi",value:function e(t){var a=this;var r=this.props.featureTractorSharedInviteLink;this.props.updateWorkspaceDomain({workspaceDomain:t}).then(function(){a.setState(function(){return{workspaceDomainError:null}});r&&a.props.fetchAndSetSharedInviteLink()}).catch(function(e){a.setState(function(){return{workspaceDomainError:e}})}).finally(function(){a.validateAndSaveStep()})}},{key:"validateAndSaveStep",value:function e(){var t=this.state,a=t.workspaceDomain,r=t.workspaceNameError,n=t.workspaceDomainError;return this.props.updateStep({validated:!!(a&&!r&&!n),forceValidation:true})}},{key:"renderWorkspaceName",value:function e(){var t=this.state,a=t.workspaceName,r=t.workspaceNameError;var i=r?r.message:null;var o=r?r.name:null;var l=E()("workspaceName_input",F()({"c-input_text--with_error":i,"p-onboarding__step__workspace_name_input--success":!i},o,i));var c={className:"margin_bottom_150",text:ye.t("Slack workspace name"),htmlFor:"workspace_name_field",id:"workspace_name_label"};var u={name:"workspace_name_field",id:"workspace_name_field",className:l,onChange:this.onWorkspaceNameChange,onBlur:this.onWorkspaceNameBlur,value:a,"data-qa":"tractor-workspace-name-input",hintText:ye.t("Most teams use the name of their company or organization."),ref:this.setWorkspaceNameInputRef};var d=i?{errorText:i,errorLevel:"error",errorType:"nested_box"}:null;return s.a.createElement(z["a"],c,s.a.createElement(G["a"],n()({},u,d)))}},{key:"renderWorkspaceDomain",value:function e(){var t=this.state,a=t.workspaceDomain,r=t.workspaceDomainError;var i=r?r.message:null;var o=r?r.name:null;var l=E()("workspaceDomain_input",F()({"c-input_text--with_error":i,"p-onboarding__step__workspace_domain_input--success":!i},o,i));var c={text:ye.t("Slack URL"),className:"margin_bottom_150",htmlFor:"workspace_domain_field",id:"workspace_domain_label"};var u={name:"workspace_domain_field",id:"workspace_domain_field",className:l,hintText:ye.t("You\u2019ll use this URL to sign in to Slack. Letters, numbers, and hyphens only."),"data-qa":"tractor-workspace-domain-input",onChange:this.onWorkspaceDomainChange,value:a,suffix:".slack.com"};var d=i?{errorText:i,errorLevel:"error",errorType:"nested_box"}:null;return s.a.createElement(z["a"],c,s.a.createElement(G["a"],n()({},u,d)))}},{key:"render",value:function e(){return s.a.createElement(i["Fragment"],null,s.a.createElement(J,{src:this.props.imgUrl}),s.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-workspace-step"},this.renderWorkspaceName(),this.renderWorkspaceDomain()))}}]);return t}(i["Component"]);Ee.displayName="WorkspaceStep";Ee.defaultProps=_e;var Ce=function e(t){return{workspaceName:Object(C["getWorkspaceName"])(t),workspaceDomain:Object(C["getWorkspaceDomain"])(t),hasInvited:Object(j["f"])(t,"has_invited"),featureTractorSharedInviteLink:Object(se["isFeatureEnabled"])(t,"feature_tractor_shared_invite_link")}};var je={updateWorkspaceName:C["updateWorkspaceName"],updateWorkspaceDomain:C["updateWorkspaceDomain"],fetchAndSetSharedInviteLink:C["fetchAndSetSharedInviteLink"],updateStep:C["updateStep"],setStepCallback:C["setStepCallback"]};var we=Object(d["connect"])(Ce,je)(Ee);var Se={imgUrl:O["b"].string.isRequired,invites:O["b"].array,channelName:O["b"].string.isRequired,updateStep:O["b"].func};var Ie={invites:[],updateStep:u["noop"]};var Te=new w["b"]("team_creation");var Ae=function(e){y()(t,e);function t(){v()(this,t);return g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"componentDidMount",value:function e(){this.props.updateStep({validated:true})}},{key:"render",value:function e(){var t=this.props,a=t.imgUrl,r=t.invites,n=t.channelName;var o=n&&void 0!==n&&""!==n?r.length:0;var l=void 0;var c=void 0;switch(o){case 0:l=Te.t("Your Slack workspace is all set");c=Te.rt("We\u2019ve added a few basic channels for your team \u2014 go ahead and poke around! Or <strong>try sending yourself a direct message</strong> to test things out.");break;case 1:l=Te.t("Your invitation has been sent!");c=Te.rt("Your teammate will be here as soon as they accept the invitation. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:n});break;default:l=Te.t("Your {numInvites} invitations have been sent!",{numInvites:o});c=Te.rt("Your teammates will be here as soon as they accept their invitations. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:n});break}return s.a.createElement(i["Fragment"],null,s.a.createElement(J,{src:a}),s.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-completion-step"},s.a.createElement("h2",null,l),c))}}]);return t}(i["Component"]);Ae.displayName="CompletionStep";Ae.defaultProps=Ie;var Ne=function e(t){return{invites:Object(C["getInvites"])(t),channelName:Object(C["getChannelName"])(t)}};var Pe={updateStep:C["updateStep"]};var Re=Object(d["connect"])(Ne,Pe)(Ae);var Me=a(3209);var De={invites:O["b"].array,modalTitle:O["b"].string,onClose:O["b"].func,stepCallback:O["b"].func,stepNumber:O["b"].number,isCurrentStepValid:O["b"].bool,isPromiseRunning:O["b"].bool,hasInvited:O["b"].bool,needsPasswordSet:O["b"].bool,clogger:O["b"].object.isRequired,fetchAndSetChannelInfo:O["b"].func,fetchAndSetWorkspace:O["b"].func,fetchAndSetSignupDetails:O["b"].func,setInitialMarketingPref:O["b"].func,setStepNumber:O["b"].func,updatePassword:O["b"].func,submitDomainWhitelistingPref:O["b"].func,completeWorkflowTask:O["b"].func};var xe={invites:[],modalTitle:"",onClose:u["noop"],stepCallback:u["noop"],stepNumber:0,isCurrentStepValid:false,isPromiseRunning:false,hasInvited:false,needsPasswordSet:true,fetchAndSetChannelInfo:u["noop"],fetchAndSetWorkspace:u["noop"],fetchAndSetSignupDetails:u["noop"],setInitialMarketingPref:u["noop"],setStepNumber:u["noop"],updatePassword:u["noop"],submitDomainWhitelistingPref:u["noop"],completeWorkflowTask:u["noop"]};var Fe=new w["b"]("team_creation");var Le=Object(S["b"])();var Be="TEAM_CREATOR_ONBOARDING";var Ue=function(e){y()(t,e);function t(e){v()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(u["bindAll"])(a,["getGoButtonText","getFooterText","onBack","onGo","onPasswordSet","onDialogFinish","onClose"]);a.state={password:null};return a}f()(t,[{key:"componentDidMount",value:function e(){this.props.fetchAndSetChannelInfo();this.props.fetchAndSetWorkspace();this.props.fetchAndSetSignupDetails();this.props.setInitialMarketingPref();this.preloadRemainingImages();Le.info(Be,"Onboarding dialog mounted.");var t=this.props.needsPasswordSet;t&&this.props.setStepNumber(0)}},{key:"onBack",value:function e(){var t=this.props,a=t.stepNumber,r=t.clogger;var n=void 0;n=a>0?a-1:q["c"]-1;r.track(T["k"].GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:q["e"][a],action:"BACK"}}});this.props.setStepNumber(n)}},{key:"onGo",value:function e(){var t=this.props,a=t.stepCallback,r=t.isCurrentStepValid,n=t.clogger,i=t.stepNumber;r&&a();n.track(T["k"].GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:q["e"][i],action:"CLICK"}}})}},{key:"onClose",value:function e(){var t=this.props,a=t.clogger,r=t.stepNumber;a.track(T["k"].GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:q["e"][r],action:"CLOSE"}}});this.props.onClose()}},{key:"onPasswordSet",value:function e(t){this.setState(function(){return{password:t}})}},{key:"onDialogFinish",value:function e(){var t=this;var a=this.state.password;var r=void 0;r=this.props.needsPasswordSet?this.props.updatePassword({password:a}):Promise.resolve();var n=this.props.submitDomainWhitelistingPref();return Promise.all([r,n]).then(function(){return t.props.completeWorkflowTask({taskSubtype:"complete_team_creator_account_setup"})}).catch(function(e){Le.info(Be,e)})}},{key:"getGoButtonText",value:function e(){var t=this.props,a=t.stepNumber,r=t.invites,n=t.hasInvited;var i=r?r.length:0;switch(a){case 1:return n?Fe.t("Finish"):Fe.t("Next");case 2:return i>=1?Fe.t("Add {numEmails, plural, =1 {# Person} other {# People}}",{numEmails:i,fallbackHash:"afa51f5e80065586875a7cd693abcad1a66bdb3b"}):Fe.t("Finish");case 3:if(0===i)return Fe.t("Explore Slack");return Fe.t("Start the Conversation");default:return Fe.t("Next")}}},{key:"getFooterText",value:function e(){var t=this.props,a=t.stepNumber,r=t.hasInvited;if(a>=q["c"])return null;var n=a+1;var i=r?2:3;return Fe.t("Step {stepNumber} of {totalSteps}",{stepNumber:n,totalSteps:i})}},{key:"preloadRemainingImages",value:function e(){Object(u["map"])(q["b"],function(e,t){if("profile"===t)return null;var a=new Image;var r=new Image;a.src=e;r.src=e.replace(".png","@2x.png");return null})}},{key:"shouldShowBackButton",value:function e(t){if(t===q["d"].profile||t===q["d"].completion)return false;return true}},{key:"render",value:function e(){var t=this.props,a=t.modalTitle,r=t.stepNumber,n=t.isCurrentStepValid,o=t.isPromiseRunning;var l=E()("p-team_creator_onboarding_dialog",{"p-team_creator_onboarding_dialog--complete":3===r});return s.a.createElement(i["Fragment"],null,s.a.createElement(A["a"],{showGoButton:true,showCloseButton:true,showHeader:true,shouldCloseOnCancel:false,shouldCloseOnGo:r===q["d"].completion,truncateTitle:false,onClose:this.onClose,showCancelButton:this.shouldShowBackButton(r),goButtonIsDisabled:!n,goButtonIsPending:o,goButtonText:this.getGoButtonText(),title:a,footerText:this.getFooterText(),onGo:this.onGo,onCancel:this.onBack,cancelText:Fe.t("Back"),id:"team-creator-onboarding-dialog","data-qa":"team-creator-onboarding-dialog",className:l,bodyClassName:"p-team_creator_onboarding_dialog__body"},s.a.createElement(D,{step:0,currentStep:r,title:Fe.t("Set your name and password")},s.a.createElement(ie,{imgUrl:q["b"].profile,onPasswordSet:this.onPasswordSet})),s.a.createElement(D,{step:1,currentStep:r,title:Fe.t("Review your team\u2019s details")},s.a.createElement(we,{imgUrl:q["b"].workspace,onDialogFinish:this.onDialogFinish})),s.a.createElement(D,{step:2,currentStep:r,title:Fe.t("Add people to your Slack workspace")},s.a.createElement("div",null),s.a.createElement(be,{imgUrl:q["b"].invites,onDialogFinish:this.onDialogFinish})),s.a.createElement(D,{step:3,currentStep:r},s.a.createElement("div",null),s.a.createElement(Re,{imgUrl:q["b"].completion}))))}}]);return t}(s.a.Component);Ue.displayName="TeamCreatorOnboardingDialog";Ue.defaultProps=xe;var qe=function e(t){return{hasInvited:Object(j["f"])(t,"has_invited"),needsPasswordSet:Object(j["f"])(t,"needs_initial_password_set"),stepNumber:Object(C["getStepNumber"])(t),modalTitle:Object(C["getModalTitle"])(t),stepCallback:Object(C["getStepCallback"])(t),isCurrentStepValid:Object(C["getCurrentStepValidity"])(t),isPromiseRunning:Object(C["getIsPromiseRunning"])(t),invites:Object(C["getInvites"])(t),clogger:Object(I["a"])({state:t})}};var Ge={fetchAndSetChannelInfo:C["fetchAndSetChannelInfo"],fetchAndSetWorkspace:C["fetchAndSetWorkspace"],fetchAndSetSignupDetails:C["fetchAndSetSignupDetails"],setInitialMarketingPref:C["setInitialMarketingPref"],setStepNumber:C["setStepNumber"],updatePassword:C["updatePassword"],submitDomainWhitelistingPref:C["submitDomainWhitelistingPref"],completeWorkflowTask:C["completeWorkflowTask"]};var We=Object(d["connect"])(qe,Ge)(Ue);var He=a(163);a.d(t,"a",function(){return Ve});a.d(t,"b",function(){return Ke});var Ve=function e(t,a,r){var i=Object(p["d"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(a)})};Object(c["a"])(s.a.createElement(d["Provider"],{store:i},s.a.createElement(He["a"],null,s.a.createElement(We,n()({onClose:o},r)))),a)};var Ke=function e(t){l.a.unmountComponentAtNode(t)}},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(88);var l=a.n(o);var c=a(13);var u=a(2);var d=a.n(u);var p=a(119);var h=a(27);var v=a(6);var m=a.n(v);var f=a(8);var b=a.n(f);var g=a(7);var _=a.n(g);var y=a(9);var O=a.n(y);var k=a(0);var E=a(16);var C=a.n(E);var j=a(35);var w=a(1037);var S=a(45);var I=a(31);var T=a(4);var A=a(10);var N=a(242);var P=a(183);var R=a(354);var M=a(96);var D=a(48);var x=a(19);var F=a(1327);var L=a(1185);var B=a(113);var U=a(11);var q=a(28);var G=a(22);var W=a(66);var H=a(270);var V=a(50);var K=a(84);var z=a(126);var Y=a(54);var Q=a(135);var J=a(2399);var Z=new A["b"]("connected_workspaces");var X={currentTeam:k["b"].object.isRequired,workspace:k["b"].object.isRequired,workspaceChannels:k["b"].array.isRequired,onClose:k["b"].func.isRequired,openModal:k["b"].func,submitDisconnectSharedTeam:k["b"].func,clogger:k["b"].object.isRequired,featureChannelIsRemoveCreateSharedChannel:k["b"].bool,featureEscDisconnectV2Client:k["b"].bool,featureEscAdminClient:k["b"].bool,isEnterprise:k["b"].bool};var $={openModal:d.a.noop,submitDisconnectSharedTeam:d.a.noop,featureChannelIsRemoveCreateSharedChannel:false,featureEscDisconnectV2Client:false,featureEscAdminClient:false,isEnterprise:false};var ee="SHARED_CHANNELS_MANAGE_MODAL_ACTION";var te=function(e){O()(t,e);function t(e){m()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isCheckboxChecked:false};a.renderActionMenu=a.renderActionMenu.bind(a);a.showDisconnectDialog=a.showDisconnectDialog.bind(a);a.handleCheckboxChange=a.handleCheckboxChange.bind(a);return a}_()(t,[{key:"componentDidUpdate",value:function e(t,a){this.dialog&&a.isCheckboxChecked!==this.state.isCheckboxChecked&&this.dialog.render({goButtonIsDisabled:!this.state.isCheckboxChecked,goOnEnterPressed:this.state.isCheckboxChecked})}},{key:"calculateChannelNumbers",value:function e(){var t=this.props,a=t.workspaceChannels,r=t.featureEscDisconnectV2Client,n=t.workspace;if(r){var i=d.a.get(n,"counts.public",0);var s=d.a.get(n,"counts.private",0);return{numPublicChannels:i,numPrivateChannels:s,numTotalChannels:i+s,numImsAndMpims:d.a.get(n,"counts.im",0)+d.a.get(n,"counts.mpim",0)}}var o=d.a.partition(a,function(e){return Object(U["isPrivateChannel"])(e)||Object(U["isUnknownOrNonExistent"])(e)});if(!o)return{numTotalChannels:0,numPrivateChannels:0};var l=o[1].length;var c=o[0].length;return{numPublicChannels:l,numPrivateChannels:c,numTotalChannels:l+c}}},{key:"createChannelString",value:function e(t){var a=t.numTotalChannels,r=t.numPrivateChannels;var n=this.props.featureEscDisconnectV2Client;if(n&&a<1)return Z.t("No channels");var i=Z.t("{count, plural, =1 {# channel} other {# channels}}",{count:a});var s=r?Z.t(" ({count} private)",{count:r}):"";return""+i+s}},{key:"handleCheckboxChange",value:function e(){this.setState(function(e){return{isCheckboxChecked:!e.isCheckboxChecked}})}},{key:"showDisconnectDialog",value:function e(){this.dialog=this.props.openModal({element:this.renderDisconnectDialog()})}},{key:"renderDisconnectDialog",value:function e(){var t=this;var a=this.props,r=a.currentTeam,n=a.onClose,o=a.clogger,l=a.isEnterprise,c=a.featureEscDisconnectV2Client;var u=this.props.workspace,d=u.name,p=u.id;var h=c?Z.rt("Stop sharing with {workspaceName}?",{workspaceName:d}):Z.rt("Stop sharing all channels with {workspaceName}?",{workspaceName:d});var v=Z.rt("<strong>This cannot be undone</strong>. Please double-check the info below.");var m=this.calculateChannelNumbers();var f=Z.t("{count, plural, =1 {# public channel} other {# public channels}}",{count:m.numPublicChannels});var b=Z.t("{count, plural, =1 {# private channel} other {# private channels}}",{count:m.numPrivateChannels});var g=c?Z.rt("<strong>Yes, stop sharing with {targetWorkspaceName}</strong>",{targetWorkspaceName:d}):Z.rt("<strong>Yes, stop sharing all channels with {targetWorkspaceName}</strong>",{targetWorkspaceName:d});var _=c?s.a.createElement(i["Fragment"],null,s.a.createElement(Q["a"],{level:"error",className:"margin_bottom_100",type:"inline"},v),s.a.createElement("p",null,Z.rt("This will disconnect all the channels you currently share with <strong>{targetWorkspaceName}</strong>. ",{targetWorkspaceName:d}),!l&&Z.t("Members of the two organizations will no longer be able to direct message each other.")),s.a.createElement("p",null,Z.t("You\u2019re disconnecting...")),s.a.createElement("ul",null,m.numPublicChannels?s.a.createElement("li",null,f):"",m.numPrivateChannels?s.a.createElement("li",null,b):"",!l&&s.a.createElement("li",null,Z.t("All direct and group messages"))),s.a.createElement("p",null,Z.rt("Note: channels that were originally created by <strong>{targetWorkspaceName}</strong> will become read-only.",{targetWorkspaceName:d}))):s.a.createElement(i["Fragment"],null,s.a.createElement(Q["a"],{level:"error",className:"margin_bottom_100"},v),s.a.createElement("p",null,s.a.createElement("strong",null,Z.t("What will happen:"))),s.a.createElement("ul",null,s.a.createElement("li",null,Z.t("{currentTeamName} and {targetWorkspaceName} will keep separate copies of each channel.",{currentTeamName:Object(I["getTeamDisplayName"])(r),targetWorkspaceName:d})),s.a.createElement("li",null,Z.t("Each workspace can continue using their copies.")),s.a.createElement("li",null,Z.t("You won\u2019t be able to reshare any of these channels."))),s.a.createElement("p",null,s.a.createElement("strong",null,Z.t("You\u2019re about to stop sharing:"))),s.a.createElement("ul",null,m.numPublicChannels?s.a.createElement("li",null,f):"",m.numPrivateChannels?s.a.createElement("li",null,b):"",s.a.createElement("li",null,Z.t("All direct and group messages"))));return s.a.createElement(K["a"],{title:h,goButtonText:Z.t("Stop Sharing"),goButtonType:"danger",onCancel:function e(){o.trackClickWithContext({event:ee,element:"SHARED_CHANNELS_MANAGE_MODAL_STOP_SHARING_CANCEL_BTN"})},onGo:function e(){o.trackClickWithContext({event:ee,element:"SHARED_CHANNELS_MANAGE_MODAL_STOP_SHARING_CONFIRM_BTN"});t.props.submitDisconnectSharedTeam({targetTeamId:p}).then(n)},truncateTitle:false,goButtonIsDisabled:!this.state.isCheckboxChecked,goOnEnterPressed:this.state.isCheckboxChecked},_,s.a.createElement(Y["a"],{text:g,htmlFor:"confirmStopSharingAll",type:"inline",cursor:"pointer"},s.a.createElement(z["a"],{id:"confirmStopSharingAll",isRequired:true,onChange:this.handleCheckboxChange})))}},{key:"renderActionMenu",value:function e(t){var a=this;var r=this.props,i=r.workspaceChannels,o=r.clogger,l=r.featureChannelIsRemoveCreateSharedChannel,c=r.featureEscDisconnectV2Client,u=r.featureEscAdminClient,d=r.isEnterprise;var p=this.props.workspace.name;var h=this.props.workspace,v=h.id,m=h.domain;var f=Z.t("Stop sharing {count, plural, =1 {this channel} other {these channels}}",{count:i.length});c&&(f=d?Z.t("Stop sharing all channels..."):Z.rt("Stop sharing with {ext_team}...",{ext_team:p}));var b=l?null:s.a.createElement(W["b"],{label:Z.t("Share a new channel"),onSelected:function e(){Object(L["c"])({team_url:m,element:"SHARED_CHANNELS_MANAGE_MODAL_SHARE_NEW_BTN"});o.trackClickWithContext({event:ee,element:"SHARED_CHANNELS_MANAGE_MODAL_SHARE_NEW_BTN"});a.props.onClose()},"data-qa":"p-connected_workspaces_menu_item__new_esc"});var g=d&&u?null:s.a.createElement(W["b"],{label:f,danger:true,onSelected:function e(){o.trackClickWithContext({event:ee,element:"SHARED_CHANNELS_MANAGE_MODAL_STOP_SHARING_BTN"});a.showDisconnectDialog()},"data-qa":"p-connected_workspaces_menu_item__disconnect"});return s.a.createElement(W["f"],n()({},t,{width:"auto"}),s.a.createElement(W["b"],{label:Z.t("View shared channels"),onSelected:function e(){Object(F["c"])({show_which_channels:"ext_shared_team_"+v,onBack:F["b"]});o.trackClickWithContext({event:ee,element:"SHARED_CHANNELS_MANAGE_MODAL_VIEW_CHANNELS_BTN"});a.props.onClose()}}),b,g)}},{key:"renderConversationCounts",value:function e(){var t=this;var a=this.props.workspace,r=a.id,n=a.name;var i=this.props,o=i.clogger,l=i.featureEscDisconnectV2Client,c=i.isEnterprise;var u=this.calculateChannelNumbers();var d=this.createChannelString(u);var p=l&&!c?s.a.createElement("span",{className:"p-connected_workspaces_row__ims_and_mpims"},Z.t("{count, plural, =0 {No direct message conversations} =1 {# direct message conversation} other {# direct message conversations}}",{count:u.numImsAndMpims})):null;var h=C()("p-connected_workspaces_row__item",{"p-connected_workspaces_row__conversation_counts":l});return s.a.createElement("div",{className:h},s.a.createElement(V["c"],{tip:Z.t("View channels"),position:"top"},s.a.createElement(q["c"],{className:"p-connected_workspaces_row__channels overflow_ellipsis","aria-label":Z.t("View {channelCountString} in {name}",{channelCountString:d,name:n}),onClick:function e(){Object(F["c"])({show_which_channels:"ext_shared_team_"+r,onBack:F["b"]});o.trackClickWithContext({event:ee,element:"SHARED_CHANNELS_MANAGE_MODAL_CHANNEL_COUNT_BTN"});t.props.onClose()}},d)),p)}},{key:"render",value:function e(){var t=this.props.workspace,a=t.name,r=t.domain,n=t.icon;return s.a.createElement("div",{className:"p-connected_workspaces_row"},s.a.createElement("div",{className:"p-connected_workspaces_row__item"},s.a.createElement(H["b"],{teamName:a,size:35,icon:n,className:"p-connected_workspaces_row__workspace_icon margin_right_75"}),s.a.createElement("div",{className:"p-connected_workspaces_row__workspace_info"},s.a.createElement("div",{className:"p-connected_workspaces_row__workspace_name overflow_ellipsis"},a),s.a.createElement("div",{className:"p-connected_workspaces_row__workspace_domain overflow_ellipsis"},r+".slack.com"))),this.renderConversationCounts(),s.a.createElement("div",{className:"p-connected_workspaces_row__item"},s.a.createElement("div",{className:"p-connected_workspaces_row__actions"},s.a.createElement(W["e"],{renderMenu:this.renderActionMenu,position:"bottom-right",offsetX:20},s.a.createElement(q["c"],{"aria-label":Z.t("More options for {name}",{name:a}),"data-qa":"p-connected_workspaces_item__more_options_btn"},s.a.createElement(G["a"],{type:"ellipsis"}))))))}}]);return t}(i["Component"]);te.displayName="ConnectedWorkspacesRow";te.defaultProps=$;var ae=function e(t,a){var r=d.a.map(a.workspace.channels,function(e){return Object(x["d"])(t,e)});return{workspaceChannels:r,currentTeam:Object(j["d"])(t),clogger:Object(S["a"])({state:t}),featureChannelIsRemoveCreateSharedChannel:Object(T["isFeatureEnabled"])(t,"feature_channel_is_remove_create_shared_channel"),featureEscDisconnectV2Client:Object(T["isFeatureEnabled"])(t,"feature_esc_disconnect_v2_client"),isEnterprise:Object(T["pageNeedsEnterprise"])(t),featureEscAdminClient:Object(T["isFeatureEnabled"])(t,"feature_esc_admin_client")&&Object(T["isFeatureEnabled"])(t,"feature_shared_channels_enterprise")}};var re={openModal:D["openModal"],submitDisconnectSharedTeam:B["G"]};var ne=Object(c["connect"])(ae,re)(te);var ie=new A["b"]("connected_workspaces");var se={currentTeam:k["b"].object.isRequired,onBack:k["b"].func,onClose:k["b"].func.isRequired,referringUiElement:k["b"].string,fetchAndUpsertExternalTeams:k["b"].func,clogger:k["b"].object.isRequired,featureSharedChannelsEnterpriseClient:k["b"].bool,featureEscDisconnectV2Client:k["b"].bool,isEnterprise:k["b"].bool,workspaces:k["b"].array};var oe={onBack:null,referringUiElement:null,fetchAndUpsertExternalTeams:d.a.noop,featureSharedChannelsEnterpriseClient:false,featureEscDisconnectV2Client:false,isEnterprise:false,workspaces:[]};var le="SHARED_CHANNELS_MANAGE_MODAL_OPEN";var ce=function(e){O()(t,e);_()(t,null,[{key:"filterWorkspaces",value:function e(t,a){if(!t||!t.trim())return a;var r=d.a.toLower(t);var n=[];for(var i=0;i<a.length;i+=1){var s=d.a.toLower(a[i].name);var o=a[i].domain;if(s&&(-1!==s.indexOf(r)||-1!==o.indexOf(r))){n.push(a[i]);if(n.length===a.length)break}}return n}}]);function t(e){m()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderConnectedWorkspacesRow=a.renderConnectedWorkspacesRow.bind(a);a.handleSearchInputChange=a.handleSearchInputChange.bind(a);a.state={searchQuery:"",isLoading:true};return a}_()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props,r=a.referringUiElement,n=a.clogger;var i={event:le};r&&(i.element=r);n.trackClickWithContext(i);this.props.fetchAndUpsertExternalTeams({reason:"populate_manage_shared_channels"}).then(function(){t.setState(function(){return{isLoading:false}})})}},{key:"getWorkspaceExternalChannelCount",value:function e(t){var a=this.props.featureEscDisconnectV2Client;if(a)return d.a.get(t,"counts.public",0)+d.a.get(t,"counts.private",0);return d.a.get(t,"channels.length",0)}},{key:"getRenderedWorkspaceCount",value:function e(){var t=this;var a=this.props.workspaces;return d.a.size(d.a.filter(a,function(e){return t.shouldRenderWorkspace(e)}))}},{key:"handleSearchInputChange",value:function e(t){this.setState(function(){return{searchQuery:t.target.value}})}},{key:"shouldRenderWorkspace",value:function e(t){var a=this.props,r=a.featureEscDisconnectV2Client,n=a.isEnterprise;if(!r&&!this.getWorkspaceExternalChannelCount(t))return false;if(r&&n&&!this.getWorkspaceExternalChannelCount(t))return false;return true}},{key:"renderConnectedWorkspacesRow",value:function e(t){if(!this.shouldRenderWorkspace(t))return null;var a=this.props.onClose;return s.a.createElement(ne,{workspace:t,key:t.id,onClose:a})}},{key:"renderWorkspaces",value:function e(){var a=this.state,r=a.isLoading,n=a.searchQuery;var i=this.props,o=i.featureSharedChannelsEnterpriseClient,l=i.workspaces;if(r)return null;var c=t.filterWorkspaces(n,l);var u=c.sort(function(e,t){return Object(N["a"])(e.name,t.name)});var d=u.map(this.renderConnectedWorkspacesRow);return s.a.createElement("div",null,s.a.createElement("div",{className:"p-connected_workspaces_row p-connected_workspaces_row--header"},s.a.createElement("div",{className:"p-connected_workspaces_row__item"},o?ie.t("Organization"):ie.t("Workspace")),s.a.createElement("div",{className:"p-connected_workspaces_row__item"},ie.t("Shared channels")),s.a.createElement("div",{className:"p-connected_workspaces_row__item"})),d)}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.currentTeam,n=a.onBack,i=a.onClose,o=a.featureSharedChannelsEnterpriseClient;var l=this.getRenderedWorkspaceCount();var c=o?ie.rt("{currentTeamName} is currently sharing channels with {count, plural, =1 {# other organization.} other {# other organizations.}}",{currentTeamName:Object(I["getTeamDisplayName"])(r),count:l}):ie.rt("<strong>{currentTeamName}</strong> is currently sharing channels with {count, plural, =1 {<strong># other workspace</strong>.} other {<strong># other workspaces</strong>.}}",{currentTeamName:Object(I["getTeamDisplayName"])(r),count:l});var u=C()("p-connected_workspaces__list",{"p-connected_workspaces__list--loading":this.state.isLoading});return s.a.createElement(R["a"],{showBackButton:!!n,showCancelButton:false,showGoButton:false,onBack:function e(){t.props.onBack();t.props.onClose()},onCancel:i,modalClasses:"p-connected_workspaces_modal",title:ie.t("Manage shared channels")},s.a.createElement("div",{className:"p-connected_workspaces"},s.a.createElement("div",{className:"p-connected_workspaces__header"},s.a.createElement("div",{className:"p-connected_workspaces__header_description"},s.a.createElement(P["a"],{enabled:["feature_esc_disconnect_v2_client"]},l>0?c:ie.rt("Currently, <strong>{currentTeamName}</strong> isn\u2019t sharing any channels.",{currentTeamName:Object(I["getTeamDisplayName"])(r)})),c)),s.a.createElement("div",{className:u},s.a.createElement(M["a"],{className:"p-connected_workspaces__spinner",size:"jumbo"}),this.renderWorkspaces())))}}]);return t}(i["Component"]);ce.displayName="ConnectedWorkspaces";ce.defaultProps=oe;var ue=function e(t){var a=d.a.uniqBy(Object(j["b"])(t).concat(Object(j["a"])(t)),"id");return{currentTeam:Object(j["d"])(t),clogger:Object(S["a"])({state:t}),featureSharedChannelsEnterpriseClient:Object(T["isFeatureEnabled"])(t,"feature_shared_channels_enterprise_client"),featureEscDisconnectV2Client:Object(T["isFeatureEnabled"])(t,"feature_esc_disconnect_v2_client"),isEnterprise:Object(T["pageNeedsEnterprise"])(t),workspaces:a}};var de={fetchAndUpsertExternalTeams:w["a"]};var pe=Object(c["connect"])(ue,de)(ce);var he=pe;var ve=a(163);a.d(t,"a",function(){return me});a.d(t,"b",function(){return fe});var me=function e(t,a){var r=document.getElementById("connected_workspaces_dialog_mount_point");if(!t)throw new Error("mountChannelOptions must be called with a teamId parameter");var i=Object(h["d"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(p["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(ve["a"],null,s.a.createElement(he,n()({},a,{onClose:o})))),r)};var fe=function e(t){l.a.unmountComponentAtNode(t)};var be={mountConnectedWorkspaces:me,unmountConnectedWorkspaces:fe}},,,,function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(0);var v=a(1);var m=a.n(v);var f=a(2);var b=a(1049);var g=a(2395);var _={action:h["b"].node};var y={action:null};var O=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"render",value:function e(){return m.a.createElement("div",{className:"margin_left_75"},this.props.action)}}]);return t}(v["PureComponent"]);O.displayName="ActionBarItem";O.defaultProps=y;var k=O;var E={title:h["b"].node.isRequired,actions:h["b"].array,"data-qa":h["b"].string};var C={actions:[],"data-qa":void 0};var j=function(e){p()(t,e);function t(){s()(this,t);return u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}l()(t,[{key:"renderActionItems",value:function e(){var t=this.props.actions;var a=Object(f["map"])(t,function(e,t){return m.a.createElement(k,{key:t,action:e})});return a}},{key:"render",value:function e(){return m.a.createElement("div",{className:"p-action_bar display_flex align_items_center justify_content_between sk_off_white_bg"},m.a.createElement("span",n()({},Object(b["a"])(this.props),{className:"p-action_bar_title black"}),this.props.title),m.a.createElement("div",{className:"display_flex align_items_center"},this.renderActionItems()))}}]);return t}(v["PureComponent"]);j.displayName="ActionBar";j.defaultProps=C;var w=t["a"]=j},,,,,,,function(e,t,a){},,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},,,,,function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(1);var v=a.n(h);var m=a(0);var f=a(13);var b=a(16);var g=a.n(b);var _=a(4);var y=a(2);var O=a.n(y);var k=a(10);var E=a(11);var C=a(19);var j=a(54);var w=a(893);var S=a(139);var I=a(290);var T=new k["b"]("user_groups");var A={selectedChannels:m["b"].array,getChannelById:m["b"].func.isRequired,featureSonicUserGroups:m["b"].bool.isRequired,onRef:m["b"].func.isRequired,search:m["b"].func.isRequired};var N={selectedChannels:[]};var P=100;var R={entities:{channels:{includePublic:true,includePrivate:true,includeFromAnotherTeam:false,includeMpims:false,includeArchived:false,searchPreviousNames:false,onlyVisibleMpims:false,includeRequired:true}},limit:P,tiered:true};var M=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={selectedChannels:a.props.selectedChannels,hideList:true,defaultChannelsHasFocus:false};Object(y["bindAll"])(a,["getResultsForChannelsQuery","createSelectItems","onItemAdded","onItemRemoved","createTokenTemplate","listItemClass","hideList","onInputFocus","onInputBlur"]);return a}l()(t,[{key:"componentDidMount",value:function e(){this.props.onRef(this)}},{key:"componentWillUnmount",value:function e(){this.props.onRef(void 0)}},{key:"onGetSelectedDefaultChannels",value:function e(){return this.state.selectedChannels}},{key:"onItemAdded",value:function e(t){var a=this.state.selectedChannels;a.push(t.id);this.setState(function(){return{selectedChannels:a}});this.hideList(true)}},{key:"onItemRemoved",value:function e(t){var a=Object(y["without"])(this.state.selectedChannels,t.id);this.setState(function(){return{selectedChannels:a}})}},{key:"onInputFocus",value:function e(){this.setState(function(){return{defaultChannelsHasFocus:true}})}},{key:"onInputBlur",value:function e(){this.setState(function(){return{defaultChannelsHasFocus:false}})}},{key:"getResultsForChannelsQuery",value:function e(t){var a=this;this.hideList(!t);if(!t)return Promise.resolve({items:this.createSelectItems(this.props.selectedChannels),replace_all_items:true});return this.props.search({query:t,options:R}).then(function(e){var t=a.props.selectedChannels;e.map(function(e){var a=Object(E["getDisplayName"])(e);if(-1!==t.indexOf(e.id))return n()({},e,{label:a,preselected:true});return n()({},e,{label:a})});return{items:e}})}},{key:"hideList",value:function e(t){this.setState(function(){return{hideList:t}})}},{key:"createSelectItems",value:function e(t){var a=this;return Object(y["map"])(t,function(e){var t=a.props.getChannelById(e);var r=Object(E["getDisplayName"])(t);return n()({},t,{label:r,preselected:true})})}},{key:"createTokenTemplate",value:function e(t){return v.a.createElement("div",{className:"margin_left_50"},v.a.createElement(S["a"],{channel:t}))}},{key:"listItemClass",value:function e(){return"display_flex align_items_center"}},{key:"render",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=T.t("Default channels");var a=T.t("Group members are added to these channels automatically.");var r=g()({"focus-ring":this.state.defaultChannelsHasFocus});return v.a.createElement(j["a"],{htmlFor:"default_channel_label",id:"user_group_default_channel",key:"user_group_default_channel",text:t,optional:true},v.a.createElement(w["a"],{items:this.createSelectItems(this.props.selectedChannels),dataPromise:this.getResultsForChannelsQuery,onItemAdded:this.onItemAdded,onItemRemoved:this.onItemRemoved,template:this.createTokenTemplate,tokenTemplate:this.createTokenTemplate,listItemClass:this.listItemClass,hideList:this.state.hideList,forceListAbove:true,inputClasses:r,onInputFocus:this.onInputFocus,onInputBlur:this.onInputBlur}),v.a.createElement("div",{className:"c-hint"},a))}}]);return t}(h["PureComponent"]);M.displayName="UserGroupDefaultChannelPicker";M.defaultProps=N;var D=function e(t){return{getChannelById:function e(a){return Object(C["d"])(t,a)},featureSonicUserGroups:Object(_["isFeatureEnabled"])(t,"feature_sonic_user_groups")}};var x={search:I["a"]};t["a"]=Object(f["connect"])(D,x)(M)},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(13);var v=a(2);var m=a.n(v);var f=a(0);var b=a(10);var g=a(66);var _=a(335);var y=a(139);var O=a(128);var k=a(22);var E=a(50);var C=a(4);var j=a(34);var w=a(132);var S=a(11);var I=a(553);var T=a(803);var A=a(1217);var N=a(1846);var P=a(1102);var R=a(21);var M=a(45);var D=new b["b"]("do_not_disturb");var x={snoozeNotifications:f["b"].func.isRequired,currentChannel:f["b"].object,menuProps:f["b"].object,openDndDialog:f["b"].func,openChannelNotificationPrefsModal:f["b"].func,openPrefsModal:f["b"].func,clogger:f["b"].object,setUserPrefByApi:f["b"].func,showNotificationScheduleNewBadge:f["b"].bool,featureGranularDnd:f["b"].bool};var F={currentChannel:{},menuProps:{},openDndDialog:v["noop"],openChannelNotificationPrefsModal:v["noop"],openPrefsModal:v["noop"],clogger:{track:v["noop"]},setUserPrefByApi:v["noop"],showNotificationScheduleNewBadge:false,featureGranularDnd:false};var L=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClickDoNotDisturbSchedule=a.onClickDoNotDisturbSchedule.bind(a);a.onClickNotificationPreferences=a.onClickNotificationPreferences.bind(a);return a}s()(t,[{key:"onClickDoNotDisturbSchedule",value:function e(){var t=this.props,a=t.featureGranularDnd,r=t.showNotificationScheduleNewBadge;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"});a&&r&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:true})}},{key:"onClickNotificationPreferences",value:function e(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"renderSettingsMenuItem",value:function e(){var t=this;var a=this.props.currentChannel;if(!a.id||Object(S["isIm"])(a))return null;var r=p.a.createElement(y["a"],{channelId:a.id,iconProps:{inherit:true,align:"baseline"},inline:true});var n=D.rt("Settings for {name}\u2026",{name:p.a.createElement("strong",null,r),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return p.a.createElement(g["b"],{label:n,onSelected:function e(){return t.props.openChannelNotificationPrefsModal({channelId:a.id})}})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.menuProps,n=a.clogger,i=a.featureGranularDnd,s=a.showNotificationScheduleNewBadge;var o=void 0;var l=void 0;var c=void 0;if(i){o=D.t("Do Not Disturb allows you to pause your Slack notifications");l=p.a.createElement("span",{className:"p-dnd_menu__new_pill"},D.t("NEW"));c=s?p.a.createElement("span",null,D.t("Notification schedule\u2026")," ",l):D.t("Notification schedule\u2026")}return p.a.createElement(g["f"],r,p.a.createElement(g["c"],{label:i?D.t("Do Not Disturb"):D.t("Pause notifications")}),i&&p.a.createElement(E["c"],{tip:o,position:"right",zIndex:"above_fs"},p.a.createElement(O["a"],{className:"p-dnd_menu_question_button"},p.a.createElement(k["b"],{type:"question-circle"}))),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("30 minutes"),onSelected:function e(){var a=30;t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:30m"});n.track(R["k"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:R["h"].DURATION_30_MINUTES,dnd_snooze_type:R["i"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_30"}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("1 hour"),onSelected:function e(){var a=60;t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:1hr"});n.track(R["k"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:R["h"].DURATION_1_HOUR,dnd_snooze_type:R["i"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_60"}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("2 hours"),onSelected:function e(){var a=120;t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:2hr"});n.track(R["k"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:R["h"].DURATION_2_HOURS,dnd_snooze_type:R["i"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_120"}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("4 hours"),onSelected:function e(){var a=240;t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:4hr"});n.track(R["k"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:R["h"].DURATION_4_HOURS,dnd_snooze_type:R["i"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_240"}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("Until tomorrow"),onSelected:function e(){var a=Object(P["d"])();t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:tomorrow"});n.track(R["k"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:R["h"].DURATION_TOMORROW,dnd_snooze_type:R["i"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_tomorrow"}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("Until next week"),onSelected:function e(){var a=Object(P["c"])();t.props.snoozeNotifications({duration:a,reason:"DndDisabledMenu:week"});n.track(R["k"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:a,dnd_preset:R["h"].DURATION_NEXT_WEEK,dnd_snooze_type:R["i"].SNOOZE_INITIAL})},"data-qa":"snooze_btn_next_week"}),p.a.createElement(g["b"],{type:_["a"].subheaderChild,label:D.t("Custom\u2026"),onSelected:function e(){t.props.openDndDialog();n.track(R["k"].DND_OPEN_CUSTOM_SNOOZE_DIALOG)},"data-qa":"snooze_btn_custom"}),p.a.createElement(g["d"],null),p.a.createElement(g["b"],{label:i?c:D.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!i&&p.a.createElement(g["d"],null),!i&&this.renderSettingsMenuItem(),!i&&p.a.createElement(g["b"],{label:D.t("Your notification preferences\u2026"),onSelected:this.onClickNotificationPreferences}))}}]);return t}(d["PureComponent"]);L.displayName="DndDisabledMenu";L.defaultProps=F;var B=function e(t){return{clogger:Object(M["a"])({state:t}),featureGranularDnd:Object(C["isFeatureEnabled"])(t,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(j["f"])(t,"dnd_notification_schedule_new_badge_seen")}};var U=function e(t){return{snoozeNotifications:function e(a){return t(Object(I["e"])(a))},openDndDialog:function e(){return t(Object(N["a"])())},openChannelNotificationPrefsModal:function e(a){return t(Object(A["a"])(a))},setUserPrefByApi:function e(a){return t(Object(w["c"])(a))},openPrefsModal:function e(a){return t(Object(T["a"])(a))}}};t["a"]=Object(h["connect"])(B,U)(L)},,,,,,,,,,function(e,t,a){"use strict";var r=a(34);var n=function e(t){if(Object(r["f"])(t,"mark_msgs_read_immediately")&&Object(r["f"])(t,"start_scroll_at_oldest"))return"immediate_scroll";if(Object(r["f"])(t,"mark_msgs_read_immediately"))return"immediate";return"default"};t["a"]=n},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(13);var v=a(0);var m=a(19);var f=a(68);var b=a(1206);var g=a(305);var _=a(11);var y=a(239);var O=a(126);var k=a(54);var E=a(211);var C=a(22);var j=a(50);var w=a(187);var S=a(10);var I=a(299);var T=a(2379);var A=a.n(T);var N=new S["b"]("prefs");var P={channelId:v["b"].string.isRequired,channelName:v["b"].string.isRequired,isMuted:v["b"].bool.isRequired,isAtChannelSuppressed:v["b"].bool.isRequired,isGroupDm:v["b"].bool.isRequired,isGeneral:v["b"].bool.isRequired,desktopSetting:v["b"].string.isRequired,mobileSetting:v["b"].string.isRequired,whoCanAtChannel:v["b"].string.isRequired,whoCanAtEveryone:v["b"].string.isRequired,whoCanPostGeneral:v["b"].string.isRequired,notificationsAllowed:v["b"].bool.isRequired,setMuted:v["b"].func.isRequired,setSuppressed:v["b"].func.isRequired,setDesktopSetting:v["b"].func.isRequired,setMobileSetting:v["b"].func.isRequired,openPrefsModal:v["b"].func.isRequired};var R=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMutedChanged=a.onMutedChanged.bind(a);a.onSuppressedChanged=a.onSuppressedChanged.bind(a);a.onDesktopSettingChanged=a.onDesktopSettingChanged.bind(a);a.onMobileSettingChanged=a.onMobileSettingChanged.bind(a);a.onOpenPreferences=a.onOpenPreferences.bind(a);return a}s()(t,[{key:"onMutedChanged",value:function e(t){var a=this.props,r=a.channelId,n=a.setMuted;var i=t.target.checked;n(r,!!i)}},{key:"onSuppressedChanged",value:function e(t){var a=this.props,r=a.channelId,n=a.setSuppressed;var i=t.target.checked;n(r,!!i)}},{key:"onDesktopSettingChanged",value:function e(t){var a=this.props,r=a.channelId,n=a.setDesktopSetting;n(r,t.target.value)}},{key:"onMobileSettingChanged",value:function e(t){var a=this.props,r=a.channelId,n=a.setMobileSetting;n(r,t.target.value)}},{key:"onOpenPreferences",value:function e(){this.props.openPrefsModal()}},{key:"renderMutingOptions",value:function e(){var t=this.props,a=t.channelName,r=t.isMuted,n=t.isAtChannelSuppressed,i=t.isGroupDm,s=t.isGeneral,o=t.whoCanAtEveryone,l=t.whoCanAtChannel,c=t.whoCanPostGeneral;var u="";s?"owner"===c||"admin"===c?u=N.t("A Workspace Owner has restricted who can post to {channelName} to admins and/or owners. These notifications can not be ignored.",{atChannel:"@"+Object(I["b"])({ms_name:"channel"}),atEveryone:"@"+Object(I["b"])({ms_name:"everyone"}),channelName:Object(S["o"])(a)}):"admin"!==o&&"owner"!==o||(u=N.t("A Workspace Owner has restricted the use of {atChannel} and/or {atEveryone} to admins and/or owners. These notifications can not be ignored.",{atChannel:"@"+Object(I["b"])({ms_name:"channel"}),atEveryone:"@"+Object(I["b"])({ms_name:"everyone"})})):"admin"!==l&&"owner"!==l||(u=N.t("A Workspace Owner has restricted the use of {atChannel} to admins and/or owners. These notifications can not be ignored.",{atChannel:"@"+Object(I["b"])({ms_name:"channel"})}));var d=p.a.createElement(k["a"],{type:"inline",text:N.t("Ignore notifications for {atChannel} and {atHere}",{atChannel:"@"+Object(I["b"])({ms_name:s?"everyone":"channel"}),atHere:"@"+Object(I["b"])({ms_name:"here"})}),isDisabled:!!u,cursor:"pointer"},u?p.a.createElement(j["c"],{tip:u},p.a.createElement("span",null,p.a.createElement(O["a"],{disabled:true}))):p.a.createElement(O["a"],{checked:n,onChange:this.onSuppressedChanged}));return p.a.createElement("div",null,p.a.createElement(k["a"],{type:"inline",text:i?N.t("Mute entire conversation"):N.t("Mute entire channel"),subtext:N.t("You won't receive notifications for muted channels, and they'll appear grayed out in your channel list."),cursor:"pointer"},p.a.createElement(O["a"],{checked:r,onChange:this.onMutedChanged})),i?null:d)}},{key:"renderPermissionPrompt",value:function e(){var t=this;return p.a.createElement("div",{className:"margin_top_100"},p.a.createElement("div",null,p.a.createElement(C["b"],{type:"desktop-notification",className:"p-channel_notification_prefs__platform_icon",size:"inherit"}),p.a.createElement("strong",null,N.t("Desktop notifications"))),p.a.createElement("div",null,N.rt("You have not yet allowed desktop notifications. Open the <a>Preferences Dialog</a> and follow the instructions to set them up.",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.text;return p.a.createElement(w["a"],{onClick:t.onOpenPreferences},a)})))}},{key:"renderNotificationsOptions",value:function e(){var t=this.props,a=t.isMuted,r=t.desktopSetting,n=t.mobileSetting,i=t.notificationsAllowed;if(a)return null;if(!i)return this.renderPermissionPrompt();var s=N.t("All new messages");var o=N.t("Just mentions*");var l=N.t("Nothing");return p.a.createElement("div",null,p.a.createElement("table",{className:"p-channel_notification_prefs__table"},p.a.createElement("thead",null,p.a.createElement("tr",null,p.a.createElement("th",{scope:"col"},N.t("Notifications")),p.a.createElement("th",{scope:"col"},s),p.a.createElement("th",{scope:"col"},o),p.a.createElement("th",{scope:"col"},l))),p.a.createElement("tbody",null,p.a.createElement("tr",null,p.a.createElement("th",{scope:"row"},p.a.createElement(C["b"],{type:"desktop-notification",className:"p-channel_notification_prefs__platform_icon"}),N.t("Desktop")),p.a.createElement("td",null,p.a.createElement(k["a"],{text:p.a.createElement("span",{className:"p-channel_notification_prefs__offscreen_label"},s)},p.a.createElement(E["a"],{name:"desktop_notification_setting",value:"everything",checked:"everything"===r,onChange:this.onDesktopSettingChanged}))),p.a.createElement("td",null,p.a.createElement(k["a"],{text:p.a.createElement("span",{className:"p-channel_notification_prefs__offscreen_label"},o)},p.a.createElement(E["a"],{name:"desktop_notification_setting",value:"mentions_dms",checked:"mentions_dms"===r,onChange:this.onDesktopSettingChanged}))),p.a.createElement("td",null,p.a.createElement(k["a"],{text:p.a.createElement("span",{className:"p-channel_notification_prefs__offscreen_label"},l)},p.a.createElement(E["a"],{name:"desktop_notification_setting",value:"nothing",checked:"nothing"===r,onChange:this.onDesktopSettingChanged})))),p.a.createElement("tr",null,p.a.createElement("th",{scope:"row"},p.a.createElement(C["b"],{type:"mobile-notification",className:"p-channel_notification_prefs__platform_icon"}),N.t("Mobile")),p.a.createElement("td",null,p.a.createElement(k["a"],{text:p.a.createElement("span",{className:"p-channel_notification_prefs__offscreen_label"},s)},p.a.createElement(E["a"],{name:"mobile_notification_setting",value:"everything",checked:"everything"===n,onChange:this.onMobileSettingChanged}))),p.a.createElement("td",null,p.a.createElement(k["a"],{text:p.a.createElement("span",{className:"p-channel_notification_prefs__offscreen_label"},o)},p.a.createElement(E["a"],{name:"mobile_notification_setting",value:"mentions_dms",checked:"mentions_dms"===n,onChange:this.onMobileSettingChanged}))),p.a.createElement("td",null,p.a.createElement(k["a"],{text:p.a.createElement("span",{className:"p-channel_notification_prefs__offscreen_label"},l)},p.a.createElement(E["a"],{name:"mobile_notification_setting",value:"nothing",checked:"nothing"===n,onChange:this.onMobileSettingChanged})))))),p.a.createElement("p",{className:"p-channel_notification_prefs__hint"},N.t("* Includes mentions of your name or any of your keywords")))}},{key:"render",value:function e(){return p.a.createElement("div",{className:"p-channel_notification_prefs"},this.renderMutingOptions(),this.renderNotificationsOptions())}}]);return t}(d["Component"]);R.displayName="ChannelNotificationPrefs";function M(e,t){var a=t.channelId;var r=Object(m["d"])(e,a);var n=Object(g["b"])(e,a)||{};return{channelName:Object(_["getDisplayNameForChannel"])(e,r),isGroupDm:Object(_["isMpim"])(r),isGeneral:Object(_["isGeneral"])(r),isMuted:n.muted||false,isAtChannelSuppressed:n.suppress_at_channel||false,desktopSetting:Object(y["g"])(e,a),mobileSetting:Object(y["h"])(e,a),notificationsAllowed:Object(y["f"])(),whoCanAtChannel:Object(f["a"])(e,"who_can_at_channel"),whoCanAtEveryone:Object(f["a"])(e,"who_can_at_everyone"),whoCanPostGeneral:Object(f["a"])(e,"who_can_post_general")}}function D(e){var t=function t(a,r,n){e(Object(b["b"])({name:r,value:n,channelId:a}))};return{setMuted:function e(a,r){return t(a,"muted",r)},setSuppressed:function e(a,r){return t(a,"suppress_at_channel",r)},setDesktopSetting:function e(a,r){return t(a,"desktop",r)},setMobileSetting:function e(a,r){return t(a,"mobile",r)}}}t["a"]=Object(h["connect"])(M,D)(R)},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(95);var o=a(16);var l=a.n(o);var c=a(10);var u=new c["b"]("messages");var d={ghost:r["b"].bool};var p={ghost:false};function h(e){var t=e.ghost;return i.a.createElement("div",{className:l()({"c-message_list__unread_divider":true,"c-message_list__unread_divider--ghost":t})},i.a.createElement("hr",{className:"c-message_list__unread_divider__separator","aria-hidden":"true"}),i.a.createElement("span",{className:"c-message_list__unread_divider__label"},u.t("new messages")))}h.displayName="UnreadDivider";h.defaultProps=p;t["a"]=Object(s["pure"])(h)},,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(15);var n=a(23);var i=a(864);var s=a(4);var o=Object(r["b"])("launch workflow builder",function(e,t){var a=t();if(Object(s["isFeatureEnabled"])(a,"feature_builder_can_access")&&Object(s["isFeatureEnabled"])(a,"feature_builder_i18n")){var r=Object(n["c"])(a);e(Object(i["a"])({pathname:"/workflow-builder/"+r,windowOptions:{height:700,width:1024}}))}});o.propTypes=null;t["a"]=o},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(16);var s=a.n(i);var o=a(0);var l=a(444);var c=a(3076);var u=a.n(c);var d={inactive:o["b"].bool,dimension:o["b"].number,team:o["b"].shape({name:o["b"].string,domain:o["b"].string,icon:o["b"].object}).isRequired};var p={inactive:false,dimension:34};var h=function e(t){var a=t.team,r=t.inactive,i=t.dimension;return n.a.createElement("div",{className:"p-ent_workspace_row_item"},n.a.createElement(l["a"],{entityType:"workspace",dimension:i,entityData:a,customClasses:s()("p-ent_workspace_row_item__icon",{"p-ent_workspace_row_item__icon--inactive":r})}),n.a.createElement("div",{className:"p-ent_workspace_row_item__text"},n.a.createElement("div",{className:"p-ent_workspace_row_item__name"},a.name),n.a.createElement("div",{className:"p-ent_workspace_row_item__domain"},a.domain+".slack.com")))};h.displayName="WorkspaceRowItem";h.defaultProps=p;t["a"]=h},function(e,t,a){"use strict";var r=a(195);var n=a(309);var i=a(52);var s=a(15);var o=a(269);var l=a(24);var c=a(17);var u=a(12);var d=a(713);var p=2e4;var h="TICKLE-MS";var v=Object(s["b"])("Ping the message server if necessary",function(e,t){var a=t();var s=Object(l["b"])(a);var v=Object(u["a"])({state:a});if(!s){v.info(h,"Skipping tickle because no user exists");return}if(!Object(i["isConnected"])(a))return;if(Object(c["getMemberManualPresence"])(s)===n["PRESENCE_AWAY"])return;var m=Date.now()-Object(r["g"])(a);if(m<p)return;e(Object(o["send"])({type:"tickle"})).catch(function(a){var r=a&&a.message===d["c"];if(!r){v.error(h,"Send tickle event failed with error = "+a);return}v.warn(h,"Sending tickle event failed; will try again the next time we get reconnected");Object(i["promiseToHaveOpenWebSocket"])(t()).then(function(){v.info(h,"Retrying tickle event that failed earlier");e(Object(o["send"])({type:"tickle"})).then(function(){v.info(h,"Tickle sent successfully after retry")}).catch(function(e){v.error(h,"Tickle retry failed with error: "+e)})})})});t["a"]=v},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(0);var p=a(1);var h=a.n(p);var v=a(31);var m={additionalItemCopy:d["b"].string,item:d["b"].object};var f={additionalItemCopy:"",item:{}};var b=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.additionalItemCopy,r=t.item;var n=r.team.icon.image_44+" 1x, "+r.team.icon.image_88+" 2x";return h.a.createElement("div",{className:"c-lazy_filter_select__team_item",key:"team-list-item-"+r.id},h.a.createElement("img",{alt:"",className:"c-lazy_filter_select__team_list_icon",src:r.team.icon.image_44,srcSet:n}),h.a.createElement("div",{className:"c-lazy_filter_select__team_token_name"},Object(v["getTeamDisplayName"])(r.team)," ",a&&h.a.createElement("span",null," - ",a)))}}]);return t}(p["PureComponent"]);b.displayName="LazyFilterSelectTeamListItem";t["a"]=b;b.defaultProps=f},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(0);var p=a(1);var h=a.n(p);var v=a(31);var m={additionalItemCopy:d["b"].string,item:d["b"].object};var f={additionalItemCopy:"",item:{}};var b=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.additionalItemCopy,r=t.item;return h.a.createElement("div",{className:"c-lazy_filter_select__team_token",key:"team-token-"+r.id},h.a.createElement("img",{alt:"",className:"c-lazy_filter_select__team_token_icon",src:r.team.icon.image_44}),h.a.createElement("div",{className:"c-lazy_filter_select__team_token_name"},Object(v["getTeamDisplayName"])(r.team)," ",a&&h.a.createElement("span",null," - ",a)))}}]);return t}(p["PureComponent"]);b.displayName="LazyFilterSelectTeamToken";t["a"]=b;b.defaultProps=f},function(e,t,a){"use strict";var r=a(0);var n=a(1);var i=a.n(n);var s=a(13);var o=a(1168);var l=a(178);var c=a(568);var u={formattedDescription:r["b"].string};var d={formattedDescription:""};var p=function e(t){var a=t.formattedDescription;var r=Object(n["useCallback"])(function(e){var t=e&&e.target&&e.target.href;if(t&&"A"===e.target.tagName){e.preventDefault();Object(c["a"])(e.target.href)}},[]);if(!a)return null;return i.a.createElement("div",{onClick:r,dangerouslySetInnerHTML:{__html:a}})};p.displayName="BaseFormattedAppDescription";p.defaultProps=d;var h=function e(t,a){var r=a.formattedDescription;return{formattedDescription:Object(o["a"])(t,{messageText:r,teamId:Object(l["getTeamId"])(t)})}};t["a"]=Object(s["connect"])(h)(p)},function(e,t,a){"use strict";var r=a(4);var n=a(11);var i=a(182);var s=function e(t,a){return Object(r["isFeatureEnabled"])(t,"feature_m11n_app_space")&&Object(i["isAppSpaceEnabled"])(t)&&Object(n["isImWithApp"])(t,a)};t["a"]=s},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(13);var o=a(2);var l=a.n(o);var c=a(16);var u=a.n(c);var d=a(22);var p=a(28);var h=a(4);var v=a(1696);var m=a(1553);var f=a(38);var b=a(10);var g=new b["b"]("global_nav");var _={featureGlobalNav:i["b"].bool,featureGlobalNavLayout:i["b"].bool,maybeShowQuickSwitcher:i["b"].func};var y={featureGlobalNav:false,featureGlobalNavLayout:false,maybeShowQuickSwitcher:o["noop"]};var O=function e(t){var a=t.featureGlobalNav,r=t.featureGlobalNavLayout;if(!a)return null;var i=Object(f["a"])()?t.maybeShowQuickSwitcher:v["b"];var s=n.a.createElement(p["c"],{className:"p-global_nav__sidebar_jumper",onClick:i},n.a.createElement(d["b"],{type:"filter",className:"p-global_nav__sidebar_jumper_icon"}),g.t("Go to\u2026",{note:"Used to open the quickswitcher. This label should as short as possible."}));var o=u()("p-global_nav__sidebar",{"p-global_nav__sidebar--relayout":r});return n.a.createElement("div",{className:o},s)};O.displayName="SidebarHeader";O.defaultProps=y;var k=function e(t){return{featureGlobalNav:Object(h["isFeatureEnabled"])(t,"feature_global_nav"),featureGlobalNavLayout:Object(h["isFeatureEnabled"])(t,"feature_global_nav_layout")}};var E=function e(t){return{maybeShowQuickSwitcher:function e(){return t(m["a"].apply(void 0,arguments))}}};t["a"]=Object(s["connect"])(k,E)(O)},function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(15);var n=a(0);var i=a(198);var s=a(850);var o=a(758);var l=Object(r["b"])("toggle the omniswitcher using command+k",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.key;Object(i["isSearchAutocompleteOpen"])(t())?e(Object(o["a"])()):e(Object(s["f"])({key:r}))});l.propTypes={key:n["b"].string.isRequired}},function(e,t,a){"use strict";a.d(t,"a",function(){return b});var r=a(1);var n=a.n(r);var i=a(0);var s=a(2);var o=a.n(s);var l=a(10);var c=a(187);var u=a(128);var d=a(22);var p=a(2400);var h=a.n(p);var v=new l["b"]("comments");var m={toggleList:i["b"].func,commentCount:i["b"].number,expanded:i["b"].bool};var f={toggleList:s["noop"],commentCount:0,expanded:false};function b(e){var t=e.toggleList,a=e.commentCount,r=e.expanded;return n.a.createElement("div",{className:"p-comment_list__toggle_container"},n.a.createElement(c["a"],{onClick:t},v.t("See older comments")),n.a.createElement(u["a"],{className:"p-comment_list__toggle_count_button",onClick:t,"aria-label":v.t("Click to expand")},n.a.createElement(d["b"],{type:"comment-alt"}),n.a.createElement("span",{className:"p-comment_list__toggle_count"},a),r?n.a.createElement(d["b"],{type:"caret-down",className:"p-comment_list__toggle_caret"}):n.a.createElement(d["b"],{type:"caret-right",className:"p-comment_list__toggle_caret"})))}b.displayName="CommentListToggle";b.defaultProps=f},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(0);var v=a(16);var m=a.n(v);var f=a(2);var b=a.n(f);var g=a(87);var _=a(1088);var y=a(1090);var O=a(1564);var k={file:g["a"].File().isRequired,clogLinkClick:h["b"].func,className:h["b"].string,fullWidth:h["b"].bool,onClick:h["b"].func,showActions:h["b"].bool,useRowAction:h["b"].bool,includeRootDownloadAction:h["b"].bool,includeRootStarAction:h["b"].bool,"data-qa":h["b"].string};var E={clogLinkClick:f["noop"],className:null,fullWidth:false,onClick:f["noop"],showActions:true,useRowAction:false,includeRootDownloadAction:true,includeRootStarAction:false,"data-qa":void 0};var C=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}s()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.props.onClick(t,this.props.file)}},{key:"render",value:function e(){var t=this.props,a=t.file,r=t.clogLinkClick,n=t.fullWidth,i=t.showActions,s=t.includeRootDownloadAction,o=t.includeRootStarAction,l=t.useRowAction,c=t["data-qa"];var u=m()("p-contextual_file",this.props.className);return p.a.createElement(_["a"],{file:a,className:u,fullWidth:n,clogLinkClick:r,showActions:i,useRowAction:l,includeRootDownloadAction:s,includeRootStarAction:o,"data-qa":c},p.a.createElement(y["a"],{file:a,onClick:this.onClick},p.a.createElement(O["a"],{file:a})))}}]);return t}(d["PureComponent"]);C.displayName="ContextualFile";C.defaultProps=E;t["a"]=C},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(37);var s=a.n(i);var o=a(26);var l=a.n(o);var c=a(6);var u=a.n(c);var d=a(7);var p=a.n(d);var h=a(8);var v=a.n(h);var m=a(9);var f=a.n(m);var b=a(1);var g=a.n(b);var _=a(0);var y=a(16);var O=a.n(y);var k=a(13);var E=a(2414);var C=a(2);var j=a.n(C);var w=a(10);var S=a(231);var I=a(151);var T=a(24);var A=a(4);var N=a(23);var P=a(290);var R=a(17);var M=a(99);var D=a(135);var x=a(28);var F=a(54);var L=a(289);var B=a(392);var U=a(537);var q=a(96);var G=a(186);var W=a(2403);var H=a.n(W);var V=new w["b"]("user_groups");var K={groupId:_["b"].string,featureSonicUserGroups:_["b"].bool,userGroupMemberIds:_["b"].array,fetchAndUpsertUserGroupMembers:_["b"].func,teamId:_["b"].string,getMemberById:_["b"].func,search:_["b"].func};var z={groupId:void 0,featureSonicUserGroups:false,userGroupMemberIds:[],fetchAndUpsertUserGroupMembers:C["noop"],teamId:void 0,getMemberById:C["noop"],search:C["noop"]};var Y=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={updatedGroupMembers:e.userGroupMemberIds,searchResults:[],searchQuery:"",loading:false,resultFocusIndex:-1,lastKnownResultFocusIndex:-1,displayNoMemberError:false};Object(C["bindAll"])(a,["onSearchInputChange","onClearSearch","setAddMember","setRemoveMember","setListRef","setAddedMembersTitleRef","handleUpKey","handleDownKey","handleEnterKey","onSearchInputFocusIn","onSearchInputFocusOut"]);a.list=null;a.addedMembersTitle=null;a.ADDED_MEMBERS_TITLE_HEIGHT=22;return a}p()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props.groupId;if(a){this.setLoading(true);this.props.fetchAndUpsertUserGroupMembers({groupId:a}).then(function(e){Object(C["isEmpty"])(e)?t.getMembers(""):t.setState(function(){return{updatedGroupMembers:e,loading:false}})})}else this.getMembers("")}},{key:"componentDidUpdate",value:function e(t,a){!Object(C["isEqual"])(this.state.searchResults,a.searchResults||!Object(C["isEqual"])(this.state.searchQuery,a.searchQuery))&&this.list&&this.list.scrollToOffset(0);a.updatedGroupMembers.length!==this.state.updatedGroupMembers.length&&Object(C["isEmpty"])(this.state.updatedGroupMembers)&&this.getMembers("");this.addedMembersTitle&&(this.ADDED_MEMBERS_TITLE_HEIGHT=this.addedMembersTitle.clientHeight)}},{key:"componentWillUnmount",value:function e(){this.keyCommands&&this.keyCommands.reset()}},{key:"onSearchInputChange",value:function e(t){this.state.displayNoMemberError&&this.setDisplayNoMemberError(false);var a=t&&t.target&&t.target.value;if(a){this.getMembers(a);this.setSearchQuery(a);this.setResultFocusIndex(0)}else this.onClearSearch()}},{key:"onClearSearch",value:function e(){Object(C["isEmpty"])(this.state.updatedGroupMembers)&&this.getMembers("");this.setSearchQuery("");this.setResultFocusIndex(0);this.setDisplayNoMemberError(false)}},{key:"onSearchInputFocusIn",value:function e(){this.bindKeyCommands();if(this.state.lastKnownResultFocusIndex<0){this.setLastKnownResultFocusIndex(0);this.setResultFocusIndex(0)}else this.setResultFocusIndex(this.state.lastKnownResultFocusIndex)}},{key:"onSearchInputFocusOut",value:function e(){this.keyCommands&&this.keyCommands.reset();this.setLastKnownResultFocusIndex(this.state.resultFocusIndex);this.setResultFocusIndex(-1)}},{key:"getUpdatedUserGroupMembers",value:function e(){return this.state.updatedGroupMembers}},{key:"setSearchQuery",value:function e(t){this.setState(function(){return{searchQuery:t}})}},{key:"setSearchResults",value:function e(t){this.setState(function(){return{searchResults:t}})}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"setDisplayNoMemberError",value:function e(t){this.setState(function(){return{displayNoMemberError:t}})}},{key:"setRemoveMember",value:function e(t){this.setState(function(e){return{updatedGroupMembers:Object(C["without"])(e.updatedGroupMembers,t)}})}},{key:"setAddMember",value:function e(t){this.setState(function(e){return{updatedGroupMembers:[t].concat(l()(e.updatedGroupMembers))}},this.onClearSearch)}},{key:"setResultFocusIndex",value:function e(t){this.setState(function(){return{resultFocusIndex:t}})}},{key:"setLastKnownResultFocusIndex",value:function e(t){this.setState(function(){return{lastKnownResultFocusIndex:t}})}},{key:"setListRef",value:function e(t){this.list=t}},{key:"setAddedMembersTitleRef",value:function e(t){this.addedMembersTitle=t}},{key:"getMembers",value:function e(t){var a=this;this.setLoading(true);return this.props.search({query:t,options:{entities:{members:{includeSelf:true,onlyLocalTeam:true,includeSlackbot:false,includeBots:false,includeDeleted:true}},allowEmptyQuery:true,sort:{frecency:false,selfFirst:false},limit:40}}).then(function(e){var t=Object(C["filter"])(e,function(e){if(!e)return false;if(Object(R["isGuest"])(e))return false;if(e.enterprise_user){var t=e.enterprise_user.teams;if(!t)return false;if(!Object(C["includes"])(t,a.props.teamId))return false}return true});var r=Object(C["sortBy"])(t,["real_name"]);var n=r.map(function(e){return e.id});a.setSearchResults(n);a.setLoading(false)})}},{key:"getRowProps",value:function e(t){var a=this;if(!this.props.featureSonicUserGroups)return{};var r=V.t("Add");var n=V.t("Remove");var i=this.state.updatedGroupMembers;if(Object(C["includes"])(i,t))return{onClick:function e(){return a.setRemoveMember(t)},text:n,buttonAria:this.formatRowAriaLabel(n,t)};return{onClick:function e(){return a.setAddMember(t)},text:r,buttonAria:this.formatRowAriaLabel(r,t)}}},{key:"getDisplayedListLength",value:function e(){var t=this.state,a=t.searchResults,r=t.searchQuery,n=t.updatedGroupMembers;if(r)return a.length;return n.length?n.length:a.length}},{key:"handleUpKey",value:function e(t){t.preventDefault();var a=this.state.resultFocusIndex;var r=this.getDisplayedListLength();r?this.setResultFocusIndex(0===a?r-1:a-1):this.setResultFocusIndex(0)}},{key:"handleDownKey",value:function e(t){t.preventDefault();var a=this.state.resultFocusIndex;var r=this.getDisplayedListLength();r?this.setResultFocusIndex((a+1)%r):this.setResultFocusIndex(0)}},{key:"handleEnterKey",value:function e(t){if(this.state.resultFocusIndex<0)return;t.preventDefault();var a=this.state,r=a.searchQuery,n=a.searchResults,i=a.updatedGroupMembers,s=a.resultFocusIndex;if(Object(C["isEmpty"])(i)){var o=n[s];this.setSearchQuery("");this.setAddMember(o)}else if(r){var l=n[s];this.setSearchQuery("");Object(C["includes"])(i,l)?this.setRemoveMember(l):this.setAddMember(l)}else{var c=i[s];this.setRemoveMember(c)}}},{key:"bindKeyCommands",value:function e(){var t=[{keys:["up"],handler:this.handleUpKey},{keys:["down"],handler:this.handleDownKey},{keys:["enter"],handler:this.handleEnterKey}];this.keyCommands||(this.keyCommands=new G["a"]);this.keyCommands.bindAll(t)}},{key:"validateUpdatedGroupMemberCount",value:function e(){var t=this.state.updatedGroupMembers.length>0;t||this.setDisplayNoMemberError(true);return t}},{key:"doDisplayGroupMembersList",value:function e(){return!this.state.searchQuery&&!!this.state.updatedGroupMembers.length}},{key:"formatRowAriaLabel",value:function e(t,a){var r=Object(R["getMemberProfileFieldDisplayName"])(this.props.getMemberById(a));return t+" "+r+" "}},{key:"maybeRenderNoMembersAlert",value:function e(){if(!this.props.featureSonicUserGroups)return null;if(!this.state.displayNoMemberError)return null;return g.a.createElement(D["a"],{type:"inline",level:"error",className:"margin_right_150 margin_left_150 margin_bottom_100","data-qa-user-group-error":true},V.t("User groups need to have at least one member."))}},{key:"renderLoadingSpinner",value:function e(){return g.a.createElement("div",{className:"full_height full_width display_flex align_items_center","data-qa-user-group-loading":true},g.a.createElement(q["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderRowButton",value:function e(t){var a=t.text,r=t.buttonAria,i=s()(t,["text","buttonAria"]);return g.a.createElement("div",{className:"p-user_group_member_management__row_button"},g.a.createElement(x["d"],n()({size:"small",type:"outline"},i,{tabIndex:"-1","aria-label":r}),a))}},{key:"renderMemberRow",value:function e(t){var a=t.id,r=t.index;var i=this.getRowProps(a),o=i.onClick,l=s()(i,["onClick"]);var c=O()({"p-user_group_member_management__row_container--active":r===this.state.resultFocusIndex});return g.a.createElement("div",{className:c},g.a.createElement("div",{className:"p-user_group_member_management__row","aria-hidden":true},g.a.createElement("div",{className:"p-user_group_member_management__row_member"},g.a.createElement(L["b"],{id:a,size:"medium",showTooltip:false}))),this.renderRowButton(n()({onClick:o},l)))}},{key:"renderMemberList",value:function e(){var t=this.state,a=t.searchResults,r=t.loading,n=t.updatedGroupMembers;if(r)return this.renderLoadingSpinner();if(this.doDisplayGroupMembersList())return this.renderList({items:n});if(Object(C["isEmpty"])(a))return this.renderEmptyList();return this.renderList({items:a})}},{key:"renderList",value:function e(t){var a=this;var r=t.items;var n=[].concat(r);var i=this.doDisplayGroupMembersList();var s=void 0;s=this.state.resultFocusIndex>-1?n[this.state.resultFocusIndex]:this.state.lastKnownResultFocusIndex>-1?n[this.state.lastKnownResultFocusIndex]:n[0];return g.a.createElement(E["a"],null,function(e){var t=e.width,o=e.height;return g.a.createElement(U["a"],{width:t,height:i?o-a.ADDED_MEMBERS_TITLE_HEIGHT:o,keys:n,ref:a.setListRef,rowRenderer:function e(t){return a.renderMemberRow({id:r[t],index:t})},itemToScroll:s,hideHiddenStopTabs:true})})}},{key:"renderEmptyList",value:function e(){if(!this.props.featureSonicUserGroups)return null;return g.a.createElement("div",{"data-qa-user-group-empty-list":true,className:"p-user_group_member_management__empty"},g.a.createElement("div",{className:"margin_top_100 margin_bottom_100"},V.rt("No matches found for <strong>{searchQuery}</strong>",{searchQuery:this.state.searchQuery})),g.a.createElement(x["d"],{type:"outline",size:"small",onClick:this.onClearSearch},V.t("Clear Search")))}},{key:"renderSearch",value:function e(){if(!this.props.featureSonicUserGroups)return null;var t=O()("p-user_group_member_management__search",{"p-user_group_member_management__search--no_list_title":!this.doDisplayGroupMembersList()});return g.a.createElement("div",{className:t,"data-qa-user-group-member-management-search-container":true},g.a.createElement(F["a"],{className:"bold",text:V.t("Add members"),"data-qa-user-group-member-management-search-label":true},g.a.createElement(B["a"],{placeholder:V.t("Search by name"),icon:"search",autoFocus:true,"aria-controls":"user_group_member_management_list",onChange:this.onSearchInputChange,value:this.state.searchQuery,onFocus:this.onSearchInputFocusIn,onBlur:this.onSearchInputFocusOut,callOnFocusOnAutoFocus:true})))}},{key:"render",value:function e(){return g.a.createElement("div",{className:"overflow_hidden","data-qa-user-group-member-management-body":true},this.maybeRenderNoMembersAlert(),this.renderSearch(),g.a.createElement("div",{className:"p-user_group_member_management__list",id:"user_group_member_management_list","aria-live":"polite"},this.renderMemberList()))}}]);return t}(b["PureComponent"]);Y.displayName="UserGroupMemberManagement";Y.defaultProps=z;var Q=function e(t,a){var r=a.groupId;var n=Object(I["g"])(t,r);var i=Object(M["g"])(n);return{featureSonicUserGroups:Object(A["isFeatureEnabled"])(t,"feature_sonic_user_groups"),userGroupMemberIds:i,teamId:Object(N["c"])(t),getMemberById:function e(a){return Object(T["d"])(t,a)}}};var J={search:P["a"],fetchAndUpsertUserGroupMembers:S["i"]};t["a"]=Object(k["connect"])(Q,J,null,{withRef:true})(Y)},function(e,t,a){"use strict";a.d(t,"a",function(){return o});var r=a(441);var n=a(505);var i=a(67);var s=a(1444);function o(e,t){return function(a,o){var l=Object(i["a"])(o(),e,t);if(!l)return;a(Object(r["a"])({channelId:e,ts:t}));a(Object(n["d"])(l,t));var c=true;a(Object(s["a"])({channelId:e,msg:l,resent:c}))}}},function(e,t,a){"use strict";var r=a(15);var n=a(67);var i=a(19);var s=a(0);var o=a(12);var l=a(901);var c=Object(r["b"])("log message to console (for debugging)",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,s=a.ts;var c=t();var u=Object(n["a"])(c,r,s);var d=Object(i["d"])(c,r);if(u){Object(o["a"])({getState:t}).warn(u);e(Object(l["d"])({message:u,modelObject:d}))}});c.propTypes={channelId:s["b"].string.isRequired,ts:s["b"].string.isRequired};t["a"]=c},function(e,t,a){"use strict";a.d(t,"a",function(){return r});function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,a=e.isStarred,r=e.isEphemeral,n=e.isBroadcast,i=e.isCustomResponse,s=e.isSliHighlight;if(n)return"broadcast";if(t)return"pinned";if(a)return"starred";if(r)return"ephemeral";if(i)return"custom_response";if(s)return"sli_highlight";return}},function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a(1800);function n(e){return Object(r["a"])(e,function(e){return"A"===e.nodeName})}},function(e,t,a){"use strict";a.d(t,"a",function(){return r});function r(e,t){if(!e||!t)return false;if(t(e))return true;return r(e.parentElement,t)}},function(e,t,a){"use strict";a.d(t,"a",function(){return b});var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(112);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(2);var v=a.n(h);var m=a(71);var f=a(228);function b(e){return function(t){p()(a,t);function a(t){n()(this,a);var r=l()(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));r.uniqueId=Object(h["uniqueId"])();r.name=Object(h["snakeCase"])(e.name);r.telemeter=Object(m["a"])();r.logMetrics=r.telemeter&&Object(f["a"])(1);return r}s()(a,[{key:"componentWillMount",value:function e(){var t;this.logMetrics&&this.telemeter.mark("react_"+this.name+"_mount_mark_"+this.uniqueId);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentWillMount",this)&&(t=u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentWillMount",this)).call.apply(t,[this].concat(n))}},{key:"componentDidMount",value:function e(){var t;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentDidMount",this)&&(t=u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentDidMount",this)).call.apply(t,[this].concat(n));this.logMetrics&&this.telemeter.measureAndClear("react_"+this.name+"_mount_mark_"+this.uniqueId,"react_"+this.name+"_mount")}},{key:"componentWillUpdate",value:function e(){var t;this.logMetrics&&this.telemeter.mark("react_"+this.name+"_update_mark_"+this.uniqueId);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentWillUpdate",this)&&(t=u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentWillUpdate",this)).call.apply(t,[this].concat(n))}},{key:"componentDidUpdate",value:function e(){var t;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentDidUpdate",this)&&(t=u()(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentDidUpdate",this)).call.apply(t,[this].concat(n));this.logMetrics&&this.telemeter.measureAndClear("react_"+this.name+"_update_mark_"+this.uniqueId,"react_"+this.name+"_update")}}]);return a}(e)}},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(95);var o=a(2);var l=a.n(o);var c=a(10);var u=a(183);var d=a(28);var p=a(1211);var h=new c["b"]("attachments");var v={isExpanded:i["b"].bool,onClick:i["b"].func,attachmentsOverLimitCount:i["b"].number};var m={isExpanded:false,onClick:o["noop"],attachmentsOverLimitCount:0};var f=function e(t){var a=t.isExpanded,r=t.onClick,i=t.attachmentsOverLimitCount;var s=function e(){return n.a.createElement("b",null,a?h.t("Show fewer attachments",{fallbackHash:"82ec3619e636876bba549869a1e98fc21e6bee00"}):h.t("{count, plural, =1 {+ # more attachment} other {+ # more attachments}}",{count:i,fallbackHash:"61f00263e27b3ffe8a86b728c78ef71614ebe535"}))};return n.a.createElement(u["a"],{enabled:["feature_react_messages"]},n.a.createElement("div",{className:"c-message_attachment"},n.a.createElement(p["a"],null),n.a.createElement("div",{className:"c-message_attachment__body"},n.a.createElement(d["c"],{className:"c-message_attachment__over_limit_button",onClick:r},n.a.createElement("p",{className:"c-message_attachment__over_limit"},s())))))};f.displayName="MessageAttachmentOverLimitButton";f.defaultProps=m;t["a"]=Object(s["pure"])(f)},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(0);var v=a(13);var m=a(2);var f=a.n(m);var b=a(16);var g=a.n(b);var _=a(87);var y=a(21);var O=a(45);var k=a(234);var E=a(865);var C=a(4);var j=a(85);var w=a(19);var S=a(67);var I=a(100);var T=a(23);var A=a(318);var N=a(195);var P=a(1186);var R=a(841);var M=a(1548);var D=a(41);var x=a(577);var F=a(276);var L=a(10);var B=a(398);var U=a(514);var q=a(38);var G=a(777);var W=a(843);var H=a(268);var V=a(1166);var K=a(1550);var z=a(1549);var Y=a(1351);var Q=a(39);var J=a(48);var Z=a(66);var X=a(1819);var $=a(1780);var ee=a(1229);var te=new L["b"]("message");var ae={reactionKey:h["b"].string,fileId:h["b"].string,fileIds:h["b"].arrayOf(h["b"].string),comment:h["b"].string,replies:h["b"].arrayOf(h["b"].shape({ts:h["b"].string,user:h["b"].string})),teamId:h["b"].string.isRequired,replyCount:h["b"].number,ts:h["b"].string,rollup:_["a"].Rollup(),threadTs:h["b"].string,channel:h["b"].object,file:h["b"].object,subtype:h["b"].string,channelId:h["b"].string,theme:h["b"].oneOf(["dense","light"]),isStarred:h["b"].bool,isPinned:h["b"].bool,isEphemeral:h["b"].bool,isFileAuthorExternal:h["b"].bool,isReply:h["b"].bool,canUserReplyToMessage:h["b"].bool,messageContainerType:h["b"].string,editHandler:h["b"].func,unreadHandler:h["b"].func,onMenuOpen:h["b"].func,onMenuClose:h["b"].func,onEmojiPickerOpen:h["b"].func,onEmojiPickerClose:h["b"].func,showComment:h["b"].bool,showShare:h["b"].bool,showReact:h["b"].bool,showJump:h["b"].bool,showMoreActions:h["b"].bool,jumpOrigin:h["b"].string,changeReactionFromUserAction:h["b"].func,pinMessage:h["b"].func,unpinMessage:h["b"].func,updateStar:h["b"].func,featureFileThreads:h["b"].bool,renderMenuBelowTrigger:h["b"].bool,renderOffscreen:h["b"].bool.isRequired,openModal:h["b"].func,previewFile:h["b"].func,showThread:h["b"].func,addReminderForMessage:h["b"].func,openShareDialog:h["b"].func,jumpToMessage:h["b"].func,featureOfflineMode:h["b"].bool,wasRecentlyOnline:h["b"].bool,featureSonicEmoji:h["b"].bool,featureReactAllThreads:h["b"].bool,featureJumpToMessage:h["b"].bool,featureAnnounceOnly:h["b"].bool,clogger:h["b"].object.isRequired,clogLinkClick:h["b"].func,clogThreadEvent:h["b"].func};var re={reactionKey:null,fileId:null,fileIds:null,comment:null,replies:[],replyCount:0,ts:null,rollup:void 0,threadTs:null,channel:null,file:null,subtype:null,channelId:null,theme:"light",isStarred:false,isPinned:false,isEphemeral:false,isFileAuthorExternal:false,isReply:false,canUserReplyToMessage:false,messageContainerType:void 0,editHandler:f.a.noop,unreadHandler:f.a.noop,onMenuOpen:f.a.noop,onMenuClose:f.a.noop,onEmojiPickerOpen:f.a.noop,onEmojiPickerClose:f.a.noop,showComment:true,showShare:true,showReact:true,showJump:false,showMoreActions:true,jumpOrigin:null,changeReactionFromUserAction:f.a.noop,pinMessage:f.a.noop,unpinMessage:f.a.noop,updateStar:f.a.noop,featureFileThreads:false,renderMenuBelowTrigger:true,openModal:f.a.noop,previewFile:f.a.noop,showThread:f.a.noop,addReminderForMessage:f.a.noop,openShareDialog:f.a.noop,jumpToMessage:f.a.noop,featureOfflineMode:false,wasRecentlyOnline:false,featureSonicEmoji:false,featureReactAllThreads:false,featureJumpToMessage:false,featureAnnounceOnly:false,clogLinkClick:f.a.noop,clogThreadEvent:f.a.noop};var ne={x:0,y:-8};var ie={x:4,y:-16};var se={x:50,y:0};var oe=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={moreActionsMenuOpen:false,subscribed:"loading"};Object(m["bindAll"])(a,["onAddReaction","onEmojiSelected","onComment","onCopyLink","onDelete","onEdit","onMarkUnread","onMenuSelectAction","onMoreActionsMenuClose","onMoreActionsMenuOpen","onPin","onRemind","onRemoveBroadcast","onShare","onStar","onJump","onSubscribe","renderMoreActionsMenu"]);return a}s()(t,[{key:"onStar",value:function e(){var t=this.props,a=t.channelId,r=t.ts,n=t.fileId,i=t.fileIds,s=t.featureFileThreads,o=t.comment,l=t.subtype,c=t.isStarred;var u={channel:a,timestamp:r};n&&(u={file:n});if(o&&"file_comment"===l){var d=s&&i&&i[0]||n;u={file_comment:o,file_comment_file:d}}this.props.updateStar(!c,u);var p=c?y["y"].UNSTAR_MESSAGE_BUTTON:y["y"].STAR_MESSAGE_BUTTON;this.trackAction(p);r&&Object(q["a"])()&&this.clogMsgStarClick()}},{key:"onAddReaction",value:function e(t){if(!this.props.reactionKey)return;Object(G["a"])({e:t,rxn_key:this.props.reactionKey});this.trackAction(y["y"].ADD_REACTION_BUTTON)}},{key:"onEmojiSelected",value:function e(t,a){var r=this.props.reactionKey;this.props.changeReactionFromUserAction({key:r,name:a})}},{key:"onComment",value:function e(){if(this.props.fileId&&!this.props.featureFileThreads)this.props.previewFile({fileId:this.props.fileId});else{var t=this.props.threadTs||this.props.ts;this.props.showThread({channelId:this.props.channel.id,threadTs:t})}var a=this.state.subscribed?y["y"].REPLY_TO_THREAD_BUTTON:y["y"].START_A_THREAD_BUTTON;this.trackAction(a)}},{key:"onShare",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.fileId;this.props.fileId&&"file_comment"!==this.props.subtype?this.props.openShareDialog({fileId:n}):this.props.openShareDialog({ts:a,channelId:r});this.trackAction(y["y"].SHARE_MESSAGE_BUTTON)}},{key:"onEdit",value:function e(t){this.props.onMenuClose();this.props.editHandler();t.stopPropagation();this.trackAction(y["y"].EDIT_MESSAGE_BUTTON,true)}},{key:"onDelete",value:function e(){var t=this.props,a=t.channelId,r=t.ts;this.props.openModal({element:p.a.createElement(z["a"],{channelId:a,ts:r})});this.trackAction(y["y"].DELETE_MESSAGE_BUTTON,true)}},{key:"onMarkUnread",value:function e(){this.props.unreadHandler({channelId:this.props.channel.id,unreadTs:this.props.ts});this.trackAction(y["y"].MARK_UNREAD_BUTTON,true)}},{key:"onRemind",value:function e(t){var a=this;var r=this.props,n=r.channel,i=r.ts,s=r.subtype;this.trackAction(y["y"].REMIND_ME_BUTTON,true);return function(){a.props.addReminderForMessage({time:t,message_channel:n.id,message_ts:i,respond_in_channel:"thread_broadcast"===s})}}},{key:"onSubscribe",value:function e(){var t=this.props,a=t.replies,r=t.ts,n=t.channel;var i=this.state.subscribed;var s=a.length&&a[a.length-1].ts;Object(W["d"])(n.id,r,!i,s);var o=i?y["y"].UNFOLLOW_MESSAGE_BUTTON:y["y"].FOLLOW_MESSAGE_BUTTON;this.trackAction(o,true)}},{key:"onPin",value:function e(){var t=this.props,a=t.ts,r=t.channel,n=t.isPinned,i=t.pinMessage,s=t.unpinMessage;if(n){s({ts:a,channelId:r.id});this.trackAction(y["y"].UNPIN_FROM_THIS_CONVERSATION_BUTTON,true)}else{i({ts:a,channelId:r.id});this.trackAction(y["y"].PIN_TO_THIS_CONVERSATION_BUTTON,true)}}},{key:"onCopyLink",value:function e(){var t=this.props,a=t.channel,r=t.ts,n=t.threadTs,i=t.file,s=t.subtype;var o=Object(H["a"])(a.id,r,n);i&&"file_comment"!==s&&(o=i.permalink);Object(F["writeText"])(o);this.trackAction(y["y"].COPY_LINK_BUTTON,true)}},{key:"onJump",value:function e(){var t=this.props,a=t.channel,r=t.ts,n=t.teamId,i=t.isReply,s=t.jumpOrigin,o=t.clogLinkClick,l=t.featureJumpToMessage;var c=this.props.threadTs||this.props.ts;if(l)this.props.jumpToMessage({channelId:a&&a.id,ts:r,threadTs:i&&c});else if(i)this.props.showThread({channelId:a.id,threadTs:c,highlightTs:r,origin:s});else{var u=Object(B["a"])({channelId:a.id,ts:r,threadTs:c});Object(B["d"])(n,u)}this.props.messageContainerType===Q["MESSAGE_CONTAINERS"].THREADS_VIEW&&this.props.featureReactAllThreads&&o("OPEN_IN_CHANNEL")}},{key:"onRemoveBroadcast",value:function e(){var t=this.props,a=t.channelId,r=t.ts;this.props.openModal({element:p.a.createElement(K["a"],{channelId:a,ts:r})});this.trackAction(y["y"].REMOVE_FROM_CONVERSATION_BUTTON,true)}},{key:"onMoreActionsMenuOpen",value:function e(){this.setState(function(){return{moreActionsMenuOpen:true}});this.props.onMenuOpen();this.trackAction(y["y"].MORE_ACTIONS_BUTTON)}},{key:"onMoreActionsMenuClose",value:function e(){this.setState(function(){return{moreActionsMenuOpen:false}});this.props.onMenuClose()}},{key:"onMenuSelectAction",value:function e(t,a){if(a.id===Q["SLACK_ACTION_IDS"].editMessage){this.onEdit(t);return true}return false}},{key:"isAutomated",value:function e(){return Object(x["a"])(this.props.subtype)}},{key:"isTemp",value:function e(){return this.props.ts.indexOf("x")>-1}},{key:"trackAction",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r={action:y["v"].CLICK,ui_element:t};a&&(r.step=y["z"].MORE_ACTIONS_MENU);var n=this.props.clogger;n.track(y["k"].MSG_ACTION,{contexts:{ui_context:r}})}},{key:"clogMsgStarClick",value:function e(){var t=this.props,a=t.channelId,r=t.isStarred,n=t.messageContainerType,i=t.threadTs,s=t.clogger,o=t.clogThreadEvent;var l=r?y["k"].STAR_REMOVE_CLICKED:y["k"].STAR_ADD_CLICKED;var c={channel_id:a,parent_message_id:i};n===Q["MESSAGE_CONTAINERS"].THREADS_VIEW?o({event:l,metadata:c}):s.track(l,c)}},{key:"renderStar",value:function e(){var t=this.props,a=t.fileId,r=t.subtype,n=t.isStarred,i=t.isEphemeral,s=t.channel;if(i||"tombstone"===r)return null;var o="message";a&&(o="file_comment"===r?"file comment":"file");var l=void 0;l=n?"file"===o?te.t("Unstar file"):"file comment"===o?te.t("Unstar file comment"):te.t("Unstar message"):"file"===o?te.t("Star file"):"file comment"===o?te.t("Star file comment"):te.t("Star message");return p.a.createElement(ee["a"],{iconType:n?"small-star-filled":"small-star",label:l,onClick:this.onStar,"data-qa":"star_message",tooltipPosition:s?"top":"top-right"})}},{key:"renderShare",value:function e(){if(!this.props.showShare)return null;var t=this.props,a=t.ts,r=t.subtype,n=t.featureFileThreads,i=t.isEphemeral;if(i||"tombstone"===r||Object(D["isTempTs"])(a))return null;if(n&&"file_comment"===r)return null;var s="file_share"===r||"file_mention"===r?te.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):te.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});return p.a.createElement(ee["a"],{iconType:"share-action",label:s,onClick:this.onShare,"data-qa":"share_message"})}},{key:"renderReaction",value:function e(){if(!this.props.showReact)return null;if("tombstone"===this.props.subtype||this.props.isEphemeral)return null;if("file_comment"===this.props.subtype&&this.props.featureFileThreads)return null;if(this.props.featureSonicEmoji)return p.a.createElement(V["a"],{onEmojiSelected:this.onEmojiSelected,onClick:this.props.onEmojiPickerOpen,onClose:this.props.onEmojiPickerClose,showHandyReactions:true},p.a.createElement(ee["a"],{iconType:"small-reaction",label:te.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),"data-qa":"add_reaction_action"}));return p.a.createElement(ee["a"],{iconType:"small-reaction",label:te.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),onClick:this.onAddReaction,"data-qa":"add_reaction_action"})}},{key:"renderJump",value:function e(){if(!this.props.showJump)return null;if(!this.props.channel)return null;var t=te.t("Jump");(this.props.messageContainerType===Q["MESSAGE_CONTAINERS"].THREADS_VIEW&&this.props.featureReactAllThreads||this.props.messageContainerType===Q["MESSAGE_CONTAINERS"].THREADS_FLEXPANE)&&(t=te.t("Open in channel",{fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"}));return p.a.createElement(ee["a"],{iconType:"jump",label:t,onClick:this.onJump,"data-qa":"jump_to_message"})}},{key:"renderComment",value:function e(){var t=this.props,a=t.showComment,r=t.isEphemeral,n=t.featureAnnounceOnly,i=t.canUserReplyToMessage,s=t.replyCount,o=t.featureFileThreads,l=t.subtype,c=t.fileId,u=t.messageContainerType;var d=s||"thread_broadcast"===l;if(!a)return null;if(this.props.isFileAuthorExternal)return null;if(this.isAutomated()||this.isTemp()||r)return null;if(n&&!i&&!d)return null;if(o&&Object(U["b"])(l))return null;var h=void 0;h=c&&!o?te.t("Add comment",{fallbackHash:"17279ab497dcbdcde85b46254a98e8017a95cebe"}):u===Q["MESSAGE_CONTAINERS"].THREADS_VIEW?te.t("View thread in sidebar"):n&&!i&&d?te.t("View thread"):d?te.t("Reply to thread"):te.t("Start a thread");return p.a.createElement(ee["a"],{iconType:"small-reply",label:h,onClick:this.onComment,ariaHasPopup:null,"data-qa":"start_thread"})}},{key:"renderEllipsis",value:function e(){var t=this.props,a=t.renderMenuBelowTrigger,r=t.channel,n=t.featureOfflineMode,i=t.wasRecentlyOnline,s=t.showMoreActions;if(!r||!s)return null;var o=te.t("More actions",{fallbackHash:"3a91b1007dce1af87db6afdb266966dd5d7a3df1"});n&&!i&&(o=p.a.createElement(Y["a"],{tooltipLabel:te.t("More actions")}));return p.a.createElement(Z["e"],{renderMenu:this.renderMoreActionsMenu,position:a?"right-bottom":"top-right",allowanceX:a?se.x:0,offsetX:a?ie.x:ne.x,offsetY:a?ie.y:ne.y,onOpen:this.onMoreActionsMenuOpen,onClose:this.onMoreActionsMenuClose},p.a.createElement(ee["a"],{iconType:"small-ellipsis",label:o,tooltipPosition:"top-right","data-qa":"more_message_actions"}))}},{key:"renderMoreActionsMenu",value:function e(t){var a=this.props,r=a.channel,n=a.ts,i=a.messageContainerType,s=a.rollup;var o=t.onTriggerClose,l=t.onMenuItemSelected;return p.a.createElement(X["a"],{rollup:s,ts:n,channelId:r.id,onSelectAction:this.onMenuSelectAction,onTriggerClose:o,onMenuItemSelected:l,messageContainerType:i})}},{key:"render",value:function e(){var t=g()("c-message__actions",{"c-message__actions--menu-showing":this.state.moreActionsMenuOpen,"c-message__actions--dense":"dense"===this.props.theme,"c-message__actions--offscreen":this.props.renderOffscreen});var a=te.t("Message actions");return p.a.createElement($["a"],{className:t,ariaLabel:a},this.renderReaction(),this.renderJump(),this.renderComment(),this.renderShare(),this.renderStar(),this.renderEllipsis())}}]);return t}(d["PureComponent"]);oe.displayName="MessageActions";oe.defaultProps=re;var le=function e(t,a){var r=a.fileId,n=a.channelId,i=a.ts;var s=Object(w["d"])(t,n);var o=Object(S["a"])(t,n,i);return{channel:s,file:Object(j["getFileById"])(t,r),isFileAuthorExternal:Object(j["isFileAuthorExternal"])(t,r),featureFileThreads:Object(C["isFeatureEnabled"])(t,"feature_file_threads"),featureSonicEmoji:Object(C["isFeatureEnabled"])(t,"feature_sonic_emoji"),teamId:Object(T["c"])(t),clogger:Object(O["a"])({state:t}),featureOfflineMode:Object(C["isFeatureEnabled"])(t,"feature_offline_mode"),wasRecentlyOnline:Object(N["h"])(t),canUserReplyToMessage:Object(D["canReplyOrComment"])(t,{message:o,channel:s}),featureReactAllThreads:Object(C["isFeatureEnabled"])(t,"feature_react_all_threads"),featureJumpToMessage:Object(C["isFeatureEnabled"])(t,"feature_jump_to_message"),featureAnnounceOnly:Object(C["isFeatureEnabled"])(t,"feature_announce_only")}};var ce={changeReactionFromUserAction:A["changeReactionFromUserAction"],pinMessage:k["pinMessage"],unpinMessage:k["unpinMessage"],updateStar:E["a"],openModal:J["openModal"],previewFile:function e(){return I["c"].apply(void 0,arguments)},showThread:I["l"],addReminderForMessage:M["a"],openShareDialog:P["a"],jumpToMessage:function e(){return R["a"].apply(void 0,arguments)}};t["a"]=Object(v["connect"])(le,ce)(oe)},function(e,t,a){"use strict";a.d(t,"a",function(){return o});var r=a(10);var n=new r["b"]("message");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentUserId,a=e.pinnedBy,r=e.renderPinnedBy;if(a){if(a===t)return n.t("Pinned by you");return n.rt("Pinned by {member}",{member:r(a)})}return n.t("Pinned")}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.long,a=void 0!==t&&t,r=e.renderStarButton,i=e.featureMessageLabelsCopy;if(a)return n.rt("<star>Added to your starred items</star>",null,r);if(i)return n.rt("<star>Starred</star>",null,r);return n.rt("<star>starred</star>",null,r)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,a=e.isStarred,r=e.isEphemeral,o=e.isBroadcast,l=e.isCustomResponse,c=e.isSliHighlight,u=e.isSelfIm,d=e.isSlackbotIm,p=e.currentUserId,h=e.pinnedBy,v=e.renderPinnedBy,m=e.renderStarButton,f=e.renderHighlight,b=e.renderBroadcast,g=e.featureMessageLabelsCopy;if(r){if(!u&&!d)return n.t("Only visible to you");return null}if(g&&o){if(t&&a)return n.rt("<a>Also sent to the channel</a> \u2219 {pinned} \u2219 {starred}",{pinned:i({currentUserId:p,pinnedBy:h,renderPinnedBy:v}),starred:s({renderStarButton:m,featureMessageLabelsCopy:g}),fallbackHash:"d2f0c6a83913776accbe386c64ce06300680f44f"},b);if(a)return n.rt("<a>Also sent to the channel</a> \u2219 {starred}",{starred:s({renderStarButton:m,featureMessageLabelsCopy:g}),fallbackHash:"aead0d7a1eed4a8c18d29d9377a3f4fabc60f2cc"},b);if(t)return n.rt("<a>Also sent to the channel</a> \u2219 {pinned}",{pinned:i({currentUserId:p,pinnedBy:h,renderPinnedBy:v}),fallbackHash:"b25a074514a36f2157703e7f0f332143878f55a8"},b);return n.rt("<a>Also sent to the channel</a>",{fallbackHash:"5ee7c5390f0e1abffe537265bbbbb3316238001a"},b)}if(l){if(t&&a)return n.rt("{pinned} \u2219 {starred} \u2219 Custom response",{pinned:i({currentUserId:p,pinnedBy:h,renderPinnedBy:v}),starred:s({renderStarButton:m,featureMessageLabelsCopy:g})});if(a)return n.rt("{starred} \u2219 Custom response",{starred:s({long:true,renderStarButton:m,featureMessageLabelsCopy:g})});if(t)return n.rt("{pinned} \u2219 Custom response",{pinned:i({currentUserId:p,pinnedBy:h,renderPinnedBy:v})});return n.t("Custom response")}if(c){if(t&&a)return n.rt("{pinned} \u2219 {starred} \u2219 {highlight}",{highlight:f(),pinned:i({currentUserId:p,pinnedBy:h,renderPinnedBy:v}),starred:s({renderStarButton:m,featureMessageLabelsCopy:g})});if(a)return n.rt("{starred} \u2219 {highlight}",{highlight:f(),starred:s({long:true,renderStarButton:m,featureMessageLabelsCopy:g})});if(t)return n.rt("{pinned} \u2219 {highlight}",{highlight:f(),pinned:i({currentUserId:p,pinnedBy:h,renderPinnedBy:v})});return n.rt("{highlight}",{highlight:f()})}if(t&&a)return n.rt("{pinned} \u2219 {starred}",{pinned:i({currentUserId:p,pinnedBy:h,renderPinnedBy:v}),starred:s({renderStarButton:m,featureMessageLabelsCopy:g})});if(t)return i({currentUserId:p,pinnedBy:h,renderPinnedBy:v});if(a)return s({long:true,renderStarButton:m,featureMessageLabelsCopy:g});return null}},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(0);var p=a(1);var h=a.n(p);var v=a(13);var m=a(16);var f=a.n(m);var b=a(2);var g=a.n(b);var _=a(329);var y=a(50);var O=a(10);var k=a(22);var E=a(28);var C=a(141);var j=a(66);var w=new O["b"]("message");var S={channelId:d["b"].string.isRequired,ts:d["b"].string.isRequired,isHovered:d["b"].bool,sliHighlight:d["b"].shape({loading:d["b"].bool,isHighlight:d["b"].bool,feedbackOptions:d["b"].object,justification:d["b"].string,feedback:d["b"].string}),onSliHighlightsDefaultFeedback:d["b"].func,onSliHighlightsSecondaryFeedbackOption:d["b"].func};var I={isHovered:false,sliHighlight:null,onSliHighlightsDefaultFeedback:g.a.noop,onSliHighlightsSecondaryFeedbackOption:g.a.noop};var T=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSliHighlightsFeedbackDefaultPositive=a.onSliHighlightsFeedbackDefaultPositive.bind(a);a.onSliHighlightsFeedbackDefaultNegative=a.onSliHighlightsFeedbackDefaultNegative.bind(a);a.renderNegativeFeedbackMenu=a.renderNegativeFeedbackMenu.bind(a);return a}s()(t,[{key:"onSliHighlightsFeedbackDefaultPositive",value:function e(){if(this.props.sliHighlight.feedback)return;this.props.onSliHighlightsDefaultFeedback(true)}},{key:"onSliHighlightsFeedbackDefaultNegative",value:function e(){if(this.props.sliHighlight.feedback)return;this.props.onSliHighlightsDefaultFeedback(false)}},{key:"renderPositiveHighlightLabel",value:function e(){return h.a.createElement("span",null,h.a.createElement("span",{className:"c-message__label__highlight_title"},w.t("Highlight")),(this.props.sliHighlight.justification||this.props.isHovered)&&" \u2014 ",this.renderFeedbackControls())}},{key:"renderFeedbackControls",value:function e(){var t=this.props,a=t.isHovered,r=t.sliHighlight;var n="default_positive"===r.feedback;if(a){var i=f()({"c-message__label__highlight_positive":true,"c-message__label__highlight_positive--active":n});var s=f()({"c-message__label__highlight_negative":true,"c-message__label__highlight_negative--inactive":n});return h.a.createElement("span",null,w.t("Is this helpful?"),h.a.createElement(y["c"],{tip:n?w.t("Thank you!"):w.t("This was helpful")},h.a.createElement(E["c"],{className:i,onClick:this.onSliHighlightsFeedbackDefaultPositive},h.a.createElement(k["b"],{type:"thumbs-up",size:"inherit",inline:true}))),h.a.createElement(y["c"],{tip:w.t("This wasn\u2019t helpful")},h.a.createElement(E["c"],{className:s,onClick:this.onSliHighlightsFeedbackDefaultNegative},h.a.createElement(k["b"],{type:"thumbs-down",size:"inherit",inline:true}))))}return h.a.createElement(C["a"],{text:this.props.sliHighlight.justification})}},{key:"renderNegativeHighlightLabel",value:function e(){return h.a.createElement("span",null,h.a.createElement("strong",null,w.t("What\u2019s not working about this highlight?"))," ",w.t("Let us know, and we\u2019ll adjust."),"\xa0",h.a.createElement(j["e"],{renderMenu:this.renderNegativeFeedbackMenu,position:"right",offsetX:0,offsetY:0},h.a.createElement(E["c"],{className:"c-message__label__feedback_dropdown btn_unstyle sk_fill_blue"},w.t("Give Feedback")," ",h.a.createElement(k["b"],{type:"chevron-down",inline:true}))))}},{key:"renderNegativeFeedbackMenu",value:function e(t){var a=this;var r=this.props.sliHighlight.feedbackOptions;if(g.a.isEmpty(r))return null;return h.a.createElement(j["f"],t,g.a.map(r.negative,function(e){return h.a.createElement(j["b"],{key:e.args.ts,label:h.a.createElement(C["a"],{text:e.text,noLinking:true,showTooltips:false}),onSelected:function t(){return a.props.onSliHighlightsSecondaryFeedbackOption(e.args)}})}))}},{key:"render",value:function e(){var t=this.props.sliHighlight;if(!t.feedback||"default_positive"===t.feedback)return this.renderPositiveHighlightLabel();return this.renderNegativeHighlightLabel()}}]);return t}(p["PureComponent"]);T.displayName="SliHighlightsMessageLabel";T.defaultProps=I;function A(e,t){var a=t.channelId,r=t.ts,n=t.sliHighlight;return{onSliHighlightsDefaultFeedback:function t(i){return e(Object(_["setFeedbackForHighlight"])({channelId:a,ts:r,feedback:i?"default_positive":"default_negative",leftFeedback:i,args:n.feedbackOptions[i?"default_positive":"default_negative"].args,requestId:n.requestId}))},onSliHighlightsSecondaryFeedbackOption:function t(i){return e(Object(_["setFeedbackForHighlight"])({channelId:a,ts:r,feedback:"negative",leftFeedback:true,args:i,requestId:n.requestId}))}}}t["a"]=Object(v["connect"])(null,A)(T)},function(e,t,a){"use strict";var r=a(0);var n=a(15);var i=a(358);var s=Object(n["b"])("Start editing the last message in a given channel",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,s=a.viewContext;var o=t();var l=Object(i["getLastEditableMessageInChannel"])(o,{channelId:r,threadTs:n});if(!l)return false;e(Object(i["maybeStartEditingMessage"])({channelId:r,ts:l.ts,viewContext:s,scroll:true}));return true});s.propTypes={channelId:r["b"].string.isRequired,threadTs:r["b"].string,viewContext:r["b"].string};t["a"]=s},function(e,t,a){"use strict";var r=a(107);var n=a.n(r);var i=a(39);var s=a(393);var o=a(1048);t["a"]=function(e,t){var a=t.featureWysiwygComposer;if(!e)return false;var r=Object(s["a"])(e);if(!r.trim())return false;if(a){if(Object(o["a"])(new n.a(e.contents))>i["MAX_MESSAGE_INPUT_LENGTH"])return false}else if(r.length>i["MAX_MESSAGE_INPUT_LENGTH"])return false;return true}},function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a(1068);var n=a(1810);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.e,a=e.isMenuVisible,i=void 0!==a&&a;if(!t)return false;if(i)return false;if(Object(r["a"])(t.target))return false;if(!Object(n["a"])(t))return false;return true}},function(e,t,a){"use strict";t["a"]=function(e){if(!e)return false;var t=e.getAttribute("data-contenteditable-override");if(t)return"true"===t;return"true"===e.contentEditable}},function(e,t,a){"use strict";t["a"]=function(e){if(!e)return false;if(e.metaKey||e.ctrlKey)return false;return e.key&&1===e.key.length}},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(16);var o=a.n(s);var l=a(10);var c=a(50);var u=a(22);var d=a(3227);var p=a.n(d);var h=new l["b"]("msg_input");var v={tooltip:i["b"].string,padding:i["b"].string,border:i["b"].bool,featureAnnounceOnly:i["b"].bool};var m={tooltip:null,border:false,padding:void 0,featureAnnounceOnly:false};var f=function e(t){var a=t.tooltip,r=t.border,i=t.padding,s=t.featureAnnounceOnly;if(!s)return null;var l=o()("p-message_input_announce_only_roadblock",{"p-message_input_announce_only_roadblock--border":r,"p-message_input_announce_only_roadblock--large_padding":"large"===i});return n.a.createElement("div",{className:l},n.a.createElement(u["b"],{type:"emoji-objects",className:"p-message_input_announce_only_roadblock__icon",inline:true}),h.t("Read-only"),a&&n.a.createElement(c["c"],{position:"top-right",tip:a},n.a.createElement(u["b"],{type:"question-circle",className:"p-message_input_announce_only_roadblock__tip",inline:true})))};f.displayName="MessageInputAnnounceOnlyRoadblock";f.defaultProps=m;t["a"]=f},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(112);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(3);var v=a.n(h);var m=a(1);var f=a.n(m);var b=a(0);var g=a(2);var _=a.n(g);var y=a(537);var O=a(1046);function k(e){var t={};for(var a=0;a<e.length;a++)t[e[a].key]={index:e[a].index,next:_.a.get(e[a+1],"key")};return t}var E=v()({},y["a"].propTypes,{stickyItems:b["b"].arrayOf(b["b"].shape({key:b["b"].string,index:b["b"].number})),stickyOffsetTop:b["b"].number,stickyZIndex:b["b"].number});var C=v()({},y["a"].defaultProps,{stickyItems:[],stickyOffsetTop:0,stickyZIndex:null});var j=function(e){p()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.stickyItems=k(e.stickyItems);return a}s()(t,[{key:"componentWillReceiveProps",value:function e(a){u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillReceiveProps",this).call(this,a);this.stickyItems=k(a.stickyItems)}},{key:"renderItem",value:function e(a,r){if(!(a in this.stickyItems))return u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItem",this).call(this,a,r);var n=0===r?-100:this.getTop(a);var i=this.layout.getHeight(a);var s=this.layout.getHeightValidity(a);var o=this.getContentHeight();var l=this.stickyItems[a].next;var c=l?this.getTop(l):o;var d=Math.max(0,o-c);var p=this.state.activeItem===a;var h=null===this.state.activeItem&&this.state.hasKeyboardFocus&&this.state.initialActiveItem===a;var v=this.state.mouseDownTargetItem===a;var m=this.state.hoveredItem===a;var b=this.props,g=b.getAriaLabelForRow,_=b.isItemAriaExpanded;var y=g&&g(r,{hasFocus:p});var k=_&&_(a,r);var E=true===k?this.props.itemAriaControls:void 0;return f.a.createElement("div",{key:""+a+n+d,className:"c-virtual_list__sticky_container",role:"presentation",style:{top:n,bottom:d}},f.a.createElement(O["a"],{id:a,height:i,validity:s,className:"c-virtual_list__item--sticky",style:{top:this.props.stickyOffsetTop,zIndex:this.props.stickyZIndex},role:this.props.itemRole,ariaLabel:y,ariaExpanded:k,ariaControls:E,hasFocus:p,hasFocusWithin:h,isMouseDownOnItem:v,onHeightChange:this.setHeight,onFocusEnter:this.onItemFocusEnter,onFocusWithin:this.onItemFocusWithin,onMouseOver:this.onItemMouseOver,onMouseLeave:this.onItemMouseLeave,onMouseDown:this.onItemMouseDown,onMouseUp:this.onItemMouseup},this.props.rowRenderer(r,{hasFocus:p,isHovered:m,isExpanded:k})))}},{key:"renderItems",value:function e(){var a=u()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this);var r=this.state.start;var n=_.a.sortedIndexBy(this.props.stickyItems,{index:r},function(e){return e.index})-1;var i=this.props.stickyItems[n];i&&a.unshift(this.renderItem(i.key,i.index));return a}}]);return t}(y["a"]);t["a"]=j;j.propTypes=E;j.defaultProps=C},function(e,t,a){"use strict";var r=a(26);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(6);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var h=a(112);var v=a.n(h);var m=a(9);var f=a.n(m);var b=a(1);var g=a.n(b);var _=a(10);var y=a(1812);var O=a(3231);var k=a.n(O);var E=new _["b"]("messages");var C=20;var j=function(e){f()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.pendingUpdate=null;a.recomputeOffsets(e);a.overscan=Math.max(200,e.height/2);return a}u()(t,[{key:"componentDidUpdate",value:function e(){var a;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];(a=v()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this)).call.apply(a,[this].concat(n));0===this.props.keys.length&&this.loadMore();this.layout.setBottomMargin(this.getLoadingOffsetBottom());this.pendingUpdate=false}},{key:"getOffset",value:function e(){var t=this.getLoadingOffsetTop();return this.startTop-t}},{key:"getLoadingOffsetTop",value:function e(){if(!this.props.keys.length)return 0;if(this.props.reachedStart&&0===this.state.start)return 0;if(this.layout.getTotalHeight()<=this.props.height)return 0;if(0!==this.state.start)return 96;return 56}},{key:"getLoadingOffsetBottom",value:function e(){if(!this.props.keys.length)return 0;if(this.props.reachedEnd&&this.state.end===this.props.keys.length)return 0;return 96}},{key:"getScrollTop",value:function e(){if("number"===typeof this.scrollTop)return this.scrollTop;if("number"===typeof this.pendingScrollTop)return this.pendingScrollTop;return v()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getScrollTop",this).call(this)+this.getOffset()}},{key:"getContentHeight",value:function e(){return this.endBottom-this.getOffset()+this.getLoadingOffsetBottom()}},{key:"getTop",value:function e(t){return this.layout.getTop(t)-this.getOffset()}},{key:"getBottom",value:function e(t){return this.layout.getBottom(t)-this.getOffset()}},{key:"setScrollTop",value:function e(a){var r=a<this.getOffset();var n=a+this.props.height>this.endBottom+this.getLoadingOffsetBottom();if(r&&0!==this.state.start||n&&this.state.end!==this.props.keys.length){this.scrollTop=a;this.relayout();return}v()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,a-this.getOffset())}},{key:"scrollToOffset",value:function e(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.animate,i=r.absolute;if(!this.node)return;if(this.pendingUpdate)return;var s=i?a:a-this.getOffset();!i&&s>0&&s<this.getLoadingOffsetTop()&&(s=0);var o=this.bracketScrollTop(s);if(!i&&o!==s){this.setScrollTop(a);return}if(n){this.scrollAnimation=this.node.scrollWithAnimation(o);return}v()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,o)}},{key:"bracketScrollTop",value:function e(t){return Math.max(0,Math.min(this.getContentHeight()-this.props.height,t))}},{key:"resetRendered",value:function e(){this.overscan=this.props.height/2}},{key:"loadMore",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.start;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.end;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getScrollTop();var i=this.layout.getTotalHeight();var s=0===t&&n<1;var o=a===r.keys.length&&n+r.height>i-1;var l=!r.keys.length||i<=r.height||s;var c=!r.keys.length||i<=r.height||o;if(l&&c)return r.loadAround();if(l)return r.loadPre();if(c)return r.loadPost();return false}},{key:"relayout",value:function e(){var t=this;this.setState(function(e,a){if(a.isLoading)return null;var r=e.start,n=e.end;var i=t.startKey;var o=t.endKey;t.recomputeOffsets(a,r,n);var l=t.node?t.node.scrollTop():0;var c=t.getScrollTop();var u=l-1<=0||c-1<=t.getOffset();var d=l+1>=t.getContentHeight()-a.height||c+1>=t.endBottom-a.height;var p={start:r,end:n};if(t.startKey!==i||t.endKey!==o||u&&0!==r||d&&n!==a.keys.length){e.scrolling&&(t.overscan=8e3);p=t.computeBounds(a,c);var h=p,v=h.start,m=h.end;t.recomputeOffsets(a,v,m);u=c-1<=t.getOffset();d=c+a.height+1>=t.endBottom+t.getLoadingOffsetBottom()}(u&&0===p.start||d&&p.end===a.keys.length||t.layout.getTotalHeight()<a.height&&0===p.start)&&t.loadMore(r,n,a);var f=t.layout.getTops();if(p.start===r&&p.end===n&&f===e.tops)return null;t.scrollAnimation&&t.scrollAnimation.cancel();t.pendingUpdate=true;t.scrollTop=c;return s()({},p,{tops:f})})}},{key:"recomputeOffsets",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.start;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.end;var n=this.layout.getTotalHeight()<=t.height;this.startKey=t.keys[a];this.endKey=t.keys[r-1];this.startTop=n?0:this.layout.getTop(this.startKey)||0;this.endBottom=this.layout.getBottom(this.endKey)||0}},{key:"computeBounds",value:function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var r=arguments[1];var n=r-this.overscan;var i=r+a.height+this.overscan;var s=v()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBounds",this).call(this,n,i);return this.snapBounds(a,s)}},{key:"snapBounds",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var a=arguments[1];var r=a.start,n=a.end;return{start:r<C?0:r,end:t.keys.length-n<C?t.keys.length:n}}},{key:"renderLoading",value:function e(t){var a=t?{top:0,paddingTop:40}:{bottom:0,paddingBottom:15};var r=t?"degradedLoadingTop":"degradedLoadingBottom";return g.a.createElement("div",{key:r,className:"p-degraded_list__loading",style:a},E.rt("Loading history..."))}},{key:"renderItems",value:function e(){var a=v()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this);var r=this.props.keys.length>1&&(!this.props.reachedStart||this.state.start>0);var i=this.props.keys.length>1&&(!this.props.reachedEnd||this.state.end<this.props.keys.length);return[r&&this.renderLoading(true)].concat(n()(a),[i&&this.renderLoading(false)])}}]);return t}(y["a"]);t["a"]=j},function(e,t,a){"use strict";a.d(t,"a",function(){return r});function r(){var e=window.location.search||"";if(e.indexOf("force_degraded_list=1")>0)return true;if(e.indexOf("force_infinite_list=1")>0)return false;var t=window.navigator.userAgent;if(-1!==t.indexOf("Firefox"))return true;if(-1!==t.indexOf("Windows"))return true;if(-1!==t.indexOf("Linux"))return true;return false}},function(e,t,a){"use strict";var r=a(1688);t["a"]=r["a"]},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(95);var o=a(22);var l={appIcon:i["b"].string.isRequired,appName:i["b"].string.isRequired,teamIcon:i["b"].string.isRequired,teamName:i["b"].string.isRequired};var c=function e(t){var a=t.appIcon,r=t.appName,i=t.teamIcon,s=t.teamName;return n.a.createElement("div",{className:"p-oauth_flow__logos margin_auto display_flex"},n.a.createElement("img",{className:"p-oauth_flow__logo_img",src:a,alt:r,title:r}),n.a.createElement("span",{className:"p-oauth_flow__arrows flex_one sk_light_grey"},n.a.createElement(o["a"],{type:"arrow-large-left",className:"p-oauth_flow__left_directional_arrow--secondary full_width inline_block position_relative"}),n.a.createElement(o["a"],{type:"arrow-large-right",className:"p-oauth_flow__right_directional_arrow--secondary full_width inline_block position_relative"})),n.a.createElement("img",{className:"p-oauth_flow__logo_img",src:i,alt:r,title:s}))};c.displayName="OAuthPageLogos";t["a"]=Object(s["pure"])(c)},function(e,t,a){"use strict";a.d(t,"a",function(){return l});var r=a(2);var n=a.n(r);var i=a(41);var s=a(67);function o(e,t,a){var r=Object(s["a"])(e,t,a);return r&&!Object(i["isTempMsg"])(r)&&!Object(i["isEphemeral"])(r)}function l(e,t,a){return Object(r["max"])(Object(r["filter"])(a,function(a){return o(e,t,a)}))}},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(1);var v=a.n(h);var m=a(0);var f=a(13);var b=a(16);var g=a.n(b);var _=a(2);var y=a.n(_);var O=a(10);var k=a(151);var E=a(4);var C=a(99);var j=a(100);var w=a(1701);var S=a(3306);var I=a.n(S);var T={id:m["b"].string.isRequired,name:m["b"].string.isRequired,description:m["b"].string,isActive:m["b"].bool,handle:m["b"].string,userCount:m["b"].number.isRequired,canEditUserGroups:m["b"].func.isRequired,canCreateAndDeleteUserGroups:m["b"].func.isRequired,featureSonicUserGroups:m["b"].bool,onClick:m["b"].func,showUserGroupDetails:m["b"].func.isRequired,featureLazyUserGroups:m["b"].bool};var A={description:null,isActive:false,handle:void 0,featureSonicUserGroups:false,featureLazyUserGroups:false,onClick:_["noop"]};var N=new O["b"]("user_groups");var P=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(a,["onRowClick","onMenuClick","renderContextMenu"]);return a}l()(t,[{key:"onRowClick",value:function e(t){var a=this.props,r=a.id,n=a.isActive;n&&this.props.showUserGroupDetails({groupId:r});this.props.onClick(t,r)}},{key:"onMenuClick",value:function e(t){var a=this.props.id;this.props.onClick(t,a)}},{key:"renderName",value:function e(){var t=this.props,a=t.name,r=t.isActive,n=t.featureSonicUserGroups;if(!n)return null;var i=g()("black",{sk_dark_gray:!r});var s=r?a:N.t("{name} (Deactivated)",{name:a});return v.a.createElement("div",{className:i},s)}},{key:"renderDescription",value:function e(){var t=this.props,a=t.description,r=t.isActive;if(!a)return null;var n=g()("overflow_ellipsis",{sk_dark_gray:!r});return v.a.createElement("div",{className:n},a)}},{key:"renderHandle",value:function e(){var t=this.props.handle;if(!t)return null;return v.a.createElement("span",{className:"p-user_group_row__handle"},t)}},{key:"renderContextMenu",value:function e(t){return v.a.createElement(w["c"],{menuProps:t,groupId:this.props.id,onClick:this.onMenuClick})}},{key:"render",value:function e(){var t=this.props,a=t.userCount,r=t.isActive,n=t.featureSonicUserGroups;if(!n)return null;var i=g()("p-user_group_row",{"p-user_group_row--inactive":!r});var s={onClick:this.onRowClick,renderMenu:this.renderContextMenu,className:i,isContextButtonVisible:this.props.canEditUserGroups()||this.props.canCreateAndDeleteUserGroups()};return v.a.createElement(w["a"],s,this.renderName(),this.renderDescription(),this.renderHandle(),v.a.createElement("span",{className:"p-user_group_row__count"},N.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:a})))}}]);return t}(h["PureComponent"]);P.displayName="UserGroupRow";P.defaultProps=A;var R=function e(t,a){var r=a.id;var i=Object(k["g"])(t,r);var s={canEditUserGroups:function e(){return Object(C["c"])(t)},canCreateAndDeleteUserGroups:function e(){return Object(C["b"])(t)},featureSonicUserGroups:Object(E["isFeatureEnabled"])(t,"feature_sonic_user_groups"),featureLazyUserGroups:Object(E["isFeatureEnabled"])(t,"feature_lazy_user_groups")};if(!i)return s;return n()({name:Object(C["h"])(i),description:Object(C["e"])(i),handle:Object(C["f"])(i),userCount:Object(C["l"])(i),isActive:Object(C["r"])(i)},s)};var M={showUserGroupDetails:j["n"]};t["a"]=Object(f["connect"])(R,M)(P)},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(37);var s=a.n(i);var o=a(26);var l=a.n(o);var c=a(6);var u=a.n(c);var d=a(7);var p=a.n(d);var h=a(8);var v=a.n(h);var m=a(9);var f=a.n(m);var b=a(1);var g=a.n(b);var _=a(0);var y=a(13);var O=a(2);var k=a(21);var E=a(45);var C=a(528);var j=a(477);var w=a(15);var S=a(4);var I=a(10);var T=a(570);var A=a(443);var N=a(87);var P=Object(w["b"])("Record a frecency event for some message action + maybe a query",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.action,n=a.query,i=void 0===n?"":n;var s=r.frecencyId;Object(S["isFeatureEnabled"])(t(),"feature_app_actions_fe_refactor")?e(Object(A["c"])({id:s,text:i})):Object(T["c"])({id:s},i)});P.propTypes={action:N["a"].MessageAction.isRequired,query:_["b"].string};var R=P;var M=a(39);var D=a(14);var x=a(67);var F=a(41);var L=a(315);var B=new I["b"]("message");var U={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var q=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(x["a"])(e,r,a);if(!n)return null;var i=Object(S["isFeatureEnabled"])(e,"feature_file_threads");if(!Object(F["canAddReaction"])(n,i))return null;return{id:M["SLACK_ACTION_IDS"].addReaction,name:B.t("Add reaction"),iconType:"add-reaction","data-qa":"add_reaction_menu_item",frecencyId:Object(L["f"])("add_reaction"),uiElement:k["y"].ADD_REACTION_BUTTON}});q.propTypes=U;var G=q;var W=a(85);var H=a(19);var V=new I["b"]("message");var K={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var z=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(x["a"])(e,r,a);if(!n)return null;var i=Object(S["isFeatureEnabled"])(e,"feature_file_threads");var s=i?null:n.file;if(Object(W["isFileAuthorExternal"])(e,s))return null;var o=Object(H["d"])(e,r);if(!Object(F["canReplyOrComment"])(e,{message:n,channel:o}))return null;var l=V.t("Start a thread");var c=k["y"].START_A_THREAD_BUTTON;if(s&&!i)l=V.t("Add comment",{fallbackHash:"17279ab497dcbdcde85b46254a98e8017a95cebe"});else if(Object(F["isThreadBroadcast"])(n)||Object(F["getReplyCount"])(n)){l=V.t("Reply to thread");c=k["y"].REPLY_TO_THREAD_BUTTON}return{id:M["SLACK_ACTION_IDS"].comment,name:l,iconType:"comment-alt","data-qa":"start_thread_menu",frecencyId:Object(L["f"])("thread_reply"),uiElement:c}});z.propTypes=K;var Y=z;var Q=new I["b"]("message");var J={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var Z=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(x["a"])(e,r,a);if(!n)return null;var i=Object(H["d"])(e,r);if(!Object(F["canCopyLink"])(e,{message:n,channel:i}))return null;return{id:M["SLACK_ACTION_IDS"].copyLink,name:Object(S["isFeatureEnabled"])(e,"feature_desktop_copy_text")?Q.t("Copy link to message"):Q.t("Copy link"),iconType:"link","data-qa":"copy_link",frecencyId:Object(L["f"])("copy_link"),uiElement:k["y"].COPY_LINK_BUTTON}});Z.propTypes=J;var X=Z;var $=new I["b"]("message");var ee={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var te=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.messageContainerType;var i=Object(x["a"])(e,r,a);if(!i)return null;var s=Object(H["d"])(e,r);if(!Object(F["canDeleteMessage"])(e,{message:i,channel:s,messageContainerType:n}))return null;return{id:M["SLACK_ACTION_IDS"].deleteMessage,name:$.t("Delete message"),iconType:"trash",danger:true,"data-qa":"delete_message",frecencyId:Object(L["f"])("delete"),uiElement:k["y"].DELETE_MESSAGE_BUTTON}});te.propTypes=ee;var ae=te;var re=a(68);var ne=new I["b"]("message");var ie={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var se=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(x["a"])(e,r,a);if(!n)return null;var i=Object(H["d"])(e,r);var s=Object(S["getCurrentUserId"])(e);var o=Object(re["a"])(e,"msg_edit_window_mins");if(!Object(F["canEditMessage"])(e,s,n,i,o))return null;return{id:M["SLACK_ACTION_IDS"].editMessage,name:ne.t("Edit message"),iconType:"pencil","data-qa":"edit_message",frecencyId:Object(L["f"])("edit"),uiElement:k["y"].EDIT_MESSAGE_BUTTON}});se.propTypes=ie;var oe=se;var le=new I["b"]("message");var ce=new I["b"]("messages_action_items");var ue={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,allUnreads:_["b"].string.isRequired};var de=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.allUnreads;var i=Object(x["a"])(e,r,a);if(!i)return null;var s=Object(H["d"])(e,r);if(!Object(F["canMarkUnread"])(e,{message:i,channel:s}))return null;return{id:M["SLACK_ACTION_IDS"].markUnread,name:n?ce.t("Mark above as read"):le.t("Mark unread"),iconType:"mark-unread","data-qa":"mark_unread",frecencyId:Object(L["f"])("mark_unread"),uiElement:k["y"].MARK_UNREAD_BUTTON}});de.propTypes=ue;var pe=de;var he=a(234);var ve=a(11);var me=new I["b"]("message");function fe(e,t,a,r){var n="#"+t;switch(a){case"channel":if(e)return me.t("Un-pin from {channelName}",{channelName:n});if(r)return me.t("Pin to {channelName}",{channelName:n,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"});return me.t("Pin to {channelName}\u2026",{channelName:n});case"private":if(e)return me.t("Un-pin from {channelName}",{channelName:t});if(r)return me.t("Pin to {channelName}",{channelName:t,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"});return me.t("Pin to {channelName}\u2026",{channelName:t});default:if(e)return me.t("Un-pin from this conversation");if(r)return me.t("Pin to this conversation",{fallbackHash:"26463acec4f15a90924c42970bb258dae75e73f9"});return me.t("Pin to this conversation\u2026")}}var be={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var ge=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(x["a"])(e,r,a);if(!n)return null;var i=Object(H["d"])(e,r);if(!Object(F["canPin"])(e,{message:n,channel:i}))return null;var s=Object(he["isMessagePinned"])(e,{channelId:r,ts:a});var o=Object(ve["getDisplayNameForChannel"])(e,i,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});var l=Object(ve["getChannelType"])(i);var c=s?k["y"].PIN_TO_THIS_CONVERSATION_BUTTON:k["y"].UNPIN_FROM_THIS_CONVERSATION_BUTTON;var u=Object(S["isFeatureEnabled"])(e,"feature_sonic_pins");return{id:M["SLACK_ACTION_IDS"].pin,name:fe(s,o,l,u),iconType:"thumb-tack","data-qa":"pin_message",frecencyId:Object(L["f"])(s?"unpin":"pin"),uiElement:c}});ge.propTypes=be;var _e=ge;var ye=a(775);var Oe=a(833);var ke=a(1310);var Ee=a(1548);var Ce=Object(w["b"])("Add a reminder for a message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.time,n=a.channelId,i=a.ts;var s=Object(x["a"])(t(),n,i);return e(Object(Ee["a"])({time:r,message_channel:n,message_ts:i,respond_in_channel:Object(F["reminderShouldRespondInChannel"])(s)}))});Ce.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired,time:_["b"].string.isRequired};var je=Ce;var we=new I["b"]("message");var Se={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,time:_["b"].string.isRequired,remind:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var Ie=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSelected=a.onSelected.bind(a);return a}p()(t,[{key:"onSelected",value:function e(){var t=this.props,a=t.remind,r=t.ts,n=t.channelId,i=t.time,s=t.clogger;a({ts:r,channelId:n,time:i});s.track(k["k"].MSG_ACTION,{contexts:{ui_context:{action:k["v"].CLICK,step:k["z"].MORE_ACTIONS_MENU,ui_element:k["y"].REMIND_ME_BUTTON}}})}},{key:"render",value:function e(){var t=this.props,a=t.remind,r=t.ts,i=t.channelId,o=t.time,l=s()(t,["remind","ts","channelId","time"]);return g.a.createElement(j["a"],n()({},l,{onSelected:this.onSelected}))}}]);return t}(b["PureComponent"]);Ie.displayName="RemindMenuItem";var Te=function e(t){return{clogger:Object(E["a"])({state:t})}};var Ae={remind:je};var Ne=Object(y["connect"])(Te,Ae)(Ie);var Pe=Object(C["b"])(Ne);var Re={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,featureAppViewsV1:_["b"].bool,renderLegacySubmenu:_["b"].bool};var Me={featureAppViewsV1:false,renderLegacySubmenu:true};var De=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderSubmenu=a.renderSubmenu.bind(a);return a}p()(t,[{key:"renderSubmenu",value:function e(t){var a=this.props,r=a.channelId,i=a.ts,s=a.featureAppViewsV1;var o={channelId:r,ts:i};return g.a.createElement(ye["a"],n()({},t,{"data-qa":"remind_submenu",width:"auto"}),g.a.createElement(Pe,n()({},o,{label:we.t("In 20 minutes",{fallbackHash:"c473e4622b51d4d86dabe29940fee9c1796bb93d"}),time:"In 20 minutes"})),g.a.createElement(Pe,n()({},o,{label:we.t("In 1 hour",{fallbackHash:"e2e5de960f1c2c574aaeac98339a787a5bdab8e6"}),time:"In 1 hour"})),g.a.createElement(Pe,n()({},o,{label:we.t("In 3 hours",{fallbackHash:"9ec09cee220ff97e87efe884ad910bc050c301cb"}),time:"In 3 hours"})),g.a.createElement(Pe,n()({},o,{label:we.t("Tomorrow"),time:"Tomorrow"})),g.a.createElement(Pe,n()({},o,{label:we.t("Next week",{fallbackHash:"fdc2b827d9b1e8ed62eeb53c174f0ba91f90f490"}),time:"Next week"})),s&&g.a.createElement(Pe,n()({},o,{label:s?we.t("Custom\u2026"):"",time:"Custom"})))}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.ts,i=s()(t,["channelId","ts"]);return g.a.createElement(ke["a"],n()({},i,{renderSubmenu:this.renderSubmenu}))}}]);return t}(b["PureComponent"]);De.displayName="Remind";De.defaultProps=Me;var xe=Object(Oe["a"])(De);var Fe=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(x["a"])(e,r,a);if(!n)return null;var i=Object(H["d"])(e,r);if(!Object(F["canAddReminder"])(e,{message:n,channel:i}))return null;var s=Object(S["isFeatureEnabled"])(e,"feature_app_views_v1");return g.a.createElement(xe,{key:"remind_submenu",label:we.t("Remind me about this"),"data-qa":"remind_me",frecencyId:Object(L["f"])("remind"),ts:a,channelId:r,featureAppViewsV1:s,renderLegacySubmenu:true})});var Le=Fe;var Be=new I["b"]("message");var Ue={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var qe=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId,n=t.messageContainerType;var i=Object(x["a"])(e,r,a);if(!i)return null;var s=Object(H["d"])(e,r);if(!Object(F["canRemoveBroadcast"])(e,{message:i,channel:s,messageContainerType:n}))return null;var o=Object(ve["isPublicChannel"])(s)||Object(ve["isPrivateChannel"])(s)?Be.t("Remove from channel"):Be.t("Remove from conversation");return{id:M["SLACK_ACTION_IDS"].removeBroadcast,name:o,iconType:"times","data-qa":"remove_broadcast",frecencyId:Object(L["f"])("remove"),uiElement:k["y"].REMOVE_FROM_CONVERSATION_BUTTON}});qe.propTypes=Ue;var Ge=qe;var We=new I["b"]("message");var He={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var Ve=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(S["isFeatureEnabled"])(e,"feature_file_threads");var i=Object(x["a"])(e,r,a);if(!i)return null;if(!Object(F["canBeShared"])(i,n))return null;var s=Object(F["isShareableFileMsg"])(i)?We.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):We.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});return{id:M["SLACK_ACTION_IDS"].shareMessage,name:s,iconType:"share-action","data-qa":"share_message_menu",frecencyId:Object(L["f"])("share"),uiElement:k["y"].SHARE_MESSAGE_BUTTON}});Ve.propTypes=He;var Ke=Ve;var ze=new I["b"]("message");var Ye={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var Qe=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(x["a"])(e,r,a);if(!n)return null;if(!Object(F["canStar"])(n))return null;var i=Object(S["isFeatureEnabled"])(e,"feature_file_threads");var s=Object(F["getFileIdFromMessage"])(n,i);var o=Object(F["isStarred"])(n);var l=o?ze.t("Unstar message"):ze.t("Star message");if(Object(F["isFileComment"])(n)){var c=s||Object(O["first"])(n.files);var u=n.comment&&Object(W["getFileCommentById"])(e,c,n.comment.id);u&&(l=o?ze.t("Unstar file comment"):ze.t("Star file comment"))}else if(s){o=Object(F["isStarred"])(n,Object(W["getFileById"])(e,s),null);l=o?ze.t("Unstar file"):ze.t("Star file")}var d=o?k["y"].UNSTAR_MESSAGE_BUTTON:k["y"].STAR_MESSAGE_BUTTON;return{id:M["SLACK_ACTION_IDS"].star,name:l,iconType:o?"unstar-o":"star-o","data-qa":"star_message_menu",frecencyId:Object(L["f"])(o?"unstar":"star"),uiElement:d}});Qe.propTypes=Ye;var Je=Qe;var Ze=a(351);var Xe=a(34);var $e=new I["b"]("message");var et=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(x["a"])(e,r,a);var i=Object(H["d"])(e,r);var s=Object(ve["isArchived"])(i);var o=Object(Ze["getIsSubscribed"])(e,{ts:a,channelId:r});var l=s&&o;if(!Object(F["canReplyOrComment"])(e,{message:n,channel:i,ignoreMembership:l}))return null;var c=Object(Xe["f"])(e,"threads_everything");var u=Object(F["getReplyCount"])(n);var d=$e.t("Follow message");var p=$e.t("You\u2019ll be notified about any replies");var h=k["y"].FOLLOW_MESSAGE_BUTTON;var v=void 0;var m=Object(Ze["getIsSubscriptionLoading"])(e,{ts:a,channelId:r});if(m){d=$e.t("Loading\u2026",{fallbackHash:"0e140d567d90b0014d95ffec7a755e52355079f3"});p=""}else if(o){if(u){d=$e.t("Unfollow thread");v=$e.t("This will be removed from Threads");p=c?$e.t("You won\u2019t be notified about new replies"):v}else{d=$e.t("Unfollow message");v=$e.t("Replies will be excluded from Threads");p=c?$e.t("You won\u2019t be notified about replies"):v}h=k["y"].UNFOLLOW_MESSAGE_BUTTON}else if(u){d=$e.t("Follow thread");v=$e.t("New replies will appear in Threads");p=c?$e.t("You\u2019ll be notified about new replies"):v}else{d=$e.t("Follow message");v=$e.t("Any replies will show up in Threads");p=c?$e.t("You\u2019ll be notified about any replies"):v}return{id:M["SLACK_ACTION_IDS"].subscribe,name:d,description:p,isLoading:m,iconType:"message-notification","data-qa":"follow_message",frecencyId:Object(L["f"])(o?"thread_unfollow":"thread_follow"),uiElement:h}});et.propTypes={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var tt=et;function at(e){return n()({id:e.id,appId:e.app.id,name:e.name,description:e.app.name,iconSet:e.app.icons||{},uiElement:k["y"].APP_ACTION_BUTTON,"data-qa":"app_action_"+e.id},Object(L["e"])(e))}var rt=a(1322);function nt(e,t){if(!e)return false;var a=Object(rt["a"])(e.name);if(!a)return false;var r=Object(rt["a"])(e.description);var n=t.split(/\s+/);return Object(O["every"])(n,function(e){return Object(O["includes"])(a,e)||Object(O["includes"])(r,e)})}var it=a(757);var st=new I["b"]("app_actions");var ot=function e(t,a){return[G(t,a),Y(t,a),X(t,a),ae(t,a),oe(t,a),pe(t,a),_e(t,a),Ge(t,a),Ke(t,a),Je(t,a),tt(t,a)]};var lt=function e(t){return n()({},t,{danger:false,description:st.t("Slack")})};var ct=function e(t){return{id:t.frecencyId,action:t}};var ut=Object(w["b"])("Search message actions (app + Slack) in Redux store",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.query,n=void 0===r?"":r,i=s()(a,["query"]);var o=t();var c=Object(it["d"])(o),u=c.actions;var d=ot(o,i).filter(function(e){return e&&!e.isLoading});var p=[].concat(l()(d.map(lt)),l()(u.map(at)));p=p.filter(function(e){return nt(e,Object(rt["a"])(n))});p=Object(A["d"])(o,{query:n,list:p.map(ct)});p=p.map(function(e){return e.action});return p});ut.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired,messageContainerType:_["b"].oneOf(Object(O["values"])(M["MESSAGE_CONTAINERS"])),query:_["b"].string};var dt=Object(w["b"])("Search message actions (app + Slack), returns as Promise",function(e,t,a){var r=e(ut(a));return Promise.resolve(r)});dt.propTypes=ut.propTypes;var pt=dt;var ht=a(1839);var vt=a(98);var mt=a(12);var ft=a(777);var bt=a(360);var gt=function e(t,a,r){var n=a.channelId,i=a.ts;return r(function(e,a){var r=a();var s=Object(x["a"])(r,n,i);var o=Object(W["getFileFromMsg"])(r,s);var l=Object(bt["b"])(s,o);return Object(ft["a"])({e:t,rxn_key:l})})};var _t=gt;var yt=a(100);var Ot=Object(w["b"])("Comment on a message or file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts;var i=t();var s=Object(x["a"])(i,r,n);var o=Object(S["isFeatureEnabled"])(i,"feature_file_threads");var l=Object(F["getFileIdFromMessage"])(s,o);if(l&&!o)e(Object(yt["c"])({fileId:l}));else{var c=s.thread_ts||n;e(Object(yt["l"])({channelId:r,threadTs:c}))}});Ot.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var kt=Ot;var Et=a(35);var Ct=a(548);var jt=a(918);var wt=a(276);var St=Object(w["b"])("Copy link to message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts;var i=t();var s=Object(x["a"])(i,r,n);var o=s.thread_ts;var l=Object(Et["d"])(i);var c=l&&l.domain;var u=Object(W["getFileFromMsg"])(i,s);var d=u&&!Object(F["isFileComment"])(s)?u.permalink:Object(F["constructAbsoluteMsgPermalink"])({teamDomain:c,channelId:r,ts:n,threadTs:o});e(u?Object(jt["a"])({file:u,payload:{subtype:"copy_link"}}):Object(Ct["a"])({msg:s,payload:{subtype:"copy_link"}}));Object(wt["writeText"])(d)});St.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var It=St;var Tt=a(393);var At=a(1208);var Nt=Object(w["b"])("Copy message text",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts;var i=t();var s=Object(x["a"])(i,r,n);var o=Object(W["getFileFromMsg"])(i,s);e(o?Object(jt["a"])({file:o,payload:{subtype:"copy_text"}}):Object(Ct["a"])({msg:s,payload:{subtype:"copy_text"}}));var l=Object(Tt["a"])(Object(At["a"])(i,{text:s.text,tsf_mode:"EDIT"}));Object(wt["writeText"])(l)});Nt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Pt=Nt;var Rt=Object(w["b"])("Summarize message text",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.ts,n=a.channelId;var i=t();var s=Object(mt["a"])({state:i,label:"MESSAGE-ACTIONS"});s.info("Fetching the summary for the following message "+r+" in "+n);e(Object(Ee["b"])({channelId:n,ts:r,reason:"summarize-message"}))});Rt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Mt=Rt;var Dt=a(1549);var xt=a(48);var Ft=Object(w["b"])("Delete message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts,i=a.rollup;var s=g.a.createElement(Dt["a"],{channelId:r,ts:n,rollup:i});Promise.resolve().then(function(){return e(Object(xt["openModal"])({element:s}))})});Ft.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Lt=Ft;var Bt=a(1550);var Ut=Object(w["b"])("Remove message broadcast",function(e,t,a){var r=g.a.createElement(Bt["a"],a);Promise.resolve().then(function(){return e(Object(xt["openModal"])({element:r}))})});Ut.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var qt=Ut;var Gt=a(1186);var Wt=Object(w["b"])("Copy link to message",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts;var i=t();var s=Object(x["a"])(i,r,n);var o=Object(S["isFeatureEnabled"])(i,"feature_file_threads");var l=Object(F["getFileIdFromMessage"])(s,o);l&&Object(F["isFileComment"])(s)?e(Object(Gt["a"])({fileId:l})):e(Object(Gt["a"])({ts:n,channelId:r}))});Wt.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired};var Ht=Wt;var Vt=a(865);var Kt=function e(t,a,r,n){var i=r.ts,s=r.channelId,o=r.rollup,l=r.messageContainerType;var c=Object(mt["b"])();if(a.appId)return n(Object(ht["b"])({actionId:a.id,appId:a.appId,messageTs:i,channelId:s}));switch(a.id){case M["SLACK_ACTION_IDS"].addReaction:return _t(t,r,n);case M["SLACK_ACTION_IDS"].comment:return n(kt({ts:i,channelId:s}));case M["SLACK_ACTION_IDS"].copyLink:return n(It({ts:i,channelId:s}));case M["SLACK_ACTION_IDS"].copyText:return n(Pt({ts:i,channelId:s}));case M["SLACK_ACTION_IDS"].summarizeMessage:return n(Mt({ts:i,channelId:s}));case M["SLACK_ACTION_IDS"].deleteMessage:return n(Lt({ts:i,channelId:s,rollup:o}));case M["SLACK_ACTION_IDS"].editMessage:c.warn("Edit message is an unhandled case");return null;case M["SLACK_ACTION_IDS"].markUnread:return n(Object(vt["x"])({channelId:s,unreadTs:i}));case M["SLACK_ACTION_IDS"].pin:return n(Object(he["togglePin"])({ts:i,channelId:s}));case M["SLACK_ACTION_IDS"].remind:c.warn("Remind is an unhandled case");return null;case M["SLACK_ACTION_IDS"].removeBroadcast:return n(qt({ts:i,channelId:s}));case M["SLACK_ACTION_IDS"].shareMessage:return n(Ht({ts:i,channelId:s}));case M["SLACK_ACTION_IDS"].star:return n(Object(Vt["b"])({ts:i,channelId:s}));case M["SLACK_ACTION_IDS"].subscribe:return n(Object(Ze["toggleThreadSubscription"])({ts:i,channelId:s,messageContainerType:l}));default:c.warn("Unknown action type "+a.id);return null}};var zt=Kt;var Yt=a(84);var Qt=a(96);var Jt=a(572);var Zt=a(5);var Xt=a.n(Zt);var $t=a(16);var ea=a.n($t);var ta=a(1187);var aa=a(22);var ra=a(61);var na=a(182);var ia=a(310);var sa=56;var oa={action:N["a"].MessageAction.isRequired,className:_["b"].string,pillarClassName:_["b"].string,app:N["a"].maybeUnknown(N["a"].App),defaultAppIcon:_["b"].string.isRequired};var la={className:"",pillarClassName:"",app:void 0};var ca=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(O["bindAll"])(a,["renderEnter","renderIcon","renderIconMaybe"]);return a}p()(t,[{key:"renderIcon",value:function e(){var t=this.props,a=t.action,r=t.app,n=t.defaultAppIcon;var i=r&&r.icons||a.iconSet;if(i){var s=sa;var o=Object(ia["a"])({icons:i},s,n);return g.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:o})}if(a.iconType)return g.a.createElement(aa["b"],{type:a.iconType});return null}},{key:"renderIconMaybe",value:function e(t){if(!t)return null;return g.a.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},t)}},{key:"renderEnter",value:function e(){var t=this.props,a=t.className,r=t.pillarClassName;var n=ea()(a,"c-menu_item__enter",Xt()({},r+"__enter",r));return g.a.createElement(aa["a"],{type:"enter",className:n,"data-qa":"menu_item_enter",role:"presentation"})}},{key:"render",value:function e(){var t;var a=this.props,r=a.action,n=a.app,i=a.className,s=a.pillarClassName;var o=ea()(i,"c-menu_item__button","c-button-unstyled",(t={"c-menu_item__button--danger":r.danger},Xt()(t,""+s,s),Xt()(t,s+"--danger",r.danger&&s),t));var l=n&&n.name||r.description;!l&&n&&(l=g.a.createElement(ta["a"],{type:Object(ra["d"])(n)?"unknown":"non-existent"}));return g.a.createElement("div",{className:"c-menu_item__li",role:"presentation"},g.a.createElement("div",{className:o,"data-qa":r["data-qa"],key:r.id,id:r.id},this.renderIconMaybe(this.renderIcon()),g.a.createElement("div",{className:"c-menu_item__label",role:"presentation"},r.label||r.name,g.a.createElement("div",{className:"c-menu_item__description"},l)),this.renderEnter()))}}]);return t}(b["PureComponent"]);ca.displayName="AppActionsDialogItem";ca.defaultProps=la;var ua=function e(t,a){var r=a.action;return{app:r&&r.appId&&Object(na["getAppById"])(t,r.appId),defaultAppIcon:Object(na["getDefaultAppIcon"])(t)}};var da=Object(y["connect"])(ua)(ca);var pa=a(88);var ha=a(423);var va=a(1339);var ma=a(339);var fa=a(800);var ba=a(55);var ga=a(141);var _a=a(216);var ya=a(919);var Oa=a(853);var ka=a(923);var Ea=a(3202);var Ca={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,channel:_["b"].object.isRequired,theme:_["b"].string,hasAdHocSender:_["b"].bool,userId:_["b"].string,username:_["b"].string,botId:_["b"].string,text:_["b"].string,attachments:_["b"].arrayOf(_["b"].object),blocksContainerContext:_["b"].string,blocks:_["b"].array,featureAttachmentsV2:_["b"].bool};var ja={theme:"light",hasAdHocSender:false,userId:null,username:null,botId:null,attachments:[],blocks:void 0,blocksContainerContext:ba["a"].app_actions,featureAttachmentsV2:false,text:void 0};var wa=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={gradient:false};a.renderAttachment=a.renderAttachment.bind(a);return a}p()(t,[{key:"componentDidMount",value:function e(){this.maybeSetGradient()}},{key:"maybeSetGradient",value:function e(){var t=Object(pa["findDOMNode"])(this);t&&t.scrollHeight>t.clientHeight&&this.setState(function(){return{gradient:true}})}},{key:"renderContent",value:function e(){var t=this.props,a=t.text,r=t.blocks,n=t.ts,i=t.blocksContainerContext,s=t.featureAttachmentsV2;if(r&&s)return g.a.createElement(fa["a"],{blocks:r,containerId:n,blocksContainerContext:i});return g.a.createElement(ga["a"],{"data-qa":"app-actions-pillow-message-text",text:a})}},{key:"renderAvatar",value:function e(){var t=this.props,a=t.userId,r=t.hasAdHocSender,n=t.botId;return g.a.createElement(_a["b"],{className:"p-app_actions_pillow__avatar",userId:a,isAdHocMember:r,botId:n,size:24,isInteractive:false,showCard:false,showTooltip:false,tabIndex:"-1"})}},{key:"renderTimestamp",value:function e(){var t=this.props.ts;return g.a.createElement(ya["b"],{timestamp:t,relative:false,full:true})}},{key:"renderAttachment",value:function e(t,a){var r=this.props,i=r.ts,s=r.channelId,o=r.blocksContainerContext;return g.a.createElement(Oa["a"],n()({key:a},Object(ma["b"])(t),{messageTs:i,activeChannelId:s,showDelete:false,blocksContainerContext:o}))}},{key:"renderAttachments",value:function e(){var t=this.props.attachments;if(!t||!t.length)return null;return g.a.createElement("div",{className:"p-app_actions_pillow__attachments"},t.map(this.renderAttachment))}},{key:"renderGutter",value:function e(){if("light"===this.props.theme)return g.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderAvatar());return g.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderTimestamp())}},{key:"renderContentHeader",value:function e(){var t=this.props,a=t.userId,r=t.botId,n=t.username,i=t.theme,s=t.channel;return g.a.createElement("div",{className:"p-app_actions_pillow__content_header"},g.a.createElement(ka["a"],{userId:a,botId:r,username:n,channelName:Object(ve["getDisplayName"])(s),isInteractive:false}),"light"===i&&this.renderTimestamp())}},{key:"render",value:function e(){var t=this.props.theme;var a=ea()("p-app_actions_pillow","p-app_actions_pillow--"+t,{"p-app_actions_pillow--gradient":this.state.gradient});return g.a.createElement("div",{className:a,role:"presentation","data-qa":"app_action_pillow"},this.renderGutter(),g.a.createElement("div",{className:"p-app_actions_pillow__content"},this.renderContentHeader(),g.a.createElement("div",{className:"p-app_actions_pillow__body",id:"p-app_actions_pillow__body"},this.renderContent(),this.renderAttachments(),g.a.createElement("span",{className:"p-app_actions_pillow__blocker"}))))}}]);return t}(b["PureComponent"]);wa.displayName="AppActionsPillow";wa.defaultProps=ja;var Sa=function e(t,a){var r=a.ts,n=a.channelId;var i=Object(x["a"])(t,n,r);var s=Object(H["d"])(t,n);var o=Object(F["getMessageMemberId"])(i);var l=Object(F["getMsgSenderEntity"])(t,i),c=l.botId,u=l.username;return{channel:s,userId:o,username:u,botId:c,theme:Object(ha["a"])(t),hasAdHocSender:Object(va["a"])(i),text:i.text,attachments:i.attachments,blocks:i.blocks,featureAttachmentsV2:Object(S["isFeatureEnabled"])(t,"feature_attachments_v2")}};var Ia=Object(y["connect"])(Sa)(wa);var Ta=a(2404);var Aa=new I["b"]("app_actions");var Na=64;var Pa="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-get_more_app_actions-message_action_dialog-click";var Ra={channelId:_["b"].string.isRequired,onClose:_["b"].func,ts:_["b"].string.isRequired,onSelectAction:_["b"].func,handleMessageAction:_["b"].func.isRequired,searchMessageActions:_["b"].func.isRequired,recordMessageActionFrecencyEvent:_["b"].func.isRequired,closeModal:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var Ma={onClose:O["noop"],onSelectAction:O["noop"]};var Da=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={filterQuery:"",isLoading:true,isError:false,actions:[]};a.initClogged=false;Object(O["bindAll"])(a,["onFilterUpdate","onFooterLinkClick","onSelectAction","renderSingleAction","handleSelectEvent","searchActions"]);a.searchActionsDebounced=Object(O["debounce"])(a.searchActions,200,{leading:true});return a}p()(t,[{key:"componentDidMount",value:function e(){this.searchActionsDebounced()}},{key:"componentDidUpdate",value:function e(){if(!this.initClogged&&!this.state.isLoading&&!this.state.isError){var t=this.props.clogger;t.track(k["k"].MSG_ACTION,{contexts:{ui_context:{action:k["v"].IMPRESSION,step:k["z"].MESSAGE_ACTION_DIALOG,ui_element:k["y"].MESSAGE_ACTION_DIALOG},platform:{app_actions_showing:this.state.actions.length}}});this.initClogged=true}}},{key:"componentWillUnmount",value:function e(){this.activePromise&&delete this.activePromise}},{key:"onFooterLinkClick",value:function e(){var t=this.props.clogger;t.track(k["k"].MSG_ACTION,{contexts:{ui_context:{action:k["v"].CLICK,step:k["z"].MESSAGE_ACTION_DIALOG,ui_element:k["y"].GET_MORE_APP_ACTIONS},platform:{app_actions_showing:this.state.actions.length}}})}},{key:"onSelectAction",value:function e(t,a){var r=this.props,n=r.ts,i=r.channelId,s=r.closeModal,o=r.handleMessageAction,e=r.onSelectAction,l=r.clogger;s();this.props.onClose&&this.props.onClose(t);var c=e(t,a,{ts:n,channelId:i});c||o(t,a,{ts:n,channelId:i});this.props.recordMessageActionFrecencyEvent({action:a,query:this.state.filterQuery});var u={ui_context:{action:k["v"].CLICK,step:k["z"].MESSAGE_ACTION_DIALOG,ui_element:a.uiElement}};a.appId&&(u.platform={app_id:a.appId,action_id:a.id});l.track(k["k"].MSG_ACTION,{contexts:u})}},{key:"onFilterUpdate",value:function e(t){this.setState(function(){return{filterQuery:t}},this.searchActionsDebounced)}},{key:"searchActions",value:function e(){var t=this;var a=this.props.searchMessageActions({channelId:this.props.channelId,ts:this.props.ts,query:this.state.filterQuery}).then(function(e){t.activePromise===a&&t.setState(function(){return{actions:e,isError:false,isLoading:false}})}).catch(function(){t.setState(function(){return{isError:true,isLoading:false}})});this.activePromise=a}},{key:"handleSelectEvent",value:function e(t,a,r){this.onSelectAction(r,a.props.action)}},{key:"renderTitle",value:function e(t){return g.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":true},g.a.createElement("div",{className:"p-app_actions_dialog__title_text"},t))}},{key:"renderMessagePreview",value:function e(){var t=this.props,a=t.channelId,r=t.ts;return g.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":true},g.a.createElement(Ia,{channelId:a,ts:r}))}},{key:"renderLoading",value:function e(){return g.a.createElement("div",{className:"p-app_actions_dialog__loader"},g.a.createElement(Qt["a"],null))}},{key:"renderSingleAction",value:function e(t){var a=g.a.createElement(da,{key:t.id,pillarClassName:"p-app_actions_dialog_option",action:t});return{label:a,value:t.id}}},{key:"renderSelect",value:function e(){var t=Aa.t("Search message actions\u2026");return g.a.createElement(Jt["b"],{"data-qa":"app-actions-dialog-list",isAlwaysOpen:true,usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true,placeholder:t,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(O["map"])(this.state.actions,this.renderSingleAction),optionsRowHeight:Na})}},{key:"render",value:function e(){var t=this.state.isLoading;var a=Aa.t("Get more message actions");var r=Aa.t("Use an action");return g.a.createElement(Yt["a"],{contentLabel:r,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:Pa,onFooterLinkClick:this.onFooterLinkClick,footerText:a,goOnEnterPressed:false,onCancel:this.props.onClose,showCancelButton:false,showGoButton:false,title:this.renderTitle(r),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:false},this.renderMessagePreview(),t?this.renderLoading():this.renderSelect())}}]);return t}(b["PureComponent"]);Da.displayName="AppActionsDialog";Da.defaultProps=Ma;function xa(e){return{clogger:Object(E["a"])({state:e})}}var Fa=function e(t){return{closeModal:function e(){return t(Object(xt["closeModal"])())},handleMessageAction:function e(){for(var a=arguments.length,r=Array(a),n=0;n<a;n++)r[n]=arguments[n];return zt.apply(void 0,r.concat([t]))},searchMessageActions:function e(){return t(pt.apply(void 0,arguments))},recordMessageActionFrecencyEvent:function e(a){return t(R(a))}}};var La=Object(y["connect"])(xa,Fa)(Da);var Ba=a(448);var Ua=it["d"];var qa=new I["b"]("app_actions");var Ga=64;var Wa="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-get_more_app_actions-message_action_dialog-click";var Ha={channelId:_["b"].string.isRequired,onClose:_["b"].func,ts:_["b"].string.isRequired,onSelectAction:_["b"].func,slackActions:_["b"].arrayOf(N["a"].MessageAction).isRequired,appActions:_["b"].arrayOf(N["a"].AppActionMenuItem),isLoading:_["b"].bool.isRequired,onLoad:_["b"].func.isRequired,handleMessageAction:_["b"].func.isRequired,closeModal:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var Va={appActions:[],onClose:O["noop"],onSelectAction:O["noop"]};var Ka=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={normalizedFilterQuery:""};Object(O["bindAll"])(a,["onFilterUpdate","onFooterLinkClick","onSelectAction","filterAction","formatSlackAction","renderSingleAction","handleSelectEvent"]);return a}p()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track(k["k"].MSG_ACTION,{contexts:{ui_context:{action:k["v"].IMPRESSION,step:k["z"].MESSAGE_ACTION_DIALOG,ui_element:k["y"].MESSAGE_ACTION_DIALOG},platform:{app_actions_showing:this.props.appActions.length}}});this.props.onLoad()}},{key:"shouldComponentUpdate",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channelId,r=t.ts,n=t.isLoading;var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.normalizedFilterQuery;if(this.state.normalizedFilterQuery!==s)return true;if(this.props.isLoading&&!n)return true;if(this.props.channelId!==a)return true;if(this.props.ts!==r)return true;return false}},{key:"onFooterLinkClick",value:function e(){var t=this.props.clogger;t.track(k["k"].MSG_ACTION,{contexts:{ui_context:{action:k["v"].CLICK,step:k["z"].MESSAGE_ACTION_DIALOG,ui_element:k["y"].GET_MORE_APP_ACTIONS},platform:{app_actions_showing:this.props.appActions.length}}})}},{key:"onSelectAction",value:function e(t,a){var r=this.props,n=r.ts,i=r.channelId,s=r.closeModal,o=r.handleMessageAction,e=r.onSelectAction,l=r.clogger;s();this.props.onClose&&this.props.onClose(t);var c=e(t,a,{ts:n,channelId:i});c||o(t,a,{ts:n,channelId:i});Object(L["b"])(a,this.state.normalizedFilterQuery);var u={ui_context:{action:k["v"].CLICK,step:k["z"].MESSAGE_ACTION_DIALOG,ui_element:a.uiElement}};a.appId&&(u.platform={app_id:a.appId,action_id:a.id});l.track(k["k"].MSG_ACTION,{contexts:u})}},{key:"onFilterUpdate",value:function e(t){var a=Object(rt["a"])(t);this.setState(function(){return{normalizedFilterQuery:a}})}},{key:"getActions",value:function e(){var t=[].concat(l()(Object(O["map"])(this.props.slackActions,this.formatSlackAction)),l()(Object(O["map"])(this.props.appActions,at)));t=Object(O["filter"])(t,this.filterAction);t=Object(L["c"])(t,this.state.normalizedFilterQuery);return t}},{key:"handleSelectEvent",value:function e(t,a,r){this.onSelectAction(r,a.props.action)}},{key:"filterAction",value:function e(t){return nt(t,this.state.normalizedFilterQuery)}},{key:"formatSlackAction",value:function e(t){return n()({},t,{danger:false,description:qa.t("Slack")})}},{key:"renderTitle",value:function e(t){return g.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":true},g.a.createElement("div",{className:"p-app_actions_dialog__title_text"},t))}},{key:"renderMessagePreview",value:function e(){var t=this.props,a=t.channelId,r=t.ts;return g.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":true},g.a.createElement(Ia,{channelId:a,ts:r}))}},{key:"renderLoading",value:function e(){return g.a.createElement("div",{className:"p-app_actions_dialog__loader"},g.a.createElement(Qt["a"],null))}},{key:"renderSingleAction",value:function e(t){var a=g.a.createElement(da,{key:t.id,pillarClassName:"p-app_actions_dialog_option",action:t});return{label:a,value:t.id}}},{key:"renderSelect",value:function e(){var t=qa.t("Search message actions\u2026");return g.a.createElement(Jt["b"],{"data-qa":"app-actions-dialog-list",isAlwaysOpen:true,usePlaceholderOption:false,autoSelectFirstOption:true,focusInputOnMount:true,placeholder:t,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(O["map"])(this.getActions(),this.renderSingleAction),optionsRowHeight:Ga})}},{key:"render",value:function e(){var t=this.props.isLoading;var a=qa.t("Get more message actions");var r=qa.t("Use an action");return g.a.createElement(Yt["a"],{contentLabel:r,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:Wa,onFooterLinkClick:this.onFooterLinkClick,footerText:a,goOnEnterPressed:false,onCancel:this.props.onClose,showCancelButton:false,showGoButton:false,title:this.renderTitle(r),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:false},this.renderMessagePreview(),t?this.renderLoading():this.renderSelect())}}]);return t}(b["Component"]);Ka.displayName="AppActionsDialog";Ka.defaultProps=Va;function za(e,t){var a=Ua(e),r=a.loading,n=a.actions;var i=Object(O["filter"])([G(e,t),Y(e,t),X(e,t),ae(e,t),oe(e,t),pe(e,t),_e(e,t),Ge(e,t),Ke(e,t),Je(e,t),tt(e,t)]);var s=!!(r||Object(O["find"])(i,"isLoading"));return{slackActions:i,appActions:n,isLoading:s,clogger:Object(E["a"])({state:e})}}var Ya=function e(t){return{closeModal:function e(){return t(Object(xt["closeModal"])())},onLoad:function e(){return t(Object(Ba["b"])())},handleMessageAction:function e(){for(var a=arguments.length,r=Array(a),n=0;n<a;n++)r[n]=arguments[n];return zt.apply(void 0,r.concat([t]))}}};var Qa={};Object.defineProperty(Qa,"selectMessageActions",{get:function e(){return Ua},set:function e(t){Ua=t}});var Ja=Object(y["connect"])(za,Ya)(Ka);var Za=function e(t){var a=t.featureAppActionsFeRefactor,r=s()(t,["featureAppActionsFeRefactor"]);if(a)return g.a.createElement(La,r);return g.a.createElement(Ja,r)};Za.displayName="AppActionsSwitcher";var Xa=function e(t){return{featureAppActionsFeRefactor:Object(S["isFeatureEnabled"])(t,"feature_app_actions_fe_refactor")}};var $a=Object(y["connect"])(Xa)(Za);var er=Object(w["b"])("Open app actions dialog",function(e,t,a){var r=g.a.createElement($a,a);e(Object(xt["openModal"])({element:r}))});er.propTypes={channelId:_["b"].string.isRequired,ts:_["b"].string.isRequired,onSelectAction:_["b"].func.isRequired};var tr=er;var ar=new I["b"]("message");var rr=3;var nr="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-more_message_actions_button-more_actions_menu-click";var ir={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,onSelectAction:_["b"].func.isRequired,hasActions:_["b"].bool.isRequired,hasOverflow:_["b"].bool.isRequired,browseAppActions:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var sr=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSelected=a.onSelected.bind(a);a.state={hasActions:e.hasActions};return a}p()(t,[{key:"onSelected",value:function e(t){var a=this.props,r=a.ts,n=a.channelId,i=a.onSelectAction,s=a.clogger;this.props.hasOverflow?this.props.browseAppActions({ts:r,channelId:n,onSelectAction:i}):t&&"click"!==t.type&&window.open(nr,"_blank");s.track(k["k"].MSG_ACTION,{contexts:{ui_context:{action:k["v"].CLICK,step:k["z"].MORE_ACTIONS_MENU,ui_element:k["y"].MORE_MESSAGE_ACTIONS_BUTTON}}})}},{key:"render",value:function e(){var t=this.props,a=t.ts,r=t.channelId,i=t.onSelectAction,o=t.hasActions,l=t.browseAppActions,c=s()(t,["ts","channelId","onSelectAction","hasActions","browseAppActions"]);var u=this.state.hasActions?ar.t("More message actions\u2026"):ar.t("Add a message action\u2026");return g.a.createElement(j["a"],n()({},c,{label:u,"data-qa":this.props.hasOverflow?"app_message_actions_dialog":"app_directory_link",onSelected:this.onSelected,href:this.props.hasOverflow?void 0:nr}))}}]);return t}(b["Component"]);sr.displayName="BrowseAppActions";var or=function e(t){var a=Object(it["d"])(t),r=a.actions,n=a.loading;var i=r.length;return{hasActions:n||!!i,hasOverflow:n||i>rr,clogger:Object(E["a"])({state:t})}};var lr=function e(t){return{browseAppActions:function e(){return t(tr.apply(void 0,arguments))}}};var cr=Object(C["b"])(Object(y["connect"])(or,lr)(sr));var ur=a(66);var dr=a(335);var pr=new I["b"]("message");var hr={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var vr=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;var n=Object(x["a"])(e,r,a);if(!n)return null;if(!Object(F["canCopyMessage"])(e,{message:n}))return null;return{id:M["SLACK_ACTION_IDS"].copyText,name:pr.t("Copy text"),iconType:"link","data-qa":"copy_text",frecencyId:Object(L["f"])("copy_text"),uiElement:k["y"].COPY_LINK_BUTTON}});vr.propTypes=hr;var mr=vr;var fr=new I["b"]("message");var br={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired};var gr=Object(D["b"])(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.channelId;if(!Object(S["isFeatureEnabled"])(e,"feature_msg_sum"))return null;var n=Object(x["a"])(e,r,a);if(!n)return null;if(!Object(F["canSummarizeMessage"])(e))return null;return{id:M["SLACK_ACTION_IDS"].summarizeMessage,name:fr.t("Summarize message"),iconType:"link","data-qa":"summarize_message",frecencyId:Object(L["f"])("summarize_message"),uiElement:k["y"].SUMMARIZE_MESSAGE_BUTTON}});gr.propTypes=br;var _r=gr;var yr=a(17);var Or=56;var kr=40;var Er={type:_["b"].oneOf(Object(O["values"])(dr["a"])),action:N["a"].MessageAction.isRequired,onSelected:_["b"].func.isRequired,app:N["a"].maybeUnknown(N["a"].App),defaultAppIcon:_["b"].string.isRequired};var Cr={type:dr["a"].default,app:void 0};var jr=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSelected=a.onSelected.bind(a);return a}p()(t,[{key:"onSelected",value:function e(t){var a=this.props,r=a.action,e=a.onSelected;e(t,r)}},{key:"renderIcon",value:function e(){var t=this.props,a=t.action,r=t.app,n=t.type,i=t.defaultAppIcon;var s=r&&r.icons||a.iconSet;if(s){var o=n===dr["a"].compactItem?kr:Or;var l=Object(ia["a"])({icons:s},o,i);return g.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:l})}if(a.iconType)return g.a.createElement(aa["b"],{type:a.iconType});return null}},{key:"render",value:function e(){var t=this.props,a=t.action,r=t.app,i=t.onSelected,o=t.type,l=s()(t,["action","app","onSelected","type"]);var c=r&&r.name||a.description;!c&&r&&(c=g.a.createElement(ta["a"],{type:Object(ra["d"])(r)?"unknown":"non-existent"}));return g.a.createElement(j["a"],n()({type:o,label:a.label||a.name,description:c,icon:this.renderIcon(),danger:a.danger,onSelected:this.onSelected,"data-qa":a["data-qa"]},l))}}]);return t}(b["PureComponent"]);jr.displayName="MessageActionMenuItem";jr.defaultProps=Cr;var wr=function e(t,a){var r=a.action;return{app:r&&r.appId&&Object(na["getAppById"])(t,r.appId),defaultAppIcon:Object(na["getDefaultAppIcon"])(t)}};var Sr=Object(y["connect"])(wr)(jr);var Ir=Object(C["b"])(Sr);var Tr=a(3205);var Ar=3;var Nr={ts:_["b"].string.isRequired,channelId:_["b"].string.isRequired,rollup:N["a"].Rollup(),messageContainerType:_["b"].oneOf(Object(O["values"])(M["MESSAGE_CONTAINERS"])),onSelectAction:_["b"].func,onMenuItemSelected:_["b"].func,onLoad:_["b"].func,slackActions:_["b"].arrayOf(_["b"].oneOfType([N["a"].MessageAction,_["b"].node])).isRequired,canRunAppAction:_["b"].bool,appActions:_["b"].array,handleMessageAction:_["b"].func.isRequired,recordMessageActionFrecencyEvent:_["b"].func.isRequired,clogger:_["b"].object.isRequired};var Pr={messageContainerType:M["MESSAGE_CONTAINERS"].MESSAGE_PANE,onSelectAction:O["noop"],onMenuItemSelected:O["noop"],onLoad:O["noop"],canRunAppAction:false,appActions:[],rollup:void 0};var Rr=function(e){f()(t,e);function t(e){u()(this,t);var a=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={appActions:e.appActions};Object(O["bindAll"])(a,["onSelectAction","renderSingleAppAction","renderSingleSlackAction"]);return a}p()(t,[{key:"componentDidMount",value:function e(){this.props.onLoad();var t=this.props.clogger;t.track(k["k"].MSG_ACTION,{contexts:{ui_context:{action:k["v"].IMPRESSION,step:k["z"].MORE_ACTIONS_MENU,ui_element:k["y"].MORE_ACTIONS_MENU},platform:{app_actions_showing:Math.min(this.state.appActions.length,Ar)}}})}},{key:"onSelectAction",value:function e(t,a){var r=this.props,n=r.ts,i=r.channelId,s=r.handleMessageAction,e=r.onSelectAction,o=r.rollup,l=r.clogger,c=r.messageContainerType;var u=e(t,a,{ts:n,channelId:i});u||s(t,a,{ts:n,channelId:i,rollup:o,messageContainerType:c});this.props.recordMessageActionFrecencyEvent({action:a});var d={ui_context:{action:k["v"].CLICK,step:k["z"].MORE_ACTIONS_MENU,ui_element:a.uiElement}};a.appId&&(d.platform={app_id:a.appId,action_id:a.id});l.track(k["k"].MSG_ACTION,{contexts:d})}},{key:"renderAppActions",value:function e(){var t=this.props,a=t.onSelectAction,r=t.ts,n=t.channelId;var i=this.state.appActions;var s=i.slice(0,Ar).map(this.renderSingleAppAction);return[].concat(l()(s),[g.a.createElement(cr,{key:"browse_app_actions",ts:r,channelId:n,onSelectAction:a})])}},{key:"renderSingleAppAction",value:function e(t){var a=at(t);return g.a.createElement(Ir,{key:a.id,type:dr["a"].compactItem,action:a,onSelected:this.onSelectAction})}},{key:"renderSlackActions",value:function e(){return this.props.slackActions.map(this.renderSingleSlackAction)}},{key:"renderSingleSlackAction",value:function e(t,a){if(!t)return null;if(g.a.isValidElement(t))return g.a.cloneElement(t,{key:a});var r=Object(O["omit"])(t,["iconType","iconSet"]);return g.a.createElement(Ir,{key:r.id,className:"p-message_actions_menu__"+r.id,action:r,onSelected:this.onSelectAction})}},{key:"render",value:function e(){var t=this.props,a=t.ts,r=t.channelId,i=t.messageContainerType,o=t.onLoad,l=t.onMenuItemSelected,c=t.onSelectAction,u=t.canRunAppAction,d=t.appActions,p=t.slackActions,h=t.handleMessageAction,v=s()(t,["ts","channelId","messageContainerType","onLoad","onMenuItemSelected","onSelectAction","canRunAppAction","appActions","slackActions","handleMessageAction"]);return g.a.createElement(ur["f"],n()({menuClassNames:"p-message_actions_menu",onMenuItemSelected:l,stripTerminalSeparators:true},v),this.renderSlackActions(),g.a.createElement(ur["d"],null),u&&this.renderAppActions())}}]);return t}(b["PureComponent"]);Rr.displayName="MessageActionsMenu";Rr.defaultProps=Pr;var Mr=function e(t,a){var r=a.channelId,i=a.ts;var s=a.messageContainerType||M["MESSAGE_CONTAINERS"].MESSAGE_PANE;var o=Object(x["a"])(t,r,i);var l=Object(S["isFeatureEnabled"])(t,"feature_file_threads");var c=Object(F["canRunAppAction"])(o,l);var u=Object(yr["canRunAppAction"])(t);var d=Object(it["d"])(t),p=d.actions;var h=u&&c;var v=Object(O["filter"])([tt(t,a),g.a.createElement(ur["d"],null),Object(O["includes"])([M["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,M["MESSAGE_CONTAINERS"].THREADS_VIEW,M["MESSAGE_CONTAINERS"].SLI_BRIEFING],s)&&Ke(t,a),_r(t,a),X(t,a),mr(t,a),Object(O["includes"])([M["MESSAGE_CONTAINERS"].MESSAGE_PANE,M["MESSAGE_CONTAINERS"].UNREAD_VIEW],s)&&pe(t,n()({},a,{allUnreads:s===M["MESSAGE_CONTAINERS"].UNREAD_VIEW})),Le(t,a),_e(t,a),oe(t,a),Ge(t,a),ae(t,a)]);return{slackActions:v,appActions:p,canRunAppAction:h,clogger:Object(E["a"])({state:t})}};var Dr=function e(t){return{onLoad:function e(){return t(Object(Ba["b"])())},handleMessageAction:function e(){for(var a=arguments.length,r=Array(a),n=0;n<a;n++)r[n]=arguments[n];return zt.apply(void 0,r.concat([t]))},recordMessageActionFrecencyEvent:function e(a){return t(R(a))}}};var xr=Object(y["connect"])(Mr,Dr)(Rr);var Fr=t["a"]=xr},,,,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(2);var v=a(0);var m=a(10);var f=a(54);var b=a(804);var g=a(26);var _=a.n(g);var y=a(13);var O=a(4);var k=a(34);var E=a(907);var C=a(1568);var j=a(142);var w=new m["b"]("prefs");var S={handleTimeChange:v["b"].func.isRequired,isDisabled:v["b"].bool.isRequired,time24:v["b"].bool.isRequired,dndBaseBeforeTime:v["b"].string,dndBaseAfterTime:v["b"].string,dndBeforePref:v["b"].string,dndBeforePrefValue:v["b"].string,dndAfterPref:v["b"].string,dndAfterPrefValue:v["b"].string,featureGranularDnd:v["b"].bool};var I={dndBaseBeforeTime:void 0,dndBaseAfterTime:void 0,dndBeforePref:void 0,dndBeforePrefValue:void 0,dndAfterPref:void 0,dndAfterPrefValue:void 0,featureGranularDnd:false};var T=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.featureGranularDnd,r=t.dndBaseBeforeTime,n=t.dndBaseAfterTime,i=t.dndBeforePref,s=t.dndAfterPref,o=t.dndBeforePrefValue,l=t.dndAfterPrefValue,c=t.time24,u=t.isDisabled,d=t.handleTimeChange;if(!a)return null;var v=Object(h["keys"])(E["a"]).map(function(e){return{label:c?e:E["a"][e],value:e}});var m=[].concat(_()(v),[{label:w.t("Midnight"),value:j["d"]}]);var f=o||r;var g=l||n;var y=Object(h["padStart"])(f,5,"0");var O=Object(h["padStart"])(g,5,"0");var k=m.filter(function(e){return e.value!==j["d"]});var S=Object(h["find"])(m,{value:y});var I=m.filter(function(e){return e.value>y});var T=Object(h["find"])(m,{value:O});var A=void 0;var N=void 0;S||(A=Object(C["a"])({time:y,time24:c}));T||(N=Object(C["a"])({time:O,time24:c}));return p.a.createElement("div",{className:"p-dnd_preferences__time_select_wrapper"},p.a.createElement(b["a"],{selectId:Object(h["uniqueId"])("start_notifications_select"),ariaLabel:w.t("Select the time to start receiving notifications"),options:k,selectedOption:S,onOptionSelected:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value;return d({value:a,type:"BEFORE",pref:i})},placeholderText:A,width:120,isDisabled:u}),p.a.createElement("span",{className:"p-dnd_preferences__time_select_to"},w.t("to")),p.a.createElement(b["a"],{selectId:Object(h["uniqueId"])("end_notifications_select"),ariaLabel:w.t("Select the time to stop receiving notifications"),options:I,selectedOption:T,onOptionSelected:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value;return d({value:a,type:"AFTER",pref:s})},key:I&&S.label,placeholderText:N,width:120,isDisabled:u}))}}]);return t}(d["Component"]);T.displayName="DndTimeSelect";T.defaultProps=I;var A=function e(t){return{featureGranularDnd:Object(O["isFeatureEnabled"])(t,"feature_granular_dnd"),time24:Object(k["f"])(t,"time24")}};var N=Object(y["connect"])(A)(T);var P=a(16);var R=a.n(P);var M=a(126);var D=new m["b"]("prefs");var x={isChecked:v["b"].bool.isRequired,handleAllDayChange:v["b"].func.isRequired,dndEnabledPref:v["b"].string,featureGranularDnd:v["b"].bool,className:v["b"].string};var F={dndEnabledPref:void 0,featureGranularDnd:false,className:void 0};var L=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.featureGranularDnd,r=t.className,n=t.isChecked,i=t.handleAllDayChange,s=t.dndEnabledPref;if(!a)return null;var o=Object(h["uniqueId"])("all_day_checkbox");var l=R()("p-dnd_preferences__all_day_label",r);return p.a.createElement(f["a"],{type:"inline",cursor:"pointer",text:D.t("All day"),htmlFor:o,className:l},p.a.createElement(M["a"],{id:o,checked:n,onChange:function e(t){return i(t,{pref:s})}}))}}]);return t}(d["Component"]);L.displayName="DndAllDayCheckbox";L.defaultProps=F;var B=L;var U=a(50);var q=new m["b"]("prefs");var G={day:v["b"].string.isRequired,isChecked:v["b"].bool.isRequired,isDisabled:v["b"].bool.isRequired,handleDayChange:v["b"].func.isRequired,dndEnabledPref:v["b"].string.isRequired,featureGranularDnd:v["b"].bool};var W={featureGranularDnd:false};var H=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.featureGranularDnd,r=t.day,n=t.isChecked,i=t.isDisabled,s=t.handleDayChange,o=t.dndEnabledPref;if(!a)return null;var l=Object(h["uniqueId"])("day_checkbox");var c=p.a.createElement(M["a"],{id:l,checked:n,disabled:i,onChange:function e(t){return s(t,{pref:o})}});var u=p.a.createElement(U["c"],{tip:q.t("To turn off notifications entirely, adjust your Notification Preferences."),zIndex:"above_fs"},p.a.createElement("span",null,c));return p.a.createElement(f["a"],{type:"inline",cursor:"pointer",text:r,htmlFor:l,className:"p-dnd_preferences__day_label",isDisabled:i},i?u:c)}}]);return t}(d["Component"]);H.displayName="DndDayCheckbox";H.defaultProps=W;var V=H;var K=new m["b"]("prefs");var z={dndEnabledDays:v["b"].objectOf(v["b"].string).isRequired,dndBeforeDays:v["b"].objectOf(v["b"].string).isRequired,dndAfterDays:v["b"].objectOf(v["b"].string).isRequired,handleTimeChange:v["b"].func.isRequired,handleAllDayChange:v["b"].func.isRequired,handleDayChange:v["b"].func.isRequired,featureGranularDnd:v["b"].bool};var Y={featureGranularDnd:false};var Q=6;var J=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"render",value:function e(){var t=this.props,a=t.featureGranularDnd,r=t.dndEnabledDays,n=t.dndBeforeDays,i=t.dndAfterDays,s=t.handleTimeChange,o=t.handleAllDayChange,l=t.handleDayChange;if(!a)return null;var c=[{day:K.t("Monday"),id:"monday",message:K.t("You won't receive notifications on Monday.")},{day:K.t("Tuesday"),id:"tuesday",message:K.t("You won't receive notifications on Tuesday.")},{day:K.t("Wednesday"),id:"wednesday",message:K.t("You won't receive notifications on Wednesday.")},{day:K.t("Thursday"),id:"thursday",message:K.t("You won't receive notifications on Thursday.")},{day:K.t("Friday"),id:"friday",message:K.t("You won't receive notifications on Friday.")},{day:K.t("Saturday"),id:"saturday",message:K.t("You won't receive notifications on Saturday.")},{day:K.t("Sunday"),id:"sunday",message:K.t("You won't receive notifications on Sunday.")}];var u=Object(h["size"])(Object(h["values"])(r).filter(function(e){return e===j["b"].ALL_DAY}));return p.a.createElement(d["Fragment"],null,c.map(function(e){var t=e.id,c=e.day,h=e.message;var v=t.toUpperCase();var m=r[t]!==j["b"].ALL_DAY;var f=r[t]===j["b"].DISABLED;return p.a.createElement("div",{key:t,className:"p-dnd_preferences__custom_day_section"},p.a.createElement(V,{day:c,isChecked:m,isDisabled:m&&u===Q,handleDayChange:l,dndEnabledPref:j["c"]["DND_ENABLED_"+v],featureGranularDnd:a}),!m&&p.a.createElement("p",{className:"p-dnd_preferences__notifs_disabled"},h),m&&p.a.createElement(d["Fragment"],null,p.a.createElement(N,{isDisabled:f,handleTimeChange:s,dndBeforePref:j["c"]["DND_BEFORE_"+v],dndAfterPref:j["c"]["DND_AFTER_"+v],dndBeforePrefValue:n[t],dndAfterPrefValue:i[t]}),p.a.createElement(B,{isChecked:f,handleAllDayChange:o,dndEnabledPref:j["c"]["DND_ENABLED_"+v],className:"p-dnd_preferences__checkbox_label",featureGranularDnd:a})))}))}}]);return t}(d["Component"]);J.displayName="DndCustomPreferences";J.defaultProps=Y;var Z=J;var X=a(1520);var $=new m["b"]("prefs");var ee={dndDays:v["b"].string.isRequired,dndEnabledDays:v["b"].objectOf(v["b"].string).isRequired,dndBeforeDays:v["b"].objectOf(v["b"].string).isRequired,dndAfterDays:v["b"].objectOf(v["b"].string).isRequired,dndBaseBeforeTime:v["b"].string.isRequired,dndBaseAfterTime:v["b"].string.isRequired,handleDndDaysChange:v["b"].func.isRequired,handleTimeChange:v["b"].func.isRequired,handleAllDayChange:v["b"].func.isRequired,handleDayChange:v["b"].func.isRequired,featureGranularDnd:v["b"].bool};var te={featureGranularDnd:false};var ae=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderDndDaysSelect",value:function e(){var t=this.props,a=t.featureGranularDnd,r=t.dndDays,n=t.handleDndDaysChange;if(!a)return null;var i=[{label:$.t("Every day"),value:j["a"].EVERY_DAY},{label:$.t("Weekdays"),value:j["a"].WEEKDAYS},{label:$.t("Custom"),value:j["a"].CUSTOM}];var s=Object(h["find"])(i,{value:r});return p.a.createElement(f["a"],{className:"p-dnd_preferences__dnd_days_label",text:$.t("Allow notifications:")},p.a.createElement(b["a"],{selectId:"dnd_days",options:i,selectedOption:s,onOptionSelected:n,width:160}))}},{key:"render",value:function e(){var t=this.props,a=t.featureGranularDnd,r=t.dndDays,n=t.dndEnabledDays,i=t.dndBeforeDays,s=t.dndAfterDays,o=t.dndBaseBeforeTime,l=t.dndBaseAfterTime,c=t.handleTimeChange,u=t.handleAllDayChange,h=t.handleDayChange;if(!a)return null;var v=r===j["a"].CUSTOM;var m=Object(X["a"])({dndDays:r,dndEnabledDays:n});return p.a.createElement(d["Fragment"],null,this.renderDndDaysSelect(),!v&&p.a.createElement(d["Fragment"],null,p.a.createElement(N,{isDisabled:m,handleTimeChange:c,dndBaseBeforeTime:o,dndBaseAfterTime:l}),p.a.createElement(B,{isChecked:m,handleAllDayChange:u,featureGranularDnd:a}),r===j["a"].WEEKDAYS&&p.a.createElement("p",{className:"p-dnd_preferences__subtext"},$.t("You won't receive notifications on Saturday or Sunday."))),v&&p.a.createElement(Z,{featureGranularDnd:a,dndEnabledDays:n,dndBeforeDays:i,dndAfterDays:s,handleTimeChange:c,handleAllDayChange:u,handleDayChange:h}))}}]);return t}(d["Component"]);ae.displayName="DndPreferences";ae.defaultProps=te;var re=t["a"]=ae},,,function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(13);var s=a(16);var o=a.n(s);var l=a(0);var c=a(35);var u=a(19);var d=a(4);var p=a(31);var h=a(11);var v=a(3235);var m=a(10);var f=a(1566);var b=new m["b"]("unavailable_channel");var g={isImOrMpim:l["b"].bool.isRequired,unavailableTeamId:l["b"].string.isRequired,featureEscGridMigrationsClient:l["b"].bool.isRequired,isThread:l["b"].bool};var _={isThread:false};var y=function e(t){var a=t.isThread,i=t.isImOrMpim,s=t.unavailableTeamId,o=t.featureEscGridMigrationsClient;if(!o)return null;var l=void 0;var c=n.a.createElement(f["a"],{teamId:s});l=a?b.t("This thread is currently unavailable"):b.rt("{teamName} is making changes to their workspace",{teamName:c});var u=void 0;u=a?b.rt("{teamName} is making changes to their workspace, and this thread will be unavailable until that process is complete.",{teamName:c}):i?b.t("This conversation will be unavailable until this process is complete."):b.t("This channel will be unavailable until this process is complete.");var d=cdn_url+"/1295a/img/enterprise/unavailable_channel.png";return n.a.createElement(r["Fragment"],null,n.a.createElement("img",{className:"p-unavailable_channel_image",src:d,srcSet:d+", "+d.replace(".png","@2x.png")+" 2x",alt:""}),n.a.createElement("h2",{className:"p-unavailable_channel_title"},l),n.a.createElement("div",{className:"p-unavailable_channel_content"},u))};y.displayName="UnavailableChannelBlocker";y.defaultProps=_;var O=y;var k=a(6);var E=a.n(k);var C=a(7);var j=a.n(C);var w=a(8);var S=a.n(w);var I=a(9);var T=a.n(I);var A=a(832);var N=a(49);var P=a(294);var R=new m["b"]("unavailable_channel");var M={isImOrMpim:l["b"].bool.isRequired,unavailableTeamId:l["b"].string.isRequired,featureEscGridMigrationsClient:l["b"].bool.isRequired,isThread:l["b"].bool};var D={isThread:false};var x=function(e){T()(t,e);function t(e){E()(this,t);var a=S()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={loading:false};a.handleReload=a.handleReload.bind(a);return a}j()(t,[{key:"handleReload",value:function e(){this.setState(function(){return{loading:true}});var t="UnavailableChannelReload: Remote team "+this.props.unavailableTeamId+" has migrated their data, user triggered client reload";Object(N["a"])()?Object(P["a"])({reason:t}):Object(P["b"])({reason:t,noCache:true})}},{key:"render",value:function e(){var t=this.props,a=t.isThread,i=t.isImOrMpim,s=t.unavailableTeamId,o=t.featureEscGridMigrationsClient;if(!o)return null;var l=void 0;l=a?R.t("Reload Slack to view this thread"):i?R.t("Reload Slack to view this conversation"):R.t("Reload Slack to view this channel");var c=n.a.createElement(f["a"],{teamId:s});var u=void 0;u=a?R.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this thread.",{teamName:c}):i?R.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this conversation.",{teamName:c}):R.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this channel.",{teamName:c});var d=cdn_url+"/e9645/img/enterprise/unavailable_channel_reload.png";return n.a.createElement(r["Fragment"],null,n.a.createElement("img",{className:"p-unavailable_channel_image p-unavailable_channel_image--reload",src:d,srcSet:d+", "+d.replace(".png","@2x.png")+" 2x",alt:""}),n.a.createElement("h2",{className:"p-unavailable_channel_title"},l),n.a.createElement("div",{className:"p-unavailable_channel_content"},n.a.createElement("p",null,u),n.a.createElement("div",{className:"align_center"},n.a.createElement(A["a"],{type:"primary",size:"large",onClick:this.handleReload,disabled:this.state.loading,loading:this.state.loading},R.t("Reload Slack")))))}}]);return t}(r["PureComponent"]);x.displayName="UnavailableChannelReload";x.defaultProps=D;var F=x;var L={isReloadRequired:l["b"].bool.isRequired,isImOrMpim:l["b"].bool.isRequired,unavailableTeamId:l["b"].string.isRequired,featureEscGridMigrationsClient:l["b"].bool.isRequired,isThread:l["b"].bool};var B={isThread:false};var U=function e(t){if(!t.featureEscGridMigrationsClient)return null;var a=t.isReloadRequired,r=t.isThread;var i=o()("p-unavailable_channel",{"p-unavailable_channel_thread":r});return n.a.createElement("div",{className:i},a?n.a.createElement(F,t):n.a.createElement(O,t))};U.displayName="UnavailableChannel";U.defaultProps=B;var q=function e(t,a){var r=a.unavailableTeamId,n=a.channelId;var i=Object(c["i"])(t,r);var s=Object(u["d"])(t,n);return{isReloadRequired:Object(p["externalOrgMigrated"])(i),isImOrMpim:Object(h["isIm"])(s)||Object(h["isMpim"])(s),featureEscGridMigrationsClient:Object(d["isFeatureEnabled"])(t,"feature_esc_grid_migrations_client")}};var G=Object(i["connect"])(q)(U);var W=t["a"]=G},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(0);var v=a(13);var m=a(16);var f=a.n(m);var b=a(207);var g=a(2);var _=a(692);var y=a(151);var O=a(4);var k=a(10);var E=a(181);var C=a(71);var j=a(899);var w=a(2845);var S={children:h["b"].func.isRequired};function I(e){var t=e.children;return p.a.createElement(j["a"],null,function(e){var a=e.width,r=e.height,n=e.measureRef;return p.a.createElement("div",{ref:n,className:"c-measure_container"},t({width:a,height:r}))})}I.displayName="MeasureContainer";var T=I;var A=a(537);var N=a(1067);var P=a(1369);var R=a(96);var M=a(801);var D=a(1818);var x=a(99);var F=a(897);var L=a(128);var B=a(40);var U=a.n(B);var q=a(783);var G=a(11);var W=a(19);var H=a(17);var V=a(50);var K=a(28);var z=new k["b"]("user_groups");var Y={userGroup:h["b"].object,defaultChannelNames:h["b"].arrayOf(h["b"].string),featureLazyUserGroups:h["b"].bool,showToggle:h["b"].bool,creator:h["b"].string};var Q={userGroup:{},defaultChannelNames:void 0,featureLazyUserGroups:false,showToggle:false,creator:void 0};var J=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onButtonClick=a.onButtonClick.bind(a);return a}s()(t,[{key:"onButtonClick",value:function e(t,a){var r=this.props.userGroup;Object(q["c"])({action:a,userGroup:r})}},{key:"maybeRenderDescription",value:function e(t){if(!this.props.featureLazyUserGroups)return null;var a=this.props.userGroup;var r=Object(x["e"])(a);if(!r)return null;return p.a.createElement("p",{className:t},r)}},{key:"maybeRenderHandle",value:function e(){var t=this.props.userGroup;var a=Object(x["f"])(t,{includeAtSign:true});if(!a)return null;return p.a.createElement("span",{className:"subtle_silver"},a)}},{key:"maybeRenderToggle",value:function e(){var t=this;var a=this.props.showToggle;if(!a)return null;return p.a.createElement(p.a.Fragment,null,p.a.createElement("a",{"data-action":"enable_user_group",className:"user_group_toggle_btn no_bottom_margin subtle_silver small small_right_padding",onClick:function e(a){return t.onButtonClick(a,"enable")},role:"link",tabIndex:"0"},p.a.createElement(V["c"],{position:"left",zIndex:"above_fs",tip:z.t("Enable group")},p.a.createElement("i",{className:"ts_icon ts_icon_power_off"}))))}},{key:"maybeRenderDefaultChannels",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=this.props.defaultChannelNames;if(!t||!t.length)return null;var a=Object(k["g"])(t,{react:true,noEscape:true}).join("");return p.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},p.a.createElement("span",{className:"bold"},z.t("Default channels: {channels}",{channels:a})))}},{key:"maybeRenderCreatedBy",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=this.props,a=t.userGroup,r=t.creator;if(!a&&(!a.created_by||!a.date_create))return null;var n=z.rt("Created by <strong>{creator}</strong> on {creationDate}",{creator:r,creationDate:U()(1e3*a.date_create).format("MMMM Do, YYYY")});return p.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},n)}},{key:"maybeRenderDisableButton",value:function e(){var t=this;var a=this.props.showToggle;if(!a)return null;return p.a.createElement(V["c"],{position:"bottom",zIndex:"above_fs",tip:z.t("Disable group")},p.a.createElement(K["d"],{size:"large",type:"outline",icon:"disable",className:"user_group_toggle_btn",title:""+z.t("Disable"),"data-action":"disable_user_group",onClick:function e(a){return t.onButtonClick(a,"disable")}}))}},{key:"renderDeactivatedRow",value:function e(){var t=this.props.userGroup;var a=Object(x["h"])(t);return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col span_4_of_6 small_padding no_bottom_margin"},p.a.createElement("p",{className:"no_bottom_margin subtle_silver"},p.a.createElement("span",{className:"bold"},a),z.t("(Disabled)"))),p.a.createElement("div",{className:"col span_2_of_6 small_padding no_bottom_margin float_right align_right"},this.maybeRenderToggle()))}},{key:"renderCount",value:function e(){var t=this.props.userGroup;var a=t.isExternal||Object(x["m"])(t)?p.a.createElement("i",{className:"ts_icon ts_icon_sync"}):null;return p.a.createElement("p",{className:"user_group_count no_bottom_margin float_right small subtle_silver"},a,p.a.createElement("i",{className:"ts_icon ts_icon_user"}),Object(x["l"])(t))}},{key:"renderSettingsButton",value:function e(){var t=this;return p.a.createElement(V["c"],{position:"bottom",tip:z.t("Edit group info"),zIndex:"above_fs"},p.a.createElement(K["d"],{size:"large",type:"outline",icon:"cog_o",title:""+z.t("Settings"),"data-action":"open_form",onClick:function e(a){return t.onButtonClick(a,"editInfo")}}))}},{key:"renderMemberButton",value:function e(){var t=this;var a=this.props.userGroup;var r=void 0;r=Object(x["m"])(a||a.is_external)?z.t("View group members"):z.t("Edit group members");return p.a.createElement(V["c"],{position:"bottom",tip:r,zIndex:"above_fs"},p.a.createElement(K["d"],{size:"large",type:"outline",icon:"user",title:""+z.t("Members"),"data-action":"edit_members",onClick:function e(a){return t.onButtonClick(a,"editMembers")}}))}},{key:"render",value:function e(){var t=this.props.userGroup;var a=Object(x["r"])(this.props.userGroup);if(!a)return this.renderDeactivatedRow();var r=Object(x["h"])(t);return p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"col span_3_of_4 small_padding no_bottom_margin"},p.a.createElement("p",{className:"bold no_bottom_margin"},r," ",this.maybeRenderHandle()),this.maybeRenderDescription("small no_bottom_margin"),this.maybeRenderDefaultChannels(),this.maybeRenderCreatedBy()),p.a.createElement("div",{className:"float_right right_padding"},this.renderCount(),p.a.createElement("p",{className:"user_group_actions user_group_actions--modern small no_bottom_margin"},this.maybeRenderDisableButton(),this.renderSettingsButton(),this.renderMemberButton())))}}]);return t}(d["Component"]);J.displayName="LegacyUserGroupBrowserListItem";J.defaultProps=Q;var Z=function e(t,a){var r=a.id;var n=Object(y["g"])(t,r);var i=Object(x["d"])(t,n,{includePrivateChannels:false});var s=i.map(function(e){if(!e)return null;var a=Object(W["d"])(t,e);if(!a)return null;var r=Object(G["getName"])(a);if(!r)return null;return"#"+r});s=Object(g["filter"])(s);var o=Object(H["getPrefCompliantMemberNameById"])(t,n.created_by);return{userGroup:n,featureLazyUserGroups:Object(O["isFeatureEnabled"])(t,"feature_lazy_user_groups"),defaultChannels:i,defaultChannelNames:s,creator:o,showDelete:!Object(x["m"])(n)&&!n.is_external,showToggle:Object(x["b"])(t)}};var X=Object(v["connect"])(Z)(J);var $=new k["b"]("user_groups");var ee={id:h["b"].string.isRequired,userGroup:h["b"].object,onClick:h["b"].func,featureLazyUserGroups:h["b"].bool,isUserGroupBrowser:h["b"].bool};var te={userGroup:{},onClick:g["noop"],featureLazyUserGroups:false,isUserGroupBrowser:false};var ae=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}s()(t,[{key:"onClick",value:function e(t){this.props.onClick(t,this.props.id);return Object(F["c"])(t,this.props.id)}},{key:"maybeRenderDescription",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=this.props.userGroup;var a=Object(x["e"])(t);if(!a)return null;return p.a.createElement("p",null,a)}},{key:"maybeRenderCountOrHandle",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=this.props.userGroup;var a=Object(x["l"])(t);var r=Object(x["f"])(t,{includeAtSign:false});if(!(a||r))return null;var n=$.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:a});r&&(n=n+" - "+Object(x["f"])(t));return p.a.createElement("p",{className:"subtle_silver tiny_bottom_margin"},n)}},{key:"renderRow",value:function e(){var t=this.props,a=t.userGroup,r=t.id,n=t.isUserGroupBrowser;if(n)return p.a.createElement(X,{id:r});return p.a.createElement("div",{className:"col span_5_of_6 small_padding no_bottom_margin"},p.a.createElement(L["a"],{"data-user-group-id":""+r,onClick:this.onClick},p.a.createElement("h4",null,Object(x["h"])(a)),this.maybeRenderDescription(),this.maybeRenderCountOrHandle()))}},{key:"render",value:function e(){if(!this.props.featureLazyUserGroups)return null;var t=this.props.id;return p.a.createElement("div",{className:"user_group_item small_padding bottom_border clearfix","data-qa":"user_group_list_item","data-user-group-id":""+t},this.renderRow())}}]);return t}(d["Component"]);ae.displayName="LegacyUserGroupListItem";ae.defaultProps=te;var re=function e(t,a){var r=a.id;return{userGroup:Object(y["g"])(t,r),featureLazyUserGroups:Object(O["isFeatureEnabled"])(t,"feature_lazy_user_groups")}};var ne=Object(v["connect"])(re)(ae);var ie=a(299);var se=new k["b"]("user_groups");var oe={isFlexpane:h["b"].bool,featureLazyUserGroups:h["b"].bool,featureSonicUserGroups:h["b"].bool};var le={isFlexpane:false,featureLazyUserGroups:false,featureSonicUserGroups:false};var ce=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"computeAtLabel",value:function e(t){var a=t;"group"===a&&(a="channel");var r=Object(ie["b"])({ms_name:a});return"@"+r}},{key:"renderContent",value:function e(){var t=this.props.isFlexpane;var a=t?null:f()("col","span_3_of_4");var r=f()("normal_padding",{dull_grey:t});var n=se.rt('While commands like <span className="mention">{atEveryone}</span>, <span className="mention">{atChannel}</span>, and <span className="mention">{atHere}</span> call the attention of all members in a conversation, User Groups let you choose exactly who should get your message.',{atEveryone:this.computeAtLabel("everyone"),atChannel:this.computeAtLabel("channel"),atHere:this.computeAtLabel("here"),fallbackHash:"b74e7333e097c646698fe696052060665b263452"});var i=se.rt('Choose a group name, like <span className="mention">@design</span> or <span className="mention">@marketing</span>, then select the group members. Now, when someone in your workspace mentions the User Group, only its members will be notified. You can even add those members to channels of your choice automatically!',{fallbackHash:"a7c79b0ec617bd1a98db5c6183b5e1f91d52cb31"});return p.a.createElement("div",{className:a},p.a.createElement("div",{className:r},p.a.createElement("p",{className:"user_groups_tip"},n),p.a.createElement("p",{className:"user_groups_tip"},i)))}},{key:"render",value:function e(){var t=this.props,a=t.isFlexpane,r=t.featureLazyUserGroups,n=t.featureSonicUserGroups;if(!r)return null;if(n)return null;var i=a?p.a.createElement("div",null,p.a.createElement("span",{className:"user_groups_img"})):null;var s=a?null:p.a.createElement("div",{className:"col span_1_of_4 no_right_padding"},p.a.createElement("span",{className:"user_groups_img"}));return p.a.createElement(d["Fragment"],null,i,this.renderContent(),s)}}]);return t}(d["PureComponent"]);ce.displayName="LegacyUserGroupEmptyState";ce.defaultProps=le;var ue=function e(t,a){var r=a.id;return{userGroup:Object(y["g"])(t,r),featureLazyUserGroups:Object(O["isFeatureEnabled"])(t,"feature_lazy_user_groups")}};var de=Object(v["connect"])(ue)(ce);var pe=a(2411);var he=new k["b"]("user_groups");var ve={userGroups:h["b"].arrayOf(h["b"].object),scrollmark:h["b"].shape({key:h["b"].string,offset:h["b"].number}),searchQuery:h["b"].string,setCursorMark:h["b"].func,fetchUserGroupsPost:h["b"].func,fetchDeactivatedUserGroupsPost:h["b"].func,saveScrollmark:h["b"].func,onCreateUserGroup:h["b"].func,onClearSearch:h["b"].func,isLegacy:h["b"].bool,telemeter:h["b"].object.isRequired,includeDeactivated:h["b"].bool,isUserGroupBrowser:h["b"].bool,featureLazyUserGroups:h["b"].bool,featureSonicUserGroups:h["b"].bool};var me={userGroups:[],scrollmark:void 0,searchQuery:void 0,setCursorMark:g["noop"],fetchUserGroupsPost:g["noop"],fetchDeactivatedUserGroupsPost:g["noop"],saveScrollmark:g["noop"],onCreateUserGroup:g["noop"],onClearSearch:g["noop"],isLegacy:false,includeDeactivated:false,isUserGroupBrowser:false,featureLazyUserGroups:false,featureSonicUserGroups:false};var fe=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onGroupClick=a.onGroupClick.bind(a);a.onScroll=a.onScroll.bind(a);a.setListRef=a.setListRef.bind(a);a.fetchPost=a.fetchPost.bind(a);a.handleFetchDeactivatedGroupsResponse=a.handleFetchDeactivatedGroupsResponse.bind(a);a.handleFetchActiveGroupsResponse=a.handleFetchActiveGroupsResponse.bind(a);a.fetchAround=a.fetchAround.bind(a);a.renderRow=a.renderRow.bind(a);a.maybeRenderList=a.maybeRenderList.bind(a);a.requestPost=null;a.keys=null;a.list=null;a.layout=new N["a"];a.totalGroups=0;a.isFirstFetch=!e.userGroups.length&&!e.searchQuery;a.state={reachedEnd:false,fetchingDeactivatedGroups:false};return a}s()(t,[{key:"componentDidMount",value:function e(){if(!this.props.scrollmark)return;var t=this.props.scrollmark,a=t.key,r=t.offset;this.layout.setAnchor(a,r);this.props.saveScrollmark(null)}},{key:"componentWillReceiveProps",value:function e(t){var a=this.props.searchQuery;if(t.searchQuery!==a){this.setState(function(){return{reachedEnd:false,fetchingDeactivatedGroups:false}});this.requestPost&&this.requestPost.cancel();this.requestPost=null;this.totalGroups=0;this.layout&&this.layout.setAnchor(false)}}},{key:"componentWillUnmount",value:function e(){if(this.requestPost){this.requestPost.cancel();this.requestPost=null}}},{key:"onGroupClick",value:function e(t,a){if(!this.list)return;if(!a)return;this.props.saveScrollmark({key:a,offset:this.layout.getOffsetForKey(a)-this.list.getScrollTop()})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"setListRef",value:function e(t){this.list=t}},{key:"handleFetchActiveGroupsResponse",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.items,r=t.num_found;this.totalGroups=r;if(this.props.userGroups.length>=this.totalGroups||!a.length)if(this.props.includeDeactivated){this.props.setCursorMark(null);this.setState(function(){return{fetchingDeactivatedGroups:true}})}else this.setState(function(){return{reachedEnd:true}})}},{key:"handleFetchDeactivatedGroupsResponse",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.items,r=t.num_found;var n=this.totalGroups+r;(this.props.userGroups.length>=n||!a.length)&&this.setState(function(){return{reachedEnd:true}})}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.state.reachedEnd)return false;this.requestPost=this.state.fetchingDeactivatedGroups?this.fetchDeactivatedGroups():this.fetchActiveGroups();this.isFirstFetch&&this.props.telemeter.mark("start_user_group_list_show");return this.requestPost.bind(this).finally(function(){t.requestPost=null;if(t.isFirstFetch){t.props.telemeter.measureAndClear("start_user_group_list_show","user_group_list_show_lazy");t.isFirstFetch=false}})}},{key:"fetchDeactivatedGroups",value:function e(){return this.props.fetchDeactivatedUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchDeactivatedGroupsResponse)}},{key:"fetchActiveGroups",value:function e(){return this.props.fetchUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchActiveGroupsResponse)}},{key:"fetchAround",value:function e(){if(this.requestPost||this.state.reachedEnd)return false;return this.fetchPost()}},{key:"maybeRenderList",value:function e(t){var a=this;if(!t.length&&this.state.reachedEnd)return this.renderEmptyListView();this.state.reachedEnd||t.push("Loading"+t.length);return p.a.createElement(T,null,function(e){var r=e.width,n=e.height;return p.a.createElement(A["a"],{width:r,height:n,keys:t,layout:a.layout,rowRenderer:a.renderRow,onScroll:a.onScroll,ref:a.setListRef,loadAround:a.fetchAround,loadPost:a.fetchPost})})}},{key:"renderRow",value:function e(t){if(!this.props.featureLazyUserGroups)return null;var a=this.keys[t];if(!a)return null;switch(a[0]){case"L":return p.a.createElement("div",{className:"margin_top_200"},p.a.createElement(R["a"],{color:"white"}));default:return this.renderUserGroup(t)}}},{key:"renderUserGroup",value:function e(t){var a=this.props,r=a.userGroups,n=a.isLegacy,i=a.featureLazyUserGroups,s=a.isUserGroupBrowser;var o=r[t].id;if(!o)return null;if(i&&n)return p.a.createElement(ne,{id:o,isUserGroupBrowser:s,onClick:this.onGroupClick});return p.a.createElement(D["a"],{id:o,onClick:this.onGroupClick})}},{key:"renderEmptyListView",value:function e(){var t=this.props,a=t.featureLazyUserGroups,r=t.featureSonicUserGroups,n=t.searchQuery,i=t.onClearSearch,s=t.onCreateUserGroup,o=t.isLegacy,l=t.isUserGroupBrowser;if(!a)return null;var c=void 0;var u=void 0;var d=void 0;var h=void 0;var v=!!n.length;if(v){u=he.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:n});d=he.t("Clear Search");h=i}else{if(o&&!r)return p.a.createElement(de,{isFlexpane:!l});if(Object(M["a"])()){c=he.t("Organize your team");d=he.t("Create a User Group");h=s}else c=he.t("No user groups yet");u=he.t("User groups make it easy to get the attention of many members at once.")}var m=f()({"p-user_group_list__empty_list":!v,"p-user_group_list__empty_search_results":v});return p.a.createElement("div",{className:m,"data-qa":"searchable_ug_list_empty_state"},p.a.createElement(P["a"],{title:c,description:u,primaryActionText:d,onClickPrimaryAction:h}))}},{key:"render",value:function e(){this.keys=this.props.includeDeactivated?this.props.userGroups.map(function(e){return e.id}):this.props.userGroups.filter(function(e){return!e.isDeactivated}).map(function(e){return e.id});return p.a.createElement("div",{className:"p-user_group_list","aria-live":"polite"},this.maybeRenderList(this.keys))}}]);return t}(d["PureComponent"]);fe.displayName="SearchableUserGroupsList";fe.defaultProps=me;var be=function e(t,a){var r=a.map(function(e){var a=t[e];if(!a)return null;return{id:a.id,_name_lc:a._name_lc,isDeactivated:!!a.date_delete}}).filter(function(e){return e});return Object(g["sortBy"])(r,["isDeactivated","_name_lc"])};var ge=Object(b["createSelector"])([y["b"],_["getFlexpaneUserGroups"]],be);var _e={getUserGroups:ge};var ye=t["a"]=Object(v["connect"])(function(e){return{userGroups:ge(e),scrollmark:Object(_["getScrollmark"])(e),searchQuery:Object(_["getSearchQuery"])(e),featureLazyUserGroups:Object(O["isFeatureEnabled"])(e,"feature_lazy_user_groups"),featureSonicUserGroups:Object(O["isFeatureEnabled"])(e,"feature_sonic_user_groups"),useGlobalNav:Object(E["b"])(e),telemeter:Object(C["c"])({state:e})}},{fetchUserGroupsPost:_["fetchUserGroupsPost"],saveScrollmark:_["saveScrollmark"],setSearchQuery:_["setSearchQuery"],setCursorMark:_["setCursorMark"],fetchDeactivatedUserGroupsPost:_["fetchDeactivatedUserGroupsPost"]})(fe)},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(15);var o=a(48);var l=a(3);var c=a.n(l);var u=a(6);var d=a.n(u);var p=a(7);var h=a.n(p);var v=a(8);var m=a.n(v);var f=a(9);var b=a.n(f);var g=a(13);var _=a(2);var y=a.n(_);var O=a(16);var k=a.n(O);var E=a(19);var C=a(478);var j=a(20);var w=Object(j["b"])("TS.files.gdrive.create");var S=Object(j["b"])("TS.menu.file.onGDriveCreateComplete");var I=a(1344);var T=a(10);var A=a(39);var N=a(152);var P=a(84);var R=a(54);var M=a(126);var D=a(179);var x=a(1537);var F=a(1538);var L=a(1328);var B=a(1539);var U=a(2387);var q=new T["b"]("create-gdoc-dialog");var G={type:i["b"].string,closeModal:i["b"].func,getShareableChannelId:i["b"].func,msgText:i["b"].string,setMsgText:i["b"].func,selectedChannel:i["b"].object,setSelectedChannel:i["b"].func,disallowedKeywordInMsgText:i["b"].string,canPostInSelectedChannel:i["b"].bool};var W={type:void 0,closeModal:y.a.noop,getShareableChannelId:y.a.noop,msgText:"",setMsgText:y.a.noop,selectedChannel:void 0,setSelectedChannel:y.a.noop,disallowedKeywordInMsgText:void 0,canPostInSelectedChannel:false};var H=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));y.a.bindAll(a,["onTextChange","onShareChannelChange","onGo","onCancel","onTitleInputChange","onShareWithChange","setTitleInputRef"]);a.titleInput=null;a.state={overMsgLengthLimit:false,titleInputValue:"",submitting:false,shareWith:false};return a}h()(t,[{key:"onTextChange",value:function e(t){var a=t.text,r=t.overLimit;this.props.setMsgText(a);this.setState(function(){return{overMsgLengthLimit:r}})}},{key:"onShareChannelChange",value:function e(t){this.props.setSelectedChannel(t)}},{key:"onGo",value:function e(){if(this.isGoButtonDisabled())return;this.createGDocOnGo()}},{key:"onCancel",value:function e(){S(false)}},{key:"onTitleInputChange",value:function e(t){this.setState(function(){return{titleInputValue:t}})}},{key:"onShareWithChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{shareWith:!!a}})}},{key:"getCleanMsgText",value:function e(){var t=Object(C["a"])(this.props.msgText);return y.a.trim(t)}},{key:"getDialogTitle",value:function e(){var t=this.props.type;switch(t){case"document":return q.t("Create a Google Document");case"presentation":return q.t("Create a Google Presentation");case"spreadsheet":return q.t("Create a Google Spreadsheet");default:return q.t("Create a Google file")}}},{key:"setTitleInputRef",value:function e(t){if(!t)return;this.titleInput=t;this.focusTitleInput()}},{key:"focusTitleInput",value:function e(){this.titleInput&&this.titleInput.focus()}},{key:"isGoButtonDisabled",value:function e(){var t=this.props,a=t.disallowedKeywordInMsgText,r=t.canPostInSelectedChannel;var n=this.state,i=n.overMsgLengthLimit,s=n.titleInputValue,o=n.submitting;var l=s&&s.length>A["MAX_FILENAME_LENGTH"];return!r||!!a||i||l||o}},{key:"createGDocOnGo",value:function e(){var t=this;var a=this.props,r=a.selectedChannel,n=a.getShareableChannelId,i=a.type;var s=this.state,o=s.titleInputValue,l=s.shareWith;var c=r&&r.id;if(!c)return;n({channelOrMemberId:c}).then(function(e){var a=t.getCleanMsgText();var r=o||"Untitled";var n={title:r,channel:l?e:null,comment:l?a:null};w(i,n).then(function(){t.setState(function(){return{submitting:false}});t.props.closeModal()})});this.setState(function(){return{submitting:true}})}},{key:"renderChannelPicker",value:function e(){var t=this.props.selectedChannel;var a=this.state.shareWith;var r=t&&t.id;return n.a.createElement(F["a"],{onChange:this.onShareChannelChange,initialChannelId:r,isDisabled:!a})}},{key:"renderShareAlert",value:function e(){var t=this.state.shareWith;if(!t)return null;var a=Object(B["a"])(c()({},this.props));if(!a)return null;return n.a.createElement("div",{className:"p-share_dialog__section"},n.a.createElement(N["d"],{type:"inline",level:"warning",className:"margin_bottom_100"},a))}},{key:"renderShareWith",value:function e(){var t=this.state.shareWith;var a="create-gdoc-share-with";return n.a.createElement(R["a"],{text:q.t("Share with:"),htmlFor:a,type:"inline"},n.a.createElement(M["a"],{id:a,defaultChecked:t,onChange:this.onShareWithChange}))}},{key:"renderTitleInput",value:function e(){var t=this.state.titleInputValue;var a="p-create_gdoc_dialog__title";return n.a.createElement("div",{className:"p-share_dialog__section p-share_dialog__section_bottom_padding"},n.a.createElement(R["a"],{htmlFor:a,text:q.t("Title"),optional:true},n.a.createElement(D["a"],{id:a,name:a,maxCharacterLimit:A["MAX_FILENAME_LENGTH"],counterMinimumCharacters:A["MIN_FILENAME_CHARACTERS_BEFORE_WARNING"],onChange:this.onTitleInputChange,value:t,ref:this.setTitleInputRef})))}},{key:"renderShareWithPicker",value:function e(){return n.a.createElement("div",{className:"p-share_dialog__section p-share_dialog__create_gdoc_share_with"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderMessageInput",value:function e(){var t=this.props.msgText;var a=this.state.shareWith;var r=q.t("Add a message, if you\u2019d like.");var i=k()("p-share_dialog__section","p-share_dialog__create_gdoc_message_input",{"p-share_dialog__create_gdoc_message_input--hide":!a});return n.a.createElement("div",{className:i},n.a.createElement(x["a"],{text:t,onTextChange:this.onTextChange,placeholder:r,ariaLabel:r,onEnter:this.onGo}))}},{key:"render",value:function e(){var t=false;return n.a.createElement(P["a"],{className:"p-create_gdoc_dialog__modal",title:this.getDialogTitle(),shouldCloseOnOverlayClick:t,useSlackScrollbarWithPadding:true,goButtonText:q.t("Create"),onGo:this.onGo,onClose:this.onCancel,onCancel:this.onCancel,goButtonIsDisabled:this.isGoButtonDisabled()},this.renderTitleInput(),this.renderShareWithPicker(),this.renderShareAlert(),this.renderMessageInput())}}]);return t}(r["Component"]);H.displayName="CreateGDocDialog";H.defaultProps=W;function V(e,t){var a=t.selectedChannelId;var r=Object(L["b"])(e,t);var n=Object(E["d"])(e,a)||Object(E["i"])(e,a);return c()({},r,{selectedChannel:n})}var K={closeModal:o["closeModal"],getShareableChannelId:I["a"]};var z=Object(g["connect"])(V,K)(H);var Y=Object(L["a"])(z);var Q=Object(s["b"])("Opens the create gdoc file dialog",function(e,t,a){e(Object(o["openModal"])({element:n.a.createElement(Y,a)}))});Q.propTypes={type:i["b"].string,displayType:i["b"].string,initialChannelId:i["b"].string};var J=t["a"]=Q},,function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(1);var v=a.n(h);var m=a(13);var f=a(2);var b=a(0);var g=a(10);var _=a(51);var y=a(132);var O=a(4);var k=a(24);var E=a(34);var C=a(17);var j=a(1823);var w=a(142);var S=a(1520);var I=a(907);var T=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.type,r=t.value,n=t.endTime;return"BEFORE"===a&&r>=Object(f["padStart"])(n,5,"0")};var A=function e(t){if(!t)return null;var a=Object.keys(I["a"]);return Object(f["find"])(a,function(e){return e>t})||w["d"]};var N=function(e){if(!e)return null;return e.split("_")[2]};var P=a(2112);var R=new g["b"]("prefs");var M={dndDays:b["b"].string.isRequired,dndEnabledDays:b["b"].objectOf(b["b"].string).isRequired,dndBeforeDays:b["b"].objectOf(b["b"].string).isRequired,dndAfterDays:b["b"].objectOf(b["b"].string).isRequired,dndBaseBeforeTime:b["b"].string.isRequired,dndBaseAfterTime:b["b"].string.isRequired,setUserPrefByApi:b["b"].func.isRequired,setMultipleUserPrefsByApi:b["b"].func.isRequired,tzLabel:b["b"].string,changePrefsActiveSection:b["b"].func,featureGranularDnd:b["b"].bool};var D={tzLabel:"",changePrefsActiveSection:f["noop"],featureGranularDnd:false};var x=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.openTzPreferences=a.openTzPreferences.bind(a);a.handleDndDaysChange=a.handleDndDaysChange.bind(a);a.handleTimeChange=a.handleTimeChange.bind(a);a.handleAllDayChange=a.handleAllDayChange.bind(a);a.handleDayChange=a.handleDayChange.bind(a);return a}l()(t,[{key:"openTzPreferences",value:function e(){var t=this.props.changePrefsActiveSection;t({sectionId:"language_region",subsectionId:"prefs_timezone"})}},{key:"handleDndDaysChange",value:function e(){var t;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.value;var i=this.props,s=i.dndBaseBeforeTime,o=i.dndBaseAfterTime,l=i.dndEnabledDays;if(r===w["a"].CUSTOM){this.props.setUserPrefByApi({pref:w["c"].DND_DAYS,value:r});return}var c=Object(S["a"])({dndDays:r,dndEnabledDays:l});var u=c?w["b"].DISABLED:w["b"].PARTIAL;var d=r===w["a"].WEEKDAYS;this.props.setMultipleUserPrefsByApi((t={},n()(t,w["c"].DND_DAYS,r),n()(t,w["c"].DND_BEFORE_MONDAY,s),n()(t,w["c"].DND_BEFORE_TUESDAY,s),n()(t,w["c"].DND_BEFORE_WEDNESDAY,s),n()(t,w["c"].DND_BEFORE_THURSDAY,s),n()(t,w["c"].DND_BEFORE_FRIDAY,s),n()(t,w["c"].DND_BEFORE_SATURDAY,s),n()(t,w["c"].DND_BEFORE_SUNDAY,s),n()(t,w["c"].DND_AFTER_MONDAY,o),n()(t,w["c"].DND_AFTER_TUESDAY,o),n()(t,w["c"].DND_AFTER_WEDNESDAY,o),n()(t,w["c"].DND_AFTER_THURSDAY,o),n()(t,w["c"].DND_AFTER_FRIDAY,o),n()(t,w["c"].DND_AFTER_SATURDAY,o),n()(t,w["c"].DND_AFTER_SUNDAY,o),n()(t,w["c"].DND_ENABLED_MONDAY,u),n()(t,w["c"].DND_ENABLED_TUESDAY,u),n()(t,w["c"].DND_ENABLED_WEDNESDAY,u),n()(t,w["c"].DND_ENABLED_THURSDAY,u),n()(t,w["c"].DND_ENABLED_FRIDAY,u),n()(t,w["c"].DND_ENABLED_SATURDAY,d?w["b"].ALL_DAY:u),n()(t,w["c"].DND_ENABLED_SUNDAY,d?w["b"].ALL_DAY:u),t))}},{key:"handleTimeChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value,r=t.type,i=t.pref;var s=this.props,o=s.dndDays,l=s.dndBaseAfterTime,c=s.dndAfterDays;if(o===w["a"].CUSTOM){var u=N(i);if(T({type:r,value:a,endTime:c[u]})){var d;var p=A(a);var h=w["c"]["DND_AFTER_"+u.toUpperCase()];this.props.setMultipleUserPrefsByApi((d={},n()(d,i,a),n()(d,h,p),d))}else this.props.setUserPrefByApi({pref:i,value:a});return}if(T({type:r,value:a,endTime:l})){var v;var m=A(a);this.props.setMultipleUserPrefsByApi((v={},n()(v,w["c"].DND_BEFORE_MONDAY,a),n()(v,w["c"].DND_BEFORE_TUESDAY,a),n()(v,w["c"].DND_BEFORE_WEDNESDAY,a),n()(v,w["c"].DND_BEFORE_THURSDAY,a),n()(v,w["c"].DND_BEFORE_FRIDAY,a),n()(v,w["c"].DND_BEFORE_SATURDAY,a),n()(v,w["c"].DND_BEFORE_SUNDAY,a),n()(v,w["c"].DND_AFTER_MONDAY,m),n()(v,w["c"].DND_AFTER_TUESDAY,m),n()(v,w["c"].DND_AFTER_WEDNESDAY,m),n()(v,w["c"].DND_AFTER_THURSDAY,m),n()(v,w["c"].DND_AFTER_FRIDAY,m),n()(v,w["c"].DND_AFTER_SATURDAY,m),n()(v,w["c"].DND_AFTER_SUNDAY,m),v))}else{var f;this.props.setMultipleUserPrefsByApi((f={},n()(f,w["c"]["DND_"+r+"_MONDAY"],a),n()(f,w["c"]["DND_"+r+"_TUESDAY"],a),n()(f,w["c"]["DND_"+r+"_WEDNESDAY"],a),n()(f,w["c"]["DND_"+r+"_THURSDAY"],a),n()(f,w["c"]["DND_"+r+"_FRIDAY"],a),n()(f,w["c"]["DND_"+r+"_SATURDAY"],a),n()(f,w["c"]["DND_"+r+"_SUNDAY"],a),f))}}},{key:"handleAllDayChange",value:function e(t){var a;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.pref;var s=this.props.dndDays;var o=t.target.checked?w["b"].DISABLED:w["b"].PARTIAL;if(s===w["a"].CUSTOM){this.props.setUserPrefByApi({pref:i,value:o});return}var l=s===w["a"].WEEKDAYS;this.props.setMultipleUserPrefsByApi((a={},n()(a,w["c"].DND_ENABLED_MONDAY,o),n()(a,w["c"].DND_ENABLED_TUESDAY,o),n()(a,w["c"].DND_ENABLED_WEDNESDAY,o),n()(a,w["c"].DND_ENABLED_THURSDAY,o),n()(a,w["c"].DND_ENABLED_FRIDAY,o),n()(a,w["c"].DND_ENABLED_SATURDAY,l?w["b"].ALL_DAY:o),n()(a,w["c"].DND_ENABLED_SUNDAY,l?w["b"].ALL_DAY:o),a))}},{key:"handleDayChange",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.pref;var n=t.target.checked?w["b"].PARTIAL:w["b"].ALL_DAY;this.props.setUserPrefByApi({pref:r,value:n})}},{key:"render",value:function e(){var t=this.props,a=t.featureGranularDnd,r=t.dndDays,n=t.dndEnabledDays,i=t.dndBeforeDays,s=t.dndAfterDays,o=t.dndBaseBeforeTime,l=t.dndBaseAfterTime,c=t.tzLabel;if(!a)return null;return v.a.createElement(h["Fragment"],null,v.a.createElement("p",null,R.rt("Slack will only allow notifications during the times you choose. Outside those hours, you'll be in {doNotDisturb}.",{doNotDisturb:v.a.createElement(_["a"],{href:"https://get.slack.help/hc/en-us/articles/214908388-Pause-notifications-with-Do-Not-Disturb"},R.t("Do Not Disturb"))})),v.a.createElement(j["a"],{dndDays:r,dndEnabledDays:n,dndBeforeDays:i,dndAfterDays:s,dndBaseBeforeTime:o,dndBaseAfterTime:l,handleDndDaysChange:this.handleDndDaysChange,handleTimeChange:this.handleTimeChange,handleAllDayChange:this.handleAllDayChange,handleDayChange:this.handleDayChange,featureGranularDnd:a}),v.a.createElement("p",null,c+" | ",v.a.createElement(_["a"],{onClick:this.openTzPreferences},R.t("Change"))))}}]);return t}(h["Component"]);x.displayName="DndUserPreferences";x.defaultProps=D;var F=function e(t){var a=Object(O["getCurrentUserId"])(t);var r=Object(k["d"])(t,a);return{featureGranularDnd:Object(O["isFeatureEnabled"])(t,"feature_granular_dnd"),tzLabel:Object(C["getMemberTzLabel"])(r),dndDays:Object(E["f"])(t,"dnd_days"),dndEnabledDays:{monday:Object(E["f"])(t,"dnd_enabled_monday"),tuesday:Object(E["f"])(t,"dnd_enabled_tuesday"),wednesday:Object(E["f"])(t,"dnd_enabled_wednesday"),thursday:Object(E["f"])(t,"dnd_enabled_thursday"),friday:Object(E["f"])(t,"dnd_enabled_friday"),saturday:Object(E["f"])(t,"dnd_enabled_saturday"),sunday:Object(E["f"])(t,"dnd_enabled_sunday")},dndBeforeDays:{monday:Object(E["f"])(t,"dnd_before_monday"),tuesday:Object(E["f"])(t,"dnd_before_tuesday"),wednesday:Object(E["f"])(t,"dnd_before_wednesday"),thursday:Object(E["f"])(t,"dnd_before_thursday"),friday:Object(E["f"])(t,"dnd_before_friday"),saturday:Object(E["f"])(t,"dnd_before_saturday"),sunday:Object(E["f"])(t,"dnd_before_sunday")},dndAfterDays:{monday:Object(E["f"])(t,"dnd_after_monday"),tuesday:Object(E["f"])(t,"dnd_after_tuesday"),wednesday:Object(E["f"])(t,"dnd_after_wednesday"),thursday:Object(E["f"])(t,"dnd_after_thursday"),friday:Object(E["f"])(t,"dnd_after_friday"),saturday:Object(E["f"])(t,"dnd_after_saturday"),sunday:Object(E["f"])(t,"dnd_after_sunday")},dndBaseBeforeTime:Object(E["f"])(t,"dnd_before_monday"),dndBaseAfterTime:Object(E["f"])(t,"dnd_after_monday")}};var L=function e(t){return{setUserPrefByApi:function e(a){return t(Object(y["c"])(a))},setMultipleUserPrefsByApi:function e(a){return t(Object(y["b"])(a))}}};var B=t["a"]=Object(m["connect"])(F,L)(x)},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(0);var p=a(1);var h=a.n(p);var v=a(2);var m=a(16);var f=a.n(m);var b=a(3044);var g={title:d["b"].string,titleClass:d["b"].string,description:d["b"].node,className:d["b"].string};var _={title:"",titleClass:"",description:null,className:""};var y=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderTitle",value:function e(){if(!this.props.title)return null;var t=this.props,a=t.titleClass,r=t.className;var n=f()(r,a);return h.a.createElement("h4",{className:n},this.props.title)}},{key:"renderDescription",value:function e(){if(!this.props.description)return null;return h.a.createElement("span",{className:"sk_dark_grey"},this.props.description)}},{key:"render",value:function e(){return h.a.createElement("div",{className:"p-ent_settings_item_header"},this.renderTitle(),this.renderDescription())}}]);return t}(p["PureComponent"]);y.displayName="SettingsItemHeader";y.defaultProps=_;var O=y;var k=a(10);var E=a(28);var C=a(3046);var j=new k["b"]("enterprise_settings");var w={editOnly:d["b"].bool,enabled:d["b"].bool,onEnable:d["b"].func,onDisable:d["b"].func,onEdit:d["b"].func.isRequired};var S={editOnly:false,enabled:false,onEnable:v["noop"],onDisable:v["noop"]};var I=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onEnable=a.onEnable.bind(a);a.onDisable=a.onDisable.bind(a);a.onEdit=a.onEdit.bind(a);return a}s()(t,[{key:"onEnable",value:function e(t){t.stopPropagation();this.props.onEnable(t)}},{key:"onDisable",value:function e(t){t.stopPropagation();this.props.onDisable(t)}},{key:"onEdit",value:function e(t){t.stopPropagation();this.props.onEdit(t)}},{key:"renderEnable",value:function e(){var t=j.t("Enable");return h.a.createElement("div",{className:"p-ent_settings_item_button_control"},h.a.createElement(E["d"],{type:"outline",size:"small",onClick:this.onEnable},t))}},{key:"renderDisable",value:function e(){var t=j.t("Disable");var a=j.t("Edit");return h.a.createElement("div",{className:"p-ent_settings_item_button_control"},h.a.createElement(E["d"],{type:"danger",size:"small",onClick:this.onDisable},t),h.a.createElement(E["d"],{type:"outline",size:"small",onClick:this.onEdit,className:"margin_left_50"},a))}},{key:"renderEdit",value:function e(){var t=j.t("Edit");return h.a.createElement("div",{className:"p-ent_settings_item_button_control"},h.a.createElement(E["d"],{type:"outline",size:"small",onClick:this.onEdit,className:"margin_left_50"},t))}},{key:"renderButtonControls",value:function e(){var t=this.props,a=t.editOnly,r=t.enabled;if(a)return this.renderEdit();return r?this.renderDisable():this.renderEnable()}},{key:"render",value:function e(){return this.renderButtonControls()}}]);return t}(p["PureComponent"]);I.displayName="SettingsItemButtonControl";I.defaultProps=S;var T=I;var A=a(3048);var N={label:d["b"].string.isRequired,state:d["b"].string.isRequired,type:d["b"].string.isRequired,description:d["b"].node,onClick:d["b"].func,control:d["b"].object.isRequired};var P={description:null,onClick:v["noop"]};var R=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderLabel",value:function e(){return h.a.createElement(O,{title:this.props.label,className:"p_ent_settings_item__label"})}},{key:"renderState",value:function e(){var t=this.props,a=t.state,r=t.description;return h.a.createElement(O,{title:a,description:r,className:"bold"})}},{key:"renderButtonControl",value:function e(){var t=this.props.control,a=t.editOnly,r=t.enabled,n=t.onEnable,i=t.onDisable,s=t.onEdit;return h.a.createElement(T,{editOnly:a,enabled:r,onEnable:n,onDisable:i,onEdit:s})}},{key:"renderControl",value:function e(){return"button"===this.props.control.type?this.renderButtonControl():null}},{key:"render",value:function e(){return h.a.createElement("div",{className:"p-ent_settings_item",onClick:this.props.onClick,role:"presentation"},this.renderLabel(),this.renderState(),this.renderControl())}}]);return t}(p["PureComponent"]);R.displayName="SettingsItem";R.defaultProps=P;var M=t["a"]=R},,,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(0);var p=a(1);var h=a.n(p);var v=a(13);var m=a(16);var f=a.n(m);var b=a(318);var g=a(4);var _=a(124);var y=a(10);var O=a(777);var k=a(431);var E=a(1495);var C=a(2);var j=a(28);var w=a(22);var S=a(50);var I=a(1166);var T=new y["b"]("emoji");var A={onClick:d["b"].func.isRequired,onEmojiSelected:d["b"].func,featureSonicEmoji:d["b"].bool};var N={onEmojiSelected:C["noop"],featureSonicEmoji:false};function P(e){var t=e.onClick,a=e.onEmojiSelected,r=e.featureSonicEmoji;var n=h.a.createElement(S["c"],{tip:T.t("Add reaction..."),delay:S["a"]},h.a.createElement(j["c"],{className:"c-reaction_add",onClick:t,"aria-label":T.t("Add reaction..."),"data-qa":"add_reaction_button"},h.a.createElement("div",{className:"c-reaction_add__container"},h.a.createElement(w["b"],{type:"small-reaction-bg",className:"c-reaction_add__icon c-reaction_add__icon--bg","aria-hidden":true}),h.a.createElement(w["b"],{type:"small-reaction",className:"c-reaction_add__icon c-reaction_add__icon--fg","aria-hidden":true}))));if(r)return h.a.createElement(I["a"],{onEmojiSelected:a,showHandyReactions:true},n);return n}P.defaultProps=N;var R=a(2392);var M=new y["b"]("reactions");var D={reactions:d["b"].arrayOf(d["b"].shape(E["b"])),reactionKey:d["b"].string,currentUser:d["b"].string,className:d["b"].string,emojiMode:d["b"].string,changeReactionFromUserAction:d["b"].func.isRequired,featureSonicEmoji:d["b"].bool};var x={reactions:null,reactionKey:null,currentUser:null,className:null,emojiMode:null,featureSonicEmoji:false};var F=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onAddReaction=e.onAddReaction.bind(e);e.onReactionClick=e.onReactionClick.bind(e);e.onReactionEmojiPickerSelected=e.onReactionEmojiPickerSelected.bind(e);e.onFocusEnter=e.onFocusEnter.bind(e);e.onFocusLeave=e.onFocusLeave.bind(e);e.state={hasKeyboardFocus:false};return e}s()(t,[{key:"onAddReaction",value:function e(t){Object(O["a"])({e:t,rxn_key:this.props.reactionKey})}},{key:"onReactionClick",value:function e(t,a){var r=this.props.reactionKey;this.props.changeReactionFromUserAction({key:r,name:t,adding:!a})}},{key:"onReactionEmojiPickerSelected",value:function e(t,a){this.onReactionClick(a)}},{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent;a&&"keydown"===a.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.reactions,n=a.reactionKey,i=a.currentUser,s=a.emojiMode,o=a.featureSonicEmoji;if(!r||0===r.length)return null;var l=r.map(function(e){var a=e.count,r=e.name,o=e.users,l=e.url;return h.a.createElement(E["a"],{name:r,count:a,users:o,url:l,currentUser:i,key:r,reactionKey:n,onClick:t.onReactionClick,emojiMode:s})}).concat(h.a.createElement(P,{onClick:this.onAddReaction,onEmojiSelected:this.onReactionEmojiPickerSelected,key:"reaction-add-button",featureSonicEmoji:o}));var c=f()(this.props.className,"c-reaction_bar",{"c-reaction_bar--focus":this.state.hasKeyboardFocus});var u=M.t("Reactions",{note:"Screenreader: Label for blind users"});return h.a.createElement(k["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},h.a.createElement("div",{className:c,role:"group","aria-label":u},l))}}]);return t}(h.a.PureComponent);F.displayName="ReactionBar";F.defaultProps=x;var L=function e(t,a){return{reactions:Object(b["getReactionsForKey"])(t,a.reactionKey),currentUser:Object(g["getCurrentUserId"])(t),emojiMode:Object(_["i"])(t),featureSonicEmoji:Object(g["isFeatureEnabled"])(t,"feature_sonic_emoji")}};var B={changeReactionFromUserAction:b["changeReactionFromUserAction"]};var U=Object(v["connect"])(L,B)(F);var q=t["a"]=U},function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(3);var s=a.n(i);var o=a(6);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var h=a(9);var v=a.n(h);var m=a(2);var f=a.n(m);var b=a(0);var g=a(1);var _=a.n(g);var y=a(13);var O=a(107);var k=a.n(O);var E=a(4);var C=a(23);var j=a(48);var w=a(122);var S=a(67);var I=a(19);var T=a(68);var A=a(884);var N=a(24);var P=a(358);var R=a(1550);var M=a(1549);var D=a(1563);var x=a(39);var F=a(1048);var L=a(15);var B=a(505);var U=Object(L["b"])("Count the number of characters over the message length limit",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.text,i=a.delta,s=a.featureWysiwygComposer;var o=Object(B["b"])(t(),{channelId:r,text:n,delta:i,featureWysiwygComposer:s}),l=o.rawText,c=o.processedDelta;if(s)return Math.max(0,Object(F["a"])(c)-x["MAX_MESSAGE_INPUT_LENGTH"]);return Math.max(0,l.length-x["MAX_MESSAGE_INPUT_LENGTH"])});U.propTypes={channelId:b["b"].string,text:b["b"].string};var q=U;var G=a(11);var W=a(41);var H=a(28);var V=a(317);var K=a(22);var z=a(515);var Y=a(1097);var Q=a(10);var J=a(892);var Z=a(164);var X=a(860);var $=a(1752);function ee(e,t){return Object($["a"])(new k.a(e),new k.a(t))}var te=a(1841);var ae=a(4168);var re=a(799);var ne=a(777);var ie=a(365);var se=a(384);var oe=a(1345);var le=60;var ce=1e3;var ue=new Q["b"]("message");var de={ts:b["b"].string.isRequired,originalMessageTextUsedForDeletionOnly:b["b"].string.isRequired,originalMessageContents:b["b"].object.isRequired,messageHasText:b["b"].bool.isRequired,saveMessageEdit:b["b"].func,channelId:b["b"].string,teamId:b["b"].string,viewContext:b["b"].string,isSelfIm:b["b"].bool,setDidRequestToStopEditing:b["b"].func,updateEditState:b["b"].func,stopEditingMessage:b["b"].func,updateHasUnsavedChanges:b["b"].func,canDelete:b["b"].bool,canUnbroadcast:b["b"].bool,initialEditOps:b["b"].arrayOf(b["b"].object),initialContents:b["b"].object,didRequestToStopEditing:b["b"].bool,editWindowMin:b["b"].number,isAdminUser:b["b"].bool,useJumbomoji:b["b"].bool,messageContainerType:b["b"].string,openModal:b["b"].func,countCharsOverMessageLimit:b["b"].func,featureFileThreads:b["b"].bool,featureSonicInputs:b["b"].bool,clientToolBar:b["b"].bool,featureWysiwygComposer:b["b"].bool};var pe={saveMessageEdit:f.a.noop,channelId:null,teamId:void 0,viewContext:void 0,isSelfIm:false,setDidRequestToStopEditing:f.a.noop,updateEditState:f.a.noop,stopEditingMessage:f.a.noop,updateHasUnsavedChanges:f.a.noop,canDelete:true,canUnbroadcast:false,initialEditOps:void 0,initialContents:void 0,didRequestToStopEditing:false,editWindowMin:-1,isAdminUser:false,useJumbomoji:false,messageContainerType:void 0,openModal:f.a.noop,countCharsOverMessageLimit:f.a.identity,featureFileThreads:false,featureSonicInputs:false,clientToolBar:false,featureWysiwygComposer:false};var he="message_pane_edit_input";function ve(e){Object(ne["a"])({e:e,input_to_fill:"#"+he,offset_y:-8})}var me=function(e){v()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setTextyRef=a.setTextyRef.bind(a);a.maybeSave=a.maybeSave.bind(a);a.onTimerInterval=a.onTimerInterval.bind(a);a.renderTimeoutErrorDialog=a.renderTimeoutErrorDialog.bind(a);a.renderLengthErrorDialog=a.renderLengthErrorDialog.bind(a);a.renderUnknownErrorDialog=a.renderUnknownErrorDialog.bind(a);a.stopEditingMessage=a.stopEditingMessage.bind(a);a.handleSaveEditError=a.handleSaveEditError.bind(a);a.onEnter=a.onEnter.bind(a);a.onTextChange=a.onTextChange.bind(a);a.renderInput=a.renderInput.bind(a);a.texty=null;a.syncEditStateOnUnmount=true;a.editWindowTimeout=null;a.componentDidUnmount=false;a.enableBroadcastKeywords=!(a.props.messageContainerType===x["MESSAGE_CONTAINERS"].THREADS_FLEXPANE||a.props.messageContainerType===x["MESSAGE_CONTAINERS"].THREADS_VIEW);a.textyModules={tabcomplete:{searchOptions:{},positionMenu:function e(t){t.style.width=a.texty.container.offsetWidth+"px";Object(J["a"])(t,a.texty.container)},completers:["channels","emoji","members"]}};a.state={editSecondsRemaining:a.countRemainingSeconds(),numCharsOverLimit:a.props.countCharsOverMessageLimit({channelId:a.props.channelId,text:a.getEditContentsAsString(),delta:a.props.featureWysiwygComposer?new k.a(a.props.originalMessageContents.contents):null,featureWysiwygComposer:a.props.featureWysiwygComposer})};a.getComputedModules=Object(re["a"])(function(e,t,a,r,n){if(!(a||r))return e;var i=Object(oe["a"])({featureWysiwygComposer:r});return s()({},e,{composer:s()({},i,{teamId:t,zIndexOverride:n?null:200}),slacklink:r&&{convertImages:false,disableLinksWithLabels:true},slackmarkdown:r&&{convertHeaders:false,convertHorizontalRule:false}})});return a}u()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.isSelfIm,r=t.editWindowMin;r>=0&&!a&&(this.editWindowTimeout=setInterval(this.onTimerInterval,ce))}},{key:"componentWillReceiveProps",value:function e(t){t.didRequestToStopEditing&&!this.hasUnsavedChanges()&&this.stopEditingMessage()}},{key:"componentWillUpdate",value:function e(t,a){var r=a.editSecondsRemaining;r<=0&&clearInterval(this.editWindowTimeout)}},{key:"componentWillUnmount",value:function e(){var t=this.props,a=t.channelId,r=t.ts,n=t.viewContext;if(this.syncEditStateOnUnmount){var i=this.texty.getContents();var s=this.hasUnsavedChanges();this.props.updateEditState({viewContext:n,channelId:a,ts:r,editOps:i.contents,hasUnsavedChanges:s})}this.editWindowTimeout&&clearInterval(this.editWindowTimeout);this.componentDidUnmount=true}},{key:"onEnter",value:function e(){this.maybeSave();return false}},{key:"onTextChange",value:function e(){var t=this.props,a=t.didRequestToStopEditing,r=t.channelId,i=t.ts,s=t.viewContext;var o=this.state.numCharsOverLimit;var l=this.props.countCharsOverMessageLimit({channelId:r,text:this.getEditContentsAsString(),delta:this.props.featureWysiwygComposer?new k.a(this.getEditContents().contents):null,featureWysiwygComposer:this.props.featureWysiwygComposer});(l>0||o>0)&&this.setState(function(){return{numCharsOverLimit:l}});this.props.updateHasUnsavedChanges({viewContext:s,channelId:r,ts:i,hasUnsavedChanges:this.hasUnsavedChanges()});a&&!this.hasUnsavedChanges()&&this.props.setDidRequestToStopEditing(n()({},r,n()({},i,false)))}},{key:"onTimerInterval",value:function e(){var t=this;this.setState(function(){return{editSecondsRemaining:t.countRemainingSeconds()}})}},{key:"setTextyRef",value:function e(t){this.texty=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"getEditContentsAsString",value:function e(){var t=this.props.featureWysiwygComposer;if(t)return"";return Object(X["a"])(this.getEditContents())}},{key:"getEditContents",value:function e(){var t=this.props.initialEditOps;if(this.texty)return this.texty.getContents();if(t)return{contents:t};return{contents:[]}}},{key:"countRemainingSeconds",value:function e(){var t=this.props,a=t.isSelfIm,r=t.editWindowMin,n=t.ts;if(r<0||a)return null;var i=Object(Z["l"])(n);var s=60*r*1e3;var o=i.getTime()+s;return Math.round((o-Date.now())/1e3)}},{key:"hasUnsavedChanges",value:function e(){var t=this.props,a=t.initialEditOps,r=t.originalMessageContents;if(this.texty)return!ee(this.texty.getContents.contents,r.contents);return!a||!(a&&ee(a,r.contents))}},{key:"startDelete",value:function e(){var t=this.props,a=t.channelId,r=t.originalMessageTextUsedForDeletionOnly,n=t.originalMessageContents,i=t.canDelete,s=t.canUnbroadcast,o=t.ts,l=t.viewContext,c=t.featureWysiwygComposer;if(i){this.props.openModal({element:_.a.createElement(M["a"],{channelId:a,ts:o})});return}if(s){this.props.openModal({element:_.a.createElement(R["a"],{channelId:a,ts:o})});return}if(c){var u=new k.a(n.contents);var d=u.compose((new k.a).retain(u.length(),{strike:true}));this.props.saveMessageEdit({channelId:a,delta:d,viewContext:l,ts:o}).catch(this.handleSaveEditError)}else{var p=r.replace(/~/g,"");var h="~"+p+"~";this.props.saveMessageEdit({channelId:a,text:h,viewContext:l,ts:o}).catch(this.handleSaveEditError)}}},{key:"maybeSave",value:function e(){var t=this.props,a=t.channelId,r=t.ts,n=t.viewContext,i=t.featureWysiwygComposer;var s=this.state,o=s.editSecondsRemaining,l=s.numCharsOverLimit;if(l>0)return false;if(f.a.isNumber(o)&&o<=0)return false;if(this.texty.isEmpty({doIgnoreWhitespace:true})){this.startDelete();return false}this.props.saveMessageEdit({channelId:a,text:this.getEditContentsAsString(),delta:i?new k.a(this.getEditContents().contents):null,viewContext:n,ts:r}).catch(this.handleSaveEditError);return true}},{key:"handleSaveEditError",value:function e(t){var a=t.message;switch(a){case"edit_window_closed":this.renderTimeoutErrorDialog();break;case"msg_too_long":this.renderLengthErrorDialog();break;default:this.renderUnknownErrorDialog()}}},{key:"stopEditingMessage",value:function e(){var t=this.props,a=t.channelId,r=t.ts,n=t.viewContext;this.syncEditStateOnUnmount=false;this.props.stopEditingMessage({viewContext:n,channelId:a,ts:r})}},{key:"shouldShowLengthWarning",value:function e(){var t=this.state.numCharsOverLimit;return t>0}},{key:"shouldShowTimeoutWarning",value:function e(){var t=this.state.editSecondsRemaining;return f.a.isNumber(t)&&t<le}},{key:"shouldShowUnsavedWarning",value:function e(){var t=this.props.didRequestToStopEditing;return t&&this.hasUnsavedChanges()}},{key:"isSavingDisabled",value:function e(){var t=this.state.editSecondsRemaining;var a=f.a.isNumber(t)&&t<=0;return a||this.shouldShowLengthWarning()}},{key:"renderTimeoutErrorDialog",value:function e(){var t=this.props,a=t.editWindowMin,r=t.isAdminUser;var n=Object(Z["q"])(a,{units:"minutes"});var i=ue.t("Message editing failed");var s=ue.rt("Sorry, but messages can only be edited for {duration} after posting.",{duration:_.a.createElement("b",null,n)});var o=void 0;r&&(o=ue.rt("(To adjust the message editing window, visit <a>Workspace Settings</a>)",null,function(e){var t=e.text;return _.a.createElement(V["a"],{href:"/admin/settings#message_editing",target:"_new"},t)}));this.props.openModal({element:_.a.createElement(ie["a"],{title:i},_.a.createElement("p",null,s),o)})}},{key:"renderUnknownErrorDialog",value:function e(){var t=ue.t("Message editing failed");var a=ue.t("Sorry, something went wrong with editing your message. Try again in a moment.");this.props.openModal({element:_.a.createElement(ie["a"],{title:t},a)})}},{key:"renderLengthErrorDialog",value:function e(){var t=ue.t("Message editing failed");var a=ue.t("Sorry, your message is too long. Please shorten it and try again.");this.props.openModal({element:_.a.createElement(ie["a"],{title:t},a)})}},{key:"renderLengthWarning",value:function e(){var t=ue.t("text is too long!");return _.a.createElement("span",{className:"c-message__editor__warning","data-js":"length_warning"},t)}},{key:"renderTimeoutWarning",value:function e(){var t=this.state.editSecondsRemaining;var a=void 0;t<=0?a=ue.t("(your time to edit ran out)"):t<=le&&(a=ue.rt("(you have <b>{seconds, number}</b> {seconds, plural, =1{second}other{seconds}})",{seconds:t}));return _.a.createElement("span",{className:"c-message__editor__warning","data-js":"timeout_warning"},a)}},{key:"renderUnsavedWarning",value:function e(){var t=ue.rt("Finish editing this message first! Or press <b>escape</b> if you\u2019ve changed your mind.",{fallbackHash:"3480a7bdfba580c87d36cd0fc11d286cecbdbe27"});return _.a.createElement("span",{className:"c-message__editor__info","data-js":"unsaved_warning"},t)}},{key:"renderWarningMessages",value:function e(){var t=this.shouldShowUnsavedWarning()&&this.renderUnsavedWarning();var a=this.shouldShowTimeoutWarning()&&this.renderTimeoutWarning();var r=this.shouldShowLengthWarning()&&this.renderLengthWarning();if(!t&&!a&&!r)return null;return _.a.createElement("div",{className:"c-message__editor__messages"},t,a,r)}},{key:"renderInput",value:function e(){var t=this;var a=this.props,r=a.initialContents,n=a.messageHasText,i=a.useJumbomoji,s=a.channelId,o=a.featureFileThreads,l=a.featureSonicInputs,c=a.clientToolBar,u=a.featureWysiwygComposer,d=a.teamId;var p=n||!o?ue.t("Edit message"):ue.t("Add message");var h=c&&!l?"c-message__editor__input--legacy c-message__editor__input--client_toolbar":"c-message__editor__input--legacy";if(!l){var v=this.getComputedModules(this.textyModules,d,c,u,l);return _.a.createElement(_.a.Fragment,null,_.a.createElement(z["g"],{id:he,ref:this.setTextyRef,className:h,modules:v,ariaLabel:p,placeholder:p,initialText:r,onEnter:this.onEnter,onEscape:this.stopEditingMessage,onTextChange:this.onTextChange,enableJumbomoji:i,focusOnMount:true,useLegacyCreate:true,channelId:s,enableBroadcastKeywords:this.enableBroadcastKeywords}),_.a.createElement(H["c"],{onClick:ve,className:"c-message__editor__emoji_menu","aria-label":"Emoji menu"},_.a.createElement(K["a"],{className:"c-message__editor__emoji_circle_icon",type:"circle-fill"}),_.a.createElement(K["a"],{className:"c-message__editor__emoji_smile_icon",type:"smile-o"}),_.a.createElement(K["a"],{className:"c-message__editor__emoji_happy_icon",type:"happy-smile"})))}return _.a.createElement(Y["a"],{completeOnChannels:true,completeOnEmoji:true,completeOnMembers:true,shouldCompleteOnTab:true,channelId:this.props.channelId,renderInput:function e(a){var n=a.isOpen,o=a.modules;var h=t.getComputedModules(o,d,c,u,l);return _.a.createElement(z["g"],{ref:t.setTextyRef,className:"c-message__editor__input",modules:h,ariaLabel:p,placeholder:p,initialText:r,onEnter:t.onEnter,onEscape:t.stopEditingMessage,onTextChange:t.onTextChange,enableJumbomoji:i,isAutocompleteOpen:n,focusOnMount:true,channelId:s,enableBroadcastKeywords:t.enableBroadcastKeywords,enableEmojiButton:true})}})}},{key:"render",value:function e(){return _.a.createElement("div",{className:"c-message__editor","data-qa":"message_editor"},_.a.createElement("div",{className:"c-message__editor__input_container"},this.renderInput()),_.a.createElement("div",{className:"c-message__editor__footer"},_.a.createElement(H["d"],{type:"outline",size:"small",onClick:this.stopEditingMessage},ue.t("Cancel")),_.a.createElement(H["d"],{size:"small",className:"c-message__editor__save",onClick:this.maybeSave,disabled:this.isSavingDisabled()},_.a.createElement(K["a"],{type:"enter",className:"margin_right_50"}),ue.t("Save Changes")),this.renderWarningMessages()))}}]);return t}(g["PureComponent"]);me.displayName="BaseEditMessage";me.defaultProps=pe;function fe(e,t){var a=t.ts,r=t.channelId,n=t.viewContext,i=t.messageContainerType;var s=Object(S["a"])(e,r,a);if(!s)return{};var o=Object(ae["a"])(e);var l=Object(I["d"])(e,r);var c=Object(T["a"])(e,"msg_edit_window_mins");var u=Object(N["b"])(e);var d=Object(A["a"])(e);var p=Object(W["canDeleteMessage"])(e,{message:s,channel:l,messageContainerType:i});var h=Object(W["canRemoveBroadcast"])(e,{message:s,channel:l,messageContainerType:i});var v=Object(P["getMessageEditData"])(e,{viewContext:n,channelId:r,ts:a}),m=v.editOps,b=v.didRequestToStopEditing;var g={contents:Object(te["a"])(e,s,{featureWysiwygComposer:o}).ops};var _=void 0;_=m?{contents:m}:g;return{channelId:l.id,teamId:Object(C["c"])(e),isSelfIm:Object(G["isYou"])(u.id,l),canDelete:p,canUnbroadcast:h,originalMessageContents:g,initialEditOps:m,initialContents:_,ts:a,originalMessageTextUsedForDeletionOnly:s.text||"",messageHasText:o?!!(s.text||!f.a.isEmpty(s.blocks)):!!s.text,editWindowMin:c,isAdminUser:u.is_admin,didRequestToStopEditing:b,useJumbomoji:d,featureFileThreads:Object(E["isFeatureEnabled"])(e,"feature_file_threads"),featureSonicInputs:Object(E["isFeatureEnabled"])(e,"feature_sonic_inputs"),clientToolBar:"composer_toolbar"===Object(w["getGroupForUser"])(e,"composer_toolbar"),featureWysiwygComposer:o}}var be={saveMessageEdit:D["a"],setDidRequestToStopEditing:P["setDidRequestToStopEditing"],updateEditState:P["updateEditState"],stopEditingMessage:P["stopEditingMessage"],updateHasUnsavedChanges:P["updateHasUnsavedChanges"],openModal:j["openModal"],countCharsOverMessageLimit:q};var ge=Object(se["b"])(Object(y["connect"])(fe,be)(me));ge.propTypes={ts:b["b"].string.isRequired,channelId:b["b"].string.isRequired};var _e=t["a"]=ge},,,function(e,t,a){"use strict";var r=a(0);var n=a(3);var i=a.n(n);var s=a(29);var o=a(25);var l=a(41);var c=1.75;var u=100;var d=10;var p=Object(o["a"])("Deletes a message",function(e,t,a){var r=a.channelId,n=a.ts,o=a.broadcastDelete,h=a.attempts,v=void 0===h?0:h,m=a.reason;if(Object(l["isTempTs"])(n))return Promise.reject(new Error("message_not_found"));var f={channel:r,ts:n};o&&(f.broadcast_delete=true);return e(Object(s["a"])({method:"chat.delete",args:f,reason:m})).catch(function(t){var r=t.data,n=void 0===r?{}:r;if("message_not_found"===n.error&&v<d){var s=u*c;return Promise.delay(s).then(function(){return e(p(i()({},a,{attempts:v+1})))})}return Promise.reject(new Error(n.error||"unknown_error"))})});p.propTypes={channelId:r["b"].string,ts:r["b"].string,broadcastDelete:r["b"].bool,attempts:r["b"].number,reason:r["b"].string.isRequired};var h=p;var v=Object(o["a"])("Deletes a join/leave message rollup",function(e,t,a){var r=a.channelId,n=a.firstMessageTs,i=a.lastMessageTs;var o={channel_id:r,first_message_ts:n,last_message_ts:i};return e(Object(s["a"])({method:"chat.deleteBulkJoinLeave",args:o}))});v.propTypes={channelId:r["b"].string,firstMessageTs:r["b"].string,lastMessageTs:r["b"].string};var m=v;var f=a(15);var b=a(19);var g=a(103);var _=a(123);var y=a(67);var O=a(329);var k=a(4);var E=a(283);var C=Object(f["b"])("Animate a message deletion as well as calling the delete API endpoint",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.ts,i=a.broadcastDelete,s=void 0!==i&&i,o=a.rollupTimestamps;var c=t();var u=Object(y["a"])(c,r,n);var d=o&&o.length>1;if(!u)return Promise.resolve();d||Object(l["getReplyCount"])(u)||s||e(Object(O["animateDeleteMessage"])({channelId:r,ts:n}));if(Object(l["isTempTs"])(n)||Object(l["isEphemeral"])(u)){var p=Object(k["isFeatureEnabled"])(c,"feature_react_threads");if(Object(l["isReply"])(u)&&!p){var v=Object(b["d"])(c,r);Object(E["i"])(v,u)}return Promise.resolve()}if(d){var f=o[0];var C=o.pop();return e(m({channelId:r,firstMessageTs:f,lastMessageTs:C}))}return e(h({channelId:r,ts:n,broadcastDelete:s,reason:"animateAndDeleteMessageApi"})).then(function(){if(Object(k["isFeatureEnabled"])(c,"feature_degraded_send")&&Object(l["isReply"])(u)&&!s){var e=Object(b["d"])(c,r);Object(E["i"])(e,u)}}).catch(function(t){if("message_not_found"!==t.message){e(Object(O["animateDeleteMessage"])({channelId:r,ts:n,isDeleting:false}));if(s)e(Object(_["l"])({channelId:r,ts:n}));else{e(Object(g["addTimestamps"])({channelId:r,timestamps:[n]}));e(Object(_["a"])([u]))}}throw t})});C.propTypes={channelId:r["b"].string.isRequired,ts:r["b"].string.isRequired,broadcastDelete:r["b"].bool,rollupTimestamps:r["b"].array};var j=t["a"]=C;var w={animateAndDeleteMessageApi:C}},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(0);var s=a(37);var o=a.n(s);var l=a(6);var c=a.n(l);var u=a(7);var d=a.n(u);var p=a(8);var h=a.n(p);var v=a(9);var m=a.n(v);var f=a(1);var b=a.n(f);var g=a(2);var _=a(22);var y=a(157);var O=a(51);var k=a(10);var E=new k["b"]("app_actions");var C={onCloseComplete:i["b"].func,onRetry:i["b"].func.isRequired};var j={onCloseComplete:g["noop"]};var w=function(e){m()(t,e);function t(e){c()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onRetry=a.onRetry.bind(a);a.toastRef=b.a.createRef();return a}d()(t,[{key:"onRetry",value:function e(){this.props.onRetry();var t=this.toastRef.current&&this.toastRef.current.getWrappedInstance&&this.toastRef.current.getWrappedInstance();t&&t.hideToast()}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.onRetry,i=o()(a,["onRetry"]);var s=E.rt("Sorry, that didn\u2019t work. <a>Try again?</a>",null,function(e){var a=e.text;return b.a.createElement(O["a"],{"data-qa":"app_action_toast_retry",onClick:t.onRetry},a)});return b.a.createElement(y["b"],n()({ref:this.toastRef},i),b.a.createElement(_["a"],{type:"warning",danger:true}),b.a.createElement("span",null,s))}}]);return t}(f["PureComponent"]);w.displayName="AppActionFailToast";w.defaultProps=j;var S=w;var I=function e(t){return b.a.createElement(w,t)};I.displayName="appActionFailToastFactory";var T=a(898);var A=a(15);var N=a(4);var P=a(150);var R=a(23);var M=a(517);var D=a(1062);var x=a(448);var F=a(685);a.d(t,"b",function(){return B});a.d(t,"a",function(){return q});var L=Object(A["b"])("Runs a message action (deprecated)",function(e,t,a){var r=t();var i=Object(x["f"])(r);if(Object(x["c"])(i,a))return Promise.resolve();e(Object(x["e"])(a));return e(Object(T["b"])(n()({},a,{type:"message_action"}))).then(function(){return e(Object(x["j"])(a))}).catch(function(){e(Object(x["i"])(a));var t=function t(){return e(L(a))};var r=I({onRetry:t});e(Object(P["enqueueToast"])({element:r}))})});L.propTypes={actionId:i["b"].string,appId:i["b"].string,channelId:i["b"].string,messageTs:i["b"].string};var B=Object(A["b"])("Runs a message action",function(e,t,a){if(!Object(N["isFeatureEnabled"])(t(),"feature_app_actions_fe_refactor"))return e(L(a));e(Object(F["c"])());var r=n()({},a,{type:M["a"].messageAction});return e(Object(T["b"])(r)).catch(function(){var t=function t(){return e(B(r))};var a=I({onRetry:t});e(Object(P["enqueueToast"])({element:a}))})});B.propTypes={actionId:i["b"].string.isRequired,appId:i["b"].string.isRequired,channelId:i["b"].string.isRequired,messageTs:i["b"].string.isRequired};var U=Object(A["b"])("Runs a global action",function(e,t,a){e(Object(F["c"])());var r=n()({},a,{type:M["a"].globalAction});return e(Object(T["b"])(r)).catch(function(){var t=function t(){return e(U(r))};var a=I({onRetry:t});e(Object(P["enqueueToast"])({element:a}))})});U.propTypes={actionId:i["b"].string.isRequired,appId:i["b"].string.isRequired};var q=Object(A["b"])("Explicitly load app actions",function(e,t){var a=t();var r=Object(R["c"])(a);return Object(D["a"])(r)})},,,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(2);var p=a(0);var h=a(16);var v=a.n(h);var m=a(1);var f=a.n(m);var b=a(13);var g=a(51);var _=a(50);var y=a(10);var O=a(22);var k=a(57);var E=a(352);var C=a(39);var j=a(4168);var w=a(195);var S=a(3225);var I=new y["b"]("notification_bar");var T={wasRecentlyOnline:p["b"].bool,typingNames:p["b"].array,snippetCallback:p["b"].func,tooLongCount:p["b"].number,inputHasText:p["b"].bool,showFormattingHint:p["b"].bool,isLegacy:p["b"].bool};var A={wasRecentlyOnline:false,typingNames:null,snippetCallback:d["noop"],tooLongCount:0,inputHasText:false,showFormattingHint:false,isLegacy:false};var N=function(e){u()(t,e);function t(){n()(this,t);return l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}s()(t,[{key:"renderLeft",value:function e(){var t=this.props,a=t.wasRecentlyOnline,r=t.typingNames,n=t.inputHasText;if(!a){var i=n?I.t("Slack is trying to connect, so messages can\u2019t be sent yet."):I.t("Slack is trying to connect.");return f.a.createElement("span",{id:"msg_input_info",className:"p-notification_bar__offline","aria-live":"polite"},i," ",f.a.createElement(O["a"],{type:"cloud-offline-small-filled",className:"p-notification_bar__offline_icon"}))}if(r&&r.length>0){var s=I.t("several people are typing");1===r.length?s=I.rt("<b>{name}</b> is typing",{name:r[0]}):2===r.length&&(s=I.rt("<b>{name}</b> and <b>{other_name}</b> are typing",{name:r[0],other_name:r[1]}));return f.a.createElement("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"p-notification_bar__typing"},s)}return null}},{key:"renderRight",value:function e(){var t=this.props,a=t.wasRecentlyOnline,r=t.snippetCallback,n=t.tooLongCount;if(a&&n>0){var i=I.t("Your message is {diff_count, plural, =1{# character}other{# characters}} too long.",{diff_count:n});var s=I.t("Make a snippet instead?");var o=I.t("A snippet is a text file that can be much longer than a normal message.");return f.a.createElement("div",null,f.a.createElement("span",null,i," "),f.a.createElement(_["c"],{tip:o},f.a.createElement("span",null,f.a.createElement(g["a"],{tabIndex:"5",onClick:r},s))))}var l=function(){if(!a)return"";if(Object(k["c"])())return I.rt("<b>\uff0abold\uff0a</b> <code>\uff40code\uff40</code> <code>\uff40\uff40\uff40preformatted\uff40\uff40\uff40</code> <span>\uff1equote</span>");return I.rt("<b>*bold*</b> <i>_italics_</i> ~strike~ <code>`code`</code> <code>```preformatted```</code> <span>{quote}quote</span>",{quote:">",fallbackHash:"78fa2eabded9ec376bac82c1ade55d4f646aca2c"})}();return f.a.createElement("span",{className:"p-notification_bar__formatting","aria-hidden":"true"},l)}},{key:"render",value:function e(){var t=this.props,a=t.showFormattingHint,r=t.wasRecentlyOnline,n=t.tooLongCount,i=t.isLegacy;var s=v()("p-notification_bar__section","p-notification_bar__section--right",{"p-notification_bar__section--is-visible":r&&(a||n>0)});var o=v()("p-notification_bar",{"p-notification_bar--legacy":i});return f.a.createElement("div",{className:o},f.a.createElement("div",{className:"p-notification_bar__section p-notification_bar__section--left"},this.renderLeft()),f.a.createElement("div",{className:s},this.renderRight()))}}]);return t}(m["PureComponent"]);N.displayName="NotificationBar";N.defaultProps=A;var P=function e(t,a){var r=a.inputText,n=a.wysiwygTextLength,i=a.wasRecentlyOnline;var s=Object(j["a"])(t);var o=void 0!==i?i:Object(w["h"])(t);var l=0;var c=void 0;if(s&&n){c=n;l=Math.max(0,c-C["MAX_MESSAGE_INPUT_LENGTH"])}else{c=r.length;if(c>C["MAX_MESSAGE_INPUT_LENGTH"]/2){var u=Object(E["b"])(t,r);l=Math.max(0,u.length-C["MAX_MESSAGE_INPUT_LENGTH"])}}return{wasRecentlyOnline:o,tooLongCount:l,showFormattingHint:c>2,inputHasText:c>0}};var R=Object(b["connect"])(P)(N);var M=t["a"]=R},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(2);var p=a(1);var h=a.n(p);var v=a(0);var m=a(13);var f=a(16);var b=a.n(f);var g=a(4);var _=a(19);var y=a(35);var O=a(11);var k=a(31);var E=a(93);var C=a(10);var j=a(22);var w=a(3211);var S=new C["b"]("files");var I=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={spriteLoaded:false};return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=new Image;this.spritePromise=new Promise(function(e){a.onload=function(){e()};a.src=cdn_url+"/be529/img/dragdrop_sprites@2x.png"}).then(function(){t.setState(function(){return{spriteLoaded:true}})})}},{key:"componentWillUnmount",value:function e(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function e(){var t=this.props,a=t.featureAnnounceOnly,r=t.teamName,n=t.channelName,i=t.userCanPost,s=t.isImOrMpim,o=t.useNightIllustration;var l=this.state.spriteLoaded;var c=false;if(Object(d["isBoolean"])(o))c=o;else{var u=new Date;var p=u.getHours();c=p>=20||p<8}var v=b()("p-message_pane_drag_overlay",{"p-message_pane_drag_overlay--night":!!c});var m=a&&!i?S.t("Read-only"):S.rt("Upload to {teamName}",{teamName:r});var f="";f=a&&!i?S.t("Only selected team members can post in this channel."):s?S.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately with {userName}',{userName:n}):S.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately to {channelName}',{channelName:n});var g="";a&&!i?g=h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),h.a.createElement(j["b"],{type:"emoji-objects",className:"p-message_pane_drag_overlay__anim_readonly",inline:true})):l&&(g=h.a.createElement(h.a.Fragment,null,h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_03"}),h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_02"}),h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_01"})));return h.a.createElement("div",{className:v},h.a.createElement("div",{className:"p-message_pane_drag_overlay__info"},h.a.createElement("div",{className:"p-message_pane_drag_overlay__anim"},g),h.a.createElement("div",{className:"p-message_pane_drag_overlay__title"},m),h.a.createElement("div",{className:"p-message_pane_drag_overlay__subtitle"},f)))}}]);return t}(p["PureComponent"]);I.displayName="MessagePaneDragOverlay";I.defaultProps={featureAnnounceOnly:false,teamName:"",channelName:"",isImOrMpim:false,useNightIllustration:void 0};function T(e,t){var a=t.channelId;var r=Object(_["d"])(e,a);var n=Object(y["d"])(e);return{featureAnnounceOnly:Object(g["isFeatureEnabled"])(e,"feature_announce_only"),channelName:Object(O["getDisplayNameForChannel"])(e,r,{imIncludeAtSign:false}),teamName:Object(k["getTeamDisplayName"])(n),userCanPost:Object(E["p"])(e,r.id),isImOrMpim:Object(O["isIm"])(r)||Object(O["isMpim"])(r)}}var A=Object(m["connect"])(T)(I);var N=t["a"]=A},,function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a(12);var n=a(42);function i(){return new Promise(function(e){return Object(n["getNotificationWarnings"])().then(function(t){return e(t)}).catch(function(t){Object(r["b"])().error("Tried to grab notification warnings, but failed");Object(r["b"])().error(t.message);Object(r["b"])().error(t.stack);return e([])})})}},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(15);var s=a(48);var o=a(6);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var h=a(9);var v=a.n(h);var m=a(13);var f=a(0);var b=a(40);var g=a.n(b);var _=a(2);var y=a(10);var O=a(84);var k=a(867);var E=a(572);var C=a(128);var j=a(54);var w=a(45);var S=a(21);var I=a(907);var T=a(1102);var A=a(164);var N=a(34);var P=a(553);var R=a(180);var M=a(1714);var D=new y["b"]("do_not_disturb");var x={snoozeNotifications:f["b"].func.isRequired,do24hrTime:f["b"].bool,inDnd:f["b"].bool,clogger:f["b"].object};var F={do24hrTime:false,inDnd:false,clogger:{track:_["noop"]}};var L=function(e){v()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=g()().add(1,"hour").startOf("hour");var n=r.format("YYYY-MM-DD");var i=r.format("HH:mm");var s=g()(n+" "+i).unix();a.state={snoozeEndDate:n,snoozeEndTime:i,snoozeEndTs:s};a.onDateChange=a.onDateChange.bind(a);a.onTimeChange=a.onTimeChange.bind(a);a.onGo=a.onGo.bind(a);return a}u()(t,[{key:"onDateChange",value:function e(t){var a=this.state.snoozeEndTime;this.setState(function(){return{snoozeEndDate:t,snoozeEndTs:g()(t+" "+a).unix()}})}},{key:"onTimeChange",value:function e(t){var a=this.state.snoozeEndDate;this.setState(function(){return{snoozeEndTime:t,snoozeEndTs:g()(a+" "+t).unix()}})}},{key:"onGo",value:function e(){var t=this.props,a=t.clogger,r=t.inDnd;var n=this.state.snoozeEndTs;var i=Object(T["a"])(n);if(i<=0)return;this.props.snoozeNotifications({duration:i,reason:"DndDialog:onGo"});a.track(S["k"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:i,dnd_preset:S["h"].DURATION_CUSTOM,dnd_snooze_type:r?S["i"].SNOOZE_ADJUST:S["i"].SNOOZE_INITIAL})}},{key:"getTimeSelectOptions",value:function e(){var t=this.props.do24hrTime;var a=this.state.snoozeEndDate;var r=a===g()().format("YYYY-MM-DD");var n=g()().format("HH:mm");var i=Object.keys(I["a"]).filter(function(e){return!(r&&e<n)}).map(function(e){return{value:e,label:t?e:I["a"][e]}});return i}},{key:"render",value:function e(){var t=this.state,a=t.snoozeEndDate,r=t.snoozeEndTime,i=t.snoozeEndTs;var s=Object(T["a"])(i)<=0;var o=Object(A["i"])(i);var l=D.t("Pause notifications until\u2026");var c=g()().format("YYYY-MM-DD");var u=g()().add(1,"year").format("YYYY-MM-DD");return n.a.createElement(O["a"],{title:l,goButtonText:D.t("Pause Notifications"),goButtonType:"primary",goButtonIsDisabled:s,onGo:this.onGo,showCancelButton:false},n.a.createElement(j["a"],{htmlFor:"dnd_dialog_date_button",text:D.t("Date")},n.a.createElement(k["c"],{position:"bottom",offsetX:67,dateFormat:"YYYY-MM-DD",selectedDate:a,onDateChange:this.onDateChange,disableDatesBefore:c,disableDatesAfter:u},n.a.createElement(C["a"],{id:"dnd_dialog_date_button",className:"p-dnd_dialog__date_picker_trigger","aria-label":D.t("Date to snooze notifications until")},o))),n.a.createElement(j["a"],{htmlFor:"dnd_dialog_time_select",text:D.t("Time")},n.a.createElement(E["b"],{id:"dnd_dialog_time_select",options:this.getTimeSelectOptions(),onChange:this.onTimeChange,value:r,useFilteredInput:false,usePlaceholderOption:false})))}}]);return t}(r["PureComponent"]);L.displayName="DndDialog";L.defaultProps=F;var B=function e(t){return{do24hrTime:Object(N["f"])(t,"time24"),inDnd:!!Object(R["getCurrentMemberDnd"])(t),clogger:Object(w["a"])({state:t})}};var U={snoozeNotifications:P["e"]};var q=Object(m["connect"])(B,U)(L);var G=Object(i["b"])("Opens the DND dialog",function(e,t,a){e(Object(s["openModal"])({element:n.a.createElement(q,a)}))});G.propTypes=null;var W=t["a"]=G},,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(8);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a(0);var h=a(12);var v={store:p["b"].shape({getState:p["b"].func.isRequired,subscribeImmediate:p["b"].func,subscribe:p["b"].func.isRequired}).isRequired,render:p["b"].func.isRequired};var m=function(e){u()(t,e);l()(t,null,[{key:"getDerivedStateFromProps",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.store;return a.getState()}}]);function t(e){n()(this,t);var a=s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=e.store;a.state=r.getState();a.logger=Object(h["a"])({getState:r.getState,label:"CONNECT-IMMEDIATE"});a.unsubscribe=null;a.update=a.update.bind(a);return a}l()(t,[{key:"componentDidMount",value:function e(){this.subscribeToStore()}},{key:"componentDidUpdate",value:function e(t){if(this.props.store!==t.store){this.unsubscribeFromStore();this.subscribeToStore()}}},{key:"componentWillUnmount",value:function e(){this.unsubscribeFromStore()}},{key:"subscribeToStore",value:function e(){var t=this.props.store;var a=t.subscribeImmediate;if(!a){this.logger.warn("subscribeImmediate not found on store");a=t.subscribe}this.unsubscribe=a(this.update)}},{key:"unsubscribeFromStore",value:function e(){this.unsubscribe&&this.unsubscribe()}},{key:"update",value:function e(){var t=this;this.setState(function(){return t.props.store.getState()})}},{key:"render",value:function e(){return this.props.render(this.state)}}]);return t}(d["PureComponent"]);m.displayName="ConnectImmediate";var f=m;var b=t["a"]=f},,,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(2);var p=a(1);var h=a.n(p);var v=a(0);var m=a(13);var f=a(10);var b=a(98);var g=a(19);var _=a(4);var y=a(11);var O=a(93);var k=a(109);var E=a(135);var C=a(28);var j=a(139);var w=a(1811);var S=a(16);var I=a.n(S);var T=a(107);var A=a.n(T);var N=a(67);var P=a(34);var R=a(505);var M=a(1806);var D=a(39);var x=a(126);var F=a(22);var L=a(54);var B=a(4173);var U=a(1807);var q=a(50);var G=a(41);var W=a(706);var H=a(38);var V=a(1525);var K=a(208);var z=a(799);var Y=a(4168);var Q=a(168);var J=a(691);var Z=a(3285);var X=new f["b"]("threads");var $=40;var ee=150;var te={channelId:v["b"].string.isRequired,threadTs:v["b"].string.isRequired,channelType:v["b"].string,prepareAndSendMessage:v["b"].func,legacySendSlashCommand:v["b"].func,editLastMessageInChannel:v["b"].func,viewContext:v["b"].string,useSendButton:v["b"].bool,focusInputOnMount:v["b"].bool,featureReactThreads:v["b"].bool,featureSonicInputs:v["b"].bool,featureWysiwygComposer:v["b"].bool,replyCount:v["b"].number,clogThreadEvent:v["b"].func,userCanPost:v["b"].bool.isRequired};var ae={channelType:"channel",prepareAndSendMessage:function e(){return Promise.resolve()},legacySendSlashCommand:d["noop"],editLastMessageInChannel:d["noop"],viewContext:void 0,useSendButton:false,focusInputOnMount:false,featureReactThreads:true,featureSonicInputs:true,featureWysiwygComposer:false,replyCount:0,clogThreadEvent:d["noop"]};var re=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.inputRef=h.a.createRef();a.state={hasEnteredText:false,hasFocus:false,broadcast:false,broadcastControlsHeight:0};Object(d["bindAll"])(a,["onBroadcastChange","onBroadcastControlsMouseDown","onTextChange","onFocus","onBlur","sendMessage","editLastMessage","onExpandAnimationTick","onExpandAnimationEnd","handleDraftRestore"]);a.getAdditionalDraftContent=Object(z["a"])(function(e){return{broadcast:e}});return a}s()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.threadTs,i=a.viewContext;if(!Object(H["a"])()&&this.inputRef.current){var s=Object(J["c"])(r,n);s&&this.inputRef.current.getWrappedInstance().value(s)}Object(K["b"])({viewContext:i,channelId:r,threadTs:n,functions:{setText:function e(a){var r=t.getInputRef();r&&r.value(a)},getText:function e(){var a=t.getInputRef();return a?a.value():null},setBroadcast:function e(a){return t.setState(function(){return{broadcast:a}})},getBroadcast:function e(){return t.state.broadcast},focus:function e(){var a=t.getInputRef();a&&a.setCursorAtEnd()},clearHistory:function e(){var a=t.getInputRef();a&&a.clearHistory()},getContentsForCurrentSelection:function e(){var a=t.getInputRef();if(!a)return null;var r=a.getSelection();if(!r)return null;return a.getContentsForRange(r.index,r.length)}}})}},{key:"componentDidUpdate",value:function e(t,a){var r=this.state.hasFocus||this.state.hasEnteredText;var n=a.hasFocus||a.hasEnteredText;r&&!n?this.startExpandAnimation(0,$):!r&&n&&this.startExpandAnimation($,0)}},{key:"componentWillUnmount",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext;Object(K["c"])({viewContext:n,channelId:a,threadTs:r});this.expandAnimation&&this.expandAnimation.cancel()}},{key:"onBroadcastChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{broadcast:!!a}});if(!this.state.hasEnteredText){this.inputRef.current.getWrappedInstance().focus();this.preventUnfocus=false}}},{key:"onBroadcastControlsMouseDown",value:function e(t){t.preventDefault();this.state.hasEnteredText||(this.preventUnfocus=true)}},{key:"onTextChange",value:function e(t){this.setState(function(){return{hasEnteredText:!!t}});var a=this.props,r=a.channelId,n=a.threadTs;Object(H["a"])()||Object(J["g"])(r,n,t)}},{key:"onFocus",value:function e(){this.setState(function(){return{hasFocus:true}})}},{key:"onBlur",value:function e(){if(this.preventUnfocus){this.preventUnfocus=false;return}this.setState(function(){return{hasFocus:false}})}},{key:"onExpandAnimationTick",value:function e(t){var a=t.value,r=t.nextTick;this.setState(function(){return{broadcastControlsHeight:a}},r)}},{key:"onExpandAnimationEnd",value:function e(){this.expandAnimation=null}},{key:"getInputRef",value:function e(){return this.inputRef.current.getWrappedInstance?this.inputRef.current.getWrappedInstance():this.inputRef.current}},{key:"handleDraftRestore",value:function e(t){this.setState(function(e){var a=e.broadcastControlsHeight;return{broadcast:!!t.broadcast,broadcastControlsHeight:t.ops?$:a}})}},{key:"startExpandAnimation",value:function e(t,a){var r=this.state.broadcastControlsHeight;if(r===a)return;this.expandAnimation&&this.expandAnimation.cancel();this.expandAnimation=Object(W["a"])({fromValue:t,toValue:a,duration:ee,easing:"easeInOutQuad",onTick:this.onExpandAnimationTick,onComplete:this.onExpandAnimationEnd})}},{key:"editLastMessage",value:function e(){this.props.editLastMessageInChannel({channelId:this.props.channelId,threadTs:this.props.threadTs,viewContext:this.props.viewContext})}},{key:"sendMessage",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.threadTs,i=a.replyCount,s=a.clogThreadEvent,o=a.featureSonicInputs,l=a.featureWysiwygComposer;var c=this.state.broadcast;this.setState(function(){return{broadcast:false}});var u=this.getInputRef();var d=u.value();if(!o&&Object(V["a"])(d)){u.clear();this.props.legacySendSlashCommand(r,n,d);return Promise.resolve()}if(!Object(U["a"])(u.getContents(),{featureWysiwygComposer:l}))return null;var p=c?"THREADS_REPLY_BROADCAST_CLICKED":"THREADS_REPLY";var h={num_msg_in_thread:i+1};s({event:p,metadata:h});var v=u.getContents();u.clear();u.focus();return this.props.prepareAndSendMessage({channelId:r,text:d,delta:l?new A.a(v.contents):null,replyToTs:n,shouldBroadcast:c}).then(function(){var e=t.getInputRef();e&&e.clearHistory()}).catch(function(){u.isEmpty()&&u.setContents(v)})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext,i=t.channelType,s=t.useSendButton,o=t.focusInputOnMount,l=t.userCanPost,c=t.featureReactThreads,u=t.featureSonicInputs;var d=this.state,p=d.broadcast,v=d.hasEnteredText,m=d.hasFocus,f=d.broadcastControlsHeight;if(!c)return null;var b=I()("p-threads_footer__broadcast_controls",{"p-threads_footer__broadcast_controls--visible":v||m});var g={height:f};var _="";_="mpim"===i?X.t("Also send to the group"):"im"===i?X.t("Also send as direct message"):X.rt("Also send to <span></span>",null,function(){return h.a.createElement(j["a"],{channelId:a,inline:true,className:"p-threads_footer__broadcast_channel"})});var y="";y="mpim"===i||"im"===i?X.t("Choose this if you\u2019d like your reply to post in the main conversation, too"):X.t("Choose this if you\u2019d like your reply to post in the channel, too");var O="p-thread_footer__broadcast_checkbox--"+Object(k["getThreadKey"])(a,r)+"--"+n;var E=I()("p-threads_footer__input",{"p-threads_footer__input--legacy":!u});return h.a.createElement("div",{className:"p-threads_footer__input_container","data-qa":"reply_container"},h.a.createElement(B["c"],{className:E,channelId:a,threadTs:r,viewContext:n,placeholder:X.t("Reply\u2026",{fallbackHash:"fefcf598b8ea8332c1557b2ee245e83e5c8b0aef"}),enableEmojiButton:true,enableBroadcastKeywords:false,onTextChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,ref:this.inputRef,useLegacyCreate:!u,useLegacyDrafts:!Object(H["a"])(),maxLines:8,useSendButton:s,focusOnMount:o,maxLength:D["MAX_MESSAGE_INPUT_LENGTH"],onDraftRestore:this.handleDraftRestore,additionalDraftContent:this.getAdditionalDraftContent(p)}),h.a.createElement("div",{className:b,style:g},h.a.createElement("div",{className:"p-threads_footer__broadcast_controls_inner"},l&&h.a.createElement(h.a.Fragment,null,h.a.createElement(L["a"],{className:"p-threads_footer__broadcast_label",text:_,htmlFor:O,type:"inline",onMouseDown:this.onBroadcastControlsMouseDown},h.a.createElement(x["a"],{className:"p-threads_footer__broadcast_checkbox",id:O,checked:p,onChange:this.onBroadcastChange})),h.a.createElement(q["c"],{tip:y},h.a.createElement(F["b"],{className:"p-threads_footer__info_tooltip",type:"question_circle",inline:true,size:"inherit"}))),h.a.createElement(B["b"],{isDisabled:!v,className:"p-threads_footer__send_button",sendMessage:this.sendMessage,buttonSize:"small",tabIndex:0}))))}}]);return t}(p["Component"]);re.displayName="InputContainer";re.defaultProps=ae;function ne(e,t){var a=t.channelId,r=t.threadTs;var n=Object(g["d"])(e,a);var i=Object(N["a"])(e,a,r);return{channelType:Object(y["getChannelType"])(n),featureReactThreads:Object(_["isFeatureEnabled"])(e,"feature_react_threads"),featureSonicInputs:Object(_["isFeatureEnabled"])(e,"feature_sonic_inputs"),featureWysiwygComposer:Object(Y["a"])(e),useSendButton:Object(P["f"])(e,"msg_input_send_btn"),replyCount:Object(G["getReplyCount"])(i),userCanPost:Object(O["p"])(e,a)}}var ie={prepareAndSendMessage:function e(){return R["a"].apply(void 0,arguments)},editLastMessageInChannel:function e(){return M["a"].apply(void 0,arguments)},legacySendSlashCommand:function e(t,a,r){return function(e,n){var i=n();var s=Object(g["d"])(i,t);var o=Object(N["a"])(i,t,a);if(!s||!o)return;Object(Q["k"])(s,r,o)}}};var se=Object(m["connect"])(ne,ie)(re);var oe=a(3287);var le=new f["b"]("threads");var ce={channelId:v["b"].string.isRequired,threadTs:v["b"].string.isRequired,unknown:v["b"].bool,archived:v["b"].bool,frozen:v["b"].bool,imWithDeletedMember:v["b"].bool,cannotReply:v["b"].bool,nonMember:v["b"].bool,canJoin:v["b"].bool,focusInputOnMount:v["b"].bool,joinConversationApi:v["b"].func,featureReactThreads:v["b"].bool,featureAnnounceOnly:v["b"].bool,featureEscDisconnectV2Client:v["b"].bool,viewContext:v["b"].string,clogThreadEvent:v["b"].func};var ue={unknown:false,archived:false,frozen:false,imWithDeletedMember:false,cannotReply:false,nonMember:false,canJoin:false,focusInputOnMount:true,joinConversationApi:d["noop"],featureReactThreads:false,featureAnnounceOnly:false,featureEscDisconnectV2Client:false,viewContext:void 0,clogThreadEvent:d["noop"]};var de=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.joinChannel=a.joinChannel.bind(a);return a}s()(t,[{key:"joinChannel",value:function e(){var t=this.props.channelId;this.props.joinConversationApi({channelId:t})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.unknown,i=t.archived,s=t.frozen,o=t.imWithDeletedMember,l=t.cannotReply,c=t.nonMember,u=t.canJoin,d=t.focusInputOnMount,p=t.featureReactThreads,v=t.featureAnnounceOnly,m=t.featureEscDisconnectV2Client,f=t.viewContext,b=t.clogThreadEvent;if(!p)return null;if(n||o)return null;if(i||s)return h.a.createElement(E["a"],{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--archived"},m&&s?le.t("This channel is no longer shared with your organization."):le.t("You are viewing a thread from an archived channel"));if(v&&l){var g=le.t("Posting to this thread has been restricted to select members");return h.a.createElement(w["a"],{tooltip:g,featureAnnounceOnly:v})}if(l)return h.a.createElement(E["a"],{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--no_reply"},le.rt("Your Workspace Owners have limited who can post to <ChannelName></ChannelName>",null,function(){return h.a.createElement(j["a"],{channelId:a,inline:true,iconProps:{inherit:true}})}));if(c){if(!u)return null;return h.a.createElement("div",{className:"p-threads_footer_join_container"},h.a.createElement(C["d"],{type:"primary",size:"medium",onClick:this.joinChannel},le.t("Join Channel")),!v&&h.a.createElement("p",{className:"p-threads_footer_join_label"},le.rt("You\u2019ll need to join <ChannelName></ChannelName> to reply",null,function(){return h.a.createElement(j["a"],{channelId:a,inline:true,iconProps:{inherit:true}})})))}return h.a.createElement(se,{channelId:a,threadTs:r,key:Object(k["getThreadKey"])(a,r),focusInputOnMount:d,viewContext:f,clogThreadEvent:b})}}]);return t}(p["Component"]);de.displayName="ThreadFooter";de.defaultProps=ue;function pe(e,t){var a=t.channelId;var r=Object(g["d"])(e,a);var n=Object(_["isFeatureEnabled"])(e,"feature_esc_disconnect_v2_client");return{unknown:Object(y["isUnknownOrNonExistent"])(r),archived:Object(y["isArchived"])(r),frozen:n&&Object(y["isFrozen"])(r),imWithDeletedMember:Object(y["isImWithDeletedMember"])(e,r),cannotReply:!Object(y["canThread"])(e,r),nonMember:Object(y["isPublicChannel"])(r)&&!Object(y["isMemberOfChannel"])(r),canJoin:Object(O["f"])(e,a),featureEscDisconnectV2Client:n,featureReactThreads:Object(_["isFeatureEnabled"])(e,"feature_react_threads"),featureAnnounceOnly:Object(_["isFeatureEnabled"])(e,"feature_announce_only")}}var he=t["a"]=Object(m["connect"])(pe,{joinConversationApi:b["o"]})(de)},function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(37);var s=a.n(i);var o=a(6);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var h=a(9);var v=a.n(h);var m=a(0);var f=a(1);var b=a.n(f);var g=a(2);var _=a(1213);var y={items:m["b"].arrayOf(_["d"]).isRequired,itemMapper:m["b"].func,actions:m["b"].arrayOf(_["c"]).isRequired,titleFormatter:m["b"].func,showingSelection:m["b"].bool,onToggleShowingSelection:m["b"].func,onToggleSelect:m["b"].func,onAction:m["b"].func,"data-qa":m["b"].string,position:m["b"].string};var O={showingSelection:false,titleFormatter:void 0,onToggleShowingSelection:void 0,onToggleSelect:void 0,onAction:void 0,"data-qa":"selection_bar",itemMapper:null,position:void 0};var k=function(e){v()(t,e);function t(){l()(this,t);return p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}u()(t,[{key:"getBaseSelectionBarProps",value:function e(t){var a=this.props.itemMapper;var r=a?t.map(a):t;var n=Object(g["reduce"])(r,function(e,t){return e+(t.isSelected?1:0)},0);return{items:r,availableCount:t.length,selectedCount:n}}},{key:"render",value:function e(){var t=this.props,a=t.items,r=s()(t,["items"]);return b.a.createElement(_["b"],n()({},this.getBaseSelectionBarProps(a),r))}}]);return t}(f["PureComponent"]);k.displayName="SelectionBar";k.defaultProps=O;var E=k;a.d(t,"a",function(){return _["b"]});var C=t["b"]=E},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){var r=a(2140),n=a(1638),i=a(1645),s=a(1646);var o=i(function(e,t){return s(e)?r(e,n(t,1,s,true)):[]});e.exports=o},function(e,t,a){var r=a(1399),n=a(1642),i=a(1643),s=a(1644),o=a(2121),l=a(1402);var c=200;function u(e,t,a,u){var d=-1,p=n,h=true,v=e.length,m=[],f=t.length;if(!v)return m;a&&(t=s(t,o(a)));if(u){p=i;h=false}else if(t.length>=c){p=l;h=false;t=new r(t)}e:while(++d<v){var b=e[d],g=null==a?b:a(b);b=u||0!==b?b:0;if(h&&g===g){var _=f;while(_--)if(t[_]===g)continue e;m.push(b)}else p(t,g,u)||m.push(b)}return m}e.exports=u},function(e,t,a){var r=a(2142),n=a(1235),i=a(1401);function s(){this.size=0;this.__data__={hash:new r,map:new(i||n),string:new r}}e.exports=s},function(e,t,a){var r=a(2143),n=a(2144),i=a(2145),s=a(2146),o=a(2147);function l(e){var t=-1,a=null==e?0:e.length;this.clear();while(++t<a){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r;l.prototype["delete"]=n;l.prototype.get=i;l.prototype.has=s;l.prototype.set=o;e.exports=l},function(e,t,a){var r=a(1234);function n(){this.__data__=r?r(null):{};this.size=0}e.exports=n},function(e,t){function a(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}e.exports=a},function(e,t,a){var r=a(1234);var n="__lodash_hash_undefined__";var i=Object.prototype;var s=i.hasOwnProperty;function o(e){var t=this.__data__;if(r){var a=t[e];return a===n?void 0:a}return s.call(t,e)?t[e]:void 0}e.exports=o},function(e,t,a){var r=a(1234);var n=Object.prototype;var i=n.hasOwnProperty;function s(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}e.exports=s},function(e,t,a){var r=a(1234);var n="__lodash_hash_undefined__";function i(e,t){var a=this.__data__;this.size+=this.has(e)?0:1;a[e]=r&&void 0===t?n:t;return this}e.exports=i},function(e,t){function a(){this.__data__=[];this.size=0}e.exports=a},function(e,t,a){var r=a(1236);var n=Array.prototype;var i=n.splice;function s(e){var t=this.__data__,a=r(t,e);if(a<0)return false;var n=t.length-1;a==n?t.pop():i.call(t,a,1);--this.size;return true}e.exports=s},function(e,t,a){var r=a(1236);function n(e){var t=this.__data__,a=r(t,e);return a<0?void 0:t[a][1]}e.exports=n},function(e,t,a){var r=a(1236);function n(e){return r(this.__data__,e)>-1}e.exports=n},function(e,t,a){var r=a(1236);function n(e,t){var a=this.__data__,n=r(a,e);if(n<0){++this.size;a.push([e,t])}else a[n][1]=t;return this}e.exports=n},function(e,t,a){var r=a(1237);function n(e){var t=r(this,e)["delete"](e);this.size-=t?1:0;return t}e.exports=n},function(e,t){function a(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=a},function(e,t,a){var r=a(1237);function n(e){return r(this,e).get(e)}e.exports=n},function(e,t,a){var r=a(1237);function n(e){return r(this,e).has(e)}e.exports=n},function(e,t,a){var r=a(1237);function n(e,t){var a=r(this,e),n=a.size;a.set(e,t);this.size+=a.size==n?0:1;return this}e.exports=n},function(e,t){var a="__lodash_hash_undefined__";function r(e){this.__data__.set(e,a);return this}e.exports=r},function(e,t){function a(e){return this.__data__.has(e)}e.exports=a},function(e,t,a){var r=a(2161),n=a(2162),i=a(2163);function s(e,t,a){return t===t?i(e,t,a):r(e,n,a)}e.exports=s},function(e,t){function a(e,t,a,r){var n=e.length,i=a+(r?1:-1);while(r?i--:++i<n)if(t(e[i],i,e))return i;return-1}e.exports=a},function(e,t){function a(e){return e!==e}e.exports=a},function(e,t){function a(e,t,a){var r=a-1,n=e.length;while(++r<n)if(e[r]===t)return r;return-1}e.exports=a},function(e,t,a){var r=a(2165);var n=Math.max;function i(e,t,a){t=n(void 0===t?e.length-1:t,0);return function(){var i=arguments,s=-1,o=n(i.length-t,0),l=Array(o);while(++s<o)l[s]=i[t+s];s=-1;var c=Array(t+1);while(++s<t)c[s]=i[s];c[t]=a(l);return r(e,this,c)}}e.exports=i},function(e,t){function a(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}e.exports=a},function(e,t,a){var r=a(2167),n=a(2169);var i=n(r);e.exports=i},function(e,t,a){var r=a(2168),n=a(2115),i=a(1233);var s=n?function(e,t){return n(e,"toString",{configurable:true,enumerable:false,value:r(t),writable:true})}:i;e.exports=s},function(e,t){function a(e){return function(){return e}}e.exports=a},function(e,t){var a=800,r=16;var n=Date.now;function i(e){var t=0,i=0;return function(){var s=n(),o=r-(s-i);i=s;if(o>0){if(++t>=a)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}e.exports=i},function(e,t,a){var r=a(1638),n=a(1645),i=a(2171),s=a(1646);var o=n(function(e){return i(r(e,1,s,true))});e.exports=o},function(e,t,a){var r=a(1399),n=a(1642),i=a(1643),s=a(1402),o=a(2172),l=a(1403);var c=200;function u(e,t,a){var u=-1,d=n,p=e.length,h=true,v=[],m=v;if(a){h=false;d=i}else if(p>=c){var f=t?null:o(e);if(f)return l(f);h=false;d=s;m=new r}else m=t?[]:v;e:while(++u<p){var b=e[u],g=t?t(b):b;b=a||0!==b?b:0;if(h&&g===g){var _=m.length;while(_--)if(m[_]===g)continue e;t&&m.push(g);v.push(b)}else if(!d(m,g,a)){m!==v&&m.push(g);v.push(b)}}return v}e.exports=u},function(e,t,a){var r=a(1647),n=a(2173),i=a(1403);var s=1/0;var o=r&&1/i(new r([,-0]))[1]==s?function(e){return new r(e)}:n;e.exports=o},function(e,t){function a(){}e.exports=a},function(e,t,a){var r=a(755),n=a(2175),i=a(682);var s="[object Object]";var o=Function.prototype,l=Object.prototype;var c=o.toString;var u=l.hasOwnProperty;var d=c.call(Object);function p(e){if(!i(e)||r(e)!=s)return false;var t=n(e);if(null===t)return true;var a=u.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&c.call(a)==d}e.exports=p},function(e,t,a){var r=a(2122);var n=r(Object.getPrototypeOf,Object);e.exports=n},function(e,t,a){"use strict";t.__esModule=true;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.default=c;var n=a(2177);var i=l(n);var s=a(1233);var o=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.default;if(!e)return function(e){return function(){return e.apply(void 0,arguments)}};function n(e){return r({},e,{actionsById:(0,i.default)(e.actionsById,function(e){return r({},e,{action:a(e.action)})}),committedState:t(e.committedState),computedStates:e.computedStates.map(function(e){return r({},e,{state:t(e.state)})})})}return function(t){return function(a,i,s){var o="redux-dev-session-"+e;var l=void 0;try{var c=localStorage.getItem(o);if(c){l=n(JSON.parse(c))||i;t(a,i)}}catch(e){console.warn("Could not read debug session from localStorage:",e);try{localStorage.removeItem(o)}finally{l=void 0}}var u=t(a,l,s);return r({},u,{dispatch:function e(t){u.dispatch(t);try{localStorage.setItem(o,JSON.stringify(u.getState()))}catch(e){console.warn("Could not write debug session to localStorage:",e)}return t}})}}}},function(e,t,a){var r=a(2114),n=a(2117),i=a(2178);function s(e,t){var a={};t=i(t,3);n(e,function(e,n,i){r(a,n,t(e,n,i))});return a}e.exports=s},function(e,t,a){var r=a(2179),n=a(2202),i=a(1233),s=a(502),o=a(2212);function l(e){if("function"==typeof e)return e;if(null==e)return i;if("object"==typeof e)return s(e)?n(e[0],e[1]):r(e);return o(e)}e.exports=l},function(e,t,a){var r=a(2180),n=a(2201),i=a(1652);function s(e){var t=n(e);if(1==t.length&&t[0][2])return i(t[0][0],t[0][1]);return function(a){return a===e||r(a,e,t)}}e.exports=s},function(e,t,a){var r=a(1648),n=a(1649);var i=1,s=2;function o(e,t,a,o){var l=a.length,c=l,u=!o;if(null==e)return!c;e=Object(e);while(l--){var d=a[l];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return false}while(++l<c){d=a[l];var p=d[0],h=e[p],v=d[1];if(u&&d[2]){if(void 0===h&&!(p in e))return false}else{var m=new r;if(o)var f=o(h,v,p,e,t,m);if(!(void 0===f?n(v,h,i|s,o,m):f))return false}}return true}e.exports=o},function(e,t,a){var r=a(1235);function n(){this.__data__=new r;this.size=0}e.exports=n},function(e,t){function a(e){var t=this.__data__,a=t["delete"](e);this.size=t.size;return a}e.exports=a},function(e,t){function a(e){return this.__data__.get(e)}e.exports=a},function(e,t){function a(e){return this.__data__.has(e)}e.exports=a},function(e,t,a){var r=a(1235),n=a(1401),i=a(1400);var s=200;function o(e,t){var a=this.__data__;if(a instanceof r){var o=a.__data__;if(!n||o.length<s-1){o.push([e,t]);this.size=++a.size;return this}a=this.__data__=new i(o)}a.set(e,t);this.size=a.size;return this}e.exports=o},function(e,t,a){var r=a(1648),n=a(1650),i=a(2188),s=a(2191),o=a(2197),l=a(502),c=a(2118),u=a(2120);var d=1;var p="[object Arguments]",h="[object Array]",v="[object Object]";var m=Object.prototype;var f=m.hasOwnProperty;function b(e,t,a,m,b,g){var _=l(e),y=l(t),O=_?h:o(e),k=y?h:o(t);O=O==p?v:O;k=k==p?v:k;var E=O==v,C=k==v,j=O==k;if(j&&c(e)){if(!c(t))return false;_=true;E=false}if(j&&!E){g||(g=new r);return _||u(e)?n(e,t,a,m,b,g):i(e,t,O,a,m,b,g)}if(!(a&d)){var w=E&&f.call(e,"__wrapped__"),S=C&&f.call(t,"__wrapped__");if(w||S){var I=w?e.value():e,T=S?t.value():t;g||(g=new r);return b(I,T,a,m,g)}}if(!j)return false;g||(g=new r);return s(e,t,a,m,b,g)}e.exports=b},function(e,t){function a(e,t){var a=-1,r=null==e?0:e.length;while(++a<r)if(t(e[a],a,e))return true;return false}e.exports=a},function(e,t,a){var r=a(681),n=a(2189),i=a(1639),s=a(1650),o=a(2190),l=a(1403);var c=1,u=2;var d="[object Boolean]",p="[object Date]",h="[object Error]",v="[object Map]",m="[object Number]",f="[object RegExp]",b="[object Set]",g="[object String]",_="[object Symbol]";var y="[object ArrayBuffer]",O="[object DataView]";var k=r?r.prototype:void 0,E=k?k.valueOf:void 0;function C(e,t,a,r,k,C,j){switch(a){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return false;e=e.buffer;t=t.buffer;case y:if(e.byteLength!=t.byteLength||!C(new n(e),new n(t)))return false;return true;case d:case p:case m:return i(+e,+t);case h:return e.name==t.name&&e.message==t.message;case f:case g:return e==t+"";case v:var w=o;case b:var S=r&c;w||(w=l);if(e.size!=t.size&&!S)return false;var I=j.get(e);if(I)return I==t;r|=u;j.set(e,t);var T=s(w(e),w(t),r,k,C,j);j["delete"](e);return T;case _:if(E)return E.call(e)==E.call(t)}return false}e.exports=C},function(e,t,a){var r=a(524);var n=r.Uint8Array;e.exports=n},function(e,t){function a(e){var t=-1,a=Array(e.size);e.forEach(function(e,r){a[++t]=[r,e]});return a}e.exports=a},function(e,t,a){var r=a(2192);var n=1;var i=Object.prototype;var s=i.hasOwnProperty;function o(e,t,a,i,o,l){var c=a&n,u=r(e),d=u.length,p=r(t),h=p.length;if(d!=h&&!c)return false;var v=d;while(v--){var m=u[v];if(!(c?m in t:s.call(t,m)))return false}var f=l.get(e);if(f&&l.get(t))return f==t;var b=true;l.set(e,t);l.set(t,e);var g=c;while(++v<d){m=u[v];var _=e[m],y=t[m];if(i)var O=c?i(y,_,m,t,e,l):i(_,y,m,e,t,l);if(!(void 0===O?_===y||o(_,y,a,i,l):O)){b=false;break}g||(g="constructor"==m)}if(b&&!g){var k=e.constructor,E=t.constructor;k!=E&&"constructor"in e&&"constructor"in t&&!("function"==typeof k&&k instanceof k&&"function"==typeof E&&E instanceof E)&&(b=false)}l["delete"](e);l["delete"](t);return b}e.exports=o},function(e,t,a){var r=a(2193),n=a(2194),i=a(1640);function s(e){return r(e,i,n)}e.exports=s},function(e,t,a){var r=a(2113),n=a(502);function i(e,t,a){var i=t(e);return n(e)?i:r(i,a(e))}e.exports=i},function(e,t,a){var r=a(2195),n=a(2196);var i=Object.prototype;var s=i.propertyIsEnumerable;var o=Object.getOwnPropertySymbols;var l=o?function(e){if(null==e)return[];e=Object(e);return r(o(e),function(t){return s.call(e,t)})}:n;e.exports=l},function(e,t){function a(e,t){var a=-1,r=null==e?0:e.length,n=0,i=[];while(++a<r){var s=e[a];t(s,a,e)&&(i[n++]=s)}return i}e.exports=a},function(e,t){function a(){return[]}e.exports=a},function(e,t,a){var r=a(2198),n=a(1401),i=a(2199),s=a(1647),o=a(2200),l=a(755),c=a(2116);var u="[object Map]",d="[object Object]",p="[object Promise]",h="[object Set]",v="[object WeakMap]";var m="[object DataView]";var f=c(r),b=c(n),g=c(i),_=c(s),y=c(o);var O=l;(r&&O(new r(new ArrayBuffer(1)))!=m||n&&O(new n)!=u||i&&O(i.resolve())!=p||s&&O(new s)!=h||o&&O(new o)!=v)&&(O=function(e){var t=l(e),a=t==d?e.constructor:void 0,r=a?c(a):"";if(r)switch(r){case f:return m;case b:return u;case g:return p;case _:return h;case y:return v}return t});e.exports=O},function(e,t,a){var r=a(1030),n=a(524);var i=r(n,"DataView");e.exports=i},function(e,t,a){var r=a(1030),n=a(524);var i=r(n,"Promise");e.exports=i},function(e,t,a){var r=a(1030),n=a(524);var i=r(n,"WeakMap");e.exports=i},function(e,t,a){var r=a(1651),n=a(1640);function i(e){var t=n(e),a=t.length;while(a--){var i=t[a],s=e[i];t[a]=[i,s,r(s)]}return t}e.exports=i},function(e,t,a){var r=a(1649),n=a(2203),i=a(2209),s=a(1404),o=a(1651),l=a(1652),c=a(1238);var u=1,d=2;function p(e,t){if(s(e)&&o(t))return l(c(e),t);return function(a){var s=n(a,e);return void 0===s&&s===t?i(a,e):r(t,s,u|d)}}e.exports=p},function(e,t,a){var r=a(1653);function n(e,t,a){var n=null==e?void 0:r(e,t);return void 0===n?a:n}e.exports=n},function(e,t,a){var r=a(2205);var n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var i=/\\(\\)?/g;var s=r(function(e){var t=[];46===e.charCodeAt(0)&&t.push("");e.replace(n,function(e,a,r,n){t.push(r?n.replace(i,"$1"):a||e)});return t});e.exports=s},function(e,t,a){var r=a(2206);var n=500;function i(e){var t=r(e,function(e){a.size===n&&a.clear();return e});var a=t.cache;return t}e.exports=i},function(e,t,a){var r=a(1400);var n="Expected a function";function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(n);var a=function(){var r=arguments,n=t?t.apply(this,r):r[0],i=a.cache;if(i.has(n))return i.get(n);var s=e.apply(this,r);a.cache=i.set(n,s)||i;return s};a.cache=new(i.Cache||r);return a}i.Cache=r;e.exports=i},function(e,t,a){var r=a(2208);function n(e){return null==e?"":r(e)}e.exports=n},function(e,t,a){var r=a(681),n=a(1644),i=a(502),s=a(1405);var o=1/0;var l=r?r.prototype:void 0,c=l?l.toString:void 0;function u(e){if("string"==typeof e)return e;if(i(e))return n(e,u)+"";if(s(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}e.exports=u},function(e,t,a){var r=a(2210),n=a(2211);function i(e,t){return null!=e&&n(e,t,r)}e.exports=i},function(e,t){function a(e,t){return null!=e&&t in Object(e)}e.exports=a},function(e,t,a){var r=a(1654),n=a(1715),i=a(502),s=a(2119),o=a(1717),l=a(1238);function c(e,t,a){t=r(t,e);var c=-1,u=t.length,d=false;while(++c<u){var p=l(t[c]);if(!(d=null!=e&&a(e,p)))break;e=e[p]}if(d||++c!=u)return d;u=null==e?0:e.length;return!!u&&o(u)&&s(p,u)&&(i(e)||n(e))}e.exports=c},function(e,t,a){var r=a(2213),n=a(2214),i=a(1404),s=a(1238);function o(e){return i(e)?r(s(e)):n(e)}e.exports=o},function(e,t){function a(e){return function(t){return null==t?void 0:t[e]}}e.exports=a},function(e,t,a){var r=a(1653);function n(e){return function(t){return r(t,e)}}e.exports=n},function(e,t,a){"use strict";t.__esModule=true;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.default=m;var n=a(1);var i=d(n);var s=a(2216);var o=d(s);var l=a(13);var c=a(1641);var u=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e){var t,a;var s=n.Children.only(e);var c=s.props;var d=s.type;var m=(0,l.connect)(function(e){return e})(d);return a=t=function(e){v(t,e);function t(a,r){p(this,t);var n=h(this,e.call(this,a,r));if(!a.store&&!r.store){console.error('Redux DevTools could not render. You must pass the Redux store to <DevTools> either as a "store" prop or by wrapping it in a <Provider store={store}>.');return h(n)}r.store?n.liftedStore=r.store.liftedStore:n.liftedStore=a.store.liftedStore;n.liftedStore||console.error("Redux DevTools could not render. Did you forget to include DevTools.instrument() in your store enhancer chain before using createStore()?");return n}t.prototype.render=function e(){if(!this.liftedStore)return null;return i.default.createElement(m,r({},c,{store:this.liftedStore}))};return t}(n.Component),t.contextTypes={store:o.default.object},t.propTypes={store:o.default.object},t.instrument=function(e){return(0,u.default)(function(e,t){return d.update(c,e,t)},e)},a}},function(e,t,a){var r,n,i;false;e.exports=a(2217)()},function(e,t,a){"use strict";var r=a(1406);var n=a(1407);var i=a(2218);e.exports=function(){function e(e,t,a,r,s,o){if(o===i)return;n(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};a.checkPropTypes=r;a.PropTypes=a;return a}},function(e,t,a){"use strict";var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=r},function(e,t,a){"use strict";t.__esModule=true;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};var n=a(1);var i=E(n);var s=a(1239);var o=E(s);var l=a(1139);var c=E(l);var u=a(2223);var d=k(u);var p=a(1255);var h=a(1656);var v=a(2262);var m=E(v);var f=a(2263);var b=E(f);var g=a(2266);var _=E(g);var y=a(2295);var O=E(y);function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);t.default=e;return t}function E(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var S=p.ActionCreators.toggleAction;var I=p.ActionCreators.setActionsActive;var T={container:{fontFamily:"monaco, Consolas, Lucida Console, monospace",position:"relative",overflowY:"hidden",width:"100%",height:"100%",minWidth:300,direction:"ltr"},elements:{position:"absolute",left:0,right:0,top:0,bottom:0,overflowX:"hidden",overflowY:"auto"}};var A=function(e){w(t,e);function t(a){C(this,t);var r=j(this,e.call(this,a));r.shouldComponentUpdate=c.default;r.updateScrollTop=(0,O.default)(function(){var e=r.node;r.props.dispatch((0,h.updateScrollTop)(e?e.scrollTop:0))},500);r.handleToggleAction=r.handleToggleAction.bind(r);r.handleToggleConsecutiveAction=r.handleToggleConsecutiveAction.bind(r);r.getRef=r.getRef.bind(r);return r}t.prototype.scroll=function e(){var t=this.node;if(!t)return;if(this.scrollDown){var a=t.offsetHeight;var r=t.scrollHeight;t.scrollTop=r-a;this.scrollDown=false}};t.prototype.componentDidMount=function e(){var t=this.node;if(!t||!this.props.monitorState)return;if(this.props.preserveScrollTop){t.scrollTop=this.props.monitorState.initialScrollTop;t.addEventListener("scroll",this.updateScrollTop)}else{this.scrollDown=true;this.scroll()}};t.prototype.componentWillUnmount=function e(){var t=this.node;t&&this.props.preserveScrollTop&&t.removeEventListener("scroll",this.updateScrollTop)};t.prototype.componentWillReceiveProps=function e(t){var a=this.node;if(a)if(this.props.stagedActionIds.length<t.stagedActionIds.length){var r=a.scrollTop;var n=a.offsetHeight;var i=a.scrollHeight;this.scrollDown=Math.abs(i-(r+n))<20}else this.scrollDown=false;else this.scrollDown=true};t.prototype.componentDidUpdate=function e(){this.scroll()};t.prototype.handleToggleAction=function e(t){this.props.dispatch(S(t))};t.prototype.handleToggleConsecutiveAction=function e(t){var a=this.props;var r=a.monitorState;var n=a.actionsById;var i=r.consecutiveToggleStartId;if(i&&n[i]){var s=this.props.skippedActionIds;var o=Math.min(i,t);var l=Math.max(i,t);var c=s.indexOf(i)>-1;this.props.dispatch(I(o,l+1,c));this.props.dispatch((0,h.startConsecutiveToggle)(null))}else t>0&&this.props.dispatch((0,h.startConsecutiveToggle)(t))};t.prototype.getTheme=function e(){var t=this.props.theme;if("string"!==typeof t)return t;if("undefined"!==typeof d[t])return d[t];console.warn("DevTools theme "+t+" not found, defaulting to nicinabox");return d.nicinabox};t.prototype.getRef=function e(t){this.node=t};t.prototype.render=function e(){var t=this.getTheme();var a=this.props.monitorState.consecutiveToggleStartId;var n=this.props;var s=n.dispatch;var o=n.actionsById;var l=n.skippedActionIds;var c=n.stagedActionIds;var u=n.computedStates;var d=n.currentStateIndex;var p=n.select;var h=n.expandActionRoot;var v=n.expandStateRoot;var m=n.markStateDiff;var f={theme:t,actionsById:o,skippedActionIds:l,stagedActionIds:c,computedStates:u,currentStateIndex:d,consecutiveToggleStartId:a,select:p,expandActionRoot:h,expandStateRoot:v,markStateDiff:m,onActionClick:this.handleToggleAction,onActionShiftClick:this.handleToggleConsecutiveAction};return i.default.createElement("div",{style:r({},T.container,{backgroundColor:t.base00})},!this.props.hideMainButtons&&i.default.createElement(b.default,{theme:t,dispatch:s,hasStates:u.length>1,hasSkippedActions:l.length>0}),i.default.createElement("div",{style:this.props.hideMainButtons?T.elements:r({},T.elements,{top:30}),ref:this.getRef},i.default.createElement(_.default,f)))};return t}(n.Component);A.update=m.default;A.propTypes={dispatch:o.default.func,computedStates:o.default.array,actionsById:o.default.object,stagedActionIds:o.default.array,skippedActionIds:o.default.array,monitorState:o.default.shape({initialScrollTop:o.default.number,consecutiveToggleStartId:o.default.number}),preserveScrollTop:o.default.bool,select:o.default.func,theme:o.default.oneOfType([o.default.object,o.default.string]),expandActionRoot:o.default.bool,expandStateRoot:o.default.bool,markStateDiff:o.default.bool,hideMainButtons:o.default.bool};A.defaultProps={select:function e(t){return t},theme:"nicinabox",preserveScrollTop:true,expandActionRoot:true,expandStateRoot:true,markStateDiff:false};t.default=A},function(e,t,a){"use strict";var r=a(1406);var n=a(1407);var i=a(2221);e.exports=function(){function e(e,t,a,r,s,o){if(o===i)return;n(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};a.checkPropTypes=r;a.PropTypes=a;return a}},function(e,t,a){"use strict";var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=r},function(e,t,a){"use strict";t.__esModule=true;t["default"]=r;function r(e,t){if(e===t)return true;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return false;var a=Object.keys(e);var r=Object.keys(t);if(a.length!==r.length)return false;var n=Object.prototype.hasOwnProperty.bind(t);for(var i=0;i<a.length;i++)if(!n(a[i])||e[a[i]]!==t[a[i]])return false;return true}e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;function r(e){return e&&e.__esModule?e["default"]:e}function n(e,t){var a=t({},e);delete a["default"];return a}function i(e,t){var a=Object.getOwnPropertyNames(t);for(var r=0;r<a.length;r++){var n=a[r];var i=Object.getOwnPropertyDescriptor(t,n);i&&i.configurable&&void 0===e[n]&&Object.defineProperty(e,n,i)}return e}var s=a(1655);i(t,n(s,i));var o=a(2261);t.nicinabox=r(o)},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"brewer",author:"timoth\xe9e poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"nicinabox",author:"nicinabox (http://github.com/nicinabox)",base00:"#2A2F3A",base01:"#3C444F",base02:"#4F5A65",base03:"#BEBEBE",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#FFFFFF",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#FC6D24",base0A:"#ddb26f",base0B:"#A1C659",base0C:"#12cfc0",base0D:"#6FB3D2",base0E:"#D381C3",base0F:"#deaf8f"};e.exports=t["default"]},function(e,t,a){"use strict";t.__esModule=true;t.default=s;var r=a(1656);function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var a=arguments[2];if(!e.preserveScrollTop)return 0;return a.type===r.UPDATE_SCROLL_TOP?a.scrollTop:t}function i(e,t,a){return a.type===r.START_CONSECUTIVE_TOGGLE?a.id:t}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=arguments[2];return{initialScrollTop:n(e,t.initialScrollTop,a),consecutiveToggleStartId:i(e,t.consecutiveToggleStartId,a)}}},function(e,t,a){"use strict";t.__esModule=true;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};var n=a(1);var i=h(n);var s=a(1239);var o=h(s);var l=a(1139);var c=h(l);var u=a(1255);var d=a(2264);var p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=u.ActionCreators.reset;var g=u.ActionCreators.rollback;var _=u.ActionCreators.commit;var y=u.ActionCreators.sweep;var O={textAlign:"center",borderBottomWidth:1,borderBottomStyle:"solid",borderColor:"transparent",zIndex:1,display:"flex",flexDirection:"row"};var k=function(e){f(t,e);function t(a){v(this,t);var r=m(this,e.call(this,a));r.shouldComponentUpdate=c.default;r.handleReset=r.handleReset.bind(r);r.handleRollback=r.handleRollback.bind(r);r.handleSweep=r.handleSweep.bind(r);r.handleCommit=r.handleCommit.bind(r);return r}t.prototype.handleRollback=function e(){this.props.dispatch(g())};t.prototype.handleSweep=function e(){this.props.dispatch(y())};t.prototype.handleCommit=function e(){this.props.dispatch(_())};t.prototype.handleReset=function e(){this.props.dispatch(b())};t.prototype.render=function e(){var t=this.props;var a=t.theme;var n=t.hasStates;var s=t.hasSkippedActions;return i.default.createElement("div",{style:r({},O,{borderColor:a.base02})},i.default.createElement(p.default,{theme:a,onClick:this.handleReset,enabled:true},"Reset"),i.default.createElement(p.default,{theme:a,onClick:this.handleRollback,enabled:n},"Revert"),i.default.createElement(p.default,{theme:a,onClick:this.handleSweep,enabled:s},"Sweep"),i.default.createElement(p.default,{theme:a,onClick:this.handleCommit,enabled:n},"Commit"))};return t}(n.Component);k.propTypes={dispatch:o.default.func,theme:o.default.object};t.default=k},function(e,t,a){"use strict";t.__esModule=true;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};var n=a(1);var i=u(n);var s=a(2265);var o=u(s);var l=a(1139);var c=u(l);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v={base:{cursor:"pointer",fontWeight:"bold",borderRadius:3,padding:4,marginLeft:3,marginRight:3,marginTop:5,marginBottom:5,flexGrow:1,display:"inline-block",fontSize:"0.8em",color:"white",textDecoration:"none"}};var m=function(e){h(t,e);function t(a){d(this,t);var r=p(this,e.call(this,a));r.shouldComponentUpdate=c.default;r.handleMouseEnter=r.handleMouseEnter.bind(r);r.handleMouseLeave=r.handleMouseLeave.bind(r);r.handleMouseDown=r.handleMouseDown.bind(r);r.handleMouseUp=r.handleMouseUp.bind(r);r.onClick=r.onClick.bind(r);r.state={hovered:false,active:false};return r}t.prototype.handleMouseEnter=function e(){this.setState({hovered:true})};t.prototype.handleMouseLeave=function e(){this.setState({hovered:false})};t.prototype.handleMouseDown=function e(){this.setState({active:true})};t.prototype.handleMouseUp=function e(){this.setState({active:false})};t.prototype.onClick=function e(){if(!this.props.enabled)return;this.props.onClick&&this.props.onClick()};t.prototype.render=function e(){var t=r({},v.base,{backgroundColor:this.props.theme.base02});this.props.enabled&&this.state.hovered&&(t=r({},t,{backgroundColor:(0,o.default)(this.props.theme.base02,.2)}));this.props.enabled||(t=r({},t,{opacity:.2,cursor:"text",backgroundColor:"transparent"}));return i.default.createElement("a",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.onClick,style:t},this.props.children)};return t}(i.default.Component);t.default=m},function(e,t,a){"use strict";t.__esModule=true;t.default=function(e,t){var a=String(e).replace(/[^0-9a-f]/gi,"");a.length<6&&(a=a.replace(/(.)/g,"$1$1"));var r=t||0;var n="#";var i=void 0;for(var s=0;s<3;++s){i=parseInt(a.substr(2*s,2),16);i=Math.round(Math.min(Math.max(0,i+i*r),255)).toString(16);n+=("00"+i).substr(i.length)}return n}},function(e,t,a){"use strict";t.__esModule=true;var r=a(1);var n=d(r);var i=a(1239);var s=d(i);var o=a(2267);var l=d(o);var c=a(1139);var u=d(c);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){v(t,e);function t(){var a,r,n;p(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return n=(a=(r=h(this,e.call.apply(e,[this].concat(s))),r),r.shouldComponentUpdate=u.default,a),h(r,n)}t.prototype.render=function e(){var t=[];var a=this.props;var r=a.theme;var i=a.actionsById;var s=a.computedStates;var o=a.currentStateIndex;var c=a.consecutiveToggleStartId;var u=a.select;var d=a.skippedActionIds;var p=a.stagedActionIds;var h=a.expandActionRoot;var v=a.expandStateRoot;var m=a.markStateDiff;var f=a.onActionClick;var b=a.onActionShiftClick;for(var g=0;g<p.length;g++){var _=p[g];var y=i[_].action;var O=s[g];var k=O.state;var E=O.error;var C=void 0;g>0&&(C=s[g-1].state);t.push(n.default.createElement(l.default,{key:_,theme:r,select:u,action:y,actionId:_,state:k,previousState:C,collapsed:d.indexOf(_)>-1,inFuture:g>o,selected:c===g,error:E,expandActionRoot:h,expandStateRoot:v,markStateDiff:m,onActionClick:f,onActionShiftClick:b}))}return n.default.createElement("div",null,t)};return t}(r.Component);m.propTypes={actionsById:s.default.object,computedStates:s.default.array,stagedActionIds:s.default.array,skippedActionIds:s.default.array,currentStateIndex:s.default.number,consecutiveToggleStartId:s.default.number,select:s.default.func.isRequired,onActionClick:s.default.func.isRequired,theme:s.default.oneOfType([s.default.object,s.default.string]),expandActionRoot:s.default.bool,expandStateRoot:s.default.bool};t.default=m},function(e,t,a){"use strict";t.__esModule=true;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};var i=a(1);var s=m(i);var o=a(1239);var l=m(o);var c=a(1657);var u=m(c);var d=a(2294);var p=m(d);var h=a(1139);var v=m(h);function m(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _={entry:{display:"block",WebkitUserSelect:"none"},root:{marginLeft:0}};var y=function e(t,a){return a.reduce(function(e,t){return e&&e[t]},t)};var O=function e(t,a,r){var n=[].concat(r).reverse().slice(1);return y(t,n)===y(a,n)};var k=function(e){g(t,e);function t(a){f(this,t);var r=b(this,e.call(this,a));r.shouldComponentUpdate=v.default;r.handleActionClick=r.handleActionClick.bind(r);r.shouldExpandNode=r.shouldExpandNode.bind(r);return r}t.prototype.printState=function e(t,a){var i=this;var o=a;if(!o)try{var l=function(){var e=i.props.select(t);var a=void 0;i.props.markStateDiff?function(){var t="undefined"!==typeof i.props.previousState?i.props.select(i.props.previousState):void 0;var r=function a(r,s,o){var l=r.style;return{style:n({},l,{backgroundColor:O(e,t,o)?"transparent":i.props.theme.base01})}};var s=function e(t,a){var r=t.style;return{style:n({},r,a.length>1?{}:_.root)}};a={extend:i.props.theme,tree:_.tree,value:r,nestedNode:s}}():a=i.props.theme;return{v:s.default.createElement(u.default,{theme:a,data:e,invertTheme:false,keyPath:["state"],shouldExpandNode:i.shouldExpandNode})}}();if("object"===("undefined"===typeof l?"undefined":r(l)))return l.v}catch(e){o="Error selecting state."}return s.default.createElement("div",{style:{color:this.props.theme.base08,paddingTop:20,paddingLeft:30,paddingRight:30,paddingBottom:35}},o)};t.prototype.handleActionClick=function e(t){var a=this.props;var r=a.actionId;var n=a.onActionClick;var i=a.onActionShiftClick;r>0&&(t.shiftKey?i(r):n(r))};t.prototype.shouldExpandNode=function e(t,a,r){return this.props.expandStateRoot&&0===r};t.prototype.render=function e(){var t=this.props;var a=t.actionId;var r=t.error;var i=t.action;var o=t.state;var l=t.collapsed;var c=t.selected;var u=t.inFuture;var d={opacity:l?.5:1,cursor:a>0?"pointer":"default"};return s.default.createElement("div",{style:{opacity:c?.4:u?.6:1,textDecoration:l?"line-through":"none",color:this.props.theme.base06}},s.default.createElement(p.default,{theme:this.props.theme,collapsed:l,action:i,expandActionRoot:this.props.expandActionRoot,onClick:this.handleActionClick,style:n({},_.entry,d)}),!l&&s.default.createElement("div",{style:{paddingLeft:16}},this.printState(o,r)))};return t}(i.Component);k.propTypes={state:l.default.object.isRequired,action:l.default.object.isRequired,actionId:l.default.number.isRequired,select:l.default.func.isRequired,inFuture:l.default.bool,error:l.default.string,onActionClick:l.default.func.isRequired,onActionShiftClick:l.default.func.isRequired,collapsed:l.default.bool,selected:l.default.bool,expandActionRoot:l.default.bool,expandStateRoot:l.default.bool};t.default=k},function(e,t,a){"use strict";var r=a(1406);var n=a(1407);var i=a(2269);e.exports=function(){function e(e,t,a,r,s,o){if(o===i)return;n(false,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}e.isRequired=e;function t(){return e}var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};a.checkPropTypes=r;a.PropTypes=a;return a}},function(e,t,a){"use strict";var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=r},function(e,t,a){"use strict";t.__esModule=true;var r=a(387);var n=i(r);t["default"]=s;function i(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&"function"===typeof e[n["default"]])return"Iterable";return t}},function(e,t,a){"use strict";t.__esModule=true;var r=a(3);var n=m(r);var i=a(37);var s=m(i);var o=a(1659);var l=m(o);var c=a(1);var u=m(c);var d=a(828);var p=m(d);var h=a(1408);var v=m(h);function m(e){return e&&e.__esModule?e:{default:e}}function f(e){var t=(0,l["default"])(e).length;return t+" "+(1!==t?"keys":"key")}var b=function e(t){var a=t.data,r=(0,s["default"])(t,["data"]);return u["default"].createElement(v["default"],(0,n["default"])({},r,{data:a,nodeType:"Object",nodeTypeIndicator:"Error"===r.nodeType?"Error()":"{}",createItemString:f,expandable:(0,l["default"])(a).length>0}))};b.propTypes={data:p["default"].object,nodeType:p["default"].string};t["default"]=b},function(e,t,a){a(2273);var r=a(64).Object;e.exports=function e(t){return r.getOwnPropertyNames(t)}},function(e,t,a){a(1029)("getOwnPropertyNames",function(){return a(389).f})},function(e,t,a){"use strict";t.__esModule=true;var r=a(412);var n=c(r);var i=a(1659);var s=c(i);var o=a(882);var l=c(o);t["default"]=v;function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if("Object"===e)return(0,l["default"])(t).length;if("Array"===e)return t.length;return Infinity}function d(e){return"function"===typeof e.set}function p(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Infinity;var o=void 0;if("Object"===e){var l=(0,s["default"])(t);"undefined"!==typeof a&&l.sort(a);l=l.slice(r,i+1);o={entries:l.map(function(e){return{key:e,value:t[e]}})}}else if("Array"===e)o={entries:t.slice(r,i+1).map(function(e,t){return{key:t+r,value:e}})};else{var c=0;var u=[];var p=true;var h=d(t);for(var v=t,m=Array.isArray(v),f=0,v=m?v:(0,n["default"])(v);;){var b;if(m){if(f>=v.length)break;b=v[f++]}else{f=v.next();if(f.done)break;b=f.value}var g=b;if(c>i){p=false;break}r<=c&&(h&&Array.isArray(g)?"string"===typeof g[0]||"number"===typeof g[0]?u.push({key:g[0],value:g[1]}):u.push({key:"[entry "+c+"]",value:{"[key]":g[0],"[value]":g[1]}}):u.push({key:c,value:g}));c++}o={hasMore:!p,entries:u}}return o}function h(e,t,a){var r=[];while(t-e>a*a)a*=a;for(var n=e;n<=t;n+=a)r.push({from:n,to:Math.min(t,n+a-1)});return r}function v(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Infinity;var s=p.bind(null,e,t,a);if(!r)return s().entries;var o=i<Infinity;var l=Math.min(i-n,u(e,t));if("Iterable"!==e){if(l<=r||r<7)return s(n,i).entries}else if(l<=r&&!o)return s(n,i).entries;var c=void 0;if("Iterable"===e){var d=s(n,n+r-1),v=d.hasMore,m=d.entries;c=v?[].concat(m,h(n+r,n+2*r-1,r)):m}else c=o?h(n,i,r):[].concat(s(0,r-5).entries,h(r-4,l-5,r),s(l-4,l-1).entries);return c}},function(e,t,a){"use strict";t.__esModule=true;var r=a(3);var n=b(r);var i=a(6);var s=b(i);var o=a(8);var l=b(o);var c=a(9);var u=b(c);var d=a(1);var p=b(d);var h=a(828);var v=b(h);var m=a(1660);var f=b(m);function b(e){return e&&e.__esModule?e:{default:e}}var g=function(e){(0,u["default"])(t,e);function t(a){(0,s["default"])(this,t);var r=(0,l["default"])(this,e.call(this,a));r.state={expanded:false};r.handleClick=r.handleClick.bind(r);return r}t.prototype.render=function e(){var t=this.props,a=t.styling,r=t.from,i=t.to,s=t.renderChildNodes,o=t.nodeType;return this.state.expanded?p["default"].createElement("div",a("itemRange",this.state.expanded),s(this.props,r,i)):p["default"].createElement("div",(0,n["default"])({},a("itemRange",this.state.expanded),{onClick:this.handleClick}),p["default"].createElement(f["default"],{nodeType:o,styling:a,expanded:false,onClick:this.handleClick,arrowStyle:"double"}),r+" ... "+i)};t.prototype.handleClick=function e(){this.setState({expanded:!this.state.expanded})};return t}(p["default"].Component);g.propTypes={styling:v["default"].func.isRequired,from:v["default"].number.isRequired,to:v["default"].number.isRequired,renderChildNodes:v["default"].func.isRequired,nodeType:v["default"].string.isRequired};t["default"]=g},function(e,t,a){"use strict";t.__esModule=true;var r=a(3);var n=h(r);var i=a(37);var s=h(i);var o=a(1);var l=h(o);var c=a(828);var u=h(c);var d=a(1408);var p=h(d);function h(e){return e&&e.__esModule?e:{default:e}}function v(e){return e.length+" "+(1!==e.length?"items":"item")}var m=function e(t){var a=t.data,r=(0,s["default"])(t,["data"]);return l["default"].createElement(p["default"],(0,n["default"])({},r,{data:a,nodeType:"Array",nodeTypeIndicator:"[]",createItemString:v,expandable:a.length>0}))};m.propTypes={data:u["default"].array};t["default"]=m},function(e,t,a){"use strict";t.__esModule=true;var r=a(3);var n=m(r);var i=a(37);var s=m(i);var o=a(412);var l=m(o);var c=a(2278);var u=m(c);t["default"]=b;var d=a(1);var p=m(d);var h=a(1408);var v=m(h);function m(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var a=0;var r=false;if((0,u["default"])(e.size))a=e.size;else for(var n=e,i=Array.isArray(n),s=0,n=i?n:(0,l["default"])(n);;){var o;if(i){if(s>=n.length)break;o=n[s++]}else{s=n.next();if(s.done)break;o=s.value}var c=o;if(t&&a+1>t){r=true;break}a+=1}return(r?">":"")+a+" "+(1!==a?"entries":"entry")}function b(e){var t=(0,s["default"])(e,[]);return p["default"].createElement(v["default"],(0,n["default"])({},t,{nodeType:"Iterable",nodeTypeIndicator:"()",createItemString:f}))}},function(e,t,a){e.exports={default:a(2279),__esModule:true}},function(e,t,a){a(2280);e.exports=a(64).Number.isSafeInteger},function(e,t,a){var r=a(105);var n=a(2281);var i=Math.abs;r(r.S,"Number",{isSafeInteger:function e(t){return n(t)&&i(t)<=9007199254740991}})},function(e,t,a){var r=a(82);var n=Math.floor;e.exports=function e(t){return!r(t)&&isFinite(t)&&n(t)===t}},function(e,t,a){"use strict";t.__esModule=true;var r=a(1);var n=o(r);var i=a(828);var s=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var l=function e(t){var a=t.nodeType,r=t.styling,i=t.labelRenderer,s=t.keyPath,o=t.valueRenderer,l=t.value,c=t.valueGetter;return n["default"].createElement("li",r("value",a,s),n["default"].createElement("label",r(["label","valueLabel"],a,s),i(s,a,false,false)),n["default"].createElement("span",r("valueText",a,s),o.apply(void 0,[c(l),l].concat(s))))};l.propTypes={nodeType:s["default"].string.isRequired,styling:s["default"].func.isRequired,labelRenderer:s["default"].func.isRequired,keyPath:s["default"].arrayOf(s["default"].oneOfType([s["default"].string,s["default"].number])).isRequired,valueRenderer:s["default"].func.isRequired,value:s["default"].any,valueGetter:s["default"].func};l.defaultProps={valueGetter:function e(t){return t}};t["default"]=l},function(e,t,a){"use strict";t.__esModule=true;var r=a(3);var n=l(r);var i=a(1661);var s=a(2293);var o=l(s);function l(e){return e&&e.__esModule?e:{default:e}}var c=function e(t){return{BACKGROUND_COLOR:t.base00,TEXT_COLOR:t.base07,STRING_COLOR:t.base0B,DATE_COLOR:t.base0B,NUMBER_COLOR:t.base09,BOOLEAN_COLOR:t.base09,NULL_COLOR:t.base08,UNDEFINED_COLOR:t.base08,FUNCTION_COLOR:t.base08,SYMBOL_COLOR:t.base08,LABEL_COLOR:t.base0D,ARROW_COLOR:t.base0D,ITEM_STRING_COLOR:t.base0B,ITEM_STRING_EXPANDED_COLOR:t.base03}};var u=function e(t){return{String:t.STRING_COLOR,Date:t.DATE_COLOR,Number:t.NUMBER_COLOR,Boolean:t.BOOLEAN_COLOR,Null:t.NULL_COLOR,Undefined:t.UNDEFINED_COLOR,Function:t.FUNCTION_COLOR,Symbol:t.SYMBOL_COLOR}};var d=function e(t){var a=c(t);return{tree:{border:0,padding:0,marginTop:"0.5em",marginBottom:"0.5em",marginLeft:"0.125em",marginRight:0,listStyle:"none",MozUserSelect:"none",WebkitUserSelect:"none",backgroundColor:a.BACKGROUND_COLOR},value:function e(t,a,r){var i=t.style;return{style:(0,n["default"])({},i,{paddingTop:"0.25em",paddingRight:0,marginLeft:"0.875em",WebkitUserSelect:"text",MozUserSelect:"text",wordWrap:"break-word",paddingLeft:r.length>1?"2.125em":"1.25em",textIndent:"-0.5em",wordBreak:"break-all"})}},label:{display:"inline-block",color:a.LABEL_COLOR},valueLabel:{margin:"0 0.5em 0 0"},valueText:function e(t,r){var i=t.style;return{style:(0,n["default"])({},i,{color:u(a)[r]})}},itemRange:function e(t,r){return{style:{paddingTop:r?0:"0.25em",cursor:"pointer",color:a.LABEL_COLOR}}},arrow:function e(t,a,r){var i=t.style;return{style:(0,n["default"])({},i,{marginLeft:0,transition:"150ms",WebkitTransition:"150ms",MozTransition:"150ms",WebkitTransform:r?"rotateZ(90deg)":"rotateZ(0deg)",MozTransform:r?"rotateZ(90deg)":"rotateZ(0deg)",transform:r?"rotateZ(90deg)":"rotateZ(0deg)",transformOrigin:"45% 50%",WebkitTransformOrigin:"45% 50%",MozTransformOrigin:"45% 50%",position:"relative",lineHeight:"1.1em",fontSize:"0.75em"})}},arrowContainer:function e(t,a){var r=t.style;return{style:(0,n["default"])({},r,{display:"inline-block",paddingRight:"0.5em",paddingLeft:"double"===a?"1em":0,cursor:"pointer"})}},arrowSign:{color:a.ARROW_COLOR},arrowSignInner:{position:"absolute",top:0,left:"-0.4em"},nestedNode:function e(t,a,r,i,s){var o=t.style;return{style:(0,n["default"])({},o,{position:"relative",paddingTop:"0.25em",marginLeft:a.length>1?"0.875em":0,paddingLeft:s?0:"1.125em"})}},rootNode:{padding:0,margin:0},nestedNodeLabel:function e(t,a,r,i,s){var o=t.style;return{style:(0,n["default"])({},o,{margin:0,padding:0,WebkitUserSelect:s?"inherit":"text",MozUserSelect:s?"inherit":"text",cursor:s?"pointer":"default"})}},nestedNodeItemString:function e(t,r,i,s){var o=t.style;return{style:(0,n["default"])({},o,{paddingLeft:"0.5em",cursor:"default",color:s?a.ITEM_STRING_EXPANDED_COLOR:a.ITEM_STRING_COLOR})}},nestedNodeItemType:{marginLeft:"0.3em",marginRight:"0.3em"},nestedNodeChildren:function e(t,a,r){var i=t.style;return{style:(0,n["default"])({},i,{padding:0,margin:0,listStyle:"none",display:r?"block":"none"})}},rootNodeChildren:{padding:0,margin:0,listStyle:"none"}}};t["default"]=(0,i.createStyling)(d,{defaultBase16:o["default"]})},function(e,t,a){(function(t){var a="Expected a function";var r="__lodash_placeholder__";var n=1,i=2,s=4,o=8,l=16,c=32,u=64,d=128,p=256,h=512;var v=1/0,m=9007199254740991,f=1.7976931348623157e308,b=NaN;var g=[["ary",d],["bind",n],["bindKey",i],["curry",o],["curryRight",l],["flip",h],["partial",c],["partialRight",u],["rearg",p]];var _="[object Function]",y="[object GeneratorFunction]",O="[object Symbol]";var k=/[\\^$.*+?()[\]{}|]/g;var E=/^\s+|\s+$/g;var C=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,j=/\{\n\/\* \[wrapped with (.+)\] \*/,w=/,? & /;var S=/^[-+]0x[0-9a-f]+$/i;var I=/^0b[01]+$/i;var T=/^\[object .+?Constructor\]$/;var A=/^0o[0-7]+$/i;var N=/^(?:0|[1-9]\d*)$/;var P=parseInt;var R="object"==typeof t&&t&&t.Object===Object&&t;var M="object"==typeof self&&self&&self.Object===Object&&self;var D=R||M||Function("return this")();function x(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function F(e,t){var a=-1,r=e?e.length:0;while(++a<r)if(false===t(e[a],a,e))break;return e}function L(e,t){var a=e?e.length:0;return!!a&&U(e,t,0)>-1}function B(e,t,a,r){var n=e.length,i=a+(r?1:-1);while(r?i--:++i<n)if(t(e[i],i,e))return i;return-1}function U(e,t,a){if(t!==t)return B(e,q,a);var r=a-1,n=e.length;while(++r<n)if(e[r]===t)return r;return-1}function q(e){return e!==e}function G(e,t){var a=e.length,r=0;while(a--)e[a]===t&&r++;return r}function W(e,t){return null==e?void 0:e[t]}function H(e){var t=false;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function V(e,t){var a=-1,n=e.length,i=0,s=[];while(++a<n){var o=e[a];if(o===t||o===r){e[a]=r;s[i++]=a}}return s}var K=Function.prototype,z=Object.prototype;var Y=D["__core-js_shared__"];var Q=function(){var e=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var J=K.toString;var Z=z.hasOwnProperty;var X=z.toString;var $=RegExp("^"+J.call(Z).replace(k,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ee=Object.create;var te=Math.max,ae=Math.min;var re=function(){var e=be(Object,"defineProperty"),t=be.name;return t&&t.length>2?e:void 0}();function ne(e){return Ie(e)?ee(e):{}}function ie(e){if(!Ie(e)||Oe(e))return false;var t=Se(e)||H(e)?$:T;return t.test(Ce(e))}function se(e,t,a,r){var n=-1,i=e.length,s=a.length,o=-1,l=t.length,c=te(i-s,0),u=Array(l+c),d=!r;while(++o<l)u[o]=t[o];while(++n<s)(d||n<i)&&(u[a[n]]=e[n]);while(c--)u[o++]=e[n++];return u}function oe(e,t,a,r){var n=-1,i=e.length,s=-1,o=a.length,l=-1,c=t.length,u=te(i-o,0),d=Array(u+c),p=!r;while(++n<u)d[n]=e[n];var h=n;while(++l<c)d[h+l]=t[l];while(++s<o)(p||n<i)&&(d[h+a[s]]=e[n++]);return d}function le(e,t){var a=-1,r=e.length;t||(t=Array(r));while(++a<r)t[a]=e[a];return t}function ce(e,t,a){var r=t&n,i=ue(e);function s(){var t=this&&this!==D&&this instanceof s?i:e;return t.apply(r?a:this,arguments)}return s}function ue(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var a=ne(e.prototype),r=e.apply(a,t);return Ie(r)?r:a}}function de(e,t,a){var r=ue(e);function n(){var i=arguments.length,s=Array(i),o=i,l=fe(n);while(o--)s[o]=arguments[o];var c=i<3&&s[0]!==l&&s[i-1]!==l?[]:V(s,l);i-=c.length;if(i<a)return ve(e,t,pe,n.placeholder,void 0,s,c,void 0,void 0,a-i);var u=this&&this!==D&&this instanceof n?r:e;return x(u,this,s)}return n}function pe(e,t,a,r,s,c,u,p,v,m){var f=t&d,b=t&n,g=t&i,_=t&(o|l),y=t&h,O=g?void 0:ue(e);function k(){var n=arguments.length,i=Array(n),o=n;while(o--)i[o]=arguments[o];if(_)var l=fe(k),d=G(i,l);r&&(i=se(i,r,s,_));c&&(i=oe(i,c,u,_));n-=d;if(_&&n<m){var h=V(i,l);return ve(e,t,pe,k.placeholder,a,i,h,p,v,m-n)}var E=b?a:this,C=g?E[e]:e;n=i.length;p?i=ke(i,p):y&&n>1&&i.reverse();f&&v<n&&(i.length=v);this&&this!==D&&this instanceof k&&(C=O||ue(C));return C.apply(E,i)}return k}function he(e,t,a,r){var i=t&n,s=ue(e);function o(){var t=-1,n=arguments.length,l=-1,c=r.length,u=Array(c+n),d=this&&this!==D&&this instanceof o?s:e;while(++l<c)u[l]=r[l];while(n--)u[l++]=arguments[++t];return x(d,i?a:this,u)}return o}function ve(e,t,a,r,l,d,p,h,v,m){var f=t&o,b=f?p:void 0,g=f?void 0:p,_=f?d:void 0,y=f?void 0:d;t|=f?c:u;t&=~(f?u:c);t&s||(t&=~(n|i));var O=a(e,t,l,_,b,y,g,h,v,m);O.placeholder=r;return Ee(O,e,t)}function me(e,t,r,s,d,p,h,v){var m=t&i;if(!m&&"function"!=typeof e)throw new TypeError(a);var f=s?s.length:0;if(!f){t&=~(c|u);s=d=void 0}h=void 0===h?h:te(Pe(h),0);v=void 0===v?v:Pe(v);f-=d?d.length:0;if(t&u){var b=s,g=d;s=d=void 0}var _=[e,t,r,s,d,b,g,p,h,v];e=_[0];t=_[1];r=_[2];s=_[3];d=_[4];v=_[9]=null==_[9]?m?0:e.length:te(_[9]-f,0);!v&&t&(o|l)&&(t&=~(o|l));if(t&&t!=n)y=t==o||t==l?de(e,t,v):t!=c&&t!=(n|c)||d.length?pe.apply(void 0,_):he(e,t,r,s);else var y=ce(e,t,r);return Ee(y,e,t)}function fe(e){var t=e;return t.placeholder}function be(e,t){var a=W(e,t);return ie(a)?a:void 0}function ge(e){var t=e.match(j);return t?t[1].split(w):[]}function _e(e,t){var a=t.length,r=a-1;t[r]=(a>1?"& ":"")+t[r];t=t.join(a>2?", ":" ");return e.replace(C,"{\n/* [wrapped with "+t+"] */\n")}function ye(e,t){t=null==t?m:t;return!!t&&("number"==typeof e||N.test(e))&&e>-1&&e%1==0&&e<t}function Oe(e){return!!Q&&Q in e}function ke(e,t){var a=e.length,r=ae(t.length,a),n=le(e);while(r--){var i=t[r];e[r]=ye(i,a)?n[i]:void 0}return e}var Ee=re?function(e,t,a){var r=t+"";return re(e,"toString",{configurable:true,enumerable:false,value:Me(_e(r,je(ge(r),a)))})}:De;function Ce(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function je(e,t){F(g,function(a){var r="_."+a[0];t&a[1]&&!L(e,r)&&e.push(r)});return e.sort()}function we(e,t,a){t=a?void 0:t;var r=me(e,o,void 0,void 0,void 0,void 0,void 0,t);r.placeholder=we.placeholder;return r}function Se(e){var t=Ie(e)?X.call(e):"";return t==_||t==y}function Ie(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Te(e){return!!e&&"object"==typeof e}function Ae(e){return"symbol"==typeof e||Te(e)&&X.call(e)==O}function Ne(e){if(!e)return 0===e?e:0;e=Re(e);if(e===v||e===-v){var t=e<0?-1:1;return t*f}return e===e?e:0}function Pe(e){var t=Ne(e),a=t%1;return t===t?a?t-a:t:0}function Re(e){if("number"==typeof e)return e;if(Ae(e))return b;if(Ie(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ie(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(E,"");var a=I.test(e);return a||A.test(e)?P(e.slice(2),a?2:8):S.test(e)?b:+e}function Me(e){return function(){return e}}function De(e){return e}we.placeholder={};e.exports=we}).call(this,a(70))},function(e,t,a){var r=a(1409);function n(e){var t=Math.round(r(e,0,255));var a=t.toString(16);return 1==a.length?"0"+a:a}function i(e){var t=4===e.length?n(255*e[3]):"";return"#"+n(e[0])+n(e[1])+n(e[2])+t}e.exports=i},function(e,t,a){var r=a(2287);var n=a(2288);var i=a(2289);var s=a(2290);function o(e){var t=r(e);var a=s(t);4===t.length&&a.push(t[3]);return a}var l={"#":n,hsl:o,rgb:i};function c(e){for(var t in l)if(0===e.indexOf(t))return l[t](e)}c.rgb=i;c.hsl=r;c.hex=n;e.exports=c},function(e,t,a){var r=a(1662);var n=a(1409);function i(e,t){e=parseFloat(e);switch(t){case 0:return n(e,0,360);case 1:case 2:return n(e,0,100);case 3:return n(e,0,1)}}function s(e){return r(e).map(i)}e.exports=s},function(e,t){function a(e){var t="#";for(var a=1;a<e.length;a++){var r=e.charAt(a);t+=r+r}return t}function r(e){4!==e.length&&5!==e.length||(e=a(e));var t=[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)];if(9===e.length){var r=parseFloat((parseInt(e.substring(7,9),16)/255).toFixed(2));t.push(r)}return t}e.exports=r},function(e,t,a){var r=a(1662);var n=a(1409);function i(e,t){return t<3?-1!=e.indexOf("%")?Math.round(255*n(parseInt(e,10),0,100)/100):n(parseInt(e,10),0,255):n(parseFloat(e),0,1)}function s(e){return r(e).map(i)}e.exports=s},function(e,t){function a(e){var t=e[0]/360,a=e[1]/100,r=e[2]/100,n,i,s,o,l;if(0==a){l=255*r;return[l,l,l]}i=r<.5?r*(1+a):r+a-r*a;n=2*r-i;o=[0,0,0];for(var c=0;c<3;c++){s=t+1/3*-(c-1);s<0&&s++;s>1&&s--;l=6*s<1?n+6*(i-n)*s:2*s<1?i:3*s<2?n+(i-n)*(2/3-s)*6:n;o[c]=255*l}return o}e.exports=a},function(e,t,a){(function(t){var a="Expected a function";var r=9007199254740991;var n="[object Arguments]",i="[object Function]",s="[object GeneratorFunction]";var o="object"==typeof t&&t&&t.Object===Object&&t;var l="object"==typeof self&&self&&self.Object===Object&&self;var c=o||l||Function("return this")();function u(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function d(e,t){var a=-1,r=t.length,n=e.length;while(++a<r)e[n+a]=t[a];return e}var p=Object.prototype;var h=p.hasOwnProperty;var v=p.toString;var m=c.Symbol,f=p.propertyIsEnumerable,b=m?m.isConcatSpreadable:void 0;var g=Math.max;function _(e,t,a,r,n){var i=-1,s=e.length;a||(a=k);n||(n=[]);while(++i<s){var o=e[i];t>0&&a(o)?t>1?_(o,t-1,a,r,n):d(n,o):r||(n[n.length]=o)}return n}function y(e,t){t=g(void 0===t?e.length-1:t,0);return function(){var a=arguments,r=-1,n=g(a.length-t,0),i=Array(n);while(++r<n)i[r]=a[t+r];r=-1;var s=Array(t+1);while(++r<t)s[r]=a[r];s[t]=i;return u(e,this,s)}}function O(e){return y(function(t){t=_(t,1);var r=t.length,n=r;e&&t.reverse();while(n--)if("function"!=typeof t[n])throw new TypeError(a);return function(){var e=0,a=r?t[e].apply(this,arguments):arguments[0];while(++e<r)a=t[e].call(this,a);return a}})}function k(e){return C(e)||E(e)||!!(b&&e&&e[b])}function E(e){return w(e)&&h.call(e,"callee")&&(!f.call(e,"callee")||v.call(e)==n)}var C=Array.isArray;function j(e){return null!=e&&I(e.length)&&!S(e)}function w(e){return A(e)&&j(e)}function S(e){var t=T(e)?v.call(e):"";return t==i||t==s}function I(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function T(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function A(e){return!!e&&"object"==typeof e}var N=O();e.exports=N}).call(this,a(70))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.yuv2rgb=r;t.rgb2yuv=n;function r(e){var t=e[0],a=e[1],r=e[2],n,i,s;n=1*t+0*a+1.13983*r;i=1*t+-.39465*a+-.5806*r;s=1*t+2.02311*a+0*r;n=Math.min(Math.max(0,n),1);i=Math.min(Math.max(0,i),1);s=Math.min(Math.max(0,s),1);return[255*n,255*i,255*s]}function n(e){var t=e[0]/255,a=e[1]/255,r=e[2]/255;var n=.299*t+.587*a+.114*r;var i=-.14713*t+-.28886*a+.436*r;var s=.615*t+-.51499*a+-.10001*r;return[n,i,s]}},function(e,t,a){"use strict";t.__esModule=true;t["default"]={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"}},function(e,t,a){"use strict";t.__esModule=true;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};var n=a(1);var i=l(n);var s=a(1657);var o=l(s);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var a={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;a[r]=e[r]}return a}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h={actionBar:{paddingTop:8,paddingBottom:7,paddingLeft:16},payload:{margin:0,paddingLeft:16,overflow:"auto"}};var v=function(e){p(t,e);function t(a){u(this,t);var r=d(this,e.call(this,a));r.shouldExpandNode=r.shouldExpandNode.bind(r);return r}t.prototype.renderPayload=function e(t){return i.default.createElement("div",{style:r({},h.payload,{backgroundColor:this.props.theme.base00})},Object.keys(t).length>0?i.default.createElement(o.default,{theme:this.props.theme,invertTheme:false,keyPath:["action"],data:t,shouldExpandNode:this.shouldExpandNode}):"")};t.prototype.shouldExpandNode=function e(t,a,r){return this.props.expandActionRoot&&0===r};t.prototype.render=function e(){var t=this.props.action;var a=t.type;var n=c(t,["type"]);return i.default.createElement("div",{style:r({backgroundColor:this.props.theme.base02,color:this.props.theme.base06},this.props.style)},i.default.createElement("div",{style:h.actionBar,onClick:this.props.onClick},null!==a&&a.toString()),this.props.collapsed?"":this.renderPayload(n))};return t}(n.Component);t.default=v},function(e,t,a){(function(t){var a="Expected a function";var r=NaN;var n="[object Symbol]";var i=/^\s+|\s+$/g;var s=/^[-+]0x[0-9a-f]+$/i;var o=/^0b[01]+$/i;var l=/^0o[0-7]+$/i;var c=parseInt;var u="object"==typeof t&&t&&t.Object===Object&&t;var d="object"==typeof self&&self&&self.Object===Object&&self;var p=u||d||Function("return this")();var h=Object.prototype;var v=h.toString;var m=Math.max,f=Math.min;var b=function(){return p.Date.now()};function g(e,t,r){var n,i,s,o,l,c,u=0,d=false,p=false,h=true;if("function"!=typeof e)throw new TypeError(a);t=k(t)||0;if(_(r)){d=!!r.leading;p="maxWait"in r;s=p?m(k(r.maxWait)||0,t):s;h="trailing"in r?!!r.trailing:h}function v(t){var a=n,r=i;n=i=void 0;u=t;o=e.apply(r,a);return o}function g(e){u=e;l=setTimeout(E,t);return d?v(e):o}function y(e){var a=e-c,r=e-u,n=t-a;return p?f(n,s-r):n}function O(e){var a=e-c,r=e-u;return void 0===c||a>=t||a<0||p&&r>=s}function E(){var e=b();if(O(e))return C(e);l=setTimeout(E,y(e))}function C(e){l=void 0;if(h&&n)return v(e);n=i=void 0;return o}function j(){void 0!==l&&clearTimeout(l);u=0;n=c=i=l=void 0}function w(){return void 0===l?o:C(b())}function S(){var e=b(),a=O(e);n=arguments;i=this;c=e;if(a){if(void 0===l)return g(c);if(p){l=setTimeout(E,t);return v(c)}}void 0===l&&(l=setTimeout(E,t));return o}S.cancel=j;S.flush=w;return S}function _(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){return!!e&&"object"==typeof e}function O(e){return"symbol"==typeof e||y(e)&&v.call(e)==n}function k(e){if("number"==typeof e)return e;if(O(e))return r;if(_(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=_(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var a=o.test(e);return a||l.test(e)?c(e.slice(2),a?2:8):s.test(e)?r:+e}e.exports=g}).call(this,a(70))},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){var r,i;(function(){var a=false;var s=this;var o=function(e){if(e instanceof o)return e;if(!(this instanceof o))return new o(e);this.EXIFwrapped=e};true;(true,e.exports)&&(t=e.exports=o);t.EXIF=o;var l=o.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"};var c=o.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};var u=o.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"};var d=o.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"};var p=o.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function h(e,t,a){e.addEventListener?e.addEventListener(t,a,false):e.attachEvent&&e.attachEvent("on"+t,a)}function v(e){return!!e.exifdata}function m(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"";e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");var a=atob(e);var r=a.length;var n=new ArrayBuffer(r);var i=new Uint8Array(n);for(var s=0;s<r;s++)i[s]=a.charCodeAt(s);return n}function f(e,t){var a=new XMLHttpRequest;a.open("GET",e,true);a.responseType="blob";a.onload=function(e){200!=this.status&&0!==this.status||t(this.response)};a.send()}function b(e,t){function r(a){var r=g(a);e.exifdata=r||{};var n=_(a);e.iptcdata=n||{};if(o.isXmpEnabled){var i=I(a);e.xmpdata=i||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var n=m(e.src);r(n)}else if(/^blob\:/i.test(e.src)){var i=new FileReader;i.onload=function(e){r(e.target.result)};f(e.src,function(e){i.readAsArrayBuffer(e)})}else{var s=new XMLHttpRequest;s.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";r(s.response);s=null};s.open("GET",e.src,true);s.responseType="arraybuffer";s.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var i=new FileReader;i.onload=function(e){a&&console.log("Got file of length "+e.target.result.byteLength);r(e.target.result)};i.readAsArrayBuffer(e)}}function g(e){var t=new DataView(e);a&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){a&&console.log("Not a valid JPEG");return false}var r=2,n=e.byteLength,i;while(r<n){if(255!=t.getUint8(r)){a&&console.log("Not a valid marker at offset "+r+", found: "+t.getUint8(r));return false}i=t.getUint8(r+1);a&&console.log(i);if(225==i){a&&console.log("Found 0xFFE1 marker");return S(t,r+4,t.getUint16(r+2)-2)}r+=2+t.getUint16(r+2)}}function _(e){var t=new DataView(e);a&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){a&&console.log("Not a valid JPEG");return false}var r=2,n=e.byteLength;var i=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};while(r<n){if(i(t,r)){var s=t.getUint8(r+7);s%2!==0&&(s+=1);0===s&&(s=4);var o=r+8+s;var l=t.getUint16(r+6+s);return O(e,o,l)}r++}}var y={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function O(e,t,a){var r=new DataView(e);var n={};var i,s,o,l,c;var u=t;while(u<t+a){if(28===r.getUint8(u)&&2===r.getUint8(u+1)){l=r.getUint8(u+2);if(l in y){o=r.getInt16(u+3);c=o+5;s=y[l];i=w(r,u+5,o);n.hasOwnProperty(s)?n[s]instanceof Array?n[s].push(i):n[s]=[n[s],i]:n[s]=i}}u++}return n}function k(e,t,r,n,i){var s=e.getUint16(r,!i),o={},l,c,u;for(u=0;u<s;u++){l=r+12*u+2;c=n[e.getUint16(l,!i)];!c&&a&&console.log("Unknown tag: "+e.getUint16(l,!i));o[c]=E(e,l,t,r,i)}return o}function E(e,t,a,r,n){var i=e.getUint16(t+2,!n),s=e.getUint32(t+4,!n),o=e.getUint32(t+8,!n)+a,l,c,u,d,p,h;switch(i){case 1:case 7:if(1==s)return e.getUint8(t+8,!n);l=s>4?o:t+8;c=[];for(d=0;d<s;d++)c[d]=e.getUint8(l+d);return c;case 2:l=s>4?o:t+8;return w(e,l,s-1);case 3:if(1==s)return e.getUint16(t+8,!n);l=s>2?o:t+8;c=[];for(d=0;d<s;d++)c[d]=e.getUint16(l+2*d,!n);return c;case 4:if(1==s)return e.getUint32(t+8,!n);c=[];for(d=0;d<s;d++)c[d]=e.getUint32(o+4*d,!n);return c;case 5:if(1==s){p=e.getUint32(o,!n);h=e.getUint32(o+4,!n);u=new Number(p/h);u.numerator=p;u.denominator=h;return u}c=[];for(d=0;d<s;d++){p=e.getUint32(o+8*d,!n);h=e.getUint32(o+4+8*d,!n);c[d]=new Number(p/h);c[d].numerator=p;c[d].denominator=h}return c;case 9:if(1==s)return e.getInt32(t+8,!n);c=[];for(d=0;d<s;d++)c[d]=e.getInt32(o+4*d,!n);return c;case 10:if(1==s)return e.getInt32(o,!n)/e.getInt32(o+4,!n);c=[];for(d=0;d<s;d++)c[d]=e.getInt32(o+8*d,!n)/e.getInt32(o+4+8*d,!n);return c}}function C(e,t,a){var r=e.getUint16(t,!a);return e.getUint32(t+2+12*r,!a)}function j(e,t,a,r){var n=C(e,t+a,r);if(!n)return{};if(n>e.byteLength)return{};var i=k(e,t,t+n,d,r);if(i["Compression"])switch(i["Compression"]){case 6:if(i.JpegIFOffset&&i.JpegIFByteCount){var s=t+i.JpegIFOffset;var o=i.JpegIFByteCount;i["blob"]=new Blob([new Uint8Array(e.buffer,s,o)],{type:"image/jpeg"})}break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",i["Compression"])}else 2==i["PhotometricInterpretation"]&&console.log("Thumbnail image format is RGB, which is not implemented.");return i}function w(e,t,a){var r="";for(n=t;n<t+a;n++)r+=String.fromCharCode(e.getUint8(n));return r}function S(e,t){if("Exif"!=w(e,t,4)){a&&console.log("Not valid EXIF data! "+w(e,t,4));return false}var r,n,i,s,o,d=t+6;if(18761==e.getUint16(d))r=false;else{if(19789!=e.getUint16(d)){a&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)");return false}r=true}if(42!=e.getUint16(d+2,!r)){a&&console.log("Not valid TIFF data! (no 0x002A)");return false}var h=e.getUint32(d+4,!r);if(h<8){a&&console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(d+4,!r));return false}n=k(e,d,d+h,c,r);if(n.ExifIFDPointer){s=k(e,d,d+n.ExifIFDPointer,l,r);for(i in s){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":s[i]=p[i][s[i]];break;case"ExifVersion":case"FlashpixVersion":s[i]=String.fromCharCode(s[i][0],s[i][1],s[i][2],s[i][3]);break;case"ComponentsConfiguration":s[i]=p.Components[s[i][0]]+p.Components[s[i][1]]+p.Components[s[i][2]]+p.Components[s[i][3]];break}n[i]=s[i]}}if(n.GPSInfoIFDPointer){o=k(e,d,d+n.GPSInfoIFDPointer,u,r);for(i in o){switch(i){case"GPSVersionID":o[i]=o[i][0]+"."+o[i][1]+"."+o[i][2]+"."+o[i][3];break}n[i]=o[i]}}n["thumbnail"]=j(e,d,h,r);return n}function I(e){if(!("DOMParser"in self))return;var t=new DataView(e);a&&console.log("Got file of length "+e.byteLength);if(255!=t.getUint8(0)||216!=t.getUint8(1)){a&&console.log("Not a valid JPEG");return false}var r=2,n=e.byteLength,i=new DOMParser;while(r<n-4){if("http"==w(t,r,4)){var s=r-1;var o=t.getUint16(r-2)-1;var l=w(t,s,o);var c=l.indexOf("xmpmeta>")+8;l=l.substring(l.indexOf("<x:xmpmeta"),c);var u=l.indexOf("x:xmpmeta")+10;l=l.slice(0,u)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+l.slice(u);var d=i.parseFromString(l,"text/xml");return A(d)}r++}}function T(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var a=0;a<e.attributes.length;a++){var r=e.attributes.item(a);t["@attributes"][r.nodeName]=r.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes.item(n);var s=i.nodeName;if(null==t[s])t[s]=T(i);else{if(null==t[s].push){var o=t[s];t[s]=[];t[s].push(o)}t[s].push(T(i))}}return t}function A(e){try{var t={};if(e.children.length>0)for(var a=0;a<e.children.length;a++){var r=e.children.item(a);var n=r.attributes;for(var i in n){var s=n[i];var o=s.nodeName;var l=s.nodeValue;void 0!==o&&(t[o]=l)}var c=r.nodeName;if("undefined"==typeof t[c])t[c]=T(r);else{if("undefined"==typeof t[c].push){var u=t[c];t[c]=[];t[c].push(u)}t[c].push(T(r))}}else t=e.textContent;return t}catch(e){console.log(e.message)}}o.enableXmp=function(){o.isXmpEnabled=true};o.disableXmp=function(){o.isXmpEnabled=false};o.getData=function(e,t){if((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)return false;v(e)?t&&t.call(e):b(e,t);return true};o.getTag=function(e,t){if(!v(e))return;return e.exifdata[t]};o.getIptcTag=function(e,t){if(!v(e))return;return e.iptcdata[t]};o.getAllTags=function(e){if(!v(e))return{};var t,a=e.exifdata,r={};for(t in a)a.hasOwnProperty(t)&&(r[t]=a[t]);return r};o.getAllIptcTags=function(e){if(!v(e))return{};var t,a=e.iptcdata,r={};for(t in a)a.hasOwnProperty(t)&&(r[t]=a[t]);return r};o.pretty=function(e){if(!v(e))return"";var t,a=e.exifdata,r="";for(t in a)a.hasOwnProperty(t)&&("object"==typeof a[t]?a[t]instanceof Number?r+=t+" : "+a[t]+" ["+a[t].numerator+"/"+a[t].denominator+"]\r\n":r+=t+" : ["+a[t].length+" values]\r\n":r+=t+" : "+a[t]+"\r\n");return r};o.readFromBinaryFile=function(e){return g(e)};true;!(r=[],i=function(){return o}.apply(t,r),void 0!==i&&(e.exports=i))}).call(this)},function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var r={"./actions.js":4271,"./activity-session.js":3996,"./add-app-to-channel.js":3019,"./add-ephemeral-feedback.js":3020,"./all-unreads.js":4183,"./api-unauthed.js":3021,"./api.js":3978,"./app-actions.js":3022,"./apps.js":3023,"./automount.js":3024,"./bots.js":3025,"./calls.js":3026,"./channels.js":3027,"./connectivity.js":3028,"./console.js":3029,"./constants.js":3030,"./emoji.js":3031,"./emojiComponent.js":3032,"./enterprise.js":3033,"./enterprise/enterprise-analytics-util.js":3971,"./enterprise/mount-create-workspace-modal.jsx":3966,"./enterprise/mount-dashboard-analytics-apps.jsx":3036,"./enterprise/mount-dashboard-app-management.jsx":3923,"./enterprise/mount-dashboard-billing-overview.jsx":3970,"./enterprise/mount-dashboard-ekm-status.jsx":3965,"./enterprise/mount-dashboard-nav.jsx":3938,"./enterprise/mount-dashboard-shared-channels.jsx":4268,"./enterprise/mount-dashboard-team-apps.jsx":3951,"./enterprise/mount-migration-table.jsx":3932,"./enterprise/mount-move-channels-custom-message.jsx":3994,"./enterprise/mount-org-wide-settings-pane.jsx":3954,"./enterprise/mount-terms-of-service.jsx":4022,"./enterprise/mount-workspace-directory.jsx":3939,"./eventlog.js":3105,"./experiments-unauthed.js":4024,"./experiments.js":3106,"./flannel.js":3107,"./fuzzy-matcher.js":3108,"./greetings-earth.js":4025,"./infra/beacon-api-call.js":4028,"./infra/boot/index.js":3987,"./infra/connectivity.js":3109,"./infra/debug.js":3110,"./infra/edge-upload-proxy-check.js":4031,"./infra/failover-proxy-check.js":4032,"./infra/register-global-error-handler.js":4034,"./infra/rtm.js":3111,"./infra/run-cdn-download-test.js":3995,"./infra/socket-manager.js":3112,"./infra/telemeter.js":3988,"./infra/token-to-team-id.js":3113,"./infra/upload-queue.js":3114,"./lazy-filter-select.jsx":3115,"./member-counts.js":3116,"./members.js":3997,"./membership.js":3117,"./message-input-registry.js":3118,"./message-pane-input.js":3119,"./message-pane.js":3980,"./messages.js":3120,"./metrics-responsiveness.js":3121,"./mount-admin-invites-table.js":3977,"./mount-app-profile-flexpane.js":3943,"./mount-app-space.js":3949,"./mount-apps-browser.js":4306,"./mount-browser-incoming-call.js":3974,"./mount-channel-options-dialog.js":3927,"./mount-channel-sidebar.js":4270,"./mount-connected-workspaces.js":3160,"./mount-custom-status-input.js":4007,"./mount-dnd-preferences.js":3985,"./mount-document-title.js":3961,"./mount-downloads-view.js":3958,"./mount-emoji-picker.js":4008,"./mount-favicon.js":3960,"./mount-file-upload-banner.js":3999,"./mount-files-flexpane.js":3936,"./mount-global-nav.js":761,"./mount-help-modal.js":4021,"./mount-image-viewer.js":4019,"./mount-invite-modal.js":4016,"./mount-keyboard-shortcuts.js":3947,"./mount-lazy-filter-select.js":4013,"./mount-member-directory-flexpane.js":4175,"./mount-menu.js":4026,"./mount-message-actions-menu.js":4006,"./mount-message-pane-banner.js":4009,"./mount-message-pane-drag-overlay.js":4003,"./mount-message-pane-input.js":3964,"./mount-message-pane.js":4193,"./mount-migration-blocker.js":3982,"./mount-modal-container.js":4002,"./mount-new-file-menu.js":4215,"./mount-notification-bar.js":4005,"./mount-oauth-confirm.jsx":3992,"./mount-org-retention-request.js":3940,"./mount-pages.js":4199,"./mount-pricing-calculator.js":4004,"./mount-profile-flexpane.js":3984,"./mount-redox.js":3968,"./mount-rolling-research-oauth.js":3975,"./mount-scrollbar.js":4012,"./mount-service-import-mapping-form.js":3956,"./mount-starred-items-flexpane.js":3950,"./mount-team-creator-onboarding-dialog.js":3266,"./mount-thread-drag-overlay.js":4018,"./mount-threads-flexpane.js":3935,"./mount-threads-view.js":4197,"./mount-toast.js":3300,"./mount-tooltip-tip.js":4023,"./mount-user-calendar-flexpane.jsx":3976,"./mount-user-groups-flexpane.js":4030,"./mount-user-groups-list.js":3998,"./mpims.js":3311,"./onboarding.js":3312,"./open-app-management-modal.js":3313,"./open-apps-browser-modal.js":4305,"./open-invite-member-to-channel-dialog.js":4201,"./pages.js":3314,"./prefs.js":4e3,"./presence-manager.js":3315,"./pricing_plans_modal.js":4001,"./reactions.js":3316,"./redux.js":4311,"./remove-app-from-channel.js":3321,"./rules.js":3322,"./rules/files.js":3323,"./rules/notifications.js":3324,"./search.js":4010,"./searcher.js":4011,"./self-team-ids.js":3325,"./send-message.js":3326,"./set-app-element-for-react-modal.js":3327,"./slash-command.js":3328,"./sonic-calls-supported-clients.js":3329,"./stars.js":3330,"./teams.js":3331,"./texty.js":3332,"./topics.js":3333,"./typing.js":3334,"./user-groups.js":3335,"./utility/a11y.js":3990,"./utility/broadcast-keywords.js":3336,"./utility/client-action-token.js":3337,"./utility/clipboard.js":3338,"./utility/clog-types.js":3339,"./utility/clog.js":3340,"./utility/currency.js":3341,"./utility/date-time.js":3342,"./utility/desktop.js":3991,"./utility/environment.js":3343,"./utility/format.js":4015,"./utility/i18n.js":3344,"./utility/search/autocomplete-suggestions.js":3345,"./utility/search/autocomplete.js":3346,"./utility/search/conversions.js":3347,"./utility/threads.js":3348,"./utility/url.js":3349,"./utility/utility.js":3955,"./utility/versions.js":3350,"./workspace.js":3351};function n(e){var t=i(e);return a(t)}function i(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");a.code="MODULE_NOT_FOUND";throw a}return t}n.keys=function e(){return Object.keys(r)};n.resolve=i;e.exports=n;n.id=2822},,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var r=a(1364);var n=a(44);Object(n["a"])("interop.addAppToChannel",function(e){return TS.redux.dispatch(Object(r["a"])(e))})},function(e,t,a){"use strict";a.r(t);var r=a(408);var n=a(44);Object(n["a"])("interop.addEphemeralFeedback",function(e){return TS.redux.dispatch(Object(r["b"])(e))})},function(e,t,a){"use strict";a.r(t);var r=a(1507);var n=a(44);Object(n["a"])("interop.api_unauthed",{callSlackApiUnauthed:r["a"]})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(757);Object(r["a"])("interop.appActions",{selectGlobalActions:function e(){return Object(n["b"])(TS.redux.getState())},selectGlobalActionsCache:function e(){return Object(n["c"])(TS.redux.getState())}})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(182);var i=a(1839);var s=a(363);var o=a(1173);var l=a(898);var c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.getBoundingClientRect?t.getBoundingClientRect():{}};Object(r["a"])("interop.apps",{getAppById:function e(t){return Object(n["getAppById"])(TS.redux.getState(),t)},ingestApps:function e(t){return TS.redux.dispatch(Object(n["bulkAddApps"])(t))},clearApps:function e(){return TS.redux.dispatch(Object(n["clearApps"])())},isAppSpaceEnabled:function e(){return Object(n["isAppSpaceEnabled"])(TS.redux.getState())},isGlobalActionsEnabled:function e(){return Object(n["isGlobalActionsEnabled"])(TS.redux.getState())},openAppProfileCard:function e(t,a,r,n,i){return TS.redux.dispatch(Object(o["a"])({serviceId:t,homeWorkspaceId:a,memberId:r,coordinates:c(n),popoverProps:i}))},promiseToGetLegacyAppProfileByServiceId:function e(t){return TS.redux.dispatch(Object(s["promiseToGetLegacyAppProfileByServiceId"])({serviceId:t}))},loadAppActions:function e(){return TS.redux.dispatch(Object(i["a"])())},runAppAction:function e(t){return TS.redux.dispatch(Object(l["b"])(t))}})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(350);Object(r["a"])("interop.automount.mountAllWithStore",n["b"])},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(432);var s=a(44);var o=a(199);Object(s["a"])("interop.bots",n()({},i,{getBotState:function e(){return Object(o["getBotState"])(TS.redux.getState())},getBotById:function e(t){return Object(o["getBotById"])(TS.redux.getState(),t)},getBotNameById:function e(t){return Object(o["getBotNameById"])(TS.redux.getState(),t)},getBotInfoByMsg:function e(t){return Object(o["getBotInfoByMsg"])(TS.redux.getState(),t)},getBotConfigureUrl:function e(t){return Object(o["getBotConfigureUrl"])(TS.redux.getState(),t)},isBotExternal:function e(t){return Object(o["isBotExternal"])(TS.redux.getState(),t)},ensureBotsArePresent:function e(t){return Object(o["ensureBotsArePresent"])(TS.redux.getState(),TS.redux.dispatch,t)}}))},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(379);var i=a(480);Object(r["a"])("interop.calls",{startOrJoinCall:n["d"],handleCallInvite:i["c"],handleCallInviteResponse:i["e"],handleCallInviteCancel:i["d"]})},function(e,t,a){"use strict";a.r(t);var r=a(120);var n=a(98);var i=a(19);var s=a(194);var o=a(397);var l=a(23);var c=a(1473);var u=a(895);var d=a(113);var p=a(11);var h=a(44);var v=a(686);function m(e,t){var a=TS.redux.getState();var r=Object(i["d"])(a,e,t);return TS.redux.channels.interop.maybeWrapEntity(r)}function f(e,t){if(!e)return null;var a=m(e,t);if(a&&a.is_channel)return a;return null}function b(e,t){if(!e)return null;var a=m(e,t);if(a&&a.is_group&&!a.is_mpim)return a;return null}function g(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var a=TS.redux.channels.getEntityById(e,t);if(a&&a.is_group&&a.is_mpim)return a;return null}function _(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var a=TS.redux.channels.getEntityById(e,t);if(Object(p["isIm"])(a))return a;return null}function y(){return TS.redux.dispatch(Object(n["m"])())}function O(e,t){return TS.redux.dispatch(Object(s["a"])({channel:e,isBulkUpsert:t}))}function k(e){return TS.redux.dispatch(Object(d["d"])(e))}function E(e){return TS.redux.dispatch(Object(d["g"])(e))}function C(e){return TS.redux.dispatch(Object(d["f"])(e))}function j(e){return TS.redux.dispatch(Object(d["e"])(e))}function w(e){var t=TS.redux.getState();return Object(i["t"])(t,e)}function S(e,t){return TS.redux.dispatch(Object(d["C"])({channelId:e,topic:t}))}function I(e){var t=TS.redux.getState();var a=Object(l["c"])(t);Object(o["c"])(a,e)}function T(e){var t=TS.redux.getState();var a=Object(l["c"])(t);return Object(o["b"])(a,e)}function A(){return Object(o["f"])()}function N(e,t){return TS.redux.dispatch(Object(c["a"])({channel:e,user:t}))}function P(){return TS.redux.dispatch(n["r"].apply(void 0,arguments))}function R(){return TS.redux.dispatch(n["w"].apply(void 0,arguments))}function M(e){return Object(i["o"])(TS.redux.getState(),e)}function D(){return Object(i["p"])(TS.redux.getState())}function x(){return Object(i["b"])(TS.redux.getState())}function F(){return TS.redux.dispatch(n["a"].apply(void 0,arguments))}function L(){return TS.redux.dispatch(n["v"].apply(void 0,arguments))}function B(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return i["n"].apply(void 0,[TS.redux.getState()].concat(t))}function U(){return TS.redux.dispatch(r["d"].apply(void 0,arguments))}function q(){return TS.redux.dispatch(n["d"].apply(void 0,arguments))}function G(){return TS.redux.dispatch(n["B"].apply(void 0,arguments))}function W(){return Object(i["r"])(TS.redux.getState())}function H(){return TS.redux.dispatch(Object(n["f"])())}function V(){return TS.redux.dispatch(n["e"].apply(void 0,arguments))}function K(){return Object(i["m"])(TS.redux.getState())}function z(){return Object(i["k"])(TS.redux.getState())}function Y(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return i["e"].apply(void 0,[TS.redux.getState()].concat(t))}function Q(){return TS.redux.dispatch(n["p"].apply(void 0,arguments))}function J(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return i["j"].apply(void 0,[TS.redux.getState()].concat(t))}Object(h["a"])("interop.channels",{disconnectChannel:d["c"],getPublicChannelById:f,getEntityById:m,getGeneralChannel:y,getGroupById:b,getImById:_,getMpimById:g,getNeedsCreatedMessageState:function e(t){return Object(u["getNeedsCreatedMessageState"])(TS.redux.getState(),t)},isImWithDeletedMember:function e(t){return Object(p["isImWithDeletedMember"])(TS.redux.getState(),t)},openConversationBetweenMembers:Object(h["b"])(d["s"]),submitChannelPurpose:d["B"],submitChannelTopic:S,createChannel:n["j"],submitDeclineSharedChannelInvite:function e(t){return TS.redux.dispatch(Object(d["F"])(t))},submitLeave:d["K"],isMemberOfChannel:p["isMemberOfChannel"],joinConversationApi:n["o"],startImByMemberId:n["y"],closeChannelApi:n["g"],updateOrgAccessForChannelApi:n["D"],updateOrgAccessForChannel:n["C"],upsertChannel:O,getChannelPinnedItemByMessage:p["getChannelPinnedItemByMessage"],channelTopicExceedsLimit:p["channelTopicExceedsLimit"],getChannelTopicError:p["getChannelTopicError"],getChannelPurposeError:p["getChannelPurposeError"],updateChannelLastTrigger:v["updateChannelLastTrigger"],getPendingAndConnectedTeamIds:p["getPendingAndConnectedTeamIds"],getInternalTeamIds:p["getInternalTeamIds"],fetchAndUpsertChannelsById:k,fetchAndUpsertChannelsWithQuery:E,fetchAndUpsertChannelsFromAPI:j,fetchAndUpsertChannelsFromFlannel:C,hasChannelWithId:w,markObjectsAsFresh:I,pauseRefetch:A,isObjectFresh:T,shouldStopChannelMentions:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return p["shouldStopChannelMentions"].apply(void 0,[TS.redux.getState()].concat(a))},setConversationOpen:N,getUnarchivedPublicAndPrivateChannelsUserIsIn:function e(){return Object(i["s"])(TS.redux.getState())},markMostRecentMsgRead:P,setChannelTopic:R,getPublicChannels:M,getPublicChannelsUserIsIn:D,getAllChannels:x,addChannel:F,getChannelById:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return i["d"].apply(void 0,[TS.redux.getState()].concat(a))},setChannelPurpose:L,getPrivateChannels:B,removeChannels:U,bulkAddChannels:q,updateOneKeyForChannel:G,getUnarchivedPublicAndPrivateChannels:W,clearAllShowInListEvenThoughUnreadsFlags:H,bulkUpdateChannels:V,getMpims:K,getIms:z,getChannelByName:Y,leaveChannel:Q,getImIdByMemberId:J})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(320);var i=a(195);function s(){return Object(i["d"])(TS.redux.getState())}function o(){return Object(i["b"])(TS.redux.getState())}Object(r["a"])("interop.connectivity",{isOnline:s,getMaximumSocketWait:o,waitForNetworkConnection:n["e"],setClientOnline:function e(){return TS.redux.dispatch(n["a"].apply(void 0,arguments))}})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(86);Object(r["a"])("interop.console",n)},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(44);var s=a(39);Object(i["a"])("interop.constants",n()({},s))},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(210);Object(r["a"])("interop.emoji",{isValidEmojiText:function e(t){return Object(n["isValidEmojiText"])(TS.redux.getState(),{teamId:TS.model.team.id,text:t})},isEmojiNameSkinToneModifiable:function e(t){return Object(n["isEmojiNameSkinToneModifiable"])(TS.redux.getState(),{teamId:TS.model.team.id,text:t})},getCanonicalEmojiName:function e(t){return Object(n["getCanonicalEmojiName"])(TS.redux.getState(),{teamId:TS.model.team.id,text:t})},getEmojiUrl:function e(t){var a=t.text,r=t.emojiSize,i=t.emojiMode;return Object(n["getEmojiUrl"])(TS.redux.getState(),{teamId:TS.model.team.id,text:a,emojiMode:i,emojiSize:r})},getEmojiFrecencyIdFromName:n["getEmojiFrecencyIdFromName"],test:n["test"]})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(81);Object(r["a"])("interop.emojiComponent",{EmojiSizes:n["a"],mapStateToProps:function e(t){return Object(n["c"])(TS.redux.getState(),t)}})},function(e,t,a){"use strict";a.r(t);var r=a(233);var n=a(35);var i=a(301);var s=a(1103);var o=a(784);var l=a(331);var c=a(1210);var u=a(44);Object(u["a"])("interop.enterprise",{getEnterprise:n["g"],getEnterpriseId:r["a"],getEnterpriseOrgName:i["a"],fetchAndUpsertEnterpriseOrgInfo:s["a"],setEnterprise:s["b"],setEnterpriseId:o["a"],upsertSelfEnterprise:l["k"],updateEnterpriseName:s["c"],getOrgURL:function e(){return Object(i["b"])(TS.redux.getState())},getPotentiallyUnknownEnterprise:function e(){return Object(c["a"])(TS.redux.getState())}})},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(27);var c=a(44);Object(c["a"])("interop.enterpriseAnalyticsAppsTab",{render:function e(t,a){if(!t)throw new Error("enterpriseAnalyticsAppsTab render must be called with a teamId parameter");var r=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:r},n.a.createElement("div",null,"APPS!")),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){},,,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var r=a(862);var n=a(44);Object(n["a"])("interop.Eventlog",{createInstanceForTeam:r["a"],getInstanceForTeam:r["b"]})},function(e,t,a){"use strict";a.r(t);var r=a(122);var n=a(44);Object(n["a"])("interop.experiments",{getGroupForUser:function e(t){return Object(r["getGroupForUser"])(TS.redux.getState(),t)},getAllAssignmentsForDebugging:function e(){return Object(r["getAllAssignmentsForDebugging"])(TS.redux.getState())}})},function(e,t,a){"use strict";a.r(t);var r=a(4);var n=a(185);var i=a(1172);var s=a(44);var o=a(453);Object(s["a"])("interop.Flannel",{query:function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return TS.redux.dispatch(Object(n["g"])({method:t,args:a,attemptNumber:r}))},call:function e(t,a,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return TS.redux.dispatch(Object(i["a"])({method:t,args:a,reason:r,EXPEDITED:n}))},fetchRawMembersWithQuery:function e(t,a){return TS.redux.dispatch(Object(o["e"])({query:t,limit:a}))},fetchRawChannelsWithQuery:function e(t,a){return TS.redux.dispatch(Object(o["c"])({query:t,limit:a}))},fetchRawMembersByIds:function e(t){return TS.redux.dispatch(Object(o["d"])({ids:t}))},fetchRawChannelsByIds:function e(t){return TS.redux.dispatch(Object(o["b"])({ids:t}))},getSocketStartArgs:function e(){return Object(n["f"])(TS.redux.getState())},useSocket:function e(){return Object(r["shouldUseSocket"])(TS.redux.getState())},getFlannelConnectionUrl:n["e"],METHODS:n["c"],COMMANDS:n["a"],MAX_RETRY_COUNT:n["b"]})},function(e,t,a){"use strict";a.r(t);var r=a(476);var n=a(44);Object(n["a"])("interop.FuzzyMatcher",r["a"])},function(e,t,a){"use strict";a.r(t);var r=a(538);var n=a(44);Object(n["a"])("interop.BandwidthChecker",r["a"])},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(65);Object(r["a"])("interop.debug",n)},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(47);Object(r["a"])("interop.rtm",{debugGetHandlers:n["c"],debugGetPendingMessages:function e(){return Object(n["d"])(TS.boot_data.team_id)}})},function(e,t,a){"use strict";a.r(t);var r=a(269);var n=a(1786);var i=a(44);function s(e){if(!r[e])throw new Error("There is no Socket Manager action called '"+e+"'");return function(){var t=r[e].apply(r,arguments);return TS.redux.dispatch(t)}}Object(i["a"])("interop.SocketManager",{clearFastReconnectUrl:s("clearFastReconnectUrl"),debugGetInstance:s("debugGetInstance"),debugGetState:s("debugGetState"),debugResetRateLimit:s("debugResetRateLimit"),debugSetFastReconnectsEnabled:s("debugSetFastReconnectsEnabled"),debugSetSocketConnectFlakiness:s("debugSetSocketConnectFlakiness"),debugSetSocketSendFlakiness:s("debugSetSocketSendFlakiness"),debugTriggerError:s("debugTriggerError"),disconnect:s("disconnect"),finalizeProvisionalConnection:s("finalizeProvisionalConnection"),reconnectImmediately:s("reconnectImmediately"),send:s("send"),sleep:s("sleep"),start:s("start"),wake:s("wake"),maybeTickleMS:function e(){return TS.redux.dispatch(Object(n["a"])())}})},function(e,t,a){"use strict";a.r(t);var r=a(507);var n=a(44);Object(n["a"])("interop.setTeamIdForToken",r["c"])},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(863);Object(r["a"])("interop.uploadQueue",{getInstance:function e(){return Object(n["a"])(TS.boot_data.team_id)}})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(2);var s=a.n(i);var o=a(10);var l=a(44);var c=a(1787);var u=a(1788);var d=a(1544);var p=a(1545);function h(e){var t=new o["b"]("channel_browser");var a=t.rt("<span>Show:</span> {label}",{label:e.label},function(t){var a=t.text;return n.a.createElement("span",{key:e.id,className:"sk_dark_gray"},a)});return a}function v(e){var t=new o["b"]("channel_browser");var a=t.rt("<span>Sort:</span> {label}",{label:e.label},function(t){var a=t.text;return n.a.createElement("span",{key:e.id,className:"sk_dark_gray"},a)});return a}function m(e){var t=new o["b"]("team_picker");var a=void 0;a=e?t.rt("No teams found matching <strong>{query}</strong>",{query:s.a.escape(e)}):t.t("No teams found");return a}function f(e){return n.a.createElement(c["a"],{item:e})}f.displayName="teamPickerListItem";function b(e){return n.a.createElement(u["a"],{item:e})}b.displayName="teamPickerToken";function g(e){return n.a.createElement(d["a"],{item:e})}g.displayName="memberListItem";function _(e){return n.a.createElement(p["a"],{item:e})}_.displayName="memberListToken";Object(l["a"])("interop.lazyFilterSelect",{channelBrowserShowWhichChannelsToken:h,channelBrowserSortByToken:v,teamPickerNoResults:m,teamPickerListItem:f,teamPickerToken:b,memberListItem:g,memberListToken:_})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(1158);var i=a(241);function s(e){var t=TS.redux.dispatch(Object(i["getOrFetchMemberCounts"])({channelId:e}));if(t.promise)return t.promise.then(function(){return Object(i["getCachedMemberCounts"])(TS.redux.getState(),e).counts});return Promise.resolve(t.counts)}Object(r["a"])("interop.memberCounts",{getOrFetchMemberCounts:function e(t){return TS.redux.dispatch(Object(i["getOrFetchMemberCounts"])({channelId:t}))},promiseToGetMemberCounts:s,fetchMemberCountsForTeam:function e(){return TS.redux.dispatch(Object(n["b"])())}})},function(e,t,a){"use strict";a.r(t);var r=a(251);var n=a(44);var i=a(924);function s(e){return function(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return e.apply(void 0,[TS.redux.getState()].concat(a))}}function o(e){var t=Object(i["a"])(e);if(!t.is_known){t.is_known=false;Object.defineProperty(t,"is_member",{get:function e(){throw new Error("Value for is_member is not known; check is_known before accessing this field")}})}return t}Object(n["a"])("interop.membership",{ensureChannelMembershipIsKnownForUsers:s(r["ensureChannelMembershipIsKnownForUsers"]),getCachedChannelMembershipInfoForUser:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];var i=r["getCachedChannelMembershipInfoForUser"].apply(void 0,[TS.redux.getState()].concat(a));return o(i)}})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(208);Object(r["a"])("interop.message_input_registry",{getInputProxy:n["a"]})},function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a.n(r);var i=a(44);var s=a(208);var o=a(39);Object(i["a"])("interop.message_pane_input",{focus:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!a)return;a.focus()},focusWithoutSettingCursor:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!a)return;a.focusWithoutSettingCursor()},hasFocus:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return!!a&&a.hasFocus()},isEnabled:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return!!a&&a.isEnabled()},value:function e(t,a){var n=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!n)return"";if(!Object(r["isUndefined"])(a)){n.setText(a);return""}return n.getText(a)},displayValue:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return a?a.getDisplayValue():""},setPlaceholder:function e(t,a){var r=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});if(!r)return;r.setPlaceholder(a)},insertContentsAtCursor:function e(t,a){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"user";var i=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});i&&i.insertContentsAtCursor(a,r,n)},getSelection:function e(t){var a=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});return a?a.getSelection():""},setCursor:function e(t,a,r){var n=Object(s["a"])({viewContext:o["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t});n&&n.setCursor(a,r)}})},function(e,t,a){"use strict";a.r(t);var r=a(511);var n=a(4);var i=a(359);var s=a(23);var o=a(293);var l=a(123);var c=a(67);var u=a(1527);var d=a(41);var p=a(1161);var h=a(516);var v=a(44);Object(v["a"])("interop.messages",{addMessages:function e(){return TS.redux.dispatch(l["a"].apply(void 0,arguments))},getMessageByTimestamp:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return c["a"].apply(void 0,[TS.redux.getState()].concat(a))},getMessagesByChannelId:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return c["b"].apply(void 0,[TS.redux.getState()].concat(a))},getMessagesByProps:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return c["c"].apply(void 0,[TS.redux.getState()].concat(a))},computeRollups:u["a"],getExpandableKey:r["a"],canCountAsUnreadForCurrentUser:d["canCountAsUnreadForCurrentUser"],preprocessImsg:function e(t,a){return TS.redux.dispatch(Object(o["a"])({imsgs:[t],channelId:a}))[0]},preprocessImsgs:function e(t,a){return TS.redux.dispatch(Object(o["a"])({imsgs:t,channelId:a}))},containsMention:function e(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Object(d["containsMention"])(t,Object(n["getCurrentUserId"])(TS.redux.getState()),Object(i["a"])(TS.redux.getState()),Object(s["c"])(TS.redux.getState()),{ignoreAtHereMentions:a,ignoreHighlightWords:r,ignoreAtEveryoneMentions:o,ignoreAtChannelMentions:l})},isReply:d["isReply"],canEditMessage:function e(t,a,r,n){return Object(d["canEditMessage"])(TS.redux.getState(),t,a,r,n)},shouldRenderFileThread:function e(t){return Object(d["shouldRenderFileThread"])(t,{featureFileThreads:Object(n["isFeatureEnabled"])(TS.redux.getState(),"feature_file_threads"),featureFileThreadsDarkLaunch:Object(n["isFeatureEnabled"])(TS.redux.getState(),"feature_file_threads_dark_launch")})},shouldIgnoreHighlightWords:d["shouldIgnoreHighlightWords"],isAppMessage:function e(t){return Object(d["isAppMessage"])(TS.redux.getState(),t)},atEveryoneRegExp:d["atEveryoneRegExp"],atChannelRegExp:d["atChannelRegExp"],atGroupRegExp:d["atGroupRegExp"],atHereRegExp:d["atHereRegExp"],getClogUIStepFromContext:d["getClogUIStepFromContext"],canChannelHaveAtChannelMentions:p["a"],markObjectsAsFresh:h["b"]})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(1106);Object(r["a"])("interop.metricsResponsiveness",{startMonitoringResponsiveness:n["f"],stopMonitoringResponsiveness:n["h"],storeResponsiveStats:n["j"],isEnabled:n["d"],getTotalBeachballCount:n["b"],getTotalStutterCount:n["c"]})},function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,function(e,t,a){},,function(e,t,a){},,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(1703);var n=a(44);Object(n["a"])("interop.mountConnectedWorkspaces",r["a"]);Object(n["a"])("interop.unmountConnectedWorkspaces",r["b"])},,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var r=a(1702);var n=a(44);Object(n["a"])("interop.mountTeamCreatorOnboardingDialog",r["a"]);Object(n["a"])("interop.unmountTeamCreatorOnboardingDialog",r["b"])},function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(150);var s=a(1448);var o=a(44);Object(o["a"])("interop.mountToast",function(e){return TS.redux.dispatch(Object(i["enqueueToast"])({element:n.a.createElement(s["a"],e)}))})},function(e,t,a){},,,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var r=a(113);var n=a(11);var i=a(44);Object(i["a"])("interop.mpims",{convertToPrivateChannel:r["a"],makeNameForMpim:function e(t){return Object(n["makeNameForMpim"])(TS.redux.getState(),t)},getMembersInDisplayOrder:function e(t){return Object(n["getMembersInDisplayOrder"])(TS.redux.getState(),t)}})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(232);Object(r["a"])("interop.onboarding",{fetchTeamCreationWorkflow:function e(){return TS.redux.dispatch(Object(n["fetchTeamCreationWorkflow"])())},showSecondAccountSetupBanner:function e(){return TS.redux.dispatch(Object(n["showSecondAccountSetupBanner"])())}})},function(e,t,a){"use strict";a.r(t);var r=a(1301);var n=a(44);Object(n["a"])("interop.openAppManagementModal",r["a"])},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(386);Object(r["a"])("interop.pages",{isValidPagePath:n["g"],isValidPageId:n["f"],isPageEnabled:n["d"],isPageEnabledById:n["e"],getAllPages:n["a"],getPageById:n["b"],getPageByPath:n["c"]})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(695);Object(r["a"])("interop.presenceManager",{addMemberToPresenceSubscription:n["a"],removeMemberFromPresenceSubscription:n["c"]})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(1188);var i=a(1362);Object(r["a"])("interop.reactions",{fetchReactions:n["a"],getApiArgsFromReactionKey:n["b"],submitAddOrRemoveReaction:n["d"],maybeReactToLastMessageInChannel:i["a"]})},function(e,t,a){var r={"./accessibility-store.js":683,"./activity-store.js":794,"./all-threads-store.js":361,"./all-unreads-store.js":326,"./app-views-store.js":1511,"./apps-in-channels-store.js":1083,"./boot-data-store.js":4,"./cfm-store.js":756,"./channel-loading-store.js":533,"./channel-sidebar-folders-store.js":787,"./channel-sidebar-store.js":796,"./consistency-store.js":302,"./custom-emoji-store.js":1195,"./deleted-messages-store.js":911,"./desktop-store.js":193,"./dnd-store.js":180,"./drafts-store.js":684,"./ekm-changes-store.js":1197,"./email-render-store.js":1512,"./ephemeral-messages-store.js":455,"./expandables-store.js":340,"./experiments-store.js":122,"./file-refresh-store.js":437,"./file-upload-store.js":236,"./files-flexpane-store.js":760,"./flannel-url-store.js":1199,"./global-nav-store.js":1080,"./grapevine-meta-store.js":513,"./help-store.js":912,"./highlights-store.js":4203,"./imports-store.js":177,"./incremental-boot-store.js":547,"./inline-file-previews-store.js":1169,"./invites-store.js":1256,"./last-used-slash-command-store.js":1254,"./member-directory-flexpane-store.js":576,"./message-edit-store.js":358,"./message-pane-banner-store.js":530,"./modal-store.js":48,"./navigation-history-store.js":410,"./noop-store.js":1198,"./onboarding-store.js":1513,"./pending-files-store.js":564,"./pending-open-channel-store.js":917,"./persisted-api-calls-store.js":1081,"./pins-store.js":234,"./presence-store.js":309,"./reactions-toast-store.js":913,"./search-autocomplete-store.js":198,"./search-channels-users-store.js":1514,"./search-in-product-education-store.js":858,"./search-input-box-store.js":273,"./search-results-store.js":173,"./search-session-store.js":434,"./socket-store.js":52,"./stars-store.js":759,"./survey-store.js":1446,"./team-creation-store.js":232,"./thread-sub-store.js":351,"./threads-flexpane-store.js":385,"./toast-store.js":150,"./typing-store.js":452,"./ui-serialization-store.js":856,"./unfurls-store.js":1432,"./unread-counts-store.js":188,"./user-groups-flexpane-store.js":692,"./users-counts-store.js":1515};function n(e){var t=i(e);return a(t)}function i(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");a.code="MODULE_NOT_FOUND";throw a}return t}n.keys=function e(){return Object.keys(r)};n.resolve=i;e.exports=n;n.id=3317},function(e,t,a){var r={"./admin-members-store.js":237,"./app-permissions-store.js":295,"./app-profiles-store.js":363,"./apps-store.js":182,"./blocks-store.js":1082,"./bots-store.js":199,"./current-member-user-group-regexp-store.js":296,"./customize-emoji-store.js":411,"./developer-actions-store.js":581,"./developer-apps-store.js":1685,"./environment-store.js":1079,"./idp-groups-store.js":914,"./last-network-send-store.js":1196,"./member-counts-store.js":241,"./membership-ordered-store.js":1516,"./membership-store.js":251,"./messages-meta-store.js":329,"./notifications-store.js":1194,"./paid-features-store.js":857,"./reactions-store.js":318,"./team-id-store.js":178,"./telemetry-store.js":1574,"./user-group-membership-store.js":291,"./window-store.js":209};function n(e){var t=i(e);return a(t)}function i(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");a.code="MODULE_NOT_FOUND";throw a}return t}n.keys=function e(){return Object.keys(r)};n.resolve=i;e.exports=n;n.id=3318},function(e,t,a){var r={"./checkout-flow-store/index.js":184,"./pricing-plans-store/index.js":146,"./search-ui-store/index.js":1259};function n(e){var t=i(e);return a(t)}function i(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");a.code="MODULE_NOT_FOUND";throw a}return t}n.keys=function e(){return Object.keys(r)};n.resolve=i;e.exports=n;n.id=3319},function(e,t,a){var r={"./channel-history-store/index.js":103,"./files-store/index.js":85,"./persistence-hashes-store/index.js":4014};function n(e){var t=i(e);return a(t)}function i(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");a.code="MODULE_NOT_FOUND";throw a}return t}n.keys=function e(){return Object.keys(r)};n.resolve=i;e.exports=n;n.id=3320},function(e,t,a){"use strict";a.r(t);var r=a(1291);var n=a(44);Object(n["a"])("interop.removeAppFromChannel",function(e){return TS.redux.dispatch(Object(r["a"])(e))})},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1844);var s=a(11);var o=a(541);var l=a(77);var c=a(124);var u=a(1157);var d=a(17);var p=a(41);var h=a(577);var v=a(31);var m=a(109);var f=a(908);var b=a(93);var g=a(99);var _=a(44);Object(_["a"])("interop.rules",{channels:n()({},s,{shouldSuppressOrgChannel:o["a"],canThread:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["canThread"].apply(s,[TS.redux.getState()].concat(a))},isReadOnly:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["isReadOnly"].apply(s,[TS.redux.getState()].concat(a))},isThreadOnly:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["isThreadOnly"].apply(s,[TS.redux.getState()].concat(a))},shouldStopChannelMentions:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["shouldStopChannelMentions"].apply(s,[TS.redux.getState()].concat(a))},getDisplayNameForChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["getDisplayNameForChannel"].apply(s,[TS.redux.getState()].concat(a))},isYou:function e(t){return s["isYou"](TS.model.user.id,t)},shouldShowAtChannelWarning:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["shouldShowAtChannelWarning"].apply(s,[TS.redux.getState()].concat(a))},checkForBlockedAtChannelKeyword:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return s["checkForBlockedAtChannelKeyword"].apply(s,[TS.redux.getState()].concat(a))}}),messages:n()({isAutomatedSubtype:h["a"]},p),files:{extendFileWithPinnedInfo:l["extendFileWithPinnedInfo"],getFileType:l["getFileType"]},user:{canLeaveChannel:b["k"],canNonAdminsAtMentionEveryoneBySettings:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["n"].apply(void 0,[TS.redux.getState()].concat(a))},canNonAdminsAtChannelOrGroupBySettings:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["m"].apply(void 0,[TS.redux.getState()].concat(a))},canAtMentionEveryone:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["e"].apply(void 0,[TS.redux.getState()].concat(a))},canAtChannelOrGroup:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["d"].apply(void 0,[TS.redux.getState()].concat(a))},canPostInGeneral:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["q"].apply(void 0,[TS.redux.getState()].concat(a))},canPostInChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["p"].apply(void 0,[TS.redux.getState()].concat(a))},canUserArchiveChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["v"].apply(void 0,[TS.redux.getState()].concat(a))},canUserSeeArchiveChannelOption:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["H"].apply(void 0,[TS.redux.getState()].concat(a))},canUserManagePostingPermissions:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["D"].apply(void 0,[TS.redux.getState()].concat(a))},canSetPurposeForChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["s"].apply(void 0,[TS.redux.getState()].concat(a))},canSetTopicForChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["t"].apply(void 0,[TS.redux.getState()].concat(a))},canUserCreatePrivateChannels:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["x"].apply(void 0,[TS.redux.getState()].concat(a))},canUserCreatePublicChannels:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["y"].apply(void 0,[TS.redux.getState()].concat(a))},canTriggerCustomResponses:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["u"].apply(void 0,[TS.redux.getState()].concat(a))},canKickFromPublicChannels:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["j"].apply(void 0,[TS.redux.getState()].concat(a))},canKickFromPrivateChannels:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["i"].apply(void 0,[TS.redux.getState()].concat(a))},canKickFromChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["g"].apply(void 0,[TS.redux.getState()].concat(a))},canJoinChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["f"].apply(void 0,[TS.redux.getState()].concat(a))},canUserConvertChannelToPrivate:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["w"].apply(void 0,[TS.redux.getState()].concat(a))},canUserDeleteChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["A"].apply(void 0,[TS.redux.getState()].concat(a))},canUserSetDataRetentionForChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["I"].apply(void 0,[TS.redux.getState()].concat(a))},canUserManageTeamAccessToChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["E"].apply(void 0,[TS.redux.getState()].concat(a))},canUserRequestSharedChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["G"].apply(void 0,[TS.redux.getState()].concat(a))},canUserCreateSharedChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["z"].apply(void 0,[TS.redux.getState()].concat(a))},canUserExportMessageHistory:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["B"].apply(void 0,[TS.redux.getState()].concat(a))},canUserInviteToChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return b["C"].apply(void 0,[TS.redux.getState()].concat(a))}},unreads:n()({},f),user_groups:{isUnknownOrNonExistent:function e(){return g["q"].apply(void 0,arguments)},isNonExistent:g["o"],isUnknown:g["p"]},emoji:{getEmojiMode:function e(t){return c["i"](TS.redux.getState(),t)},shouldRenderEmojiAsText:function e(){return c["o"](TS.redux.getState())},getEmojiUrlPrefix:c["j"],isEmojiNameSafe:c["k"]},teams:n()({},v),members:n()({},d),admin:n()({},i),invites:n()({},u),threads:n()({},m)})},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(23);var s=a(254);var o=a(479);var l=a(77);var c=a(253);var u=a(44);var d=a(1691);var p=a(1860);function h(e){var t=TS.redux.getState();var a=Object(i["c"])(t);Object(o["p"])(a,e)}function v(e){var t=TS.redux.getState();var a=Object(i["c"])(t);return Object(o["o"])(a,e)}Object(u["a"])("interop.files",n()({},l,{processFileForUpserting:function e(t){return Object(s["b"])(TS.redux.getState(),t)},fetchAndUpsertFileById:c["d"],fetchAndUpsertFilesById:c["e"],getFileMetaTemplate:d["b"],markObjectsAsFresh:h,isObjectFresh:v,deleteFile:function e(){return TS.redux.dispatch(c["b"].apply(void 0,arguments))},openDeleteFileDialog:function e(){return TS.redux.dispatch(p["a"].apply(void 0,arguments))}}))},function(e,t,a){"use strict";a.r(t);var r=a(239);var n=a(162);var i=a(901);var s=a(44);Object(s["a"])("interop.notifications",{shouldShowNotificationForChannelMessage:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return r["o"].apply(void 0,[TS.redux.getState()].concat(a))},shouldShowNotificationForDirectMessage:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return r["q"].apply(void 0,[TS.redux.getState()].concat(a))},shouldShowNotificationForDesktopNotification:function e(){for(var t=arguments.length,a=Array(t),n=0;n<t;n++)a[n]=arguments[n];return r["p"].apply(void 0,[TS.redux.getState()].concat(a))},showNotification:function e(t,a){return TS.redux.dispatch(Object(i["d"])({message:t,modelObject:a}))},messageForSuppressedNotification:n["b"],getCalculatedDesktopNotifySetting:r["g"],getCalculatedMobileNotifySetting:r["h"],getDefaultDesktopNotifySetting:r["j"],getDefaultMobileNotifySetting:r["k"]})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(23);Object(r["a"])("interop.selfTeamIds",{getEnterpriseId:n["a"],getTeamId:n["c"],getPrimaryTeamId:n["b"]})},function(e,t,a){"use strict";a.r(t);var r=a(505);var n=a(44);Object(n["a"])("interop.sendMessage.resolveMessage",r["c"])},function(e,t,a){"use strict";a.r(t);var r=a(356);var n=a.n(r);var i=a(44);Object(i["a"])("interop.setAppElementForReactModal",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#client-ui";n.a.setAppElement(e)})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(1748);var i=a(1750);var s=a(1525);var o=a(1324);var l=a(1754);var c=a(39);var u=c["SLASH_COMMAND_ERRORS"].UNKNOWN_COMMAND;Object(r["a"])("interop.slashCommand",{UNKNOWN_COMMAND:u,looksLikeSlashCommand:s["a"],parseEditLastMessageCommand:i["a"],parseArgs:n["a"],loadSlashCommands:o["b"],executeCommand:o["a"],slackDebugLagCommand:l["a"]})},function(e,t,a){"use strict";a.r(t);var r=a(542);var n=a(44);Object(n["a"])("interop.useGantryCallsInLegacySlack",function(){return Object(r["f"])(TS.redux.getState())})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(759);function i(e){return TS.redux.dispatch(Object(n["fetchStarsList"])(e))}Object(r["a"])("interop.stars",{getStarsList:i})},function(e,t,a){"use strict";a.r(t);var r=a(859);var n=a(23);var i=a(35);var s=a(331);var o=a(1140);var l=a(380);var c=a(44);var u=a(1037);function d(e){var t=TS.redux.getState();var a=Object(n["c"])(t);Object(r["a"])(a,e)}function p(){return Object(r["c"])()}function h(e){return TS.redux.dispatch(Object(u["c"])(e))}function v(e,t){return TS.redux.dispatch(Object(s["e"])({teamId:e,fields:t}))}function m(e,t){var a=TS.redux.getState();return Object(i["i"])(a,e,t)}function f(){var e=TS.redux.getState();return Object(i["c"])(e)}function b(){var e=TS.redux.getState();return Object(i["d"])(e)}function g(e){var t=TS.redux.getState();return Object(i["h"])(t,e)}function _(){return TS.redux.dispatch(s["c"].apply(void 0,arguments))}function y(){return TS.redux.dispatch(o["c"].apply(void 0,arguments))}function O(){return TS.redux.dispatch(l["b"].apply(void 0,arguments))}Object(c["a"])("interop.teams",{getTeamById:m,getAllTeams:f,getCurrentTeam:b,getTeamByDomain:g,getSelfEnterpriseTeam:i["g"],getSelfEnterpriseOrgName:i["e"],getSelfEnterpriseOrgUrl:i["f"],ensureEnterpriseTeamIsKnown:_,removeTeam:y,upsertTeam:O,markObjectsAsFresh:d,pauseRefetch:p,fetchAndUpsertTeamsWithQuery:h,reorderTeamProfileFields:v,updateSelfEnterpriseName:s["f"],upsertSelfEnterprise:s["k"],upsertSelfTeam:s["l"]})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(515);var i=a(136);var s=a(382);var o=a(860);var l=a(393);var c=a(1755);var u=a(1040);var d=a(1749);var p=a(1336);var h=a(1524);var v=a(1461);var m=a(543);var f=a(793);var b=a(1320);var g=a(1463);var _=a(1751);var y=a(1465);var O=a(1526);var k=a(1345);Object(r["a"])("interop.texty",{Delta:n["a"],PlainClipboardModule:n["b"],Quill:n["c"],SlackKeyboardModule:n["d"],TabCompleteModule:n["e"],TextyClass:n["f"],isRangeInCode:i["j"],convertContentsStringToContents:s["b"],convertContentsToString:o["a"],convertContentsToStringForDisplay:l["a"],getMemberAsContentsString:c["a"],shouldHighlightMention:u["a"],convertContentsStringForSlashCommands:d["a"],convertContentsStringForEncodedMembers:p["a"],CONTENTS_STRING_MENTION_REGEX:s["a"],convertContentsStringToDisplayString:h["a"],TRAILING_PUNCTUATION_CHARACTERS:i["b"],getBroadcastMatch:m["a"],getDisplayTextForSearchResult:f["a"],trimAllowedMatchPrefix:b["a"],getContentsFromClipboard:v["a"],detachInvalidMentionsFromContents:g["a"],replacePotentialMentionsSynchronously:_["a"],shouldInsertNewline:y["a"],getBroadcastKeywordsFromContents:O["a"],getDefaultComposerConfig:k["a"]})},function(e,t,a){"use strict";a.r(t);var r=a(252);var n=a(44);function i(){return TS.redux.dispatch(Object(r["b"])())}Object(n["a"])("interop.topics",{resynced:i})},function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a.n(r);var i=a(44);var s=a(452);var o=a(24);var l=a(17);function c(e){var t=TS.redux.getState();var a=Object(r["map"])(Object(s["getTyperIdsInChannel"])(t,e),function(e){return Object(o["d"])(t,e)});a.sort(function(e,a){return TS.interop.i18n.sorter(Object(l["getPrefCompliantMemberNameLowerCase"])(t,e),Object(l["getPrefCompliantMemberNameLowerCase"])(t,a))});return a}Object(i["a"])("interop.typing",{currentUserStartedTyping:s["currentUserStartedTyping"],currentUserEndedTyping:s["currentUserEndedTyping"],getTypersInChannel:c,memberStartedTyping:s["memberStartedTyping"],memberEndedTyping:s["memberEndedTyping"]})},function(e,t,a){"use strict";a.r(t);var r=a(231);var n=a(151);var i=a(271);var s=a(99);var o=a(296);var l=a(692);var c=a(291);var u=a(4);var d=a(44);function p(e){var t=TS.redux.getState();var a=Object(n["g"])(t,e);if(!a)return null;return a}function h(e){return TS.redux.dispatch(Object(i["h"])({ids:[e]})).catch(function(){return{userGroups:[]}}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userGroups,a=void 0===t?[]:t;TS.redux.dispatch(Object(r["q"])({userGroups:a}));return a&&a[0]})}function v(e){return TS.redux.dispatch(Object(i["i"])({subteam:e,reason:"legacyPromiseToGetUserGroupMembers"})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.users;var n=p(e);if(!n||Object(s["q"])(n))return;TS.redux.dispatch(Object(r["d"])({groupId:e,users:a}))}).then(function(){return p(e)})}function m(e,t){TS.redux.dispatch(Object(i["i"])({subteam:e,reason:"legacyGetUserGroupMembers"})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.users;var n=p(e);if(!n||Object(s["q"])(n))return;TS.redux.dispatch(Object(r["d"])({groupId:e,users:a}))}).then(function(){var a=p(e);a&&t&&t(a)})}function f(e){var t=TS.redux.getState();Object(u["isFeatureEnabled"])(t,"feature_lazy_user_groups")?TS.redux.dispatch(Object(c["upsertUserGroupMembership"])({groupId:e,isMember:true})):TS.redux.dispatch(Object(o["removeCurrentMemberUserGroupRegexp"])(e));var a=p(e);if(a&&!Object(s["q"])(a)&&Object(s["r"])(a)){Object(u["isFeatureEnabled"])(t,"feature_lazy_user_groups")||TS.redux.dispatch(Object(o["addCurrentMemberUserGroupRegexp"])(a));var n=Object(u["getCurrentUserId"])(t);TS.redux.dispatch(Object(r["b"])({groupId:e,memberId:n}))}}function b(e){var t=TS.redux.getState();var a=Object(n["a"])(t,e);return a}function g(e){return TS.redux.dispatch(Object(r["p"])({userGroup:e}))}function _(e){return TS.redux.dispatch(Object(r["q"])({userGroups:e}))}function y(e){return TS.redux.dispatch(Object(i["f"])(e))}function O(){return Object(c["getCurrentMemberUserGroupMembership"])(TS.redux.getState())}function k(e){return Object(n["m"])(TS.redux.getState(),e)}function E(){return Object(n["d"])(TS.redux.getState())}Object(d["a"])("interop.userGroups",{getUserGroupById:p,fetchUserGroupById:h,getActiveUserGroups:b,getKnownUserGroups:E,getUserGroupMembers:m,promiseToGetUserGroupMembers:v,upsertSelfUserGroup:f,upsertUserGroup:g,upsertUserGroups:_,getCurrentMemberUserGroupMembership:O,isUserGroupFromAnotherTeam:k,createUserGroup:i["a"],bulkAddGroups:r["c"],updateUserGroup:i["l"],updateMembersOfUserGroup:i["k"],enableUserGroup:i["d"],disableUserGroup:i["c"],deleteUserGroup:i["b"],getAllUserGroups:function e(){return Object(n["b"])(TS.redux.getState())},USER_GROUP_MSG_REGEX:s["a"],isUserGroupActive:s["r"],searchLocalUserGroups:function e(){return TS.redux.dispatch(Object(l["searchLocalUserGroups"])())},getSearchQuery:function e(){return Object(l["getSearchQuery"])(TS.redux.getState())},setSearchQuery:function e(t){return TS.redux.dispatch(Object(l["setSearchQuery"])(t))},bulkAddUserGroupMembership:function e(t){return TS.redux.dispatch(Object(c["bulkAddUserGroupMembership"])(t))},fetchAndUpsertUserGroupsWithQuery:y,canEditUserGroups:function e(){return Object(s["c"])(TS.redux.getState())},canCreateAndDeleteUserGroups:function e(){return Object(s["b"])(TS.redux.getState())},getCurrentMemberUserGroupRegExps:function e(){return Object(o["getCurrentMemberUserGroupRegExps"])(TS.redux.getState())},clearAllUserGroupMembership:function e(){return TS.redux.dispatch(Object(c["clearAllUserGroupMembership"])())},isUserGroupMember:function e(t){return Object(c["isUserGroupMember"])(TS.redux.getState(),t)}})},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(2);var s=a.n(i);var o=a(39);var l=a(299);var c=a(44);function u(){return Object(i["map"])(o["BROADCAST_KEYWORDS"],function(e,t){return n()({alias:"BKchannel"===t?"group":null},Object(l["a"])(t))})}function d(e,t){return Object(i["map"])(Object(l["c"])(e,t),function(e){return n()({id:e.id,alias:"BKchannel"===e.id?"group":null},e)})}Object(c["a"])("interop.broadcast_keywords",{getAllBroadcastKeywords:u,getBroadcastKeywordsForUser:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return d.apply(void 0,[TS.redux.getState()].concat(a))}})},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(44);var s=a(332);Object(i["a"])("interop.client_action_token",n()({},s["a"]))},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(276);Object(r["a"])("interop.clipboard",n)},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(21);Object(r["a"])("interop.clogTypes",{EventId:n["k"],CoreKeys:n["c"],FileUploadType:n["n"],FileUploadAction:n["l"],FileUploadSrc:n["m"]})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(690);Object(r["a"])("interop.clog",{instance:Object(n["b"])(),track:n["c"],trackClick:n["d"],trackClickWithContext:n["e"],trackForm:n["f"]})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(381);Object(r["a"])("interop.currency",{formatCurrency:n["a"]})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(125);var i=a(772);var s=a(220);var o=a(1426);var l=a(1423);var c=a(1428);var u=a(1149);var d=a(394);var p=a(1427);var h=a(562);var v=a(1418);var m=a(770);var f=a(1145);var b=a(1146);var g=a(1147);var _=a(337);var y=a(1421);var O=a(1148);var k=a(786);var E=a(1425);var C=a(1419);var j=a(189);var w=a(773);var S=a(1422);var I=a(1424);var T=a(834);var A=a(1144);var N=a(529);var P=a(1417);var R=a(1253);var M=a(563);var D=a(1420);var x=a(890);var F=a(771);var L=a(357);var B=a(702);var U=a(89);Object(r["a"])("interop.datetime",{toDateObject:n["a"],toDate:i["a"],toTime:s["a"],toHourAmount:o["a"],toDayAmount:l["a"],toWeekAmount:c["a"],toTimeAmount:u["a"],timeDurationConverter:d["a"],toTimeDuration:p["a"],dateDifference:h["a"],distanceInDays:v["a"],distanceInMinutes:m["a"],distanceInSeconds:f["a"],isToday:b["a"],isYesterday:g["a"],isSameDay:_["a"],sameHour:y["a"],shouldExcludeYear:O["a"],toDayOfTheWeek:k["a"],toHour:E["a"],getActivityDayStamp:C["a"],toCalendarDate:j["a"],toCalendarDateOrNamedDay:w["a"],toCalendarDateIfYesterdayOrToday:S["a"],toFilenameFriendlyDate:I["a"],toHumanReadableDateAndTime:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return T["a"].apply(void 0,[TS.redux.getState()].concat(a))},convertISOtoUTCReadableDate:A["a"],toTimeAgo:N["a"],addDays:P["a"],daysToYearsPretty:R["a"],maybeGetRelativeDay:M["a"],millisecondsToPrettifiedTime:D["a"],prettifyDateString:x["a"],makeTsStamp:F["a"],formatDate:L["a"],memberLocalTime:B["a"],setLocale:U["b"]})},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(44);var s=a(30);var o=s["desktopVersionFields"](),l=o.windowsAppVersion,c=o.windowsAppVersionMinor,u=o.macAppVersion,d=o.macAppVersionMinor,p=o.linuxAppVersion,h=o.linuxAppVersionMinor,v=o.desktopAppVersion;Object(i["a"])("interop.environment",n()({},s,{win_ssb_version:l,win_ssb_version_minor:c,mac_ssb_version:u,mac_ssb_version_minor:d,lin_ssb_version:p,lin_ssb_version_minor:h,desktop_app_version:v}))},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(44);var s=a(10);var o=a(30);var l=a(57);var c=a(249);var u=a(226);var d=new s["b"]("ns");var p={defaultNamespace:"ns",t:d.t};var h=[];var v=function e(t,a){var r=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p.t(t,n()({},r,{ns:a}))};o["isDev"]&&(r.toString=function(){var e=a+"."+t;if(h.indexOf(e)>=0)return"";h.push(e);var r="Dev-only alert: tried to use an i18n function as a string!\nSee console for stack trace.\n\n\t\t\tNamespace: "+a+"\n\t\t\tString: "+t;alert(r);return""});return r};Object(i["a"])("interop.i18n",{t:v,number:s["l"],percent:s["m"],deburr:s["a"],listify:s["g"],possessive:s["n"],fullPossessiveString:s["c"],safeString:s["o"],sorter:s["p"],mappedSorter:s["i"],localesEnabled:l["e"],supportedKeyboards:c["f"],keyCodeEquivalent:c["c"],keyEquivalent:c["d"],getReverseKeyCodeMap:c["b"],normalizeKeyboardFromDesktop:c["e"],locale:Object(l["f"])(),isPseudoLocale:l["d"],isLocaleCJK:l["c"],zdLocale:l["a"],number_abbreviations:u["d"],locales_number_formatting:u["c"],DEFAULT_LOCALE:s["b"].DEFAULT_LOCALE})},function(e,t){},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(852);var i=a(94);var s=a(546);var o=a(1692);var l=a(1227);var c=a(1705);Object(r["a"])("interop.search_autocomplete",{suggestions:n["c"],AutocompleteQuerySuggestion:s["f"],AutocompleteSuggestionType:i["b"],warmQuerySuggestionCache:function e(){var t=TS.redux.getState().teamId;var a=Object(c["a"])(t);a.get()},clearQueryHistoryCache:function e(){var t=TS.redux.getState().teamId;var a=Object(l["b"])(t);a.flushAll()},warmFileSuggestionCache:function e(){var t=TS.redux.getState().teamId;var a=Object(o["a"])(t);a.get()}})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(1338);Object(r["a"])("interop.search_conversions",{convertContentsStringForEncodedChannels:n["a"]})},function(e,t,a){"use strict";a.r(t);var r=a(109);var n=a(1456);var i=a(208);var s=a(39);var o=a(44);Object(o["a"])("interop.threads",{getThreadKey:r["getThreadKey"],populateThreadInputs:n["a"],populateReplyInput:function e(t,a,r){var n=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:a,threadTs:r});n&&n.setText(t)},clearHistory:function e(t,a){var r=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:a});r&&r.clearHistory()},focus:function e(t,a){var r=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:a});r&&r.focus()},setBroadcast:function e(t,a,r){var n=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:a});n&&n.setBroadcast(r)},getBroadcast:function e(t,a){var r=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:a});return r&&r.getBroadcast()},getText:function e(t,a){var r=Object(i["a"])({viewContext:s["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:t,threadTs:a});return r&&r.getText()}})},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(44);var s=a(60);var o=a(536);var l=a(1747);Object(i["a"])("interop.url",n()({buildWorkspaceUrl:o["b"],getFileIdFromUrlWithState:l["a"]},s))},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(255);Object(r["a"])("interop.versions",n)},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(73);var i=a(316);var s=a(285);Object(r["a"])("interop.workspace",{getPrimaryView:function e(){return Object(n["a"])(TS.redux.getState())},setSecondaryView:function e(){return TS.redux.dispatch(s["a"].apply(void 0,arguments))},setPrimaryView:function e(){return TS.redux.dispatch(i["a"].apply(void 0,arguments))}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(4);var s=a(326);var o=a(188);var l=a(3);var c=a.n(l);var u=a(6);var d=a.n(u);var p=a(7);var h=a.n(p);var v=a(8);var m=a.n(v);var f=a(9);var b=a.n(f);var g=a(13);var _=a(2);var y=a(0);var O=a(45);var k=a(19);var E=a(103);var C=a(67);var j=a(14);var w=Object(j["b"])(function(e){return e&&e.unreadsView&&e.unreadsView.newUnreadMsgCount});var S=Object(j["b"])(function(e){return e&&e.unreadsView&&e.unreadsView.refreshId});var I=a(1547);var T=a(902);var A=a(51);var N=a(1687);var P=a(11);var R=a(1561);var M=a(4194);var D=a(4178);var x=a(384);var F=a(1815);var L=a(1554);var B=a(12);var U=a(39);var q=a(10);var G=a(16);var W=a.n(G);var H=a(1164);var V=a(34);var K=a(23);var z=a(268);var Y=a(124);var Q=a(866);var J=a(1068);var Z=a(30);var X=a(28);var $=a(187);var ee=a(22);var te=a(186);var ae=a(4180);var re=new q["b"]("all_unreads");var ne={featureReactAllUnreads:y["b"].bool.isRequired,visible:y["b"].bool.isRequired,showUndo:y["b"].bool.isRequired,teamId:y["b"].string.isRequired,preferredSkinTone:y["b"].string.isRequired,emojiMode:y["b"].string.isRequired,undoMarkAllRead:y["b"].func.isRequired,totalUnreads:y["b"].number.isRequired,refreshAllUnreads:y["b"].func.isRequired,userAttentionIsOnChat:y["b"].bool.isRequired};var ie=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onUndo=a.onUndo.bind(a);a.onRefresh=a.onRefresh.bind(a);a.onEnter=a.onEnter.bind(a);a.generateMessage();a.state={allowRefreshButton:e.visible};a.containerRef=n.a.createRef();return a}h()(t,[{key:"componentDidMount",value:function e(){this.keyCommands=new te["a"];this.keyCommands.bindAll([{keys:"enter",handler:this.onEnter}])}},{key:"componentDidUpdate",value:function e(t){var a=this;t.visible&&!this.props.visible?this.generateMessage():!t.visible&&this.props.visible&&(this.buttonDelayTimer=setTimeout(function(){a.setState(function(){return{allowRefreshButton:true}})},1e3))}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.buttonDelayTimer);this.keyCommands&&this.keyCommands.reset()}},{key:"onEnter",value:function e(t){var a=this.props,r=a.visible,n=a.userAttentionIsOnChat;if(!r||!n)return;if(!this.shouldShowNewButton())return;var i=t.target;if(Object(J["a"])(i))return;var s="BODY"===i.nodeName;var o=this.containerRef.current&&this.containerRef.current.contains(i);(s||o)&&this.onRefresh()}},{key:"onRefresh",value:function e(){this.props.refreshAllUnreads();this.setState(function(){return{allowRefreshButton:false}})}},{key:"onUndo",value:function e(){this.props.undoMarkAllRead();this.setState(function(){return{allowRefreshButton:false}})}},{key:"generateMessage",value:function e(){var t=this.props,a=t.teamId,r=t.preferredSkinTone,n=t.emojiMode;this.message=Object(ae["a"])({locale:Object(H["a"])({teamId:a}),preferredSkinTone:r,emojiMode:n});var i=new Image;i.src=this.message.emojiUrl}},{key:"shouldShowNewButton",value:function e(){var t=this.state.allowRefreshButton;var a=this.props.totalUnreads;return t&&a>0}},{key:"render",value:function e(){var t=this.props,a=t.visible,r=t.featureReactAllUnreads,i=t.showUndo,s=t.totalUnreads;if(!r)return null;if(!a)return null;var o=this.shouldShowNewButton();var l=W()("p-unreads_view__empty",{"p-unreads_view__empty--show_new":o});var c=function e(t){var a=t.tag,r=t.text;if("enter-icon"===a)return n.a.createElement(ee["b"],{type:"enter",size:"inherit"});return n.a.createElement("b",null,r)};return n.a.createElement("div",{className:l,ref:this.containerRef},n.a.createElement("div",{className:"p-unreads_view__empty__message"},n.a.createElement("img",{className:"p-unreads_view__empty__image",src:this.message.emojiUrl,alt:""}),n.a.createElement("div",null,this.message.lineOne,n.a.createElement("br",null),this.message.lineTwo)),o&&n.a.createElement(n.a.Fragment,null,n.a.createElement(X["d"],{onClick:this.onRefresh},re.t("{totalUnreads, plural, =1 {# New Message} other {# New Messages} }",{totalUnreads:s})),n.a.createElement("div",{className:"p-unreads_view__empty__button_caption"},Object(Z["isMac"])()?re.rt("<b>Return</b> <enter-icon></enter-icon> to show",null,c):re.rt("<b>Enter</b> <enter-icon></enter-icon> to show",null,c))),i&&n.a.createElement("div",{className:"p-unreads_view__empty__undo"},n.a.createElement("div",{className:"p-unreads_view__empty__undo_inner"},re.t("You marked all your channels read."),n.a.createElement($["a"],{onClick:this.onUndo,className:"p-unreads_view__empty__undo_button"},re.t("Undo")))))}}]);return t}(r["Component"]);ie.displayName="EmptyState";function se(e){var t=Object(i["isFeatureEnabled"])(e,"feature_incremental_unread_counts")?Object(o["getTotalUnreadsInChannels"])(e):Object(z["h"])();return{featureReactAllUnreads:Object(i["isFeatureEnabled"])(e,"feature_react_all_unreads"),teamId:Object(K["c"])(e),preferredSkinTone:Object(V["f"])(e,"preferred_skin_tone")||"1",emojiMode:Object(Y["i"])(e,{forceDisplay:true}),totalUnreads:t,userAttentionIsOnChat:Object(Q["c"])(e)}}var oe=Object(g["connect"])(se)(ie);var le=a(26);var ce=a.n(le);var ue=a(2414);var de=a(98);var pe=a(423);var he=a(409);var ve=a(377);var me=a(25);var fe=a(333);var be=a(29);var ge=Object(me["a"])("Expand a channel in All Unreads",function(e,t,a){var r=Object(V["e"])(t());if(!r.includes(a))return;var n=Object(_["without"])(r,a);e(Object(fe["b"])({pref:"unread_collapsed_channels",value:n.join(",")}));e(Object(be["b"])({method:"unread.expand",args:{channel:a},reason:"all_unreads_expand"}))});ge.propTypes=y["b"].string.isRequired;var _e=Object(me["a"])("Collapse a channel in All Unreads",function(e,t,a){var r=Object(V["e"])(t());if(r.includes(a))return;var n=[].concat(ce()(r),[a]);e(Object(fe["b"])({pref:"unread_collapsed_channels",value:n.join(",")}));e(Object(be["b"])({method:"unread.collapse",args:{channel:a},reason:"all_unreads_collapse"}))});_e.propTypes=y["b"].string.isRequired;var ye=a(1812);var Oe=a(1067);var ke=a(1368);var Ee=a(3930);var Ce=a(1761);var je=a(41);var we=a(3945);var Se=a(1146);var Ie=a(1527);function Te(e,t){var a=[];var r=[];var n=[];var i=true;Object(_["forEach"])(e,function(e){var s=e.channelId,o=e.channelType,l=e.start,c=e.end,u=e.timestamps,d=e.sliceEnd,p=e.reachedEnd,h=e.messages,v=e.lastRead,m=e.initialLastRead,f=e.markedMsgCount,b=e.collapsed;var g=u.filter(function(e){var a=h[e];if(Object(je["isHidden"])(a))return false;if(Object(je["isJoinLeave"])(a)&&!Object(je["isInviteForCurrentUser"])(a,t))return false;if(Object(je["isTempMsg"])(a))return false;return true});var y=g.filter(function(e){return e>l&&e<=c});var O=g.filter(function(e){return e>c});var k=y.length&&!b;var E=!Object(Se["a"])(y[0]);var C=v>l&&Object(_["find"])(y,function(e){var a=h[e];return Object(je["isMessageUnread"])(a,v,t)});a.push("header-"+s);n.push({key:"header-"+s,index:r.length});r.push({type:"header",channelId:s,channelType:o,end:c,initialLastRead:m,markedMsgCount:f,messageCount:y.length,messageCountAfterLatest:O.length,messageCountIsExact:p,collapsed:b});if(k&&!E){a.push("spacer-top-"+s);r.push({type:"spacer"})}if(k){var j=y.map(function(e){return h[e]});var w=Object(Ie["a"])(j),S=w.rollups;y.forEach(function(e,t){var n=y[t-1];var i=e===C;var o=n&&Object(we["a"])(n);var l=Object(we["a"])(e);if(E&&o!==l){a.push("day-divider-"+s+"-"+l);r.push({type:"day-divider",dayTs:l,unread:i})}else if(i){a.push("unread-divider-"+s);r.push({type:"unread-divider"})}a.push("message-"+s+"-"+e);r.push({type:"message",channelId:s,ts:e,prevTs:n,isFirstMessage:0===t,rollup:S[e]})})}if(!p&&!b){var I=d||l;a.push("loading-"+s+"-"+I);r.push({type:"loading",channelId:s,oldest:I});i=false;return false}if(k)if(O.length){a.push("show-newer-"+s);r.push({type:"show-newer",channelId:s,count:O.length})}else{a.push("spacer-bottom-"+s);r.push({type:"spacer",isBottom:true})}return true});if(i){a.push("footer");r.push({type:"footer"})}return{keys:a,rows:r,stickyItems:n}}var Ae=a(316);var Ne=a(139);var Pe=a(128);var Re=new q["b"]("all_unreads");var Me={messageCount:y["b"].number,messageCountIsExact:y["b"].bool,selected:y["b"].bool.isRequired,markRead:y["b"].func.isRequired,featureReactAllUnreads:y["b"].bool.isRequired};var De={messageCount:0,messageCountIsExact:true};var xe=function(e){b()(t,e);function t(){d()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"getMessageCountText",value:function e(){var t=this.props,a=t.messageCountIsExact,r=t.messageCount,n=t.featureReactAllUnreads;if(!n)return null;if(!r)return"";if(a)return Re.t("{messageCount, plural, =1 {# message} other {# messages}}",{messageCount:r});return Re.t("{messageCount, plural, =1 {#+ message} other {#+ messages}}",{messageCount:r})}},{key:"renderButton",value:function e(t){return n.a.createElement(X["d"],{onClick:this.props.markRead,type:"outline",size:"small",className:"p-unreads_view__header__mark_read_button","data-qa":"all_unreads_header_mark_read",key:"MARK-READ"},t)}},{key:"renderContent",value:function e(){var t=this;var a=this.props.featureReactAllUnreads;if(!a)return null;return Re.rt('<span className="p-unreads_view__header__kb_instructions">Press <key>r</key> to </span><button>Mark as Read</button>',null,function(e){var a=e.text,r=e.tag;if("button"===r)return t.renderButton(a);if("key"===r)return n.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},a);return null})}},{key:"render",value:function e(){var t=W()("p-unreads_view__header__kb_instructions_container",{"p-unreads_view__header__kb_instructions_container--selected":this.props.selected});return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-unreads_view__header__message_count"},this.getMessageCountText()),n.a.createElement("span",{className:t},this.renderContent()))}}]);return t}(r["PureComponent"]);xe.displayName="HeaderDefault";xe.defaultProps=De;var Fe=xe;var Le=new q["b"]("all_unreads");var Be={featureReactAllUnreads:y["b"].bool.isRequired,channelId:y["b"].string.isRequired,channelType:y["b"].string.isRequired,latest:y["b"].string.isRequired,initialLastRead:y["b"].string.isRequired,collapsed:y["b"].bool.isRequired,messageCount:y["b"].number,messageCountIsExact:y["b"].bool,messageCountAfterLatest:y["b"].number,markedMsgCount:y["b"].number,totalUnreadCount:y["b"].number,markChannelLastRead:y["b"].func.isRequired,showNewerMessages:y["b"].func.isRequired,setPrimaryView:y["b"].func.isRequired,toggleCollapse:y["b"].func.isRequired,selected:y["b"].bool.isRequired,clogLinkClick:y["b"].func.isRequired};var Ue={messageCount:0,messageCountIsExact:true,messageCountAfterLatest:0,markedMsgCount:0,totalUnreadCount:0};var qe=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(a,["markRead","undoMarkRead","showNew","openChannel","toggleCollapse"]);return a}h()(t,[{key:"markRead",value:function e(){var t={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_READ",metadata:t});this.props.markChannelLastRead(this.props.channelId,this.props.latest,this.props.messageCount)}},{key:"undoMarkRead",value:function e(){var t={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_UNREAD",metadata:t});this.props.markChannelLastRead(this.props.channelId,this.props.initialLastRead)}},{key:"showNew",value:function e(){this.props.showNewerMessages(this.props.channelId,true)}},{key:"openChannel",value:function e(){this.props.setPrimaryView({id:this.props.channelId})}},{key:"toggleCollapse",value:function e(){this.props.toggleCollapse(this.props.channelId)}},{key:"renderUndo",value:function e(){var t=this.props,a=t.featureReactAllUnreads,r=t.markedMsgCount;if(!a)return null;var i=void 0;r&&(i=Le.t("{messageCount, plural, =1 {# message} other {# messages}} marked read",{messageCount:r}));return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-unreads_view__header__message_count"},i),n.a.createElement($["a"],{className:"p-unreads_view__header__undo_button",onClick:this.undoMarkRead,"data-qa":"all_unreads_header_undo"},Le.t("Undo")))}},{key:"renderNewMsgs",value:function e(t){var a=this.props,r=a.featureReactAllUnreads,i=a.messageCountAfterLatest,s=a.messageCountIsExact,o=a.messageCount;if(!r)return null;var l=void 0;l=s?Le.t("{messageCount} new {messageCount, plural, =1 {message} other {messages}}",{messageCount:i+o}):Le.t("New messages");return n.a.createElement($["a"],{onClick:t,className:"p-unreads_view__header__new_msgs_button","data-qa":"all_unreads_header_new_msgs"},l," ",n.a.createElement(ee["b"],{inline:true,size:"inherit",type:"circle-fill"}))}},{key:"renderDefault",value:function e(){var t=Object(_["pick"])(this.props,["messageCount","messageCountIsExact","selected","featureReactAllUnreads"]);return n.a.createElement(Fe,c()({},t,{markRead:this.markRead}))}},{key:"render",value:function e(){var t=this.props,a=t.featureReactAllUnreads,r=t.channelId,i=t.markedMsgCount,s=t.messageCount,o=t.messageCountAfterLatest,l=t.collapsed;if(!a)return null;var c=s>0;var u=o>0;var d=i>0;var p={EXPANDED:0,COLLAPSED:1,UNDO:2,SHOW_NEW:3};var h=p.EXPANDED;c||!d||u?!c&&u?h=p.SHOW_NEW:l&&(h=p.COLLAPSED):h=p.UNDO;var v=W()("p-unreads_view__header",{"p-unreads_view__header--was_marked":h===p.UNDO||h===p.SHOW_NEW,"p-unreads_view__header--collapsed":h===p.COLLAPSED});var m=l?"caret-right":"caret-down";var f=h===p.EXPANDED||h===p.COLLAPSED;return n.a.createElement("div",{className:v},n.a.createElement($["a"],{onClick:this.openChannel,className:"p-unreads_view__header__channel_name_link","data-qa":"all_unreads_header_channel_name"},n.a.createElement(Ne["a"],{channelId:r,className:"p-unreads_view__header__channel_name"})),f&&n.a.createElement(Pe["a"],{className:"p-unreads_view__header__collapse","data-qa":"all_unreads_header_toggle",onClick:this.toggleCollapse},n.a.createElement(ee["b"],{type:m})),h===p.UNDO&&this.renderUndo(),h===p.SHOW_NEW&&this.renderNewMsgs(this.showNew),h===p.COLLAPSED&&this.renderNewMsgs(this.toggleCollapse),h===p.EXPANDED&&this.renderDefault())}}]);return t}(r["Component"]);qe.displayName="Header";qe.defaultProps=Ue;var Ge={setPrimaryView:function e(){return Ae["a"].apply(void 0,arguments)}};var We=Object(g["connect"])(null,Ge)(qe);var He=a(87);var Ve=a(55);var Ke=a(1224);var ze=a(1092);var Ye=a(762);var Qe=a(925);var Je=a(926);var Ze=a(1093);var Xe=a(1066);var $e=a(1225);var et=a(4179);var tt=a(4184);function at(e){var t=e.msg;if(!Object(je["isThreadBroadcast"])(t))return null;return n.a.createElement(et["a"],{className:"c-message_kit__broadcast_footer",ts:t.ts,threadTs:t.thread_ts,channelId:t.channel})}at.displayName="BroadcastFooter";var rt=a(385);var nt=a(4182);var it={msg:y["b"].object.isRequired,className:y["b"].string,dispatchShowThreadIfThreadable:y["b"].func};var st={dispatchShowThreadIfThreadable:_["noop"],className:void 0};var ot=function(e){b()(t,e);function t(){d()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.dispatchShowThreadIfThreadable;var i=W()("c-message_kit__thread_replies",this.props.className);var s=a.channel;var o=a.thread_ts;var l=a.replies;var c=a.reply_count;var u=a.reply_users;var d=a.reply_users_count;var p=a.latest_reply;if(!s||!c)return null;return n.a.createElement(nt["a"],{channelId:s,threadTs:o,replies:l,replyCount:c,replyUsers:u,replyUsersCount:d,latestReply:p,showThreadIfThreadable:r,className:i})}}]);return t}(r["PureComponent"]);ot.displayName="ThreadReplies";ot.defaultProps=st;var lt=function e(t){return{dispatchShowThreadIfThreadable:function e(){return t(rt["showThreadIfThreadable"].apply(void 0,arguments))}}};var ct=Object(g["connect"])(null,lt)(ot);var ut=a(1353);var dt=a(922);var pt=a(1095);var ht=a(1215);var vt=a(1214);var mt=a(4181);var ft=a(4186);var bt={msg:y["b"].object,children:y["b"].node,theme:y["b"].oneOf(["light","dense"])};var gt={msg:y["b"].object,children:null,theme:"light"};var _t=function(e){b()(t,e);function t(){d()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.children,i=t.theme;if(!Object(je["isThreadBroadcast"])(a))return r;var s=W()("c-message_kit__broadcast_preamble",{"c-message_kit__broadcast_preamble--dense":"dense"===i});return n.a.createElement("div",{className:s},r,n.a.createElement(mt["a"],{ts:a.ts,threadTs:a.thread_ts,channelId:a.channel,className:"c-message_kit__broadcast_preamble__inner"}))}}]);return t}(r["PureComponent"]);_t.displayName="BroadcastPreamble";_t.defaultProps=gt;var yt=Object(g["connect"])(function(e){return{theme:Object(pe["a"])(e)}})(_t);var Ot=a(1347);var kt=a(1354);var Et=a(1355);var Ct=a(1356);var jt=new q["b"]("message_kit");var wt={msg:y["b"].object.isRequired,theme:y["b"].oneOf(["light","dense"]),adjacent:y["b"].bool,focused:y["b"].bool,actionsPosition:y["b"].oneOf(["above","inside","default"]),onBackgroundClick:y["b"].func,rollup:He["a"].Rollup()};var St={theme:"light",adjacent:false,focused:false,actionsPosition:void 0,onBackgroundClick:_["noop"],rollup:null};var It=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleBackgroundClick=a.handleBackgroundClick.bind(a);return a}h()(t,[{key:"getMessageBody",value:function e(t){var a=this.props.adjacent;return n.a.createElement(n.a.Fragment,null,!a&&n.a.createElement(yt,{msg:t},n.a.createElement(Qe["a"],{msg:t}),"\xa0\xa0",n.a.createElement(Je["a"],{msg:t,clickable:true},jt.t("Open in channel")),n.a.createElement("br",null)),this.renderContent(t),n.a.createElement(Ye["b"],{msg:t}),n.a.createElement(Ke["a"],{msg:t}),n.a.createElement($e["a"],{msg:t}),n.a.createElement(ct,{msg:t,className:"p-unreads_view__thread_replies"}),n.a.createElement(at,{msg:t}))}},{key:"getCompactMessageBody",value:function e(t){var a=this.props.adjacent;return n.a.createElement(Ct["a"],null,!a&&n.a.createElement(yt,{msg:t},n.a.createElement(Qe["a"],{msg:t,className:"p-unreads_view_sender--compact"}),"\xa0"),this.renderContent(t),n.a.createElement(Ye["b"],{msg:t}),n.a.createElement(Ke["a"],{msg:t}),n.a.createElement($e["a"],{msg:t}),n.a.createElement(ct,{msg:t,className:"p-unreads_view__thread_replies"}))}},{key:"getCompactGutter",value:function e(){var t=this.props,a=t.msg,r=t.theme,i=t.adjacent;var s="light"===r;var o=W()("p-unreads_view_compact_timestamp",{"p-unreads_view_compact_timestamp--light":s,"p-unreads_view_compact_timestamp--adjacent":i});return n.a.createElement("div",{className:o},n.a.createElement(Je["a"],{msg:a,meridiem:!(i&&s),clickable:true},jt.t("Open in channel")))}},{key:"handleBackgroundClick",value:function e(t){if(t.altKey){t.preventDefault();this.props.onBackgroundClick(this.props.msg)}}},{key:"renderContent",value:function e(t){var a=Ve["a"].all_unreads;return t.blocks?n.a.createElement(Xe["a"],{msg:t,blocksContainerContext:a}):n.a.createElement(Ze["a"],{msg:t,rollup:this.props.rollup})}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.theme,i=t.adjacent,s=t.focused,o=t.actionsPosition;var l=W()("p-unreads-view__message","c-message_kit__message");var c="dense"===r;var u=c?this.getCompactGutter():null;var d=i?this.getCompactGutter():n.a.createElement(ze["a"],{msg:a});var p=c?this.getCompactMessageBody(a):this.getMessageBody(a);return n.a.createElement(ut["a"],{msg:a},n.a.createElement(dt["a"],{msg:a,className:l,onClick:this.handleBackgroundClick},n.a.createElement(pt["a"],{"data-qa":"unreads_view_message_hover",hovered:s},n.a.createElement(ht["a"],{msg:a,showComment:true,showShare:true,messageContainerType:U["MESSAGE_CONTAINERS"].UNREAD_VIEW,position:o||(c||i?"above":"default")},n.a.createElement(Ot["a"],{msg:a},n.a.createElement(kt["a"],{msg:a,className:"p-unreads-view__message_label"},n.a.createElement(vt["a"],{light:d,compact:u},n.a.createElement(Et["a"],{msg:a},p))))))))}}]);return t}(r["PureComponent"]);It.displayName="Message";var Tt=It;It.defaultProps=St;var At=new q["b"]("all_unreads");var Nt=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}h()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.channelId,r=t.showNewerMessages;r(a)}},{key:"render",value:function e(){var t=this.props,a=t.count,r=t.featureReactAllUnreads;if(!r)return null;var i=At.t("{count, plural, =1 {# new message} other {# new messages}}",{count:a});return n.a.createElement($["a"],{className:"p-unreads_view__show_newer",onClick:this.onClick},i)}}]);return t}(r["PureComponent"]);Nt.displayName="ShowNewerButton";var Pt=Nt;Nt.defaultProps={featureReactAllUnreads:true};var Rt={markAllRead:y["b"].func.isRequired,featureReactAllUnreads:y["b"].bool.isRequired};var Mt=new q["b"]("all_unreads");function Dt(e){var t=e.markAllRead,a=e.featureReactAllUnreads;if(!a)return null;return n.a.createElement("div",{className:"p-unreads_view__footer"},n.a.createElement(X["d"],{onClick:t,type:"outline"},Mt.t("Mark All Messages Read")))}Dt.displayName="Footer";var xt=Dt;var Ft=new q["b"]("all_unreads");function Lt(e){var t=e.featureReactAllUnreads;if(!t)return null;return n.a.createElement("div",{className:"p-unreads_view__loading_more"},Ft.t("Loading more messages..."))}Lt.displayName="LoadingMore";var Bt=Lt;var Ut="UNREADS-VIEW";var qt=Object(ke["a"])(Tt);var Gt={showNewerMessages:y["b"].func.isRequired,markChannelLastRead:y["b"].func.isRequired,markAllRead:y["b"].func.isRequired,removeFrames:y["b"].func.isRequired,totalUnreadCount:y["b"].number.isRequired,frames:y["b"].arrayOf(y["b"].shape({channelId:y["b"].string.isRequired,start:y["b"].string.isRequired,end:y["b"].string.isRequired,initialLastRead:y["b"].string.isRequired,markedMsgCount:y["b"].number.isRequired,channelType:y["b"].string.isRequired,collapsed:y["b"].bool.isRequired,lastRead:y["b"].string.isRequired,latest:y["b"].string.isRequired,timestamps:y["b"].arrayOf(y["b"].string).isRequired,reachedEnd:y["b"].bool.isRequired,messages:y["b"].object,isMember:y["b"].bool})).isRequired,logger:y["b"].object.isRequired,clogLinkClick:y["b"].func.isRequired,theme:y["b"].oneOf(["dense","light"]).isRequired,featureReactAllUnreads:y["b"].bool.isRequired,fetchHistory:y["b"].func.isRequired,addMessagesFromHistory:y["b"].func.isRequired,setUnreadPoint:y["b"].func.isRequired,expandChannel:y["b"].func.isRequired,collapseChannel:y["b"].func.isRequired};var Wt=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(a,["renderRow","fetchPost","showNewerMessages","markAllRead","markChannelLastRead","toggleCollapse","handleMessageBackgroundClick","isFocusableItem","onMarkReadKeyCommand","onLeftKeyCommand","onRightKeyCommand","shouldIgnoreKeyEvent","clogClick","isItemAriaExpanded"]);a.layout=new Oe["a"]({ANCHOR_OFFSET:72});a.list=n.a.createRef();a.rows=[];a.loading=false;a.state={keyToFocus:null};return a}h()(t,[{key:"componentDidUpdate",value:function e(){this.layout.anchor&&0===this.layout.anchorOffset&&this.layout.setAnchor(false);var t=Object(_["map"])(this.props.frames.filter(function(e){return!e.isMember}),"channelId");var a=Object(_["map"])(this.props.frames.filter(function(e){return e.reachedEnd&&Object(_["last"])(e.timestamps)<=e.initialLastRead}),"channelId");var r=[].concat(ce()(t),ce()(a));if(r.length){this.props.logger.info("removing frames (non-member, empty):",t,a);this.props.removeFrames(r)}}},{key:"showNewerMessages",value:function e(t,a){var r=Object(_["find"])(this.props.frames,{channelId:t});var n=a&&r.lastRead;a&&this.maybeAnchorToHeader(t);this.props.showNewerMessages(t,r.latest,n)}},{key:"markAllRead",value:function e(){var t={};this.rows.filter(function(e){return"header"===e.type}).forEach(function(e){if(e.messageCountIsExact&&!e.messageCount)return;t[e.channelId]=e.end});this.props.markAllRead(t)}},{key:"getActiveRow",value:function e(){var t=this.props,a=t.logger,r=t.frames;var n=this.list.current&&this.list.current.getInitialActiveItem()||this.keys[0];if(!n){a.warn("No activeItem");return null}var i=this.keys.indexOf(n);var s=this.rows[i];if(!s||!s.channelId){a.warn("No valid row");return null}var o=s.channelId;var l=Object(_["find"])(r,{channelId:o});if(!l){a.warn("No frame for "+o);return null}return{row:s,frame:l}}},{key:"onMarkReadKeyCommand",value:function e(){var t=this.props,a=t.logger,r=t.frames;a.info("onMarkReadKeyCommand");var n=this.getActiveRow(),i=n.row,s=n.frame;if(!i||!s)return;if("header"!==i.type){a.info("Header not selected: "+i.type);return}var o=Object(_["filter"])(this.rows,{channelId:s.channelId,type:"message"}).length;if(!o){a.warn("No messages for "+s.channelId);return}this.markChannelLastRead(s.channelId,s.end,o);var l=r.filter(function(e){return e.start<e.end}).length;if(1===l)return;var c=r[1+r.indexOf(s)];c?this.setState(function(){return{keyToFocus:"header-"+c.channelId}}):this.setState(function(){return{keyToFocus:"header-"+s.channelId}})}},{key:"onLeftKeyCommand",value:function e(){var t=this.props.logger;t.info("onLeftKeyCommand");var a=this.getActiveRow(),r=a.row,n=a.frame;if(!r||!n)return;if("header"===r.type&&!n.collapsed){this.toggleCollapse(n.channelId);this.setState(function(){return{keyToFocus:"header-"+n.channelId}})}}},{key:"onRightKeyCommand",value:function e(){var t=this.props.logger;t.info("onRightKeyCommand");var a=this.getActiveRow(),r=a.row,n=a.frame;if(!r||!n)return;if("header"===r.type&&n.collapsed){this.toggleCollapse(n.channelId);this.setState(function(){return{keyToFocus:"header-"+n.channelId}})}}},{key:"shouldIgnoreKeyEvent",value:function e(t){if(Object(J["a"])(t.target))return true;if(t.target===document.body)return false;return!this.list.current||!this.list.current.contentNode||!this.list.current.contentNode.contains(t.target)}},{key:"maybeAnchorToHeader",value:function e(t){if(!this.list.current)return;var a="header-"+t;var r=this.list.current.getTop(a)-this.list.current.getScrollTop();if(r>0)return;this.layout.setAnchor(a,0)}},{key:"markChannelLastRead",value:function e(t,a,r){this.maybeAnchorToHeader(t);this.props.markChannelLastRead(t,a,r)}},{key:"clogClick",value:function e(t,a){this.props.clogLinkClick({event:t,metadata:a})}},{key:"toggleCollapse",value:function e(t){var a=Object(_["find"])(this.props.frames,{channelId:t});if(!a)return;var r={channel_id:t,channel_type:a.channelType};this.maybeAnchorToHeader(t);if(a.collapsed){this.props.expandChannel(t);this.props.showNewerMessages(t,a.latest);this.clogClick("UNREADS_EXPAND_GROUP",r)}else{this.props.collapseChannel(t);this.clogClick("UNREADS_COLLAPSE_GROUP",r)}}},{key:"handleMessageBackgroundClick",value:function e(t){var a=t.channel,r=t.ts;this.props.setUnreadPoint({channelId:a,unreadTs:r})}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.rows[a];return["header","message","show-newer","footer"].includes(r.type)}},{key:"isItemAriaExpanded",value:function e(t,a){var r=this.rows[a];if(r&&"header"===r.type)return!r.collapsed;return}},{key:"scrollToTop",value:function e(){if(!this.list.current)return;this.list.current.scrollToOffset(0)}},{key:"renderRow",value:function e(t,a){var r=a.hasFocus;var i=this.rows[t];var s=this.list.current&&this.list.current.getInitialActiveItem();switch(i.type){case"header":return n.a.createElement(We,{featureReactAllUnreads:true,channelId:i.channelId,channelType:i.channelType,messageCount:i.messageCount,messageCountAfterLatest:i.messageCountAfterLatest,messageCountIsExact:i.messageCountIsExact,markedMsgCount:i.markedMsgCount,collapsed:i.collapsed,latest:i.end,initialLastRead:i.initialLastRead,totalUnreadCount:this.props.totalUnreadCount,markChannelLastRead:this.markChannelLastRead,showNewerMessages:this.showNewerMessages,toggleCollapse:this.toggleCollapse,selected:s==="header-"+i.channelId,clogLinkClick:this.props.clogLinkClick});case"message":return n.a.createElement(qt,{channelId:i.channelId,ts:i.ts,prevTs:i.prevTs,actionsPosition:i.isFirstMessage?"default":void 0,onBackgroundClick:this.handleMessageBackgroundClick,focused:r,theme:this.props.theme,rollup:i.rollup});case"loading":return n.a.createElement(Bt,{featureReactAllUnreads:true});case"day-divider":var o=+i.dayTs;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Ee["b"],{date:o}),n.a.createElement(Ee["a"],{date:o,isUnread:i.unread}));case"unread-divider":return n.a.createElement(Ce["a"],null);case"show-newer":return n.a.createElement(Pt,{count:i.count,channelId:i.channelId,showNewerMessages:this.showNewerMessages});case"spacer":return n.a.createElement("div",{className:W()("p-unreads_view__spacer",{"p-unreads_view__spacer--bottom":!!i.isBottom})});case"footer":return n.a.createElement(xt,{markAllRead:this.markAllRead,featureReactAllUnreads:true});default:this.props.logger.error("Unhandled row type:",i.type);return i.type}}},{key:"fetchPost",value:function e(){var t=this;var a=Object(_["last"])(this.rows);if(!a)return;if("loading"!==a.type)return;if(this.loading)return;this.loading=true;var r=a.channelId,n=a.oldest;this.props.logger.info("fetchPost",r,n);this.props.fetchHistory({channelId:r,oldest:n,reason:"unreads-view/fetchPost"}).then(function(e){var a=e.msgs,i=e.hasMore,s=e.deleted;t.props.addMessagesFromHistory({channelId:r,oldest:n,msgs:a,hasMore:i,deleted:s})}).finally(function(){t.loading=false})}},{key:"render",value:function e(){var t=this;var a=this.state.keyToFocus;var r=Te(this.props.frames,this.props.currentUserId),i=r.keys,s=r.rows,o=r.stickyItems;this.rows=s;this.keys=i;var l=[{keys:["r"],handler:this.onMarkReadKeyCommand,filter:this.shouldIgnoreKeyEvent},{keys:["left"],handler:this.onLeftKeyCommand,filter:this.shouldIgnoreKeyEvent},{keys:["right"],handler:this.onRightKeyCommand,filter:this.shouldIgnoreKeyEvent}];return n.a.createElement(ue["a"],null,function(e){var r=e.width,s=e.height;return n.a.createElement(ye["a"],{ref:t.list,layout:t.layout,width:r,height:s,keys:i,rowRenderer:t.renderRow,isFocusableItem:t.isFocusableItem,loadAround:t.fetchPost,loadPost:t.fetchPost,stickyItems:o,stickyZIndex:202,keyCommands:l,activeItem:a,isItemAriaExpanded:t.isItemAriaExpanded})})}}]);return t}(L["a"]);Wt.displayName="UnreadsList";Wt.propTypes=Gt;function Ht(e,t){var a=Object(B["a"])({label:Ut,state:e});var r=Object(pe["a"])(e);var n=Object(V["e"])(e);var s=t.frames.map(function(t){var a=Object(k["d"])(e,t.channelId);var r=Object(P["getLastReadTs"])(a);var i=Object(E["getTimestampsByChannelId"])(e,a.id);var s=Object(P["getLatestTs"])(a,i.timestamps);var o=Object(E["getTimestampsByChannelId"])(e,a.id,t.start);var l=o.timestamps;var u=o.end;var d=!!o.reachedEnd;var p=Object(C["b"])(e,a.id);var h=n.includes(t.channelId);var v=Object(P["isMemberOfChannel"])(a);return c()({},t,{lastRead:r,latest:s,timestamps:l,sliceEnd:u,reachedEnd:d,messages:p,collapsed:h,isMember:v})});return{logger:a,theme:r,frames:s,currentUserId:Object(i["getCurrentUserId"])(e),featureReactAllUnreads:Object(i["isFeatureEnabled"])(e,"feature_react_all_unreads")}}var Vt={fetchHistory:function e(){return ve["b"].apply(void 0,arguments)},addMessagesFromHistory:function e(){return he["a"].apply(void 0,arguments)},setUnreadPoint:function e(){return de["x"].apply(void 0,arguments)},expandChannel:function e(){return ge.apply(void 0,arguments)},collapseChannel:function e(){return _e.apply(void 0,arguments)}};var Kt=Object(g["connect"])(Ht,Vt,null,{withRef:true})(Wt);function zt(e){var t=e.channels,a=e.allUnreadsSortOrder,r=e.currentUserId;if("oldest"===a)return Zt(t,r);if("priority"===a)return Qt(t);if("newest"===a)return Jt(t);return Yt(t)}function Yt(e){var t=ra(e),a=t.starred,r=t.notStarred;return ea(a).concat(ea(r))}function Qt(e){var t=ra(e),a=t.starred,r=t.notStarred;return Xt(a).concat(Xt(r))}function Jt(e){return Object(_["reverse"])(Object(_["sortBy"])(e,"latest"))}function Zt(e,t){var a=Object(_["memoize"])(function(e){var a=e.lastRead,r=e.messages,n=e.oldestSliceTimestamps,i=e.createdTime;var s=false;var o=Object(_["find"])(n,function(e){if(e<=a)return false;var n=r[e];if(!n){s=true;return false}return Object(je["isMessageUnread"])(n,a,t)});if(o&&!s)return o;if("0000000000.000000"===a)return i+".000000";return a});return Object(_["sortBy"])(e,a)}function Xt(e){var t=na(e),a=t.publicChannels,r=t.privateChannels,n=t.ims,i=t.mpims;var s=a.concat(r);return $t(s).concat(aa(n)).concat(aa(i))}function $t(e){var t=ia(e),a=t.hasMentions,r=t.noMentions;return aa(a).concat(aa(r))}function ea(e){var t=na(e),a=t.publicChannels,r=t.privateChannels,n=t.ims,i=t.mpims;var s=ta(a.concat(r));var o=ta(n);var l=ta(i);return s.concat(o).concat(l)}function ta(e){return Object(_["clone"])(e).sort(function(e,t){return Object(q["p"])(e.displayName,t.displayName)})}function aa(e){return Object(_["clone"])(e).sort(function(e,t){if(e.priority===t.priority)return Object(q["p"])(e.displayName,t.displayName);return t.priority-e.priority})}function ra(e){var t=Object(_["groupBy"])(e,"isStarred");var a=t.true||[];var r=t.false||[];return{starred:a,notStarred:r}}function na(e){var t=Object(_["groupBy"])(e,"channelType");var a=t.channel||[];var r=t.private||[];var n=t.im||[];var i=t.mpim||[];return{publicChannels:a,privateChannels:r,ims:n,mpims:i}}function ia(e){var t=Object(_["groupBy"])(e,function(e){return e.unreadHighlightCnt>0});var a=t.true||[];var r=t.false||[];return{hasMentions:a,noMentions:r}}var sa=zt;function oa(e){var t=void 0;var a=void 0;var r=void 0;if(Object(i["isFeatureEnabled"])(e,"feature_incremental_unread_counts")){t=Object(o["getCountsPerChannel"])(e);a=Object(_["keys"])(t);r=Object(o["hasCountsPerChannelChanged"])(e)}else{a=Object(z["i"])();r=Object(z["j"])();t={};a.forEach(function(a){var r=Object(k["d"])(e,a);t[r.id]={unreadCnt:Object(P["getUnreadCount"])(r),unreadHighlightCnt:Object(P["getUnreadHighlightCount"])(r)}})}return{countsPerChannel:t,unreadChannelIds:a,unreadChannelsAreKnown:r}}var la=oa;var ca={newUnreadMsgCount:y["b"].number.isRequired,setNewUnreadMsgCount:y["b"].func.isRequired,refreshAllUnreads:y["b"].func.isRequired};var ua=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(a,["refreshFromKeyPress"]);return a}h()(t,[{key:"componentDidMount",value:function e(){this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}},{key:"componentDidUpdate",value:function e(t){t.newUnreadMsgCount!==this.props.newUnreadMsgCount&&this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}},{key:"componentWillUnmount",value:function e(){this.props.setNewUnreadMsgCount(0)}},{key:"refreshFromKeyPress",value:function e(){this.props.newUnreadMsgCount>0&&this.props.refreshAllUnreads()}},{key:"render",value:function e(){return null}}]);return t}(r["Component"]);ua.displayName="NewMessagesUpdater";function da(e,t){var a=t.frames.map(function(e){return e.channelId});var r=la(e),n=r.countsPerChannel;var i=Object(_["filter"])(n,function(e,t){return!a.includes(t)});var s=Object(_["sum"])(Object(_["map"])(i,"unreadCnt"));return{newUnreadMsgCount:s}}var pa=Object(g["connect"])(da)(ua);var ha=a(4188);var va=new q["b"]("all_unreads");var ma="UNREADS-VIEW";var fa={channels:y["b"].arrayOf(y["b"].shape({id:y["b"].string.isRequired,lastRead:y["b"].string.isRequired,latest:y["b"].string.isRequired,displayName:y["b"].string.isRequired,channelType:y["b"].string.isRequired,isStarred:y["b"].bool.isRequired,priority:y["b"].number.isRequired,unreadHighlightCnt:y["b"].number.isRequired,messages:y["b"].object.isRequired,oldestSliceTimestamps:y["b"].arrayOf(y["b"].string).isRequired,createdTime:y["b"].number.isRequired})).isRequired,logger:y["b"].object.isRequired,clogger:y["b"].object,allUnreadsSortOrder:y["b"].string.isRequired,currentUserId:y["b"].string.isRequired,featureReactAllUnreads:y["b"].bool.isRequired,refreshId:y["b"].number.isRequired,totalUnreadCount:y["b"].number.isRequired,unreadChannelsAreKnown:y["b"].bool.isRequired,markLastRead:y["b"].func.isRequired,setNewUnreadMsgCount:y["b"].func.isRequired};var ba={clogger:{track:_["noop"]}};var ga=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(a,["showNewerMessages","markChannelLastRead","markAllRead","undoMarkAllRead","refreshAllUnreads","removeFrames","clogUnreadsEvent"]);a.state=a.computeInitialState();a.unreadsEventSeqId=0;a.initializedTime=Date.now();a.listRef=n.a.createRef();return a}h()(t,[{key:"componentDidMount",value:function e(){this.clogUnreadsEvent({event:"UNREADS_OPEN",metadata:{}});this.incrementTrackingSeqId()}},{key:"componentDidUpdate",value:function e(t){(t.allUnreadsSortOrder!==this.props.allUnreadsSortOrder||t.refreshId<this.props.refreshId||!t.unreadChannelsAreKnown&&this.props.unreadChannelsAreKnown)&&this.refreshAllUnreads()}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{errored:true}});this.props.logger.error("Unreads view componentDidCatch","unreads_view_did_catch",t)}},{key:"componentWillUnmount",value:function e(){var t={unreads_event_seq_id:this.unreadsEventSeqId,unreads_elapsed_time:Date.now()-this.initializedTime};this.clogUnreadsEvent({event:"UNREADS_CLOSE",metadata:t})}},{key:"incrementTrackingSeqId",value:function e(){this.unreadsEventSeqId+=1}},{key:"clogUnreadsEvent",value:function e(t){var a=t.event,r=t.metadata;var n=this.props.clogger;n.track(a,c()({is_unreads_view:1},r))}},{key:"computeInitialState",value:function e(){var t=this.props,a=t.channels,r=t.allUnreadsSortOrder,n=t.currentUserId;var i=sa({channels:a,allUnreadsSortOrder:r,currentUserId:n});var s=i.map(function(e){var t=e.id,a=e.lastRead,r=e.latest,n=e.channelType;return{channelId:t,start:a,end:r,initialLastRead:a,markedMsgCount:0,channelType:n||""}});return{frames:s,showMarkAllUndo:false,markedChannels:[],errored:false}}},{key:"showNewerMessages",value:function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setState(function(e){var n=e.frames.map(function(e){if(e.channelId!==t)return e;return c()({},e,{initialLastRead:r||e.initialLastRead,start:r||e.start,end:a})});return{frames:n}})}},{key:"markChannelLastRead",value:function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.props.logger.info("Marking "+t+" to "+a);this.props.markLastRead({id:t,ts:a,immediate:true,reason:"unreads-view/markChannelLastRead"});this.setState(function(e){var n=e.frames.map(function(e){if(e.channelId!==t)return e;return c()({},e,{start:a,markedMsgCount:r})});return{frames:n}})}},{key:"markAllRead",value:function e(t){this.props.logger.info("Marking all: "+JSON.stringify(t));this.props.markManyLastRead({markers:t,reason:"unreads-view/markAllRead"});var a={unread_count:this.props.totalUnreadCount};this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_READ",metadata:a});this.setState(function(e){var a=e.frames.map(function(e){return c()({},e,{start:e.end})});return c()({},e,{frames:a,showMarkAllUndo:true,markedChannels:Object(_["keys"])(t)})})}},{key:"undoMarkAllRead",value:function e(){this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_UNREAD",metadata:{}});this.setState(function(e,t){var a=e.frames.map(function(t){if(!e.markedChannels.includes(t.channelId))return t;return c()({},t,{start:t.initialLastRead})});var r={};a.forEach(function(t){if(!e.markedChannels.includes(t.channelId))return;if(t.initialLastRead>=t.end)return;r[t.channelId]=t.initialLastRead});t.logger.info("Undoing mark all: "+JSON.stringify(r));t.markManyLastRead({markers:r,reason:"unreads-view/undoMarkAllRead"});return c()({},e,{frames:a,showMarkAllUndo:false,markedChannels:[]})})}},{key:"refreshAllUnreads",value:function e(){var t=this;this.props.logger.info("Refreshing");this.setState(function(){return t.computeInitialState()},function(){t.listRef&&t.listRef.current&&t.listRef.current.getWrappedInstance()&&t.listRef.current.getWrappedInstance().scrollToTop()});this.props.setNewUnreadMsgCount(0)}},{key:"removeFrames",value:function e(t){this.setState(function(e){return c()({},e,{frames:e.frames.filter(function(e){return!t.includes(e.channelId)})})})}},{key:"renderTopBanners",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-unreads_view__top_banners"},n.a.createElement(R["a"],null)),n.a.createElement(F["a"],null))}},{key:"render",value:function e(){if(!this.props.featureReactAllUnreads){this.props.logger.error("Tried rendering React All Unreads with the feature flag off");return null}if(!this.props.unreadChannelsAreKnown)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement(M["a"],null));var t=this.state,a=t.showMarkAllUndo,i=t.errored;if(i&&this.props.featureReactAllUnreads)return n.a.createElement("div",{className:"p-unreads_view"},this.renderTopBanners(),n.a.createElement(D["a"],{tryAgain:this.refreshAllUnreads,"data-qa":"unreads_view_error"},va.t("Something\u2019s fishy! Slack can\u2019t seem to load your unread messages.")," ",n.a.createElement("br",null),va.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text;return n.a.createElement(A["a"],{href:"https://slack.com/help/contact"},t)})));var s=n.a.createElement(pa,{frames:this.state.frames,setNewUnreadMsgCount:this.props.setNewUnreadMsgCount,refreshAllUnreads:this.refreshAllUnreads});var o=!this.state.frames.some(function(e){return e.start<e.end});var l=n.a.createElement(oe,{visible:o,showUndo:a,undoMarkAllRead:this.undoMarkAllRead,refreshAllUnreads:this.refreshAllUnreads});var c=n.a.createElement(x["a"],{id:U["MESSAGE_CONTAINERS"].UNREAD_VIEW},n.a.createElement("div",{className:"p-unreads_view"},n.a.createElement(Kt,{ref:this.listRef,frames:this.state.frames,showNewerMessages:this.showNewerMessages,markChannelLastRead:this.markChannelLastRead,markAllRead:this.markAllRead,removeFrames:this.removeFrames,totalUnreadCount:this.props.totalUnreadCount,clogLinkClick:this.clogUnreadsEvent})));return n.a.createElement(r["Fragment"],null,this.renderTopBanners(),l,!o&&c,!o&&s)}}]);return t}(L["a"]);ga.displayName="UnreadsView";ga.propTypes=fa;ga.defaultProps=ba;var _a=ga;function ya(e){var t=Object(B["a"])({label:ma,state:e});var a=Object(O["a"])({state:e});var r=la(e),n=r.countsPerChannel,s=r.unreadChannelIds,o=r.unreadChannelsAreKnown;var l=Object(_["sum"])(Object(_["map"])(n,"unreadCnt"));var c=s.map(function(t){return Object(k["d"])(e,t)}).map(function(t){var a=Object(P["getLastReadTs"])(t);var r=Object(E["getTimestampsByChannelId"])(e,t.id);var i=Object(P["getLatestTs"])(t,r.timestamps);var s=Object(E["getTimestampsByChannelId"])(e,t.id,a);var o=Object(C["b"])(e,t.id)||{};return{id:t.id,lastRead:a,latest:i,displayName:Object(P["getDisplayNameForChannel"])(e,t,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}),channelType:Object(P["getChannelType"])(t),isStarred:Object(P["isStarred"])(t)||false,priority:Object(P["getPriority"])(t)||0,unreadHighlightCnt:n[t.id].unreadHighlightCnt||0,messages:o,oldestSliceTimestamps:s&&s.timestamps||[],createdTime:Object(P["getChannelCreatedTime"])(t)}});return{featureReactAllUnreads:Object(i["isFeatureEnabled"])(e,"feature_react_all_unreads"),logger:t,clogger:a,channels:c,allUnreadsSortOrder:Object(N["a"])(e),currentUserId:Object(i["getCurrentUserId"])(e),refreshId:S(e),totalUnreadCount:l,unreadChannelsAreKnown:o}}var Oa={markLastRead:function e(){return T["b"].apply(void 0,arguments)},markManyLastRead:function e(){return T["c"].apply(void 0,arguments)},setNewUnreadMsgCount:function e(){return I["c"].apply(void 0,arguments)}};var ka=Object(g["connect"])(ya,Oa)(ga);var Ea=ka;var Ca=a(132);var ja=a(35);var wa=a(31);var Sa=a(66);var Ia=new q["b"]("all_unreads");var Ta={newUnreadMsgCount:y["b"].number,incrementRefreshId:y["b"].func,featureReactAllUnreads:y["b"].bool};var Aa={newUnreadMsgCount:0,incrementRefreshId:_["noop"],featureReactAllUnreads:false};var Na=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.refreshMessages=a.refreshMessages.bind(a);return a}h()(t,[{key:"refreshMessages",value:function e(){this.props.incrementRefreshId()}},{key:"render",value:function e(){var t=this.props,a=t.newUnreadMsgCount,r=t.featureReactAllUnreads;if(a<1||!r)return null;var i=Ia.t("{newUnreadMsgCount, plural, =1 {# new message} other {# new messages}}",{newUnreadMsgCount:a});return n.a.createElement("div",{className:"p-classic_nav__channel_header__refresh_button"},n.a.createElement(X["d"],{type:"outline",onClick:this.refreshMessages},n.a.createElement(ee["b"],{inline:true,size:"inherit",type:"sync",className:"p-classic_nav__channel_header__refresh_button_icon"}),i))}}]);return t}(r["Component"]);Na.displayName="RefreshUnreadMessagesButton";Na.defaultProps=Aa;var Pa=function e(t){return{newUnreadMsgCount:w(t),featureReactAllUnreads:Object(i["isFeatureEnabled"])(t,"feature_react_all_unreads")}};var Ra={incrementRefreshId:function e(){return I["a"].apply(void 0,arguments)}};var Ma=Object(g["connect"])(Pa,Ra)(Na);var Da=a(4190);var xa=new q["b"]("all_unreads");var Fa={className:y["b"].string,featureReactAllUnreads:y["b"].bool,allUnreadsSortOrder:y["b"].string.isRequired,teamIsPaid:y["b"].bool.isRequired,setUserPrefByApi:y["b"].func.isRequired};var La={className:void 0,featureReactAllUnreads:false};var Ba=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderMenu=a.renderMenu.bind(a);return a}h()(t,[{key:"onSortSelected",value:function e(t){this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:t})}},{key:"renderMenu",value:function e(t){var a=this;var r=this.props,i=r.featureReactAllUnreads,s=r.teamIsPaid;if(!i)return null;var o=function e(t,r){if(!s&&"priority"===t)return null;return n.a.createElement(Sa["b"],{key:t,label:r,onSelected:function e(){return a.onSortSelected(t)}})};var l=[{value:"alphabetical",label:xa.t("Alphabetically")},{value:"priority",label:xa.t("Scientifically")},{value:"newest",label:xa.t("Newest")},{value:"oldest",label:xa.t("Oldest")}];var c=xa.t("Sort...");return n.a.createElement(Sa["f"],t,n.a.createElement(Sa["c"],{label:c}),l.map(function(e){var t=e.value,a=e.label;return o(t,a)}))}},{key:"renderSortingMenuTrigger",value:function e(){var t=this.props,a=t.featureReactAllUnreads,r=t.allUnreadsSortOrder;if(!a)return null;var i="";i="alphabetical"===r?xa.t("Sorted alphabetically"):"priority"===r?xa.t("Sorted scientifically"):"newest"===r?xa.t("Sorted by newest channel"):xa.t("Sorted by oldest channel");return n.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},n.a.createElement(Sa["e"],{renderMenu:this.renderMenu,position:"bottom-left"},n.a.createElement(Pe["a"],null,n.a.createElement("span",null,i),n.a.createElement(ee["b"],{type:"chevron-down",className:"align_top"}))))}},{key:"render",value:function e(){var t=this.props,a=t.featureReactAllUnreads,r=t.className;if(!a)return null;var i=W()("p-classic_nav__channel_header__title","p-classic_nav__no_drag");return n.a.createElement("div",{className:r},n.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},n.a.createElement("div",{className:i},xa.t("All Unreads")),this.renderSortingMenuTrigger()),n.a.createElement(Ma,null))}}]);return t}(r["Component"]);Ba.displayName="AllUnreadsHeader";Ba.defaultProps=La;var Ua=function e(t){return{featureReactAllUnreads:Object(i["isFeatureEnabled"])(t,"feature_react_all_unreads"),allUnreadsSortOrder:Object(N["a"])(t),teamIsPaid:Object(wa["isPaidTeam"])(Object(ja["d"])(t))}};var qa={setUserPrefByApi:function e(){return Ca["c"].apply(void 0,arguments)}};var Ga=Object(g["connect"])(Ua,qa)(Ba);a.d(t,"a",function(){return Va});var Wa=new q["b"]("channel_sidebar");var Ha={Pexample:{label:function e(){return"Example Page"},view:function e(){return n.a.createElement("div",{className:"margin_100"},"Hi! This is an example page.")},sidebar:{icon:"small-quote"}},Punreads:{label:function e(){return Wa.t("All Unreads")},header:function e(t){return n.a.createElement(Ga,t)},view:function e(){return n.a.createElement("div",{className:"p-workspace__primary_view_body"},n.a.createElement(Ea,null))},sidebar:{icon:"list",isBold:function e(t){return Object(i["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(o["hasUnreadChannels"])(t):Object(s["hasUnreads"])(t)}}}};function Va(e){return Ha[e]||{}}},,function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(13);var s=a(2);var o=a.n(s);var l=a(45);var c=a(12);var u=a(548);var d=a(1541);var p=a(67);var h=a(1796);var v=a(441);var m=a(199);var f=a(24);var b=a(23);var g=a(35);var _=a(19);var y=a(85);var O=a(34);var k=a(423);var E=a(329);var C=a(516);var j=a(1797);var w=a(432);var S=a(358);var I=a(4);var T=a(234);var A=a(11);var N=a(41);var P=a(77);var R=a(360);var M=a(1339);var D=a(1731);var x=a(181);var F=a(5);var L=a.n(F);var B=a(58);var U=a.n(B);var q=a(6);var G=a.n(q);var W=a(7);var H=a.n(W);var V=a(8);var K=a.n(V);var z=a(9);var Y=a.n(z);var Q=a(0);var J=a(1);var Z=a.n(J);var X=a(16);var $=a.n(X);var ee=a(577);var te=a(511);var ae=a(711);var re=a(1798);var ne=a(1698);var ie=a(87);var se=a(39);var oe=a(706);var le=a(339);var ce=a(579);var ue=a(220);var de=a(773);var pe=a(245);var he=a(10);var ve=a(1799);var me=a(1342);var fe=a(428);var be=a(168);var ge=a(1801);var _e=a(28);var ye=a(431);var Oe=a(853);var ke=a(216);var Ee=a(1834);var Ce=a(141);var je=a(50);var we=a(438);var Se=a(928);var Ie=a(1220);var Te=a(1802);var Ae=a(22);var Ne=a(800);var Pe=a(55);var Re=a(762);var Me=a(1774);var De=a(923);var xe=a(4182);var Fe=a(919);var Le=a(1777);var Be=a(1775);var Ue=a(1825);var qe=a(4181);var Ge=a(4179);var We=a(1803);var He=a(1835);var Ve=a(1833);var Ke=a(100);var ze=a(1804);var Ye=a(1805);var Qe=a(430);var Je={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled"};var Ze={isPinned:Q["b"].bool,isStarred:Q["b"].bool,isEphemeral:Q["b"].bool,isCustomResponse:Q["b"].bool,isSliHighlight:Q["b"].bool,isSelfIm:Q["b"].bool,isSlackbotIm:Q["b"].bool,primaryType:Q["b"].oneOf(["ephemeral","custom_response","pinned","starred","sli_highlight"]),sliHighlight:Q["b"].shape({loading:Q["b"].bool,isHighlight:Q["b"].bool,feedbackOptions:Q["b"].object,justification:Q["b"].string,feedback:Q["b"].string}),isHovered:Q["b"].bool,channelId:Q["b"].string,ts:Q["b"].string,currentUserId:Q["b"].string,pinnedByMemberId:Q["b"].string,featureSonicInputs:Q["b"].bool.isRequired,showStarredItemsList:Q["b"].func};var Xe={isPinned:false,isStarred:false,isEphemeral:false,isCustomResponse:false,isSliHighlight:false,isSelfIm:false,isSlackbotIm:false,primaryType:void 0,sliHighlight:void 0,isHovered:false,channelId:void 0,ts:void 0,currentUserId:void 0,pinnedByMemberId:void 0,showStarredItemsList:s["noop"]};var $e=function(e){Y()(t,e);function t(e){G()(this,t);var a=K()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderHighlight=a.renderHighlight.bind(a);a.renderStarButton=a.renderStarButton.bind(a);return a}H()(t,[{key:"renderHighlight",value:function e(){var t=this.props,a=t.sliHighlight,r=t.channelId,n=t.ts,i=t.isHovered;if(!Object(E["shouldShowHighlightsLabel"])(a))return null;return Z.a.createElement(Ye["a"],{channelId:r,ts:n,isHovered:i,sliHighlight:a})}},{key:"renderPinnedBy",value:function e(t){return Z.a.createElement(Qe["a"],{id:t,className:"c-message__label_link"})}},{key:"renderStarButton",value:function e(t){var a=t.text;return Z.a.createElement(_e["c"],{onClick:this.props.showStarredItemsList,className:"c-message__label_button"},a)}},{key:"render",value:function e(){var t=this.props,a=t.primaryType,r=t.isPinned,n=t.isStarred,i=t.isEphemeral,s=t.isCustomResponse,o=t.isSliHighlight,l=t.isSelfIm,c=t.isSlackbotIm,u=t.currentUserId,d=t.pinnedByMemberId,p=t.featureSonicInputs;var h=Object(ze["a"])({isPinned:r,isStarred:n,isEphemeral:i,isCustomResponse:s,isSliHighlight:o,isSelfIm:l,isSlackbotIm:c,currentUserId:u,pinnedBy:d,renderHighlight:this.renderHighlight,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton});if(!h)return null;var v=Je[a];var m=$()("c-message__label__gutter",{"c-message__label__gutter--feature_sonic_inputs":p});return Z.a.createElement("div",{className:"c-message__label"},Z.a.createElement("div",{className:m},v&&Z.a.createElement(Ae["b"],{type:v,className:"c-message__label__icon",size:"inherit",inline:true})),Z.a.createElement("div",{className:"c-message__label__text"},h))}}]);return t}(J["PureComponent"]);$e.displayName="MessageLabel";$e.defaultProps=Xe;var et=function e(t){return{featureSonicInputs:Object(I["isFeatureEnabled"])(t,"feature_sonic_inputs")}};var tt=function e(t){return{showStarredItemsList:function e(){return t(Ke["k"].apply(void 0,arguments))}}};var at=Object(i["connect"])(et,tt)($e);var rt=a(3200);var nt=new he["b"]("message");var it=200;var st=20;var ot=10;var lt="theme_install_button";var ct=1541628e3;var ut={quote:true,pre:true};var dt={logger:Q["b"].object,message:Q["b"].object,ts:Q["b"].string,messageNotFound:Q["b"].bool,channelId:Q["b"].string,alertType:Q["b"].string,subtype:Q["b"].string,text:Q["b"].string,noSpecials:Q["b"].bool,theme:Q["b"].oneOf(["dense","light"]),userId:Q["b"].string,botId:Q["b"].string,appId:Q["b"].string,username:Q["b"].string,hasAdHocSender:Q["b"].bool,reactionKey:Q["b"].string,reactionKeyForInitialFileComment:Q["b"].string,replies:Q["b"].arrayOf(Q["b"].shape({ts:Q["b"].string,user:Q["b"].string})),replyCount:Q["b"].number,replyUsers:Q["b"].arrayOf(Q["b"].string),replyUsersCount:Q["b"].number,latestReply:Q["b"].string,threadsEverythingPref:Q["b"].bool,expandInlineImgsPref:Q["b"].bool,expandNonMediaAttachmentsPref:Q["b"].bool,threadTs:Q["b"].string,attachments:Q["b"].arrayOf(Q["b"].shape({color:Q["b"].string,fallback:Q["b"].string})),fileId:Q["b"].string,fileIds:Q["b"].arrayOf(Q["b"].string),comment:Q["b"].shape({id:Q["b"].string,user:Q["b"].string,comment:Q["b"].string,is_starred:Q["b"].bool}),isUpload:Q["b"].bool,showUser:Q["b"].bool,isFileFollowup:Q["b"].bool,isEditing:Q["b"].bool,isHovered:Q["b"].bool,maybeStartEditingMessage:Q["b"].func,edited:Q["b"].shape({ts:Q["b"].string,user:Q["b"].string}),isLast:Q["b"].bool,rollup:ie["a"].Rollup(),logMessage:Q["b"].func,setUnreadPoint:Q["b"].func,isStarred:Q["b"].bool,isStandalone:Q["b"].bool,isPinned:Q["b"].bool,currentUserId:Q["b"].string,pinnedByMemberId:Q["b"].string,sliHighlight:Q["b"].shape({loading:Q["b"].bool,isHighlight:Q["b"].bool,feedbackOptions:Q["b"].object,justification:Q["b"].string,feedback:Q["b"].string}),isEphemeral:Q["b"].bool,isRichTextMessage:Q["b"].bool,isDeleting:Q["b"].bool,icons:Q["b"].shape({emoji:Q["b"].string}),botProfile:Q["b"].object,slackbotFeels:Q["b"].string,fadeAwayHighlight:Q["b"].bool,doneHighlighting:Q["b"].func,isUnprocessed:Q["b"].bool,showResend:Q["b"].bool,showCancel:Q["b"].bool,sourceTeamId:Q["b"].string,resendMsg:Q["b"].func,removeMsg:Q["b"].func,shouldJumpToTimestamp:Q["b"].bool,isSelfIm:Q["b"].bool,isSlackbotIm:Q["b"].bool,isEKMDeniedMessage:Q["b"].bool,isEKMError:Q["b"].bool,teamDomain:Q["b"].string,featureTinyspeck:Q["b"].bool.isRequired,featureFileThreads:Q["b"].bool.isRequired,featureHideUnfurlUrls:Q["b"].bool.isRequired,featureAttachmentsV2:Q["b"].bool,useGlobalNav:Q["b"].bool,renderFileThread:Q["b"].bool,channelSessionId:Q["b"].string,previousMessageIsPinned:Q["b"].bool,previousMessageIsEphemeral:Q["b"].bool,previousMessageIsStarred:Q["b"].bool,previousMessageSubtype:Q["b"].string,previousMessageSliHighlight:Q["b"].object,previousMessagePinnedByMemberId:Q["b"].string,renderActions:Q["b"].bool,renderActionsOffscreen:Q["b"].bool,messageContainerType:Q["b"].string,ariaAssertive:Q["b"].bool,blocks:Q["b"].array,serviceTeamId:Q["b"].string,featureSonicInputs:Q["b"].bool,clogMessageClick:Q["b"].func,clogUserClick:Q["b"].func,isThreadExpanded:Q["b"].bool,threadListId:Q["b"].string,showThreadIfThreadable:Q["b"].func,blocksContainerContext:Q["b"].oneOf(Object(s["values"])(Pe["a"]))};var pt={logger:{info:s["noop"],warn:s["noop"],error:s["noop"]},message:null,ts:null,messageNotFound:false,channelId:void 0,text:null,noSpecials:false,alertType:null,subtype:null,theme:"light",userId:null,botId:null,appId:null,username:null,hasAdHocSender:false,reactionKey:null,reactionKeyForInitialFileComment:null,replies:[],replyCount:0,replyUsers:[],replyUsersCount:0,latestReply:null,threadsEverythingPref:null,expandInlineImgsPref:false,expandNonMediaAttachmentsPref:false,threadTs:null,attachments:[],fileId:null,fileIds:null,comment:null,isUpload:false,showUser:true,isFileFollowup:false,isEditing:false,isHovered:false,maybeStartEditingMessage:s["noop"],edited:null,isLast:false,rollup:null,logMessage:s["noop"],setUnreadPoint:s["noop"],isStarred:false,isStandalone:false,isPinned:false,currentUserId:void 0,pinnedByMemberId:void 0,sliHighlight:null,isEphemeral:false,isRichTextMessage:false,isDeleting:false,icons:null,botProfile:null,slackbotFeels:null,fadeAwayHighlight:false,doneHighlighting:s["noop"],isUnprocessed:false,showResend:false,showCancel:false,sourceTeamId:"",resendMsg:s["noop"],removeMsg:s["noop"],shouldJumpToTimestamp:false,isSelfIm:false,isSlackbotIm:false,isEKMDeniedMessage:false,isEKMError:false,featureAttachmentsV2:false,teamDomain:void 0,useGlobalNav:false,renderFileThread:false,channelSessionId:null,previousMessageIsPinned:void 0,previousMessageIsEphemeral:void 0,previousMessageIsStarred:void 0,previousMessageSubtype:void 0,previousMessageSliHighlight:void 0,previousMessagePinnedByMemberId:void 0,renderActions:false,renderActionsOffscreen:false,messageContainerType:void 0,ariaAssertive:void 0,blocks:void 0,serviceTeamId:void 0,featureSonicInputs:false,clogMessageClick:s["noop"],clogUserClick:s["noop"],isThreadExpanded:false,threadListId:void 0,showThreadIfThreadable:s["noop"],blocksContainerContext:Pe["a"].message};var ht=function(e){Y()(t,e);function t(e){G()(this,t);var a=K()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setRef=a.setRef.bind(a);a.onContainerClick=a.onContainerClick.bind(a);a.onTimestampClick=a.onTimestampClick.bind(a);a.startEditing=a.startEditing.bind(a);a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.onMouseEnter=a.onMouseEnter.bind(a);a.onMouseLeave=a.onMouseLeave.bind(a);a.onMenuToggle=a.onMenuToggle.bind(a);a.startHighlightingTimer=a.startHighlightingTimer.bind(a);a.onDoneHighlighting=a.onDoneHighlighting.bind(a);a.onDeleteAnimationTick=a.onDeleteAnimationTick.bind(a);a.onDeleteAnimationEnd=a.onDeleteAnimationEnd.bind(a);a.resendMsg=a.resendMsg.bind(a);a.removeMsg=a.removeMsg.bind(a);a.formatInlineAttachmentMaybe=a.formatInlineAttachmentMaybe.bind(a);a.formatThemeInstallButton=a.formatThemeInstallButton.bind(a);a.customFormatHandler=a.customFormatHandler.bind(a);a.customContentHandler=a.customContentHandler.bind(a);a.clogLinkClick=a.clogLinkClick.bind(a);a.clogUserClick=a.clogUserClick.bind(a);a.shouldShowAttachment=a.shouldShowAttachment.bind(a);a.messageRef=null;a.deleteAnimation=null;a.hasDisplayedContent=true;a.inlineAttachmentsKey=0;a.setAttachmentsSorted();a.state={isHovered:e.isHovered,actionsMenuOpen:false,height:null,hasKeyboardFocus:false};return a}H()(t,[{key:"componentDidMount",value:function e(){this.props.fadeAwayHighlight&&this.startHighlightingTimer();this.isDeleting()&&this.onDeleteAnimationEnd()}},{key:"componentWillReceiveProps",value:function e(t){var a=this.props.fadeAwayHighlight;t.fadeAwayHighlight&&!a&&this.startHighlightingTimer();this.isDeleting(t)&&!this.isDeleting()&&this.startDeleteAnimation();this.setAttachmentsSorted(t);this.setState(function(){return{isHovered:t.isHovered}})}},{key:"componentWillUnmount",value:function e(){if(this.highlightTimer){clearTimeout(this.highlightTimer);this.onDoneHighlighting()}if(this.deleteAnimation){this.deleteAnimation.cancel();this.onDeleteAnimationEnd()}}},{key:"onContainerClick",value:function e(t){if(t.shiftKey&&Object(fe["a"])(t)&&!Object(ve["a"])(t.target)){t.stopPropagation();this.props.logMessage({channelId:this.props.channelId,ts:this.props.ts});return}if(t.altKey){t.preventDefault();this.props.setUnreadPoint({channelId:this.props.channelId,unreadTs:this.props.ts})}}},{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent;a&&"keydown"===a.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onMouseEnter",value:function e(){this.setState(function(){return{isHovered:true}})}},{key:"onMouseLeave",value:function e(){this.setState(function(){return{isHovered:false}})}},{key:"onMenuToggle",value:function e(t){var a=this;if(!t){setTimeout(function(){a.setState(function(){return{actionsMenuOpen:false}})},100);return}this.setState(function(){return{actionsMenuOpen:t}})}},{key:"onDoneHighlighting",value:function e(){this.props.doneHighlighting();this.highlightTimer=null}},{key:"onDeleteAnimationTick",value:function e(t){var a=t.value,r=t.nextTick;if(!this.messageRef)return;this.setState(function(){return{height:a}},r)}},{key:"onDeleteAnimationEnd",value:function e(){this.removeMsg();this.deleteAnimation=null}},{key:"onTimestampClick",value:function e(t){t.preventDefault();this.props.shouldJumpToTimestamp&&Object(be["q"])(this.props.channelId,this.props.ts,this.props.threadTs)}},{key:"setAttachmentsSorted",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=a.attachments,n=a.text;var i=Object(s["partition"])(Object(s["map"])(Object(s["filter"])(r,this.shouldShowAttachment),le["b"]),function(e){return t.isInlineImage(e,n)}),o=U()(i,2),l=o[0],c=o[1];this.attachmentsInline&&l&&!Object(pe["a"])(this.attachmentsInline,l,2)&&(this.inlineAttachmentsKey+=1);this.attachmentsInline=l;this.attachmentsBelow=c}},{key:"setRef",value:function e(t){this.messageRef=t}},{key:"getTextWithThemes",value:function e(){if(!this.props.text)return this.props.text;var t=this.props.useGlobalNav?/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){8})(#[A-Fa-f0-9]{6})(\b)/g:/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){7})(#[A-Fa-f0-9]{6})(\b)/g;return this.props.text.replace(t,function(e){return e+" <"+lt+"|"+e+">"})}},{key:"getUrlsToHide",value:function e(){var t=this.props,a=t.attachments,r=t.featureHideUnfurlUrls;if(!r)return[];return Object(s["compact"])(Object(s["map"])(Object(s["map"])(Object(s["filter"])(Object(s["map"])(Object(s["filter"])(a,this.shouldShowAttachment),le["b"]),"isMsgUnfurl"),"fromUrl"),s["unescape"]))}},{key:"getResendText",value:function e(){var t=this.props.isEKMError;if(t)return nt.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel.");return nt.t("Slack couldn\u2019t send this message")}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{caughtError:true}});var a=t?t.message:"";var r=t?t.stack:"";var n=this.props||{};var i=n.channel&&n.channelId;var s=n.logger;s.error("Message componentDidCatch: "+n.subtype+" "+n.ts+" in "+i+", "+a);r&&s.error(r)}},{key:"clogLinkClick",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.props,r=a.ts,i=a.channelId,s=a.userId,o=a.botId;var l={ts:r,user:s,channel:i,bot_id:o};var c=n()({},t,{request_id:null});"user_link"===t.type?this.props.clogUserClick({msg:l,payload:c}):this.props.clogMessageClick({msg:l,payload:c})}},{key:"clogUserClick",value:function e(t){this.clogLinkClick(n()({type:"user_link"},t))}},{key:"isInlineImage",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.text;return a&&-1!==o.a.unescape(a).indexOf(t.fromUrl)&&Object(we["m"])(t)}},{key:"shouldShowAttachment",value:function e(t){var a=this.props,r=a.text,n=a.subtype,i=a.isStandalone,s=a.expandInlineImgsPref,o=a.expandNonMediaAttachmentsPref;return Object(ae["h"])({attachment:t,messageText:r,messageSubtype:n,messageIsStandalone:i,expandInlineImgsPref:s,expandNonMediaAttachmentsPref:o})}},{key:"isDeleting",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;var e=t.isDeleting,a=t.isStandalone;return e&&!a}},{key:"startHighlightingTimer",value:function e(){if(this.highlightTimer)return;this.highlightTimer=setTimeout(this.onDoneHighlighting,4500)}},{key:"startDeleteAnimation",value:function e(){if(!this.messageRef)return;var t=this.messageRef.clientHeight;this.deleteAnimation=Object(oe["a"])({fromValue:t,toValue:0,duration:it,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"startEditing",value:function e(){var t=this.props,a=t.maybeStartEditingMessage,r=t.channelId,n=t.ts;a({channelId:r,ts:n})}},{key:"formatInlineAttachmentMaybe",value:function e(t){var a=t.item,r=t.getDefaultOutput;var i=this.props,l=i.ts,c=i.channelId,u=i.sourceTeamId;var d=a.url;var p=Object(s["find"])(this.attachmentsInline,{fromUrl:o.a.unescape(d)});if(!p)return r();return Z.a.createElement(J["Fragment"],null,r(),Z.a.createElement(Oe["a"],n()({},p,{messageTs:l,activeChannelId:c,sourceTeamId:u,clogLinkClick:this.clogLinkClick,isInline:true})))}},{key:"formatThemeInstallButton",value:function e(t){var a=t.item;var r=a.contents[0].text.replace(/\s/g,"").split(",");return Z.a.createElement("div",{className:"c-message__theme_button_container"},Z.a.createElement(Ve["a"],{colors:r,clogLinkClick:this.clogLinkClick}))}},{key:"customContentHandler",value:function e(t){var a=this.props.edited;var r=t;var n=this.getUrlsToHide();n.length&&(r=Object(Me["a"])({content:t,urls:n}));if(a){var i=o.a.last(r)||{};r.push({type:"custom_edited_label",omitWhitespace:!!ut[i.type]})}this.hasDisplayedContent=!!r.length;return r}},{key:"customFormatHandler",value:function e(t){var a=t.item,r=t.getDefaultOutput;var n=void 0;"link"===a.type?n=a.url===lt?this.formatThemeInstallButton(t):this.formatInlineAttachmentMaybe(t):"custom_edited_label"===a.type&&(n=this.renderEditedLabel({omitWhitespace:a.omitWhitespace}));return n||r()}},{key:"focusFirst",value:function e(t){this.focusNode(Object(ce["b"])(t))}},{key:"focusLast",value:function e(t){this.focusNode(Object(ce["c"])(t))}},{key:"focusNode",value:function e(t){if(!t)return;if(document.activeElement===t)return;t.focus();t.classList.add("focus-ring")}},{key:"isTombstone",value:function e(){return"tombstone"===this.props.subtype}},{key:"shouldShowResendControls",value:function e(){var t=this.props,a=t.showResend,r=t.showCancel;return a||r}},{key:"resendMsg",value:function e(){var t=this.props,a=t.ts,r=t.channelId;this.props.resendMsg(r,a)}},{key:"removeMsg",value:function e(){var t=this.props,a=t.ts,r=t.channelId,n=t.messageContainerType,i=t.subtype;var s="thread_broadcast"===i&&n===se["MESSAGE_CONTAINERS"].THREADS_FLEXPANE;this.props.removeMsg({channelId:r,ts:a,broadcastDelete:s})}},{key:"shouldShowMessageLabel",value:function e(t){var a=t.labelTypes;var r=this.props,n=r.showUser,i=r.isFileFollowup,s=r.pinnedByMemberId,l=r.previousMessageIsStarred,c=r.previousMessageIsPinned,u=r.previousMessageIsEphemeral,d=r.previousMessageSubtype,p=r.previousMessageSliHighlight,h=r.previousMessagePinnedByMemberId;if(o.a.isEmpty(a))return false;if(a.sliHighlight)return true;if(!n||i){var v=Object(ne["a"])({isStarred:l,isPinned:c,isEphemeral:u,subtype:d,sliHighlight:p});if(Object(pe["a"])(a,v))return a.isPinned&&v.isPinned&&h!==s}return true}},{key:"renderTimestamp",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.isHiddenFromCopy,r=void 0!==a&&a;var i=this.props,s=i.teamDomain,o=i.channelId,l=i.ts,c=i.threadTs,u=i.isStandalone,d=i.isEKMDeniedMessage;if(!l||!o||d)return null;var p=void 0;var h=void 0;if(!u){p=Object(N["constructAbsoluteMsgPermalink"])({teamDomain:s,channelId:o,ts:l,threadTs:c});h=this.onTimestampClick}var v={};r&&(v["data-stringify-text"]="");return Z.a.createElement(Fe["b"],n()({timestamp:l,relative:false,full:false,link:p,onClick:h},v))}},{key:"renderAvatar",value:function e(){var t=36;if(this.isTombstone())return Z.a.createElement("div",{className:"c-message__tombstone_icon"},Z.a.createElement(Ae["a"],{type:"trash",align:"top"}));var a=this.props,r=a.userId,n=a.hasAdHocSender,i=a.botId,s=a.botProfile,o=a.isStandalone,l=a.icons,c=a.slackbotFeels,u=a.isEKMDeniedMessage;return Z.a.createElement(ke["b"],{className:"c-message__avatar",userId:r,isAdHocMember:n,botId:i,botProfile:s,slackbotFeels:c,size:t,icons:l,isInteractive:!u&&!o,showCard:true,showTooltip:true,clogLinkClick:this.clogUserClick,ariaHidden:"true",tabIndex:"-1"})}},{key:"renderGutter",value:function e(){var t=$()("c-message__gutter",{"c-message__gutter--feature_sonic_inputs":this.props.featureSonicInputs});if("light"===this.props.theme){if(this.props.isFileFollowup)return Z.a.createElement("div",{className:$()(t,"c-message__gutter--empty")});if(this.props.isEditing||this.props.showUser)return Z.a.createElement("div",{className:t},this.renderAvatar())}return Z.a.createElement("div",{className:t},this.renderTimestamp({isHiddenFromCopy:"dense"===this.props.theme}))}},{key:"renderContent",value:function e(){var t=this.props,a=t.showUser,r=t.theme,n=t.isStandalone,i=t.reactionKey,s=t.reactionKeyForInitialFileComment;var o=$()("c-message__content",{"c-message__content--feature_sonic_inputs":this.props.featureSonicInputs});return Z.a.createElement("div",{className:o,"data-qa":"message_content"},a&&this.renderContentHeader(),"light"===r&&this.renderThreadBroadcastPreamble(),this.renderBody(),this.renderFile(),this.renderFileThreads(),this.renderAttachments(),!n&&!this.isTombstone()&&this.renderReactions(i),!n&&!this.isTombstone()&&this.renderReactions(s),!n&&this.renderReplyBar(),this.renderThreadBroadcastFooter(),this.shouldShowResendControls()&&this.renderResendControls())}},{key:"renderContentHeader",value:function e(){var t=this.props,a=t.userId,r=t.botId,n=t.username,i=t.theme,s=t.isUpload,o=t.isStandalone,l=t.isEKMDeniedMessage,c=t.botProfile;if(this.isTombstone())return null;var u=l?Object(me["a"])({upload:s}):void 0;return Z.a.createElement("div",{className:"c-message__content_header"},Z.a.createElement(De["a"],{overrideNameText:u,userId:a,botId:r,username:n,isInteractive:!o&&!l,botProfile:c,clogLinkClick:this.clogUserClick}),"light"===i&&this.renderTimestamp(),"dense"===i&&Z.a.createElement("span",{className:"c-message__dense_copy_timestamp copy_only"},this.renderTimestamp(),Z.a.createElement("br",null)),"dense"===i&&"\xa0","dense"===i&&this.renderThreadBroadcastPreamble())}},{key:"renderThreadBroadcastPreamble",value:function e(){var t=this.props,a=t.ts,r=t.threadTs,n=t.channelId,i=t.subtype,s=t.isStandalone;if(!a||!n||s||"thread_broadcast"!==i)return null;return Z.a.createElement(qe["a"],{ts:a,threadTs:r,channelId:n})}},{key:"renderThreadBroadcastFooter",value:function e(){var t=this.props,a=t.ts,r=t.threadTs,n=t.channelId,i=t.subtype,s=t.isStandalone;if(!a||!n||!r||s||"thread_broadcast"!==i)return null;return Z.a.createElement(Ge["a"],{ts:a,threadTs:r,channelId:n})}},{key:"renderEditedLabel",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.omitWhitespace,r=void 0!==a&&a;var n=this.props.edited;var i=n.ts;var s=Z.a.createElement("span",{key:"edited",className:"c-message__edited_label",dir:"ltr"},!r&&"\xa0",nt.t("(edited)"),!r&&"\xa0");if(i){var o=nt.t("{date} at {time}",{date:Object(de["a"])(i,{shortenMonth:true}),time:Object(ue["a"])(i)});return Z.a.createElement(je["c"],{key:"edited",delay:je["a"],tip:o},s)}return s}},{key:"renderReplyBar",value:function e(){var t=this.props,a=t.replies,r=t.replyCount,n=t.replyUsers,i=t.replyUsersCount,s=t.latestReply,o=t.channelId,l=t.threadTs,c=t.isThreadExpanded,u=t.threadListId,d=t.showThreadIfThreadable;if(!o||!r)return null;return Z.a.createElement(xe["a"],{channelId:o,threadTs:l,replies:a,replyCount:r,replyUsers:n,replyUsersCount:i,latestReply:s,isThreadExpanded:c,threadListId:u,showThreadIfThreadable:d})}},{key:"renderReactions",value:function e(t){if("file_comment"===this.props.subtype&&this.props.featureFileThreads)return null;if(!t)return null;return Z.a.createElement(Ee["a"],{reactionKey:t})}},{key:"renderAttachments",value:function e(){var t=this;var a=this.props,r=a.ts,i=a.channelId,o=a.blocks,l=a.text,c=a.blocksContainerContext,u=a.sourceTeamId;var d=this.attachmentsBelow;if(!d||!d.length)return null;var p=st;var h=Object(s["map"])(d,function(e,a){var s=e.id||a+1;var d=e.botId||t.props.botId;e.blocks&&(p=ot);return Z.a.createElement(Oe["a"],n()({},e,{service:d,messageTs:r,activeChannelId:i,sourceTeamId:u,key:s,clogLinkClick:t.clogLinkClick,isOnlyMessageContent:!t.hasDisplayedContent||!o&&!l,blocksContainerContext:c}))});var v=h.splice(p);return Z.a.createElement("div",{className:"c-message__attachments"},h,this.renderAttachmentsOverLimitMaybe(v,p))}},{key:"renderAttachmentsOverLimitMaybe",value:function e(t,a){if(!t.length)return null;var r={useAttachmentRules:false,shouldBeExpandedByDefault:false,expandableKey:Object(te["a"])("attachmentsOverLimit",this.props.ts,{limit:a})};return Z.a.createElement("div",null,Z.a.createElement(Se["a"],r,t),Z.a.createElement(Ie["a"],n()({},r,{render:function e(a,r){return Z.a.createElement(Te["a"],{isExpanded:a.isExpanded,onClick:r,attachmentsOverLimitCount:t.length})}})))}},{key:"renderFile",value:function e(){var t=this.props,a=t.fileId,r=t.comment,n=t.subtype;if(!a)return null;if(r&&"file_comment"===n)return this.renderFileComment();return null}},{key:"renderFileComment",value:function e(){var t=this.props,a=t.fileId,r=t.comment,n=t.isFileFollowup,i=t.theme,s=t.subtype,o=t.userId;if(!a||!r)return null;var l="file_comment"===s&&(!n||"dense"===i)&&Z.a.createElement(Le["a"],{fileId:a,comment:r,followup:n,key:r.id+"-meta"});return[l||null,Z.a.createElement(Ce["a"],{text:r.comment,memberId:o,className:"c-message__comment c-message__body",key:r.id+"-body",clogLinkClick:this.clogLinkClick})]}},{key:"renderFileThreads",value:function e(){if(!this.props.renderFileThread)return null;var t=this.props,a=t.fileIds,r=t.channelId,n=t.subtype,i=t.text;if(!a||!a.length||!r)return null;if("file_comment"===n)return null;var s=Z.a.createElement(Re["b"],{msg:this.props.message});var o=$()("c-message__files","c-message__files--file_threads_meta_data","c-message__files--pillow",{"c-message__files--empty_body":!i||"file_mention"===n});return Z.a.createElement("div",{className:o},s)}},{key:"renderRollup",value:function e(){var t=this.props,a=t.rollup,r=t.channelId,n=t.userId;if(!a||!r)return null;return Z.a.createElement(Be["a"],{rollup:a,channelId:r,user:n})}},{key:"renderAutomatedSubtype",value:function e(){return Z.a.createElement(Ue["a"],{subtype:this.props.subtype,channelId:this.props.channelId,timestamp:this.props.ts})}},{key:"renderBody",value:function e(){var t=this;var a=this.props,r=a.ts,n=a.fileId,i=a.subtype,s=a.rollup,o=a.userId,l=a.edited,c=a.noSpecials,u=a.ariaAssertive,d=a.attachments,p=a.blocks,h=a.featureAttachmentsV2,v=a.channelId,m=a.botId,f=a.isEphemeral,b=a.isRichTextMessage,g=a.serviceTeamId,_=a.blocksContainerContext;if(this.isTombstone())return Z.a.createElement("span",{className:"c-message__body c-message__body--tombstone"},nt.t("This message was deleted."));if(!r)return Z.a.createElement("span",{className:"c-message__body c-message__body--unknown"});if(n||"file_comment"===i||"file_mention"===i)return null;if(s)return this.renderRollup();if(Object(ee["a"])(i))return this.renderAutomatedSubtype();var y=$()("c-message__body",{"c-message__body--me":"me_message"===i});var O=$()("c-message__message_blocks",{"c-message__message_blocks--rich_text":b});if(p&&h){var k={serviceId:m,serviceTeamId:g,container:{type:Pe["a"].message,messageTs:r,channelId:v,isEphemeral:f}};return Z.a.createElement("div",{className:O},Z.a.createElement(Ne["a"],{containerActionsPayload:k,blocks:p,service:m,containerId:r,blocksContainerContext:_,clogLinkClick:function e(){return t.clogLinkClick()}}))}var E=parseInt(r,10)>ct;return Z.a.createElement(Ce["a"],{"data-qa":"message-text",className:y,text:this.getTextWithThemes(),memberId:o,customFormatHandler:this.customFormatHandler,customContentHandler:this.customContentHandler,key:this.inlineAttachmentsKey,doSlackActionLinks:true,clogLinkClick:this.clogLinkClick,noSpecials:c,ariaAssertive:u,ignoredPropEdited:l,ignoredPropAttachments:d,addDirectionAttr:E})}},{key:"renderActions",value:function e(){var t=this;var a=this.props,r=a.ts,n=a.reactionKey,i=a.fileId,s=a.fileIds,o=a.comment,l=a.replies,c=a.replyCount,u=a.rollup,d=a.threadsEverythingPref,p=a.threadTs,h=a.channelId,v=a.subtype,m=a.isStarred,f=a.isPinned,b=a.isEphemeral,g=a.isDeleting,_=a.isStandalone,y=a.setUnreadPoint,O=a.theme,e=a.renderActions,k=a.renderActionsOffscreen,E=a.messageContainerType;var C=this.state,j=C.actionsMenuOpen,w=C.isHovered,S=C.hasKeyboardFocus;if(!r||!h)return null;var I=k&&!S&&!w&&!e;if(!j&&!w&&!S&&!I&&!e)return null;if(g||_)return null;return Z.a.createElement(We["a"],{reactionKey:n,fileId:i,fileIds:s,comment:o&&o.id,replies:l,replyCount:c,rollup:u,ts:r,threadsEverythingPref:d,threadTs:p,channelId:h,subtype:v,isStarred:m,isPinned:f,isEphemeral:b,editHandler:this.startEditing,unreadHandler:y,onMenuOpen:function e(){return t.onMenuToggle(true)},onMenuClose:function e(){return t.onMenuToggle(false)},theme:O,renderOffscreen:I,messageContainerType:E})}},{key:"renderEdit",value:function e(){var t=this.props,a=t.channelId,r=t.ts,n=t.messageContainerType;if(!r||!a)return null;return Z.a.createElement("div",{className:"c-message__content"},Z.a.createElement(He["a"],{channelId:a,ts:r,messageContainerType:n}))}},{key:"renderResendControls",value:function e(){var t=this.props,a=t.isEKMError,r=t.showResend,n=t.showCancel;var i=null;r&&(i=Z.a.createElement(_e["c"],{className:"c-message__resend",onClick:this.resendMsg},nt.t("Try again")));var s=null;n&&(s=Z.a.createElement(_e["c"],{className:"c-message__cancel",onClick:this.removeMsg},a?nt.t("Clear"):nt.t("Cancel")));var o=null;r&&n&&(o=" | ");return Z.a.createElement("div",{className:"c-message__resend_controls"},Z.a.createElement("div",{className:"c-message__resend_column"}),this.getResendText(),i,o,s)}},{key:"renderError",value:function e(){if(!this.props.featureTinyspeck)return null;var t=this.props,a=t.ts,r=t.channelId;var n={background:"#FFCFCF",padding:"24px"};return Z.a.createElement("div",{style:n},Z.a.createElement("strong",null,"TS-ONLY: Message ",a," in ",r," failed to render.")," ","Please go to #escal-messages and read up to see if this was already reported. If not, please make a report including a link to the message before this one (if in a public channel.)")}},{key:"renderMessageLabel",value:function e(t){var a=t.labelTypes,r=t.primaryLabelType;var i=this.props,s=i.sliHighlight,o=i.isSlackbotIm,l=i.isSelfIm,c=i.channelId,u=i.ts,d=i.currentUserId,p=i.pinnedByMemberId,h=i.sourceTeamId;var v=this.state.isHovered;if(!this.shouldShowMessageLabel({labelTypes:a}))return null;return Z.a.createElement(at,n()({},a,{primaryType:r,channelId:c,ts:u,isHovered:v,isSlackbotIm:o,isSelfIm:l,sliHighlight:s,currentUserId:d,pinnedByMemberId:p,sourceTeamId:h}))}},{key:"render",value:function e(){var t;if(this.state.caughtError)return this.renderError();if(this.props.messageNotFound)return null;var a=this.props,r=a.theme,n=a.isEditing,i=a.showUser,s=a.alertType,o=a.fadeAwayHighlight,l=a.isLast,c=a.isStandalone,u=a.isUnprocessed,d=a.subtype,p=a.rollup,h=a.sliHighlight,v=a.ts,m=a.isPinned,f=a.isEphemeral,b=a.isStarred,g=a.isEKMDeniedMessage,_=a.isEKMError;var y=this.state,O=y.isHovered,k=y.actionsMenuOpen,C=y.height;var j=Object(ne["a"])({isPinned:m,isEphemeral:f,isStarred:b,subtype:d,sliHighlight:h});var w=Object(re["a"])(j);var S=$()("c-message",(t={},L()(t,"c-message--"+r,r),L()(t,"c-message--hover",O||k),L()(t,"c-message--focus",this.state.hasKeyboardFocus),L()(t,"c-message--adjacent",!n&&!i&&!c),L()(t,"c-message--thread_broadcast","thread_broadcast"===d),L()(t,"c-message--highlight_yellow_bg","shared_channel_join"===s),L()(t,"c-message--highlight",!c&&n),L()(t,"c-message--fade_highlight",o&&!w),L()(t,"c-message--last",l),L()(t,"c-message--rollup",p),L()(t,"c-message--standalone",c),L()(t,"c-message--unprocessed",u),L()(t,"c-message--resend",this.shouldShowResendControls()),L()(t,"c-message--deleting",this.isDeleting()),L()(t,"c-message--editing",n),L()(t,"c-message--sli_highlight_negative",Object(E["isNegativeHighlightFeedback"])(h)),L()(t,"c-message--"+w,w),t));var I={};null!==C&&(I={height:C});return Z.a.createElement(ye["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},Z.a.createElement("div",{ref:this.setRef,className:S,onClick:this.onContainerClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseEnter,style:I,role:"document","data-qa":"message_container","data-qa-placeholder":Object(N["isTempTs"])(v)},this.renderMessageLabel({labelTypes:j,primaryLabelType:w}),this.renderGutter(),!c&&n&&this.renderEdit(),(c||!n)&&this.renderContent(),!g&&!_&&!c&&!n&&this.renderActions()))}}]);return t}(J["PureComponent"]);ht.displayName="Message";ht.defaultProps=pt;var vt=Object(ge["a"])(ht);function mt(e,t){var a=t.message;var r=Object(N["shouldRenderFileThread"])(a,{featureFileThreads:Object(I["isFeatureEnabled"])(e,"feature_file_threads"),featureFileThreadsDarkLaunch:Object(I["isFeatureEnabled"])(e,"feature_file_threads_dark_launch")});var n=r?null:a.file;var i=r?a.files:null;var o=r?Object(y["getFileById"])(e,Object(s["first"])(i)):Object(y["getFileById"])(e,n);return{fileId:n,fileIds:i,file:o}}var ft=function e(t,a){var r=a.ts,i=a.channelId,s=a.previousMessageTs;var o=Object(p["a"])(t,i,r);var u=Object(k["a"])(t);var d=Object(O["f"])(t,"threads_everything");var h=Object(O["f"])(t,"expand_inline_imgs");var v=Object(O["f"])(t,"expand_non_media_attachments");var j=Object(_["d"])(t,i);var F=Object(I["isFeatureEnabled"])(t,"feature_file_threads");var L=Object(I["isFeatureEnabled"])(t,"feature_file_threads_dark_launch");var B=Object(I["isFeatureEnabled"])(t,"feature_hide_unfurl_urls");var U=Object(I["isFeatureEnabled"])(t,"feature_attachments_v2");var q=Object(I["isFeatureEnabled"])(t,"feature_sonic_inputs");var G=Object(I["isFeatureEnabled"])(t,"feature_tinyspeck");var W=Object(I["isFeatureEnabled"])(t,"feature_message_history_cfm");var H=Object(l["a"])({state:t});var V=Object(c["a"])({state:t});if(!o)return{channelId:i,clogger:H,logger:V,featureTinyspeck:G,featureFileThreads:F,featureHideUnfurlUrls:B,messageNotFound:true};if(W){var K=Object(b["c"])(t);r&&Object(C["d"])(K,i,r);s&&Object(C["d"])(K,i,s)}var z=Object(N["shouldRenderFileThread"])(o,{featureFileThreads:F,featureFileThreadsDarkLaunch:L});var Y=mt(t,{message:o}),Q=Y.file,J=Y.fileId,Z=Y.fileIds;var X=Object(p["a"])(t,i,s);var $=!Object(N["isAdjacentMessage"])(t,o,X);var ee=Object(D["a"])(o,X);var te=Object(R["b"])(o,Q);var ae=Object(R["c"])(o,Q);var re=Object(N["getMsgSenderEntity"])(t,o);var ne=re.botId&&Object(m["getBotByMsg"])(t,o);var ie=ne?ne.app_id:null;var se=o.slackbot_feels||null;var oe=o.comment&&Q&&Object(y["getFileCommentById"])(t,Q.id,o.comment.id)||o.comment;Q&&"file_share"===o.subtype&&o.upload&&(oe=Q.initial_comment);var le=Object(E["getMessageMetaData"])(t,{channelId:i,ts:r}),ce=le.isDeleting,ue=le.sliHighlight;var de=Object(S["getMessageEditData"])(t,{channelId:i,ts:r}),pe=de.isEditing;var he=void 0;he=z?Object(N["getMessagePinnedInfo"])(o):Q?Object(P["getFilePinnedInfoByChannelId"])({file:Q,channelId:i}):Object(N["getMessagePinnedInfo"])(o);var ve=he?he.pinnedBy:null;var me=void 0;if(X){var fe=void 0;if(z)fe=Object(N["getMessagePinnedInfo"])(X);else{var be=mt(t,{message:X});fe=be.file?Object(P["getFilePinnedInfoByChannelId"])({file:be.file,channelId:i}):Object(N["getMessagePinnedInfo"])(X)}var ge=fe?fe.pinnedBy:null;me={previousMessageIsStarred:Object(N["isStarred"])(X),previousMessageIsPinned:Object(T["isMessagePinned"])(t,{channelId:i,ts:s}),previousMessageIsEphemeral:Object(N["isEphemeral"])(X),previousMessageSubtype:X.subtype,previousMessageSliHighlight:X.sliHighlight,previousMessagePinnedByMemberId:ge}}var _e=o.thread_ts;var ye=void 0;if(_e){ye={replyCount:o.reply_count};if(o.replies)ye.replies=o.replies;else{ye.replyUsers=o.reply_users;ye.replyUsersCount=o.reply_users_count;ye.latestReply=o.latest_reply}}var Oe=Object(I["getCurrentUserId"])(t);var ke=Object(g["d"])(t);var Ee=Object(b["c"])(t);var Ce=ke&&ke.domain;var je=void 0;if(ne){var we=Object(f["d"])(t,o.user);var Se=Object(w["getTeamIdFromBotOrUser"])({bot:ne,botProfile:o.bot_profile,member:we,teamId:Ee});je=Object(w["getTeamIdFromBotAppUser"])(we,Se)}return n()({message:o,channelId:i,clogger:H,logger:V,blocks:o.blocks,alertType:o.alert_type,subtype:o.subtype,text:o.text,noSpecials:false===o.mrkdwn,theme:u},re,{appId:ie,hasAdHocSender:Object(M["a"])(o)},ye,{threadTs:_e,threadsEverythingPref:d,expandInlineImgsPref:h,expandNonMediaAttachmentsPref:v,attachments:o.attachments,fileId:J,fileIds:Z,comment:oe,isUpload:o.upload,reactionKey:te,reactionKeyForInitialFileComment:ae,showUser:$,isFileFollowup:ee,edited:o.edited,isStarred:Object(N["isStarred"])(o,Q,"file_comment"===o.subtype&&oe,F),isPinned:Object(T["isMessagePinned"])(t,{channelId:i,ts:r}),currentUserId:Oe,pinnedByMemberId:ve,sliHighlight:ue,botProfile:o.bot_profile,slackbotFeels:se,icons:o.icons,isEditing:pe,isUnprocessed:Object(N["isTempMsg"])(o)&&!Object(N["isEphemeral"])(o),isEphemeral:Object(N["isEphemeral"])(o),isDeleting:ce,showResend:o.showResend,showCancel:o.showCancel,isSlackbotIm:Object(A["isSlackbot"])(j),isRichTextMessage:Object(N["isRichTextMessage"])(o),sourceTeamId:Object(N["getSourceTeamId"])(o)||Object(b["c"])(t),isSelfIm:Object(A["isYou"])(Oe,j),isEKMDeniedMessage:Object(N["isEKMAccessDeniedMessage"])(o),isEKMError:o.isEKMError,teamDomain:Ce},me,{featureTinyspeck:G,featureFileThreads:F,featureHideUnfurlUrls:B,useGlobalNav:Object(x["b"])(t),renderFileThread:z,featureAttachmentsV2:U,ariaAssertive:Object(N["isDisconnectedFeedback"])(o),serviceTeamId:je,featureSonicInputs:q})};var bt={logMessage:function e(){return j["a"].apply(void 0,arguments)},clogMessageClick:function e(){return u["a"].apply(void 0,arguments)},clogUserClick:function e(){return d["a"].apply(void 0,arguments)},maybeStartEditingMessage:function e(){return S["maybeStartEditingMessage"].apply(void 0,arguments)},removeMsg:function e(){return v["a"].apply(void 0,arguments)},resendMsg:function e(){return h["a"].apply(void 0,arguments)}};var gt=t["a"]=Object(i["connect"])(ft,bt)(vt)},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(27);var c=a(44);var u=a(3);var d=a.n(u);var p=a(6);var h=a.n(p);var v=a(7);var m=a.n(v);var f=a(8);var b=a.n(f);var g=a(9);var _=a.n(g);var y=a(0);var O=a(16);var k=a.n(O);var E=a(10);var C=a(707);var j=a(2);var w=a(138);var S=a(22);var I={action:y["b"].node.isRequired};var T=function(e){_()(t,e);function t(){h()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_left_75"},this.props.action)}}]);return t}(r["PureComponent"]);T.displayName="AppProfileHeaderActionItem";var A=T;var N=a(3037);var P={appName:y["b"].string.isRequired,appImageSrc:y["b"].string.isRequired,appByline:y["b"].string,headerActions:y["b"].array,actions:y["b"].object.isRequired,dispatch:y["b"].func.isRequired};var R={appByline:"",headerActions:[]};var M=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onBackClick=a.onBackClick.bind(a);return a}m()(t,[{key:"onBackClick",value:function e(){var t=this.props,a=t.actions,r=t.dispatch;r(a.router.navigateTo("/organization/apps"));r(a.apps.setAppDetailViewOpen(false))}},{key:"renderActionItems",value:function e(){var t=this.props.headerActions;var a=Object(j["map"])(t,function(e,t){return n.a.createElement(A,{key:t,action:e})});return a}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.appName,i=a.appImageSrc,s=a.appByline;return n.a.createElement("div",{className:"p-app_profile_header margin_bottom_150 display_flex align_items_center justify_content_between"},n.a.createElement("div",{className:"display_flex justify_content_start align_items_center"},n.a.createElement(S["a"],{onClick:function e(){return t.onBackClick()},type:"chevron_medium_left",className:"p-app_profile_header__back_arrow position_absolute"}),n.a.createElement("img",{className:"p-app_profile_header__app_image margin_right_100 margin_left_100",src:i,alt:r}),n.a.createElement("div",{className:"display_flex flex_direction_column"},n.a.createElement("h3",{className:"black"},r),n.a.createElement("span",{className:"p-app_profile_header__app_byline sk_dark_grey"},s))),n.a.createElement("div",{className:"display_flex"},this.renderActionItems()))}}]);return t}(r["PureComponent"]);M.displayName="AppProfileHeader";M.defaultProps=R;var D=M;var x=D;var F=a(58);var L=a.n(F);var B=a(48);var U=a(28);var q=a(66);var G=a(1056);var W=a(355);var H=a(54);var V=a(211);var K=new E["b"]("enterprise_dashboard");var z={appIcon:y["b"].string.isRequired,appName:y["b"].string.isRequired,channelScopeInfo:y["b"].arrayOf(W["a"]),featureWtaOrgLevelApps:y["b"].bool,installOnAllWorkspaces:y["b"].bool,onCancel:y["b"].func,onGo:y["b"].func.isRequired,workspaceName:y["b"].string,workspaceScopeInfo:y["b"].arrayOf(W["a"]).isRequired,workspacesToInstallOnCount:y["b"].number};var Y={channelScopeInfo:[],featureWtaOrgLevelApps:false,installOnAllWorkspaces:false,onCancel:j["noop"],workspaceName:void 0,workspacesToInstallOnCount:1};var Q=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={step:0,wildcardEnabled:true};Object(j["bindAll"])(a,["handleGoClick","handleRadioButtonChange"]);return a}m()(t,[{key:"handleGoClick",value:function e(){var t=this.state.wildcardEnabled;if(this.shouldGoToNextStep()){this.setState(function(){return{step:1}});return}this.props.onGo({wildcardEnabled:t})}},{key:"handleRadioButtonChange",value:function e(){this.setState(function(e){var t=e.wildcardEnabled;return{wildcardEnabled:!t}})}},{key:"shouldGoToNextStep",value:function e(){return 0===this.state.step&&this.props.channelScopeInfo.length>0}},{key:"renderScopeInfo",value:function e(){var t=this.props,a=t.channelScopeInfo,r=t.workspaceScopeInfo;if(1===this.state.step)return a;return r}},{key:"renderTitle",value:function e(){var t=this.props,a=t.appName,r=t.featureWtaOrgLevelApps,n=t.installOnAllWorkspaces,i=t.workspaceName,s=t.workspacesToInstallOnCount;if(!r)return"";if(1===this.state.step)return K.rt("{appName} would like to do the following in the <strong>selected channels:</strong>",{appName:a});if(n)return K.t("On all workspaces, {appName} would like to:",{appName:Object(E["o"])(a)});if(s>1)return K.t("On {workspacesToInstallOnCount} workspaces, {appName} would like to:",{appName:Object(E["o"])(a),workspacesToInstallOnCount:s});return K.t("On {workspaceName}, {appName} would like to:",{appName:Object(E["o"])(a),workspaceName:Object(E["o"])(i)})}},{key:"renderGoButtonText",value:function e(){if(!this.props.featureWtaOrgLevelApps)return"";return this.shouldGoToNextStep()?"Continue":"Install"}},{key:"renderRadioButtons",value:function e(){var t=this.props,a=t.featureWtaOrgLevelApps,r=t.appName,i=t.installOnAllWorkspaces,s=t.workspaceName,o=t.workspacesToInstallOnCount;var l=this.state,c=l.step,u=l.wildcardEnabled;if(!a||0===c)return null;var d=void 0;d=i?K.t("Any channel accessible to full members on all workspaces."):o>1?K.t("Any channel accessible to full members on {workspacesToInstallOnCount} workspaces.",{workspacesToInstallOnCount:o}):K.t("Any channel accessible to full members on {workspaceName}.",{workspaceName:Object(E["o"])(s)});return n.a.createElement("div",{className:"large_top_margin"},n.a.createElement("p",{className:"bold"},K.t("Select channels")),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(H["a"],{text:K.t("All Public Channels"),htmlFor:"all-channels",type:"inline",subtext:d,cursor:"pointer"},n.a.createElement(V["a"],{name:"channels",id:"all-channels",checked:u,onChange:this.handleRadioButtonChange}))),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(H["a"],{text:K.t("No channels"),htmlFor:"no-channels",type:"inline",subtext:K.t("{app_name} will still be able to access a private conversation with you.",{app_name:Object(E["o"])(r)}),cursor:"pointer"},n.a.createElement(V["a"],{name:"channels",id:"no-channels",checked:!u,onChange:this.handleRadioButtonChange}))))}},{key:"render",value:function e(){var t=this.props,a=t.appIcon,r=t.onCancel;return n.a.createElement(G["b"],{appIcon:a,goButtonText:this.renderGoButtonText(),onDismiss:r,onAuthorize:this.handleGoClick,scopeInfo:this.renderScopeInfo(),shouldCloseOnGo:!this.shouldGoToNextStep(),title:this.renderTitle()},this.renderRadioButtons())}}]);return t}(r["PureComponent"]);Q.displayName="OrgAppInstallDialog";Q.defaultProps=Y;var J=Q;var Z=Object(w["a"])("feature_wta_org_level_apps")(Q);var X=Z;var $=a(1494);var ee=new E["b"]("enterprise_dashboard");var te={appName:y["b"].string.isRequired,appIcon:y["b"].string.isRequired,featureWtaOrgLevelApps:y["b"].bool,onCancel:y["b"].func,onGo:y["b"].func.isRequired,uninstallFromAllWorkspaces:y["b"].bool,workspaceName:y["b"].string,workspacesToUninstallFromCount:y["b"].number};var ae={featureWtaOrgLevelApps:false,onCancel:j["noop"],uninstallFromAllWorkspaces:false,workspaceName:void 0,workspacesToUninstallFromCount:1};var re=function e(t){var a=t.appName,r=t.appIcon,i=t.featureWtaOrgLevelApps,s=t.onCancel,o=t.onGo,l=t.uninstallFromAllWorkspaces,c=t.workspaceName,u=t.workspacesToUninstallFromCount;var d=void 0;var p=void 0;var h=void 0;if(i)if(l){d=ee.t("Uninstall {appName} from all workspaces?",{appName:Object(E["o"])(a)});p=ee.rt("I understand that members of <strong>all workspaces</strong> will no longer be able to use {appName}.",{appName:a});h=ee.rt("I understand that {appName} will lose <strong>all access</strong> to all workspaces, including access to channels.",{appName:a})}else if(u>1){d=ee.t("Uninstall {appName} from {workspacesToUninstallFromCount} workspaces?",{appName:Object(E["o"])(a),workspacesToUninstallFromCount:u});p=ee.rt("I understand that members of <strong>{workspacesToUninstallFromCount} workspaces</strong> will no longer be able to use {appName}.",{appName:a,workspacesToUninstallFromCount:u});h=ee.rt("I understand that {appName} will lose <strong>all access</strong> to {workspacesToUninstallFromCount} workspaces, including access to channels.",{appName:a,workspacesToUninstallFromCount:u})}else h=ee.rt("I understand that {appName} will lose <strong>all access</strong> to {workspaceName}, including access to channels.",{appName:a,workspaceName:c});var v={appName:a,appIcon:r,workspaceName:c,title:d,workspaceAccessCheckboxText:p,channelAccessCheckboxText:h,onGo:o,onCancel:s};return n.a.createElement($["a"],v)};re.displayName="OrgAppUninstallDialog";re.defaultProps=ae;var ne=re;var ie=Object(w["a"])("feature_wta_org_level_apps")(re);var se=ie;var oe=new E["b"]("enterprise_dashboard");var le={appIcon:y["b"].string.isRequired,appName:y["b"].string.isRequired,featureWtaOrgLevelApps:y["b"].bool,isInstalledEverywhere:y["b"].bool,openModal:y["b"].func,scopes:y["b"].arrayOf(y["b"].object)};var ce={featureWtaOrgLevelApps:false,isInstalledEverywhere:false,openModal:j["noop"],scopes:[]};var ue=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(j["bindAll"])(a,["showInstallDialog","showUninstallDialog","renderMenu"]);return a}m()(t,[{key:"showInstallDialog",value:function e(){var t=this.props,a=t.appIcon,r=t.appName,i=t.scopes;var s=Object(j["partition"])(i.map(function(e){return d()({},e,{scopes:[e.scope]})}),["is_channel_scope",true]),o=L()(s,2),l=o[0],c=o[1];var u={appIcon:a,appName:r,channelScopeInfo:l,installOnAllWorkspaces:true,onGo:j["noop"],workspaceScopeInfo:c};this.props.openModal({element:n.a.createElement(X,u)})}},{key:"showUninstallDialog",value:function e(){var t=this.props,a=t.appIcon,r=t.appName;var i={appIcon:a,appName:r,onGo:j["noop"],uninstallFromAllWorkspaces:true};this.props.openModal({element:n.a.createElement(se,i)})}},{key:"renderMenu",value:function e(t){var a=this.props,r=a.isInstalledEverywhere,i=a.featureWtaOrgLevelApps;if(!i)return null;return n.a.createElement(q["f"],t,!r&&n.a.createElement(q["b"],{"data-qa":"ent_app_profile_install_everywhere",onSelected:this.showInstallDialog,label:oe.t("Install on all workspaces")}),n.a.createElement(q["b"],{"data-qa":"ent_app_profile_uninstall_everywhere",onSelected:this.showUninstallDialog,danger:true,label:oe.t("Uninstall on all workspaces")}))}},{key:"render",value:function e(){var t=this.props,a=t.isInstalledEverywhere,r=t.featureWtaOrgLevelApps;if(!r)return null;return n.a.createElement("div",{className:"p-app_profile_header__install_menu"},!a&&n.a.createElement(U["d"],{"data-qa":"ent_app_profile_install",className:"margin_right_75",type:"outline",onClick:j["noop"]},oe.t("Install")),n.a.createElement(q["e"],{renderMenu:this.renderMenu,position:"bottom-right"},n.a.createElement(U["d"],{"data-qa":"ent_app_profile_install_menu",className:"p-app_profile_header__install_menu_trigger",type:"outline",icon:"ellipsis"})))}}]);return t}(r["PureComponent"]);ue.displayName="AppProfileHeaderInstallMenu";ue.defaultProps=ce;var de=ue;var pe={openModal:B["openModal"]};var he=Object(o["connect"])(null,pe)(ue);var ve=a(37);var me=a.n(ve);var fe=a(1707);var be=a(920);var ge=a(1213);var _e=new E["b"]("enterprise_dashboard");var ye={appId:y["b"].string,workspacesByApp:y["b"].array,workspacesByAppApiCursor:y["b"].string,workspacesByAppApiTotal:y["b"].number,workspacesByAppLoading:y["b"].bool,headerItemOnClick:y["b"].func,pageSize:y["b"].number,sortBy:y["b"].string,sortDir:y["b"].string,searchQuery:y["b"].string,rowHeaderItemClassName:y["b"].string,rowClassName:y["b"].string,columns:y["b"].array.isRequired,actions:y["b"].object.isRequired,isSelectionBarShowing:y["b"].bool};var Oe={appId:null,workspacesByApp:[],workspacesByAppApiCursor:"",workspacesByAppApiTotal:null,workspacesByAppLoading:false,headerItemOnClick:j["noop"],pageSize:50,sortBy:"team_name",sortDir:null,searchQuery:"",rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",isSelectionBarShowing:false};var ke="asc";var Ee="desc";var Ce="caret_down";var je="caret_up";var we={};we[ke]=Ce;we[Ee]=je;var Se=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=a.props,i=r.sortBy,s=r.sortDir;a.state={rowListItems:[],sortBy:i,sortDir:s,offset:0,height:null,paddingBottom:null};a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(a);a.onRequestNextPage=a.onRequestNextPage.bind(a);a.refreshTableHeight=a.refreshTableHeight.bind(a);a.refreshTableHeightPolitely=a.refreshTableHeightPolitely.bind(a);a.emptyRowTemplate={items:[{value:function e(t){var a=t.searchQuery;var r=_e.rt("No workspaces were found matching <b>{query}</b>",{query:a});return n.a.createElement("div",{className:"align_center"},r)}}]};return a}m()(t,[{key:"componentWillMount",value:function e(){var t=this.props,a=t.workspacesByApp,r=t.sortBy,n=t.actions;var i=this.state.offset;a.length?this.updateRowListItemsData(i):n.setWorkspacesByAppLoading(true);n.setWorkspacesByAppSortBy(r)}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateSearchQuery(t)}},{key:"componentDidUpdate",value:function e(t){t.isSelectionBarShowing!==this.props.isSelectionBarShowing&&this.refreshTableHeightPolitely();this.maybeUpdateListRowItems(t);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"onRequestNextPage",value:function e(t){var a=this.props,r=a.workspacesByApp,n=a.workspacesByAppApiTotal;if(n&&r.length>=n)return;this.fetchNewPage();var i={offset:t};this.setState(i)}},{key:"maybeFetchNextPage",value:function e(t){var a=this.props,r=a.appId,n=a.workspacesByAppLoading;var i=n&&!t.workspacesByAppLoading;var s=r&&r!==t.appId;r&&(i||s)&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var a=this.props,r=a.searchQuery,n=a.actions;if(t.searchQuery!==r){this.resetWorkspacesByAppsState();n.setWorkspacesByAppLoading(true)}}},{key:"maybeUpdateListRowItems",value:function e(t){var a=this.state.offset;var r=this.props,n=r.searchQuery,i=r.workspacesByApp,s=r.workspacesByAppLoading,o=r.columns;t.workspacesByApp===i&&t.searchQuery===n&&t.workspacesByAppLoading===s&&t.columns===o||this.updateRowListItemsData(a)}},{key:"fetchNewPage",value:function e(){var t=this.state,a=t.sortBy,r=t.sortDir;var n=this.props,i=n.appId,s=n.pageSize,o=n.searchQuery,l=n.workspacesByAppApiCursor,c=n.actions;if(!i)return;var u={limit:s,app:i};a&&(u.sort=a);r&&(u.sort_dir=r);null!==o&&void 0!==o&&Object(j["trim"])(o).length&&(u.query=o);l&&(u.cursor=l);c.getWorkspacesByApp(u)}},{key:"headerItemOnClick",value:function e(t){var a=this;var r=this.state,n=r.sortBy,i=r.sortDir;var s=this.props,e=s.headerItemOnClick,o=s.actions;var l=n;var c=i;if(t.id===n){c=i&&i!==ke?ke:Ee;o.setWorkspacesByAppSortDir(c)}else{l=t.id;c=t.defaultSortType?t.defaultSortType===ke?Ee:ke:Ee;o.setWorkspacesByAppSortDir(c);o.setWorkspacesByAppSortBy(l)}var u={sortBy:l,sortDir:c};this.setState(function(){return u},function(){a.resetWorkspacesByAppsState();e&&e(t);o.setWorkspacesByAppLoading(true)})}},{key:"resetWorkspacesByAppsState",value:function e(){var t=this.props.actions;t.setWorkspacesByApp([]);t.setWorkspacesByAppApiCursor(null);t.setWorkspacesByAppLoading(false);t.setWorkspacesByAppApiTotal(null)}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=window.innerHeight;if(!this.tableViewControllerRef||!this.tableViewControllerRef.tableViewContainerNode)return;var a=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0];if(!a)return;var r=a.getBoundingClientRect();var n=this.props.isSelectionBarShowing?ge["a"]:1;var i=t-(r&&r.top);var s=64;var o=Math.max(s,i-n);var l={height:o+"px",paddingBottom:n};this.setState(l)}},{key:"makeHeader",value:function e(t){var a={id:t.id,value:t.header.value,className:t.header.className,"data-qa":t.header["data-qa"]};if(t.header.sortable){a.iconType=this.determineSortState(a.id,t.header);a.onClick=this.headerItemOnClick;t.header.defaultSortType&&(a.defaultSortType=t.header.defaultSortType)}return a}},{key:"makeHeaders",value:function e(t){var a=this;return t.map(function(e){return a.makeHeader(e)})}},{key:"determineSortState",value:function e(t,a){var r=this.state,n=r.sortBy,i=r.sortDir;var s=a.defaultSortType||ke;var o=we[s];if(!n||n!==t)return o;var l=void 0;l=i?i===ke?Ce:je:we[s];return l}},{key:"updateRowListItemsData",value:function e(){var t=this.props,a=t.workspacesByApp,r=t.workspacesByAppLoading,n=t.columns;var i=[];if(a&&a.length)i=a.map(function(e){var t=e.team_id;return{id:"row_"+t,items:n.map(function(a){return{id:"row_"+t+"_col_"+a.id,value:a.rowTemplate.value(e),className:a.rowTemplate.className}})}});else if(!r){var s=this.props.searchQuery;if(null===s||void 0===s||!s.length){this.setState(function(){return{rowListItems:i}});return}i=[{id:"row_search_query",items:[{id:"row_search_query_col",value:this.emptyRowTemplate.items[0].value({searchQuery:s})}]}]}this.setState(function(){return{rowListItems:i}})}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.sortBy,i=a.sortDir,s=a.height,o=a.rowListItems,l=a.offset,c=a.paddingBottom;var u=this.props,d=u.rowHeaderItemClassName,p=u.rowClassName,h=u.workspacesByAppLoading,v=u.columns;var m=this.makeHeaders(v);return n.a.createElement("div",{style:{paddingBottom:c}},n.a.createElement(be["a"],{rows:o,headers:m,rowHeaderItemClassName:d,rowClassName:p,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:r,sortDir:i,height:s,isLoading:h,newQuery:!l,ref:function e(a){t.tableViewControllerRef=a}}))}}]);return t}(r["PureComponent"]);Se.displayName="WorkspacesByAppList";Se.defaultProps=Oe;var Ie=Se;var Te=a(152);var Ae=a(1454);var Ne=a(1071);var Pe=a(1852);var Re=a(2396);var Me=new E["b"]("enterprise_dashboard");var De={orgName:y["b"].string};var xe={orgName:""};var Fe=function(e){_()(t,e);function t(){h()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=this.props.orgName;var a=cdn_url+"/91b7a/img/enterprise/empty_apps_state.png";var r=Me.t("This app hasn\u2019t been installed on {orgName}.",{orgName:t});return n.a.createElement("div",{className:"p-app_profile_empty_state_container"},n.a.createElement("img",{src:a,alt:"",className:"auto_width margin_bottom_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},r))}}]);return t}(r["PureComponent"]);Fe.displayName="AppProfileInstallationsEmptyState";Fe.defaultProps=xe;var Le=Fe;var Be=new E["b"]("enterprise_dashboard");var Ue={orgName:y["b"].string,appId:y["b"].string,workspacesByApp:y["b"].array,workspacesByAppFullCount:y["b"].number,workspacesByAppApiCursor:y["b"].string,workspacesByAppApiTotal:y["b"].number,workspacesByAppLoading:y["b"].bool,workspacesByAppSortBy:y["b"].string,workspacesByAppSortDir:y["b"].string,searchQuery:y["b"].string,selectCount:y["b"].number,undoSearchSelectionState:y["b"].object,columns:y["b"].array.isRequired,actions:y["b"].object.isRequired,featureWtaOrgLevelApps:y["b"].bool,toggleAllWorkspacesByApp:y["b"].func};var qe={orgName:"",appId:null,workspacesByApp:[],workspacesByAppFullCount:0,workspacesByAppApiCursor:void 0,workspacesByAppApiTotal:void 0,workspacesByAppLoading:void 0,workspacesByAppSortBy:void 0,workspacesByAppSortDir:void 0,selectCount:0,undoSearchSelectionState:void 0,searchQuery:"",featureWtaOrgLevelApps:false,toggleAllWorkspacesByApp:void 0};var Ge=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.undoFilterAndSelection=a.undoFilterAndSelection.bind(a);return a}m()(t,[{key:"getWorkspacesByAppListProps",value:function e(){var t=this.props,a=t.columns,r=t.appId,n=t.workspacesByApp,i=t.workspacesByAppApiCursor,s=t.workspacesByAppApiTotal,o=t.workspacesByAppLoading,l=t.searchQuery,c=t.actions,u=t.selectCount;return{columns:a,appId:r,workspacesByApp:n,workspacesByAppApiCursor:i,workspacesByAppApiTotal:s,workspacesByAppLoading:o,searchQuery:l,actions:c,isSelectionBarShowing:u>0}}},{key:"undoFilterAndSelection",value:function e(){var t=this.props,a=t.actions,r=t.undoSearchSelectionState;r&&a.undoWorkspacesByAppSearchSelection(r)}},{key:"renderAppFilterInput",value:function e(){var t=this.props,a=t.searchQuery,r=t.workspacesByAppLoading,i=t.actions;var s=Be.t("Filter by name...");var o=!!(a&&r);return n.a.createElement(Ae["a"],{placeholder:s,icon:"search",autoFocus:false,isLoading:o,onChange:i.onSearchInputChange,className:"p-app_management_filter_search_bar",value:this.props.searchQuery,"data-qa":"ent-app-profile-installations-filter"})}},{key:"renderUndoFilterAndSelectionAlert",value:function e(t,a){if(null===a)return null;var r=void 0;if(t){var i=a.workspaces_by_app_search_query;r=i?Be.t('Restore previous selection for filter "{filter}".',{filter:i}):Be.t("Restore previous selection and clear filter.")}return n.a.createElement(Te["d"],{className:"p-app_management_workspaces_by_app_alert",level:"warning"},n.a.createElement(Ne["a"],{onClick:this.undoFilterAndSelection},r))}},{key:"renderSelectionBar",value:function e(t){var a=t.featureWtaOrgLevelApps,r=t.workspacesByApp,i=t.workspacesByAppFullCount,s=t.selectCount,o=t.toggleAllWorkspacesByApp;if(!a)return null;var l=[{id:"uninstall",label:Be.t("Uninstall"),disabled:0===s,isDanger:true}];return n.a.createElement(Pe["a"],{position:"absolute",availableCount:i,selectedCount:s,items:r,actions:l,onToggleSelect:o,onToggleShowingSelection:j["noop"],onAction:j["noop"]})}},{key:"render",value:function e(){var t=[this.renderAppFilterInput()];var a=this.props,r=a.orgName,i=a.searchQuery,s=a.workspacesByAppApiTotal,o=a.workspacesByAppLoading,l=a.workspacesByAppApiCursor,c=a.undoSearchSelectionState,u=a.featureWtaOrgLevelApps;var d=this.getWorkspacesByAppListProps();var p=null===s||isNaN(s)?null:parseInt(s,10);var h=Be.t("{total, plural, =0 {Workspace Installations} =1 {# Workspace Installation} other {# Workspace Installations}}",{total:p});if(0===s&&!i&&!o&&l)return n.a.createElement("div",null,n.a.createElement(fe["a"],{"data-qa":"ent-app-profile-installations-action-bar",title:h,actions:t}),n.a.createElement("div",{className:"c-app_management_indent_half"},n.a.createElement(Le,{orgName:r})));return n.a.createElement("div",{className:"c-selection_bar_container c-selection_bar_container--position_relative"},n.a.createElement(fe["a"],{"data-qa":"ent-app-profile-installations-action-bar",title:h,actions:t}),this.renderUndoFilterAndSelectionAlert(u,c),n.a.createElement("div",{className:"c-app_management_indent_half p-app_management_workspaces_by_app_list"},n.a.createElement(Ie,d)),this.renderSelectionBar(this.props))}}]);return t}(r["PureComponent"]);Ge.displayName="AppManageWorkspaces";Ge.defaultProps=qe;var We=Ge;var He=a(292);var Ve=a(128);var Ke=a(126);var ze=new E["b"]("enterprise_dashboard");function Ye(e){var t=e.toggleAllWorkspacesByApp,a=e.toggleWorkspacesByApp,r=e.onWorkspaceNameClick,n=e.workspacesByApp,i=e.selectionState,s=e.showOrgLevelAppsUI;var o=[Ze({onWorkspaceNameClick:r}),Xe()];var l=s?[Je({selectionState:i,workspacesByApp:n,toggleAllWorkspacesByApp:t,toggleWorkspacesByApp:a})].concat(o):o.concat($e());return{columns:l,toggleAllWorkspacesByApp:t}}function Qe(e,t){var a=t.actions,r=t.dispatch;var n=a.apps;var i=333;var s=Object(He["bindActionCreators"])(n[e],r);var o=Object(j["debounce"])(function(e){var t=null!==e&&void 0!==e&&e.length?e:"";s.setWorkspacesByAppSearchQuery(t);s.resetWorkspacesByAppApiCursor()},i,{trailing:true});function l(e){var t=e.target.value;o(t)}return d()({},s,{onSearchInputChange:l})}function Je(e){var t=e.selectionState,a=e.workspacesByApp,r=void 0===a?[]:a,i=e.toggleAllWorkspacesByApp,s=e.toggleWorkspacesByApp;var o=function e(){return i("NONE"===t||"SOME"===t)};var l=function e(t){return s(!!t.target.checked,t.target.value)};var c=r.map(function(e){return e.team_id}).join(" ");return{id:"checkbox",header:{value:n.a.createElement(Ke["a"],{checked:"ALL"===t,indeterminate:"SOME"===t,"aria-controls":c,onChange:o,className:"p-app_management_workspaces_by_app_checkbox"}),sortable:false,"data-qa":"ent-app-profile-installations-header-name",className:"p-app_management_workspaces_by_app_checkbox_col"},rowTemplate:{value:function e(t){return n.a.createElement(Ke["a"],{id:t.team_id,checked:!!t.isSelected,value:t.team_id,onChange:l,className:"p-app_management_workspaces_by_app_checkbox"})},className:"p-app_management_workspaces_by_app_checkbox_col"}}}function Ze(e){var t=e.onWorkspaceNameClick;return{id:"team_name",header:{value:ze.t("Workspace"),sortable:true,"data-qa":"ent-app-profile-installations-header-name"},rowTemplate:{value:function e(a){var r=a&&a.icons&&a.icons.image_68;return n.a.createElement(Ve["a"],{className:"p-app_management_table_view_workspace_name","data-qa":"ent-app-profile-installations-row-name",onClick:function e(){return t(a.team_id)}},r&&n.a.createElement("img",{src:r,style:{width:"34px",height:"34px",verticalAlign:"middle",marginRight:"1rem"},alt:a.name}),n.a.createElement("span",{className:"bold"},a.team_name))}}}}function Xe(){return{id:"installed_on",header:{value:ze.t("Installed On"),sortable:true,"data-qa":"ent-app-profile-installations-header-installed_on"},rowTemplate:{value:function e(t){var a=t.installed_by&&t.installed_by&&t.installed_by.first_installation&&t.installed_by&&t.installed_by.first_installation.date;var r=new Date(1e3*a).toLocaleDateString();return n.a.createElement("div",null,r)}}}}function $e(){return{id:"installed_by",header:{value:ze.t("Installed By"),sortable:true,"data-qa":"ent-app-profile-installations-header-installed_by"},rowTemplate:{value:function e(t){var a=t.installed_by&&t.installed_by.count||1;var r=ze.t("{userCount, plural, =1 {# user} other {# users}}",{userCount:a});return n.a.createElement("div",null,r)}}}}var et={orgName:y["b"].string,appId:y["b"].string,workspacesByApp:y["b"].array,workspacesByAppFullCount:y["b"].number,workspacesByAppApiCursor:y["b"].string,workspacesByAppApiTotal:y["b"].number,workspacesByAppLoading:y["b"].bool,workspacesByAppSortBy:y["b"].string,workspacesByAppSortDir:y["b"].string,searchQuery:y["b"].string,selectionState:y["b"].string,selectCount:y["b"].number,actions:y["b"].object.isRequired,dispatch:y["b"].func.isRequired,featureWtaOrgLevelApps:y["b"].bool,showOrgLevelAppsUI:y["b"].bool,undoSearchSelectionState:y["b"].object};var tt={orgName:"",appId:null,workspacesByApp:[],workspacesByAppFullCount:0,workspacesByAppApiCursor:null,workspacesByAppApiTotal:null,workspacesByAppLoading:null,workspacesByAppSortBy:null,workspacesByAppSortDir:null,searchQuery:"",selectionState:"NONE",selectCount:0,featureWtaOrgLevelApps:false,showOrgLevelAppsUI:false,undoSearchSelectionState:null};var at=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=e.actions,n=e.dispatch;a.actions=Qe("installations",{actions:r,dispatch:n});a.generateAppsCSV=a.generateAppsCSV.bind(a);a.onWorkspaceNameClick=a.onWorkspaceNameClick.bind(a);a.toggleAllWorkspacesByApp=a.toggleAllWorkspacesByApp.bind(a);a.toggleWorkspacesByApp=a.toggleWorkspacesByApp.bind(a);return a}m()(t,[{key:"onWorkspaceNameClick",value:function e(t){var a=this.props,r=a.actions,n=a.dispatch;return n(r.router.navigateTo("/organization/teams/"+t))}},{key:"toggleAllWorkspacesByApp",value:function e(t){var a=this.props,r=a.workspacesByAppApiTotal,n=a.searchQuery;this.actions.toggleAllWorkspacesByApp({select:t,searchQuery:n,count:r})}},{key:"toggleWorkspacesByApp",value:function e(t,a){this.actions.toggleWorkspacesByApp({select:t,workspaces:[a]})}},{key:"generateAppsCSV",value:function e(){var t=this.props,a=t.searchQuery,r=t.workspacesByAppSortBy,n=t.workspacesByAppSortDir,i=t.appId,s=t.actions,o=t.dispatch;var l={type:"teams_by_app",app_id:i};a&&(l.query=a);if(r){l.sort_prefix=r;n&&(l.sort_dir=n)}o(s.apps.generateAppsCSVForSlackbotDM(l))}},{key:"render",value:function e(){var t=this.props,a=t.actions,r=t.dispatch,i=t.showOrgLevelAppsUI,s=me()(t,["actions","dispatch","showOrgLevelAppsUI"]);var o=Ye({selectionState:s.selectionState,workspacesByApp:s.workspacesByApp,toggleAllWorkspacesByApp:this.toggleAllWorkspacesByApp,toggleWorkspacesByApp:this.toggleWorkspacesByApp,onWorkspaceNameClick:this.onWorkspaceNameClick,showOrgLevelAppsUI:i});return n.a.createElement(We,d()({},o,s,{actions:this.actions}))}}]);return t}(r["PureComponent"]);at.displayName="AppProfileInstallations";at.defaultProps=tt;var rt=at;var nt=a(578);var it=new E["b"]("enterprise_dashboard");var st=function e(){var t=cdn_url+"/7bba7/img/enterprise/empty_apps_state_restricted.png";var a=it.t("Permissions can\u2019t be shown for this app");var r=it.rt("This app was not installed via the App Directory, which means Slack has not reviewed this app and can\u2019t confirm the permissions it requests.");var i=it.rt("If you have questions about the type of data this app can access, reach out to the person who installed it.");return n.a.createElement("div",{className:"p-app_profile_empty_state_container p-app_profile_permissions_empty_state_container"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100 margin_top_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},a),n.a.createElement("p",{className:"p-app_profile_permissions_empty_content"},r),n.a.createElement("p",{className:"p-app_profile_permissions_empty_content"},i))};st.displayName="AppProfilePermissionsEmptyState";var ot=st;var lt=new E["b"]("enterprise_dashboard");var ct={permissionsItems:y["b"].array,isDirectoryPublished:y["b"].bool,isXoxaApp:y["b"].bool,appId:y["b"].string};var ut={permissionsItems:[],isDirectoryPublished:false,isXoxaApp:false,appId:""};var dt=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={permissions:[],channelScopePermissions:[]};a.formatPermissions=a.formatPermissions.bind(a);return a}m()(t,[{key:"componentDidMount",value:function e(){this.formatPermissions(this.props.permissionsItems)}},{key:"componentWillReceiveProps",value:function e(t){this.props.permissionsItems!==t.permissionsItems&&this.formatPermissions(t.permissionsItems)}},{key:"formatPermissions",value:function e(t){var a=0;function r(){a+=1;return"scope_"+a+"_row"}var n=[];var i=[];t.forEach(function(e){if(!e.short_description&&!e.long_description)return;var t=r();e.is_channel_scope?i.push({key:t,scopes:[e.scope],short_description:e.short_description,long_description:e.long_description,is_dangerous:e.is_dangerous}):n.push({key:t,scopes:[e.scope],short_description:e.short_description,long_description:e.long_description,is_dangerous:e.is_dangerous})});var s={permissions:n,channelScopePermissions:i};this.setState(s)}},{key:"render",value:function e(){var t=this.props.isXoxaApp;var a=this.state,r=a.channelScopePermissions,i=a.permissions;if(!this.props.isDirectoryPublished&&"A02"!==this.props.appId)return n.a.createElement(ot,null);var s=void 0;s=t?lt.t("On workspaces, this app will be able to:"):lt.t("This app will be able to:");var o=lt.t("When added to a channel, this app will also be able to:");if(r.length)return n.a.createElement("div",{className:"p-app_profile_permission"},n.a.createElement("h2",{className:"padding_top_250 padding_bottom_100 padding_left_100"},s),n.a.createElement(nt["a"],{scopeInfo:i,key:"permissions"}),n.a.createElement("h2",{className:"padding_top_400 padding_bottom_100 padding_left_100"},o),n.a.createElement(nt["a"],{scopeInfo:r,key:"channelScopePermissions"}));return n.a.createElement("div",{className:"p-app_profile_permission"},n.a.createElement("h2",{className:"padding_top_150 padding_bottom_100 padding_left_100"},s),n.a.createElement(nt["a"],{scopeInfo:i}))}}]);return t}(r["PureComponent"]);dt.displayName="AppProfilePermissions";dt.defaultProps=ut;var pt=dt;var ht=a(1831);var vt=a(95);var mt=a(84);var ft=new E["b"]("enterprise_dashboard");var bt={appName:y["b"].string.isRequired,appIcon:y["b"].string.isRequired,featureWtaOrgLevelApps:y["b"].bool,onDisable:y["b"].func,onEnable:y["b"].func,orgName:y["b"].string.isRequired};var gt={onDisable:j["noop"],onEnable:j["noop"],featureWtaOrgLevelApps:false};var _t=function e(t){var a=t.appIcon,r=t.appName,i=t.featureWtaOrgLevelApps,s=t.onEnable,o=t.onDisable,l=t.orgName;if(!i)return null;var c=ft.t("Automatically install {appName} on new workspaces?",{appName:Object(E["o"])(r)});var u=ft.t("{appName} will be automatically installed on newly created workspaces and workspaces that are migrated into {orgName}. You can change this policy later",{appName:Object(E["o"])(r),orgName:Object(E["o"])(l)});return n.a.createElement(mt["a"],{cancelText:ft.t("No"),contentLabel:c,"data-qa":"app_automatic_install_dialog",goButtonText:ft.t("Yes"),onCancel:o,onGo:s,showCancelButton:true,title:c,titleImage:a,truncateTitle:false},u)};_t.displayName="AppAutomaticInstallDialog";_t.defaultProps=gt;var yt=Object(vt["pure"])(_t);var Ot=new E["b"]("enterprise_dashboard");var kt={appIcon:y["b"].string.isRequired,appName:y["b"].string.isRequired,automaticInstallEnabled:y["b"].bool,featureWtaOrgLevelApps:y["b"].bool,orgName:y["b"].string.isRequired,openModal:y["b"].func};var Et={automaticInstallEnabled:false,featureWtaOrgLevelApps:false,openModal:j["noop"]};var Ct=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.showAutomaticInstallDialog=a.showAutomaticInstallDialog.bind(a);return a}m()(t,[{key:"showAutomaticInstallDialog",value:function e(){var t=this.props,a=t.appIcon,r=t.appName,i=t.featureWtaOrgLevelApps,s=t.orgName;var o={appIcon:a,appName:r,featureWtaOrgLevelApps:i,orgName:s};this.props.openModal({element:n.a.createElement(yt,o)})}},{key:"render",value:function e(){var t=this.props,a=t.appName,r=t.automaticInstallEnabled,i=t.featureWtaOrgLevelApps,s=t.orgName;if(!i)return null;var o={className:"no_border",control:{editOnly:true,onEdit:this.showAutomaticInstallDialog,type:"button"},description:Ot.t("Set whether {appName} will be automatically installed on newly created workspaces and any workspaces migrated into {orgName}.",{appName:Object(E["o"])(a),orgName:Object(E["o"])(s)}),label:Ot.t("Automatic Installation"),onClick:this.showAutomaticInstallDialog,state:r?Ot.t("Enabled"):Ot.t("Disabled"),type:""};return n.a.createElement("div",{className:"c-app_management_indent_half border_top"},n.a.createElement(ht["a"],o))}}]);return t}(r["PureComponent"]);Ct.displayName="AppProfilePolicies";Ct.defaultProps=Et;var jt=Ct;var wt={openModal:B["openModal"]};var St=Object(o["connect"])(null,wt)(Ct);var It=new E["b"]("enterprise_dashboard");var Tt=y["b"].shape({workspacesByApp:y["b"].array,workspacesByAppFullCount:y["b"].number,workspacesByAppApiCursor:y["b"].string,workspacesByAppApiTotal:y["b"].number,workspacesByAppLoading:y["b"].bool,workspacesByAppSortBy:y["b"].string,workspacesByAppSortDir:y["b"].string,searchQuery:y["b"].string,selectionState:y["b"].string,selectCount:y["b"].number,undoSearchSelectionState:y["b"].object});var At={appName:y["b"].string.isRequired,appId:y["b"].string,appImageSrc:y["b"].string.isRequired,appImageSrcLarge:y["b"].string,appByline:y["b"].string,appScope:y["b"].oneOfType([y["b"].object,y["b"].string,y["b"].array]),automaticInstallEnabled:y["b"].bool,userIsCreationTeamMember:y["b"].bool,headerActions:y["b"].array,isOpen:y["b"].bool,isDirectoryPublished:y["b"].bool,isInstalledEverywhere:y["b"].bool,isSlackIntegration:y["b"].bool,orgName:y["b"].string,installations:Tt,appsDetailViewSelectedTab:y["b"].string,appsDetailViewWorkspaceContext:y["b"].string,appsDetailViewWorkspaceDomain:y["b"].string,currentUserTeams:y["b"].array,rootURL:y["b"].string.isRequired,isXoxaApp:y["b"].bool,isDistributedApp:y["b"].bool,orgTeams:y["b"].array,actions:y["b"].object.isRequired,dispatch:y["b"].func.isRequired,featureWtaOrgLevelApps:y["b"].bool};var Nt={appId:"",appByline:"",appImageSrcLarge:void 0,appScope:[],automaticInstallEnabled:false,userIsCreationTeamMember:false,headerActions:[],isOpen:true,isDirectoryPublished:false,isInstalledEverywhere:false,isSlackIntegration:false,orgName:"",installations:{workspacesByApp:[],workspacesByAppFullCount:0,workspacesByAppApiCursor:null,workspacesByAppApiTotal:null,workspacesByAppLoading:null,workspacesByAppSortBy:null,workspacesByAppSortDir:null,searchQuery:"",selectionState:"NONE",selectCount:0,undoSearchSelectionState:null},appsDetailViewSelectedTab:"installations",appsDetailViewWorkspaceDomain:null,appsDetailViewWorkspaceContext:null,currentUserTeams:[],isXoxaApp:false,isDistributedApp:true,orgTeams:null,featureWtaOrgLevelApps:false};var Pt=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.navigateToProfileTab=a.navigateToProfileTab.bind(a);a.navigateToAppDirectory=a.navigateToAppDirectory.bind(a);return a}m()(t,[{key:"navigateToProfileTab",value:function e(t){var a=this.props,r=a.actions,n=a.dispatch;return n(r.router.navigateTo("/organization/apps/profile/"+this.props.appId+"/"+t))}},{key:"navigateToAppDirectory",value:function e(){var t=this.props,a=t.appsDetailViewWorkspaceContext,r=t.appsDetailViewWorkspaceDomain,n=t.userIsCreationTeamMember,i=t.currentUserTeams,s=t.rootURL,o=t.orgTeams;var l=void 0;if(a&&i&&Object(j["includes"])(i,a)){var c="https://"+(r||"my")+"."+s.replace(/(http:\/\/|https:\/\/)/,"");l=c+"apps/"+this.props.appId+"?from_org_dashboard=1"}else if(n)l=s+"apps/"+this.props.appId+"?from_org_dashboard=1";else if(i&&i.length){var u=Object(j["find"])(o,function(e){return e.id===i[0]});l="https://"+u.domain+"."+s.replace(/(http:\/\/|https:\/\/)/,"")+"apps/"+this.props.appId+"?from_org_dashboard=1"}else l=s+"apps/"+this.props.appId+"?from_org_dashboard=1";window.open(l,"_blank")}},{key:"renderInstallationsContent",value:function e(){var t=this.props,a=t.installations,r=t.orgName,i=t.appId,s=t.isXoxaApp,o=t.actions,l=t.dispatch,c=t.featureWtaOrgLevelApps;return n.a.createElement(rt,d()({},a,{orgName:r,appId:i,actions:o,dispatch:l,featureWtaOrgLevelApps:c,showOrgLevelAppsUI:s&&c}))}},{key:"renderPermissionsContent",value:function e(){return n.a.createElement(pt,{permissionsItems:this.props.appScope,isDirectoryPublished:this.props.isDirectoryPublished,isXoxaApp:this.props.isXoxaApp,appId:this.props.appId})}},{key:"renderPoliciesContent",value:function e(){var t=this.props,a=t.appImageSrc,r=t.appName,i=t.automaticInstallEnabled,s=t.featureWtaOrgLevelApps,o=t.orgName;return n.a.createElement(St,{appIcon:a,appName:r,automaticInstallEnabled:i,featureWtaOrgLevelApps:s,orgName:o})}},{key:"renderHeaderActions",value:function e(){var t=this.props,a=t.appImageSrcLarge,r=t.appName,i=t.appScope,s=t.featureWtaOrgLevelApps,o=t.headerActions,l=t.isInstalledEverywhere,c=t.isXoxaApp;return s&&c?o.concat(n.a.createElement(he,{appName:r,appIcon:a,featureWtaOrgLevelApps:s,isInstalledEverywhere:l,scopes:i})):o}},{key:"render",value:function e(){var t=this.props,a=t.actions,r=t.appByline,i=t.appImageSrc,s=t.appName,o=t.currentUserTeams,l=t.dispatch,c=t.featureWtaOrgLevelApps,u=t.isDistributedApp,d=t.isOpen,p=t.isSlackIntegration,h=t.isXoxaApp,v=t.userIsCreationTeamMember;var m=u&&o&&o.length||v;var f=[{title:It.t("Installations"),id:"installations",content:this.renderInstallationsContent(),onClick:this.navigateToProfileTab}];p||f.push({title:It.t("Permissions"),id:"permissions",content:this.renderPermissionsContent(),onClick:this.navigateToProfileTab});c&&h&&f.push({title:It.t("Policies"),id:"policies",content:this.renderPoliciesContent(),onClick:this.navigateToProfileTab});m&&f.push({title:It.t("App Details"),icon:"external-link",id:"details",content:"",isExternalLink:true,onClick:this.navigateToAppDirectory});var b={actions:a,appByline:r,appImageSrc:i,appName:s,dispatch:l,headerActions:this.renderHeaderActions(),isOpen:d};return n.a.createElement("div",{className:"p-app_profile","data-qa":"ent-app-profile"},n.a.createElement(x,b),n.a.createElement(C["a"],{tabs:f,defaultTabId:this.props.appsDetailViewSelectedTab}))}}]);return t}(r["PureComponent"]);Pt.displayName="BaseAppProfile";Pt.defaultProps=Nt;var Rt=Object(w["a"])("feature_wta_org_level_apps")(Pt);var Mt=new E["b"]("enterprise_dashboard");var Dt=function(e){_()(t,e);function t(){h()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"render",value:function e(){var t=Mt.t("Apps");return n.a.createElement("div",{className:"c-app_management_indent"},n.a.createElement("h1",null,t))}}]);return t}(r["Component"]);Dt.displayName="AppManagementHeader";var xt=Dt;var Ft=a(159);var Lt=a(1321);var Bt=a(392);var Ut=a(2397);var qt={isOpen:y["b"].bool.isRequired,title:y["b"].string.isRequired,subtext:y["b"].string.isRequired,contextButtonLabel:y["b"].string.isRequired,onDownloadClick:y["b"].func,contextCaption:y["b"].string,onContextBlur:y["b"].func};var Gt={onDownloadClick:j["noop"],contextCaption:"",onContextBlur:j["noop"]};var Wt=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleOnContextUnfocus=a.handleOnContextUnfocus.bind(a);return a}m()(t,[{key:"componentWillReceiveProps",value:function e(t){t.isOpen?document.addEventListener("click",this.handleOnContextUnfocus,false):document.removeEventListener("click",this.handleOnContextUnfocus,false)}},{key:"handleOnContextUnfocus",value:function e(t){this.props.onContextBlur(t,this.node)}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.isOpen,i=a.title,s=a.subtext,o=a.contextButtonLabel,l=a.onDownloadClick,c=a.contextCaption;var u=k()("p-export_csv_context","menu",{"p-export_csv_context--hidden":!r});return n.a.createElement("div",{className:u,ref:function e(a){t.node=a}},n.a.createElement("div",{className:"p-export_csv_context_subtext"},n.a.createElement("h4",{className:"black"},i),n.a.createElement("p",{className:"break_word"},s),n.a.createElement(U["d"],{onClick:l,className:"p-export_csv_context_button"},o)),c&&n.a.createElement("div",{className:"p-export_csv_context_caption"},c))}}]);return t}(r["PureComponent"]);Wt.displayName="ExportContext";Wt.defaultProps=Gt;var Ht=Wt;var Vt=new E["b"]("enterprise_dashboard");var Kt={title:y["b"].string.isRequired,subtext:y["b"].string.isRequired,contextButtonLabel:y["b"].string.isRequired,onDownloadClick:y["b"].func,contextCaption:y["b"].string,buttonSize:y["b"].string};var zt={onDownloadClick:j["noop"],contextCaption:"",buttonSize:"medium"};var Yt=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onButtonClick=a.onButtonClick.bind(a);a.onDownloadButtonClick=a.onDownloadButtonClick.bind(a);a.onContextBlur=a.onContextBlur.bind(a);a.state={contextIsOpen:false};return a}m()(t,[{key:"onButtonClick",value:function e(){this.setState(function(e){return{contextIsOpen:!e.contextIsOpen}})}},{key:"onContextBlur",value:function e(t,a){a.contains(t.target)||this.state.contextIsOpen&&this.setState(function(){return{contextIsOpen:false}})}},{key:"onDownloadButtonClick",value:function e(){this.props.onDownloadClick();this.onButtonClick()}},{key:"render",value:function e(){var t=this.props,a=t.title,r=t.subtext,i=t.contextButtonLabel,s=t.contextCaption,o=t.buttonSize;var l=Vt.t("Export CSV");return n.a.createElement("div",null,n.a.createElement(U["d"],{type:"outline",onClick:this.onButtonClick,size:o,className:"p-export_csv_button"},l,n.a.createElement(S["a"],{type:"caret_down",className:"p-export_csv_button_caret"})),n.a.createElement(Ht,{isOpen:this.state.contextIsOpen,title:a,subtext:r,contextButtonLabel:i,onDownloadClick:this.onDownloadButtonClick,contextCaption:s,onContextBlur:this.onContextBlur}))}}]);return t}(r["PureComponent"]);Yt.displayName="ExportCSVButton";Yt.defaultProps=zt;var Qt=Yt;var Jt=Qt;var Zt=new E["b"]("enterprise_dashboard");var Xt={title:y["b"].string.isRequired,onDownloadClick:y["b"].func,buttonSize:y["b"].string};var $t={onDownloadClick:j["noop"],buttonSize:"small"};var ea=function(e){_()(t,e);function t(){h()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=this.props.buttonSize;var a=Zt.t("Your CSV may take a bit of time to generate. It\u2019ll be sent to you in Slack as soon as it\u2019s ready.");var r=Zt.t("Includes everything");var i=Zt.t("Generate CSV");return n.a.createElement(Jt,{onDownloadClick:this.props.onDownloadClick,title:this.props.title,subtext:r,contextButtonLabel:i,contextCaption:a,buttonSize:t})}}]);return t}(r["PureComponent"]);ea.displayName="AppManagementCSVPopup";ea.defaultProps=$t;var ta=ea;var aa=ta;var ra=new E["b"]("enterprise_dashboard");var na={orgName:y["b"].string};var ia={orgName:""};var sa=function(e){_()(t,e);function t(){h()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=cdn_url+"/91b7a/img/enterprise/empty_apps_state.png";var a=Object(E["o"])(this.props.orgName);var r=ra.t("{orgName} has no apps installed.",{orgName:a});return n.a.createElement("div",{className:"p-app_management_empty_state_container"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},r))}}]);return t}(r["PureComponent"]);sa.displayName="InstalledAppsEmptyState";sa.defaultProps=ia;var oa=sa;var la=a(50);var ca=a(12);var ua=new E["b"]("enterprise_dashboard");var da={orgApps:y["b"].array,orgAppsApiCursor:y["b"].string,orgAppsLoading:y["b"].bool,orgAppsApiTotal:y["b"].number,headerItemOnClick:y["b"].func,pageSize:y["b"].number,sortBy:y["b"].string,sortDir:y["b"].string,searchQuery:y["b"].string,rowHeaderItemClassName:y["b"].string,rowClassName:y["b"].string,featureEntAppManagementRestriction:y["b"].bool,featureWtaOrgLevelApps:y["b"].bool};var pa={orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,headerItemOnClick:j["noop"],pageSize:50,sortBy:"name",sortDir:null,searchQuery:"",rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",featureEntAppManagementRestriction:false,featureWtaOrgLevelApps:false};var ha="asc";var va="desc";var ma="caret_down";var fa="caret_up";var ba={};ba[ha]=ma;ba[va]=fa;var ga=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=a.props,i=r.sortBy,s=r.sortDir;a.state={rowListItems:[],sortBy:i,sortDir:s,offset:0,activeMenuForAppId:null};a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(a);a.onToggleMenuClick=a.onToggleMenuClick.bind(a);a.maybeHideMenu=a.maybeHideMenu.bind(a);a.onRequestNextPage=a.onRequestNextPage.bind(a);a.nodeHasClass=a.nodeHasClass.bind(a);a.nodeIsChildOfClassName=a.nodeIsChildOfClassName.bind(a);a.appSources={internal:ua.t("Internal"),"app directory":ua.t("App Directory"),unknown:ua.t("Unknown")};a.sourceTooltipStrings={"app directory":ua.t("This app has been installed from the Slack App Directory."),internal:ua.t("This app was created by someone within your organization."),unknown:ua.t("This app was installed from an unknown external source.")};a.rowTemplate={items:[{value:function e(t){var r=t&&t.icons&&t.icons.image_72;return n.a.createElement(Ve["a"],{className:"p-app_management_table_view_app_name","data-qa":"ent-apps-installed-row-name",onClick:function e(){return a.onAppNameClick(t.id)}},r&&n.a.createElement("img",{src:r,style:{width:"36px",height:"36px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),t.name)}},{value:function e(t){var a=t.teams_installed_on&&t.teams_installed_on.count||0;return ua.t("{count, plural, =1 {# workspace} other {# workspaces}}",{count:a})}},{value:function e(t){var r=a.sourceTooltipStrings[t.source];var i=a.appSources[t.source]||a.appSources.unknown;return n.a.createElement("div",null,n.a.createElement(la["c"],{tip:r,position:"top"},n.a.createElement("span",null,i)))},className:"c-table_view_row_item_source"}]};a.props.featureWtaOrgLevelApps&&a.rowTemplate.items.push({value:function e(t){return t.automatic_install_enabled?ua.t("Yes"):ua.t("No")}});a.props.featureEntAppManagementRestriction&&a.rowTemplate.items.push({value:function e(t){var r=a.state.activeMenuForAppId;var i={width:"15rem",kbNavActive:true,stripTerminalSeparators:true};var s=void 0;if(r&&r===t.id){var o=n.a.createElement("span",null,"Restrict this app...");var l=n.a.createElement("span",null,"View in App Directory ",n.a.createElement(S["b"],{type:"external-link",size:"inherit"}));s=n.a.createElement("div",{className:"c-app_management_menu_container"},n.a.createElement(q["f"],i,n.a.createElement(q["b"],{key:"org_app_menu_1",label:o,onSelected:function e(){a.onRestrictAppClick(t.id)}}),n.a.createElement(q["d"],{key:"org_app_menu_separator"}),n.a.createElement(q["b"],{key:"org_app_menu_2",label:l,href:"https://example.com",target:"_blank"})))}return n.a.createElement("div",null,n.a.createElement(Ve["a"],{className:"c-app_management_menu_trigger",onClick:a.onToggleMenuClick,"data-app-id":t.id},"\u2026"),s)},className:"p-app_management_table_menu"});a.emptyRowTemplate={items:[{value:function e(t){var a=t.searchQuery;var r=ua.rt("No apps were found matching <b>{query}</b>",{query:a});return n.a.createElement("div",{className:"align_center"},r)}}]};a.headerData=[{id:"name",value:ua.t("Name"),sortable:true,className:"p-app_management_table_header_name"},{id:"num_installed",value:ua.t("Installed On"),sortable:true,className:"p-app_management_table_header_installed_on"},{id:"source",value:ua.t("Source"),sortable:true,className:"p-app_management_table_header_source"}];a.props.featureWtaOrgLevelApps&&a.headerData.push({id:"automatic_install_enabled",value:ua.t("Automatic Install"),sortable:true});a.props.featureEntAppManagementRestriction&&a.headerData.push({id:"menu",value:"",noHover:true,className:"p-app_management_table_header_menu"});return a}m()(t,[{key:"componentWillMount",value:function e(){var t=this.props,a=t.orgApps,r=t.sortBy;var n=this.state.offset;if(a.length){this.updateRowListItemsData(n);Object(Ft["b"])(Object(Ft["a"])().apps.setOrgAppsLoading(false))}else Object(Ft["b"])(Object(Ft["a"])().apps.setOrgAppsLoading(true));Object(Ft["b"])(Object(Ft["a"])().apps.setOrgAppsSortBy(r))}},{key:"componentDidMount",value:function e(){this.props.featureEntAppManagementRestriction&&window.addEventListener("click",this.maybeHideMenu)}},{key:"componentWillReceiveProps",value:function e(t){this.maybeUpdateSearchQuery(t)}},{key:"componentDidUpdate",value:function e(t,a){this.maybeUpdateListRowItems(t,a);this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("click",this.maybeHideMenu)}},{key:"onRequestNextPage",value:function e(t){var a=this.props,r=a.orgApps,n=a.orgAppsApiTotal;if(n&&r.length>=n)return;this.fetchNewPage();var i={offset:t};this.setState(i)}},{key:"onRestrictAppClick",value:function e(t){Object(ca["b"])().warn("onRestrictAppClick",t);this.hideMenu()}},{key:"onAppNameClick",value:function e(t){return Object(Ft["b"])(Object(Ft["a"])().router.navigateTo("/organization/apps/profile/"+t))}},{key:"onToggleMenuClick",value:function e(t){var a=t.target.getAttribute("data-app-id");var r=this.state.activeMenuForAppId;var n=a===r?null:a;var i={activeMenuForAppId:n};this.setState(i)}},{key:"maybeHideMenu",value:function e(t){if(!t)return false;var a=this.state.activeMenuForAppId;if(!a)return false;var r=t&&t.target;if(!r)return false;var n=this.nodeIsChildOfClassName(r,"c-app_management_menu_trigger")||this.nodeIsChildOfClassName(r,"c-menu");if(n)return false;this.hideMenu();return true}},{key:"hideMenu",value:function e(){var t={activeMenuForAppId:null};this.setState(t)}},{key:"nodeHasClass",value:function e(t,a){if(!t||void 0===a||!a.length)return false;if(t&&t.classList&&t.classList.contains)return t.classList.contains(a);return!!(t.className&&t.className.length&&t.className.split(" ").includes(a))}},{key:"nodeIsChildOfClassName",value:function e(t,a){var r=t;if(!r||!a)return false;if(this.nodeHasClass(r,a))return true;if(!r.parentNode)return false;while(!this.nodeHasClass(r,a)&&r.parentNode)r=r.parentNode;return this.nodeHasClass(r,a)}},{key:"maybeFetchNextPage",value:function e(t){var a=this.props.orgAppsLoading;a&&!t.orgAppsLoading&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var a=this.props.searchQuery;if(t.searchQuery!==a){Object(Ft["b"])(Object(Ft["a"])().apps.setOrgAppsSearchQuery(t.searchQuery));this.resetOrgAppsState()}}},{key:"maybeUpdateListRowItems",value:function e(t,a){var r=this.state,n=r.offset,i=r.activeMenuForAppId;var s=this.props,o=s.searchQuery,l=s.orgApps,c=s.orgAppsLoading;t.orgApps===l&&t.searchQuery===o&&t.orgAppsLoading===c&&a.activeMenuForAppId===i||this.updateRowListItemsData(n)}},{key:"headerItemOnClick",value:function e(t){var a=this;var r=this.state,n=r.sortBy,i=r.sortDir;var e=this.props.headerItemOnClick;var s=n;var o=i;if(t.id===n){o=i&&i!==ha?ha:va;Object(Ft["b"])(Object(Ft["a"])().apps.setOrgAppsSortDir(o))}else{s=t.id;o=t.defaultSortType?t.defaultSortType===ha?va:ha:va;Object(Ft["b"])(Object(Ft["a"])().apps.setOrgAppsSortDir(o));Object(Ft["b"])(Object(Ft["a"])().apps.setOrgAppsSortBy(s))}var l={sortBy:s,sortDir:o};this.setState(function(){return l},function(){a.resetOrgAppsState();e&&e(t)})}},{key:"resetOrgAppsState",value:function e(){Object(Ft["b"])(Object(Ft["a"])().apps.setOrgAppsApiTotal(null));Object(Ft["b"])(Object(Ft["a"])().apps.resetOrgAppsApiCursor());Object(Ft["b"])(Object(Ft["a"])().apps.resetOrgApps());Object(Ft["b"])(Object(Ft["a"])().apps.setOrgAppsLoading(true))}},{key:"makeHeader",value:function e(t){var a={id:t.id,value:t.value,noHover:t.noHover,className:t.className};if(t.sortable){a.iconType=this.determineSortState(t.id,t);a.onClick=this.headerItemOnClick;t.defaultSortType&&(a.defaultSortType=t.defaultSortType)}return a}},{key:"makeHeaders",value:function e(t){var a=this;var r=[];t.forEach(function(e){r.push(a.makeHeader(e))});return r}},{key:"determineSortState",value:function e(t,a){var r=this.state,n=r.sortBy,i=r.sortDir;var s=a.defaultSortType||ha;var o=ba[s];if(!n||n!==t)return o;var l=void 0;l=i?i===ha?ma:fa:ba[s];return l}},{key:"resetAPICursorMark",value:function e(){Object(Ft["b"])(Object(Ft["a"])().apps.setOrgAppsApiCursor(null))}},{key:"fetchNewPage",value:function e(){var t=this.state,a=t.sortBy,r=t.sortDir;var n=this.props,i=n.pageSize,s=n.searchQuery,o=n.orgAppsApiCursor;var l={limit:i};a&&(l.sort=a);r&&(l.sort_dir=r);null!==s&&void 0!==s&&Object(j["trim"])(s).length&&(l.query=s);o&&(l.cursor=o);Object(Ft["b"])(Object(Ft["a"])().apps.setOrgAppsLoading(true));Object(Ft["b"])(Object(Ft["a"])().apps.getOrgApps(l))}},{key:"updateRowListItemsData",value:function e(t){var a=this;var r=[];var n=t||0;var i=0;var s=this.props,o=s.orgApps,l=s.orgAppsLoading;var c={rowListItems:r};function u(){i+=1;return"row_"+n+"_item"+i}function d(e,t){var a={id:"row_"+n,items:[]};if(!t||!t.items)return[];t.items.forEach(function(t){var r={value:t.value(e),id:u()};t.className&&(r.className=t.className);a.items.push(r)});n+=1;return a}if(o&&o.length)o.forEach(function(e){r.push(d(e,a.rowTemplate))});else if(!l){var p=this.props.searchQuery;if(null===p||void 0===p||!p.length){this.setState(c);return}var h=[{searchQuery:p}];h.forEach(function(e){r.push(d(e,a.emptyRowTemplate))})}this.setState(c)}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.sortBy,i=a.sortDir,s=a.rowListItems,o=a.offset;var l=this.props,c=l.orgAppsLoading,u=l.searchQuery,d=l.rowHeaderItemClassName,p=l.rowClassName;var h=this.makeHeaders(this.headerData);return n.a.createElement("div",null,n.a.createElement(be["a"],{autoHeight:true,rows:s,headers:h,rowHeaderItemClassName:d,rowClassName:p,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:r,sortDir:i,searchQuery:u,isLoading:c,newQuery:!o,ref:function e(a){t.tableViewControllerRef=a}}))}}]);return t}(r["PureComponent"]);ga.displayName="OrgAppsList";ga.defaultProps=pa;var _a=Object(w["a"])("feature_wta_org_level_apps")(ga);var ya=a(2125);var Oa=new E["b"]("enterprise_dashboard");var ka=333;var Ea={orgName:y["b"].string.isRequired,orgApps:y["b"].array,orgAppsApiCursor:y["b"].string,orgAppsApiTotal:y["b"].number,orgAppsLoading:y["b"].bool,orgAppsSortDir:y["b"].string,orgAppsSortBy:y["b"].string,searchQuery:y["b"].string,featureEntAppManagementRestriction:y["b"].bool};var Ca={orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:"",featureEntAppManagementRestriction:false};var ja=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSearchInputChange=a.onSearchInputChange.bind(a);a.onSearchInputChangeDelayed=Object(j["debounce"])(a.onSearchInputChangeDelayed,ka,{trailing:true}).bind(a);a.generateAppsCSV=a.generateAppsCSV.bind(a);return a}m()(t,[{key:"onSearchInputChange",value:function e(t){var a=t.target.value;this.onSearchInputChangeDelayed(a)}},{key:"onSearchInputChangeDelayed",value:function e(t){var a=null!==t&&void 0!==t&&t.length?t:null;Object(Ft["b"])(Object(Ft["a"])().apps.setOrgAppsSearchQuery(a));Object(Ft["b"])(Object(Ft["a"])().apps.resetOrgAppsApiCursor())}},{key:"getOrgAppsListProps",value:function e(){var t={orgApps:this.props.orgApps,orgAppsApiCursor:this.props.orgAppsApiCursor,orgAppsApiTotal:this.props.orgAppsApiTotal,orgAppsLoading:this.props.orgAppsLoading,searchQuery:this.props.searchQuery,featureEntAppManagementRestriction:this.props.featureEntAppManagementRestriction};return t}},{key:"formatTitleString",value:function e(t){if(null!==t&&!Number.isNaN(t)&&t>0)return Oa.t("{orgAppsApiTotal, plural, =1 {# Installed App} other {# Installed Apps}}",{orgAppsApiTotal:t});return Oa.t("Installed Apps")}},{key:"generateAppsCSV",value:function e(){var t=this.props,a=t.orgAppsSortDir,r=t.orgAppsSortBy,n=t.searchQuery;var i={type:"apps"};n&&(i.query=n);if(r){i.sort_prefix=r;a&&(i.sort_dir=a)}Object(Ft["b"])(Object(Ft["a"])().apps.generateAppsCSVForSlackbotDM(i))}},{key:"renderExportButton",value:function e(){var t=this.props.orgAppsApiTotal;var a=Oa.t("Installed Apps");if(!t)return null;return n.a.createElement(aa,{title:a,query:this.props.searchQuery,onDownloadClick:this.generateAppsCSV})}},{key:"renderAppFilterInput",value:function e(){var t=Oa.t("Filter by name...");return n.a.createElement("div",null,n.a.createElement(Bt["a"],{placeholder:t,icon:"search",autoFocus:false,isLoading:this.props.orgAppsLoading,onChange:this.onSearchInputChange,className:"p-app_management_filter_search_bar",value:this.props.searchQuery,size:"small"}))}},{key:"render",value:function e(){var t=this.props,a=t.orgAppsApiTotal,r=t.orgAppsLoading,i=t.searchQuery,s=t.orgAppsApiCursor;var o=[this.renderExportButton(),this.renderAppFilterInput()];var l=this.getOrgAppsListProps();if(0===a&&!i&&!r&&s)return n.a.createElement("div",{className:"p-app_management_installed_apps"},n.a.createElement(Lt["a"],{"data-qa":"ent-apps-installed-action-bar",title:this.formatTitleString(a),actions:o}),n.a.createElement(oa,{orgName:this.props.orgName}));return n.a.createElement("div",{className:"p-app_management_installed_apps"},n.a.createElement(Lt["a"],{"data-qa":"ent-apps-installed-action-bar",title:this.formatTitleString(a),actions:o}),n.a.createElement("div",{className:"c-app_management_indent_half"},n.a.createElement(_a,l)))}}]);return t}(r["PureComponent"]);ja.displayName="AppManagementInstalledApps";ja.defaultProps=Ca;var wa=ja;var Sa=wa;var Ia=a(1504);var Ta={};var Aa=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={};return a}m()(t,[{key:"render",value:function e(){var t="This data set is large, so your CSV will take some time to generate. We'll send it to you in Slack as soon as it's ready.";return n.a.createElement(Jt,{title:"Restricted Apps",subtext:"Includes everything",contextButtonLabel:"Generate CSV",contextCaption:t,buttonSize:"small"})}}]);return t}(r["PureComponent"]);Aa.displayName="RestrictedAppsExportCSV";var Na=Aa;var Pa="desc";var Ra=[{id:"name",value:"Name",sortable:true},{id:"restricted_on",value:"Restricted On",sortable:true,defaultSortType:Pa},{id:"restricted_by",value:"Restricted By"},{id:"exceptions",value:"Exceptions"},{id:"existing",value:"Existing Installations"}];function Ma(e){var t=new Date(e||parseInt(Math.random()*(new Date).getTime(),10));return t.toDateString()}var Da={items:[{value:function e(t){var a=void 0;t.profile?a=t.profile.image_48:t.icon&&(a=t.icon.image_34);if(a)return n.a.createElement("span",null,n.a.createElement("img",{src:a,style:{width:"24px",height:"24px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),n.a.createElement("b",null,t.name));return n.a.createElement("b",null,t.name)}},{value:function e(t){return Ma(1e3*t.updated)}},{value:function e(t){return t.name}},{value:function e(){var t=parseInt(10*Math.random(),10);var a=void 0;a=0===t?"None":t+" "+(1===t?"exception":"exceptions");return a}},{value:function e(){var t=parseInt(1024*Math.random(),10);var a=1===t?"workspace":"workspaces";return t+" "+a}}]};var xa=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onIconClick=a.onIconClick.bind(a);a.onCoachmarkSkip=a.onCoachmarkSkip.bind(a);a.onCoachmarkContinue=a.onCoachmarkContinue.bind(a);a.onSearchInputChange=a.onSearchInputChange.bind(a);a.state={showCoachmark:true,isSearching:false};return a}m()(t,[{key:"onIconClick",value:function e(){this.setState(function(){return{showCoachmark:true}})}},{key:"onCoachmarkSkip",value:function e(){this.setState(function(){return{showCoachmark:false}})}},{key:"onCoachmarkContinue",value:function e(){this.setState(function(){return{showCoachmark:false}})}},{key:"onSearchInputChange",value:function e(t){var a={searchQuery:t.target.value};this.setState(function(){return a})}},{key:"getOrgAppsListProps",value:function e(){var t=this.state,a=t.sortBy,r=t.sortDir,n=t.searchQuery;var i={headerData:Ra,rowTemplate:Da,sortBy:a,sortDir:r,searchQuery:n};return i}},{key:"renderExportButton",value:function e(){return n.a.createElement(Na,null)}},{key:"renderRestrictionButton",value:function e(){return n.a.createElement(U["d"],{size:"small",type:"outline"},"Export")}},{key:"renderAppFilterInput",value:function e(){return n.a.createElement(Bt["a"],{placeholder:"Filter by name...",icon:"search",autoFocus:false,isLoading:this.state.isSearching,onChange:this.onSearchInputChange,className:"p-app_management_filter_search_bar",size:"small"})}},{key:"renderRestrictedTitle",value:function e(){var t=k()("p-app_management_restricted_apps__info_icon","margin_left_50",{"p-app_management_restricted_apps__info_icon--active":this.state.showCoachmark});return n.a.createElement("div",{className:"display_flex align_items_center"},n.a.createElement("span",null,"Restricted Apps"),n.a.createElement(Ia["a"],{hasCloseButton:true,content:"By restricting an app for the organization, members will no longer be allowed to install them on any workspace. Existing installations will not be automatically removed. To learn more about restricted apps, visit out help center.",shouldShow:this.state.showCoachmark,position:"right",onSkip:this.onCoachmarkSkip,hasSkipLink:false,onContinue:this.onCoachmarkContinue},n.a.createElement(S["a"],{type:"question_circle",onClick:this.onIconClick,className:t})))}},{key:"render",value:function e(){var t=[this.renderExportButton(),this.renderRestrictionButton(),this.renderAppFilterInput()];var a=this.getOrgAppsListProps();return n.a.createElement("div",{className:"p-app_management_restricted_apps"},n.a.createElement(Lt["a"],{title:this.renderRestrictedTitle(),actions:t}),n.a.createElement("div",{className:"c-app_management_indent_half"},n.a.createElement(_a,a)))}}]);return t}(r["PureComponent"]);xa.displayName="AppManagementRestrictedApps";var Fa=xa;var La=Fa;var Ba=new E["b"]("enterprise_dashboard");var Ua={orgName:y["b"].string.isRequired,actions:y["b"].object.isRequired,defaultTabId:y["b"].string,profileIsOpen:y["b"].bool,orgApps:y["b"].array,orgAppsApiCursor:y["b"].string,orgAppsApiTotal:y["b"].number,orgAppsSortDir:y["b"].string,orgAppsSortBy:y["b"].string,orgAppsLoading:y["b"].bool,searchQuery:y["b"].string,featureEntAppManagementRestriction:y["b"].bool,appProfile:y["b"].object};var qa={defaultTabId:"",profileIsOpen:false,orgApps:[],orgAppsApiCursor:null,orgAppsApiTotal:null,orgAppsLoading:false,orgAppsSortDir:null,orgAppsSortBy:null,searchQuery:"",featureEntAppManagementRestriction:false,appProfile:null};var Ga=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.tabActionOnClick=function(t){return e.actions.router.navigateTo("/organization/apps/"+t)};return a}m()(t,[{key:"getAppProps",value:function e(){var t={orgName:this.props.orgName,orgApps:this.props.orgApps,orgAppsApiCursor:this.props.orgAppsApiCursor,orgAppsApiTotal:this.props.orgAppsApiTotal,orgAppsLoading:this.props.orgAppsLoading,orgAppsSortDir:this.props.orgAppsSortDir,orgAppsSortBy:this.props.orgAppsSortBy,searchQuery:this.props.searchQuery,featureEntAppManagementRestriction:this.props.featureEntAppManagementRestriction};return t}},{key:"renderInstalledAppsContent",value:function e(){var t=this.getAppProps();return n.a.createElement("div",null,n.a.createElement(Sa,t))}},{key:"renderRestrictedAppsContent",value:function e(){return n.a.createElement(La,null)}},{key:"render",value:function e(){var t=this.tabActionOnClick;var a=this.props,r=a.defaultTabId,i=a.appProfile,s=a.actions;var o=[{title:Ba.t("Installed Apps"),id:"installed",content:this.renderInstalledAppsContent(),onClick:t}];this.props.featureEntAppManagementRestriction&&o.push({title:Ba.t("Restricted Apps"),id:"restricted",content:this.renderRestrictedAppsContent(),onClick:t});var l=k()("p-app-panel",{open:this.props.profileIsOpen});return n.a.createElement("div",{className:"p-app_management padding_top_200"},n.a.createElement(xt,null),n.a.createElement(C["a"],{tabs:o,defaultTabId:r}),n.a.createElement("div",{className:l},i?n.a.createElement(Rt,d()({},i,{actions:s})):null))}}]);return t}(r["PureComponent"]);Ga.displayName="AppManagement";Ga.defaultProps=qa;var Wa=Ga;var Ha=Wa;Object(c["a"])("interop.appManagement",{render:function e(t,a,r){if(!t)throw new Error("appManagement render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(Ha,r)),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(3);var d=a.n(u);var p=a(26);var h=a.n(p);var v=a(6);var m=a.n(v);var f=a(7);var b=a.n(f);var g=a(8);var _=a.n(g);var y=a(9);var O=a.n(y);var k=a(0);var E=a(2);var C=a.n(E);var j=a(4);var w=a(48);var S=a(23);var I=a(301);var T=a(68);var A=a(12);var N=a(98);var P=a(19);var R=a(24);var M=a(35);var D=a(1185);var x=a(11);var F=a(113);var L=a(258);var B=a(31);var U=a(17);var q=a(10);var G=a(467);var W=a(45);var H=a(1190);var V=a(1443);var K=a(365);var z=a(1562);var Y=a(1044);var Q=a(1151);var J=a(126);var Z=a(54);var X=a(135);var $=a(16);var ee=a.n($);var te=a(22);var ae=function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object(x["getDisplayName"])(a);var i=null;if(Object(x["isPublicChannel"])(a)||Object(x["isPrivateChannel"])(a)){var s=ee()({"c-icon--align-hashmark":!Object(x["isPrivateChannel"])(a)});i=n.a.createElement(te["a"],{className:s,inherit:true,align:"baseline",type:Object(x["isPrivateChannel"])(a)?"lock":"channel"})}var o=null;Object(x["isOrgSharedPublicOrPrivateChannel"])(a)?o=n.a.createElement(te["a"],{align:"baseline",inherit:true,type:"shared_channel"}):Object(x["isPendingExternallySharedChannel"])(a)?o=n.a.createElement(te["a"],{align:"baseline",inherit:true,type:"shared_channels_pending"}):Object(x["isSharedPublicOrPrivateChannel"])(a)&&(o=n.a.createElement(te["a"],{align:"baseline",inherit:true,type:"shared_channels"}));return n.a.createElement("span",{key:t},i,r,o)};ae.displayName="formatChannelName";var re=ae;var ne=new q["b"]("channel_options");var ie={channel:k["b"].object.isRequired};var se={};var oe=function(e){O()(t,e);function t(){m()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"render",value:function e(){var t=this.props.channel;return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement("p",null,ne.t("Archiving is useful if you don\u2019t think you\u2019ll need this channel any longer. Here\u2019s what will happen when you archive this channel:")),n.a.createElement("ul",null,n.a.createElement("li",null,ne.t("No one will be able to send messages to it")),n.a.createElement("li",null,ne.t("Apps installed in this channel will be disabled")),n.a.createElement("li",null,ne.t("A message will be posted that you archived the channel"))),n.a.createElement("p",null,ne.t("Messages from archived channels will still show up in search and archives, the same way they do today. You can always un-archive an archived channel later, if you need it again.")),n.a.createElement("p",null,ne.rt("Are you sure you want to archive <strong>{channel}</strong>?",{channel:Object(x["getDisplayName"])(t)},function(e){var a=e.key;return re(a,t)})))}}]);return t}(r["PureComponent"]);oe.displayName="ArchiveChannel";oe.defaultProps=se;var le=oe;var ce=a(1573);var ue=a(96);var de=a(303);var pe=a(179);var he=a(3146);var ve=new q["b"]("channel_options");var me=new q["b"]("ui_validation");var fe={teamId:k["b"].string.isRequired,additionalVerificationError:k["b"].oneOfType([k["b"].string,k["b"].object]),additionalVerificationGood:k["b"].bool,channel:k["b"].object,nameNeedsChecking:k["b"].bool,id:k["b"].string.isRequired,isCheckingAdditionalVerification:k["b"].bool,placeholder:k["b"].string,onInvalid:k["b"].func,onValid:k["b"].func,shouldFix:k["b"].bool,value:k["b"].string.isRequired,workspaceName:k["b"].string.isRequired,featureLongerChannelNames:k["b"].bool.isRequired,featureChannelIsNewCreateEdit:k["b"].bool.isRequired,maxChannelNameLength:k["b"].number.isRequired};var be={additionalVerificationError:"",additionalVerificationGood:false,channel:null,nameNeedsChecking:false,isCheckingAdditionalVerification:false,placeholder:"",onInvalid:E["noop"],onValid:E["noop"],shouldFix:false};var ge=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onChange=a.onChange.bind(a);a.renderWarning=a.renderWarning.bind(a);a.state={showInvalidCharactersWarning:false,showLowercaseWarning:false,showMaxLengthWarning:false,showNameRequiredWarning:false,showNameTakenWarning:false,showPunctuationWarning:false,showSpecialsWarning:false,value:a.props.value};return a}b()(t,[{key:"componentDidMount",value:function e(){this.props.nameNeedsChecking&&this.onChange(this.props.value)}},{key:"onChange",value:function e(t){var a=t;var r=this.props,n=r.nameNeedsChecking,i=r.onInvalid,s=r.onValid,o=r.shouldFix,l=r.teamId,u=r.maxChannelNameLength;o&&(a=this.fixName(a));var d=Object(c["c"])(l);var p=Object(ce["a"])(d,a,this.props.value,u),h=p.hasNameRequiredWarning,v=p.hasMaxLengthWarning,m=p.hasSpecialsWarning,f=p.hasPunctuationWarning,b=p.hasLowercaseWarning,g=p.hasNameTakenWarning;if(a===this.props.value&&!n){i({value:a});this.setState(function(){return{showLowercaseWarning:false,showMaxLengthWarning:false,showNameRequiredWarning:false,showNameTakenWarning:false,showPunctuationWarning:false,showSpecialsWarning:false,value:a}});return}b||v||h||g||f||m?i({value:a}):s({value:a});this.setState(function(){return{showLowercaseWarning:b,showMaxLengthWarning:v,showNameRequiredWarning:h,showNameTakenWarning:g,showPunctuationWarning:f,showSpecialsWarning:m,value:a}})}},{key:"fixName",value:function e(t){var a=t.toLowerCase().replace(/^#+/,"");a=a.replace(/^\s+/,"");a=a.replace(/\s+$/,"");a=a.replace(/\s/g,"-");var r=this.state.showInvalidCharactersWarning;r=!(!a||a===t);this.setState(function(){return{showInvalidCharactersWarning:r}});return a}},{key:"maybeRenderAdditionalValidationMarks",value:function e(){var t=this.props,a=t.additionalVerificationGood,r=t.isCheckingAdditionalVerification;var i=this.state,s=i.showLowercaseWarning,o=i.showMaxLengthWarning,l=i.showNameRequiredWarning,c=i.showNameTakenWarning,u=i.showPunctuationWarning,d=i.showSpecialsWarning;if(s||o||l||c||u||d)return null;if(r)return n.a.createElement("span",{className:"p-channel_name_input--validating"},n.a.createElement(ue["a"],{size:"large",className:"inline_block"}));if(a)return n.a.createElement("span",{"data-qa":"channel_name_input_validation",className:"p-channel_name_input--validating sk_seafoam_green"},ve.t("Available"),n.a.createElement(te["a"],{align:"baseline",type:"check_circle_o_large"}));return null}},{key:"maybeRenderAdditionalVerificationWarning",value:function e(){var t=this.props.additionalVerificationError;if(!t.length)return null;return this.renderWarning(t)}},{key:"renderRules",value:function e(){var t=this.props,a=t.channel,r=t.workspaceName;var n=false;if(Object(x["isExternallySharedChannel"])(a))return this.renderWarning(ve.t("Names should be lowercase, with no spaces. Changes will only be visible to {workspaceName}.",{workspaceName:Object(q["o"])(r)}),n);return this.renderWarning(ve.t("Names should be lowercase, with no spaces."),n)}},{key:"renderNameTakenWarning",value:function e(){return this.renderWarning(me.t("{name} is already taken by a channel, username, or user group.",{name:this.state.value}))}},{key:"renderInvalidCharactersWarning",value:function e(){return this.renderWarning(ve.t("You entered some disallowed characters in the name, which we\u2019ve fixed. Make sure it looks good to you, and try again!"))}},{key:"renderLowercaseWarning",value:function e(){return this.renderWarning(me.t("Channel names must be all lowercase. Try again?"))}},{key:"renderMaxLengthWarning",value:function e(t){return this.renderWarning(me.t("Blerg, that\u2019s a bit too long! Channel names must be fewer than {maxlength} characters.",{maxlength:t+1}))}},{key:"renderRequiredWarning",value:function e(){return this.renderWarning(me.t("Don\u2019t forget to name your channel."))}},{key:"renderPunctuationWarning",value:function e(){return this.renderWarning(me.t("Names can\u2019t consist solely of punctuation. Please elaborate!"))}},{key:"renderSpecialsWarning",value:function e(){return this.renderWarning(me.t("Channel names can\u2019t contain spaces, periods, or most punctuation. Try again?"))}},{key:"renderWarning",value:function e(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var r=n.a.createElement("span",{className:"flex_none small_right_margin"},n.a.createElement(te["a"],{type:"warning"}));var i=ee()("p-channel_name_input--input_note",{"p-channel_name_input--alert":a});return n.a.createElement("span",{className:i},a&&r,n.a.createElement("span",{className:"flex_one"},t))}},{key:"renderTextInput",value:function e(t){var a=this.props,r=a.id,i=a.placeholder,s=a.featureChannelIsNewCreateEdit,o=a.maxChannelNameLength;var l=this.state.value;var c=ee()("c-input_text","p-channel_name_input--input",{"p-channel_name_input--input_with_warning":t});var u={id:r,placeholder:i,value:l,onChange:this.onChange,name:"channel_name_input",className:c};if(s){var p=d()({},u,{maxCharacterLimit:o});return n.a.createElement(pe["a"],p)}var h=d()({},u,{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off"});return n.a.createElement(de["b"],h)}},{key:"render",value:function e(){var t=this.props,a=t.additionalVerificationError,r=t.maxChannelNameLength;var i=this.state,s=i.showInvalidCharactersWarning,o=i.showLowercaseWarning,l=i.showMaxLengthWarning,c=i.showNameRequiredWarning,u=i.showNameTakenWarning,d=i.showPunctuationWarning,p=i.showSpecialsWarning;var h=s||o||l||c||u||d||p;a&&a.length&&(h=true);return n.a.createElement("div",{className:"position_relative"},this.renderTextInput(h),this.maybeRenderAdditionalValidationMarks(),n.a.createElement("div",{"data-qa":"channel_name_input_warnings",className:"p-channel_name_input--warnings"},s&&this.renderInvalidCharactersWarning(),o&&this.renderLowercaseWarning(),l&&this.renderMaxLengthWarning(r),c&&this.renderRequiredWarning(),u&&this.renderNameTakenWarning(),d&&this.renderPunctuationWarning(),p&&this.renderSpecialsWarning(),this.maybeRenderAdditionalVerificationWarning()),this.renderRules())}}]);return t}(r["PureComponent"]);ge.displayName="ChannelNameInput";ge.defaultProps=be;var _e=ge;function ye(e){var t=Object(j["isFeatureEnabled"])(e,"feature_longer_channel_names");var a=Object(ce["b"])(t);var r=Object(S["c"])(e);var n=Object(M["i"])(e,r);return{workspaceName:Object(B["getTeamDisplayName"])(n),featureChannelIsNewCreateEdit:Object(j["isFeatureEnabled"])(e,"feature_channel_is_new_create_edit"),featureLongerChannelNames:t,maxChannelNameLength:a,teamId:r}}var Oe=Object(o["connect"])(ye)(ge);var ke=Oe;var Ee=a(1719);var Ce=new q["b"]("channel_options");var je={additionalVerificationError:k["b"].oneOfType([k["b"].string,k["b"].object]),additionalVerificationGood:k["b"].bool,isCheckingAdditionalVerification:k["b"].bool,channel:k["b"].object.isRequired,currentTeam:k["b"].object,orgName:k["b"].string,onInvalidName:k["b"].func,onValidName:k["b"].func};var we={additionalVerificationError:"",additionalVerificationGood:false,isCheckingAdditionalVerification:false,currentTeam:{},orgName:"",onInvalidName:E["noop"],onValidName:E["noop"]};function Se(e){var t=Object(x["getDisplayName"])(e.channel);"#"===t[0]&&(t=t.substr(1));var a=e.additionalVerificationError,r=e.additionalVerificationGood,i=e.isCheckingAdditionalVerification,s=e.channel,o=e.currentTeam,l=e.orgName,c=e.onInvalidName,u=e.onValidName;return n.a.createElement("div",{className:"top_margin p-channel-options--content_text"},n.a.createElement("p",null,Ce.rt("<strong>{name}</strong> is already in use by a channel on another {orgName} workspace. Choose a new name to share this channel outside of <span>{teamName}</span>.",{name:Object(x["getDisplayName"])(s),orgName:l,teamName:Object(B["getTeamDisplayName"])(o)},function(e){var t=e.key,a=e.tag,r=e.text;if("strong"===a)return n.a.createElement("strong",{key:t+"-1"},re(t,s));return n.a.createElement("strong",{key:t},r)})),n.a.createElement("label",{htmlFor:"channel_rename",className:"c-label"},n.a.createElement("span",{className:"c-label__text"},Ce.t("Channel name"))),n.a.createElement(ke,{additionalVerificationError:a,additionalVerificationGood:r,channel:s,id:"channel_rename",isCheckingAdditionalVerification:i,onInvalid:c,onValid:u,placeholder:Ce.t("Rename {title}",{title:Object(x["getDisplayName"])(s)}),shouldFix:true,value:t}))}Se.displayName="ChannelNameConflict";Se.defaultProps=we;function Ie(e){return{currentTeam:Object(M["d"])(e),orgName:Object(I["a"])(e)}}var Te=Object(o["connect"])(Ie)(Se);var Ae=a(28);var Ne=a(383);var Pe=a(1203);var Re=a(1097);var Me=a(892);var De=a(777);var xe=a(834);var Fe=a(1208);var Le=a(478);var Be=a(407);var Ue=a(2377);var qe=new q["b"]("channel_options");var Ge={channel:k["b"].object.isRequired,maxLength:k["b"].number,purpose:k["b"].oneOfType([k["b"].string,k["b"].object]),purposeCreator:k["b"].object,purposeDate:k["b"].string,formattedPurpose:k["b"].oneOfType([k["b"].string,k["b"].object]),onChannelPurposeTextareaChange:k["b"].func.isRequired,onChannelPurposeValidationChange:k["b"].func,workspaceName:k["b"].string,featureChangePurposeToDescription:k["b"].bool,featureSonicChannelOptions:k["b"].bool};var We={maxLength:250,purpose:"",purposeCreator:null,purposeDate:"",formattedPurpose:"",onChannelPurposeValidationChange:null,workspaceName:"",featureChangePurposeToDescription:false,featureSonicChannelOptions:false};var He="react_channel_purpose_input";function Ve(e){Object(De["a"])({e:e,input_to_fill:"#"+He,offset_y:-8})}var Ke=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setTextyRef=a.setTextyRef.bind(a);a.onTextChange=a.onTextChange.bind(a);a.renderModernInput=a.renderModernInput.bind(a);a.texty=null;a.textyModules={tabcomplete:{positionMenu:function e(t){t.style.width=a.texty.container.offsetWidth+"px";Object(Me["a"])(t,a.texty.container)},completers:["channels","emoji","members"]}};a.state={numCharsOverLimit:a.countCharsOverLimit()};return a}b()(t,[{key:"onTextChange",value:function e(){var t=this.props,a=t.onChannelPurposeValidationChange,r=t.onChannelPurposeTextareaChange;var n=this.state.numCharsOverLimit;var i=this.countCharsOverLimit();if(i>0||n>0){this.setState(function(){return{numCharsOverLimit:i}});a&&a(i>0)}i<1&&r({target:{value:this.getEditText()}})}},{key:"setTextyRef",value:function e(t){this.texty=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"getEditText",value:function e(){var t=this.props,a=t.purpose,r=t.featureSonicChannelOptions;var n=Object(E["isString"])(a)?a:a.value;if(this.texty){if(r)return this.texty.value();return Object(Be["i"])(this.texty.value(),{enableBroadcastKeywords:false})}if(Object(E["isString"])(n))return n;return""}},{key:"countCharsOverLimit",value:function e(){var t=this.getEditText();var a=this.props.maxLength;if(!a||!t.length)return 0;return Math.max(0,t.length-a)}},{key:"renderModernInput",value:function e(t){var a=t.modules,r=t.isOpen;return n.a.createElement(Pe["a"],{initialText:this.props.formattedPurpose,focusOnMount:true,minLines:3,modules:a,isAutocompleteOpen:r,onTextChange:this.onTextChange,maxLength:this.props.maxLength,ref:this.setTextyRef})}},{key:"renderModernTextarea",value:function e(){return n.a.createElement(Re["a"],{renderInput:this.renderModernInput,completeOnMembers:true,completeOnChannels:true,completeOnEmoji:true,shouldCompleteOnTab:false})}},{key:"renderTextarea",value:function e(){var t=this.props,a=t.maxLength,r=t.purpose,i=t.featureSonicChannelOptions,s=t.featureChangePurposeToDescription;if(i)return this.renderModernTextarea();var o=this.state.numCharsOverLimit;var l=o+a;var c=Object(Le["e"])(Object(E["isString"])(r)?r:r.value);var u=s?qe.t("Channel description"):qe.t("Channel purpose");var d=void 0;o>0&&(d=qe.t("Text is too long! ({totalCharCount}/{maxLength} characters)",{totalCharCount:l,maxLength:a}));return n.a.createElement("div",{className:"p-channel_options--channel_purpose"},n.a.createElement(Pe["a"],{id:He,ref:this.setTextyRef,className:"c-input_textarea c-channel_purpose_input",modules:this.textyModules,ariaLabel:u,initialText:c,onTextChange:this.onTextChange,focusOnMount:true,useLegacyCreate:true,enableBroadcastKeywords:false}),n.a.createElement(Ae["c"],{onClick:Ve,className:"c-message__editor__emoji_menu","aria-label":"Emoji menu"},n.a.createElement(te["a"],{className:"c-message__editor__emoji_circle_icon",type:"circle-fill"}),n.a.createElement(te["a"],{className:"c-message__editor__emoji_smile_icon",type:"smile-o"}),n.a.createElement(te["a"],{className:"c-message__editor__emoji_happy_icon",type:"happy-smile"})),d&&n.a.createElement("p",{className:"candy_red no_bottom_margin"},d))}},{key:"renderGuidance",value:function e(){var t=this.props,a=t.channel,r=t.workspaceName;return Object(x["isExternallySharedChannel"])(a)?qe.t("Describe what this channel is for. This is only visible to {workspaceName}.",{workspaceName:Object(q["o"])(r)}):qe.t("Describe what this channel is for.")}},{key:"render",value:function e(){var t=this.props,a=t.purposeCreator,r=t.purposeDate,i=t.featureChangePurposeToDescription;var s=i?qe.rt('Description <span className="normal">(optional)</span>',function(e){var t=e.text,a=e.key;return n.a.createElement("span",{key:a,className:"normal"},t)}):qe.rt('Purpose <span className="normal">(optional)</span>',function(e){var t=e.text,a=e.key;return n.a.createElement("span",{key:a,className:"normal"},t)});var o=void 0;r&&a&&r&&(o=i?qe.rt("The description was last set by <span>{member}</span> {date}.",{member:a,date:r},function(e){var t=e.key,r=e.tag,i=e.text;if("span"===r)return n.a.createElement(Ne["a"],{key:t,id:a.id});return n.a.createElement("span",{key:t},i)}):qe.rt("The purpose was last set by <span>{member}</span> {date}.",{member:a,date:r},function(e){var t=e.key,r=e.tag,i=e.text;if("span"===r)return n.a.createElement(Ne["a"],{key:t,id:a.id});return n.a.createElement("span",{key:t},i)}));return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement("label",{htmlFor:"purpose_input",className:"block"},s),this.renderTextarea(),n.a.createElement("p",{className:"mini small_top_margin no_bottom_margin"},this.renderGuidance()),o&&n.a.createElement("p",{className:"mini"},o))}}]);return t}(r["PureComponent"]);Ke.displayName="ChannelPurpose";Ke.defaultProps=We;function ze(e,t){var a=t.purpose;var r=Object(E["get"])(a,"creator");var n=Object(j["isFeatureEnabled"])(e,"feature_sonic_channel_options");var i=Object(j["isFeatureEnabled"])(e,"feature_change_purpose_to_description");var s="";if(n){var o=a&&a.value;s=o&&Object(Fe["a"])(e,{text:o})}return{purposeCreator:r?Object(R["d"])(e,r):null,purposeDate:a.last_set&&Object(xe["a"])(e,a.last_set),workspaceName:Object(B["getTeamDisplayName"])(Object(M["d"])(e)),featureChangePurposeToDescription:i,featureSonicChannelOptions:n,formattedPurpose:s}}var Ye=Object(o["connect"])(ze)(Ke);var Qe=new q["b"]("channel_options");var Je={channel:k["b"].object.isRequired,teamName:k["b"].string.isRequired};var Ze={};var Xe=function(e){O()(t,e);function t(){m()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"shouldShowShareWarning",value:function e(){var t=this.props.channel;if(!t)return false;return Object(x["isSharedPublicOrPrivateChannel"])(t)}},{key:"renderShareWarning",value:function e(){var t=this.props,a=t.channel,r=t.teamName;if(!a)return null;if(!this.shouldShowShareWarning())return null;return n.a.createElement("li",null,Qe.rt("This update will only appear in {teamName}.",{teamName:n.a.createElement("strong",null,r)}))}},{key:"render",value:function e(){var t=this.props.teamName;return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement(X["a"],{type:"boxed",level:"warning",icon:"warning",align:"left",className:"margin_bottom_150"},Qe.t("This change can\u2019t be undone, so please proceed with care.")),n.a.createElement("p",{className:"small_bottom_margin"},n.a.createElement("strong",null,Qe.t("Things to note:"))),n.a.createElement("ul",null,this.renderShareWarning(),n.a.createElement("li",null,Qe.t("Channel history and members will not be affected by this change.")),n.a.createElement("li",null,Qe.rt("All files shared in this channel up until this point will remain publicly accessible to everyone in {teamName}.",{teamName:n.a.createElement("strong",null,t)}))))}}]);return t}(r["PureComponent"]);Xe.displayName="ConvertChannelToPrivate";Xe.defaultProps=Ze;function $e(e,t){var a=t.channel;var r=Object(M["d"])(e);return{channel:a,teamName:Object(B["getTeamDisplayName"])(r)}}var et=Object(o["connect"])($e)(Xe);var tt=a(211);var at=a(364);var rt=a(1709);var nt=a(1510);function it(e){var t=e.retentionType,a=e.retentionDuration;if(!Object(E["isInteger"])(t))return false;var r=36500;return 0===t||1===t&&Object(E["isInteger"])(a)&&a>0&&a<r}function st(e){var t=e.retentionDuration,a=e.retentionDurationUnit;if(!Object(E["isInteger"])(a))return t;return 0===a?t:365*t}var ot=new q["b"]("channel_options");var lt={member:k["b"].object.isRequired,team:k["b"].object.isRequired,onDurationChange:k["b"].func,onDurationUnitChange:k["b"].func,onTypeChange:k["b"].func,prefsLoaded:k["b"].bool,retentionDuration:k["b"].number,retentionDurationUnit:k["b"].number,retentionType:k["b"].number,teamRetentionDuration:k["b"].number,teamRetentionType:k["b"].number,durationInputRef:k["b"].func};var ct={onDurationChange:E["noop"],onDurationUnitChange:E["noop"],onTypeChange:E["noop"],prefsLoaded:false,retentionDuration:0,retentionDurationUnit:0,retentionType:0,teamRetentionDuration:0,teamRetentionType:0,durationInputRef:E["noop"]};var ut=0;var dt=1;var pt=1;var ht=0;var vt=2;var mt=3;var ft=0;var bt=47;var gt=57;var _t=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.durationChange=a.durationChange.bind(a);a.durationUnitChange=a.durationUnitChange.bind(a);a.handleKeyPress=a.handleKeyPress.bind(a);return a}b()(t,[{key:"durationChange",value:function e(t){var a=this;t.persist();Object(E["debounce"])(function(){var e=Math.round(parseFloat(t.target.value,10));a.props.onDurationChange(e)},500)()}},{key:"durationUnitChange",value:function e(t){this.props.onDurationUnitChange(parseInt(t.target.value,10))}},{key:"handleKeyPress",value:function e(t){(t.charCode<bt||t.charCode>gt)&&t.preventDefault()}},{key:"maybeRenderOldDurationInput",value:function e(){var t=this.props,a=t.retentionDuration,r=t.retentionType;if(r===ut)return null;var i={width:"60px",backgroundColor:"white"};return n.a.createElement("div",{className:"flex_none left_margin"},n.a.createElement("label",{htmlFor:"retention_duration",className:"c-label c-label__text"},ot.t("Duration")),n.a.createElement("input",{className:"p-channel_options--retention_duration c-input_text align_right",defaultValue:a,id:"retention_duration",maxLength:"4",onChange:this.durationChange,style:i,type:"text"}),n.a.createElement("span",{className:"p-channel_options--retention_duration_add_on"},ot.t("days")))}},{key:"maybeRenderDurationInput",value:function e(){var t=this.props,a=t.retentionDuration,r=t.retentionDurationUnit,i=t.retentionType,s=t.durationInputRef;if(i===ut)return null;var o=n.a.createElement("strong",null,ot.t("Delete messages and their revisions after:"));return n.a.createElement(Z["a"],{className:"p-channel_options--retention_duration_label c-deprecated-icon c-icon--caret-down",text:o,htmlFor:"retention_duration"},n.a.createElement("div",{className:"display_flex"},n.a.createElement("input",{className:"p-channel_options--retention_duration c-input_text",defaultValue:0===a?"":a,id:"retention_duration",onChange:this.durationChange,onKeyPress:this.handleKeyPress,type:"text",ref:s}),n.a.createElement("select",{className:"p-channel_options--retention_duration_unit c-input_select margin_left_100",id:"retention_duration_unit",defaultValue:r,onChange:this.durationUnitChange},n.a.createElement("option",{value:"0"},ot.t("Days")),n.a.createElement("option",{value:"1"},ot.t("Years")))))}},{key:"maybeRenderDurationWarning",value:function e(){var t=this.props,a=t.member,r=t.retentionType,i=t.retentionDuration,s=t.retentionDurationUnit,o=t.teamRetentionDuration,l=t.teamRetentionType;if(r===ut)return null;var c=void 0;var u=st({retentionDuration:i,retentionDurationUnit:s});var d=5475;if(u>=36500)c=ot.rt("When setting a time frame for deleting messages, please choose a duration less than 100 years.");else if(it({retentionType:r,retentionDuration:u}))if(u<30)c=ot.rt("<strong>This will delete all messages older than {retentionDuration, plural, =1 {# day} other {# days}}</strong>. Please double-check with your team before setting such a short retention period.",{retentionDuration:i});else if(l===vt&&u>o)c=s===ft?Object(U["isAdmin"])(a)||Object(U["isOwner"])(a)?ot.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# day} other {# days}}, you\u2019re choosing to keep messages for longer than the rest of your workspace.",{retentionDuration:i}):ot.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# day} other {# days}}, you\u2019re choosing to keep messages for longer than the rest of your workspace. You may want to check with an admin to make sure this is OK.",{retentionDuration:i}):Object(U["isAdmin"])(a)||Object(U["isOwner"])(a)?ot.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# year} other {# years}}, you\u2019re choosing to keep messages for longer than the rest of your workspace.",{retentionDuration:i}):ot.rt("<strong>Note:</strong> By setting this channel\u2019s retention period to {retentionDuration, plural, =1 {# year} other {# years}}, you\u2019re choosing to keep messages for longer than the rest of your workspace. You may want to check with an admin to make sure this is OK.",{retentionDuration:i});else{if(l!==pt&&l!==ht||!(u>d))return null;c=ot.rt("Just a heads up: if you want to keep your messages forever, you can choose to follow your workspace\u2019s default retention settings.")}else c=ot.rt("To delete messages after a period of time, set a value greater than zero.");return n.a.createElement(X["a"],{level:"warning",className:"margin_bottom_100"},c)}},{key:"renderSelectOption",value:function e(t,a){return n.a.createElement("option",{value:t},a)}},{key:"renderRadio",value:function e(){var t=this.props,a=t.onTypeChange,r=t.retentionType,i=t.team;var s="retention_type";var o=n.a.createElement("span",null,n.a.createElement("strong",null,ot.t("Use the default retention settings for {teamName}",{teamName:Object(B["getTeamDisplayName"])(i)})),n.a.createElement("div",{className:"sk_dark_gray"},this.renderTeamPrefMessage()));var l=n.a.createElement("span",null,n.a.createElement("strong",null,ot.t("Use custom retention settings for this conversation")),n.a.createElement("div",{className:"sk_dark_gray"},ot.t("Delete messages after a set amount of time.")));return n.a.createElement("div",{className:"flex_one"},n.a.createElement(at["a"],{className:"margin_bottom_50"},n.a.createElement(Z["a"],{text:o,htmlFor:s+"_0",type:"inline",cursor:"pointer",className:"margin_bottom_75"},n.a.createElement(tt["a"],{id:s+"_0",name:s,value:0,checked:r===ut,onChange:a})),n.a.createElement(Z["a"],{text:l,htmlFor:s+"_1",type:"inline",cursor:"pointer"},n.a.createElement(tt["a"],{id:s+"_1",name:s,value:1,checked:r===dt,onChange:a}))))}},{key:"renderTeamPrefMessage",value:function e(){var t=this.props,a=t.teamRetentionDuration,r=t.teamRetentionType;var n=void 0;switch(r){case pt:n=ot.t("By default, messages are kept forever.");break;case ht:n=ot.t("By default, messages are kept forever, but revisions aren\u2019t tracked.");break;case vt:if(a>364){var i=Object(E["round"])(a/365,1);n=ot.t("By default, messages older than {durationDays} days ({durationYears, plural, =1 {# year} other {# years}}) will be deleted.",{durationDays:a,durationYears:i})}else n=ot.t("By default, messages older than {teamRetentionDuration, plural, =1 {# day} other {# days}} will be deleted.",{teamRetentionDuration:a});break;case mt:if(a>364){var s=Object(E["round"])(a/365,1);n=ot.t("By default, messages older than {durationDays} days ({durationYears, plural, =1 {# year} other {# years}}) will be deleted (full history still accessible via compliance export).",{durationDays:a,durationYears:s,fallbackHash:"91a2ec5b71549f51b20023decb759e38c488cd23"})}else n=ot.t("By default, messages older than {teamRetentionDuration, plural, =1 {# day} other {# days}} will be deleted (full history still accessible via compliance export).",{teamRetentionDuration:a,fallbackHash:"546ed739919d63b927945839040c80b6968a5d2f"});break;default:n=ot.t("By default, messages are kept forever.");break}return n}},{key:"render",value:function e(){var t=this.props.prefsLoaded;if(!t)return n.a.createElement("div",{className:"p-channel_options--option_spinner"},n.a.createElement(ue["a"],{size:"jumbo"}));return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement("p",null,ot.t("If you\u2019d like, you can set custom message retention for this conversation.")),this.renderRadio(),n.a.createElement("div",{className:"p-channel-options__custom_retention_container"},this.maybeRenderDurationInput(),this.maybeRenderDurationWarning()))}}]);return t}(r["PureComponent"]);_t.displayName="DataRetention";_t.defaultProps=ct;var yt=_t;var Ot=a(51);var kt=new q["b"]("channel_options");var Et={channel:k["b"].object.isRequired,showArchiveInstead:k["b"].bool.isRequired,onChangeCheckbox:k["b"].func.isRequired,onClickArchiveInstead:k["b"].func.isRequired};var Ct={};var jt=function(e){O()(t,e);function t(){m()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"renderArchiveInstead",value:function e(){var t=this.props,a=t.showArchiveInstead,r=t.onClickArchiveInstead;if(!a)return null;return kt.rt("<strong>Note:</strong> <a>Archiving a channel</a> lets you close out a conversation without deleting its messages.",{fallbackHash:"7a1495254985f7cbea8f1975f9ee15921929ea5c"},function(e){var t=e.text,a=e.key,i=e.tag;if("strong"===i)return n.a.createElement("strong",{key:a},t);if("a"===i)return n.a.createElement(Ot["a"],{key:a,onClick:r},t);return{text:t}})}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.onChangeCheckbox;return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement("p",null,kt.rt("Are you sure you want to delete <strong>{channel}</strong>? All of the channel\u2019s messages will be removed from Slack immediately \u2014 files, however, will not be deleted. This cannot be undone.",{channel:Object(x["getDisplayName"])(a)},function(e){var t=e.key;return re(t,a)})),n.a.createElement("p",null,this.renderArchiveInstead()),n.a.createElement("p",{className:"float_left very_small_top_margin"},n.a.createElement("label",{htmlFor:"delete_channel_cb",className:"c-label--pointer display_flex align_items_center"},n.a.createElement("input",{onChange:r,id:"delete_channel_cb",type:"checkbox",className:"c-input_checkbox inline small_right_margin"}),kt.t("Yes, permanently delete this channel"))))}}]);return t}(r["PureComponent"]);jt.displayName="DeleteChannel";jt.defaultProps=Ct;var wt=jt;var St=new q["b"]("channel_options");function It(){return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement("p",null,St.t("Exports can take a while \u2014 especially for lengthy conversations. Slackbot will ping you when your export is done.")))}It.displayName="ExportHistory";var Tt=It;var At=a(139);var Nt=a(893);var Pt=a(1788);var Rt=a(1787);var Mt=new q["b"]("channel_options");var Dt={channel:k["b"].object,orgName:k["b"].string,disabledTeamIds:k["b"].arrayOf(k["b"].string),filterFunction:k["b"].func,isLoaded:k["b"].bool,onShareWithChange:k["b"].func,onTeamPickerChange:k["b"].func,originatingTeamId:k["b"].string,preselectedTeamIds:k["b"].arrayOf(k["b"].string),shareWith:k["b"].string,featureSharedChannelsEnterpriseClient:k["b"].bool};var xt={channel:null,orgName:"",disabledTeamIds:[],filterFunction:null,isLoaded:false,onShareWithChange:E["noop"],onTeamPickerChange:E["noop"],originatingTeamId:"",preselectedTeamIds:[],shareWith:"specific",featureSharedChannelsEnterpriseClient:false};var Ft=function(e){O()(t,e);function t(){m()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"maybeRenderWorkspacePicker",value:function e(){var t=this.props,a=t.disabledTeamIds,r=t.filterFunction,i=t.onTeamPickerChange,s=t.originatingTeamId,o=t.preselectedTeamIds,l=t.shareWith;if("all"===l)return null;var c=void 0;c=r||Object(H["e"])({preselected_ids:o,disabled_ids:a});return n.a.createElement("div",{className:"margin_left_150"},n.a.createElement(Nt["a"],{approxItemHeight:32,dataPromise:c,onValueChange:i,placeholderText:Mt.t("Add workspaces"),template:function e(t){var a={item:t};t.team.id===s&&(a.additionalItemCopy=Mt.t("Owner"));return n.a.createElement(Rt["a"],a)},tokenTemplate:function e(t){var a={item:t};t.team.id===s&&(a.additionalItemCopy=Mt.t("Owner"));return n.a.createElement(Pt["a"],a)}}))}},{key:"renderAllWorkspaces",value:function e(){var t=this.props,a=t.onShareWithChange,r=t.shareWith,i=t.orgName;var s={className:"small_right_margin",id:"all-workspaces",name:"share_with",onClick:a,value:"all"};"all"===r&&(s.defaultChecked="checked");return n.a.createElement(Z["a"],{type:"inline",cursor:"pointer",className:"p-channel_options--input_label",htmlFor:"all-workspaces",text:Mt.t("All {orgName} workspaces",{orgName:i})},n.a.createElement(tt["a"],s))}},{key:"renderSpecificWorkspaces",value:function e(){var t=this.props,a=t.onShareWithChange,r=t.shareWith,i=t.orgName;var s={className:"small_right_margin",id:"specific-workspaces",name:"share_with",onClick:a,value:"specific"};"specific"===r&&(s.defaultChecked="checked");return n.a.createElement("div",null,n.a.createElement(Z["a"],{type:"inline",cursor:"pointer",className:"p-channel_options--input_label",htmlFor:"specific-workspaces",text:Mt.t("Specific {orgName} workspaces",{orgName:i})},n.a.createElement(tt["a"],s)),this.maybeRenderWorkspacePicker())}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.isLoaded,i=t.orgName,s=t.featureSharedChannelsEnterpriseClient;if(!r)return n.a.createElement("div",{className:"p-channel_options--option_spinner"},n.a.createElement(ue["a"],{size:"jumbo"}));var o=void 0;o=Object(x["isPrivateChannel"])(a)?s?Mt.rt("Members of the {org_name} workspaces you select will be able to join {channel_name}, if invited.",{org_name:i,channel_name:n.a.createElement(At["a"],{channel:a})}):Mt.t("Members of the {org_name} workspaces you select will be able to join this channel, if invited.",{org_name:i}):s?Mt.rt("Choose which {org_name} workspaces can find and join <strong>{channel_name}</strong>.",{org_name:i,channel_name:n.a.createElement(At["a"],{channel:a})}):Mt.t("Choose which {org_name} workspaces can find and join this channel.",{org_name:i});return n.a.createElement("div",{className:"p-channel-options--content_text"},n.a.createElement("p",null,o),this.renderSpecificWorkspaces(),this.renderAllWorkspaces())}}]);return t}(r["PureComponent"]);Ft.displayName="ManageWorkspaceAccess";Ft.defaultProps=xt;function Lt(e){return{orgName:Object(I["a"])(e),featureSharedChannelsEnterpriseClient:Object(j["isFeatureEnabled"])(e,"feature_shared_channels_enterprise_client")}}var Bt=Object(o["connect"])(Lt)(Ft);var Ut=a(512);var qt=new q["b"]("channel_options");var Gt={allEnterpriseTeams:k["b"].array,channel:k["b"].object.isRequired,channelIsGlobalShared:k["b"].bool,newChannelName:k["b"].string,orgName:k["b"].string,shareWith:k["b"].string,teamId:k["b"].string.isRequired,teamIdsSelected:k["b"].arrayOf(k["b"].string),internalTeamIds:k["b"].func.isRequired};var Wt={allEnterpriseTeams:[],channelIsGlobalShared:false,newChannelName:"",orgName:"",shareWith:"specific",teamIdsSelected:[]};var Ht=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.pointCounter=0;return a}b()(t,[{key:"makeChannelName",value:function e(){var t=this.props,a=t.channel,r=t.newChannelName;return r&&r.length?r:Object(x["getDisplayName"])(a)}},{key:"makeTeamNamesList",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var a=this.props,r=a.teamIdsSelected,i=a.teamId;var s=Object(c["c"])(i);var o=t.length?t:r;if(o.length>=5)return qt.t("{workspaceCount} workspaces",{workspaceCount:o.length});var l=Object(E["map"])(o,function(e){var t=Object(M["i"])(s,e);return Object(B["isUnknown"])(t)?n.a.createElement(Ut["a"],{type:"unknown"}):Object(B["getTeamDisplayName"])(t)});if(1===l.length)return l[0];return Object(q["g"])(l,{react:true,strong:true})}},{key:"renderChangesDetails",value:function e(){var t=this;var a=this.props,r=a.allEnterpriseTeams,i=a.channel,s=a.channelIsGlobalShared,o=a.orgName,l=a.shareWith,c=a.teamIdsSelected,u=a.internalTeamIds;var p=Object(E["map"])(r,"id");var v=s?p:u;var m=Object(E["difference"])(c,u);var f=E["without"].apply(void 0,[v].concat(h()(c)));var b=E["without"].apply(void 0,[Object(E["intersection"])(p,v)].concat(h()(f)));var g=[];var _=function e(a,r,n){t.pointCounter+=1;g.push({data:a,key:t.pointCounter,isHeading:!!r,iconType:n})};var y=[];var O={channelName:this.makeChannelName(),teamNames:this.makeTeamNamesList(m)};var k=function e(t){var a=t.key,r=t.tag,s=t.text;if("span"===r)return n.a.createElement("strong",{key:a},re(a,i,s));return n.a.createElement("strong",{key:a},s)};var C=true;var j="ts_icon_org_shared_channel";var w="ts_icon_warning";if("all"===l){_(qt.rt("Share <span>{channelName}</span> with all of <strong>{orgName}</strong>.",{channelName:this.makeChannelName(),orgName:o},k),C,j);if(Object(x["isPrivateChannel"])(i))_(qt.rt("If invited, members of <strong>{orgName}</strong> will be able to join the channel and see its message history and files.",{orgName:o,channelName:this.makeChannelName()},k));else{_(qt.rt("All members of <strong>{orgName}</strong> will be able to find and join the channel and see its message history and files.",{orgName:o}));_(qt.t("Members of any workspaces created in the future will also have access."))}_(qt.rt("The channel will be notified of these changes."))}else{s&&_(qt.rt("Stop sharing <span>{channelName}</span> with {teamNames}.",{channelName:this.makeChannelName(),teamNames:this.makeTeamNamesList(f)},k),C,w);if(!s&&m.length){_(qt.rt("Share <span>{channelName}</span> with members of {teamNames}.",O,k),C,j);Object(x["isPrivateChannel"])(i)?m.length>1?_(qt.rt("If invited, members of these workspaces will be able to join the channel and see its message history and files.")):_(qt.rt("If invited, members of this workspace will be able to join the channel and see its message history and files.")):m.length>1?_(qt.rt("All members of these workspaces will be able to find and join the channel and see its message history and files.")):_(qt.rt("All members of this workspace will be able to find and join the channel and see its message history and files."))}m.length&&!f.length&&_(qt.rt("The channel will be notified of these changes."));if(f.length){s||_(qt.rt("Stop sharing <span>{channelName}</span> with {teamNames}.",{channelName:this.makeChannelName(),teamNames:this.makeTeamNamesList(f)},k),C,w);f.length>1?_(qt.rt("Members of these workspaces will lose access to this channel\u2019s message history and files.")):_(qt.rt("All members of {workspace} will lose access to this channel\u2019s message history and files.",{workspace:this.makeTeamNamesList(f)}));f.length>1?_(qt.rt("Apps installed by members of these workspaces will need to be installed again.")):_(qt.rt("Apps installed by members of {workspace} will need to be added again.",{workspace:this.makeTeamNamesList(f)}));b.length&&_(qt.rt("Members of {workspaces} will continue to have access to this channel.",{workspaces:this.makeTeamNamesList(b)}));_(qt.rt("The channel will be notified of these changes."))}}_(qt.rt("<a>Learn more</a> about sharing channels within your organization.",null,function(e){var t=e.key,a=e.text;return n.a.createElement("a",{key:t,href:"https://get.slack.help/hc/en-us/articles/115001399587-Create-a-shared-channel-on-Enterprise-Grid#how-they-work",target:"_blank",rel:"noopener noreferrer"},a)}));g.forEach(function(e){var t={className:e.isHeading?"p-channel-options--workspace_access_heading":"p-channel-options--workspace_access_line_item"};y.push(n.a.createElement("p",d()({key:e.key},t),e.iconType&&n.a.createElement("ts-icon",{class:e.iconType}),e.data))});return n.a.createElement("div",{className:"p-channel-options--content_text"},y)}},{key:"render",value:function e(){return n.a.createElement("div",null,this.renderChangesDetails())}}]);return t}(r["Component"]);Ht.displayName="ManageWorkspaceAccessReview";Ht.defaultProps=Wt;function Vt(e,t){var a=t.channel;return{channelIsGlobalShared:Object(x["isOrgGlobalSharedPublicOrPrivateChannel"])(a),orgName:Object(I["a"])(e),teamId:Object(S["c"])(e),allEnterpriseTeams:Object(M["a"])(e),internalTeamIds:Object(x["getInternalTeamIds"])(e,a)}}var Kt=Object(o["connect"])(Vt)(Ht);var zt={children:k["b"].any,dataActionTag:k["b"].string,isDisabled:k["b"].bool,message:k["b"].any.isRequired,onClick:k["b"].func.isRequired,title:k["b"].string.isRequired};var Yt={children:null,dataActionTag:"",isDisabled:false};var Qt=function(e){O()(t,e);function t(){m()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"render",value:function e(){var t=this.props,a=t.children,r=t.dataActionTag,i=t.isDisabled,s=t.message,o=t.onClick,l=t.title;var c=ee()("channel_option_item",{"channel_option_item--disabled":i});var u=i?E["noop"]:o;return n.a.createElement(Ae["c"],{className:c,"data-action":r,onClick:u,type:"link"},n.a.createElement("h3",{className:"title"},l),n.a.createElement("p",{className:"sk_dark_grey no_bottom_margin"},s),a,n.a.createElement("div",{className:"channel_option_open"},n.a.createElement(te["a"],{className:"c-deprecated-icon--inherit",type:"arrow_large_right"})))}}]);return t}(r["PureComponent"]);Qt.displayName="Option";Qt.defaultProps=Yt;var Jt=Qt;var Zt=new q["b"]("channel_options");var Xt={channel:k["b"].object,disableConvertToPrivate:k["b"].bool,disableRename:k["b"].bool,isAdminUser:k["b"].bool,modalClasses:k["b"].string,onClickArchive:k["b"].func,onClickConvertToPrivate:k["b"].func,onClickDelete:k["b"].func,onClickExport:k["b"].func,onClickManageOrgAccess:k["b"].func,onClickPostingPermissions:k["b"].func,onClickPurpose:k["b"].func,onClickRename:k["b"].func,onClickShareExternal:k["b"].func,onClickCancelExternalSharedChannelInvite:k["b"].func,onClickStopShareExternal:k["b"].func,orgName:k["b"].string,showArchive:k["b"].bool.isRequired,showConvertToPrivate:k["b"].bool.isRequired,showDelete:k["b"].bool.isRequired,showExport:k["b"].bool.isRequired,showManageOrgAccess:k["b"].bool.isRequired,showPostingPermissions:k["b"].bool.isRequired,showPurpose:k["b"].bool.isRequired,showRename:k["b"].bool.isRequired,showShareExternal:k["b"].bool.isRequired,showStopShareExternal:k["b"].bool.isRequired,showSuccessAlert:k["b"].bool,successAlertHeading:k["b"].string,successAlertText:k["b"].node,featureSharedChannelsEnterprise:k["b"].bool.isRequired,featureSharedChannelsEnterpriseClient:k["b"].bool.isRequired,externalTeams:k["b"].arrayOf(k["b"].object),team:k["b"].object,featureEscDisconnectV2Client:k["b"].bool,featureSonicChannelOptions:k["b"].bool,channelIsHostedByAnotherTeam:k["b"].bool,featureChangePurposeToDescription:k["b"].bool};var $t={channel:{},disableConvertToPrivate:false,disableRename:false,isAdminUser:false,modalClasses:"",onClickArchive:E["noop"],onClickCancelExternalSharedChannelInvite:E["noop"],onClickConvertToPrivate:E["noop"],onClickDelete:E["noop"],onClickExport:E["noop"],onClickManageOrgAccess:E["noop"],onClickPostingPermissions:E["noop"],onClickPurpose:E["noop"],onClickRename:E["noop"],onClickShareExternal:E["noop"],onClickStopShareExternal:E["noop"],orgName:"",showSuccessAlert:false,successAlertHeading:"",successAlertText:"",externalTeams:[],team:{},featureEscDisconnectV2Client:false,featureSonicChannelOptions:false,channelIsHostedByAnotherTeam:false,featureChangePurposeToDescription:false};var ea=function(e){O()(t,e);function t(){m()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"maybeRenderEscDeleteWarning",value:function e(){var t=this.props,a=t.channel,r=t.featureEscDisconnectV2Client;if(r&&Object(x["isExternallySharedChannel"])(a)){var n=Object(x["isPendingExternallySharedChannel"])(a)?Zt.rt("To delete this channel, first you\u2019ll need to cancel any pending share invitations."):Zt.rt("To delete this channel, first you\u2019ll need to stop sharing it.");return this.renderEscWarning(n,"delete")}return null}},{key:"maybeRenderEscArchiveWarning",value:function e(){var t=this.props,a=t.channel,r=t.featureEscDisconnectV2Client;if(r&&Object(x["isExternallySharedChannel"])(a)){var n=Object(x["isPendingExternallySharedChannel"])(a)?Zt.rt("To archive this channel, first you\u2019ll need to cancel any pending share invitations."):Zt.rt("To archive this channel, first you\u2019ll need to stop sharing it.");return this.renderEscWarning(n,"archive")}return null}},{key:"renderEscWarning",value:function e(t,a){return n.a.createElement(X["a"],{type:"inline",level:"default",className:"channel_option_item__alert top_margin","data-qa":"option-list-"+a+"-disabled-alert"},t)}},{key:"renderArchive",value:function e(){var t=this.props,a=t.onClickArchive,r=t.channel,i=t.featureEscDisconnectV2Client;var s=i&&Object(x["isExternallySharedChannel"])(r);return n.a.createElement(Jt,{dataActionTag:"archive",isDisabled:s,message:Zt.t("If you don\u2019t think it will be used anymore and you want to clean up, archive it. The channel can be unarchived later (but everyone will have been removed)."),onClick:a,title:Zt.t("Archive this channel")},this.maybeRenderEscArchiveWarning())}},{key:"renderShareExternal",value:function e(){var t=this;var a=this.props,r=a.channel,i=a.isAdminUser,s=a.onClickShareExternal,o=a.externalTeams,l=a.featureSharedChannelsEnterprise,c=a.featureSharedChannelsEnterpriseClient;var u=false;var d=null;var p=c?Zt.t("Share with another organization"):Zt.t("Share this channel with another workspace");var h=c?Zt.rt("In a shared channel, people from two separate organizations can send messages, share files, and work together in Slack. <a>Learn more</a>",null,function(e){var t=e.text,a=e.key;return n.a.createElement("a",{key:a,href:"https://get.slack.help/hc/articles/115004151203",target:"_blank",rel:"noopener noreferrer"},t)}):Zt.rt("Shared channels link two workspaces together. People from both sides can send messages, share files, and search the channel\u2019s history. <a>Learn more</a>",null,function(e){var t=e.text,a=e.key;return n.a.createElement("a",{key:a,href:"https://get.slack.help/hc/articles/115004151203",target:"_blank",rel:"noopener noreferrer"},t)});if(Object(x["isOrgSharedPublicOrPrivateChannel"])(r)){if(!l)return null;u=true;d=n.a.createElement(X["a"],{type:"inline",level:"default",className:"channel_option_item__alert top_margin margin_bottom_100","data-qa":"option-list-ext-shared-disabled-alert"},Zt.t("Multi-workspace channels can\u2019t be shared outside your organization."))}if(Object(x["isExternallySharedChannelDisconnected"])(r)){u=true;var v=c?Zt.t("This channel was previously shared and can\u2019t be shared again."):Zt.t("This channel was previously shared with another workspace and can\u2019t be shared again.");d=n.a.createElement(X["a"],{type:"inline",level:"warning",className:"channel_option_item__alert top_margin margin_bottom_100","data-qa":"option-list-ext-shared-dc-alert"},v)}if(Object(x["isPendingExternallySharedChannel"])(r)){u=true;var m=o.map(function(e){var t=e.name;return t});var f=Object(q["g"])(m,{react:true,strong:true});var b=Zt.rt("{listified_pending_team_name} was already invited to this channel.",{listified_pending_team_name:f});var g="";if(i){var _=o[0].id;g=n.a.createElement("a",{onClick:function e(){return t.props.onClickCancelExternalSharedChannelInvite(_)},role:"button",tabIndex:"0","data-qa":"option-list-cancel-invite"},Zt.t("Cancel invitation"))}d=n.a.createElement(X["a"],{type:"inline",level:"warning",className:"channel_option_item__alert top_margin margin_bottom_100","data-qa":"option-list-ext-shared-pending-alert"},b,"\xa0",g)}return n.a.createElement(Jt,{dataActionTag:"share_external",isDisabled:u,message:h,onClick:s,title:p,"data-qa":"options-list-share-external"},d)}},{key:"renderStopShareExternal",value:function e(){var t=this.props,a=t.team,r=t.onClickStopShareExternal,i=t.externalTeams,s=t.featureSharedChannelsEnterpriseClient,o=t.featureEscDisconnectV2Client,l=t.channelIsHostedByAnotherTeam;var c=i.map(function(e){var t=e.name;return t});var u=Object(q["g"])(c,{react:true,strong:false});var d=Object(q["g"])(c,{react:true,strong:true});var p=Zt.t("Stop sharing this channel");o&&(p=l?Zt.rt("Disconnect {team_name} from this channel",{team_name:Object(B["getTeamDisplayName"])(a)}):Zt.rt("Stop sharing this channel with {external_org_names}",{external_org_names:u}));var h=Zt.t("You can stop sharing this channel at any time. Note that you won\u2019t be able to re-share this channel in the future.");o?h=l?Zt.t("If your organization no longer needs access to this channel, you can simply disconnect. You\u2019ll keep an archived copy of the channel\u2019s contents up to this point."):Zt.rt("You can stop sharing this channel whenever you\u2019d like. {external_org_names} will receive a copy of the channel\u2019s contents up to this point.",{external_org_names:u}):s&&(h=Zt.rt("This can\u2019t be undone. You won\u2019t be able to share this channel with {external_org_names}, or any other organization, ever again.",{external_org_names:d}));return n.a.createElement(Jt,{dataActionTag:"stop_share_external",title:p,message:h,onClick:r})}},{key:"renderConvertToPrivate",value:function e(){var t=this.props,a=t.disableConvertToPrivate,r=t.onClickConvertToPrivate;var i="";a&&(i=n.a.createElement(X["a"],{type:"inline",level:"warning",className:"channel_option_item__alert top_margin margin_bottom_100"},Zt.t("During the beta, shared channels can\u2019t be made private.")));return n.a.createElement(Jt,{dataActionTag:"convert_private",isDisabled:a,title:Zt.t("Change to a private channel"),message:Zt.t("Private channels can only be joined if you are added by a current member \u2014 they won\u2019t show up in your channel browser. This change can\u2019t be undone."),onClick:r},i)}},{key:"renderManageOrgAccess",value:function e(){var t=this.props,a=t.channel,r=t.onClickManageOrgAccess,i=t.orgName,s=t.featureSharedChannelsEnterpriseClient,o=t.featureSonicChannelOptions;var l=false;s&&(l=Object(x["isExternallySharedChannel"])(a)||Object(x["isExternallySharedChannelDisconnected"])(a));o&&(l=true);var c=void 0;c=s||Object(x["isOrgSharedPublicOrPrivateChannel"])(a)?Object(x["isPrivateChannel"])(a)?Zt.t("Manage which members of {org_name} can be invited to join this channel.",{org_name:i}):Zt.t("Manage which members of {org_name} can find and join this channel.",{org_name:i}):Object(x["isPrivateChannel"])(a)?Zt.t("Members of the {org_name} workspaces you select will be able to join this channel, if invited.",{org_name:i}):Zt.t("Anyone in the {org_name} workspaces you select will be able to find and join this channel.",{org_name:i});var u=void 0;u=s?Zt.t("Add to other {org_name} workspaces",{org_name:i}):Object(x["isOrgSharedPublicOrPrivateChannel"])(a)?Zt.t("Sharing settings for this channel"):Zt.t("Share this channel with other {org_name} workspaces",{org_name:i});var d=null;Object(x["isExternallySharedChannelDisconnected"])(a)&&s?d=n.a.createElement(X["a"],{type:"inline",level:"default",className:"channel_option_item__alert top_margin margin_bottom_100","data-qa":"option-list-manage-org-dc-alert"},Zt.t("Since this channel was previously shared with another organization, it can\u2019t be added to any other {org_name} workspaces.",{org_name:i})):Object(x["isExternallySharedChannel"])(a)&&s?d=n.a.createElement(X["a"],{type:"inline",level:"default",className:"channel_option_item__alert top_margin margin_bottom_100","data-qa":"option-list-manage-org-ext-alert"},Zt.t("Channels shared with another organization can\u2019t be added to other {org_name} workspaces.",{org_name:i})):o&&(d=n.a.createElement(X["a"],{type:"inline",level:"default",className:"channel_option_item__alert top_margin","data-qa":"option-list-feature-sonic-channel-options-alert"},Zt.t("Coming soon",{ns:"sonic_pilot"})));return n.a.createElement(Jt,{dataActionTag:"convert_ent_shared",message:c,onClick:r,title:u,isDisabled:l,"data-qa":"options-list-add-org"},d)}},{key:"renderRename",value:function e(){var t=this.props,a=t.disableRename,r=t.onClickRename;var i="";a&&(i=n.a.createElement(X["a"],{type:"inline",level:"warning",className:"channel_option_item__alert top_margin margin_bottom_100"},Zt.t("You don\u2019t have permission to rename this channel.")));return n.a.createElement(Jt,{dataActionTag:"rename",isDisabled:a,message:Zt.t("You can rename a channel at any time. But, use it sparingly: it might confuse or disorient your colleagues!"),onClick:r,title:Zt.t("Rename this channel")},i)}},{key:"renderPurpose",value:function e(){var t=this.props,a=t.onClickPurpose,r=t.featureChangePurposeToDescription;var i=false;var s=void 0;s=i?r?Zt.t("Edit the channel description"):Zt.t("Edit the channel purpose"):r?Zt.t("Set the channel description"):Zt.t("Set the channel purpose");var o=void 0;o=i?"":r?Zt.t("Channel descriptions are especially useful to new members choosing which conversations to join."):Zt.t("Channel purposes are especially useful to new members choosing which conversations to join.");return n.a.createElement(Jt,{dataActionTag:"set_purpose",message:o,onClick:a,title:s})}},{key:"renderPostingPermissions",value:function e(){var t=this.props.onClickPostingPermissions;return n.a.createElement(Jt,{dataActionTag:"posting_permissions",message:Zt.t("Change who is allowed to post messages in this channel."),onClick:t,title:Zt.t("Manage posting permissions")})}},{key:"renderExport",value:function e(){var t=this.props.onClickExport;return n.a.createElement(Jt,{dataActionTag:"export",message:Zt.t("Export the messages in this conversation as a JSON file."),onClick:t,title:Zt.t("Export message history")})}},{key:"renderDelete",value:function e(){var t=this.props,a=t.onClickDelete,r=t.channel,i=t.featureEscDisconnectV2Client;var s=i&&Object(x["isExternallySharedChannel"])(r);return n.a.createElement(Jt,{dataActionTag:"delete",isDisabled:s,message:Zt.t("Deleting a channel will permanently remove all of its messages. This cannot be undone."),onClick:a,title:Zt.t("Delete this channel")},this.maybeRenderEscDeleteWarning())}},{key:"renderSuccessAlert",value:function e(){var t=this.props,a=t.successAlertHeading,r=t.successAlertText;var i={level:"success",heading:a,className:"margin_bottom_100"};return n.a.createElement(X["a"],i,n.a.createElement("span",null,r))}},{key:"render",value:function e(){var t=this.props,a=t.showArchive,r=t.showConvertToPrivate,i=t.showDelete,s=t.showExport,o=t.showPostingPermissions,l=t.showPurpose,c=t.showRename,u=t.showShareExternal,d=t.showStopShareExternal,p=t.showManageOrgAccess,h=t.showSuccessAlert,v=t.modalClasses;return n.a.createElement("div",{className:v,role:"presentation"},h&&this.renderSuccessAlert(),a&&this.renderArchive(),u&&this.renderShareExternal(),d&&this.renderStopShareExternal(),r&&this.renderConvertToPrivate(),p&&this.renderManageOrgAccess(),c&&this.renderRename(),l&&this.renderPurpose(),o&&this.renderPostingPermissions(),s&&this.renderExport(),i&&this.renderDelete())}}]);return t}(r["PureComponent"]);ea.displayName="OptionsList";ea.defaultProps=$t;function ta(e,t){var a=t.channel;var r=Object(R["b"])(e);var n=[];if(Object(x["isExternallySharedChannel"])(a)||Object(x["isPendingExternallySharedChannel"])(a)){var i=Object(x["getPendingAndConnectedTeamIds"])(e,a);n=i.map(function(t){return Object(M["i"])(e,t)})}return{team:Object(M["d"])(e),orgName:Object(I["a"])(e),isAdminUser:r.is_admin,externalTeams:n,channelIsHostedByAnotherTeam:Object(x["isHostedByAnotherTeam"])(e,a),featureSharedChannelsEnterprise:Object(j["isFeatureEnabled"])(e,"feature_shared_channels_enterprise"),featureSharedChannelsEnterpriseClient:Object(j["isFeatureEnabled"])(e,"feature_shared_channels_enterprise_client"),featureEscDisconnectV2Client:Object(j["isFeatureEnabled"])(e,"feature_esc_disconnect_v2_client"),featureChangePurposeToDescription:Object(j["isFeatureEnabled"])(e,"feature_change_purpose_to_description"),featureSonicChannelOptions:Object(j["isFeatureEnabled"])(e,"feature_sonic_channel_options")}}var aa={};var ra=Object(o["connect"])(ta,aa)(ea);var na=a(5);var ia=a.n(na);var sa=a(138);var oa=a(1544);var la={item:k["b"].object};var ca={item:{}};var ua=function(e){O()(t,e);function t(){m()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"render",value:function e(){var t=this.props.item;return n.a.createElement("div",{className:"c-lazy_filter_select__user_group_item"},n.a.createElement("div",{className:"c-lazy_filter_select__user_group_token_name"},t.user_group.name))}}]);return t}(r["PureComponent"]);ua.displayName="LazyFilterSelectUserGroupListItem";var da=ua;ua.defaultProps=ca;function pa(e){if(e.member)return n.a.createElement(oa["a"],{item:e});return n.a.createElement(da,{item:e})}pa.displayName="getItemTemplate";var ha=a(1545);var va={item:k["b"].object};var ma={item:{}};var fa=function(e){O()(t,e);function t(){m()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"render",value:function e(){var t=this.props.item;return n.a.createElement("div",{className:"c-lazy_filter_select__user_group_token",key:t.id},n.a.createElement("div",{className:"c-lazy_filter_select__user_group_token_name"},t.user_group.name))}}]);return t}(r["PureComponent"]);fa.displayName="LazyFilterSelectUserGroupToken";var ba=fa;fa.defaultProps=ma;function ga(e){if(e.member)return n.a.createElement(ha["a"],{item:e});return n.a.createElement(ba,{item:e})}ga.displayName="getTokenTemplate";var _a=new q["b"]("channel_options");var ya={canThread:k["b"].bool,isOrgDefault:k["b"].bool,onChangeCheckbox:k["b"].func.isRequired,onChangeRadio:k["b"].func.isRequired,onChangeValueSelectedMembers:k["b"].func.isRequired,postingPermissionsLoaded:k["b"].bool,postingPermissionsSelectedMembers:k["b"].array,whoCanPost:k["b"].string,featureAnnounceOnly:k["b"].bool.isRequired,isEnterpriseTeam:k["b"].bool,currentMember:k["b"].object.isRequired};var Oa={canThread:false,isOrgDefault:false,postingPermissionsLoaded:false,postingPermissionsSelectedMembers:null,whoCanPost:"",isEnterpriseTeam:false};var ka=function(e){O()(t,e);function t(){m()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"maybeRenderCheckbox",value:function e(){var t=this.props,a=t.whoCanPost,r=t.canThread,i=t.isOrgDefault,s=t.onChangeCheckbox,o=t.featureAnnounceOnly;var l=o?_a.t("Allow threads"):_a.t("Allow members to start message threads?");var c=o?_a.t("Everyone will be able to add replies to messages posted in this channel, regardless of overall posting permissions"):_a.t("With this selected, anyone will be able to add threaded replies to messages posted in this channel.");if(!o&&!i||o&&"ra"===a)return null;return n.a.createElement("div",null,n.a.createElement("hr",{className:"top_margin bottom_margin"}),n.a.createElement(Z["a"],{htmlFor:"posting_permission_can_thread",type:"inline",cursor:"pointer",text:l,subtext:c},n.a.createElement(J["a"],{id:"posting_permission_can_thread",name:"can_thread",onChange:s,checked:r})))}},{key:"maybeRenderMemberPicker",value:function e(){var t=this.props,a=t.onChangeValueSelectedMembers,r=t.postingPermissionsSelectedMembers,i=t.featureAnnounceOnly,s=t.whoCanPost;if("multi"!==s)return null;var o=C.a.reduce(r||[],function(e,t){return d()({},e,ia()({},t,{id:t}))},{});var l=Object(H["c"])(o);var c=i?_a.t("Select people\u2026"):_a.t("Choose an option\u2026",{ns:"lazy_filter_select"});var u=32;return n.a.createElement(Nt["a"],{onValueChange:a,template:pa,tokenTemplate:ga,dataPromise:l,approxItemHeight:u,maxSelectedItems:100,placeholderText:c})}},{key:"formatPermissionSettings",value:function e(){var t=this.props,a=t.featureAnnounceOnly,r=t.isEnterpriseTeam,n=t.currentMember;var i={permissionType:"ra",label:_a.t("Everyone"),hideWhenOrgDefault:true};var s={permissionType:"regular",label:_a.t("Everyone, except guests"),hideWhenOrgDefault:true};var o={permissionType:"org_admin",label:_a.t("Org Admins/Owners")};var l={permissionType:"multi",label:_a.t("Org Admins and Owners, plus select members")};if(a){if(r){o.label=_a.t("Org Admins only");l.label=_a.t("Org Admins, plus specific people")}else{o.label=_a.t("Admins only");o.permissionType="admin";l.label=_a.t("Admins, plus specific people")}if(!Object(U["isAdmin"])(n)){o=null;l.label=_a.t("You, and specific people");Object(U["isRestricted"])(n)&&(s=null)}}return C.a.compact([i,s,o,l])}},{key:"renderRadios",value:function e(){var t=this.props,a=t.isOrgDefault,r=t.onChangeRadio,i=t.whoCanPost;var s=C.a.map(this.formatPermissionSettings(),function(e){if(a&&e.hideWhenOrgDefault)return null;var t=e.permissionType===i;return n.a.createElement("div",{key:e.permissionType},n.a.createElement(Z["a"],{htmlFor:"who_can_post_"+e.permissionType,type:"inline",cursor:"pointer",className:"p-channel_options--radio_label",text:e.label},n.a.createElement(tt["a"],{name:"who_can_post",value:e.permissionType,onChange:r,id:"who_can_post_"+e.permissionType,checked:t})))});return s}},{key:"render",value:function e(){var t=this.props,a=t.postingPermissionsLoaded,r=t.featureAnnounceOnly;if(!a)return n.a.createElement("div",{className:"p-channel_options--option_spinner"},n.a.createElement(ue["a"],{size:"jumbo"}));var i=_a.t("Who can post in this channel?");return n.a.createElement("div",{className:"p-channel-options--content_text"},r?n.a.createElement("p",null,n.a.createElement("strong",null,i)):n.a.createElement("p",null,i),this.renderRadios(),this.maybeRenderMemberPicker(),this.maybeRenderCheckbox())}}]);return t}(r["PureComponent"]);ka.displayName="PostingPermissions";ka.defaultProps=Oa;var Ea=Object(sa["a"])("feature_announce_only")(ka);var Ca=a(84);var ja=new q["b"]("channel_options");var wa={canThread:k["b"].bool,onErrorDialogButtonClick:k["b"].func.isRequired,channelPrefError:k["b"].bool,whoCanPost:k["b"].string,openModal:k["b"].func,featureAnnounceOnly:k["b"].bool.isRequired,isEnterpriseTeam:k["b"].bool};var Sa={canThread:false,whoCanPost:"",channelPrefError:false,openModal:C.a.noop,isEnterpriseTeam:false};var Ia=function(e){O()(t,e);function t(){m()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"componentDidUpdate",value:function e(t){var a=this.props.channelPrefError;!t.channelPrefError&&a&&this.props.openModal({element:this.renderError()})}},{key:"maybeRenderCanThreadLabel",value:function e(){var t=this.props.canThread;var a=ja.rt("Additionally, <strong>anyone in this channel</strong> will be able to add threaded replies to messages in this channel.");if(t)return n.a.createElement("p",null,a);return null}},{key:"renderError",value:function e(){var t=this.props.onErrorDialogButtonClick;var a=ja.t("OK");var r=ja.t("For some weird reason, that didn\u2019t work. Please try again.");var i=ja.t("Could not update settings");return n.a.createElement("div",null,n.a.createElement(Ca["a"],{goButtonText:a,showCancelButton:false,onGo:t,onCancel:t,title:i},n.a.createElement("p",null,r)))}},{key:"renderWhoCanPostLabel",value:function e(){var t=this.props,a=t.whoCanPost,r=t.featureAnnounceOnly,i=t.isEnterpriseTeam;var s=void 0;s=r?{ra:ja.t("Everyone"),regular:ja.t("Everyone, except guests"),org_admin:i?ja.t("Org Admins only"):ja.t("Admins only"),multi:i?ja.t("Org Admins, plus specific people"):ja.t("Admins, plus specific people")}:{ra:ja.t("Everyone"),regular:ja.t("Everyone, except guests"),org_admin:ja.t("Only Org Admins and Owners"),multi:ja.t("Only Org Admins and Owners, plus select members")};var o=ja.rt("<strong>{text}</strong> will be able to post",{text:C.a.get(s,a)});return n.a.createElement("p",null,o)}},{key:"render",value:function e(){var t=ja.t("Please note that these changes may take some time to complete.");return n.a.createElement("div",{className:"p-channel-options--content_text"},this.renderWhoCanPostLabel(),this.maybeRenderCanThreadLabel(),t)}}]);return t}(r["PureComponent"]);Ia.displayName="PostingPermissionsReview";Ia.defaultProps=Sa;var Ta=function e(t){return{featureAnnounceOnly:Object(j["isFeatureEnabled"])(t,"feature_announce_only")}};var Aa={openModal:w["openModal"]};var Na=Object(o["connect"])(Ta,Aa)(Ia);var Pa=new q["b"]("channel_options");var Ra={additionalVerificationError:k["b"].oneOfType([k["b"].string,k["b"].object]),additionalVerificationGood:k["b"].bool,channelNameNeedsChecking:k["b"].bool,channel:k["b"].object.isRequired,isCheckingAdditionalVerification:k["b"].bool,name:k["b"].string,onInvalidName:k["b"].func,onValidName:k["b"].func};var Ma={additionalVerificationError:"",additionalVerificationGood:false,channelNameNeedsChecking:false,isCheckingAdditionalVerification:false,name:"",onInvalidName:E["noop"],onValidName:E["noop"]};var Da=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.title=a.props.name;"#"===a.title[0]&&(a.title=a.title.substr(1));return a}b()(t,[{key:"render",value:function e(){var t=this.props,a=t.additionalVerificationError,r=t.additionalVerificationGood,i=t.channelNameNeedsChecking,s=t.channel,o=t.isCheckingAdditionalVerification,l=t.name,c=t.onInvalidName,u=t.onValidName;return n.a.createElement("div",{className:"top_margin"},n.a.createElement("label",{htmlFor:"channel_create_title",className:"c-label"},n.a.createElement("span",{className:"c-label__text"},Pa.t("Name"))),n.a.createElement(ke,{additionalVerificationError:a,additionalVerificationGood:r,channel:s,nameNeedsChecking:i,id:"channel_create_title",isCheckingAdditionalVerification:o,onInvalid:c,onValid:u,placeholder:Pa.t("Rename {title}",{title:l}),shouldFix:true,value:this.title}))}}]);return t}(r["PureComponent"]);Da.displayName="RenameChannel";Da.defaultProps=Ma;var xa=Da;var Fa={channel:k["b"].object.isRequired,channelName:k["b"].string,strong:k["b"].bool};var La={channelName:"",strong:false};var Ba=function e(t){var a=t.channel,r=t.strong;var i=t.channelName||Object(x["getDisplayName"])(a);var s=null;if(Object(x["isPublicChannel"])(a)||Object(x["isPrivateChannel"])(a)){var o=ee()({"c-icon--align-hashmark":!Object(x["isPrivateChannel"])(a)});s=n.a.createElement(te["a"],{className:o,align:"baseline",inherit:true,type:Object(x["isPrivateChannel"])(a)?"lock":"channel"})}var l=null;Object(x["isOrgSharedPublicOrPrivateChannel"])(a)?l=n.a.createElement(te["a"],{align:"baseline",inherit:true,type:"shared_channel"}):Object(x["isPendingExternallySharedChannel"])(a)?l=n.a.createElement(te["a"],{align:"baseline",inherit:true,type:"shared_channels_pending"}):Object(x["isSharedPublicOrPrivateChannel"])(a)&&(l=n.a.createElement(te["a"],{align:"baseline",inherit:true,type:"shared_channels"}));var c=ee()({bold:r});return n.a.createElement("span",{className:c},s,i,l)};Ba.displayName="FormattedChannelName";Ba.defaultProps=La;var Ua=Ba;var qa=new q["b"]("shared_channels");var Ga={channel:k["b"].object.isRequired,team:k["b"].object.isRequired,externalTeams:k["b"].array.isRequired,showLastChannelWarning:k["b"].bool,clogger:k["b"].object.isRequired,channelIsHostedByAnotherTeam:k["b"].bool,channelHostTeamName:k["b"].string,featureSharedChannelsEnterpriseClient:k["b"].bool,featureEscDisconnectV2Client:k["b"].bool};var Wa={showLastChannelWarning:false,channelIsHostedByAnotherTeam:false,channelHostTeamName:"",featureSharedChannelsEnterpriseClient:false,featureEscDisconnectV2Client:false};var Ha=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.maybeRenderLastChannelWarning=a.maybeRenderLastChannelWarning.bind(a);return a}b()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.clogger,r=t.showLastChannelWarning;a.track("SHARED_CHANNELS_STOP_SHARING_MODAL_OPEN",{is_last_channel_with_team:r,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_CHANNEL_OPTIONS_STOP_SHARING_OPTION",ui_component:"CHANNEL_OPTIONS_DIALOG"}}})}},{key:"maybeRenderLastChannelWarning",value:function e(){var t=this.props.featureEscDisconnectV2Client;if(!this.props.showLastChannelWarning||t)return null;var a=this.props.externalTeams.map(function(e){var t=e.name;return t});var r=Object(q["g"])(a,{react:true,strong:true});return n.a.createElement("div",{className:"c-alert c-alert--inline c-alert--level_error margin_bottom_150"},n.a.createElement("div",{className:"c-alert__message"},n.a.createElement("strong",null,qa.rt("This is your only shared channel with {teamNames}",{teamNames:r})),n.a.createElement("br",null),this.props.featureSharedChannelsEnterpriseClient?qa.t("If you stop sharing this channel, you won\u2019t be able to direct message members of their organization."):qa.t("If you stop sharing this channel, you won\u2019t be able to direct message members of their workspace.")))}},{key:"render",value:function e(){var t=this.props,a=t.channel,i=t.team,s=t.externalTeams,o=t.featureSharedChannelsEnterpriseClient,l=t.featureEscDisconnectV2Client,c=t.channelIsHostedByAnotherTeam,u=t.channelHostTeamName;var d=s.map(function(e){return Object(B["getTeamDisplayName"])(e)});var p=Object(q["g"])(d,{react:true,strong:true});var v=Object(q["g"])([Object(B["getTeamDisplayName"])(i)].concat(h()(d)),{react:true,strong:true});var m=qa.rt("Are you sure you want to stop sharing {channelName} with {teamNames}?",{channelName:n.a.createElement(Ua,{channel:a,strong:true}),teamNames:p});l&&(m=c?qa.rt("Are you sure you want to disconnect <strong>{teamName}</strong> from {channelName}?",{channelName:n.a.createElement(Ua,{channel:a,strong:true}),teamName:Object(B["getTeamDisplayName"])(i)}):qa.rt("Are you sure you want to stop sharing {channelName}?",{channelName:n.a.createElement(Ua,{channel:a,strong:true})}));var f=function e(){if(l)return n.a.createElement("ul",{className:"p-channel-options--content_text"},c?n.a.createElement(r["Fragment"],null,n.a.createElement("li",null,qa.t("You\u2019ll get an archived copy of the channel\u2019s contents.")),n.a.createElement("li",null,qa.rt("<strong>{hostTeam}</strong> won\u2019t be able to share this channel again.",{hostTeam:u}))):n.a.createElement(r["Fragment"],null,n.a.createElement("li",null,qa.rt("<strong>{invitedTeamNames}</strong> will get an archived copy of the channel\u2019s contents up to this point.",{invitedTeamNames:p})),n.a.createElement("li",null,qa.rt("Members of your organization can keep using this channel.")),n.a.createElement("li",null,qa.rt("You won\u2019t be able to share this channel again."))));return n.a.createElement("ul",{className:"p-channel-options--content_text"},n.a.createElement("li",null,qa.rt("{teamNames} will keep separate copies of this channel.",{teamNames:v})),n.a.createElement("li",null,o?qa.t("Each organization can continue using their copy."):qa.t("Each workspace can continue using their copy.")),n.a.createElement("li",null,o?qa.t("Neither organization will be able to re-share this channel."):qa.t("Neither workspace will be able to re-share this channel.")))};return n.a.createElement("div",null,this.maybeRenderLastChannelWarning(),n.a.createElement("p",{className:"p-channel-options--content_text"},l&&c?qa.t("You can disconnect from this shared channel at any time. Here\u2019s what will happen:"):qa.t("You can stop sharing this channel at any time. Here\u2019s what will happen:")),f(),n.a.createElement("p",{className:"p-channel-options--content_text"},m))}}]);return t}(r["PureComponent"]);Ha.displayName="StopSharingChannel";Ha.defaultProps=Wa;function Va(e,t){var a=t.channel;return{team:Object(M["d"])(e),externalTeams:Object(x["getPendingAndConnectedTeamIds"])(e,a).map(function(t){return Object(M["i"])(e,t)}),clogger:Object(W["a"])({state:e}),channelIsHostedByAnotherTeam:Object(x["isHostedByAnotherTeam"])(e,a),featureSharedChannelsEnterpriseClient:Object(j["isFeatureEnabled"])(e,"feature_shared_channels_enterprise_client"),featureEscDisconnectV2Client:Object(j["isFeatureEnabled"])(e,"feature_esc_disconnect_v2_client"),channelHostTeamName:Object(x["getHostTeamName"])(e,a)}}var Ka=Object(o["connect"])(Va)(Ha);function za(e){var t="";e&&(t="type:all");return t}function Ya(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n="";if("multi"===e){n=r&&!a?"type:admin":"type:org_admin";t&&t.length&&t.forEach(function(e){n+=",user:"+e})}else n="type:"+e;return n}var Qa=new q["b"]("channel_options");var Ja=new q["b"]("client");var Za=new q["b"]("ui_validation");var Xa={0:"all_options",1:"archive",2:"share_external",3:"stop_sharing_external",4:"convert_private",5:"rename",6:"export",7:"delete",8:"purpose",9:"retention",10:"posting_privilege",11:"posting_privilege_review",12:"manage_org_access",13:"manage_org_access_name_conflict",14:"manage_org_access_review"};var $a={additionalParams:k["b"].object,archiveChannelApi:k["b"].func.isRequired,cancelExternalSharedChannelInviteApi:k["b"].func.isRequired,callEnterpriseNameTaken:k["b"].func.isRequired,channel:k["b"].object,submitChannelPurpose:k["b"].func.isRequired,channelRetentionDuration:k["b"].number,channelRetentionType:k["b"].number,convertToOrgShared:k["b"].func.isRequired,convertChannelToPrivateApi:k["b"].func.isRequired,currentMember:k["b"].object,currentTeam:k["b"].object,isEnterprise:k["b"].bool,disableConvertToPrivate:k["b"].bool,disableRename:k["b"].bool,disconnectChannel:k["b"].func.isRequired,dmRetentionDuration:k["b"].number,dmRetentionType:k["b"].number,externalTeams:k["b"].array,getChannelOrgOriginatingTeam:k["b"].func.isRequired,getExternalTeamIdsConnectedOnlyByChannel:k["b"].func.isRequired,groupRetentionDuration:k["b"].number,groupRetentionType:k["b"].number,onCancel:k["b"].func.isRequired,orgName:k["b"].string,preselectedSection:k["b"].string,renameChannelApi:k["b"].func.isRequired,showArchive:k["b"].bool.isRequired,showConvertToPrivate:k["b"].bool.isRequired,showDataRetention:k["b"].bool.isRequired,showDelete:k["b"].bool.isRequired,showExport:k["b"].bool.isRequired,showManageOrgAccess:k["b"].bool.isRequired,showPostingPermissions:k["b"].bool.isRequired,showPurpose:k["b"].bool.isRequired,showRename:k["b"].bool.isRequired,showShareExternal:k["b"].bool.isRequired,showStopShareExternal:k["b"].bool.isRequired,teamId:k["b"].string,featureDefaultSharedChannels:k["b"].bool.isRequired,updateOrgAccessForChannelApi:k["b"].func.isRequired,exportChannelHistory:k["b"].func.isRequired,setChannelDeleted:k["b"].func.isRequired,getChannelPref:k["b"].func.isRequired,setChannelPrefs:k["b"].func.isRequired,setChannelPurpose:k["b"].func.isRequired,openModal:k["b"].func,getDataRetention:k["b"].func,setDataRetention:k["b"].func,getExternalSharedChannelInviteDetails:k["b"].func,featureDegradedSend:k["b"].bool,clogger:k["b"].object.isRequired,featureSharedChannelsEnterpriseClient:k["b"].bool.isRequired,featureAnnounceOnly:k["b"].bool,featureEscDisconnectV2Client:k["b"].bool,channelIsHostedByAnotherTeam:k["b"].bool,internalTeamIds:k["b"].array,featureChangePurposeToDescription:k["b"].bool};var er={additionalParams:{},channel:{},channelRetentionDuration:0,channelRetentionType:0,currentMember:{},currentTeam:{},isEnterprise:false,disableConvertToPrivate:false,disableRename:false,dmRetentionDuration:0,dmRetentionType:0,externalTeams:[],groupRetentionDuration:0,groupRetentionType:0,orgName:"",preselectedSection:"",teamId:"",openModal:E["noop"],getDataRetention:E["noop"],setDataRetention:E["noop"],getExternalSharedChannelInviteDetails:E["noop"],featureDegradedSend:false,featureAnnounceOnly:false,featureEscDisconnectV2Client:false,channelIsHostedByAnotherTeam:false,internalTeamIds:[],featureChangePurposeToDescription:false};var tr={children:n.a.createElement("div",null),title:"",qa:"filler"};var ar=0;var rr=1;var nr=1;var ir=0;var sr=2;var or=0;var lr=function e(t){var a=Object(E["invert"])(Xa);return+a[t]};var cr=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.channelNameOnInvalidName=a.channelNameOnInvalidName.bind(a);a.channelNameOnValidName=a.channelNameOnValidName.bind(a);a.channelNameOrgValidation=a.channelNameOrgValidation.bind(a);a.closeAlertDialog=a.closeAlertDialog.bind(a);a.closeModal=a.closeModal.bind(a);a.getChannelRetentionPrefs=a.getChannelRetentionPrefs.bind(a);a.getPostingPermissionPrefs=a.getPostingPermissionPrefs.bind(a);a.goBackToAllOptions=a.goBackToAllOptions.bind(a);a.goBackToManageAccessPrevStep=a.goBackToManageAccessPrevStep.bind(a);a.goToStep=a.goToStep.bind(a);a.manageOrgAccessSave=a.manageOrgAccessSave.bind(a);a.onChangeCheckboxCanThread=a.onChangeCheckboxCanThread.bind(a);a.onChangeCheckboxDelete=a.onChangeCheckboxDelete.bind(a);a.onChangeManageOrgAccessShareWith=a.onChangeManageOrgAccessShareWith.bind(a);a.onChangeManageOrgAccessTeamPicker=a.onChangeManageOrgAccessTeamPicker.bind(a);a.onChangeRadioWhoCanPost=a.onChangeRadioWhoCanPost.bind(a);a.onChangeValueSelectedMembers=a.onChangeValueSelectedMembers.bind(a);a.onChannelPurposeTextareaChange=a.onChannelPurposeTextareaChange.bind(a);a.onChannelPurposeValidationChange=a.onChannelPurposeValidationChange.bind(a);a.onClickArchiveInsteadDelete=a.onClickArchiveInsteadDelete.bind(a);a.onClickArchiveOption=a.onClickArchiveOption.bind(a);a.onClickConvertToPrivateOption=a.onClickConvertToPrivateOption.bind(a);a.onClickDataRetentionOption=a.onClickDataRetentionOption.bind(a);a.onClickDeleteOption=a.onClickDeleteOption.bind(a);a.onClickExportOption=a.onClickExportOption.bind(a);a.onClickManageOrgAccessOption=a.onClickManageOrgAccessOption.bind(a);a.onClickPostingPermissionsOption=a.onClickPostingPermissionsOption.bind(a);a.onClickPurposeOption=a.onClickPurposeOption.bind(a);a.onClickRenameOption=a.onClickRenameOption.bind(a);a.onClickShareExternalOption=a.onClickShareExternalOption.bind(a);a.onClickCancelExternalSharedChannelInvite=a.onClickCancelExternalSharedChannelInvite.bind(a);a.onClickStopShareExternalOption=a.onClickStopShareExternalOption.bind(a);a.onErrorDialogButtonClick=a.onErrorDialogButtonClick.bind(a);a.onRetentionDurationChange=a.onRetentionDurationChange.bind(a);a.onRetentionDurationUnitChange=a.onRetentionDurationUnitChange.bind(a);a.onRetentionTypeChange=a.onRetentionTypeChange.bind(a);a.setManageOrgAccessLoaded=a.setManageOrgAccessLoaded.bind(a);a.setPostingPermissionsLoaded=a.setPostingPermissionsLoaded.bind(a);a.setPostingPermissionsSelectedMembers=a.setPostingPermissionsSelectedMembers.bind(a);a.setRetentionLoaded=a.setRetentionLoaded.bind(a);a.showAlertDialog=a.showAlertDialog.bind(a);a.showSuccessAlert=a.showSuccessAlert.bind(a);a.maybeDisableRetentionGoButton=a.maybeDisableRetentionGoButton.bind(a);a.saveRetention=a.saveRetention.bind(a);a.showRetentionDialog=a.showRetentionDialog.bind(a);a.hideRetentionDialog=a.hideRetentionDialog.bind(a);a.handleRetentionCheckboxChange=a.handleRetentionCheckboxChange.bind(a);a.durationInputRef=a.durationInputRef.bind(a);a.setPostingPermissions=a.setPostingPermissions.bind(a);var r=a.props,n=r.channel,i=r.currentTeam,s=r.internalTeamIds;var o=[];var l=[];var c="";if(Object(x["isOrgSharedPublicOrPrivateChannel"])(n))Object(x["isOrgGlobalSharedPublicOrPrivateChannel"])(n)||(o=s);else{l=[i.id];c=i.id}a.state={canThread:false,channelNameAdditionalVerificationError:"",channelNameNeedsChecking:false,channelNameOrgIsCheckingVerification:false,channelNameValid:false,channelPrefError:false,channelToBeShared:false,goButtonIsDisabled:false,goButtonIsPending:false,isOnlyChannelWithExternalTeam:false,manageOrgAccessDisabledTeamIds:l,manageOrgAccessLoaded:false,manageOrgAccessOriginatingTeamId:c,manageOrgAccessPreviousStep:"manage_org_access",manageOrgAccessShareWith:Object(x["isOrgGlobalSharedPublicOrPrivateChannel"])(a.props.channel)?"all":"specific",manageOrgAccessTeamIds:o,newChannelName:null,postingPermissionsLoaded:false,postingPermissionsSelectedMembers:null,retentionDuration:0,retentionDurationUnit:0,retentionLoaded:false,retentionType:0,isRetentionCheckboxChecked:false,showBackButton:false,showCancelButton:false,showGoButton:false,showSuccessAlert:false,successAlertHeading:"",successAlertText:"",teamRetentionDuration:0,teamRetentionType:0,whoCanPost:null};a.debouncedChannelNameOrgValidation=Object(E["debounce"])(a.actuallyCallChannelNameOrgValidation,325,{trailing:true});a.modalRef=null;a.steps=[];a.pendingChannelNameOrgValidation=null;return a}b()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.preselectedSection,r=t.showArchive,n=t.showConvertToPrivate,i=t.showDataRetention,s=t.showDelete,o=t.showExport,l=t.showManageOrgAccess,c=t.showPostingPermissions,u=t.showPurpose,d=t.showRename;this.maybeCheckIfLastChannelWithExternalTeam();if(a.length)switch(a){case"archive":r&&this.onClickArchiveOption();break;case"convert_private":n&&this.onClickConvertToPrivateOption();break;case"convert_shared":case"manage_teams":l&&this.onClickManageOrgAccessOption();break;case"delete":s&&this.onClickDeleteOption();break;case"export":o&&this.onClickExportOption();break;case"posting_privilege":c&&this.onClickPostingPermissionsOption();break;case"purpose":u&&this.onClickPurposeOption();break;case"rename":d&&this.onClickRenameOption();break;case"retention":i&&this.onClickDataRetentionOption();break;default:break}}},{key:"componentDidUpdate",value:function e(t,a){var r=this.state.isRetentionCheckboxChecked;this.retentionDialog&&r!==a.isRetentionCheckboxChecked&&this.retentionDialog.render({goButtonIsDisabled:!r,goOnEnterPressed:r})}},{key:"onClickArchiveOption",value:function e(){this.goButtonIsDisabled(false);this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("archive")}},{key:"onClickShareExternalOption",value:function e(){Object(D["c"])({model_ob:this.props.channel,element:"shared_channels_channel_options_share_option"});this.closeModal()}},{key:"onClickCancelExternalSharedChannelInvite",value:function e(t){var a=this;var r=this.props,n=r.channel,i=r.currentMember,s=r.externalTeams,o=r.featureSharedChannelsEnterpriseClient;this.props.getExternalSharedChannelInviteDetails({channelId:n.id,targetTeamId:t}).then(function(e){var r=s[0].name;var l=e.invite.inviting_user;var c=Ja.t("Oops, something went wrong.");var u=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");var d=o?Qa.rt("If you\u2019d like, you can always reinvite <strong>{targetTeamName}</strong> (or another organization).",{targetTeamName:r}):Qa.rt("If you\u2019d like, you can always reinvite <strong>{targetTeamName}</strong> (or another workspace).",{targetTeamName:r});var p=Qa.t("Canceled invitation");if(l.id===i.id)a.props.cancelExternalSharedChannelInviteApi({channelId:n.id,targetTeamId:t}).then(function(){a.showSuccessAlert({heading:p,text:d})}).catch(function(e){a.showAlertDialog({message:u,title:c});throw e});else{var h=Qa.t("Cancel invitation?");var v=Qa.rt("This invitation was originally sent by <strong>{inviterName}</strong> to <strong>{targetTeamName}</strong>. Are you sure you want to cancel?",{inviterName:l.profile.real_name,targetTeamName:r});var m=function e(){return a.props.cancelExternalSharedChannelInviteApi({channelId:n.id,targetTeamId:t}).then(function(){a.closeAlertDialog();a.showSuccessAlert({heading:p,text:d})}).catch(function(e){a.showAlertDialog({message:u,title:c});throw e})};a.showAlertDialog({cancelButtonText:Qa.t("Never Mind"),goButtonText:Qa.t("Cancel Invitation"),goButtonType:"danger",message:v,onGo:m,onCancel:a.closeAlertDialog,showCancelButton:true,title:h})}})}},{key:"onClickStopShareExternalOption",value:function e(){if(Object(H["b"])()){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("stop_sharing_external")}else{Object(H["d"])(this.props.channel);this.closeModal()}}},{key:"onClickConvertToPrivateOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("convert_private")}},{key:"onClickRenameOption",value:function e(){var t=this;this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.hideSuccessAlert();var a=true;if(this.props.additionalParams.name&&this.props.additionalParams.name.length){a=false;this.setState(function(){return{newChannelName:t.props.additionalParams.name,channelNameNeedsChecking:true}})}this.goButtonIsDisabled(a);this.showGoButton(true);this.goToStep("rename")}},{key:"onClickExportOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("export")}},{key:"onClickDeleteOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.goButtonIsDisabled(true);this.hideSuccessAlert();this.goToStep("delete")}},{key:"onClickPurposeOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("purpose")}},{key:"onClickDataRetentionOption",value:function e(){this.goButtonIsPending(false);this.showCancelButton(true);this.showGoButton(true);this.hideSuccessAlert();this.goToStep("retention");this.getChannelRetentionPrefs()}},{key:"onClickPostingPermissionsOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.hideSuccessAlert();this.goToStep("posting_privilege");this.getPostingPermissionPrefs()}},{key:"onClickManageOrgAccessOption",value:function e(){this.goButtonIsPending(false);this.showBackButton(true);this.hideSuccessAlert();this.goToStep("manage_org_access");this.maybeGetOriginatingTeamAndCurrentAccess();this.setState(function(){return{channelToBeShared:true}})}},{key:"onRetentionTypeChange",value:function e(t){var a=this;var r=parseInt(t.target.value,10);this.setState(function(){return{retentionType:r}},function(){a.maybeDisableRetentionGoButton();r===rr&&a.retentionDurationInput.focus()})}},{key:"onRetentionDurationChange",value:function e(t){this.setState(function(){return{retentionDuration:parseInt(t,10)}},this.maybeDisableRetentionGoButton)}},{key:"onRetentionDurationUnitChange",value:function e(t){this.setState(function(){return{retentionDurationUnit:t}},this.maybeDisableRetentionGoButton)}},{key:"onChangeManageOrgAccessShareWith",value:function e(t){var a=t.target.value;this.setState(function(){return{manageOrgAccessShareWith:a}})}},{key:"onChangeManageOrgAccessTeamPicker",value:function e(t){var a=[];this.goButtonIsDisabled(!t.length);if(t.length){t.forEach(function(e){a.push(e.team.id)});this.setState(function(){return{manageOrgAccessTeamIds:a}})}}},{key:"onChangeCheckboxDelete",value:function e(t){var a=t.target.checked;this.goButtonIsDisabled(!a)}},{key:"onClickArchiveInsteadDelete",value:function e(t){t.preventDefault();this.onClickArchiveOption()}},{key:"onChannelPurposeTextareaChange",value:function e(t){this.newChannelPurpose(t.target.value)}},{key:"onChannelPurposeValidationChange",value:function e(t){this.goButtonIsDisabled(t)}},{key:"onChangeCheckboxCanThread",value:function e(t){var a=t.target.checked;this.setCanThreadPermission(a)}},{key:"onChangeRadioWhoCanPost",value:function e(t){var a=t.target.value;this.setWhoCanPostPermission(a)}},{key:"onChangeValueSelectedMembers",value:function e(t){var a=[];t.forEach(function(e){e.member&&a.push(e.member.id)});this.setPostingPermissionsSelectedMembers(a)}},{key:"onErrorDialogButtonClick",value:function e(){this.setChannelPrefError(false)}},{key:"getChannelRetentionPrefs",value:function e(){var t=this;var a=this.props,r=a.channel,n=a.groupRetentionType,i=a.groupRetentionDuration,s=a.dmRetentionType,o=a.dmRetentionDuration,l=a.channelRetentionType,c=a.channelRetentionDuration;this.props.getDataRetention(r).then(function(e){var a=void 0;var u=void 0;if(Object(x["isPrivateChannel"])(r)){a=parseInt(n,10);u=parseInt(i,10)}else if(Object(x["isIm"])(r)||Object(x["isMpim"])(r)){a=parseInt(s,10);u=parseInt(o,10)}else{a=parseInt(l,10);u=parseInt(c,10)}var d=parseInt(e.retentionType,10);var p=parseInt(e.retentionDuration,10);t.setState(function(){return{retentionDuration:p,retentionType:d,teamRetentionDuration:u,teamRetentionType:a}});t.setRetentionLoaded(true)})}},{key:"setRetentionLoaded",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{retentionLoaded:t}})}},{key:"getPostingPermissionPrefs",value:function e(){var t=this;var a=this.props,r=a.channel,n=a.currentMember,i=a.isEnterprise,s=a.featureAnnounceOnly;var o=[this.props.getChannelPref({channelId:r.id,prefName:"who_can_post",reason:"channel-options-posting-permission"}),this.props.getChannelPref({channelId:r.id,prefName:"can_thread",reason:"channel-options-posting-permission"})];Promise.all(o).then(function(e){var a=e[0];if(!a.ok||!a.pref_value)return;var o=a.pref_value;var l=n.id;var c=s?(o.user||[]).filter(function(e){return e!==l}):o.user||[];if(o.type)if(!c.length||"admin"!==o.type[0]&&"owner"!==o.type[0]&&"org_admin"!==o.type[0])if(!s||"admin"!==o.type[0]&&"owner"!==o.type[0]&&"org_admin"!==o.type[0]||Object(U["isAdmin"])(n)){var u=s&&!i&&"org_admin"===o.type[0]?"admin":o.type[0];"owner"===u&&(u=i?"org_admin":"admin");Object(x["isOrgDefaultChannel"])(r)&&"org_admin"!==u&&(u="org_admin");t.setWhoCanPostPermission(u)}else t.setWhoCanPostPermission("multi");else{t.setWhoCanPostPermission("multi");t.setPostingPermissionsSelectedMembers(o.user)}else Object(x["isOrgDefaultChannel"])(r)?t.setWhoCanPostPermission("org_admin"):t.setWhoCanPostPermission("ra");var d=e[1];if(d.ok&&d.pref_value){var p=d.pref_value;p.type?t.setCanThreadPermission("all"===p.type[0]||"ra"===p.type[0]):s?t.setCanThreadPermission(true):t.setCanThreadPermission(false)}else t.setCanThreadPermission(true);t.setPostingPermissionsLoaded(true);t.showCancelButton(true);t.showGoButton(true)})}},{key:"setCanThreadPermission",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{canThread:t}})}},{key:"setPostingPermissionsLoaded",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{postingPermissionsLoaded:t}})}},{key:"setWhoCanPostPermission",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState(function(){return{whoCanPost:t}})}},{key:"setChannelPrefError",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{channelPrefError:t}})}},{key:"setPostingPermissionsSelectedMembers",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setState(function(){return{postingPermissionsSelectedMembers:t}})}},{key:"setManageOrgAccessLoaded",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{manageOrgAccessLoaded:t}})}},{key:"setPostingPermissions",value:function e(){var t=this;var a=this.props,r=a.channel,n=a.currentMember,i=a.isEnterprise,s=a.featureAnnounceOnly;var o=this.state,l=o.postingPermissionsSelectedMembers,c=o.whoCanPost,u=o.canThread;this.goButtonIsPending(true);var d=!s||"admin"!==c&&"org_admin"!==c?c:"multi";var p=n.id;var v=Object(U["isAdmin"])(n)?[]:[p];var m=void 0;m=s?"multi"===c?Object(E["uniq"])([].concat(h()(l||[]),v)):v:l;var f=Ya(d,m,i,s);var b={who_can_post:f};s?b.can_thread=u?"type:ra":f:Object(x["isOrgDefaultChannel"])(r)&&(b.can_thread=za(u));this.props.setChannelPrefs({channelId:r.id,newPrefs:JSON.stringify(b),reason:"channel-options-posting-permission"}).then(function(){t.setPostingPermissionsLoaded(false);t.closeModal()}).catch(function(e){var a=e.name;var n={title:Ja.t("Oops, something went wrong."),message:Qa.t("For some weird reason, that didn\u2019t work. Please try again.")};if(s&&"restricted_action"===a){n.title=Ja.t("Unable to save posting permissions");n.message=Qa.t("It seems like the posting permission for this channel has been changed and you can no longer change this preference.");n.onClose=function(){var e="channel-options/setPostingPermissions.catch";Object(V["a"])(r.id,7,e);t.closeModal()}}t.showAlertDialog(n);t.goButtonIsPending(false);t.setChannelPrefError(true)})}},{key:"maybeDisableRetentionGoButton",value:function e(){var t=this.state,a=t.retentionType,r=t.retentionDuration,n=t.retentionDurationUnit;var i=n===or?r:365*r;this.goButtonIsDisabled(!it({retentionType:a,retentionDuration:i}))}},{key:"goToStep",value:function e(t){var a=lr(t);if(a){this.modalRef.setStepNumber(a+1);return}this.modalRef.setStepNumber(1)}},{key:"maybeGetOriginatingTeamAndCurrentAccess",value:function e(){var t=this;var a=this.props.channel;var r=this.state,n=r.manageOrgAccessDisabledTeamIds,i=r.manageOrgAccessLoaded,s=r.manageOrgAccessTeamIds;if(i){this.showCancelButton(true);this.showGoButton(true);return}var o=[];Object(x["isOrgSharedPublicOrPrivateChannel"])(a)&&o.push(this.props.getChannelOrgOriginatingTeam(a.id));Promise.all(o).then(function(e){var r=s;var i=n;var o=t.state.manageOrgAccessOriginatingTeamId;if(Object(x["isOrgSharedPublicOrPrivateChannel"])(a)){o=e[0].team.id;i=[o]}r=Object(E["uniq"])(t.state.manageOrgAccessTeamIds.concat(o));t.setState(function(){return{manageOrgAccessDisabledTeamIds:i,manageOrgAccessOriginatingTeamId:o,manageOrgAccessTeamIds:r}});t.manageOrgAccessFilterFunction=Object(H["e"])({preselected_ids:r,disabled_ids:i,sort_items_function:function e(t,a){var r=t.name.toLowerCase();var n=a.name.toLowerCase();if(r<n)return-1;if(n<r)return 1;return 0},secondary_sort_items_function:function e(t,a){if(t.id===o)return-1;if(a.id===o)return 1;return 0}});t.manageOrgAccessFilterFunction("").then(function(){t.showCancelButton(true);t.showGoButton(true);t.setManageOrgAccessLoaded(true)})}).catch(function(e){var a=Ja.t("Oops, something went wrong.");var r=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:r,title:a});throw e})}},{key:"maybeCheckIfLastChannelWithExternalTeam",value:function e(){var t=this;var a=this.props.channel;var r="channel-options/maybeCheckIfLastChannelWithExternalTeam";Object(x["isSharedPublicOrPrivateChannel"])(a)&&Object(H["b"])()&&this.props.getExternalTeamIdsConnectedOnlyByChannel({channelId:a.id,reason:r}).then(function(e){t.setState(function(){return{isOnlyChannelWithExternalTeam:!!e.length}})})}},{key:"closeModal",value:function e(){this.alertDialog&&this.alertDialog.close();this.retentionDialog&&this.retentionDialog.close();this.props.onCancel()}},{key:"goBackToAllOptions",value:function e(){this.goButtonIsPending(false);this.showBackButton(false);this.showCancelButton(false);this.showGoButton(false);this.goButtonIsDisabled(false);this.goToStep("all_options")}},{key:"goButtonIsDisabled",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{goButtonIsDisabled:t}})}},{key:"goButtonIsPending",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState(function(){return{goButtonIsPending:t}})}},{key:"showBackButton",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState(function(){return{showBackButton:t}})}},{key:"showCancelButton",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState(function(){return{showCancelButton:t}})}},{key:"showGoButton",value:function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState(function(){return{showGoButton:t}})}},{key:"newChannelPurpose",value:function e(t){this.setState(function(){return{newChannelPurpose:t}})}},{key:"actuallyCallChannelNameOrgValidation",value:function e(t){var a=this;var r=this.props.channel;if(Object(x["getDisplayName"])(r)===t){this.setState(function(){return{channelNameAdditionalVerificationError:"",channelNameOrgIsCheckingVerification:false,channelNameValid:false}});this.goButtonIsDisabled(true);return}this.pendingChannelNameOrgValidation=this.props.callEnterpriseNameTaken({channel:r,newChannelName:t});this.pendingChannelNameOrgValidation.then(function(e){var i=a.props,s=i.currentTeam,o=i.orgName;var l=void 0;var c="";if(!e.ok||e.name_taken){l=false;c=a.state.channelToBeShared?Qa.rt("<strong>{name}</strong> is already in use by a channel on another {orgName} workspace. Choose a new name to share this channel outside of <span>{teamName}</span>.",{name:t,orgName:o,teamName:Object(B["getTeamDisplayName"])(s)},function(e){var a=e.key,i=e.tag,s=e.text;if("strong"===i)return n.a.createElement("strong",{key:a+"-1"},re(a,r,t));return n.a.createElement("strong",{key:a},s)}):Qa.rt("<strong>{name}</strong> is already in use by a channel on another {orgName} workspace. Choose a new name.",{name:t,orgName:o,teamName:Object(B["getTeamDisplayName"])(s)},function(e){var a=e.key,i=e.tag,s=e.text;if("strong"===i)return n.a.createElement("strong",{key:a+"-1"},re(a,r,t));return n.a.createElement("strong",{key:a},s)})}else l=true;a.goButtonIsDisabled(!l);a.setState(function(){return{channelNameAdditionalVerificationError:c,channelNameOrgIsCheckingVerification:false,channelNameValid:l}})}).catch(function(e){a.setState(function(){return{channelNameAdditionalVerificationError:"",channelNameOrgIsCheckingVerification:false,channelNameValid:false}});a.goButtonIsDisabled(true);var t=Ja.t("Oops, something went wrong.");var r=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");a.showAlertDialog({message:r,title:t});throw e})}},{key:"channelNameOrgValidation",value:function e(t){this.setState(function(){return{channelNameOrgIsCheckingVerification:true}});this.pendingChannelNameOrgValidation&&this.pendingChannelNameOrgValidation.cancel();this.debouncedChannelNameOrgValidation(t)}},{key:"channelNameOnInvalidName",value:function e(){this.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:"",channelNameNeedsChecking:false}});this.goButtonIsDisabled(true)}},{key:"channelNameOnValidName",value:function e(t){var a=t.value;var r=this.props.channel;var n=this.state.channelToBeShared;this.setState(function(){return{channelNameAdditionalVerificationError:"",newChannelName:a,channelNameNeedsChecking:false}});Object(x["isOrgSharedPublicOrPrivateChannel"])(r)||n?this.channelNameOrgValidation(a):this.goButtonIsDisabled(false)}},{key:"manageOrgAccessSave",value:function e(){var t=this;this.goButtonIsPending(true);var a=this.props,r=a.channel,n=a.teamId;var i=this.state,s=i.manageOrgAccessShareWith,o=i.manageOrgAccessTeamIds;var l="all"===s;var u={orgWide:l};if(Object(x["isOrgSharedPublicOrPrivateChannel"])(r)){l||(u.teamIds=o);this.props.updateOrgAccessForChannelApi(d()({channelId:r.id},u)).then(function(){t.closeModal()}).catch(function(e){t.goButtonIsPending(false);var a=Qa.t("Could not update settings");var r=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:r,title:a});throw e})}else{l||(u.targetDomains=o.map(function(e){var t=Object(c["c"])(n);var a=Object(M["i"])(t,e);return a.domain}));var p=[];this.makeChannelName()!==Object(x["getDisplayName"])(r)&&p.push(this.props.renameChannelApi({channel:r,newName:this.state.newChannelName}));Promise.all(p).then(function(){return t.props.convertToOrgShared(d()({channel:r},u))}).then(function(){t.closeModal()}).catch(function(e){t.goButtonIsPending(false);var a=Qa.t("Could not update settings");var r=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:r,title:a});throw e})}}},{key:"makeChannelName",value:function e(){var t=this.props.channel;var a=this.state.newChannelName;return a&&a.length?a:Object(x["getDisplayName"])(t)}},{key:"showAlertDialog",value:function e(t){var a=t.title,r=t.message,i=t.cancelButtonText,s=void 0===i?"":i,o=t.goButtonText,l=void 0===o?"":o,c=t.goButtonType,u=void 0===c?"primary":c,p=t.onGo,h=void 0===p?E["noop"]:p,v=t.onCancel,m=void 0===v?E["noop"]:v,f=t.onClose,b=void 0===f?this.closeAlertDialog:f,g=t.showCancelButton,_=void 0!==g&&g;var y={cancelButtonText:s,children:n.a.createElement("p",null,r),goButtonText:l,goButtonType:u,onCancel:m,onClose:b,onGo:h,showCancelButton:_,title:a};this.alertDialog?this.alertDialog.render(d()({},y)):this.alertDialog=this.props.openModal({element:n.a.createElement(K["a"],y),isStackable:true})}},{key:"closeAlertDialog",value:function e(){this.setState(function(){return{goButtonIsPending:false}});this.alertDialog=null}},{key:"showSuccessAlert",value:function e(t){var a=t.heading,r=t.text;this.setState(function(){return{showSuccessAlert:true,successAlertHeading:a,successAlertText:r}})}},{key:"hideSuccessAlert",value:function e(){this.setState(function(){return{showSuccessAlert:false}})}},{key:"goBackToManageAccessPrevStep",value:function e(){this.goToStep(this.state.manageOrgAccessPreviousStep)}},{key:"saveRetention",value:function e(){var t=this;var a=this.state,r=a.retentionType,n=a.retentionDuration,i=a.retentionDurationUnit;var s=this.props.channel;this.goButtonIsPending(true);this.props.setDataRetention({channel:s,retentionDuration:st({retentionDuration:n,retentionDurationUnit:i}),retentionType:r}).then(function(e){t.goButtonIsPending(false);if(!e.ok){var a=Ja.t("Oops, something went wrong.");var r=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:r,title:a});return}t.closeModal()}).catch(function(e){t.goButtonIsPending(false);var a=Ja.t("Oops, something went wrong.");var r=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:r,title:a});throw e})}},{key:"showRetentionDialog",value:function e(){this.retentionDialog=this.props.openModal({element:this.renderRetentionDialog(),isStackable:true})}},{key:"hideRetentionDialog",value:function e(){this.setState(function(){return{isRetentionCheckboxChecked:false}})}},{key:"handleRetentionCheckboxChange",value:function e(){this.setState(function(e){return{isRetentionCheckboxChecked:!e.isRetentionCheckboxChecked}})}},{key:"durationInputRef",value:function e(t){this.retentionDurationInput=t}},{key:"renderRetentionDialog",value:function e(){var t=this.state,a=t.retentionType,r=t.retentionDuration,i=t.retentionDurationUnit,s=t.teamRetentionType,o=t.teamRetentionDuration;var l=this.props.channel;var c=st({retentionDuration:r,retentionDurationUnit:i});var u=void 0;switch(a){case ar:switch(s){case nr:u=Qa.t("Use the default workspace retention settings \u2014 Keep everything");break;case ir:u=Qa.t("Use the default workspace retention settings \u2014 Keep messages, but don\u2019t track revisions");break;case sr:u=Qa.t("Use the default workspace retention settings \u2014 Messages older than {duration, plural, =1 {# day} other {# days}} will be deleted.",{duration:o,fallbackHash:"7480a828b3b52106d6407a4e8f29e489ed887722"});break;default:u=Qa.t("Use the default workspace retention settings \u2014 Keep everything");break}break;case rr:if(c>364){var d=Object(E["round"])(c/365,1);u=Qa.t("Messages older than {duration, plural, =1 {# day} other {# days}} ({durationInYears, plural, =1 {# year} other {# years}}) will be deleted",{duration:c,durationInYears:d,fallbackHash:"2641d4c8882584eb6bee3cdb1172b02f43b9881f"})}else u=Qa.t("Messages older than {duration, plural, =1 {# day} other {# days}} will be deleted",{duration:c,fallbackHash:"1f76675f52cc8078d8373c5e7d241070bba730c3"});break;default:u=Qa.t("Use the default workspace retention settings");break}return n.a.createElement(Q["a"],{title:Qa.t("Apply new retention settings?"),goButtonText:Qa.t("Apply Settings"),goButtonType:"danger",onCancel:this.hideRetentionDialog,onGo:this.saveRetention,goButtonIsDisabled:!this.state.isRetentionCheckboxChecked,goOnEnterPressed:this.state.isRetentionCheckboxChecked,shouldCloseOnGo:false},n.a.createElement(X["a"],{level:"error",className:"margin_bottom_100"},Qa.rt("<strong>Warning:</strong> Messages deleted by retention settings are truly, permanently deleted. These messages can\u2019t be restored or recovered, even by Slack.")),n.a.createElement("strong",null,Qa.t("Here\u2019s what your new settings will be:")),n.a.createElement("ul",{className:"margin_top_100"},n.a.createElement("li",null,Object(x["isIm"])(l)||Object(x["isMpim"])(l)?Qa.t("In this conversation: {newSetting}",{newSetting:u}):Qa.t("In this channel: {newSetting}",{newSetting:u}))),n.a.createElement(Z["a"],{text:Qa.rt("<strong>Yes, apply these new settings</strong>"),htmlFor:"dataRetentionOverrideConfirm",type:"inline",cursor:"pointer"},n.a.createElement(J["a"],{id:"dataRetentionOverrideConfirm",isRequired:true,onChange:this.handleRetentionCheckboxChange})))}},{key:"renderOptionsListHeader",value:function e(t,a){var r=void 0;r=a||Qa.rt("Additional options for <span>{name}</span>",{name:Object(x["getDisplayName"])(t)},function(e){var a=e.key;return re(a,t)});return n.a.createElement("span",{className:"channel_options_header"},r)}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.additionalParams,i=a.currentMember,s=a.channel,o=a.currentTeam,l=a.disableConvertToPrivate,c=a.disableRename,u=a.externalTeams,p=a.onCancel,h=a.showArchive,v=a.showConvertToPrivate,m=a.showDataRetention,f=a.showDelete,b=a.showExport,g=a.showManageOrgAccess,_=a.showPostingPermissions,y=a.showPurpose,O=a.showRename,k=a.showShareExternal,C=a.showStopShareExternal,j=a.featureSharedChannelsEnterpriseClient,w=a.featureAnnounceOnly,S=a.orgName,I=a.isEnterprise,T=a.featureEscDisconnectV2Client,N=a.channelIsHostedByAnotherTeam,P=a.internalTeamIds,R=a.featureChangePurposeToDescription;var M=this.state,D=M.canThread,F=M.channelNameAdditionalVerificationError,L=M.channelNameNeedsChecking,B=M.channelNameOrgIsCheckingVerification,U=M.channelNameValid,q=M.channelPrefError,W=M.goButtonIsDisabled,H=M.goButtonIsPending,V=M.manageOrgAccessDisabledTeamIds,K=M.manageOrgAccessLoaded,Q=M.manageOrgAccessOriginatingTeamId,J=M.manageOrgAccessShareWith,Z=M.manageOrgAccessTeamIds,X=M.newChannelName,$=M.newChannelPurpose,ee=M.postingPermissionsLoaded,te=M.postingPermissionsSelectedMembers,ae=M.retentionDuration,ne=M.retentionDurationUnit,ie=M.retentionLoaded,se=M.retentionType,oe=M.showBackButton,ce=M.showCancelButton,ue=M.showGoButton,de=M.showSuccessAlert,pe=M.successAlertHeading,he=M.successAlertText,ve=M.teamRetentionDuration,me=M.teamRetentionType,fe=M.whoCanPost;var be={buttonAlignment:"right",goButtonIsDisabled:W,goButtonIsPending:H,showBackButton:oe,showCancelButton:ce,showGoButton:ue,withHeader:true};this.steps=[d()({contentLabel:"Additional Options for "+Object(x["getDisplayName"])(s),title:this.renderOptionsListHeader(s),children:n.a.createElement(ra,{channel:s,disableConvertToPrivate:l,disableRename:c,modalClasses:"p-channel_options_section",name:Object(x["getDisplayName"])(s),onClickArchive:this.onClickArchiveOption,onClickConvertToPrivate:this.onClickConvertToPrivateOption,onClickDelete:this.onClickDeleteOption,onClickExport:this.onClickExportOption,onClickManageOrgAccess:this.onClickManageOrgAccessOption,onClickPostingPermissions:this.onClickPostingPermissionsOption,onClickPurpose:this.onClickPurposeOption,onClickRename:this.onClickRenameOption,onClickShareExternal:this.onClickShareExternalOption,onClickCancelExternalSharedChannelInvite:this.onClickCancelExternalSharedChannelInvite,onClickStopShareExternal:this.onClickStopShareExternalOption,showArchive:h,showConvertToPrivate:v,showDataRetention:m,showDelete:f,showExport:b,showManageOrgAccess:g,showPostingPermissions:_,showPurpose:y,showRename:O,showShareExternal:k,showStopShareExternal:C,showSuccessAlert:de,successAlertHeading:pe,successAlertText:he}),qa:"all_options"},be)];h?this.steps.push(d()({children:n.a.createElement(le,{channel:s}),onBack:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);t.props.archiveChannelApi({channel:s});t.closeModal()},goButtonText:Qa.t("Yes, archive the channel"),title:this.renderOptionsListHeader(s,Qa.rt("Archive <strong>{name}</strong>",{name:Object(x["getDisplayName"])(s),fallbackHash:"0cf2d51d33550e37e96cafe433465fa5e0816923"},function(e){var t=e.key;return re(t,s)})),contentLabel:"Archive "+Object(x["getDisplayName"])(s),qa:"archive"},be)):this.steps.push(tr);k?this.steps.push(d()({children:n.a.createElement("div",null,"Share external option"),onBack:this.goBackToAllOptions,title:"",qa:Xa[2]},be)):this.steps.push(tr);if(C){var ge=T&&N?Qa.rt("Disconnect from {channelName}",{channelName:n.a.createElement(Ua,{channel:s})}):Qa.rt("Stop sharing {channelName}",{channelName:n.a.createElement(Ua,{channel:s})});var _e=T&&N?Qa.t("Disconnect"):Qa.t("Stop Sharing");this.steps.push(d()({children:n.a.createElement(Ka,{channel:s,showLastChannelWarning:this.state.isOnlyChannelWithExternalTeam}),onBack:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);var a=Qa.t("This can\u2019t be undone");var r=j?Qa.rt("You won\u2019t be able to re-share {channelName} with {teamNames} or any other organization.",{channelName:re(s.id,s),teamNames:Object(G["a"])(u.map(function(e){var t=e.name;return t}),{react:true,strong:true,conj:"or"})}):Qa.rt("You won\u2019t be able to re-share {channelName} with {teamNames} or any other workspace.",{channelName:re(s.id,s),teamNames:Object(G["a"])(u.map(function(e){var t=e.name;return t}),{react:true,strong:true,conj:"or"})});var n=t.props.clogger;n.track("SHARED_CHANNELS_STOP_SHARING_ACTION",{is_last_channel_with_team:t.state.isOnlyChannelWithExternalTeam,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_STOP_SHARING_MODAL_SUBMIT_BTN",ui_component:"CHANNEL_OPTIONS_DIALOG"}}});var i=function e(){n.track("SHARED_CHANNELS_STOP_SHARING_ACTION",{is_last_channel_with_team:t.state.isOnlyChannelWithExternalTeam,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_STOP_SHARING_CONFIRM_SUBMIT_BTN",ui_component:"CHANNEL_OPTIONS_DIALOG"}}});t.props.disconnectChannel({channelId:s.id}).then(t.closeModal)};var o=function e(){n.track("SHARED_CHANNELS_STOP_SHARING_ACTION",{is_last_channel_with_team:t.state.isOnlyChannelWithExternalTeam,contexts:{ui_context:{action:"click",ui_element:"SHARED_CHANNELS_STOP_SHARING_CONFIRM_CANCEL_BTN",ui_component:"CHANNEL_OPTIONS_DIALOG"}}});t.closeAlertDialog()};t.showAlertDialog({goButtonText:_e,goButtonType:"danger",message:r,onGo:i,onCancel:o,showCancelButton:true,title:a})},goButtonText:_e,goButtonType:"danger",title:this.renderOptionsListHeader(s,ge),contentLabel:"Stop sharing "+Object(x["getDisplayName"])(s),qa:"stop_sharing_external"},be))}else this.steps.push(tr);if(v){var ye=void 0;var Oe=void 0;if(Object(x["isPublicChannel"])(s)||Object(x["isPrivateChannel"])(s)){ye=Qa.rt("Change <strong>{channelName}</strong> to a private channel",{name:Object(x["getDisplayName"])(s)},function(e){var t=e.key;return re(t,s)});Oe="Change "+Object(x["getDisplayName"])(s)+" to a private channel"}else{ye=Qa.rt("Convert this conversation to a private channel?",{fallbackHash:"5e50b350a369117078fafe9841785a5576fd4fc5"});Oe="Convert this conversation to a private channel?"}this.steps.push(d()({children:n.a.createElement(et,{channel:s}),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);var a=Qa.t("This can\u2019t be undone");var r=Qa.rt("Once {channelName} is made a private channel, it cannot be changed to a public channel again.",{channelName:re(s.id,s)});var n=Qa.t("Change to Private");t.showAlertDialog({goButtonText:n,goButtonType:"danger",message:r,onGo:function e(){t.props.convertChannelToPrivateApi(s.id).then(t.closeModal)},showCancelButton:true,title:a})},goButtonType:"danger",goButtonText:Qa.t("Change to Private"),title:this.renderOptionsListHeader(s,ye),contentLabel:Oe,qa:"convert_private"},be))}else this.steps.push(tr);var ke=Qa.t("Rename Channel");if(O){var Ee={additionalVerificationError:F,additionalVerificationGood:U,channelNameNeedsChecking:L};Object(x["isOrgSharedPublicOrPrivateChannel"])(s)&&(Ee.isCheckingAdditionalVerification=B);var Ce=Object(x["getDisplayName"])(s);r.name&&(Ce=r.name);var je=Qa.rt("Rename <strong>{channelName}</strong>",{channelName:Object(x["getDisplayName"])(s)},function(e){var t=e.key;return re(t,s)});var we="Rename "+Object(x["getDisplayName"])(s);this.steps.push(d()({children:n.a.createElement(xa,d()({},Ee,{channel:s,name:Ce,onInvalidName:this.channelNameOnInvalidName,onValidName:this.channelNameOnValidName})),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,goButtonText:ke,onGo:function e(){t.goButtonIsPending(true);t.props.renameChannelApi({channel:s,newName:X}).then(function(e){t.goButtonIsPending(false);if(!e.ok){if(e.error&&"name_taken"===e.error){t.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:Za.t("{name} is already taken by a channel, username, or user group.",{name:X})}});return}t.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:Za.t("For some weird reason, that didn\u2019t work. Please try again to continue.")}});return}t.setState(function(){return{channelNameValid:true,channelNameAdditionalVerificationError:""}});t.closeModal()}).catch(function(e){if(e.data&&"name_taken"===e.data.error){t.setState(function(){return{channelNameValid:false,channelNameAdditionalVerificationError:Za.t("{name} is already taken by a channel, username, or user group.",{name:X})}});return}t.goButtonIsPending(false);t.setState(function(){return{channelNameAdditionalVerificationError:Za.t("For some weird reason, that didn\u2019t work. Please try again to continue.")}})})},title:this.renderOptionsListHeader(s,je),contentLabel:we,qa:"rename"},be))}else this.steps.push(tr);if(b){var Se=void 0;var Ie=void 0;if(Object(x["isPublicChannel"])(s)||Object(x["isPrivateChannel"])(s)){Se=Qa.rt("Export message history for <strong>{name}</strong>",{name:Object(x["getDisplayName"])(s),fallbackHash:"7e98401bb334b4d48829e4fdbcd144dc8a101003"},function(e){var t=e.key;return re(t,s)});Ie="Export message history for "+Object(x["getDisplayName"])(s)}else{Se=Qa.rt("Export message history for this conversation",{fallbackHash:"c1d139527fa0d1b5faa28809a3b74d183f848622"});Ie="Export message history for this conversation"}this.steps.push(d()({children:n.a.createElement(Tt,null),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);t.props.exportChannelHistory(s);t.closeModal()},goButtonText:Qa.t("Export"),title:this.renderOptionsListHeader(s,Se),contentLabel:Ie,qa:"export"},be))}else this.steps.push(tr);f?this.steps.push(d()({children:n.a.createElement(wt,{channel:s,showArchiveInstead:this.props.showArchive,onClickArchiveInstead:this.onClickArchiveInsteadDelete,onChangeCheckbox:this.onChangeCheckboxDelete}),onBack:this.goBackToAllOptions,onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);t.props.setChannelDeleted(s.id);t.closeModal()},goButtonText:Qa.t("Delete Channel"),goButtonType:"danger",title:this.renderOptionsListHeader(s,Qa.rt("Delete <strong>{name}</strong>",{name:Object(x["getDisplayName"])(s),fallbackHash:"73bcca2ef24ed39c3f2a63fea6c8e9e15150d0d7"},function(e){var t=e.key;return re(t,s)})),contentLabel:"Delete "+Object(x["getDisplayName"])(s),qa:"delete"},be,{buttonAlignment:"float_right"})):this.steps.push(tr);if(y){var Ae=R?Qa.rt("Set channel description for <strong>{channelName}</strong>",{channelName:Object(x["getDisplayName"])(s)},function(e){var t=e.key;return re(t,s)}):Qa.rt("Set channel purpose for <strong>{channelName}</strong>",{channelName:Object(x["getDisplayName"])(s)},function(e){var t=e.key;return re(t,s)});var Ne=R?Qa.t("Set channel description for {channelName}",{channelName:Object(x["getDisplayName"])(s)}):"Set channel purpose for "+Object(x["getDisplayName"])(s);this.steps.push(d()({children:n.a.createElement(Ye,{channel:s,purpose:s.purpose,onChannelPurposeTextareaChange:this.onChannelPurposeTextareaChange,onChannelPurposeValidationChange:this.onChannelPurposeValidationChange}),goButtonText:R?Qa.t("Update Description"):Qa.t("Update Purpose"),onBack:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);s.purpose.value!==$&&t.props.submitChannelPurpose({channelId:s.id,purpose:$}).then(function(e){if(t.props.featureDegradedSend){var a=Object(E["get"])(e,"channel.id");var r=Object(E["get"])(e,"channel.purpose");if(!a||!r)return;t.props.setChannelPurpose({id:a,purpose:r})}});t.closeModal()},title:this.renderOptionsListHeader(s,Ae),contentLabel:Ne,qa:"purpose"},be))}else this.steps.push(tr);if(m){var Pe=void 0;var Re=void 0;if(Object(x["isPublicChannel"])(s)||Object(x["isPrivateChannel"])(s)){Pe=Qa.rt("Edit message retention for {name}",{name:n.a.createElement(Y["b"],{channel:s,inline:true})});Re="Edit message retention for "+Object(x["getDisplayName"])(s)}else{Pe=Qa.rt("Edit message retention for <strong>this conversation</strong>");Re="Edit message retention for this conversation"}this.steps.push(d()({children:n.a.createElement(yt,{member:i,team:o,onDurationChange:this.onRetentionDurationChange,onDurationUnitChange:this.onRetentionDurationUnitChange,onTypeChange:this.onRetentionTypeChange,prefsLoaded:ie,retentionDuration:ae,retentionDurationUnit:ne,retentionType:se,teamRetentionType:me,teamRetentionDuration:ve,durationInputRef:this.durationInputRef}),goButtonText:Qa.t("Save"),onGo:this.showRetentionDialog,onBack:function e(){t.setRetentionLoaded(false);t.goBackToAllOptions()},onCancel:this.goBackToAllOptions,title:this.renderOptionsListHeader(s,Pe),contentLabel:Re,qa:"retention",stepModalClasses:"p-channel-options__retention_modal"},be))}else this.steps.push(tr);_?this.steps.push(d()({children:n.a.createElement(Ea,{onChangeCheckbox:this.onChangeCheckboxCanThread,onChangeRadio:this.onChangeRadioWhoCanPost,isOrgDefault:Object(x["isOrgDefaultChannel"])(s),canThread:D,whoCanPost:fe,isEnterpriseTeam:I,postingPermissionsSelectedMembers:te,onChangeValueSelectedMembers:this.onChangeValueSelectedMembers,postingPermissionsLoaded:ee,currentMember:i}),onBack:function e(){t.setPostingPermissionsSelectedMembers(null);t.setPostingPermissionsLoaded(false);t.goBackToAllOptions()},onGo:w?this.setPostingPermissions:null,goButtonText:w?Qa.t("Save"):Qa.t("Review"),contentLabel:"Manage posting permissions for "+Object(x["getDisplayName"])(s),title:this.renderOptionsListHeader(s,Qa.rt("Manage posting permissions for <strong>{name}</strong>",{name:Object(x["getDisplayName"])(s),fallbackHash:"6e82adeae0a793fe96592833d990efcaf1cc8ab3"},function(e){var t=e.key;return re(t,s)})),qa:"posting_privilege"},be),d()({children:n.a.createElement(Na,{whoCanPost:fe,canThread:D,isEnterpriseTeam:I,channelPrefError:q,onErrorDialogButtonClick:this.onErrorDialogButtonClick}),onGo:this.setPostingPermissions,goButtonText:Qa.t("Set posting permissions"),title:this.renderOptionsListHeader(s,Qa.t("Review Changes")),contentLabel:"Review Changes",qa:"posting_privilege_review"},be)):this.steps.push(tr,tr);if(g){var Me=Object(x["isOrgSharedPublicOrPrivateChannel"])(s);var De=function e(){if(Me||"specific"!==J){if(Object(x["isOrgGlobalSharedPublicOrPrivateChannel"])(s)){if("all"===J)return false}else if("specific"===J&&P&&Object(E["isEqual"])(Z.sort(),P.sort()))return false}else{if(!Z.length)return false;if(1===Z.length&&Z.indexOf(o.id)>-1)return false}return true};var xe=j?Qa.rt("Add to other <span>{org_name}</span> workspaces",{org_name:S}):Qa.rt("Sharing settings for <strong>{name}</strong>",{name:Object(x["getDisplayName"])(s),fallbackHash:"14c24585b3cd497e35dfec78cc5d5aa63f7d4690"},function(e){var t=e.key;return re(t,s)});var Fe=Qa.t("Done");De()&&(Fe=Qa.t("Review Changes"));this.steps.push(d()({children:n.a.createElement(Bt,{channel:s,disabledTeamIds:V,originatingTeamId:Q,filterFunction:this.manageOrgAccessFilterFunction,isLoaded:K,onShareWithChange:this.onChangeManageOrgAccessShareWith,onTeamPickerChange:this.onChangeManageOrgAccessTeamPicker,preselectedTeamIds:Z,shareWith:J}),goButtonText:Fe,onBack:function e(){t.setManageOrgAccessLoaded(false);t.goBackToAllOptions()},onCancel:this.goBackToAllOptions,onGo:function e(){t.goButtonIsPending(true);if(!De()){t.closeModal();return}if(Me){t.goToStep("manage_org_access_review");t.goButtonIsPending(false);return}t.props.callEnterpriseNameTaken({channel:s,newChannelName:Object(x["getDisplayName"])(s)}).then(function(e){t.goButtonIsPending(false);t.setState(function(){return{manageOrgAccessPreviousStep:"manage_org_access"}});if(!e.ok||e.name_taken){t.setState(function(){return{channelNameValid:false}});t.goButtonIsDisabled(true);t.modalRef.goToNextStep();return}t.goToStep("manage_org_access_review")}).catch(function(e){t.goButtonIsPending(false);t.setState(function(){return{channelNameValid:false}});var a=Ja.t("Oops, something went wrong.");var r=Qa.t("For some weird reason, that didn\u2019t work. Please try again.");t.showAlertDialog({message:r,title:a});throw e})},title:this.renderOptionsListHeader(s,xe),contentLabel:"Manage access to "+Object(x["getDisplayName"])(s),qa:"manage_org_access"},be),d()({children:n.a.createElement(Te,{additionalVerificationError:F,additionalVerificationGood:U,channel:s,isCheckingAdditionalVerification:B,onInvalidName:this.channelNameOnInvalidName,onValidName:this.channelNameOnValidName}),onBack:function e(){t.setState(function(){return{manageOrgAccessPreviousStep:"manage_org_access"}});t.goBackToManageAccessPrevStep()},onCancel:this.goBackToAllOptions,goButtonText:ke,onGo:function e(){t.setState(function(){return{manageOrgAccessPreviousStep:"manage_org_access_name_conflict",channelToBeShared:false}});t.modalRef.goToNextStep()},title:this.renderOptionsListHeader(s,Qa.t("Rename this channel")),contentLabel:"Rename this channel",qa:"manage_org_access_name_conflict"},be),d()({children:n.a.createElement(Kt,{channel:s,currentTeam:o,newChannelName:X,shareWith:J,teamIdsSelected:Z}),goButtonText:Qa.t("Save Changes"),onBack:this.goBackToManageAccessPrevStep,onCancel:this.goBackToAllOptions,onGo:this.manageOrgAccessSave,title:this.renderOptionsListHeader(s,Qa.t("Review Changes")),contentLabel:"Review Changes",qa:"manage_org_access_review"},be))}else this.steps.push(tr,tr,tr);this.steps.length!==Object(E["keys"])(Xa).length&&Object(A["a"])({teamId:this.props.teamId}).error("ChannelOptions render error: It looks like the number of modal steps doesn\u2019t match the number of steps defined in the modal mapping. Please check that you have the correct number of filler steps added if your screen is not rendered.");return n.a.createElement(z["a"],{modalClasses:"channel_options_modal",onCancel:p,position:"fixed",ref:function e(a){t.modalRef=a},showCloseTransition:true,showOpenTransition:true,steps:this.steps})}}]);return t}(r["PureComponent"]);cr.displayName="ChannelOptions";cr.defaultProps=er;function ur(e,t){var a=t.channelId;var r=Object(P["d"])(e,a);if(!r)return{featureDefaultSharedChannels:Object(j["isFeatureEnabled"])(e,"feature_default_shared_channels"),featureChangePurposeToDescription:Object(j["isFeatureEnabled"])(e,"feature_change_purpose_to_description")};var n=[];if(Object(x["isExternallySharedChannel"])(r)||Object(x["isPendingExternallySharedChannel"])(r)){var i=Object(x["getPendingAndConnectedTeamIds"])(e,r);n=i.map(function(t){return Object(M["i"])(e,t)})}var s=Object(M["d"])(e);var o=Object(B["isEnterpriseTeam"])(s);return{channel:r,currentMember:Object(R["b"])(e),currentTeam:s,isEnterprise:o,dmRetentionDuration:Object(T["a"])(e,"dm_retention_duration"),dmRetentionType:Object(T["a"])(e,"dm_retention_type"),externalTeams:n,groupRetentionDuration:Object(T["a"])(e,"group_retention_duration"),groupRetentionType:Object(T["a"])(e,"group_retention_type"),orgName:Object(I["a"])(e),channelRetentionDuration:Object(T["a"])(e,"retention_duration"),channelRetentionType:Object(T["a"])(e,"retention_type"),teamId:Object(S["c"])(e),featureDefaultSharedChannels:Object(j["isFeatureEnabled"])(e,"feature_default_shared_channels"),featureChangePurposeToDescription:Object(j["isFeatureEnabled"])(e,"feature_change_purpose_to_description"),featureDegradedSend:Object(j["isFeatureEnabled"])(e,"feature_degraded_send"),featureAnnounceOnly:Object(j["isFeatureEnabled"])(e,"feature_announce_only"),clogger:Object(W["a"])({state:e}),featureSharedChannelsEnterpriseClient:Object(j["isFeatureEnabled"])(e,"feature_shared_channels_enterprise_client"),featureEscDisconnectV2Client:Object(j["isFeatureEnabled"])(e,"feature_esc_disconnect_v2_client"),channelIsHostedByAnotherTeam:Object(x["isHostedByAnotherTeam"])(e,r),internalTeamIds:Object(x["getInternalTeamIds"])(e,r)}}var dr={archiveChannelApi:N["c"],cancelExternalSharedChannelInviteApi:F["z"],callEnterpriseNameTaken:L["b"],submitChannelPurpose:F["B"],convertToOrgShared:L["f"],convertChannelToPrivateApi:N["h"],openModal:w["openModal"],renameChannelApi:N["u"],updateOrgAccessForChannelApi:N["D"],exportChannelHistory:N["l"],setChannelDeleted:F["t"],getChannelOrgOriginatingTeam:L["n"],getChannelPref:F["m"],setChannelPrefs:F["u"],setChannelPurpose:N["v"],getExternalTeamIdsConnectedOnlyByChannel:F["p"],disconnectChannel:F["c"],getDataRetention:F["n"],setDataRetention:F["x"],getExternalSharedChannelInviteDetails:F["o"]};var pr=Object(o["connect"])(ur,dr)(cr);var hr=[{stepName:"archive",prop:"showArchive",stepIndex:1},{stepName:"share_external",prop:"showShareExternal",stepIndex:2},{stepName:"stop_sharing_external",prop:"showStopShareExternal",stepIndex:3},{stepName:"convert_private",prop:"showConvertToPrivate",stepIndex:4},{stepName:"rename",prop:"showRename",stepIndex:5},{stepName:"export",prop:"showExport",stepIndex:6},{stepName:"delete",prop:"showDelete",stepIndex:7},{stepName:"purpose",prop:"showPurpose",stepIndex:8},{stepName:"retention",prop:"showDataRetention",stepIndex:9},{stepName:"posting_privilege",prop:"showPostingPermissions",stepIndex:10},{stepName:"manage_org_access",prop:"showManageOrgAccess",stepIndex:12}];var vr=pr;var mr=a(163);var fr=function e(t,a,r){if(!t)throw new Error("mountChannelOptions must be called with a teamId parameter");var i=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:i},n.a.createElement(mr["a"],null,n.a.createElement(vr,r))),a)};var br=function e(t){s.a.unmountComponentAtNode(t)};var gr={mountChannelOptions:fr,unmountChannelOptions:br};var _r=a(44);Object(_r["a"])("interop.mountChannelOptions",fr);Object(_r["a"])("interop.unmountChannelOptions",br)},,,function(e,t,a){"use strict";a.d(t,"a",function(){return b});a.d(t,"b",function(){return g});var r=a(37);var n=a.n(r);var i=a(0);var s=a(1);var o=a.n(s);var l=a(95);var c=a(16);var u=a.n(c);var d=a(357);var p=a(1761);var h={date:i["b"].number.isRequired,isUnread:i["b"].bool,ghost:i["b"].bool};var v={isUnread:false,ghost:false};function m(e){var t=e.isUnread,a=n()(e,["isUnread"]);var r=t?o.a.createElement(p["a"],{ghost:a.ghost}):o.a.createElement("hr",{className:"c-message_list__day_divider__line"});return o.a.createElement("div",{className:"c-message_list__day_divider"},r)}m.displayName="DayDivider";m.defaultProps=v;function f(e){var t=e.date,a=e.sticky;var r=t/1e3;var n=Object(d["a"])(r,"{day_divider_pretty}");var i=u()("c-message_list__day_divider__label",{"c-message_list__day_divider__label--non_sticky":!a});return o.a.createElement("div",{className:i},o.a.createElement("div",{className:"c-message_list__day_divider__label__pill"},n))}f.displayName="DayDividerLabel";f.defaultProps={sticky:true};var b=Object(l["pure"])(m);var g=Object(l["pure"])(f)},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(27);var c=a(44);var u=a(3);var d=a.n(u);var p=a(6);var h=a.n(p);var v=a(7);var m=a.n(v);var f=a(8);var b=a.n(f);var g=a(9);var _=a.n(g);var y=a(0);var O=a(2);var k=a(10);var E=a(707);var C=a(26);var j=a.n(C);var w=a(5);var S=a.n(w);var I=a(1321);var T=a(927);var A=a(22);var N=a(96);var P=a(157);var R=a(701);var M=a(258);var D=a(37);var x=a.n(D);var F=a(126);var L=a(3082);var B={id:y["b"].string.isRequired,headers:y["b"].array,rows:y["b"].arrayOf(y["b"].shape({id:y["b"].string.isRequired,items:y["b"].array,selectable:y["b"].bool})),selectedRows:y["b"].array,onSelect:y["b"].func,getCheckboxId:y["b"].func};var U={headers:[],rows:[],selectedRows:[],onSelect:O["noop"],getCheckboxId:null};var q=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.getCheckboxId=a.getCheckboxId.bind(a);return a}m()(t,[{key:"getValidSelectedRows",value:function e(t){return Object(O["map"])(this.props.rows,"id").filter(function(e){return t.includes(e)})}},{key:"getCheckboxId",value:function e(t){var a=void 0;a=this.props.getCheckboxId?this.props.getCheckboxId(t.id):this.props.id+"-"+t.id+"-checkbox";return a}},{key:"getHeaders",value:function e(t){var a=this.props,r=a.id,i=a.headers,s=a.rows,o=a.onSelect;var l=s.filter(function(e){return false!==e.selectable});var c=l.length>0;var u=c&&t.length===l.length;return[{id:r+"-select-all-checkbox",value:n.a.createElement(F["a"],{checked:u,disabled:!c,indeterminate:t.length>0&&t.length<l.length,onChange:function e(){return o(u?[]:Object(O["map"])(l,"id"))},"aria-controls":l.map(this.getCheckboxId).join(" "),className:"p-ent_multi_select_table__checkbox"}),noHover:true,className:"p-ent_multi_select_table__checkbox_item"}].concat(j()(i))}},{key:"getRows",value:function e(t){var a=this;var r=this.props,i=r.rows,s=r.onSelect;return i.map(function(e){var r=t.includes(e.id);var i=a.getCheckboxId(e);return d()({},e,{selected:r,items:[{id:i+"-item",value:n.a.createElement(F["a"],{id:i,checked:r,disabled:false===e.selectable,value:e.id,onChange:function a(){return s(r?Object(O["without"])(t,e.id):[].concat(j()(t),[e.id]),e.id)},className:"p-ent_multi_select_table__checkbox"}),className:"p-ent_multi_select_table__checkbox_item"}].concat(j()(e.items))})})}},{key:"render",value:function e(){var t=this.props,a=t.selectedRows,r=t.onSelect,i=x()(t,["selectedRows","onSelect"]);var s=this.getValidSelectedRows(a);return n.a.createElement(T["b"],d()({},i,{headers:this.getHeaders(s),rows:this.getRows(s)}))}}]);return t}(r["PureComponent"]);q.displayName="MultiSelectTable";q.defaultProps=U;var G=q;var W=G;var H=a(1852);var V=a(1213);var K=a(1785);var z=K["a"];var Y=a(536);var Q=a(4);var J=a(150);var Z=a(48);var X=a(189);var $=a(220);var ee=function e(t){var a=t.date;return n.a.createElement(r["Fragment"],null,Object(X["a"])(a),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_dark_gray"},Object($["a"])(a)))};ee.displayName="MigrationTableDate";var te=ee;var ae=te;var re=a(51);var ne=a(28);var ie=a(50);var se=new k["b"]("migration_table");var oe={statusPageURL:y["b"].string,migrationInfo:y["b"].object.isRequired,isOrgOwner:y["b"].bool,disableActions:y["b"].bool,onApprove:y["b"].func,onDecline:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var le={statusPageURL:null,isOrgOwner:false,disableActions:false,onApprove:O["noop"],onDecline:O["noop"]};var ce=function(e){_()(t,e);function t(){h()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"renderStatusLink",value:function e(){var t=this.props,a=t.statusPageURL,r=t.featureMigrationOrgApprovals;var i=void 0;i=r?n.a.createElement(re["a"],{href:a},se.t("View status")):n.a.createElement("div",{className:"p-migration_table__link"},n.a.createElement(re["a"],{href:a},n.a.createElement("span",null,se.t("View Migration Status"))),n.a.createElement(A["b"],{type:"chevron-right"}));return i}},{key:"renderPendingResponse",value:function e(){var t=this.props,a=t.isOrgOwner,i=t.disableActions,s=t.onApprove,o=t.onDecline,l=t.migrationInfo,c=t.featureMigrationOrgApprovals;if(!c)return null;var u=null;u=a?n.a.createElement("div",{className:"p-migration_table__buttons"},n.a.createElement(ne["d"],{type:"outline",size:"small",disabled:i,onClick:function e(){return o(l.id)}},se.t("Decline")),n.a.createElement(ne["d"],{type:"primary",size:"small",disabled:i,onClick:function e(){return s(l.id)},className:"margin_left_50"},se.t("Approve"))):n.a.createElement(r["Fragment"],null,se.t("Pending approval")," ",n.a.createElement(ie["c"],{tip:se.t("Migrations can only be approved by an Organization Owner"),position:"top"},n.a.createElement(A["b"],{type:"question-circle",inline:true,className:"sk_light_gray"})));return u}},{key:"renderInviteResponse",value:function e(){var t=this.props,a=t.migrationInfo,r=t.featureMigrationOrgApprovals;var i=null;r&&(a.date_declined?i=n.a.createElement("span",{className:"sk_warning_red"},se.t("Declined")):a.date_approved&&a.approver&&(i=se.rt("Approved <div>by {name}</div>",{name:a.approver.real_name},function(e){var t=e.key,a=e.text;return n.a.createElement("div",{key:t,className:"sk_dark_grey"},a)})));return i}},{key:"renderScheduled",value:function e(){var t=(new Date).getTime()/1e3;var a=t+28800;var i=this.props,s=i.migrationInfo,o=i.featureMigrationOrgApprovals;var l=null;l=s.date_approved||s.date_declined?s.date_scheduled>t&&s.date_scheduled<=a?o?n.a.createElement(r["Fragment"],null,se.t("Starting soon"),n.a.createElement("br",null),this.renderStatusLink()):this.renderStatusLink():this.renderInviteResponse():s.date_scheduled<=t&&o?n.a.createElement(r["Fragment"],null,n.a.createElement("span",{className:"sk_warning_red"},se.t("Canceled")),n.a.createElement("br",null),n.a.createElement("span",{className:"sk_dark_grey"},se.t("Contact Slack to reschedule"))):this.renderPendingResponse();return l}},{key:"renderInProgress",value:function e(){var t=void 0;t=this.props.featureMigrationOrgApprovals?n.a.createElement("div",{className:"p-migration_table__in_progress"},n.a.createElement(N["a"],{color:"blue",size:"large"}),n.a.createElement("div",null,se.rt("In progress"),n.a.createElement("br",null),this.renderStatusLink())):this.renderStatusLink();return t}},{key:"render",value:function e(){var t=this.props.migrationInfo;var a=null;switch(t.status){case"scheduled":a=this.renderScheduled();break;case"in_progress":a=this.renderInProgress();break;case"complete":case"invite_rejected":a=this.renderInviteResponse();break;default:break}return a}}]);return t}(r["PureComponent"]);ce.displayName="MigrationStatusRowItem";ce.defaultProps=le;var ue=ce;var de=ue;var pe=a(66);var he=new k["b"]("migration_table");var ve={statusPageURL:y["b"].string,migrationInfo:y["b"].object.isRequired,isOrgOwner:y["b"].bool,disableActions:y["b"].bool,onDecline:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var me={statusPageURL:null,isOrgOwner:false,disableActions:false,onDecline:O["noop"]};var fe=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderMenu=a.renderMenu.bind(a);return a}m()(t,[{key:"renderMenu",value:function e(t){var a=this;var r=this.props,i=r.migrationInfo,s=r.statusPageURL,o=r.isOrgOwner,l=r.onDecline,c=r.disableActions;return n.a.createElement(pe["f"],d()({},t,{width:"auto",ref:function e(t){a.menuRef=t}}),n.a.createElement(pe["b"],{label:he.t("View status"),href:s,disabled:c}),o?n.a.createElement(pe["b"],{danger:true,label:he.t("Decline"),onSelected:function e(){return l(i.id)},disabled:c}):null)}},{key:"renderMenuTrigger",value:function e(){var t=this.props.disableActions;return n.a.createElement(pe["e"],{renderMenu:this.renderMenu,position:"bottom-right"},n.a.createElement(ne["c"],{disabled:t},n.a.createElement(A["b"],{type:"ellipsis"})))}},{key:"render",value:function e(){var t=this.props,a=t.migrationInfo,r=t.featureMigrationOrgApprovals;if(!r)return null;var n=null;"scheduled"!==a.status||!a.date_approved||(n=this.renderMenuTrigger());return n}}]);return t}(r["PureComponent"]);fe.displayName="MigrationTableRowMenu";fe.defaultProps=me;var be=fe;var ge=be;var _e=a(84);var ye=a(444);var Oe=a(3084);var ke=new k["b"]("migration_table");var Ee="approve";var Ce="decline";var je={action:y["b"].oneOf([Ee,Ce]).isRequired,migrations:y["b"].array.isRequired,onSubmit:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var we={onSubmit:O["noop"]};var Se=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isPending:false};a.handleSubmit=a.handleSubmit.bind(a);return a}m()(t,[{key:"getTextTitle",value:function e(){var t=this.props,a=t.migrations,r=t.action,n=t.featureMigrationOrgApprovals;if(!n)return null;var i=null;i=r===Ee?ke.t("{count, plural, =1 {Approve migration?} other {Approve # migrations?}}",{count:a.length}):ke.t("{count, plural, =1 {Decline migration?} other {Decline # migrations?}}",{count:a.length});return i}},{key:"getBulkConfirmTableRows",value:function e(t){var a=this.props.migrations;var r={workspace:function e(t){return n.a.createElement(z,{team:t.team})},date:function e(t){return n.a.createElement(ae,{date:t.migration_info.date_scheduled})}};return a.map(function(e){return{id:"mig-"+e.migration_info.id,items:t.map(function(t){var a=t.id,n=t.className;return{id:a,className:n,value:r[a]&&r[a](e)}})}})}},{key:"handleSubmit",value:function e(){var t=this;this.setState(function(){return{isPending:true}});return this.props.onSubmit().finally(function(){return t.setState(function(){return{isPending:false}})})}},{key:"renderTitle",value:function e(){var t=this.props,a=t.migrations,r=t.featureMigrationOrgApprovals;if(!r)return null;var i=this.getTextTitle();1===a.length&&(i=n.a.createElement("div",{className:"display_flex align_items_center"},n.a.createElement(ye["a"],{entityType:"workspace",dimension:24,entityData:a[0].team,customClasses:"margin_right_75"}),i));return i}},{key:"renderBulkConfirmList",value:function e(){if(!this.props.featureMigrationOrgApprovals)return null;var t=[{id:"workspace",value:ke.t("Workspace"),className:"p-migration_response_confirm_dialog__workspace_item",noHover:true},{id:"date",value:ke.t("Scheduled for"),className:"p-migration_response_confirm_dialog__date_item",noHover:true}];return n.a.createElement("div",{className:"p-migration_response_confirm_dialog__table"},n.a.createElement(T["b"],{headers:t,rows:this.getBulkConfirmTableRows(t),disableHover:true,height:"35vh"}))}},{key:"renderContent",value:function e(){var t=this.props,a=t.migrations,i=t.action,s=t.featureMigrationOrgApprovals;if(!s)return null;var o=null;if(a.length>1)o=n.a.createElement(r["Fragment"],null,i===Ee?ke.t("Would you like to approve these migrations?"):ke.t("If you decline these migrations, you'll need to contact Slack to reschedule them."),this.renderBulkConfirmList());else{var l=a[0];o=i===Ee?ke.rt("Approve the migration of the workspace <strong>{name}</strong> for <strong>{date} at {time}</strong>?",{name:l.team.name,date:Object(X["a"])(l.migration_info.date_scheduled),time:Object($["a"])(l.migration_info.date_scheduled)}):ke.rt("If you decline this migration of <strong>{name}</strong>, you\u2019ll need to contact Slack to reschedule it.",{name:l.team.name})}return o}},{key:"render",value:function e(){var t=this.props,a=t.action,r=t.featureMigrationOrgApprovals;if(!r)return null;return n.a.createElement(_e["a"],{cancelText:ke.t("Cancel"),goButtonText:a===Ee?ke.t("Approve"):ke.t("Decline"),goButtonType:a===Ee?"primary":"danger",goButtonIsPending:this.state.isPending,goButtonIsDisabled:this.state.isPending,onGo:this.handleSubmit,title:this.renderTitle(),titleAria:this.getTextTitle(),useSlackScrollbar:false},this.renderContent())}}]);return t}(r["PureComponent"]);Se.displayName="MigrationResponseConfirmDialog";Se.defaultProps=we;var Ie=Se;var Te=Ie;var Ae=new k["b"]("migration_table");var Ne={enterpriseName:y["b"].string.isRequired,orgURL:y["b"].string,scheduled:y["b"].bool,isOrgOwner:y["b"].bool,fetchCompletedMigrations:y["b"].func.isRequired,fetchScheduledMigrations:y["b"].func.isRequired,approveMigrations:y["b"].func.isRequired,declineMigrations:y["b"].func.isRequired,enqueueToast:y["b"].func,openModal:y["b"].func,featureMigrationOrgApprovals:y["b"].bool.isRequired};var Pe={enqueueToast:O["noop"],openModal:O["noop"],scheduled:false,isOrgOwner:false,orgURL:null};var Re="approve";var Me="decline";function De(e){return"mig-"+e}function xe(e){return"migration-table-"+e+"-checkbox"}function Fe(e){var t=(new Date).getTime()/1e3;var a=e.migration_info;return"scheduled"===a.status&&a.date_scheduled>t}function Le(e){var t=(new Date).getTime()/1e3;var a=e.migration_info;var r="invite_rejected"===a.status;var n="scheduled"===a.status&&a.date_scheduled<=t&&!a.date_approved&&!a.date_declined;return r||n}var Be=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={selectedRows:[],completedMigrations:[],scheduledMigrations:[],pendingUpdates:[],recentlyUpdated:[],isCompletedLoading:true,isScheduledLoading:true,errorAlert:false,tableHeight:null,tablePaddingBottom:0,showingSelection:false};a.refreshTableHeight=a.refreshTableHeight.bind(a);a.refreshTableHeightPolitely=a.refreshTableHeightPolitely.bind(a);return a}m()(t,[{key:"componentWillMount",value:function e(){var t=this.props.scheduled;if(t)return this.fetchScheduledMigrations();return this.fetchCompletedMigrations()}},{key:"componentDidMount",value:function e(){this.refreshTableHeightPolitely();window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentDidUpdate",value:function e(t,a){var r=this.state.selectedRows;var n=this.props.scheduled;var i=r.length>0;var s=a&&a.selectedRows&&a.selectedRows.length>0;i!==s&&this.refreshTableHeightPolitely();if(n!==t.scheduled){if(n)return this.fetchScheduledMigrations();return this.fetchCompletedMigrations()}return O["noop"]}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"getStatusPageURL",value:function e(t){return this.props.orgURL+"/migrations/"+t+"/status"}},{key:"fetchScheduledMigrations",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var r=this.props.featureMigrationOrgApprovals;a||this.setState(function(){return{isScheduledLoading:true}});return this.props.fetchScheduledMigrations().then(function(e){var a=Object(O["sortBy"])(e,[function(e){var t=void 0;t=!r||e.migration_info.date_approved||e.migration_info.date_declined?["in_progress","scheduled","invite_rejected"].indexOf(e.migration_info.status):-Infinity;return t},function(e){return e.migration_info.date_scheduled}]);t.setState(function(){return{scheduledMigrations:a,isScheduledLoading:false}})}).catch(function(){t.setState(function(){return{errorAlert:true,isScheduledLoading:false}})}).finally(this.refreshTableHeightPolitely)}},{key:"fetchCompletedMigrations",value:function e(){var t=this;this.setState(function(){return{isCompletedLoading:true}});return this.props.fetchCompletedMigrations().then(function(e){var a=Object(O["sortBy"])(e,[function(e){return-e.migration_info.date_finished}]);t.setState(function(){return{completedMigrations:a,isCompletedLoading:false}})}).catch(function(){t.setState(function(){return{errorAlert:true,isCompletedLoading:false}})}).finally(this.refreshTableHeightPolitely)}},{key:"showResponseConfirmDialog",value:function e(t,a){var r=this;this.props.openModal({element:n.a.createElement(Te,{migrations:t,action:a,onSubmit:function e(){return r.respondToInvite(t,a)},featureMigrationOrgApprovals:this.props.featureMigrationOrgApprovals})})}},{key:"refreshTableHeightPolitely",value:function e(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"refreshTableHeight",value:function e(){var t=this.state.selectedRows;var a=window.innerHeight;if(!this.tableViewRef)return;var r=this.tableViewRef.querySelectorAll(".c-table_view_all_rows_container")[0];if(!r)return;var n=r.getBoundingClientRect();var i=t.length>0?V["a"]:0;var s=a-(n&&n.top);var o=64;var l=Math.max(o,s-i);this.setState(function(){return{tableHeight:l,tablePaddingBottom:i}})}},{key:"respondToInvite",value:function e(t,a){var r,i=this;if(!this.props.featureMigrationOrgApprovals)return null;var s=(r={},S()(r,Re,this.props.approveMigrations),S()(r,Me,this.props.declineMigrations),r)[a];var o=t.map(function(e){return e.migration_info.id});this.setState(function(e){var t=e.pendingUpdates;return{pendingUpdates:Object(O["union"])(t,o)}});return s({migrationIds:o}).then(function(){return i.fetchScheduledMigrations(true)}).then(function(){var e=null;e=a===Re?Ae.t("{count, plural, =1 {Migration approved} other {# migrations approved}}",{count:o.length}):Ae.t("{count, plural, =1 {Migration declined} other {# migrations declined}}",{count:o.length});i.props.enqueueToast({element:n.a.createElement(P["b"],null,e)});i.setState(function(e){var t=e.recentlyUpdated;return{recentlyUpdated:Object(O["union"])(t,o),selectedRows:[],showingSelection:false}});setTimeout(function(){i.setState(function(e){var t=e.recentlyUpdated;return{recentlyUpdated:O["without"].apply(void 0,[t].concat(j()(o)))}})},T["b"].HIGHLIGHT_DURATION)}).catch(function(){i.props.enqueueToast({element:n.a.createElement(P["b"],null,Ae.t("Something\u2019s gone wrong. Mind trying again in a moment?"))})}).finally(function(){return i.setState(function(e){var t=e.pendingUpdates;return{pendingUpdates:O["without"].apply(void 0,[t].concat(j()(o)))}})})}},{key:"createHeaders",value:function e(){var t=this.props,a=t.featureMigrationOrgApprovals,r=t.scheduled;var n=r?Ae.t("Scheduled for"):Ae.t("Completed on");var i="";a&&(i=r?Ae.t("Status"):Ae.t("Approved by"));var s=[{id:"workspace",value:Ae.t("Workspace"),className:"p-migration_table__workspace",noHover:true},{id:"date",value:n,className:"p-migration_table__date",noHover:true},{id:"status",value:i,className:"p-migration_table__status",noHover:true}];a&&r&&s.push({id:"contextMenu",value:"",className:"p-migration_table__context_menu",noHover:true});return s}},{key:"makeTableRows",value:function e(t,a){var r=this;var i=this.props,s=i.isOrgOwner,o=i.featureMigrationOrgApprovals;var l=this.state,c=l.pendingUpdates,u=l.recentlyUpdated,d=l.selectedRows,p=l.showingSelection;var h={workspace:function e(t){return n.a.createElement(z,{team:t.team,inactive:Le(t)})},date:function e(t){return r.renderDateRow(t.migration_info)},status:function e(t){return r.renderStatusRow(t)},contextMenu:function e(t){return n.a.createElement(ge,{statusPageURL:r.getStatusPageURL(t.migration_info.id),isOrgOwner:s,migrationInfo:t.migration_info,featureMigrationOrgApprovals:o,disableActions:c.includes(t.migration_info.id),onDecline:function e(){return r.showResponseConfirmDialog([t],Me)}})}};var v=t;p&&(v=v.filter(function(e){return d.includes(De(e.migration_info.id))}));return v.map(function(e){return{id:De(e.migration_info.id),highlight:u.includes(e.migration_info.id),selectable:Fe(e),inactive:Le(e),items:a.map(function(t){var a=t.id,r=t.className;return{id:a,className:r,value:h[a]&&h[a](e)}})}})}},{key:"displayErrorAlert",value:function e(){return n.a.createElement("div",{className:"p-migration_table__empty_state","data-qa":"migration-table-error-alert"},n.a.createElement("span",{className:"p-migration_table__empty_state_icon"},n.a.createElement(A["b"],{type:"warning-filled"})),n.a.createElement("div",{className:"p-migration_table__empty_state_title"},Ae.rt("Unable to load past migrations")),n.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},Ae.rt("Something went wrong that prevented past migrations from loading. If you continue to have trouble loading this page, please <a>contact us</a>.",null,function(e){var t=e.key,a=e.text;return n.a.createElement("a",{key:t,href:"https://slack.com/help/contact"},a)})))}},{key:"renderMigrationCount",value:function e(t){var a=Ae.t("{count, plural, =1 {# scheduled migration} other {# scheduled migrations}}",{count:t});return a}},{key:"renderSelectionBar",value:function e(t){var a=this;var r=this.props.featureMigrationOrgApprovals;if(!r)return null;var i=this.state,s=i.selectedRows,o=i.pendingUpdates,l=i.showingSelection;var c=t.filter(Fe);var u=t.filter(function(e){return s.includes(De(e.migration_info.id))&&!e.migration_info.date_approved});return n.a.createElement(H["b"],{position:"absolute",items:c,itemMapper:function e(t){return{selectionElementId:xe(De(t.migration_info.id)),previewText:t.team.name,isSelected:s.includes(De(t.migration_info.id))}},actions:[{id:Me,label:Ae.t("Decline"),disabled:o.length>0},{id:Re,label:Ae.t("Approve"),isPrimary:true,disabled:o.length>0||0===u.length,appliesToCount:u.length!==s.length?u.length:void 0}],titleFormatter:function e(t){return Ae.t("{count, plural, =1 {# migration selected} other {# migrations selected}}",{count:t})},showingSelection:l,onToggleSelect:function e(t){return a.setState(function(e){var a=e.showingSelection;return{selectedRows:t?c.map(function(e){return De(e.migration_info.id)}):[],showingSelection:!!t&&a}})},onAction:function e(t){a.showResponseConfirmDialog(u,t)},onToggleShowingSelection:function e(t){return a.setState(function(){return{showingSelection:t}})},"data-qa":"migration-table-selection-bar"})}},{key:"renderTable",value:function e(t){var a=this;var r=this.props,i=r.scheduled,s=r.isOrgOwner,o=r.featureMigrationOrgApprovals;var l=this.state,c=l.tableHeight,u=l.selectedRows,p=l.tablePaddingBottom;var h=this.createHeaders();var v=this.makeTableRows(t,h);var m={headers:h,rows:v,height:c+"px","data-qa":"migration-table-rows"};return n.a.createElement("div",{className:"p-migration_table__table_view_container",ref:function e(t){a.tableViewRef=t}},i&&s&&o?n.a.createElement("div",{style:{paddingBottom:p}},n.a.createElement(W,d()({},m,{id:"migration-table",selectedRows:u,onSelect:function e(t){return a.setState(function(e){var a=e.showingSelection;return{selectedRows:t,showingSelection:t.length>0&&a}})},getCheckboxId:xe})),this.renderSelectionBar(t)):n.a.createElement(T["b"],m))}},{key:"renderDateRow",value:function e(t){var a=this.props.featureMigrationOrgApprovals;var r=void 0;switch(t.status){case"in_progress":r=a?n.a.createElement(ae,{date:t.date_scheduled}):n.a.createElement("div",{className:"p-migration_table__in_progress"},n.a.createElement(N["a"],{color:"blue",size:"large"}),n.a.createElement("b",null,Ae.rt("In Progress")));break;case"scheduled":r=n.a.createElement(ae,{date:t.date_scheduled});break;case"complete":r=n.a.createElement(ae,{date:t.date_finished});break;default:break}return r}},{key:"renderStatusRow",value:function e(t){var a=this;var r=this.props,i=r.scheduled,s=r.isOrgOwner,o=r.featureMigrationOrgApprovals;var l=this.state.pendingUpdates;var c=null;c=i?n.a.createElement(de,{statusPageURL:this.getStatusPageURL(t.migration_info.id),isOrgOwner:s,migrationInfo:t.migration_info,featureMigrationOrgApprovals:o,disableActions:l.includes(t.migration_info.id),onApprove:function e(){return a.showResponseConfirmDialog([t],Re)},onDecline:function e(){return a.showResponseConfirmDialog([t],Me)}}):t.migration_info.approver?t.migration_info.approver.real_name:null;return c}},{key:"renderLoadingState",value:function e(){return n.a.createElement("div",{className:"p-migration_table__loading"},n.a.createElement(N["a"],{color:"blue",size:"jumbo","data-qa":"migration-loading-spinner"}))}},{key:"renderScheduled",value:function e(){var t=this.state,a=t.isScheduledLoading,i=t.scheduledMigrations;if(!a){var s=0===i.length?this.renderEmptyScheduled():n.a.createElement(r["Fragment"],null,n.a.createElement(I["a"],{title:this.renderMigrationCount(i.length),"data-qa":"migration-count-action-bar"}),this.renderTable(i));return s}return this.renderLoadingState()}},{key:"renderCompleted",value:function e(){var t=this.state,a=t.isCompletedLoading,r=t.completedMigrations;if(!a){var n=0===r.length?this.renderEmptyCompleted():this.renderTable(r);return n}return this.renderLoadingState()}},{key:"renderEmptyScheduled",value:function e(){var t=this.props.enterpriseName;return n.a.createElement("div",{className:"p-migration_table__empty_state","data-qa":"migration-empty-scheduled"},n.a.createElement("div",{className:"p-migration_table__empty_state_title"},Ae.rt("No scheduled migrations.")),n.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},Ae.rt("When new workspace migrations are scheduled for <b>{enterpriseName}</b>, you'll see them here.",{enterpriseName:t})))}},{key:"renderEmptyCompleted",value:function e(){var t=this.props.enterpriseName;return n.a.createElement("div",{className:"p-migration_table__empty_state","data-qa":"migration-empty-completed"},n.a.createElement("div",{className:"p-migration_table__empty_state_title"},Ae.rt("No past migrations.")),n.a.createElement("div",{className:"p-migration_table__empty_state_subtitle"},Ae.rt("There aren't any completed workspace migrations for <b>{enterpriseName}</b> yet, but when there are, you'll find them here.",{enterpriseName:t})))}},{key:"render",value:function e(){var t=this.props.scheduled;var a=this.state.errorAlert;if(a)return this.displayErrorAlert();return n.a.createElement(r["Fragment"],null,t?this.renderScheduled():this.renderCompleted(),n.a.createElement(R["a"],null))}}]);return t}(r["PureComponent"]);Be.displayName="MigrationTableView";Be.defaultProps=Pe;var Ue=function e(t,a){var r=a.enterpriseDomain;return{orgURL:Object(Y["a"])(t,r),featureMigrationOrgApprovals:Object(Q["isFeatureEnabled"])(t,"feature_migration_org_approvals")}};var qe={enqueueToast:J["enqueueToast"],openModal:Z["openModal"],fetchCompletedMigrations:M["i"],fetchScheduledMigrations:M["m"],approveMigrations:M["a"],declineMigrations:M["g"]};var Ge=Be;var We=Object(o["connect"])(Ue,qe)(Be);var He=We;var Ve=a(3086);var Ke=new k["b"]("migration_table");var ze={enterpriseName:y["b"].string.isRequired,enterpriseDomain:y["b"].string.isRequired,isOrgOwner:y["b"].bool,tabActionOnClick:y["b"].func,defaultTabId:y["b"].string};var Ye={isOrgOwner:false,tabActionOnClick:O["noop"],defaultTabId:""};var Qe=function(e){_()(t,e);function t(){h()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"renderHeader",value:function e(){var t=Ke.t("Migrations");return n.a.createElement("div",{className:"p-migration_table_indent","data-qa":"migration-header"},n.a.createElement("h1",null,t))}},{key:"render",value:function e(){var t=this.props,a=t.tabActionOnClick,r=t.defaultTabId;var i=[{title:Ke.t("Scheduled Migrations"),id:"scheduled",content:n.a.createElement(He,d()({},this.props,{scheduled:true})),onClick:a,"data-qa":"migration-tab-scheduled"},{title:Ke.t("Past Migrations"),id:"past",content:n.a.createElement(He,this.props),onClick:a,"data-qa":"migration-tab-completed"}];return n.a.createElement("div",{className:"p-migration_table","data-qa":"migration-page"},this.renderHeader(),n.a.createElement("div",{className:"p-migration_table_migrations"},n.a.createElement(E["a"],{"data-qa":"migration-tabs",tabs:i,defaultTabId:r,fullHeight:true})))}}]);return t}(r["PureComponent"]);Qe.displayName="MigrationTable";Qe.defaultProps=Ye;var Je=Qe;var Ze=Je;Object(c["a"])("interop.migrationTable",{render:function e(t,a,r){if(!t)throw new Error("migrationTable render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(Ze,r)),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.d(t,"b",function(){return r});a.d(t,"d",function(){return n});a.d(t,"c",function(){return i});a.d(t,"a",function(){return s});var r=function e(t){return t&&t.appId};var n=function e(t){return t&&t.appName};var i=function e(t){return!!(t&&t.displayInstall)};var s=function e(t){return!!(t&&t.displayConnect)}},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(58);var c=a.n(l);var u=a(3);var d=a.n(u);var p=a(6);var h=a.n(p);var v=a(8);var m=a.n(v);var f=a(7);var b=a.n(f);var g=a(9);var _=a.n(g);var y=a(0);var O=a(2);var k=a(209);var E=a(103);var C=a(19);var j=a(217);var w=a(85);var S=a(67);var I=a(4);var T=a(108);var A=a(385);var N=a(351);var P=a(326);var R=a(188);var M=a(1352);var D=a(101);var x=a(841);var F=a(15);var L=a(73);var B=a(361);var U=a(109);var q=a(274);var G=a(12);var W=Object(F["b"])("If All Threads is open and the thread is present, request it to be focused via the all-threads-store",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs;var i=Object(U["getThreadKey"])(r,n);var s=Object(G["a"])({getState:t,label:"MAYBE-JUMP-THREAD"});var o=t();var l=Object(L["a"])(t());var c=Object(T["h"])(t())||!Object(T["e"])(t());if(l!==q["a"].allThreads||!c){s.info("All Threads not open");return false}var u=Object(B["getThreads"])(o);if(!u){s.info("No threads");return false}var d=Object(O["find"])(u,{threadKey:i});if(!d){s.info("Thread not found");return false}s.info("Requesting "+i);e(Object(B["setFocusRequestedThreadKey"])(i));return true});W.propTypes={channelId:y["b"].string,threadTs:y["b"].string};var H=W;var V=a(168);var K=a(866);var z=a(11);var Y=a(38);var Q=a(181);var J=a(10);var Z=a(57);var X=a(45);var $=a(39);var ee=a(1068);var te=a(208);var ae=a(1348);var re=a(66);var ne=a(1808);var ie=a(1067);var se=250;var oe={oldest:y["b"].string,latest:y["b"].string,timestamps:y["b"].arrayOf(y["b"].string).isRequired,listRenderer:y["b"].func.isRequired,startTs:y["b"].string,highlightKey:y["b"].string,requestHistory:y["b"].func,reachedStart:y["b"].bool,reachedEnd:y["b"].bool,layout:y["b"].object};var le={oldest:void 0,latest:void 0,startTs:void 0,highlightKey:void 0,requestHistory:O["noop"],reachedStart:true,reachedEnd:true,layout:void 0};var ce=function(e){_()(t,e);function t(e){h()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onScroll=a.onScroll.bind(a);a.setListRef=a.setListRef.bind(a);a.loadAround=a.loadAround.bind(a);a.loadPre=a.loadPre.bind(a);a.loadPost=a.loadPost.bind(a);a.list=null;a.layout=e.layout||new ie["a"];a.layout.setAnchor(e.startTs||false);a.layout.setStickToBottom(e.reachedEnd);a.state={isLoading:false};return a}b()(t,[{key:"componentWillReceiveProps",value:function e(t){if(!this.list)throw new Error("MessageList needs a ref to List");(t.startTs!==this.props.startTs||t.highlightKey&&t.highlightKey!==this.props.highlightKey)&&(t.timestamps===this.props.timestamps?this.list.scrollToKey(t.startTs,{lazy:true}):this.layout.setAnchor(t.startTs));this.layout.setStickToBottom(t.reachedEnd)}},{key:"componentDidUpdate",value:function e(t){!t.reachedEnd&&this.props.reachedEnd&&this.layout.setAnchor(false)}},{key:"onScroll",value:function e(){this.layout.setAnchor(false)}},{key:"setListRef",value:function e(t){this.list=t}},{key:"loadAround",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,r=a.oldest,n=a.latest,i=a.reachedStart,s=a.reachedEnd,o=a.timestamps,l=a.startTs;if(s)return this.loadPre();if(i)return this.loadPost();var c=n||Object(O["first"])(o)||l;var u=r||Object(O["last"])(o)||l;var d=this.props.requestHistory({latest:c,oldest:u});if(d){d.finally(function(){return Promise.delay(se)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"around"}})}return d}},{key:"loadPre",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,r=a.oldest,n=a.reachedStart,i=a.timestamps,s=a.startTs;if(n)return false;var o=r||Object(O["first"])(i)||s;var l=this.props.requestHistory({latest:o});if(l){l.finally(function(){return Promise.delay(se)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"pre"}})}return l}},{key:"loadPost",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,r=a.latest,n=a.reachedEnd,i=a.timestamps,s=a.startTs;if(n)return false;this.isLoading=true;var o=r||Object(O["last"])(i)||s;var l=this.props.requestHistory({oldest:o});if(l){l.finally(function(){return Promise.delay(se)}).then(function(){return t.setState(function(){return{isLoading:false}})});this.setState(function(){return{isLoading:"pre"}})}return l}},{key:"render",value:function e(){var t=this.props,a=t.reachedStart,r=t.reachedEnd,n=t.timestamps;return this.props.listRenderer({reachedStart:a,reachedEnd:r,keys:n,layout:this.layout,onScroll:this.onScroll,loadAround:this.loadAround,loadPre:this.loadPre,loadPost:this.loadPost,ref:this.setListRef})}}]);return t}(r["PureComponent"]);ce.displayName="MessageList";var ue=ce;ce.defaultProps=le;var de=a(1813);var pe=a(537);var he=a(1814);var ve=a(1540);var me=a(26);var fe=a.n(me);var be=a(16);var ge=a.n(be);var _e=a(68);var ye=a(934);var Oe=a(93);var ke=a(1843);var Ee=a(1552);var Ce=a(384);var je=a(21);var we=a(3269);var Se={MESSAGE_PANE:"message_pane",THREAD:"thread"};var Ie={location:y["b"].oneOf(Object(O["values"])(Se)).isRequired,children:y["b"].node,channelId:y["b"].string.isRequired,threadTs:y["b"].string,viewContext:y["b"].string,className:y["b"].string,elementProps:y["b"].object,disableFileUploadsPref:y["b"].string,featureAnnounceOnly:y["b"].bool,userCanPostInChannel:y["b"].bool,openFileUploadDialog:y["b"].func};var Te={children:void 0,threadTs:void 0,viewContext:void 0,className:void 0,elementProps:void 0,disableFileUploadsPref:void 0,featureAnnounceOnly:false,userCanPostInChannel:true,openFileUploadDialog:O["noop"]};var Ae=function(e){_()(t,e);function t(e){h()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={dragging:false};a.activeElements=new Set;a.containerRef=n.a.createRef();a.onDrop=a.onDrop.bind(a);return a}b()(t,[{key:"componentDidMount",value:function e(){var t=this;var a=this.containerRef.current;a.addEventListener("dragenter",function(e){if(t.shouldPreventDrag(e))return;e.preventDefault();t.activeElements.add(e.target);1===t.activeElements.size&&t.setState(function(e){return d()({},e,{dragging:true})})});a.addEventListener("dragleave",function(e){e.preventDefault();t.activeElements.delete(e.target);0===t.activeElements.size&&t.setState(function(e){return d()({},e,{dragging:false})})});a.addEventListener("dragover",function(e){if(t.shouldPreventDrag(e))return;e.preventDefault()});a.addEventListener("dragend",function(){t.setState(function(e){return d()({},e,{dragging:false})});t.activeElements.clear()});a.addEventListener("drop",this.onDrop)}},{key:"onDrop",value:function e(t){var a=this.props,r=a.channelId,n=a.threadTs,i=a.viewContext;t.preventDefault();this.setState(function(e){return d()({},e,{dragging:false})});this.activeElements.clear();var s=t.dataTransfer.files;var o=Object(te["a"])({viewContext:i,channelId:r,threadTs:n});var l={fileUploadAction:je["l"].DRAG_AND_DROP,fileUploadSrc:je["m"].LOCAL};this.props.openFileUploadDialog({files:[].concat(fe()(s)),threadTs:n,initialChannelId:r,inputProxy:o,metadata:l})}},{key:"shouldPreventDrag",value:function e(t){var a=this.props,r=a.disableFileUploadsPref,n=a.featureAnnounceOnly,i=a.userCanPostInChannel;var s=Object(O["get"])(t,"dataTransfer.types");if(!Object(O["includes"])(s.map(function(e){return e.toLowerCase()}),"files"))return true;if("disable_all"===r)return true;if(!n&&!i)return true;return false}},{key:"maybeRenderOverlay",value:function e(){if(!this.state.dragging)return null;var t=this.props.channelId;switch(this.props.location){case Se.MESSAGE_PANE:return n.a.createElement(ke["a"],{channelId:t});case Se.THREAD:return n.a.createElement(Ee["a"],null);default:return null}}},{key:"render",value:function e(){var t=this.props,a=t.children,r=t.className,i=t.elementProps;return n.a.createElement("div",d()({className:ge()("p-file_drag_drop__container",r),ref:this.containerRef},i),a,this.maybeRenderOverlay())}}]);return t}(r["Component"]);Ae.displayName="FileDragDrop";Ae.defaultProps=Te;var Ne=function e(t,a){var r=a.channelId;return{featureAnnounceOnly:Object(I["isFeatureEnabled"])(t,"feature_announce_only"),disableFileUploadsPref:Object(_e["a"])(t,"disable_file_uploads"),userCanPostInChannel:Object(Oe["p"])(t,r)}};var Pe=function e(t){return{openFileUploadDialog:function e(){return t(ye["a"].apply(void 0,arguments))}}};var Re=Object(Ce["b"])(Object(i["connect"])(Ne,Pe)(Ae));var Me=a(921);var De=a(899);var xe=a(55);var Fe=a(1092);var Le=a(925);var Be=a(926);var Ue=a(1093);var qe=a(1066);var Ge=a(1224);var We=a(762);var He=a(1225);var Ve=a(1353);var Ke=a(922);var ze=a(1095);var Ye=a(1215);var Qe=a(1354);var Je=a(1214);var Ze=a(1347);var Xe=a(1355);var $e=a(1356);var et=a(2407);var tt=a(2408);var at=new J["b"]("message_kit");var rt={msg:y["b"].object.isRequired,className:y["b"].string,highlight:y["b"].bool,clearHighlight:y["b"].func,focused:y["b"].bool,renderActionsOffscreen:y["b"].bool};var nt={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false,renderActionsOffscreen:false};var it=function(e){_()(t,e);function t(){h()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"renderContent",value:function e(t){var a=xe["a"].threads_flexpane;return t.blocks?n.a.createElement(qe["a"],{msg:t,blocksContainerContext:a}):n.a.createElement(Ue["a"],{msg:t})}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.highlight,i=t.clearHighlight,s=t.focused,o=t.renderActionsOffscreen;var l=ge()("c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className);return n.a.createElement(Ve["a"],{msg:a},n.a.createElement(Ke["a"],{msg:a,className:l,highlight:r,clearHighlight:i},n.a.createElement(ze["a"],{hovered:s},n.a.createElement(Ye["a"],{msg:a,showComment:false,showShare:false,showJump:true,messageContainerType:$["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,position:"inside",renderOffscreen:o},n.a.createElement(Ze["a"],{msg:a},n.a.createElement(Qe["a"],{msg:a},n.a.createElement(Je["a"],{light:n.a.createElement(Fe["a"],{msg:a})},n.a.createElement(Xe["a"],{msg:a},n.a.createElement(Le["a"],{msg:a}),"\xa0\xa0",n.a.createElement(Be["a"],{msg:a,full:true,clickable:true},at.t("Open in channel")),n.a.createElement("br",null),n.a.createElement($e["a"],null,this.renderContent(a),n.a.createElement(We["b"],{msg:a}),n.a.createElement(Ge["a"],{msg:a,blocksContainerContext:xe["a"].threads_flexpane}),n.a.createElement(He["a"],{msg:a}))))))))))}}]);return t}(r["PureComponent"]);it.displayName="ThreadRootMessage";var st=it;it.defaultProps=nt;var ot=a(1699);var lt={msg:y["b"].object.isRequired,className:y["b"].string,highlight:y["b"].bool,clearHighlight:y["b"].func,focused:y["b"].bool,renderActionsOffscreen:y["b"].bool};var ct={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false,renderActionsOffscreen:false};var ut=function(e){_()(t,e);function t(){h()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"renderContent",value:function e(t){var a=xe["a"].threads_flexpane;return t.blocks?n.a.createElement(qe["a"],{msg:t,blocksContainerContext:a}):n.a.createElement(Ue["a"],{msg:t})}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.highlight,i=t.clearHighlight,s=t.focused,o=t.renderActionsOffscreen;var l=ge()("c-message_kit__message","c-message_kit__thread_message",this.props.className);return n.a.createElement(Ve["a"],{msg:a},n.a.createElement(Ke["a"],{msg:a,className:l,highlight:r,clearHighlight:i},n.a.createElement(ze["a"],{hovered:s},n.a.createElement(Ye["a"],{msg:a,showComment:false,showShare:false,messageContainerType:$["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,renderOffscreen:o},n.a.createElement(Qe["a"],{msg:a,showBroadcast:true},n.a.createElement(Je["a"],{light:n.a.createElement(Fe["a"],{msg:a})},n.a.createElement(Xe["a"],{msg:a},n.a.createElement(Le["a"],{msg:a}),"\xa0\xa0",n.a.createElement(Be["a"],{msg:a,relative:true}),n.a.createElement("br",null),n.a.createElement($e["a"],null,n.a.createElement(ot["a"],{msg:a},this.renderContent(a),n.a.createElement(We["b"],{msg:a}),n.a.createElement(Ge["a"],{msg:a,blocksContainerContext:xe["a"].threads_flexpane})),n.a.createElement(He["a"],{msg:a})))))))))}}]);return t}(r["PureComponent"]);ut.displayName="ThreadReplyMessage";var dt=ut;ut.defaultProps=ct;var pt=a(1368);var ht=a(1793);var vt=a(1559);var mt=a(138);var ft=a(3283);var bt=new J["b"]("flexpane");var gt={featureReactThreads:y["b"].bool};var _t={featureReactThreads:false};function yt(e){var t=e.featureReactThreads;if(!t)return null;var a=cdn_url+"/4f28/img/loading_hash_animation_@2x.gif";var r=cdn_url+"/4f28/img/loading_hash_animation.gif";var i=bt.t("loading\u2026");var s=r+" 1x, "+a+" 2x";return n.a.createElement("div",{className:"p-flexpane_loading","data-qa":"flexpane_loading"},n.a.createElement("img",{className:"p-flexpane_loading__spinner",src:a,alt:i,srcSet:s}),n.a.createElement("br",null),i)}yt.displayName="FlexpaneLoading";yt.defaultProps=_t;var Ot=Object(mt["a"])("feature_react_threads")(yt);var kt=a(1851);var Et=a(1826);var Ct=a(41);var jt=a(139);var wt=a(51);var St=a(50);var It=a(3289);var Tt=new J["b"]("threads");var At={channelId:y["b"].string,threadTs:y["b"].string,isMpim:y["b"].bool,numMpimMembers:y["b"].number,mpimName:y["b"].string};var Nt={channelId:void 0,threadTs:void 0,isMpim:false,numMpimMembers:0,mpimName:void 0};function Pt(e){var t=e.channelId,a=e.threadTs,r=e.isMpim,i=e.numMpimMembers,s=e.mpimName;var o=void 0;o=r?n.a.createElement("div",{className:"p-threads_flexpane__header_channel_name"},n.a.createElement(St["c"],{tip:s},n.a.createElement("span",null,Tt.t("Direct message with {count} others",{count:i})))):n.a.createElement(jt["a"],{channelId:t,className:"p-threads_flexpane__header_channel_name",inline:true,iconProps:{inherit:true}});return n.a.createElement(wt["a"],{className:"p-threads_flexpane__header_permalink",href:Object(Ct["constructMsgPermalink"])(t,a)},o)}Pt.displayName="Header";Pt.defaultProps=Nt;function Rt(e,t){var a=t.channelId;var r=Object(C["d"])(e,a);var n={};if(r&&"mpim"===Object(z["getChannelType"])(r)){n.isMpim=true;var i=Object(z["getMemberIdsFromMpim"])(r)||[];n.numMpimMembers=i.length-1;n.mpimName=Object(z["getDisplayNameForChannel"])(e,r)}return n}var Mt=Object(i["connect"])(Rt)(Pt);var Dt=a(3291);var xt=new J["b"]("threads");var Ft={replyCount:y["b"].number};var Lt={replyCount:0};function Bt(e){var t=e.replyCount;var a=Math.max(1,t);var r=xt.t("{count, plural, =1 {# reply} other {# replies}}",{count:a,fallbackHash:"45d5eeb729c4b8d8b91f810f9387e5a97b3e6ce5"});return n.a.createElement("div",{className:"p-threads_flexpane__separator"},n.a.createElement("span",{className:"p-threads_flexpane__separator_count"},r),n.a.createElement("hr",{className:"p-threads_flexpane__separator_line"}))}Bt.displayName="Separator";Bt.defaultProps=Lt;function Ut(e,t){var a=t.channelId,r=t.threadTs;var n=Object(S["a"])(e,a,r);return{replyCount:Object(Ct["getReplyCount"])(n)}}var qt=Object(i["connect"])(Ut)(Bt);var Gt=a(28);var Wt=a(81);var Ht=a(2409);var Vt=new J["b"]("threads");var Kt={tryAgain:y["b"].func,featureReactThreads:y["b"].bool};var zt={tryAgain:O["noop"],featureReactThreads:true};function Yt(e){var t=e.tryAgain,a=e.featureReactThreads;if(!a)return null;return n.a.createElement("div",{className:"p-threads_flexpane__error","data-qa":"threads_flexpane_error"},n.a.createElement("div",{className:"p-threads_flexpane__error_contents"},n.a.createElement("div",{className:"p-threads_flexpane__error_emoji"},n.a.createElement(Wt["b"],{text:":mag:",emojiSize:Wt["a"].LARGE})),n.a.createElement("p",{className:"p-threads_flexpane__error_header"},Vt.t("Couldn't load thread")),n.a.createElement("p",{className:"p-threads_flexpane__error_body"},Vt.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,a=e.key;return n.a.createElement(wt["a"],{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:a},t)})),n.a.createElement(Gt["d"],{type:"primary",onClick:t,"data-qa":"threads_flexpane_error_try_again"},Vt.t("Try Again"))))}Yt.displayName="ThreadsError";Yt.defaultProps=zt;var Qt=function e(t){var a=Object(I["isFeatureEnabled"])(t,"feature_react_threads");return{featureReactThreads:a}};var Jt=Object(i["connect"])(Qt)(Yt);var Zt=a(1817);var Xt=function(){function e(){h()(this,e);this.historyRequests={}}b()(e,[{key:"reset",value:function e(){this.historyRequests={}}},{key:"logHistoryRequest",value:function e(t){var a=t.oldest,r=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=a+"_"+r;var o=this.historyRequests[s];if(!o){o={count:0,time:0};this.historyRequests[s]=o}if(i-1e4>o.time){o.count=1;o.time=i}else o.count+=1}},{key:"shouldPreventHistoryRequest",value:function e(t){var a=t.oldest,r=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=this.historyRequests[a+"_"+r];if(!s)return false;if(s.count<=3)return false;if(s.time<i-1e4)return false;return true}}]);return e}();var $t=Xt;var ea=new J["b"]("threads");var ta=Object(pt["b"])(st);var aa=Object(pt["b"])(dt);var ra={threadTs:y["b"].string,channelId:y["b"].string,subscribed:y["b"].bool,lastRead:y["b"].string,maxMarkableTs:y["b"].string,oldest:y["b"].string,latest:y["b"].string,timestamps:y["b"].arrayOf(y["b"].string),reachedStart:y["b"].bool,reachedEnd:y["b"].bool,prevReachedEnd:y["b"].bool,userHasUnreadThreads:y["b"].bool,fileId:y["b"].string,comments:y["b"].array,startTs:y["b"].string,highlightTs:y["b"].string,highlightKey:y["b"].string,showDragOverlay:y["b"].bool,requestHistory:y["b"].func,clearHighlight:y["b"].func,markThread:y["b"].func,useGlobalNav:y["b"].bool,windowFocused:y["b"].bool,userAttention:y["b"].string,featureReactThreads:y["b"].bool,featureAriaApplicationMode:y["b"].bool,logInfo:y["b"].func,logError:y["b"].func,clogger:y["b"].object,jumpToMessage:y["b"].func,setFocusRequestedTs:y["b"].func,focusRequested:y["b"].bool,setFocusRequested:y["b"].func,maybeFocusThreadInAllThreads:y["b"].func,featureReactAllThreads:y["b"].bool,makeMessageSummary:y["b"].func,channel:y["b"].object,channelIsYou:y["b"].bool,channelIsMuted:y["b"].bool,channelHasDraft:y["b"].bool,channelBadgeCount:y["b"].number,isChannelUnavailable:y["b"].bool,unavailableTeamId:y["b"].string,readOnly:y["b"].bool,featureAnnounceOnly:y["b"].bool};var na={threadTs:void 0,channelId:void 0,subscribed:void 0,lastRead:void 0,maxMarkableTs:void 0,oldest:void 0,latest:void 0,timestamps:[],reachedStart:false,reachedEnd:false,prevReachedEnd:false,userHasUnreadThreads:false,fileId:void 0,comments:[],startTs:void 0,highlightTs:void 0,highlightKey:void 0,showDragOverlay:false,requestHistory:O["noop"],clearHighlight:O["noop"],markThread:O["noop"],useGlobalNav:false,windowFocused:false,userAttention:"",featureReactThreads:true,featureAriaApplicationMode:false,logInfo:O["noop"],logError:O["noop"],clogger:{track:O["noop"]},jumpToMessage:O["noop"],setFocusRequestedTs:O["noop"],focusRequested:false,setFocusRequested:O["noop"],maybeFocusThreadInAllThreads:function e(){return false},featureReactAllThreads:false,makeMessageSummary:O["noop"],channel:void 0,channelIsYou:false,channelIsMuted:false,channelHasDraft:false,channelBadgeCount:0,isChannelUnavailable:false,unavailableTeamId:"",readOnly:false,featureAnnounceOnly:false};var ia="THREAD-FLEXPANE";var sa=function(e){_()(t,e);b()(t,null,[{key:"getRowsAndKeys",value:function e(t,a){var r=t.threadTs,n=t.reachedStart,i=t.reachedEnd,s=t.prevReachedEnd,o=t.timestamps,l=t.comments;var c=a.commentsExpanded,u=a.degraded;var d=[];var p=[];if(Object(O["isEmpty"])(o))return{rows:p,keys:d};var h=Object(O["first"])(o)===r;var v=Object(O["without"])(o,r);if(!n&&!u){d.push("loading-start-"+Object(O["first"])(v));p.push({type:"loading"})}if(h){d.push(r);p.push({type:"root",ts:r});if(!Object(O["isEmpty"])(l)){d.push("comments-toggle");p.push({type:"comments-toggle"});c&&l.forEach(function(e){d.push(e.id);p.push({type:"comment",comment:e})})}if(v.length){d.push("separator");p.push({type:"separator"})}}v.forEach(function(e,t){d.push(e);p.push({type:"reply",ts:e,prevTs:v[t-1]})});if(i||s){d.push("input");p.push({type:"input"})}else if(!u){d.push("loading-end");p.push({type:"loading"})}return{rows:p,keys:d}}}]);function t(e){h()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.requestHistory=a.requestHistory.bind(a);a.renderRow=a.renderRow.bind(a);a.renderList=a.renderList.bind(a);a.tryAgain=a.tryAgain.bind(a);a.toggleComments=a.toggleComments.bind(a);a.isFocusableItem=a.isFocusableItem.bind(a);a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.clogThreadEvent=a.clogThreadEvent.bind(a);a.onArrowKeyLeft=a.onArrowKeyLeft.bind(a);a.shouldIgnoreArrowKeys=a.shouldIgnoreArrowKeys.bind(a);a.onKeyDown=a.onKeyDown.bind(a);a.getAriaLabelForRow=a.getAriaLabelForRow.bind(a);a.renderBody=a.renderBody.bind(a);a.renderSubtitle=a.renderSubtitle.bind(a);a.keys=null;a.rows=null;a.historyRateLimiter=new $t;a.listRef=n.a.createRef();a.state={degraded:Object(he["a"])(),commentsExpanded:false,hasKeyboardFocus:false,errored:false};return a}b()(t,[{key:"componentDidMount",value:function e(){this.checkUnreads()}},{key:"componentWillReceiveProps",value:function e(t){var a=Object(U["getThreadKey"])(this.props.channelId,this.props.threadTs);var r=Object(U["getThreadKey"])(t.channelId,t.threadTs);this.state.errored&&a!==r&&this.setState(function(e){return d()({},e,{errored:false})})}},{key:"componentDidUpdate",value:function e(t){this.checkUnreads();var a=this.props,r=a.threadTs,n=a.channelId,i=a.timestamps,s=a.focusRequested;var o=Object(U["getThreadKey"])(n,r);var l=t.threadTs,c=t.channelId;var u=Object(U["getThreadKey"])(c,l);if(o!==u){this.historyRateLimiter.reset();this.didFocus=false}if(s&&!Object(O["isEmpty"])(i)){this.focus();this.didFocus=true;this.props.setFocusRequested(false)}}},{key:"onFocusEnter",value:function e(t){this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onArrowKeyLeft",value:function e(){var t=this;var a=this.props,r=a.featureReactAllThreads,n=a.channelId,i=a.threadTs;if(r){var s=this.props.maybeFocusThreadInAllThreads({channelId:n,threadTs:i});if(s)return Promise.resolve()}return this.props.jumpToMessage({channelId:this.props.channelId,ts:this.props.threadTs}).then(function(){t.props.setFocusRequestedTs(t.props.threadTs)})}},{key:"onKeyDown",value:function e(t){var a=this;if(!Object(ne["a"])({e:t,isMenuVisible:Object(re["g"])()}))return;var r=Object(te["a"])({viewContext:$["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,channelId:this.props.channelId,threadTs:this.props.threadTs});if(r){var n=function e(){a.blur();r.focus()};Object(Z["c"])()?setTimeout(n,0):n()}}},{key:"getAriaLabelForRow",value:function e(t){if(!this.props.makeMessageSummary)return null;var a=this.rows[t];if(!a||!a.type)return null;if("root"!==a.type&&"reply"!==a.type)return null;return this.props.makeMessageSummary({channelId:this.props.channelId,ts:a.ts,hasFocus:this.state.hasKeyboardFocus,day:{ts:a.ts,isFirstDay:false,isLastDay:false}})}},{key:"shouldIgnoreArrowKeys",value:function e(t){if(Object(ee["a"])(t.target))return true;return!this.state.hasKeyboardFocus}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{errored:true}});this.props.logError(ia,"ThreadsFlexpane componentDidCatch","threads_flexpane_did_catch",t)}},{key:"focus",value:function e(){var t=this.listRef.current&&this.listRef.current.list;t&&t.focus()}},{key:"blur",value:function e(){var t=this.listRef.current&&this.listRef.current.list;t&&t.blur()}},{key:"checkUnreads",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.subscribed,i=t.lastRead,s=t.reachedEnd,o=t.maxMarkableTs,l=t.userAttention,c=t.userHasUnreadThreads,u=t.logInfo;if(!n||!s||!o)return;var d=Object(U["getThreadKey"])(a,r);if(!i||i<o){if(Object(Y["a"])()){if(l!==K["a"].MESSAGE_PANE){u(ia,"Not marking "+d+" to "+o+" because "+l);return}}else if(!Object(V["f"])()){u(ia,"Not marking "+d+" to "+o+" because "+Object(V["c"])());return}if(!c){u(ia,"Not marking "+d+" to "+o+" because no unread threads yet");return}u(ia,"Marking "+Object(U["getThreadKey"])(a,r)+": "+o);this.props.markThread({channelId:a,ts:r,lastRead:o,reason:"mark-thread-as-read-from-flexpane"})}}},{key:"requestHistory",value:function e(t){var a=this;var r=t.oldest,n=t.latest;var i=this.props,s=i.channelId,o=i.threadTs,e=i.requestHistory,l=i.logError;if(this.historyRateLimiter.shouldPreventHistoryRequest({oldest:r,latest:n})){l(ia,"Rate-limited thread: "+Object(U["getThreadKey"])(s,o));return false}var c=e({oldest:r,latest:n,channelId:s,threadTs:o});c&&this.historyRateLimiter.logHistoryRequest({oldest:r,latest:n});return c.then(function(e){a.setState(function(e){return d()({},e,{errored:false})});return e}).catch(function(e){a.setState(function(e){return d()({},e,{errored:true})});return Promise.reject(e)})}},{key:"tryAgain",value:function e(){this.setState(function(e){return d()({},e,{errored:false})})}},{key:"toggleComments",value:function e(){var t=this.state.commentsExpanded;this.setState(function(){return{commentsExpanded:!t}})}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.rows[a];if(!r)return false;if("loading"===r.type)return false;if("separator"===r.type)return false;if("input"===r.type)return false;return true}},{key:"isListScrollable",value:function e(){var t=this.listRef.current&&this.listRef.current.list;var a=t&&t.layout.getHeightValidity("input");return!a||t.getContentHeight()>t.getContainerHeight()}},{key:"clogThreadEvent",value:function e(t){var a=t.event,r=t.metadata;var n=this.props,i=n.channelId,s=n.threadTs,o=n.clogger;o.track(a,d()({parent_message_id:s,channel_id:i,is_threads_view:0,is_flexpane:1},r))}},{key:"renderRow",value:function e(t,a){var r=a.hasFocus;var i=this.props,s=i.channelId,o=i.highlightTs,l=i.threadTs,c=i.comments,u=i.fileId,d=i.featureReactThreads,p=i.focusRequested;if(!d)return null;var h=this.state.commentsExpanded;var v=this.rows[t];if(!v)return null;var m=this.state.hasKeyboardFocus;switch(v.type){case"separator":return n.a.createElement(qt,{channelId:s,threadTs:l});case"root":return n.a.createElement(ta,{channelId:s,ts:v.ts,highlight:v.ts===o,clearHighlight:this.props.clearHighlight,focused:r,renderActionsOffscreen:m});case"reply":return n.a.createElement(aa,{channelId:s,ts:v.ts,highlight:v.ts===o,clearHighlight:this.props.clearHighlight,focused:r,renderActionsOffscreen:m});case"input":return n.a.createElement(kt["a"],{channelId:s,threadTs:l,focusInputOnMount:!(p||this.didFocus)&&!this.isListScrollable(),viewContext:$["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,clogThreadEvent:this.clogThreadEvent});case"comments-toggle":return n.a.createElement(ht["a"],{commentCount:c.length,expanded:h,toggleList:this.toggleComments});case"comment":return n.a.createElement(vt["a"],{comment:v.comment,fileId:u});case"loading":return n.a.createElement("div",{className:"p-threads_flexpane__loading"},ea.t("Loading messages..."));default:return null}}},{key:"renderList",value:function e(a){var r=this;var i=t.getRowsAndKeys(this.props,this.state),s=i.rows,o=i.keys;this.rows=s;this.keys=o;var l=this.state.degraded?de["a"]:pe["a"];var c=this.props,u=c.reachedEnd,p=c.reachedStart,h=c.featureAriaApplicationMode,v=c.channel,m=c.channelId,f=c.channelIsYou,b=c.channelIsMuted,g=c.channelHasDraft,_=c.channelBadgeCount,y=c.threadTs,O=c.readOnly,k=c.featureAnnounceOnly;var E=[{keys:["left"],handler:this.onArrowKeyLeft,filter:this.shouldIgnoreArrowKeys}];var C=Object(ae["a"])({type:Object(z["getChannelType"])(v),displayName:Object(z["getDisplayName"])(v),isShared:Object(z["isExternallySharedChannel"])(v),isOrgShared:Object(z["isOrgShared"])(v),hasUnreads:!!Object(z["getUnreadCount"])(v),isArchived:Object(z["isArchived"])(v),unreadCount:Object(z["getUnreadCount"])(v),isYou:f,isMuted:b,hasDraft:g,badgeCount:_,isSelected:false,userActive:false,isTyping:false,isThread:true,canPost:!O,featureAnnounceOnly:k});var j=function(){if(!r.rows.length)return null;var e=r.rows.filter(function(e){return"reply"===e.type});var t=e[0];return t?t.ts:y}();var w=Object(U["makeIdForThreadList"])(Object(U["getThreadKey"])(m,y));return n.a.createElement(De["a"],null,function(e){var t=e.measureRef,i=e.width,s=e.height;return n.a.createElement("div",{className:"flex_one no_min_height",ref:t},n.a.createElement(l,d()({},a,{id:w,keys:o,width:i,height:s,rowRenderer:r.renderRow,isFocusableItem:r.isFocusableItem,initialActiveItem:j,onFocusEnter:r.onFocusEnter,onFocusLeave:r.onFocusLeave,reachedEnd:u,reachedStart:p,ariaLabel:C,getAriaLabelForRow:r.getAriaLabelForRow,persistentKeys:["input"],keyCommands:E,useAriaApplicationMode:h})))})}},{key:"renderMessageList",value:function e(){if(this.props.isChannelUnavailable){var t=this.props,a=t.unavailableTeamId,r=t.channelId;return n.a.createElement(Et["a"],{unavailableTeamId:a,channelId:r,isThread:true})}var i=this.props,s=i.channelId,o=i.threadTs,l=i.oldest,c=i.latest,u=i.timestamps,p=i.startTs,h=i.highlightTs,v=i.highlightKey,m=i.reachedStart,f=i.reachedEnd,b=i.comments;if(!s||!o)return null;var g=this.state.commentsExpanded;var _={comments:b,commentsExpanded:g,highlightTs:h,highlightKey:v};return n.a.createElement(ue,d()({oldest:l,latest:c,timestamps:u,listRenderer:this.renderList,startTs:p,highlightKey:v,requestHistory:this.requestHistory,reachedStart:m,reachedEnd:f,ref:this.listRef},_,{key:Object(U["getThreadKey"])(s,o)}))}},{key:"renderBody",value:function e(){var t=this.props,a=t.channelId,i=t.threadTs,s=t.timestamps,o=t.showDragOverlay;var l=this.state.errored;if(l)return n.a.createElement("div",{className:"p-threads_flexpane"},n.a.createElement(Jt,{tryAgain:this.tryAgain}));var c=n.a.createElement(r["Fragment"],null,this.renderMessageList(),Object(O["isEmpty"])(s)&&n.a.createElement(Ot,null),o&&n.a.createElement(Ee["a"],null));return Object(Y["a"])()?n.a.createElement(Re,{location:Se.THREAD,channelId:a,threadTs:i,className:"p-threads_flexpane",viewContext:$["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,elementProps:{onKeyDown:this.onKeyDown}},c):n.a.createElement("div",{className:"p-threads_flexpane",onKeyDown:this.onKeyDown},c)}},{key:"renderSubtitle",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs;return n.a.createElement(Mt,{channelId:a,threadTs:r})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs;if(!a||!r)return null;return n.a.createElement(Me["a"],{title:ea.t("Thread"),renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,viewId:$["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,kbNavOrder:4,bodyClassName:"p-threads_flexpane_container"})}}]);return t}(r["PureComponent"]);sa.displayName="ThreadsFlexpane";sa.defaultProps=na;var oa=function e(t,a){var r=Object(T["c"])(t)[0];var n=(r||"").split("-"),i=c()(n,2),s=i[0],o=i[1];var l=a.threadTs||o;var u=a.channelId||s;var p=Object(C["d"])(t,u);if(!l||!u)return{};var h=Object(A["getStartTs"])(t)||l;var v=Object(A["getHighlight"])(t),m=v.highlightTs,f=v.highlightKey;var b=Object(U["getThreadKey"])(u,l);var g=Object(E["getPotentiallyOutdatedTimestamps"])(t,b,h),_=g.start,y=g.end,O=g.timestamps,M=g.reachedStart,D=g.reachedEnd,x=g.prevReachedEnd;var F=Object(N["getSubscriptionState"])(t,{channelId:u,ts:l});var L=void 0;var B=void 0;var q=Object(S["a"])(t,u,l);if(q&&q.files&&1===q.files.length){B=q.files[0];var W=Object(w["getFileById"])(t,B);W&&(L=W.comments)}var H={};Object(Y["a"])()?H.userAttention=Object(K["b"])(t):H.windowFocused=Object(k["isWindowFocused"])(t);var V=Object(G["a"])({state:t});var J=Object(X["a"])({state:t});return d()({threadTs:l,channelId:u,channel:p,subscribed:F&&F.subscribed,lastRead:F&&F.lastRead,maxMarkableTs:Object(Zt["a"])(t,u,O),oldest:_,latest:y,timestamps:O,reachedStart:M,reachedEnd:D,prevReachedEnd:x,userHasUnreadThreads:Object(I["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(R["hasUnreadThreads"])(t):Object(P["hasUnreadThreads"])(t),fileId:B,comments:L,startTs:h,highlightTs:m,highlightKey:f,showDragOverlay:Object(A["getShowDragOverlay"])(t),useGlobalNav:Object(Q["b"])(t)},H,{featureReactThreads:Object(I["isFeatureEnabled"])(t,"feature_react_threads"),featureAriaApplicationMode:Object(I["isFeatureEnabled"])(t,"feature_aria_application_mode"),logInfo:V.info,logError:V.error,clogger:J,featureReactAllThreads:Object(I["isFeatureEnabled"])(t,"feature_react_all_threads"),channelIsYou:Object(z["isYou"])(t,p),channelIsMuted:Object(j["isChannelMutedById"])(t,u),channelHasDraft:Object(z["getHasDraft"])(t,u),channelBadgeCount:Object(C["c"])(t,p),focusRequested:Object(A["getFocusRequested"])(t),isChannelUnavailable:Object(z["isUnavailable"])(t,p),unavailableTeamId:Object(z["getUnavailableTeamId"])(t,p),readOnly:Object(z["isReadOnly"])(t,p),featureAnnounceOnly:Object(I["isFeatureEnabled"])(t,"feature_announce_only")})};function la(e){return{requestHistory:function t(){return e(A["requestReplies"].apply(void 0,arguments))},clearHighlight:function t(){return e(A["clearHighlight"].apply(void 0,arguments))},markThread:function t(){return e(N["markThread"].apply(void 0,arguments))},jumpToMessage:function t(){return e(x["a"].apply(void 0,arguments))},setFocusRequestedTs:function t(){return e(D["h"].apply(void 0,arguments))},setFocusRequested:function t(){return e(A["setFocusRequested"].apply(void 0,arguments))},makeMessageSummary:function t(){return e(M["a"].apply(void 0,arguments))},maybeFocusThreadInAllThreads:function t(){return e(H.apply(void 0,arguments))}}}var ca=Object(ve["a"])(sa,{alwaysFetchOnMount:true});var ua=Object(i["connect"])(oa,la)(ca);var da=ua;var pa=a(163);var ha=function e(t,a){if(!t)throw new Error("mountThreadsFlexpane must be called with a teamId parameter");var r=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(pa["a"],null,n.a.createElement(da,null))),a)};var va=ha;var ma=a(44);Object(ma["a"])("interop.mountThreadsFlexpane",va)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(0);var c=a(108);var u=a(567);var d=a(6);var p=a.n(d);var h=a(7);var v=a.n(h);var m=a(8);var f=a.n(m);var b=a(9);var g=a.n(b);var _=a(2);var y=a.n(_);var O=a(2414);var k=a(16);var E=a.n(k);var C=a(85);var j=a(34);var w=a(24);var S=a(199);var I=a(918);var T=a(77);var A=a(17);var N=a(87);var P=a(164);var R=a(10);var M=a(181);var D=a(428);var x=a(565);var F=a(891);var L=a(61);var B=a(1091);var U=a(1540);var q=a(51);var G=a(782);var W=a(1559);var H=a(442);var V=a(138);var K=a(38);var z=a(1793);var Y=a(2400);var Q={comments:l["b"].array,featureFileThreads:l["b"].bool,fileId:l["b"].string};var J={comments:void 0,featureFileThreads:true,fileId:void 0};var Z=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.toggle=a.toggle.bind(a);a.state={expanded:false};return a}v()(t,[{key:"toggle",value:function e(){this.setState(function(e){return{expanded:!e.expanded}})}},{key:"render",value:function e(){var t=this.props,a=t.comments,r=t.featureFileThreads,i=t.fileId;var s=this.state.expanded;if(!r&&!Object(K["a"])())return null;if(Object(_["isEmpty"])(a))return null;var o=a.map(function(e){var t=e.id;return n.a.createElement(W["a"],{key:t,comment:e,fileId:i})});var l=E()("p-comment_list",{"p-comment_list--expanded":s});return n.a.createElement("div",{className:l},n.a.createElement(z["a"],{expanded:s,commentCount:a.length,toggleList:this.toggle}),n.a.createElement("div",{className:"p-comment_list__comments"},o))}}]);return t}(H["a"]);Z.displayName="CommentList";Z.propTypes=Q;Z.defaultProps=J;var X=Object(V["a"])("feature_file_threads")(Z);var $=W["a"];var ee=a(4);var te=a(571);var ae=a(1343);var re=a(1323);var ne=a(506);var ie=a(12);var se=a(100);var oe=a(35);var le=a(139);var ce=a(919);var ue=a(41);var de=a(31);var pe=new R["b"]("file-details");var he={fileId:l["b"].string.isRequired,share:l["b"].shape({sharedTeamIds:l["b"].arrayOf(l["b"].string),teamId:l["b"].string,channelId:l["b"].string,channelName:l["b"].string,isPublic:l["b"].bool,ts:l["b"].string,threadTs:l["b"].string,replyCount:l["b"].number}).isRequired,teamIdForIcon:l["b"].string,teamDomain:l["b"].string,openThread:l["b"].func};var ve={teamIdForIcon:void 0,teamDomain:void 0,openThread:y.a.noop};var me=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onShareClick=a.onShareClick.bind(a);return a}v()(t,[{key:"onShareClick",value:function e(t){var a=this.props,r=a.share,n=a.fileId,i=a.openThread;t.preventDefault();var s=r.threadTs||r.ts;var o=s!==r.ts?r.ts:null;var l="file_details";var c=n;i({channelId:r.channelId,threadTs:s,highlightTs:o,origin:l,originId:c})}},{key:"getReplyCountText",value:function e(t,a,r){var i=t||{},s=i.replyCount,o=i.ts,l=i.threadTs;if(!s)return null;var c="";c=l&&o!==l?pe.t("from a thread"):pe.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:s});return n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"p-file_details__share_metadata_dot"},"\xb7"),n.a.createElement(q["a"],{href:a,onClick:r},n.a.createElement("span",{className:"p-file_details__share_metadata_reply_count"},c)))}},{key:"render",value:function e(){var t=this.props,a=t.share,r=t.teamIdForIcon,i=t.teamDomain;var s=void 0;var o=false;var l=void 0;var c=void 0;if(r){s={id:a.channelId,name:a.channelName,is_channel:true,is_private:!a.isPublic,shared_team_ids:a.sharedTeamIds,team_id:r};o=true}else c=this.onShareClick;i&&(l=Object(ue["constructAbsoluteMsgPermalink"])({teamDomain:i,channelId:a.channelId,ts:a.ts,threadTs:a.threadTs}));return n.a.createElement("div",{className:"p-file_details__share",key:a.channelId+"_"+a.ts},n.a.createElement(q["a"],{href:l,onClick:c,className:"p-file_details__share_channel_link"},n.a.createElement(le["a"],{channel:s,channelId:a.channelId,className:"p-file_details__share_channel",iconProps:{inherit:true},showTeamIconForXwsChannels:o})),n.a.createElement("span",{className:"p-file_details__share_metadata"},n.a.createElement(ce["a"],{timestamp:a.ts,relative:true}),this.getReplyCountText(a,l,c)))}}]);return t}(r["Component"]);me.displayName="FileDetailsShareLocation";me.defaultProps=ve;function fe(e,t){var a=t.share;var r=Object(oe["d"])(e);if(!r)return{};var n=r.id;var i=r.enterprise_id;var s=r.domain;var o=void 0;var l=a.teamId===i&&!y.a.isEmpty(a.sharedTeamIds)&&!y.a.includes(a.sharedTeamIds,n);var c=a.teamId&&a.teamId!==n&&a.teamId!==i;if(l||c){o=y.a.first(a.sharedTeamIds)||a.teamId;var u=Object(oe["j"])(e,[o]);s=Object(de["isExistent"])(u&&u[0])?u[0].domain:null}return{teamIdForIcon:o,teamDomain:s}}var be=Object(i["connect"])(fe,{openThread:se["l"]})(me);var ge=new R["b"]("file-details");var _e={file:N["a"].File(),featureOrgAwareExternalSharedChannels:l["b"].bool};var ye={file:null,featureOrgAwareExternalSharedChannels:false};var Oe=function(e){g()(t,e);function t(){p()(this,t);return f()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}v()(t,[{key:"getFormattedSharesData",value:function e(t){var a=this;var r=[];y.a.forEach(t.public,function(e,t){y.a.forEach(e,function(e){var n=true;var i=a.formatShareData(e,t,n);i&&r.push(i)})});var n=[];y.a.forEach(t.private,function(e,t){y.a.forEach(e,function(e){var n=false;var i=a.formatShareData(e,t,n);i&&r.push(i)})});var i=r.concat(n);return y.a.orderBy(i,"ts","desc")}},{key:"formatShareData",value:function e(t,a,r){var n=this.props.featureOrgAwareExternalSharedChannels;if("0000000000.000000"===t.ts){Object(ie["b"])().warn("Skipping 0000000000.000000 share for "+this.props.file.id);return null}var i=t.reply_count||null;var s=t.reply_users;var o=t.reply_users_count;var l=t.latest_reply||t.ts;var c=n?t.internal_team_ids:t.shared_team_ids;return{channelId:a,replyCount:i,replyUsers:s,replyUsersCount:o,latest:l,ts:t.ts,threadTs:t.thread_ts,channelName:t.channel_name,teamId:t.team_id,sharedTeamIds:c,isPublic:r}}},{key:"render",value:function e(){var t=this.props.file;if("docs"===t.mode)return null;if(!t||!t.shares)return null;var a=t.shares;var r=this.getFormattedSharesData(a);return n.a.createElement("div",{className:"p-file_details__shares"},n.a.createElement("div",{className:"p-file_details__share_divider"},n.a.createElement("span",null,ge.rt("Shared in")),n.a.createElement("hr",null)),r.map(function(e){return n.a.createElement(be,{key:e.ts+"-"+e.channelId,share:e,fileId:t.id})}))}}]);return t}(r["PureComponent"]);Oe.displayName="FileDetailsShares";var ke=Oe;Oe.defaultProps=ye;var Ee=a(921);var Ce=a(28);var je=new R["b"]("file-details");var we={tryAgain:l["b"].func};var Se={tryAgain:_["noop"]};function Ie(e){var t=e.tryAgain;return n.a.createElement("div",{className:"p-file_details__error"},n.a.createElement("p",{className:"p-file_details__error_header"},je.t("Couldn't load file")),n.a.createElement("p",null,je.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,a=e.key;return n.a.createElement(q["a"],{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:a},t)})),n.a.createElement(Ce["d"],{type:"primary",onClick:t},je.t("Try Again")))}Ie.displayName="FileDetailsError";Ie.defaultProps=Se;var Te=a(22);var Ae=new R["b"]("file-details");function Ne(){return n.a.createElement("div",{className:"p-file_details__tombstone"},n.a.createElement("div",{className:"p-file_details__tombstone_icon"},n.a.createElement(Te["b"],{type:"trash",size:"inherit"})),n.a.createElement("p",null,Ae.t("This file was deleted.")))}Ne.displayName="FileDetailsTombstone";var Pe=a(3175);var Re=a(2401);var Me=new R["b"]("file-details");var De={file:N["a"].File(),origin:l["b"].string,do24hrTime:l["b"].bool,fileIsFetching:l["b"].bool,reloadFile:l["b"].func,userId:l["b"].string,botId:l["b"].string,ownerName:l["b"].string,featureReactMemberProfileCard:l["b"].bool,featureOrgAwareExternalSharedChannels:l["b"].bool,clogFileClick:l["b"].func};var xe={file:null,origin:null,do24hrTime:false,fileIsFetching:false,reloadFile:_["noop"],userId:"",botId:"",ownerName:"",featureReactMemberProfileCard:false,featureOrgAwareExternalSharedChannels:false,clogFileClick:_["noop"]};var Fe=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(a,["renderPreview","onNameClick","clogLinkClick","renderBody"]);return a}v()(t,[{key:"onNameClick",value:function e(t){if(Object(D["a"])(t))return;var a=this.props,r=a.userId,n=a.botId,i=a.featureReactMemberProfileCard;if(!r&&!n)return;t.preventDefault();t.persist();if(i)return;n?Object(F["a"])(t,n):Object(x["a"])(t,r)}},{key:"clogLinkClick",value:function e(t){var a=this.props.file;this.props.clogFileClick({file:a,payload:t})}},{key:"isImage",value:function e(){return"image"===Object(T["getFileType"])(this.props.file)}},{key:"renderPreview",value:function e(){return n.a.createElement(re["a"],{file:this.props.file,showActions:false,forceExpanded:true,largeImage:true,clogLinkClick:this.clogLinkClick,channelId:"",ts:""})}},{key:"renderUserNameAndTimestamp",value:function e(){var t=this.props,a=t.file,r=t.do24hrTime,i=t.ownerName,s=t.userId,o=t.botId,l=t.featureReactMemberProfileCard;var c="";Object(T["isFilePublic"])(a)||(c=n.a.createElement("div",{className:"p-file_details__private"},Me.t("Private file")));var u="";u=o?"/services/"+o:"/team/"+s;var d=void 0;d=l?n.a.createElement(ne["a"],{botId:o,userId:s,onClick:this.onNameClick},n.a.createElement(q["a"],{href:u,className:"p-file_details__user_link"},i)):n.a.createElement(q["a"],{href:u,className:"p-file_details__user_link",onClick:this.onNameClick},i);return n.a.createElement("div",{className:"p-file_details__user_meta"},d,o&&n.a.createElement(te["a"],null),n.a.createElement("div",{className:"p-file_details__upload_date"},Me.t("{date} at {time}",{date:Object(P["j"])(a.timestamp),time:Object(P["n"])(a.timestamp,{do24hrTime:r})})),c)}},{key:"renderComments",value:function e(){var t=this.props.file;if(Object(_["isEmpty"])(t.comments))return null;return n.a.createElement("div",{className:"p-file_details__comments"},n.a.createElement("hr",{className:"p-file_details__comment_separator"}),n.a.createElement(X,{comments:t.comments,fileId:t.id}))}},{key:"renderFileDetails",value:function e(){var t=this.props,a=t.file,r=t.fileIsFetching,i=t.reloadFile,s=t.featureOrgAwareExternalSharedChannels;if(r&&(!a||Object(L["d"])(a)&&!Object(L["c"])(a)))return null;if(!a||Object(L["c"])(a))return n.a.createElement(Ie,{tryAgain:i});if(Object(T["isTombstone"])(a))return n.a.createElement(Ne,null);var o=!Object(T["isHiddenByStorageLimit"])(a);var l={};if(this.isImage()){l.maxWidth=(a.thumb_480_w||a.thumb_360_w)+"px";l.maxHeight=(a.thumb_480_h||a.thumb_360_h)+"px"}var c=Object(T["getFileType"])(a);var u="image"===c||"snippet"===c;var d=E()("p-file_details__meta",{"p-file_details__meta--show_filename":u});return n.a.createElement(n.a.Fragment,null,o?n.a.createElement("div",{className:"p-file_details__meta_container","data-qa":"file_details-meta_container"},n.a.createElement("div",{className:d},u?n.a.createElement(B["a"],{file:a,className:"p-file_details__name"}):null,this.renderUserNameAndTimestamp()),n.a.createElement(ae["a"],{file:a,clogLinkClick:this.clogLinkClick,inFileDetails:true})):null,n.a.createElement("div",{className:"p-file_details__preview",style:l},this.renderPreview()),this.renderComments(),n.a.createElement(ke,{file:a,featureOrgAwareExternalSharedChannels:s}))}},{key:"renderBody",value:function e(){var t=this;return n.a.createElement("div",{className:"p-file_flexpane__content"},n.a.createElement(O["a"],null,function(e){var a=e.width,r=e.height;return n.a.createElement(G["b"],{width:a,height:r,fade:true},n.a.createElement("div",{className:"p-file_details"},t.renderFileDetails()))}))}},{key:"render",value:function e(){var t=this.props.origin;var a={member_preview:Me.t("Member"),starred_items:Me.t("Starred Items"),search_results:Me.t("Search Results"),channel_page:Me.t("Channel Details"),group_page:Me.t("Channel Info"),im_page:Me.t("Conversation Details"),mentions:Me.t("Activity")};var r=Me.t("Files");var i=a[t]||r;var s=E()("p-file_flexpane","p-file_flexpane--detail");return n.a.createElement(Ee["a"],{flexOrigin:t,className:s,title:i,renderBody:this.renderBody,viewId:"file-details",kbNavOrder:4.9})}}]);return t}(r["PureComponent"]);Fe.displayName="FileDetails";Fe.defaultProps=xe;var Le=function e(t,a){var r=a.fileId;if(!r)return{};var n=Object(C["getFileById"])(t,r);if(!n)return{};var i=Object(T["getFileEntityId"])(n),s=i.userId,o=i.botId;var l=s?Object(w["d"])(t,s):null;var c=l?Object(A["getBotIdFromMember"])(l):null;var u=o||c;var d="";if(u){var p=Object(S["getBotById"])(t,u);p&&p.name&&(d=p.name)}!d&&l&&(d=Object(A["getPrefCompliantMemberName"])(t,l));d||(d=n.username);return{file:Object(C["getFileById"])(t,r),useGlobalNav:Object(M["b"])(t),do24hrTime:Object(j["f"])(t,"time24"),featureEmailWorkobjectUi:Object(ee["isFeatureEnabled"])(t,"feature_email_workobject_ui"),featureReactMemberProfileCard:Object(ee["isFeatureEnabled"])(t,"feature_react_member_profile_card"),featureOrgAwareExternalSharedChannels:Object(ee["isFeatureEnabled"])(t,"feature_org_aware_external_shared_channels"),userId:s,botId:u,ownerName:d}};var Be={clogFileClick:function e(){return I["a"].apply(void 0,arguments)}};var Ue=Object(i["connect"])(Le,Be)(Fe);var qe=Object(U["a"])(Ue,{alwaysFetchOnMount:true});var Ge=a(26);var We=a.n(Ge);var He=a(760);var Ve=a(1542);var Ke=a(21);var ze=a(537);var Ye=a(1067);var Qe=a(1794);var Je=function e(t,a){var r=a.fileId;return{file:Object(C["getFileById"])(t,r)}};function Ze(e){return Object(i["connect"])(Je)(function(t){if(!t||!t.file)return null;return n.a.createElement(e,t)})}var Xe=a(45);var $e=a(1781);var et=a(290);var tt=a(429);var at=a(289);var rt=new R["b"]("files");var nt={member:l["b"].object,onChange:l["b"].func,searchMembers:l["b"].func.isRequired};var it={member:null,onChange:_["noop"]};var st=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onChange=a.onChange.bind(a);a.state={value:e.member?e.member.id:null,selectedOption:e.member?ot(e.member.id):null};return a}v()(t,[{key:"componentWillReceiveProps",value:function e(t){this.setState(function(){return{value:t.member?t.member.id:null,selectedOption:t.member?ot(t.member.id):null}})}},{key:"onChange",value:function e(t,a){this.setState(function(){return{value:t,selectedOption:{value:t,label:a}}});this.props.onChange(t)}},{key:"render",value:function e(){return n.a.createElement(tt["a"],{className:"p-file_list__select p-file_list__members_select",placeholder:rt.t("Everyone",{fallbackHash:"c756f6af1f03c9ce381cb85934ffb274e2f54af3"}),onChange:this.onChange,value:this.state.value,selectedOption:this.state.selectedOption,optionsFetcher:this.props.searchMembers,optionsRowHeight:30})}}]);return t}(r["PureComponent"]);st.displayName="FilesFlexpaneMembersSelect";st.defaultProps=it;function ot(e){return{value:e,label:n.a.createElement("div",{className:"p-file_list__select__member"},n.a.createElement(at["b"],{id:e,size:"small"}))}}var lt=function e(t){return{searchMembers:function e(a){return t(Object(et["a"])({query:a,options:{entities:{members:{includeSelf:true,onlyLocalTeam:true}},sort:{selfFirst:true},allowEmptyQuery:true}})).then(function(e){return{options:e.map(function(e){return ot(e.id)})}})}}};var ct=Object(i["connect"])(function(e,t){var a=t.userId;return{member:Object(w["d"])(e,a)}},lt)(st);var ut=a(3178);var dt=new R["b"]("files");var pt=Ze(Qe["a"]);var ht={files:l["b"].arrayOf(l["b"].shape({id:l["b"].string,ts:l["b"].number})),filetype:l["b"].string,user:l["b"].string,scrollmark:l["b"].shape({key:l["b"].string,offset:l["b"].number}),fetchFilesPre:l["b"].func,fetchFilesPost:l["b"].func,saveScrollmark:l["b"].func,setFiletype:l["b"].func,setUser:l["b"].func,previewFile:l["b"].func,clogger:l["b"].object.isRequired,useGlobalNav:l["b"].bool,clogFileClick:l["b"].func,isInEnforceFileLimitTreatment:l["b"].bool};var vt={files:[],filetype:"",user:"",scrollmark:void 0,fetchFilesPre:_["noop"],fetchFilesPost:_["noop"],saveScrollmark:_["noop"],setFiletype:_["noop"],setUser:_["noop"],previewFile:_["noop"],useGlobalNav:false,clogFileClick:_["noop"],isInEnforceFileLimitTreatment:false};var mt=function(e){g()(t,e);function t(e){p()(this,t);var a=f()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(a,["onFileClick","onScroll","setListRef","fetchPre","fetchPost","fetchAround","renderRow","renderFile","clogFileClick","clogPricingLinkClick","renderBody"]);a.requestPre=null;a.requestPost=null;a.reachedStart=false;a.reachedEnd=false;a.keys=null;a.list=null;a.layout=new Ye["a"];return a}v()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.scrollmark,r=t.clogger;if(a){var n=a.key,i=a.offset;this.layout.setAnchor(n,i);this.props.saveScrollmark(null)}this.shouldShowStorageWarningBanner()&&r.track(Ke["k"].GROWTH_PRICING,{contexts:{ui_context:{action:Ke["v"].IMPRESSION,step:Ke["z"].FILE_PANE,ui_component:Ke["w"].FILE_STORAGE_LIMIT_BANNER}}})}},{key:"componentWillReceiveProps",value:function e(t){var a=this.props,r=a.filetype,n=a.user;if(t.filetype!==r||t.user!==n){this.requestPre&&this.requestPre.cancel();this.requestPost&&this.requestPost.cancel();this.requestPre=null;this.requestPost=null;this.reachedStart=false;this.reachedEnd=false;this.layout&&this.layout.setAnchor(false)}}},{key:"onFileClick",value:function e(t,a){if(!this.list)return;if(!a)return;var r=this.props.clogger;r.track(Ke["k"].FLEXPANE_FILE_CLICKED,{click_file_id:a.id});this.props.saveScrollmark({key:a.id,offset:this.layout.getOffsetForKey(a.id)-this.list.getScrollTop()});this.props.previewFile({fileId:a.id})}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"setListRef",value:function e(t){this.list=t}},{key:"fetchPre",value:function e(){var t=this;if(this.requestPre)return false;if(this.reachedStart)return false;var a=this.props,r=a.filetype,n=a.user;this.requestPre=this.props.fetchFilesPre({types:r,user:n});return this.requestPre.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.paging;var r=a.page;1===r&&(t.reachedStart=true)}).finally(function(){t.requestPre=null})}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.reachedEnd)return false;var a=this.props,r=a.filetype,n=a.user;this.requestPost=this.props.fetchFilesPost({types:r,user:n});return this.requestPost.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.paging;var r=a.page,n=a.pages;r>=n&&(t.reachedEnd=true)}).finally(function(){t.requestPost=null})}},{key:"fetchAround",value:function e(){if(this.requestPre&&this.requestPost)return false;if(this.reachedEnd)return this.fetchPre();if(this.reachedStart)return this.fetchPost();return this.fetchPre()}},{key:"clogFileClick",value:function e(t,a){this.props.clogFileClick({file:a,payload:t})}},{key:"clogPricingLinkClick",value:function e(){this.props.clogger.track(Ke["k"].GROWTH_PRICING,{contexts:{ui_context:{action:Ke["v"].CLICK,step:Ke["z"].FILE_PANE,ui_element:Ke["y"].PRICING_LINK,ui_component:Ke["w"].FILE_STORAGE_LIMIT_BANNER}}})}},{key:"shouldShowStorageWarningBanner",value:function e(){return this.props.isInEnforceFileLimitTreatment}},{key:"renderRow",value:function e(t){var a=this.keys[t];if(!a)return null;switch(a[0]){case"L":return n.a.createElement("div",{className:"p-file_list__loading"},dt.t("Loading\u2026"));case"P":return n.a.createElement("div",{className:"p-file_list__empty"},dt.t("No matching files were found."));default:return this.renderFile(t)}}},{key:"renderFile",value:function e(t){var a=this.props.files[t]&&this.props.files[t].id;if(!a)return null;var r=t===this.props.files.length-1;var i=E()("p-file_list__file",{"p-file_list__file--last":r});return n.a.createElement(pt,{onClick:this.onFileClick,fileId:a,className:i,clogLinkClick:this.clogFileClick,fullWidth:true,useRowAction:true})}},{key:"renderStorageWarningBanner",value:function e(){var t=this;return n.a.createElement("div",{className:"p-file_flexpane__storage-warning-container"},n.a.createElement("div",{className:"display_flex"},n.a.createElement(Te["b"],{className:"p-message_limit_banner__graphic",type:"eye-closed"}),n.a.createElement("div",null,n.a.createElement("span",null,dt.rt("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit. <a>See paid plans</a>",null,function(e){var a=e.text;return n.a.createElement(q["a"],{href:"/pricing?ui_step="+Ke["z"].FILE_PANE+"&ui_element="+Ke["y"].PRICING_LINK,onClick:t.clogPricingLinkClick,target:"new","data-qa":"file-flexpane__pricing-link"},a)})))))}},{key:"renderBody",value:function e(){var t=this;var a=this.props.files;var r=a.map(function(e){return e.id});this.keys=[].concat(We()(r));this.reachedEnd||this.keys.push("Loading"+this.keys.length);!this.keys.length&&this.reachedStart&&this.reachedEnd&&this.keys.push("Placeholder");return n.a.createElement(n.a.Fragment,null,this.shouldShowStorageWarningBanner()&&this.renderStorageWarningBanner(),n.a.createElement("div",{className:"p-file_list"},n.a.createElement(O["a"],null,function(e){var a=e.width,r=e.height;return n.a.createElement(ze["a"],{width:a,height:r,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.setListRef,loadAround:t.fetchAround,loadPre:t.fetchPre,loadPost:t.fetchPost})})))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.filetype,i=a.useGlobalNav,s=a.user;return n.a.createElement(Ee["a"],{title:dt.t("Files"),className:E()("p-file_flexpane","p-file_flexpane--list"),bodyClassName:"p-file_flexpane__body",renderBody:this.renderBody,renderControls:function e(){return n.a.createElement("div",{className:E()("p-file_list__filters",{"p-file_list__filters--global-nav":i})},n.a.createElement($e["a"],{filetype:r,onChange:t.props.setFiletype}),n.a.createElement(ct,{userId:s,onChange:function e(a){t.props.setUser(a)}}))},viewId:"file-list",kbNavOrder:4.8})}}]);return t}(r["PureComponent"]);mt.displayName="FileList";mt.defaultProps=vt;var ft=function e(t){return{files:Object(He["getFlexpaneFiles"])(t),scrollmark:Object(He["getScrollmark"])(t),filetype:Object(He["getFiletype"])(t),user:Object(He["getUser"])(t),useGlobalNav:Object(M["b"])(t),clogger:Object(Xe["a"])({state:t}),isInEnforceFileLimitTreatment:Object(Ve["a"])(t)}};var bt={fetchFilesPre:function e(){return He["fetchFilesPre"].apply(void 0,arguments)},fetchFilesPost:function e(){return He["fetchFilesPost"].apply(void 0,arguments)},saveScrollmark:function e(){return He["saveScrollmark"].apply(void 0,arguments)},setFiletype:function e(){return He["setFiletype"].apply(void 0,arguments)},setUser:function e(){return He["setUser"].apply(void 0,arguments)},previewFile:function e(){return se["c"].apply(void 0,arguments)},clogFileClick:function e(){return I["a"].apply(void 0,arguments)}};var gt=Object(i["connect"])(ft,bt)(mt);function _t(e){if(e.fileId)return n.a.createElement(qe,e);if(e.list)return n.a.createElement(gt,e);return null}_t.defaultProps={fileId:null,list:false,origin:null};function yt(e){var t=Object(c["g"])(e);var a=Object(c["c"])(e)[0];var r=Object(c["a"])(e);var n=Object(u["a"])(a);return{list:"files"===t&&!n,fileId:"files"===t&&n?a:null,origin:"files"===t?r:null}}var Ot=Object(i["connect"])(yt)(_t);var kt=Ot;var Et=a(163);var Ct=function e(t,a){if(!t)throw new Error("mountFilesFlexpane must be called with a teamId parameter");var r=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(Et["a"],null,n.a.createElement(kt,null))),a)};var jt=Ct;var wt=a(44);Object(wt["a"])("interop.mountFilesFlexpane",jt)},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(27);var c=a(44);var u=a(6);var d=a.n(u);var p=a(7);var h=a.n(p);var v=a(8);var m=a.n(v);var f=a(9);var b=a.n(f);var g=a(0);var _=a(16);var y=a.n(_);var O=a(2);var k=a.n(O);var E=a(28);var C=a(3062);var j={name:g["b"].string,avatar:g["b"].string,onClick:g["b"].oneOfType([g["b"].func,g["b"].string]).isRequired,scrollTop:g["b"].bool};var w={name:"",avatar:"",scrollTop:false};var S=function(e){b()(t,e);function t(){d()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this;var a=y()("p-ent_nav_header",{"p-ent_nav_header__scroll_border":this.props.scrollTop});var r={backgroundImage:"url('"+this.props.avatar+"')"};return n.a.createElement("div",{className:a},n.a.createElement(E["c"],{onClick:function e(){return t.props.onClick()},className:"p-ent_nav_header__org_img",alt:"org avatar",style:r,type:"link"}),n.a.createElement("div",{className:"p-ent_nav_header__org_name"},this.props.name))}}]);return t}(r["PureComponent"]);S.displayName="DashboardNavHeader";S.defaultProps=w;var I=S;var T=I;var A=a(5);var N=a.n(A);var P=a(22);var R=a(3064);var M={isOpen:g["b"].bool,icon:g["b"].string.isRequired,iconColor:g["b"].oneOf(["blue","yellow","red","green","purple"]).isRequired,name:g["b"].string.isRequired,onClick:g["b"].func.isRequired};var D={isOpen:false};var x=function(e){b()(t,e);function t(){d()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t,a=this;var r=y()("p-ent_nav_item_primary","p-ent_nav_item_primary--"+this.props.iconColor,(t={},N()(t,"p-ent_nav_item_primary--expanded_"+this.props.iconColor,this.props.isOpen),N()(t,"p-ent_nav_item_primary--expanded",this.props.isOpen),t));var i="ent-nav-"+Object(O["camelCase"])(this.props.name);return n.a.createElement(E["c"],{onClick:function e(){return a.props.onClick(a.props.name)},className:r,"data-qa":i},n.a.createElement(P["a"],{type:this.props.icon}),n.a.createElement("div",{className:"p-ent_nav_item_primary__header"},this.props.name))}}]);return t}(r["PureComponent"]);x.displayName="DashboardNavItemPrimary";x.defaultProps=D;var F=x;var L=F;var B=a(3066);var U={subItems:g["b"].array.isRequired,animateClose:g["b"].bool};var q={animateClose:false};var G=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderSecondaryItems=a.renderSecondaryItems.bind(a);return a}h()(t,[{key:"renderSecondaryItems",value:function e(){var t=k.a.map(this.props.subItems,function(e){var t=y()("p-ent_nav_item_secondary__item",{"p-ent_nav_item_secondary__item--selected":e.selected});var a="ent-nav-"+k.a.camelCase(e.name);return n.a.createElement(E["c"],{key:e.id,onClick:function t(){return e.onClick(e.id)},className:t,"data-qa":a},e.name," ",n.a.createElement(P["a"],{className:"p-ent_nav_item_secondary__icon",type:e.icon}))});return t}},{key:"render",value:function e(){var t=y()("p-ent_nav_item_secondary__container",{"p-ent_nav_item_secondary__container--collapse":this.props.animateClose});return n.a.createElement("div",{className:t},this.renderSecondaryItems())}}]);return t}(r["PureComponent"]);G.displayName="DashboardNavItemSecondary";G.defaultProps=q;var W=G;var H=W;var V=a(3068);var K={isOpen:g["b"].bool,animateClose:g["b"].bool,icon:g["b"].string.isRequired,iconColor:g["b"].oneOf(["blue","yellow","red","green","purple"]).isRequired,name:g["b"].string.isRequired,onClick:g["b"].func.isRequired,subItems:g["b"].array};var z={isOpen:false,animateClose:false,subItems:null};var Y=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.toggleAnimation=a.toggleAnimation.bind(a);a.shouldAnimateClosed=a.shouldAnimateClosed.bind(a);return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.element;t&&(t.style.maxHeight=k.a.head(t.children).offsetHeight+"px")}},{key:"componentDidUpdate",value:function e(){(this.props.animateClose||this.props.isOpen)&&this.toggleAnimation()}},{key:"toggleAnimation",value:function e(){var t=this.element;if(t){var a=k.a.map(t.children,function(e){return e.offsetHeight});this.props.animateClose&&(t.style.maxHeight=k.a.head(a)+"px");this.props.isOpen&&(t.style.maxHeight=k.a.sum(a)+"px")}}},{key:"shouldAnimateClosed",value:function e(){var t=this.element;if(this.props.animateClose&&t){var a=k.a.head(t.children).offsetHeight;var r=1;var n=a-r;var i=a+r;if(t.style.maxHeight>=n+"px"&&t.style.maxHeight<=i+"px")return false;return true}return false}},{key:"render",value:function e(){var t=this;var a=N()({"p-ent_nav_item--expanded":this.props.isOpen,"p-ent_nav_item--collapse":this.shouldAnimateClosed(),"p-ent_nav_item--sub_items":this.props.subItems&&this.props.isOpen},"p-ent_nav_item--expanded_"+this.props.iconColor,this.props.isOpen||this.shouldAnimateClosed());var r=y()("p-ent_nav_item",a);var i=null;this.props.subItems&&(this.props.isOpen||this.props.animateClose)&&(i=n.a.createElement(H,{subItems:this.props.subItems,animateClose:this.props.animateClose}));return n.a.createElement("div",{ref:function e(a){t.element=a},className:r},n.a.createElement(L,{isOpen:this.props.isOpen,icon:this.props.icon,iconColor:this.props.iconColor,name:this.props.name,onClick:this.props.onClick}),n.a.createElement("div",null,i))}}]);return t}(r["PureComponent"]);Y.displayName="DashboardNavItem";Y.defaultProps=z;var Q=Y;var J=Q;var Z=a(128);var X=a(3070);var $={avatar:g["b"].string,name:g["b"].string,onClick:g["b"].func.isRequired};var ee={name:"",avatar:""};var te=function(e){b()(t,e);function t(){d()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this;var a={backgroundImage:"url('"+this.props.avatar+"')"};return n.a.createElement(Z["a"],{onClick:function e(){return t.props.onClick()},className:"p-ent_nav_user_menu","data-qa":"ent-nav-user_menu","data-popover-trigger":"user_menu"},n.a.createElement("div",{className:"p-ent_nav_user_menu__avatar",alt:"user menu avatar",style:a}),n.a.createElement("div",{className:"p-ent_nav_user_menu__name"},this.props.name),n.a.createElement(P["a"],{type:"chevron-down"}))}}]);return t}(r["PureComponent"]);te.displayName="DashboardNavUserMenu";te.defaultProps=ee;var ae=te;var re=ae;var ne=a(3072);var ie={header:g["b"].shape({name:g["b"].string,avatar:g["b"].string,onClick:g["b"].oneOfType([g["b"].func,g["b"].string]).isRequired,scrollTop:g["b"].bool}).isRequired,navItems:g["b"].arrayOf(g["b"].shape({isOpen:g["b"].bool,toClose:g["b"].bool,icon:g["b"].string.isRequired,iconColor:g["b"].oneOf(["blue","yellow","red","green","purple"]).isRequired,name:g["b"].string.isRequired,onClick:g["b"].func.isRequired,subItems:g["b"].array})).isRequired,userMenu:g["b"].shape({avatar:g["b"].string,name:g["b"].string,onClick:g["b"].func.isRequired}).isRequired};var se=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderNavItems=a.renderNavItems.bind(a);a.makeScrollable=a.makeScrollable.bind(a);a.onWindowResize=a.onWindowResize.bind(a);a.state={scrollTop:false,scrollBottom:false};return a}h()(t,[{key:"componentDidMount",value:function e(){this.makeScrollable();window.addEventListener("resize",this.onWindowResize)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onWindowResize)}},{key:"onWindowResize",value:function e(){this.makeScrollable()}},{key:"makeScrollable",value:function e(){var t=this.element;if(t){var a=t.scrollHeight-t.scrollTop;this.setState(function(){return{scrollTop:0!==t.scrollTop,scrollBottom:!(a===t.offsetHeight)}})}}},{key:"renderNavItems",value:function e(){var t=k.a.map(this.props.navItems,function(e){return n.a.createElement(J,{key:e.id,isOpen:e.isOpen,animateClose:e.animateClose,icon:e.icon,iconColor:e.iconColor,name:e.name,onClick:e.onClick,subItems:e.subItems})});return t}},{key:"render",value:function e(){var t=this;var a=this.props.header,r=a.name,i=a.avatar,s=a.onClick;var o=y()("p-ent_nav_item__wrapper",{"p-ent_nav_item__scroll_border":this.state.scrollBottom});return n.a.createElement("div",{className:"p-ent_nav"},n.a.createElement(T,{name:r,avatar:i,onClick:s,scrollTop:this.state.scrollTop}),n.a.createElement("div",{ref:function e(a){t.element=a},onScroll:this.makeScrollable,className:o},this.renderNavItems()),n.a.createElement(re,{avatar:this.props.userMenu.avatar,name:this.props.userMenu.name,onClick:this.props.userMenu.onClick}))}}]);return t}(r["PureComponent"]);se.displayName="DashboardNav";var oe=se;var le=oe;Object(c["a"])("interop.dashboardNav",{render:function e(t,a,r){if(!t)throw new Error("dashboardNav render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(le,r)),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(88);var l=a.n(o);var c=a(13);var u=a(119);var d=a(27);var p=a(37);var h=a.n(p);var v=a(5);var m=a.n(v);var f=a(26);var b=a.n(f);var g=a(6);var _=a.n(g);var y=a(8);var O=a.n(y);var k=a(7);var E=a.n(k);var C=a(9);var j=a.n(C);var w=a(0);var S=a(16);var I=a.n(S);var T=a(2);var A=a(2374);var N=a(704);var P=a(35);var R=a(24);var M=a(17);var D=a(150);var x=a(48);var F=a(4);var L=a(12);var B=a(34);var U=a(1279);var q=a(132);var G=a(10);var W=a(45);var H=a(258);var V=a(230);var K=a(38);var z=a(435);var Y=a(22);var Q=a(157);var J=a(701);var Z=a(51);var X=a(96);var $=a(444);var ee=a(354);var te=a(1201);var ae=a(1487);var re=a(84);var ne=a(1489);var ie=a(202);var se=a(3096);var oe=new G["b"]("workspace_directory");var le={team:w["b"].shape({admins:w["b"].arrayOf(w["b"].shape({real_name:w["b"].string})),can_leave:w["b"].bool,cannot_leave_reasons:w["b"].array,created:w["b"].number,deleted:w["b"].bool,description:w["b"].string,discoverable:w["b"].string,domain:w["b"].string,enterprise_id:w["b"].string,date_requested_join:w["b"].oneOfType([w["b"].string,w["b"].number]),icon:w["b"].object,id:w["b"].string,is_member:w["b"].bool,joined_date:w["b"].number,name:w["b"].string,user_counts:w["b"].object}).isRequired,callLeaveWorkspace:w["b"].func,onClose:w["b"].func,onActionReject:w["b"].func,onActionResolve:w["b"].func,fetchEnterpriseTeamById:w["b"].func,onLeaveReject:w["b"].func,onLeaveResolve:w["b"].func,onDone:w["b"].func,fetchTeam:w["b"].func,isGuest:w["b"].bool,displayDirectoryInModal:w["b"].bool,channelRedirect:w["b"].string,postLaunchAction:w["b"].string,userIdFromURL:w["b"].string};var ce={callLeaveWorkspace:T["noop"],onClose:T["noop"],onActionResolve:T["noop"],onActionReject:T["noop"],fetchEnterpriseTeamById:T["noop"],onLeaveReject:T["noop"],onLeaveResolve:T["noop"],onDone:T["noop"],fetchTeam:T["noop"],isGuest:false,displayDirectoryInModal:false,channelRedirect:null,postLaunchAction:null,userIdFromURL:null};var ue=function(e){j()(t,e);function t(e){_()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={team:{},loading:false};a.onKeyPress=a.onKeyPress.bind(a);a.onWorkspaceLeave=a.onWorkspaceLeave.bind(a);a.setLoading=a.setLoading.bind(a);return a}E()(t,[{key:"componentDidMount",value:function e(){var t=this.props.team;this.setWorkspace(t);this.fetchWorkspaceInfo()}},{key:"onWorkspaceLeave",value:function e(t){var a=this.props,r=a.team,i=a.onLeaveReject,o=a.onLeaveResolve,l=a.onDone;t.preventDefault();return this.props.callLeaveWorkspace({teamId:r.id}).then(function(){return o({workspace:n()({},r,{is_member:false})})}).then(function(){return l()}).catch(function(e){return i({node:s.a.createElement("span",null,oe.rt("Workspace couldn\u2019t be left. Please reload and try again.")),err:e})})}},{key:"onKeyPress",value:function e(t,a){t.preventDefault();if("Enter"===t.key)switch(a){case"leave":return this.onWorkspaceLeave();default:}return null}},{key:"setWorkspace",value:function e(t,a){this.setState(function(){return{team:t}},a)}},{key:"setLoading",value:function e(t){this.setState(function(){return{loading:t}})}},{key:"getTitleAria",value:function e(){var t=this.state.team.name,a=void 0===t?"":t;if(!a)return"Workspace Name";return a}},{key:"canLeaveWorkspace",value:function e(){var t=this.state.team,a=t.is_member,r=t.can_leave;var n=this.props.isGuest;return a&&r&&!n}},{key:"fetchWorkspaceInfo",value:function e(){var t=this;var a=this.props.team.id;this.setLoading(true);return this.props.fetchEnterpriseTeamById({teamId:a,additionalOptions:{include_admins:true}}).then(function(e){t.setWorkspace(e,function(){return t.setLoading(false)})})}},{key:"listifyAdminRealNames",value:function e(t){var a=Object(T["map"])(t,function(e){return Object(M["getMemberRealName"])(e)});return Object(G["g"])(a,{noEscape:true})}},{key:"renderDialogHeaderCaption",value:function e(t){var a=this.state.loading;if(a)return null;if(!t)return null;return s.a.createElement("span",{className:"p-workspace_directory_dialog__caption"},s.a.createElement(Y["b"],{size:"inherit",type:"exclamation-circle",align:"baseline",className:"margin_right_25"}),t)}},{key:"renderButton",value:function e(){var t=this.props,a=t.onActionReject,r=t.onActionResolve;var n=this.state,i=n.team,o=n.loading;if(o)return null;var l=Object(N["a"])()||Object(K["a"])()&&Object(z["b"])();var c=!l;return s.a.createElement(ne["a"],{team:i,customClasses:"margin_top_100",buttonContext:"dialog",featureZeroWorkspaceOnboarding:true,onActionReject:a,onActionResolve:r,anchorPage:"workspace_directory",tabIndex:"0",size:"medium",doLaunchInNewTab:c,channelRedirect:this.props.channelRedirect,postLaunchAction:this.props.postLaunchAction,userIdFromURL:this.props.userIdFromURL,doUpsertJoin:true})}},{key:"renderDialogHeader",value:function e(t){var a=this.state.team;var r=a.name,n=void 0===r?"":r,i=a.domain,o=void 0===i?"":i;var l=I()("p-workspace_directory_dialog__header",{"p-workspace_directory_dialog__header--mobile":Object(ie["c"])()});return s.a.createElement("div",{className:l},s.a.createElement($["a"],{entityType:"workspace",dimension:100,entityData:a,featureReactMessages:true,featureReactMemberProfileCard:true}),s.a.createElement("div",{className:"p-workspace_directory_dialog__name"},oe.t("{name}",{name:Object(G["o"])(n)})),s.a.createElement("div",{className:"p-workspace_directory_dialog__domain"},oe.t("{domain}.slack.com",{domain:o})),this.renderDialogHeaderCaption(t),this.renderButton())}},{key:"renderInfiniteSpinner",value:function e(){return s.a.createElement("div",{className:"overflow_hidden margin_100"},s.a.createElement(X["a"],{size:"jumbo",className:"inline_block full_width"}))}},{key:"renderDialogBody",value:function e(){if(this.state.loading)return this.renderInfiniteSpinner();var t=this.state.team,a=t.description,r=t.admins,n=t.user_counts;var i=[];a&&i.push({heading:oe.t("About"),text:a,key:"dialog-description"});i.push({heading:oe.t("Active members"),text:oe.t("{activeMembers}",{activeMembers:Object(G["l"])(Object(T["get"])(n,"active_members",0))}),key:"dialog-active-members"},{heading:oe.t("Workspace admins"),text:this.listifyAdminRealNames(r),key:"dialog-admins"});var o=function e(t){return s.a.createElement("div",{key:t.key},s.a.createElement("p",{className:"margin_bottom_25 bold"},t.heading),s.a.createElement("p",null,t.text))};return s.a.createElement("div",{className:"p-workspace_directory_dialog__body"},i.map(function(e){return o(e)}))}},{key:"renderDialogFooter",value:function e(){var t=this;return s.a.createElement("span",{className:"p-workspace_directory_dialog__leave",role:"button",tabIndex:"0",onClick:this.onWorkspaceLeave,onKeyPress:function e(a){return t.onKeyPress(a,"leave")}},oe.t("Leave this workspace"))}},{key:"renderDialogOnMobile",value:function e(t){var a=this.canLeaveWorkspace();return s.a.createElement(ee["a"],{showCancelButton:false,showCloseButton:false,showGoButton:false,position:"fixed",modalBodyClasses:"p-workspace_directory_dialog--mobile"},this.renderDialogHeader(t),s.a.createElement("div",{className:"p-workspace_directory_dialog__contents--mobile"},this.renderDialogBody(),a&&this.renderDialogFooter()))}},{key:"render",value:function e(){var t=this.state.team;var a=Object(ie["f"])(t,{context:"dialog"});if(Object(ie["c"])())return this.renderDialogOnMobile(a);var r=this.props.displayDirectoryInModal;var i=I()("p-workspace_directory_dialog",{"p-workspace_directory_dialog--focus_ring":!r});var o={contentLabel:a,className:i,showCloseButton:true,showCancelButton:false,showGoButton:false,showHeader:true,title:this.renderDialogHeader(a),titleAria:this.getTitleAria(),useSlackScrollbar:false,showFooter:false,shouldCloseOnOverlayClick:true};this.canLeaveWorkspace()&&(o=n()({},o,{showFooter:true,footerText:this.renderDialogFooter()}));return s.a.createElement(re["a"],o,this.renderDialogBody())}}]);return t}(i["Component"]);ue.displayName="WorkspaceDirectoryDialog";ue.defaultProps=ce;var de={callLeaveWorkspace:H["d"],fetchEnterpriseTeamById:H["k"]};var pe=Object(c["connect"])(null,de)(ue);var he=pe;var ve=a(1171);var me=a(778);var fe=a(3098);var be={workspaces:w["b"].array.isRequired,scrollElement:w["b"].any,onScroll:w["b"].func,renderWorkspaceCard:w["b"].func,topOffset:w["b"].number};var ge={scrollElement:window,onScroll:T["noop"],renderWorkspaceCard:T["noop"],topOffset:0};var _e=function(e){j()(t,e);E()(t,null,[{key:"getUpdatedRowIndex",value:function e(t){var a=t.currentRow,r=void 0===a?0:a,n=t.prevColumns,i=void 0===n?0:n,s=t.updatedColumns,o=void 0===s?0:s;if(!r)return 0;if(i===o)return r;var l=r*i;return Math.floor(l/o)}}]);function t(e){_()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(T["bindAll"])(a,["onScroll","onResize","setListRef","getListKeys","renderRow","renderCell"]);a.state={columns:3};a.list=null;a.keys=[];a.rowsByIndex=[];a.currentRow=0;return a}E()(t,[{key:"componentDidMount",value:function e(){window.addEventListener("resize",this.onResize);this.calculateColumns()}},{key:"componentDidUpdate",value:function e(a,r){if(this.state.columns!==r.columns){var n=t.getUpdatedRowIndex({currentRow:this.currentRow,prevColumns:r.columns,updatedColumns:this.state.columns});this.currentRow=n;var i=this.getKeyForRow(n);this.keys.length&&this.list.scrollToKey(i)}}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onScroll",value:function e(t){return this.props.onScroll(t)}},{key:"onResize",value:function e(){var t=this.list.getVisibleRange(),a=t.start;this.currentRow=a||0;this.calculateColumns()}},{key:"getListKeys",value:function e(){return this.keys}},{key:"getContentHeight",value:function e(){return this.list.getContentHeight()}},{key:"getKeyForRow",value:function e(t){return this.keys[t]}},{key:"setListRef",value:function e(t){this.list=t}},{key:"setColumns",value:function e(t){this.setState(function(){return{columns:t}})}},{key:"getWorkspacesByRowIndex",value:function e(t){var a=this.state.columns;var r=this.props.workspaces;var n=this.rowsByIndex[t];var i=Math.min(n+a,r.length);return Object(T["range"])(n,i)}},{key:"calculateColumns",value:function e(){var t=window.innerWidth;var a=3;a=Object(ie["c"])(t)?1:Object(ie["d"])(t)?2:3;this.state.columns!==a&&this.setColumns(a)}},{key:"renderCell",value:function e(t){var a=this.props,r=a.workspaces,n=a.renderWorkspaceCard;var i=r[t];if(!i)return null;return s.a.createElement("div",{className:"p-workspace_grid_list__cell",key:"grid_list_cell_"+t},n(i))}},{key:"renderRow",value:function e(t){var a=this;var r=this.getWorkspacesByRowIndex(t);var n=I()("p-workspace_grid_list__row",{"p-workspace_grid_list__row--one_column":1===this.state.columns});return s.a.createElement("div",{className:n},r.map(function(e){return a.renderCell(e)}))}},{key:"render",value:function e(){var t=this.props,a=t.topOffset,r=t.scrollElement,i=h()(t,["topOffset","scrollElement"]);this.rowsByIndex=Object(T["range"])(0,this.props.workspaces.length,this.state.columns);this.keys=this.rowsByIndex.map(function(e){return e.toString()});return s.a.createElement(me["a"],n()({keys:this.getListKeys(),rowRenderer:this.renderRow,ref:this.setListRef,scrollElement:this.props.scrollElement,onScroll:this.onScroll,topOffset:this.props.topOffset},i))}}]);return t}(i["PureComponent"]);_e.displayName="WorkspaceGridList";_e.defaultProps=ge;var ye=_e;var Oe=ye;var ke=a(28);var Ee=a(536);var Ce=a(66);var je=a(1363);var we=a(3100);var Se=new G["b"]("workspace_directory");var Ie={enterprise:w["b"].shape({icon:w["b"].object,id:w["b"].string,name:w["b"].string}).isRequired,user:w["b"].shape({id:w["b"].string,is_admin:w["b"].bool,is_owner:w["b"].bool,is_primary_owner:w["b"].bool,profile:w["b"].object}).isRequired,displayManageOrgButton:w["b"].bool,displaySearchBar:w["b"].bool,isMobileView:w["b"].bool,signoutUrl:w["b"].string.isRequired,prefCompliantMemberName:w["b"].string,organizationUrl:w["b"].string,selectedSearchOption:w["b"].object,onOptionSelected:w["b"].func,onClearHeaderInput:w["b"].func};var Te={isMobileView:false,displayManageOrgButton:false,displaySearchBar:false,prefCompliantMemberName:"",organizationUrl:"",selectedSearchOption:{},onOptionSelected:T["noop"],onClearHeaderInput:T["noop"]};var Ae=function(e){j()(t,e);function t(e){_()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(T["bindAll"])(a,["maybeRenderSearchBar","onSelectOption","onMenuItemSelected","renderUserMenu","renderUserSettings"]);return a}E()(t,[{key:"onSelectOption",value:function e(t){this.props.onOptionSelected(t)}},{key:"onMenuItemSelected",value:function e(t){var a=this.props.signoutUrl;var r=window.location.origin+"/account/settings";switch(t){case"settings":window.open(r,"_self");break;case"signout":window.open(a,"_self");break;default:}return null}},{key:"maybeRenderManageOrganizationButton",value:function e(){if(!this.props.displayManageOrgButton)return null;var t=Se.t("Manage Organization",{fallbackHash:"35677e6e3c1751d4a193cc6db0f31a75016c019f"});return s.a.createElement(ke["d"],{"data-qa":"ws_directory_manage_org_button",className:"p-workspace_directory_header__manage_org no_underline nudge_bottom_1",type:"outline",href:"/manage",target:"_blank",tabIndex:"0"},t)}},{key:"maybeRenderSearchBar",value:function e(){var t=this.props.selectedSearchOption;if(!this.props.displaySearchBar||this.props.isMobileView)return null;return s.a.createElement("div",{className:"p-workspace_directory_header__search","data-qa":"ws_directory_search_bar"},s.a.createElement(ve["a"],{prepopulatedOption:t,featureZeroWorkspaceOnboarding:true,membersOnly:false,containerIdSelector:"directory_mount_point",triggerAction:this.onSelectOption,onClearInput:this.props.onClearHeaderInput}))}},{key:"renderUserSettings",value:function e(){return s.a.createElement("div",{className:"p-workspace_directory_header__settings"},this.maybeRenderManageOrganizationButton(),this.renderAvatar())}},{key:"renderUserMenu",value:function e(t){var a=this;var r=this.props,i=r.prefCompliantMemberName,o=r.enterprise,l=r.signoutUrl;var c=function e(){return s.a.createElement(Ce["b"],{key:"workspace_directory_user_menu_name",label:s.a.createElement("span",{className:"black"},i),description:Se.t("Account settings",{fallbackHash:"e32707613d1f53b92e6162cc5ddb4a9bb58a2ec6"}),href:"/account/settings",onSelected:function e(){return a.onMenuItemSelected("settings")},className:"no_underline",role:"link"})};var u=function e(){return s.a.createElement(Ce["b"],{key:"workspace_directory_user_menu_sign_out",label:Se.t("Sign out of {orgName}",{orgName:Object(G["o"])(o.name)}),href:l,onSelected:function e(){return a.onMenuItemSelected("signout")},className:"no_underline",danger:true,role:"link"})};return s.a.createElement(Ce["f"],n()({},t,{menuClassNames:"p-workspace_directory_header__menu","data-qa":"ws_directory_user_menu"}),c(),s.a.createElement(Ce["d"],null),u())}},{key:"renderAvatar",value:function e(){var t=this.props.user;return s.a.createElement(Ce["e"],{"data-qa":"ws_directory_user_menu_trigger",renderMenu:this.renderUserMenu,position:"bottom-right",offsetX:0,offsetY:7.5},s.a.createElement(ke["c"],{"aria-haspopup":true,className:"p-workspace_directory_header__user_icon",tabIndex:"0"},s.a.createElement($["a"],{entityType:"member",dimension:36,entityData:t,customClasses:"flex_none cursor_pointer",featureReactMessages:true})))}},{key:"render",value:function e(){var t=this.props,a=t.enterprise,r=t.isMobileView,n=t.organizationUrl;var i=r?Se.t("Directory"):Se.t("Workspace Directory");return s.a.createElement(je["a"],{"data-qa":"ws_directory_header",title:i,team:a,isEnterprise:true,logoAriaLabel:"Slack",logoLink:n,renderRightContents:this.renderUserSettings,renderCenterContents:this.maybeRenderSearchBar})}}]);return t}(i["Component"]);Ae.displayName="WorkspaceDirectoryHeader";Ae.defaultProps=Te;var Ne=function e(t,a){var r=a.user,n=a.enterprise,i=void 0===n?{}:n;return{signoutUrl:Object(F["getFromBootData"])(t,"signout_url"),prefCompliantMemberName:Object(M["getPrefCompliantMemberName"])(t,r),organizationUrl:Object(Ee["a"])(t,i.domain)}};var Pe=Object(c["connect"])(Ne)(Ae);var Re=Pe;var Me=a(3102);var De={title:w["b"].node,description:w["b"].node,showCloseButton:w["b"].bool,onClose:w["b"].func,className:w["b"].string,isHidden:w["b"].bool};var xe={title:"",description:"",showCloseButton:false,onClose:T["noop"],className:"",isHidden:true};var Fe=function(e){j()(t,e);function t(e){_()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClose=a.onClose.bind(a);a.onKeyPress=a.onKeyPress.bind(a);return a}E()(t,[{key:"onClose",value:function e(t){this.props.onClose(t)}},{key:"onKeyPress",value:function e(t){t.preventDefault();if(13===t.which)return this.props.onClose(t);return null}},{key:"renderCloseButton",value:function e(){var t=this.props.isHidden;return s.a.createElement(ke["c"],{tabIndex:t?-1:0,className:"p-workspace_directory_banner__close_btn",onClick:this.onClose,onKeyPress:this.onKeyPress},s.a.createElement(Y["b"],{type:"times"}))}},{key:"renderBannerText",value:function e(){var t=this.props,a=t.title,r=t.description;return s.a.createElement("div",{className:"p-workspace_directory_banner__text"},s.a.createElement("div",{className:"p-workspace_directory_banner__title"},a),s.a.createElement("span",{className:"p-workspace_directory_banner__description"},r))}},{key:"render",value:function e(){var t=this.props,a=t.showCloseButton,r=t.className;var n=I()("p-workspace_directory_banner",r);return s.a.createElement("div",{className:n},this.renderBannerText(),a&&this.renderCloseButton())}}]);return t}(i["PureComponent"]);Fe.displayName="WorkspaceDirectoryBanner";Fe.defaultProps=xe;var Le=Fe;var Be=Le;var Ue=a(2398);var qe=new G["b"]("workspace_directory");var Ge={enterprise:w["b"].shape({id:w["b"].string,name:w["b"].string,domain:w["b"].string,icon:w["b"].object,locale:w["b"].string}).isRequired,user:w["b"].shape({id:w["b"].string,name:w["b"].string,is_admin:w["b"].bool,is_owner:w["b"].bool,profile:w["b"].object}),fetchDirectoryWorkspaces:w["b"].func.isRequired,fetchEnterpriseTeamById:w["b"].func.isRequired,enqueueToast:w["b"].func,fetchRawMembersFromAPI:w["b"].func.isRequired,openModal:w["b"].func,closeModal:w["b"].func,allowWorkspaceRequest:w["b"].bool,showRequestDialog:w["b"].func,launchTeamId:w["b"].string,displayDirectoryInModal:w["b"].bool,onClose:w["b"].func,hasSeenOnboardingBanner:w["b"].bool,queryString:w["b"].object,setUserPrefByApi:w["b"].func,clogger:w["b"].object.isRequired};var We={user:{},enqueueToast:T["noop"],openModal:T["noop"],closeModal:T["noop"],allowWorkspaceRequest:false,showRequestDialog:T["noop"],launchTeamId:null,displayDirectoryInModal:true,onClose:T["noop"],hasSeenOnboardingBanner:false,queryString:null,setUserPrefByApi:T["noop"]};var He=300;var Ve=Object(L["b"])();var Ke=function(e){j()(t,e);E()(t,null,[{key:"sortListByWorkspaceName",value:function e(t){return Object(T["sortBy"])(t,function(e){return e.name})}}]);function t(e){_()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isMobileView:false,hasScrolledPastHeaderPane:false,allWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},yourWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},dialogWorkspaceDetail:null,selectedOption:null,hideOnboardingBanner:true,viewingHiddenWorkspace:false};a.dialog=null;a.headerPaneHeight=null;a.clientHeight=null;a.page=null;a.pageSearch=null;a.listRefs={allWorkspaces:null,yourWorkspaces:null};a.windowScroller=null;a.onboardingBannerHeight=0;a.trackingCode="";Object(T["bindAll"])(a,["setPageRef","setPageSearchRef","setHeaderPaneRef","setOnboardingBannerRef","onScroll","onWindowScrollerScroll","onFullscreenModalClose","onResize","openWorkspaceRequestForm","openDialog","closeDialog","onOnboardingBannerDismiss","onWorkspaceLeave","onActionResolve","onActionReject","onSelectOption","onClearHeaderInput","setToastText","setListRef","setWindowScrollerRef","renderWorkspaceCard","fetchSingleMemberToPrepopulate"]);return a}E()(t,[{key:"componentDidMount",value:function e(){this.setIsMobileView(Object(ie["c"])());window.addEventListener("resize",this.onResize);this.clientHeight=window.innerHeight;this.setLoadingWorkspaces("allWorkspaces",true);this.setLoadingWorkspaces("yourWorkspaces",true);if(this.props.launchTeamId){this.trackingCode="workspace_url";this.fetchTeam(this.props.launchTeamId)}var t=this.props.hasSeenOnboardingBanner;this.setHideOnboardingBanner(t);Object(ie["m"])({trackingCode:this.trackingCode,clogger:this.props.clogger});var a=this.props.queryString&&Object(T["get"])(this.props.queryString,"user",null);a&&this.fetchSingleMemberToPrepopulate(a)}},{key:"componentDidUpdate",value:function e(t,a){this.headerPane&&(this.headerPaneHeight=this.headerPane.clientHeight);var r=this.getListHeight("yourWorkspaces");r!==this.state.allWorkspaces.topOffset&&this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:r});this.props.hasSeenOnboardingBanner||!this.onboardingBanner||this.onboardingBannerHeight||(this.onboardingBannerHeight=Object(o["findDOMNode"])(this.onboardingBanner).clientHeight);!a.hideOnboardingBanner&&this.state.hideOnboardingBanner&&this.windowScroller.updatePosition();a.selectedOption!==this.state.selectedOption&&this.fetchSearchResults();this.maybeFetchNextPage(a)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function e(){this.clientHeight=window.innerHeight;this.setIsMobileView(Object(ie["c"])());var t=this.getListHeight("yourWorkspaces");this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:t})}},{key:"onScroll",value:function e(t){var a=t.currentTarget.scrollTop;var r=a>=this.headerPaneHeight;r&&this.pageSearch.getWrappedInstance().blur();r!==this.state.hasScrolledPastHeaderPane&&this.setHasScrolledPastHeaderPane(r)}},{key:"onWindowScrollerScroll",value:function e(t){var a=t.scrollTop;this.doInfiniteScrollHandler({scrollTop:a})}},{key:"onFullscreenModalClose",value:function e(){this.dialog&&this.dialog.close();this.props.onClose&&this.props.onClose()}},{key:"onSearchAgainButtonClick",value:function e(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().onSearchAgainTriggered()}},{key:"onOnboardingBannerDismiss",value:function e(){this.setHideOnboardingBanner(true);this.props.setUserPrefByApi({pref:"seen_onboarding_banner",value:true}).catch(function(e){return Ve.error("Error setting seen_onboarding_banner user pref",e)})}},{key:"onActionReject",value:function e(t){var a=t.node,r=t.err;a&&this.setToastText(a);Ve.error("Error with Workspace Action in WorkspaceDirectory - ",r)}},{key:"onActionResolve",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.node,r=t.workspace;if(r)if(r.member){this.onWorkspaceJoin({workspace:r});if(this.props.displayDirectoryInModal)return this.onFullscreenModalClose()}else r.date_requested_join&&this.onWorkspaceRequested({workspace:r});a&&this.setToastText(a);return this.closeDialog()}},{key:"onWorkspaceRequested",value:function e(t){var a=t.workspace;if(!a)return;this.setState(function(e){var t=[].concat(b()(e.allWorkspaces.workspaces));var r=Object(T["findIndex"])(t,function(e){return e.id===a.id});if(r<0)return null;t[r]=a;var i={allWorkspaces:n()({},e.allWorkspaces,{workspaces:t})};return i})}},{key:"onWorkspaceJoin",value:function e(a){var r=this;var i=a.workspace;this.setState(function(e){var a=r.maybeUpsertWorkspaceToSearchResults(e,i);var s=e.yourWorkspaces.workspaces;var o=Object(T["unionBy"])([i],s,"id");var l=e.yourWorkspaces.totalWorkspaces+1;var c={yourWorkspaces:n()({},e.yourWorkspaces,{workspaces:t.sortListByWorkspaceName(o),totalWorkspaces:l}),searchResults:n()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(a)})};return c})}},{key:"onWorkspaceLeave",value:function e(a){var r=this;var i=a.workspace;this.setState(function(e){var a=r.maybeUpsertWorkspaceToSearchResults(e,i);var s=e.yourWorkspaces.workspaces;var o=Object(T["filter"])(s,function(e){return e.id!==i.id});var l=e.yourWorkspaces.totalWorkspaces-1;var c=e.allWorkspaces.workspaces;var u=Object(T["unionBy"])([i],c,"id");var d={yourWorkspaces:n()({},e.yourWorkspaces,{workspaces:o,totalWorkspaces:l}),allWorkspaces:n()({},e.allWorkspaces,{workspaces:t.sortListByWorkspaceName(u)}),searchResults:n()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(a)})};return d},function(){r.closeDialog()})}},{key:"onSelectOption",value:function e(t){this.setSearchResultsOptions(t)}},{key:"onClearHeaderInput",value:function e(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().clearInput()}},{key:"getListHeight",value:function e(t){return this.listRefs[t]?this.listRefs[t].getContentHeight():0}},{key:"setPageRef",value:function e(t){this.page=t}},{key:"setPageSearchRef",value:function e(t){this.pageSearch=t}},{key:"setHeaderPaneRef",value:function e(t){this.headerPane=t}},{key:"setOnboardingBannerRef",value:function e(t){this.onboardingBanner=t}},{key:"setListRef",value:function e(t){var a=t.workspaceListKey,r=t.ref;this.listRefs[a]=r}},{key:"setWindowScrollerRef",value:function e(t){this.windowScroller=t}},{key:"setListTopOffset",value:function e(t){var a=t.workspaceListKey,r=t.topOffset;this.setState(function(e){return m()({},a,n()({},e[a],{topOffset:r}))})}},{key:"setSearchResultsOptions",value:function e(t){this.setState(function(){return{searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:false,topOffset:0},selectedOption:t}})}},{key:"setIsMobileView",value:function e(t){this.setState(function(){return{isMobileView:t}})}},{key:"setViewingHiddenWorkspace",value:function e(t){this.setState(function(){return{viewingHiddenWorkspace:t}})}},{key:"setHasScrolledPastHeaderPane",value:function e(t){this.setState(function(){return{hasScrolledPastHeaderPane:t}})}},{key:"setHasApiError",value:function e(t,a){this.setState(function(e){return m()({},t,n()({},e[t],{hasApiError:a}))})}},{key:"setLoadingWorkspaces",value:function e(t,a){this.setState(function(e){return m()({},t,n()({},e[t],{loadingWorkspaces:a}))})}},{key:"setDialogWorkspaceDetail",value:function e(t,a){this.setState(function(){return{dialogWorkspaceDetail:t}},a)}},{key:"setWorkspaceFetchOptions",value:function e(t,a){var r=a.workspaces,i=void 0===r?[]:r,s=a.totalWorkspaces,o=void 0===s?0:s,l=a.onWorkspaces,c=void 0!==l&&l,u=a.nextCursorMark,d=void 0===u?null:u;this.setState(function(e){return m()({},t,n()({},e[t],{workspaces:i,totalWorkspaces:o,onWorkspaces:c,nextCursorMark:d}))})}},{key:"setHideOnboardingBanner",value:function e(t){this.setState(function(){return{hideOnboardingBanner:t}})}},{key:"setToastText",value:function e(t){this.props.enqueueToast({element:s.a.createElement(Q["b"],{position:"bottom-right",offsetY:50},t)})}},{key:"getWorkspaceListTopOffset",value:function e(t){return this.state[t]?this.state[t].topOffset:0}},{key:"getListHeading",value:function e(t){var a=this.state.selectedOption;if("allWorkspaces"===t){var r=this.state.allWorkspaces.totalWorkspaces;var n=this.state.yourWorkspaces.totalWorkspaces;return qe.t("Browse {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{numWorkspaces:Math.max(r-n,0)})}if("yourWorkspaces"===t)return qe.t("Your Workspaces");if("searchResults"===t){var i=this.state.searchResults,o=i.loadingWorkspaces,l=i.totalWorkspaces;var c=Object(T["get"])(a,"selectedOptionData");if(o)return null;if("member"===Object(T["get"])(a,"type")){var u=Object(M["getMemberRealName"])(c);var d=qe.t("{memberName} is in {workspaceCount, plural, =1 {# workspace} other {# workspaces}}",{memberName:u,workspaceCount:l});return s.a.createElement(s.a.Fragment,null,s.a.createElement($["a"],{entityType:"member",dimension:28,entityData:c,customClasses:"margin_right_75",featureReactMessages:true,featureReactMemberProfileCard:false}),d)}if("workspace"===Object(T["get"])(a,"type")&&0===l)return qe.t("No workspaces found matching \u201c{searchQuery}\u201d",{searchQuery:"SEARCH QUERY"});if((!Object(T["get"])(a,"type")||c.id===ie["b"])&&l>0)return qe.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{searchQuery}\u201d",{workspaceCount:l,searchQuery:Object(T["get"])(c,"displayValue")});if("workspace"===Object(T["get"])(a,"type")&&l>0)return qe.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{workspaceName}\u201d",{workspaceCount:l,workspaceName:Object(T["get"])(a,"selectedOptionData.name")})}return""}},{key:"getWorkspacesForList",value:function e(t){if("allWorkspaces"===t){var a=this.state.allWorkspaces.workspaces;var r=this.state.yourWorkspaces.workspaces;return Object(T["differenceBy"])(a,r,"id")}if("yourWorkspaces"===t)return this.state.yourWorkspaces.workspaces;if("searchResults"===t)return this.state.searchResults.workspaces;return[]}},{key:"maybeUpsertWorkspaceToSearchResults",value:function e(t,a){var r=Object(T["get"])(t.searchResults,"workspaces",[]);var n=Object(T["find"])(r,function(e){return a.id===e.id});return n?Object(T["unionBy"])([a],r,"id"):r}},{key:"openWorkspaceRequestForm",value:function e(){var t=this;var a=this.props.showRequestDialog;return a({displayModernToast:function e(a){var r=a.type,n=a.errorType,i=a.teamName;var o=Object(ie["g"])({type:r,errorType:n,teamName:i});t.setToastText(s.a.createElement("div",{className:"display_flex"},"success"===r&&s.a.createElement(Y["b"],{type:"check-circle-o",className:"margin_right_50 sk_seafoam_green"}),s.a.createElement("span",null,o)))}})}},{key:"maybeFetchNextPage",value:function e(t){!t.allWorkspaces.loadingWorkspaces&&this.state.allWorkspaces.loadingWorkspaces&&this.fetchWorkspaces();!t.yourWorkspaces.loadingWorkspaces&&this.state.yourWorkspaces.loadingWorkspaces&&this.fetchWorkspacesWithArgs({id:this.props.user.id,type:"single_user"})}},{key:"fetchSearchResults",value:function e(){var t=this.state.selectedOption,a=t.selectedOptionData,r=t.type;var n={};if(!a)return;this.setLoadingWorkspaces("searchResults",true);if(Object(T["get"])(a,"id")===ie["b"])n.searchTerm=a.displayValue;else{n.id=a.id;n.type="member"===r?"single_user":"single_workspace"}Object(ie["j"])({searchType:r,clogger:this.props.clogger});this.fetchWorkspacesWithArgs(n)}},{key:"fetchSingleMemberToPrepopulate",value:function e(t){var a=this;this.props.fetchRawMembersFromAPI({ids:[t]}).then(function(e){var t={selectedOption:{selectedOptionData:e.members[0],type:"member"}};a.setState(t)})}},{key:"openDialog",value:function e(t){var a=this;var r=t.team;this.props.displayDirectoryInModal||window.history.replaceState({},"","/workspace/"+r.id);Object(ie["n"])({teamId:r.id,trackingCode:this.trackingCode,clogger:this.props.clogger});this.setDialogWorkspaceDetail(r,function(){a.dialog=a.props.openModal({element:a.renderDialog(),isStackable:true,name:"find-more-workspaces-info"})})}},{key:"closeDialog",value:function e(){this.props.displayDirectoryInModal||window.history.replaceState({},"","/")}},{key:"fetchWorkspacesWithArgs",value:function e(t){var a=t.type,r=t.id,n=t.searchTerm;var i=this.props.user.id;var s=this.state.selectedOption;var o=Object(T["isEmpty"])(s);var l=r===i&&o?"yourWorkspaces":"searchResults";return this.fetchWorkspaces({workspaceListKey:l,additionalOptions:{type:a,id:r,searchTerm:n}})}},{key:"fetchTeam",value:function e(t){var a=this;return this.props.fetchEnterpriseTeamById({teamId:t}).then(function(e){a.setSearchResultsOptions({selectedOptionData:e,type:"workspace"});a.openDialog({team:e})}).catch(function(e){a.setViewingHiddenWorkspace(true);Ve.error("Error fetching workspace detail for launch_team_id -",e)})}},{key:"fetchWorkspaces",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.additionalOptions,i=a.workspaceListKey,s=void 0===i?"allWorkspaces":i;var o=this.state[s].nextCursorMark;this.setHasApiError(s,false);return this.props.fetchDirectoryWorkspaces(n()({nextCursorMark:o},r)).then(function(e){var a=e.num_found,r=e.on_workspaces,n=e.items;var i=n;o&&(i=Object(T["unionBy"])(t.state[s].workspaces,i,"id"));t.setWorkspaceFetchOptions(s,{workspaces:i,totalWorkspaces:a,onWorkspaces:r,nextCursorMark:e.next_cursor_mark});t.setLoadingWorkspaces(s,false)}).catch(function(e){t.setHasApiError(s,true);t.setLoadingWorkspaces(s,false);Ve.error("WorkspaceDirectory: Error in FetchWorkspaces -",e)})}},{key:"hasFetchedAllWorkspaces",value:function e(t){return this.state[t].workspaces.length>=this.state[t].totalWorkspaces}},{key:"hasScrolledWithinScrollThreshold",value:function e(t){var a=t.scrollHeight,r=t.scrollTop;return a-(r+this.clientHeight)<He}},{key:"doInfiniteScrollHandler",value:function e(t){var a=t.scrollTop;var r=this.hasFetchedAllWorkspaces("yourWorkspaces")?"allWorkspaces":"yourWorkspaces";var n=this.getListHeight("yourWorkspaces");"allWorkspaces"===r&&(n+=this.getListHeight("allWorkspaces"));var i=this.hasScrolledWithinScrollThreshold({scrollTop:a,scrollHeight:n});i&&!this.hasFetchedAllWorkspaces(r)?this.setLoadingWorkspaces(r,true):!i&&this.hasFetchedAllWorkspaces(r)&&this.setLoadingWorkspaces(r,false)}},{key:"renderDialog",value:function e(){var t=this.state,a=t.dialogWorkspaceDetail,r=t.displayDirectoryInModal;var n=this.props.user;var i=Object(T["get"])(this.props.queryString,"channel",null);var o=Object(T["get"])(this.props.queryString,"action",null);var l=Object(T["get"])(this.props.queryString,"user",null);var c=Object(M["isGuest"])(n);return s.a.createElement(he,{team:a,displayDirectoryInModal:r,onClose:this.closeDialog,featureZeroWorkspaceOnboarding:true,onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,onLeaveResolve:this.onWorkspaceLeave,onLeaveReject:this.onActionReject,isGuest:c,channelRedirect:i,postLaunchAction:o,userIdFromURL:l})}},{key:"renderInfiniteSpinner",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.renderFullPage;var r=I()("p-workspace_directory__spinner",{"p-workspace_directory__spinner--fs":!!a});return s.a.createElement("div",{className:r},s.a.createElement(X["a"],{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderWorkspaceCard",value:function e(t){if(Object(T["isEmpty"])(t))return null;var a=Object(N["a"])()||Object(K["a"])()&&Object(z["b"])();var r=!a;return s.a.createElement(ae["a"],{team:t,key:t.id,size:"small",onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,openDialog:this.openDialog,anchorPage:"workspace_directory",doLaunchInNewTab:r,doUpsertJoin:true})}},{key:"renderTitle",value:function e(){var t=this.props.enterprise.name;return s.a.createElement("div",{className:"p-workspace_directory__title"},qe.t("Workspaces at {name}",{name:Object(G["o"])(t)}))}},{key:"renderWorkspaceSearchInput",value:function e(){var t=this.state.selectedOption;return s.a.createElement("div",{className:"p-workspace_directory__search"},s.a.createElement(ve["a"],{containerIdSelector:"workspace_directory",ref:this.setPageSearchRef,membersOnly:false,triggerAction:this.onSelectOption,prepopulatedOption:Object(T["get"])(t,"selectedOptionData")}))}},{key:"renderWorkspaceDirectoryHeaderPane",value:function e(){var t=this.props,a=t.displayDirectoryInModal,r=t.user;var n=I()("p-workspace_directory__header_pane",{margin_top_75:a});return s.a.createElement("div",{className:n,"data-js":"workspace_directory_header_pane",ref:this.setHeaderPaneRef},!a&&this.renderTitle(),!Object(M["isGuest"])(r)&&this.renderWorkspaceSearchInput())}},{key:"renderListHeading",value:function e(t){return s.a.createElement("p",{className:"p-workspace_directory__list_title"},t)}},{key:"renderYourWorkspaces",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"yourWorkspaces"})}},{key:"renderAllWorkspaces",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"allWorkspaces"})}},{key:"renderSearchResults",value:function e(t){return this.renderList({listProps:t,workspaceListKey:"searchResults"})}},{key:"renderList",value:function e(t){var a=this;var r=t.listProps,i=t.workspaceListKey;var o=this.getWorkspacesForList(i);var l=this.state[i].loadingWorkspaces;if("searchResults"===i&&Object(T["isEmpty"])(o)&&!l)return this.renderSearchEmptyState();if(Object(T["isEmpty"])(o)&&!l)return null;var c=this.getWorkspaceListTopOffset(i);var u=this.getListHeading(i);return s.a.createElement(s.a.Fragment,null,this.renderListHeading(u),s.a.createElement("div",{className:"p-workspace_directory__list"},s.a.createElement(Oe,n()({scrollElement:this.page,workspaces:o,renderWorkspaceCard:this.renderWorkspaceCard,topOffset:c,ref:function e(t){return a.setListRef({workspaceListKey:i,ref:t})}},r))),l&&this.renderInfiniteSpinner())}},{key:"renderSearchEmptyState",value:function e(){var t=this;var a=this.state,r=a.searchResults,n=a.selectedOption;var i=Object(T["get"])(n,"selectedOptionData");var o=void 0;var l=void 0;if(Object(ie["h"])(i)){var c=Object(T["get"])(r,"totalWorkspaces");var u=Object(T["get"])(r,"onWorkspaces");var d=Object(M["getMemberRealName"])(i);if(Object(te["c"])({totalWorkspaces:c,onWorkspaces:u})&&!Object(te["b"])({totalWorkspaces:c,onWorkspaces:u})){o=qe.t("{memberName} hasn\u2019t joined any workspaces",{memberName:d});l=qe.rt("Try <a>searching for someone else</a> on your team, or for a specific workspace",null,function(e){var a=e.text,r=e.key,n=e.tag;if("a"===n)return s.a.createElement(Z["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:r},a);return{text:a}})}if(Object(te["b"])({totalWorkspaces:c,onWorkspaces:u})){o=qe.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:d});l=qe.rt("Get in touch with {memberName} to be invited to a workspace they\u2019re in, or try <a>searching for someone else</a> on your team.",{memberName:d},function(e){var a=e.text,r=e.key,n=e.tag;if("a"===n)return s.a.createElement(Z["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:r},a);return{text:a}})}return s.a.createElement("div",{className:"align_center"},s.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},s.a.createElement($["a"],{entityType:"member",dimension:28,entityData:i,customClasses:"margin_right_75",featureReactMessages:true,featureReactMemberProfileCard:false}),o),s.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},l))}o=qe.t("No workspaces found matching \u201c{searchTerm}\u201d",{searchTerm:Object(T["get"])(i,"displayValue")});l=qe.rt("Try <a>searching for another workspace</a> or searching for a teammate\u2019s workspaces.",null,function(e){var a=e.text,r=e.key,n=e.tag;if("a"===n)return s.a.createElement(Z["a"],{onClick:function e(){return t.onSearchAgainButtonClick()},key:r},a);return{text:a}});return s.a.createElement("div",{className:"align_center"},s.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},o),s.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},l))}},{key:"renderOnboardingBanner",value:function e(){var t=this.props.hasSeenOnboardingBanner;if(t)return null;var a=this.state.hideOnboardingBanner;var r=I()("p-workspace_directory__banner","p-workspace_directory__banner--onboarding",{"p-workspace_directory__banner--hidden":a});var n=qe.t("Workspaces are where you and your teammates communicate and get work done. To get started, find your team\u2019s workspace.");return s.a.createElement(Be,{title:qe.t("What is a workspace?"),description:n,className:r,onClose:this.onOnboardingBannerDismiss,isHidden:a,showCloseButton:true,ref:this.setOnboardingBannerRef})}},{key:"renderWorkspaceRequestBanner",value:function e(){var t=this;var a=this.props.allowWorkspaceRequest;if(!a)return null;var r=qe.rt("Your team might not be using Slack yet. You may ask your admins to <Link>create a new workspace</Link>.",null,function(e){var a=e.text;return s.a.createElement(Z["a"],{onClick:t.openWorkspaceRequestForm},a)});return s.a.createElement(Be,{title:qe.t("Can\u2019t find your workspace?"),description:r,className:"p-workspace_directory__banner p-workspace_directory__banner--workspace_request",onClose:T["noop"]})}},{key:"renderDirectoryLists",value:function e(t){var a=this.state.selectedOption;var r=t.onChildScroll,i=t.registerChild,o=h()(t,["onChildScroll","registerChild"]);var l=n()({onScroll:r,scrollElement:this.page},o);var c=!!Object(T["get"])(a,"selectedOptionData");if(c)return s.a.createElement("div",{ref:i},this.renderSearchResults(l));return s.a.createElement("div",{ref:i},this.renderYourWorkspaces(l),this.renderAllWorkspaces(l))}},{key:"renderWorkspaceDirectoryBody",value:function e(){var t=this;var a=this.state,r=a.searchResults,n=a.hideOnboardingBanner;var i=I()("p-workspace_directory__body",{"p-workspace_directory__body--has_banner":!n});var o={};this.onboardingBannerHeight&&!n&&(o.transform="translate3d(0, "+this.onboardingBannerHeight+"px, 0)");if(!this.page)return null;return s.a.createElement(s.a.Fragment,null,this.renderOnboardingBanner(),s.a.createElement("div",{"data-js":"workspace_directory_body",className:i,style:o},s.a.createElement(A["a"],{scrollElement:this.page,onScroll:this.onWindowScrollerScroll,ref:this.setWindowScrollerRef},function(e){return t.renderDirectoryLists(e)}),!Object(T["get"])(r,"loadingWorkspaces")&&this.renderWorkspaceRequestBanner()))}},{key:"renderEmptyState",value:function e(t){var a=this.props.enterprise;return s.a.createElement("div",{className:"p-workspace_directory__empty_state_container"},s.a.createElement(tt,n()({enterprise:a},t)))}},{key:"renderDirectoryPage",value:function e(){var t=this.props.user;var a=this.state.viewingHiddenWorkspace;var r=this.state.allWorkspaces,n=r.workspaces,i=r.loadingWorkspaces;var o=this.state.yourWorkspaces,l=o.workspaces,c=o.loadingWorkspaces;var u=!c&&Object(T["isEmpty"])(l);var d=!i&&Object(T["isEmpty"])(n);if(u&&Object(M["isGuest"])(t))return this.renderEmptyState({isZeroWorkspaceGuest:true});if(d&&u)return this.renderEmptyState({isZeroWorkspaceOrg:true});if(a)return this.renderEmptyState({isHiddenWorkspace:true});return s.a.createElement("div",{className:"p-workspace_directory",id:"workspace_directory"},this.renderWorkspaceDirectoryHeaderPane(),this.renderWorkspaceDirectoryBody())}},{key:"renderWorkspaceDirectoryHeader",value:function e(){var t=this.props,a=t.user,r=t.enterprise;var n=this.state,i=n.isMobileView,o=n.hasScrolledPastHeaderPane,l=n.selectedOption;var c=a.is_admin||a.is_owner;return s.a.createElement(Re,{enterprise:r,displayManageOrgButton:c,displaySearchBar:this.headerPane&&o,"data-js":"workspace_directory_sticky_header",user:a,isMobileView:i,selectedSearchOption:Object(T["get"])(l,"selectedOptionData"),onOptionSelected:this.onSelectOption,onClearHeaderInput:this.onClearHeaderInput})}},{key:"renderDirectoryInModal",value:function e(){var t=this.props.enterprise;var a=I()("p-workspace_directory__page","p-workspace_directory__page--modal_view");return s.a.createElement(ee["a"],{onCancel:this.onFullscreenModalClose,showCancelButton:false,showGoButton:false,title:qe.t("Workspaces at {orgName}",{orgName:t.name}),position:"fixed",modalBodyClasses:"p-workspace_directory__modal_body",modalClasses:"p-workspace_directory_modal",fullBleedModalBodyContent:true,withHeader:true},s.a.createElement("div",{className:a,onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()))}},{key:"render",value:function e(){var t=this.props.displayDirectoryInModal;var a=this.state.allWorkspaces,r=a.workspaces,n=a.loadingWorkspaces;var i=this.state.yourWorkspaces,o=i.workspaces,l=i.loadingWorkspaces;var c=l&&Object(T["isEmpty"])(o);var u=n&&Object(T["isEmpty"])(r);var d=c||u;if(t)return this.renderDirectoryInModal();return s.a.createElement("div",{className:"p-workspace_directory__wrapper"},this.renderWorkspaceDirectoryHeader(),d&&this.renderInfiniteSpinner({renderFullPage:true}),s.a.createElement("div",{className:"p-workspace_directory__page",onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()),s.a.createElement(J["a"],null))}}]);return t}(i["Component"]);Ke.displayName="WorkspaceDirectory";Ke.defaultProps=We;var ze=function e(t,a){var r=a.userId;var i=Object(P["g"])(t)||{};var s=Object(R["d"])(t,r);var o=Object(U["a"])(t,"enterprise_team_creation_request");var l=o&&o.is_enabled&&!Object(M["isGuest"])(s);var c=Object(F["isClientApp"])(t);var u=Object(B["f"])(t,"seen_onboarding_banner");var d=Object(W["a"])({state:t});return{enterprise:i,user:n()({id:r},s),allowWorkspaceRequest:l,displayDirectoryInModal:c,hasSeenOnboardingBanner:u,clogger:d}};var Ye={enqueueToast:D["enqueueToast"],openModal:x["openModal"],closeModal:x["closeModal"],fetchRawMembersFromAPI:V["g"],setUserPrefByApi:q["c"],fetchEnterpriseTeamById:H["k"],fetchDirectoryWorkspaces:H["j"]};var Qe=Object(c["connect"])(ze,Ye)(Ke);var Je=new G["b"]("workspace_directory");var Ze={enterprise:w["b"].shape({id:w["b"].string,name:w["b"].string,domain:w["b"].string,icon:w["b"].object,locale:w["b"].string}).isRequired,isZeroWorkspaceGuest:w["b"].bool,isZeroWorkspaceOrg:w["b"].bool,isHiddenWorkspace:w["b"].bool,directoryUrl:w["b"].string};var Xe={isZeroWorkspaceGuest:false,isZeroWorkspaceOrg:false,isHiddenWorkspace:false,directoryUrl:void 0};var $e=function(e){j()(t,e);function t(e){_()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.redirectToDirectory=a.redirectToDirectory.bind(a);return a}E()(t,[{key:"redirectToDirectory",value:function e(){var t=this.props.directoryUrl;window.open(t+"/signin/find-workspaces","_self")}},{key:"renderHeading",value:function e(){var t=this.props,a=t.enterprise,r=t.isHiddenWorkspace;var n=r?Je.t("No workspace found"):Je.t("No available workspaces");return s.a.createElement("span",{className:"p-workspace_directory_empty_state__heading"},s.a.createElement("span",{className:"p-workspace_directory_empty_state__icon"},s.a.createElement($["a"],{entityType:"org",dimension:28,entityData:a,customClasses:"flex_none",featureReactMessages:true})),n)}},{key:"renderZeroWorkspaceGuestBody",value:function e(){var t=this.props.enterprise;return s.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},Je.t("You have a guest account with {orgName}, which means someone needs to invite you to join a workspace. You may want to get in touch with the person who helped you create an account.",{orgName:Object(G["o"])(t.name)}))}},{key:"renderZeroWorkspaceOrgBody",value:function e(){var t=this.props.enterprise;return s.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},Je.t("{orgName} doesn\u2019t have any open workspaces that you can join. If you need to be added to a workspace, contact your manager or the {orgName} IT team.",{orgName:Object(G["o"])(t.name)}))}},{key:"renderHiddenWorkspaceBody",value:function e(){var t=this.props.enterprise;return s.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},Je.t("Either this workspace doesn\u2019t exist, or you do not have access to it. If you need to be added to a workspace, contact the {orgName} IT team.",{orgName:Object(G["o"])(t.name)}))}},{key:"renderBody",value:function e(){var t=this.props,a=t.isZeroWorkspaceGuest,r=t.isZeroWorkspaceOrg,n=t.isHiddenWorkspace;if(a)return this.renderZeroWorkspaceGuestBody();if(r)return this.renderZeroWorkspaceOrgBody();if(n)return this.renderHiddenWorkspaceBody();return null}},{key:"renderFooter",value:function e(){var t=this.props.enterprise;return s.a.createElement(Z["a"],{onClick:this.redirectToDirectory,className:"p-workspace_directory_empty_state__footer"},Je.t("View all {orgName} workspaces",{orgName:Object(G["o"])(t.name)}),s.a.createElement(Y["b"],{type:"chevron-right",key:"footer-chevron-icon",inline:true}))}},{key:"render",value:function e(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"p-workspace_directory_empty_state"},this.renderHeading(),this.renderBody()),this.props.isHiddenWorkspace&&this.renderFooter())}}]);return t}(i["PureComponent"]);$e.displayName="WorkspaceDirectoryEmptyState";$e.defaultProps=Xe;var et=function e(t,a){var r=a.enterprise;return{directoryUrl:Object(Ee["a"])(t,r.domain)}};var tt=Object(c["connect"])(et)($e);var at=Qe;var rt=a(163);var nt=function e(t,a,r){if(!t)throw new Error("mountWorkspaceDirectory must be called with a teamId parameter");var i=Object(d["d"])(t);var o=n()({},r,{onClose:function e(){return l.a.unmountComponentAtNode(a)}});Object(u["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(rt["a"],null,s.a.createElement(at,o))),a)};var it=function e(t){l.a.unmountComponentAtNode(t)};var st={mountWorkspaceDirectory:nt,unmountWorkspaceDirectory:it};var ot=a(44);Object(ot["a"])("interop.mountWorkspaceDirectory",nt);Object(ot["a"])("interop.unmountWorkspaceDirectory",it)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(0);var c=a(29);var u=a(25);var d=Object(u["a"])("Fetches org retention settings",function(e,t,a){return e(Object(c["a"])({method:"mc.enterprise.retention.get",args:{enterprise:a}}))});d.propTypes=l["b"].string.isRequired;var p=Object(u["a"])("Submits retention request to API",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.type,n=a.requestData;return e(Object(c["a"])({method:"newRequest"===r?"mc.enterprise.retention.requestChange":"mc.enterprise.retention.cancelRequest",args:n}))});p.propTypes={type:l["b"].string.isRequired,requestData:l["b"].object};var h=a(281);var v=a(5);var m=a.n(v);var f=a(3);var b=a.n(f);var g=a(6);var _=a.n(g);var y=a(7);var O=a.n(y);var k=a(8);var E=a.n(k);var C=a(9);var j=a.n(C);var w=a(2);var S=a.n(w);var I=a(10);var T=a(138);var A=a(16);var N=a.n(A);var P=a(22);var R=a(772);var M=new I["b"]("policy-retention");function D(e){return{channels:M.t("Channel Retention"),private_channels:M.t("Private Channel Retention"),dms:M.t("Direct Message Retention"),allow_override:e?M.t("Member & Admin Override"):M.t("Direct Message and Private Channel Override"),files:M.t("File Retention")}}function x(e){return{channels:[{value:4,label:e?M.t("No org-wide policy \u2014 Workspace Owners can set their own settings for their workspace"):M.t("No policy; teams can modify their own retention settings")},{value:0,label:e?M.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):M.t("Retain all messages")},{value:1,label:e?M.t("Keep all messages, including revision history"):M.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?M.t("Delete messages and their revisions after a set number of days"):M.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?M.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):M.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],private_channels:[{value:4,label:e?M.t("No org-wide policy \u2014 Workspace Owners can set their own settings for their workspace"):M.t("No policy; teams can modify their own retention settings")},{value:0,label:e?M.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):M.t("Retain all messages")},{value:1,label:e?M.t("Keep all messages, including revision history"):M.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?M.t("Delete messages and their revisions after a set number of days"):M.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?M.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):M.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],dms:[{value:0,label:e?M.t("Keep all messages, but don\u2019t track revisions (i.e. edits and deletions)"):M.t("Retain all messages")},{value:1,label:e?M.t("Keep all messages, including revision history"):M.t("Retain all messages AND retain edit/deletion logs for all messages")},{value:2,label:e?M.t("Delete messages and their revisions after a set number of days"):M.t("Retain all messages and logs for only a specific number of days"),showDuration:true},{value:3,label:e?M.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)"):M.t("Retain all messages for only a specific number of days (but keep logs for compliance exports)"),showDuration:true}],allow_override:[{value:4,label:e?M.t("No org-wide policy \u2014 Workspace Owners can set the override policy for their workspace"):M.t("No policy; teams can set their own override policy")},{value:0,label:e?M.t("Don\u2019t allow channel and DM overrides"):M.t("Don\u2019t allow team members to override team-wide retention policies for DMs and private channels")},{value:1,label:e?M.t("Always allow channel and DM overrides"):M.t("Allow team members to override team-wide retention policies for DMs and private channels")}],files:[{value:0,label:e?M.t("Keep files"):M.t("Retain all files")},{value:1,label:e?M.t("Keep files, but only for a set number of days"):M.t("Retain all files for only a specific number of days"),showDuration:true}]}}function F(e){var t=e.policyType,a=e.featureGdprExports;var r=D(a);return r[t]}function L(e){var t=e.policyType,a=e.featureGdprExports;var r=x(a);return r[t]}function B(e){return S.a.includes(["channels","private_channels","allow_override"],e)}function U(e){var t=e.policyType,a=e.retentionType,r=e.featureGdprExports;var n=L({policyType:t,featureGdprExports:r});return S.a.get(S.a.find(n,function(e){return e.value===a}),"showDuration",false)}function q(e){var t=e.policyType,a=e.retentionType,r=e.policyDurationValue,n=e.featureGdprExports;if(S.a.isUndefined(t)||S.a.isUndefined(a))return"";var i=U({policyType:t,retentionType:a,featureGdprExports:n});var s=i?r:0;if(0===S.a.parseInt(s)||4===S.a.parseInt(a)){var o=L({policyType:t,featureGdprExports:n});var l=S.a.find(o,function(e){return e.value===a}),c=l.label;return c}if("files"===t)return n?M.t("Keep files for {policyDurationValue} days",{policyDurationValue:r}):M.t("Retain all files for only {policyDurationValue} days",{policyDurationValue:r});switch(S.a.parseInt(a)){case 2:return n?M.t("Delete messages and their revisions after {policyDurationValue} days",{policyDurationValue:r}):M.t("Retain all messages and logs for only {policyDurationValue} days",{policyDurationValue:r});case 3:return n?M.t("Delete messages & revisions after set number of days (History still accessible via Corporate Export)",{policyDurationValue:r}):M.t("Retain all messages for only {policyDurationValue} days (but keep logs for compliance exports)",{policyDurationValue:r});default:return""}}function G(e){var t=e.policyType,a=e.settingValues,r=e.featureGdprExports;var n=a.retention_type;if(4===n){if("allow_override"===t)return{retention_type:1,is_locked:false};return{retention_type:0,retention_duration:0,is_locked:false}}var i=b()({},a,{is_locked:true});if(!U({policyType:t,retentionType:n,featureGdprExports:r}))return b()({},i,{retention_duration:0});return i}var W=new I["b"]("policy-retention");var H={orgName:l["b"].string.isRequired,requesterName:l["b"].string.isRequired,onConfirm:l["b"].func.isRequired,onCancel:l["b"].func.isRequired,requestedPolicies:l["b"].object,currentPolicies:l["b"].object,requestDate:l["b"].string,cancelRequest:l["b"].bool,featureGdprExports:l["b"].bool.isRequired};var V={cancelRequest:false,requestDate:"",currentPolicies:{},requestedPolicies:{}};var K=function(e){j()(t,e);function t(e){_()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClickCloseOrCancelButton=a.onClickCloseOrCancelButton.bind(a);a.onClickSubmitButton=a.onClickSubmitButton.bind(a);return a}O()(t,[{key:"onClickCloseOrCancelButton",value:function e(){this.props.onCancel()}},{key:"onClickSubmitButton",value:function e(){this.props.onConfirm()}},{key:"buildRequestModalContent",value:function e(){var t=this.props,a=t.requesterName,r=t.orgName;return n.a.createElement("div",null,n.a.createElement("div",{className:"p-org_retention_request__modal_sectionp-org_retention_request__modal_section--lead"},n.a.createElement("p",{className:"p-org_retention_request--font_bump"},n.a.createElement("strong",null,a,"\u2019s")," ","requested changes are listed below. Once you\u2019ve clicked"," ",n.a.createElement("strong",null,"Confirm with Customer"),", a Slackbot message will be sent to the Primary Org Owner of ",r," to confirm the change."),n.a.createElement("p",null,n.a.createElement("strong",null,"Your name will be included with this request."))),n.a.createElement("div",null,this.renderRequestedPolicies()))}},{key:"buildCancelModalContent",value:function e(){var t=Object(R["a"])(this.props.requestDate,{omitTime:true,dateFormat:"MMMM Do, YYYY"});return n.a.createElement("div",null,n.a.createElement("h2",{className:"margin_bottom_150"},W.t("Are you sure you\u2019d like to cancel the retention policy update request?")),n.a.createElement("div",{className:"p-org_retention_request--font_bump margin_bottom_300"},"Once you\u2019ve clicked ",n.a.createElement("strong",null,"Confirm Cancellation"),", Slackbot mark the approval request sent to ",this.props.orgName," on",n.a.createElement("strong",null,t)," as expired."))}},{key:"renderRequestedPolicies",value:function e(){var t=this;var a=this.props.featureGdprExports;return S.a.map(this.props.requestedPolicies,function(e,r){var i=e.retention_type,s=e.retention_duration,o=e.is_locked;var l=0!==i&&"allow_override"!==r||o?i:4;var c=S.a.get(t.props.currentPolicies,r);var u=c.retention_type,d=c.retention_duration,p=c.is_locked;var h=0!==u&&"allow_override"!==r||p?u:4;return n.a.createElement("div",{key:r,className:"p-org_retention_request__modal_section"},n.a.createElement("div",{className:"bold margin_bottom_50 p-org_retention_request--font_bump"},F({policyType:r,featureGdprExports:a})),n.a.createElement("div",null,n.a.createElement("div",{className:"bold"}," ","\ud83d\udc49\ud83c\udffe"," ",n.a.createElement("span",{className:"margin_left_50"},W.t("New:")," ",q({policyType:r,retentionType:l,policyDurationValue:s,featureGdprExports:a}))),n.a.createElement("div",null," ","\ud83d\udc74\ud83c\udffb"," ",n.a.createElement("span",{className:"margin_left_50"},W.t("Old:")," ",q({policyType:r,retentionType:h,policyDurationValue:d,featureGdprExports:a})))))})}},{key:"render",value:function e(){var t=this.props.cancelRequest?"":W.t("Ready to confirm with {orgName}?",{orgName:this.props.orgName});var a=this.props.cancelRequest?this.buildCancelModalContent():this.buildRequestModalContent();var r=this.props.cancelRequest?W.t("Confirm Cancellation"):W.t("Confirm with Customer");var i=N()("btn",{btn_danger:this.props.cancelRequest});return n.a.createElement("div",{className:"c-modal c-modal--active"},n.a.createElement("div",{className:"c-modal__background"}),n.a.createElement("div",{className:"c-modal__contents c-modal__contents--active p-org_retention_request__modal"},n.a.createElement(P["a"],{type:"times",onClick:this.onClickCloseOrCancelButton,className:"c-modal__close"}),n.a.createElement("div",{className:"c-modal__header"},n.a.createElement("h2",{className:"margin_bottom_0"},t)),n.a.createElement("div",{className:"c-modal__body p-org_retention_request__modal_content"},a,n.a.createElement("div",{className:"margin_bottom_400"},n.a.createElement("button",{type:"button",className:"btn btn_outline margin_right_75",onClick:this.onClickCloseOrCancelButton},W.t("Cancel")),n.a.createElement("button",{type:"button",className:i,onClick:this.onClickSubmitButton},r)))))}}]);return t}(n.a.PureComponent);K.displayName="PolicyRequestModal";K.defaultProps=V;var z=Object(T["a"])("feature_gdpr_exports")(K);var Y=a(95);var Q=new I["b"]("policy-retention");var J=function e(t){var a=Object(R["a"])(t.requestTimestamp,{omitTime:true,dateFormat:"MMMM Do, YYYY"});var r=Q.t("{requesterName} requested the following policy updates on {displayDate}",{requesterName:t.requesterName,displayDate:a});var i=Q.t("If you need to modify this request, please cancel it and initiate a new one. ");return n.a.createElement("div",{className:"alert alert_info p-org_retention_request--font_bump padding_top_150 padding_bottom_150 margin_bottom_200"},n.a.createElement("ts-icon",{class:"ts_icon_info_circle"}),n.a.createElement("strong",null,r),n.a.createElement("p",{className:"no_margin"},i))};J.displayName="PendingRequestAlert";var Z=Object(Y["pure"])(J);var X=new I["b"]("policy-retention");var $={users:l["b"].object.isRequired,onUpdateUserSelection:l["b"].func,currentSelectionValue:l["b"].string,isFormPending:l["b"].bool};var ee={onUpdateUserSelection:S.a.noop,currentSelectionValue:"",isFormPending:false};var te=function(e){j()(t,e);function t(e){_()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onOptionSelection=a.onOptionSelection.bind(a);return a}O()(t,[{key:"onOptionSelection",value:function e(t){var a=t.target[t.target.selectedIndex].getAttribute("data-name");this.props.onUpdateUserSelection({id:t.target.value,name:a})}},{key:"renderOptions",value:function e(){return S.a.map(this.props.users,function(e){return n.a.createElement("option",{value:e.id,key:e.id,"data-name":e.name},e.name)})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_bottom_200"},n.a.createElement("label",{htmlFor:"policy-requester"},X.t("Requester")),n.a.createElement("div",{className:"p-org_retention_request__select_wrapper"},n.a.createElement("select",{value:this.props.currentSelectionValue,onChange:this.onOptionSelection,disabled:this.props.isFormPending,className:"p-org_retention_request__select",id:"policy-requester"},n.a.createElement("option",{value:"",disabled:true},X.t("Choose an Organization Owner")),this.renderOptions())))}}]);return t}(n.a.Component);te.displayName="RequesterSelect";te.defaultProps=ee;var ae=te;var re=new I["b"]("policy-retention");var ne={onUpdateUserInput:l["b"].func,currentUserValue:l["b"].string,placeholder:l["b"].string,isDisabled:l["b"].bool};var ie={onUpdateUserInput:S.a.noop,currentUserValue:"",placeholder:"",isDisabled:false};var se=function(e){j()(t,e);function t(e){_()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onUpdateInput=a.onUpdateInput.bind(a);return a}O()(t,[{key:"onUpdateInput",value:function e(t){this.props.onUpdateUserInput(t.target.value)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_bottom_200"},n.a.createElement("label",{htmlFor:"mc-user"},re.t("Your Full Name")),n.a.createElement("div",{className:"p-org_retention_request__requester_input",id:"mc-user"},n.a.createElement("input",{type:"text",value:this.props.currentUserValue,placeholder:this.props.placeholder,onChange:this.onUpdateInput,disabled:this.props.isDisabled?"disabled":""})))}}]);return t}(n.a.Component);se.displayName="McUserInput";se.defaultProps=ie;var oe=se;var le=new I["b"]("policy-retention");var ce={options:l["b"].array.isRequired,onUpdatePolicySelection:l["b"].func,currentSelectionValue:l["b"].number,currentDurationValue:l["b"].oneOfType([l["b"].string,l["b"].number]),isDeactivated:l["b"].bool};var ue={onUpdatePolicySelection:S.a.noop,currentSelectionValue:0,currentDurationValue:0,isDeactivated:false};var de=function(e){j()(t,e);function t(e){_()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onTextInput=a.onTextInput.bind(a);a.onOptionSelection=a.onOptionSelection.bind(a);return a}O()(t,[{key:"onOptionSelection",value:function e(t){var a=t.target.value;var r=4!==S.a.parseInt(a);this.props.onUpdatePolicySelection({retention_type:S.a.parseInt(a),is_locked:r})}},{key:"onTextInput",value:function e(t){var a=S.a.parseInt(t.target.value)||"";this.props.onUpdatePolicySelection({retention_duration:a})}},{key:"maybeRenderDuration",value:function e(){var t=this;var a=S.a.find(this.props.options,function(e){return e.value===S.a.parseInt(t.props.currentSelectionValue)}),r=a.showDuration;if(r)return n.a.createElement("div",{className:"p-org_retention_request__duration_group "},n.a.createElement("span",{className:"p-org_retention_request__duration_label"},le.t("Duration")),n.a.createElement("input",{className:"p-org_retention_request__duration_input",type:"text",value:this.props.currentDurationValue,onChange:this.onTextInput,disabled:this.props.isDeactivated}),n.a.createElement("span",{className:"p-org_retention_request__duration_label--secondary margin_left_50"},"days"));return null}},{key:"renderOptions",value:function e(){return S.a.map(this.props.options,function(e){return n.a.createElement("option",{value:e.value,key:e.value},e.label)})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_retention_request__policy_select_group"},n.a.createElement("div",{className:"p-org_retention_request__select_wrapper margin_right_150"},n.a.createElement("select",{value:this.props.currentSelectionValue,onChange:this.onOptionSelection,disabled:this.props.isDeactivated,className:"p-org_retention_request__select margin_right_200"},this.renderOptions())),this.maybeRenderDuration())}}]);return t}(n.a.Component);de.displayName="PolicySelect";de.defaultProps=ue;var pe=de;var he=new I["b"]("policy-retention");var ve={displaySettings:l["b"].shape({is_locked:l["b"].bool,retention_duration:l["b"].oneOfType([l["b"].string,l["b"].number]),retention_type:l["b"].number}).isRequired,policyType:l["b"].oneOf(["channels","private_channels","dms","allow_override","files"]).isRequired,policyLabel:l["b"].string.isRequired,currentSettings:l["b"].shape({is_locked:l["b"].bool,retention_duration:l["b"].number,retention_type:l["b"].number}),onUpdatePolicy:l["b"].func,pendingSettings:l["b"].shape({is_locked:l["b"].bool,retention_duration:l["b"].number,retention_type:l["b"].number}),isFormPending:l["b"].bool,featureGdprExports:l["b"].bool.isRequired};var me={pendingSettings:{},currentSettings:{},onUpdatePolicy:S.a.noop,isFormPending:false};var fe=function(e){j()(t,e);function t(e){_()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onUpdatePolicy=a.onUpdatePolicy.bind(a);return a}O()(t,[{key:"onUpdatePolicy",value:function e(t){this.props.onUpdatePolicy({data:t,policyType:this.props.policyType})}},{key:"maybeRenderCurrentPolicyText",value:function e(){var t=this.props,a=t.featureGdprExports,r=t.policyType;if(!S.a.isEmpty(this.props.pendingSettings)){var i=this.props.currentSettings,s=i.retention_type,o=i.retention_duration,l=i.is_locked;var c=0!==s&&"allow_override"!==this.props.policyType||l?s:4;var u=q({policyType:r,retentionType:c,policyDurationValue:o,featureGdprExports:a});var d=he.t("Current:");return n.a.createElement("p",null,d," ",u)}return null}},{key:"renderPolicyItem",value:function e(){var t=this.props,a=t.isFormPending,r=t.policyType,i=t.featureGdprExports;var s=L({policyType:r,featureGdprExports:i});var o=this.props.displaySettings;!S.a.isEmpty(this.props.pendingSettings)&&a&&(o=this.props.pendingSettings);var l=o,c=l.is_locked,u=l.retention_duration,d=l.retention_type;var p="allow_override"===r&&!c||0===d&&!c&&B(r)?4:d;return n.a.createElement(pe,{id:"policy_select_"+this.props.policyType,options:s,currentSelectionValue:p,currentDurationValue:u,isDeactivated:a,onUpdatePolicySelection:this.onUpdatePolicy})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_retention_request__policy_item margin_bottom_200"},n.a.createElement("label",{htmlFor:"policy_select_"+this.props.policyType,className:"inline_block"},this.props.policyLabel),this.renderPolicyItem(),this.maybeRenderCurrentPolicyText())}}]);return t}(n.a.Component);fe.displayName="PolicyItem";fe.defaultProps=me;var be=Object(T["a"])("feature_gdpr_exports")(fe);var ge=a(3244);var _e=new I["b"]("policy-retention");var ye={orgId:l["b"].string.isRequired,hasPermission:l["b"].bool.isRequired,orgName:l["b"].string.isRequired,orgOwners:l["b"].object.isRequired,currentSettings:l["b"].object.isRequired,submitRequest:l["b"].func.isRequired,pendingData:l["b"].object,featureGdprExports:l["b"].bool.isRequired};var Oe={pendingData:{}};var ke=function(e){j()(t,e);function t(e){_()(this,t);var a=E()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={requestedSettings:{},mcUser:"",requester:{},modalOpen:false};a.onUpdatePolicySelect=a.onUpdatePolicySelect.bind(a);a.onUpdateRequesterSelect=a.onUpdateRequesterSelect.bind(a);a.onMcUserInput=a.onMcUserInput.bind(a);a.onSubmitRequest=a.onSubmitRequest.bind(a);a.onCancelRequest=a.onCancelRequest.bind(a);a.onCloseModal=a.onCloseModal.bind(a);a.onOpenModal=a.onOpenModal.bind(a);return a}O()(t,[{key:"onUpdatePolicySelect",value:function e(t){var a=t.policyType,r=t.data;var n=this.props.featureGdprExports;var i=this.state.requestedSettings;var s=i[a]||{};var o=this.props.currentSettings[a];var l=b()({},o,s,r);var c=void 0;var u=G({policyType:a,settingValues:l,featureGdprExports:n});c=S.a.isEqual(o,u)?S.a.omit(i,a):b()({},this.state.requestedSettings,m()({},a,l));this.setState(function(){return{requestedSettings:c}})}},{key:"onUpdateRequesterSelect",value:function e(t){this.setState(function(){return{requester:t}})}},{key:"onMcUserInput",value:function e(t){this.setState(function(){return{mcUser:t}})}},{key:"onSubmitRequest",value:function e(){var t=this;var a=this.formatSettings();this.setState(function(){return{modalOpen:false,requestedSettings:{}}},function(){t.props.submitRequest("newRequest",a)})}},{key:"onCancelRequest",value:function e(){var t=this;var a={enterprise:this.props.orgId};this.setState(function(){return{modalOpen:false,requestedSettings:{}}},function(){t.props.submitRequest("cancelRequest",a)})}},{key:"onCloseModal",value:function e(){this.setState(function(){return{modalOpen:false}})}},{key:"onOpenModal",value:function e(){this.setState(function(){return{modalOpen:true}})}},{key:"formatSettings",value:function e(){var t=this.props.featureGdprExports;var a=this.state,r=a.requestedSettings,n=a.mcUser,i=a.requester;var s=S.a.reduce(r,function(e,a,r){e[r]=G({policyType:r,settingValues:a,featureGdprExports:t});return e},{});return{mc_user:n,enterprise:this.props.orgId,requester:i.id,requested_settings:JSON.stringify(s)}}},{key:"isFormDataValid",value:function e(){var t=this.props.featureGdprExports;var a=this.state.requestedSettings;return S.a.every(a,function(e,a){var r=e.retention_duration,n=e.retention_type;return!(U({policyType:a,retentionType:n,featureGdprExports:t})&&(0===r||""===r))})}},{key:"isFormSubmittable",value:function e(){var t=this.state,a=t.requestedSettings,r=t.mcUser,n=t.requester;return this.isFormDataValid()&&!S.a.isEmpty(a)&&!S.a.isUndefined(r)&&!S.a.isEmpty(r)&&!S.a.isUndefined(n)&&!S.a.isEmpty(n)}},{key:"maybeRenderPendingAlert",value:function e(t,a,r){if(t)return n.a.createElement(Z,{requestTimestamp:S.a.parseInt(r),requesterName:a});return null}},{key:"maybeRenderModal",value:function e(){if(!this.state.modalOpen)return"";var t=void 0;var a=!S.a.isEmpty(this.props.pendingData);var r=this.props.pendingData,i=r.date_create,s=r.requester;if(a){var o=s.name;t=n.a.createElement(z,{orgName:this.props.orgName,requestDate:i,requesterName:o,onConfirm:this.onCancelRequest,onCancel:this.onCloseModal,cancelRequest:true})}else{var l=this.state.requester.name;t=n.a.createElement(z,{orgName:this.props.orgName,currentPolicies:this.props.currentSettings,requestedPolicies:this.state.requestedSettings,requesterName:l,onConfirm:this.onSubmitRequest,onCancel:this.onCloseModal})}return t}},{key:"renderPolicyItem",value:function e(t,a,r){var i=this.props.featureGdprExports;return n.a.createElement(be,{displaySettings:S.a.get(this.state.requestedSettings,t)||S.a.get(this.props.currentSettings,t),currentSettings:r?S.a.get(this.props.currentSettings,t):{},pendingSettings:S.a.get(a,t),onUpdatePolicy:this.onUpdatePolicySelect,policyType:t,policyLabel:F({policyType:t,featureGdprExports:i}),isFormPending:r})}},{key:"renderButtons",value:function e(){var t=!S.a.isEmpty(this.props.pendingData);var a=this.isFormSubmittable();var r=void 0;r=t?n.a.createElement("div",null,n.a.createElement("button",{type:"button",className:"btn btn_outline disabled margin_right_75",disabled:true},_e.t("Request Submitted")),n.a.createElement("button",{className:"btn btn_outline",onClick:this.onOpenModal,type:"button"},_e.t("Cancel"))):a?n.a.createElement("div",null,n.a.createElement("button",{className:"btn",onClick:this.onOpenModal,type:"button"},_e.t("Continue"))):n.a.createElement("div",null,n.a.createElement("button",{className:"btn btn_outline disabled",disabled:true,type:"button"},_e.t("Continue")));return r}},{key:"render",value:function e(){var t=!S.a.isEmpty(this.props.pendingData)||!this.props.hasPermission;var a=this.props.pendingData,r=a.requested_settings,i=a.mc_user,s=a.requester,o=a.date_create;return n.a.createElement("div",{className:"p-org_retention_request"},this.maybeRenderModal(),n.a.createElement("div",null,this.maybeRenderPendingAlert(!S.a.isEmpty(this.props.pendingData),i,o),n.a.createElement("div",{className:"p-org_retention_request__section_header"},_e.t("Message Retention")),n.a.createElement("div",null,this.renderPolicyItem("channels",r,t)),n.a.createElement("div",null,this.renderPolicyItem("private_channels",r,t)),n.a.createElement("div",null,this.renderPolicyItem("dms",r,t)),n.a.createElement("div",null,this.renderPolicyItem("allow_override",r,t)),n.a.createElement("div",{className:"p-org_retention_request__section_header"},_e.t("File Retention")),n.a.createElement("div",null,this.renderPolicyItem("files",r,t)),n.a.createElement("div",{className:"p-org_retention_request__section_header margin_bottom_100"},_e.t("Authorization")),n.a.createElement("p",{className:"margin_bottom_200"},_e.t("Please include information about who is requesting this update, and your name.")),n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(ae,{users:this.props.orgOwners,currentSelectionValue:S.a.get(this.state.requester,"id")||S.a.get(s,"id"),onUpdateUserSelection:this.onUpdateRequesterSelect,isFormPending:t}))),n.a.createElement(oe,{currentUserValue:this.state.mcUser||i,isDisabled:t,placeholder:_e.t("Please enter your full name"),onUpdateUserInput:this.onMcUserInput}),this.renderButtons()))}}]);return t}(n.a.Component);ke.displayName="OrgRetentionRequest";ke.defaultProps=Oe;var Ee=Object(T["a"])("feature_gdpr_exports")(ke);var Ce=Ee;var je=a(163);var we=function e(t,a,r,l){if(!t)throw new Error("mountOrgRetentionRequest must be called with a teamId parameter");var c=Object(o["d"])(t);var u=function n(i,s){Object(o["a"])(t,p({type:i,requestData:s})).then(function(){e(t,a,r,l)}).catch(function(e){return Object(h["e"])("Failed to submit retention request:",e)})};Object(o["a"])(t,d(r)).then(function(e){var t=e.id,r=e.has_permission,o=e.all_org_owners,d=e.current_settings,p=e.pending;Object(s["a"])(n.a.createElement(i["Provider"],{store:c},n.a.createElement(je["a"],null,n.a.createElement(Ce,{submitRequest:u,orgId:t,orgName:l,hasPermission:r,orgOwners:o,currentSettings:d,pendingData:p}))),a)}).catch(function(e){return Object(h["e"])("Failed to fetch retention settings:",e)})};var Se=we;var Ie=a(44);Object(Ie["a"])("interop.mountOrgRetentionRequest",Se)},,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(2414);var c=a(0);var u=a(782);var d=a(363);var p=a(205);var h=a(4);var v=a(3);var m=a.n(v);var f=a(6);var b=a.n(f);var g=a(7);var _=a.n(g);var y=a(8);var O=a.n(y);var k=a(9);var E=a.n(k);var C=a(292);var j=a(24);var w=a(903);var S=a(61);var I=a(17);function T(e,t){return{appProfile:e,appId:Object(p["l"])(e),botId:Object(p["p"])(e),isPublished:Object(p["F"])(e),customIntegrationType:Object(p["e"])(e),dateCreated:Object(p["f"])(e),isUserRestricted:Object(I["isRestricted"])(t)||Object(I["isUltraRestricted"])(t),installedUserId:Object(p["w"])(e),commands:Object(p["d"])(e),description:Object(p["g"])(e),formattedDescription:Object(p["i"])(e),hideDescriptionExpansion:Object(p["I"])(e)}}var A=a(168);var N=a(430);var P=a(10);var R=a(58);var M=a.n(R);var D=a(16);var x=a.n(D);var F=a(2);var L=a(21);var B=a(45);var U=a(311);var q=a(28);var G=a(1451);var W=a(66);var H=a(23);var V=a(35);var K=a(31);var z=a(48);var Y=a(1555);var Q=new P["b"]("app_profile");function J(e){var t=e.appId,a=e.serviceId,r=e.appHomepageUrl,i=e.supportUrl,s=e.isSlackIntegration,l=e.dispatch,c=e.currentTeamId,u=e.currentUserId,d=e.locale,p=e.currentEnterpriseId;var h=Object(B["a"])({userId:u,teamId:c,locale:d,enterpriseId:p});var v=Object(V["d"])(Object(o["c"])(c));var m={app_id:t,bot_id:a};var f=function e(){return h.track(L["k"].USER_PROFILE_CLICK,m)};var b=[{key:"app_homepage",label:Q.t("App Homepage"),href:r,click:function e(){f();h.track(L["k"].APP_CLICK_APP_HOMEPAGE_IN_USER_PROFILE,{contexts:{ui_context:{step:L["z"].USER_PROFILE,action:L["v"].CLICK,ui_element:L["y"].APP_HOMEPAGE}}})},show:!!r,dataQa:"app_profile_overflow_homepage"},{key:"app_directory_page",label:Q.t("View in App Directory"),href:Object(K["getTeamUrl"])(v,"/apps/"+t+"?utm_source=in-prod&utm_medium=inprod-link_app_directory-user_profile-click"),click:function e(){f();h.track(L["k"].APP_CLICK_LINK_APP_DIRECTORY_IN_USER_PROFILE,{contexts:{ui_context:{step:L["z"].USER_PROFILE,action:L["v"].CLICK,ui_element:L["y"].LINK_APP_DIRECTORY}}})},show:true,dataQA:"app_profile_app_directory_page"},{key:"support",label:Q.t("Support for this app"),href:i||void 0,click:function e(){f();h.track(L["k"].APP_CLICK_LINK_APP_SUPPORT_IN_USER_PROFILE,{contexts:{ui_context:{step:L["z"].USER_PROFILE,action:L["v"].CLICK,ui_element:L["y"].LINK_APP_SUPPORT}}});s&&l(Object(z["openModal"])({element:n.a.createElement(Y["a"],{trigger:"app_support_profile_button"})}))},show:true}];return b.filter(function(e){return e.show})}var Z=J;var X={isDistributed:c["b"].bool.isRequired,customIntegrationType:c["b"].string,appProfile:c["b"].object,dispatch:c["b"].func,currentTeamId:c["b"].string,currentUserId:c["b"].string,currentEnterpriseId:c["b"].string};var $={customIntegrationType:"",appProfile:void 0,dispatch:c["b"].noop,currentTeamId:"",currentUserId:"",currentEnterpriseId:""};var ee=function(e){E()(t,e);function t(e){b()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(F["bindAll"])(a,["renderMenu"]);return a}_()(t,[{key:"renderMenu",value:function e(t){var a=this.props,r=a.dispatch,i=a.appProfile,s=a.currentTeamId,o=a.currentUserId,l=a.currentEnterpriseId;var c=Z({appId:Object(p["l"])(i),serviceId:Object(p["p"])(i),appHomepageUrl:Object(p["k"])(i),supportUrl:Object(p["q"])(i),isSlackIntegration:Object(p["G"])(i),dispatch:r,currentTeamId:s,currentUserId:o,locale:Object(P["q"])(),currentEnterpriseId:l});if(!c.length)return null;return n.a.createElement(W["a"],{template:c,stripTerminalSeparators:true,onMenuItemSelected:t.onMenuItemSelected})}},{key:"render",value:function e(){if(this.props.isDistributed&&!this.props.customIntegrationType)return n.a.createElement(W["e"],{renderMenu:this.renderMenu,position:"bottom-right"},n.a.createElement(q["d"],{"data-qa":"app_header_overflow_menu_button",className:"p-app_profile_flexpane_header__button p-app_profile_flexpane_header__button_container__button",icon:"chevron-large-down",size:"large"}));return null}}]);return t}(r["Component"]);ee.displayName="AppProfileOverflowMenuButton";ee.defaultProps=$;var te=function e(t,a){var r=a.appProfile;return{isDistributed:Object(p["D"])(r),customIntegrationType:Object(p["e"])(r),currentTeamId:Object(H["c"])(t),currentUserId:Object(h["getCurrentUserId"])(t),currentEnterpriseId:Object(h["pageNeedsEnterprise"])(t)?Object(V["g"])(t).id:void 0}};var ae=Object(i["connect"])(te)(ee);var re=a(3128);var ne=new P["b"]("app_card");var ie={isAvatarEmoji:c["b"].bool,isExternal:c["b"].bool.isRequired,isUserRestricted:c["b"].bool.isRequired,appProfile:c["b"].object,color:c["b"].string,name:c["b"].string,tagline:c["b"].string,settingsUrl:c["b"].string,avatarUrl:c["b"].string.isRequired,clogger:c["b"].object,externalTeam:c["b"].object};var se={appProfile:void 0,color:"",name:"",tagline:"",settingsUrl:"",clogger:{track:F["noop"]},externalTeam:void 0,isAvatarEmoji:false};var oe=function(e){E()(t,e);function t(e){b()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(F["bindAll"])(a,["calculateStyle","renderSettingsButton","onSettingsButtonClick"]);return a}_()(t,[{key:"onSettingsButtonClick",value:function e(){this.props.clogger.track(L["k"].APP_CLICK_LINK_APP_SETTINGS_IN_USER_PROFILE,{contexts:{ui_context:{step:L["z"].USER_PROFILE,action:L["v"].CLICK,ui_element:L["y"].LINK_APP_SETTINGS}}})}},{key:"calculateStyle",value:function e(){var t=this.props.color;var a=Object(U["f"])(t);if(a&&t){var r=M()(a,3),n=r[0],i=r[1],s=r[2];return{background:"linear-gradient(136.53deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.2) 100%), linear-gradient(312.01deg, "+t+" 0%, rgba("+n+","+i+","+s+",0.75) 100%)",backgroundColor:t}}return}},{key:"renderSettingsButton",value:function e(){var t=this.props,a=t.isExternal,r=t.isUserRestricted,i=t.settingsUrl;if(!a&&!r&&i)return n.a.createElement(q["d"],{"data-qa":"app_header_settings_button",href:i+"?utm_source=in-prod&utm_medium=inprod-link_app_settings-user_profile-click",className:"p-app_profile_flexpane_header__button p-app_profile_flexpane_header__button_container__button",onClick:this.onSettingsButtonClick},ne.t("Settings"));return null}},{key:"render",value:function e(){var t=this.props,a=t.avatarUrl,r=t.isAvatarEmoji,i=t.color,s=t.isExternal,o=t.name,l=t.tagline,c=t.appProfile,u=t.externalTeam;return n.a.createElement("div",{className:x()({"p-app_profile_flexpane_header":!s,"p-app_profile_flexpane_header--external":s}),style:this.calculateStyle(i)},!!s&&n.a.createElement(G["a"],{externalTeam:u}),n.a.createElement("img",{className:x()("p-app_profile_flexpane_header__icon rounded",{"p-app_profile_flexpane_header__icon--emoji":r}),alt:"app avatar","data-qa":"app_header_icon",src:a}),n.a.createElement("div",{className:"p-app_profile_flexpane_header__text"},n.a.createElement("div",{className:"p-app_profile_flexpane_header__row"},n.a.createElement("span",{className:"p-app_profile_flexpane_header__app_name","data-qa":"app_header_name"},o),n.a.createElement("div",null,n.a.createElement("span",{className:"p-app_profile_flexpane_header__app_label rounded","data-qa":"app_header_app_label"},ne.t("APP")))),!!l&&n.a.createElement("div",{className:"p-app_profile_flexpane_header__tagline overflow_hidden","data-qa":"app_header_tagline"},l),n.a.createElement("div",{className:"p-app_profile_flexpane_header__button_container"},this.renderSettingsButton(),n.a.createElement(ae,{appProfile:c}))))}}]);return t}(r["Component"]);oe.displayName="AppProfileHeader";oe.defaultProps=se;var le=function e(t,a){var r=a.appProfile;var n=Object(p["h"])(r);var i=Object(p["b"])(t,r);return{clogger:Object(B["a"])({state:t}),avatarUrl:i,isAvatarEmoji:!!n,customIntegrationType:Object(p["e"])(r),color:Object(p["c"])(r),tagline:Object(p["r"])(r),isExternal:Object(p["E"])(t,r),isDistributed:Object(p["D"])(r),isUserRestricted:Object(I["isRestricted"])(self)||Object(I["isUltraRestricted"])(self),settingsUrl:Object(p["z"])(t,r),name:Object(p["n"])(r),externalTeam:Object(p["v"])(t,r)}};var ce=Object(i["connect"])(le)(oe);var ue=a(95);var de=a(22);var pe=a(3130);var he=a(1789);var ve=new P["b"]("app_profile");var me={formattedDescription:c["b"].string,hideExpandButton:c["b"].bool};var fe={formattedDescription:"",hideExpandButton:false};function be(e){var t=e.formattedDescription,a=e.hideExpandButton;var i=Object(r["useState"])(false),s=M()(i,2),o=s[0],l=s[1];if(!t)return null;return n.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_how_to_use"},n.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},ve.t("How to use this app")),n.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},n.a.createElement("div",{className:x()("p-app_profile_flexpane__description",{"p-app_profile_flexpane__description--collapse":!a&&!o})},n.a.createElement(he["a"],{formattedDescription:t}),!a&&n.a.createElement(r["Fragment"],null,!o&&n.a.createElement("div",{className:"p-app_profile_flexpane__description__fade"}),n.a.createElement(q["c"],{className:x()("p-app_profile_flexpane__description__button",{"p-app_profile_flexpane__description__button--expand":!o,"p-app_profile_flexpane__description__button--collapse":o}),onClick:function e(){l(!o)}},o?ve.t("Collapse"):ve.t("Expand"),n.a.createElement(de["b"],{type:o?"arrow-up-medium":"arrow-down-medium"}))))))}be.displayName="AppProfileDescription";be.defaultProps=fe;var ge=Object(ue["pure"])(be);var _e=a(710);var ye={appId:c["b"].string.isRequired,command:c["b"].shape({name:c["b"].string,usage:c["b"].string,description:c["b"].string}).isRequired,autoFillSlashCommand:c["b"].func,clogger:c["b"].object.isRequired};var Oe={autoFillSlashCommand:F["noop"]};var ke=function(e){E()(t,e);function t(){b()(this,t);return O()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}_()(t,[{key:"autoFillSlashCommand",value:function e(t){this.props.autoFillSlashCommand({commandName:t});var a=this.props,r=a.appId,n=a.clogger;n.track(L["k"].APP_PROFILE_SLASH_COMMAND_CLICK,{app_id:r,contexts:{core:{app_id:r}}})}},{key:"render",value:function e(){var t=this;var a=this.props.command,r=a.name,i=a.usage,s=a.description;return n.a.createElement(q["c"],{type:"outline","data-qa":r,onClick:function e(){return t.autoFillSlashCommand(r)},className:"p-app_profile_flexpane__slash_command"},n.a.createElement("div",{className:"p-app_profile_flexpane__slash_command__title overflow_ellipsis"},n.a.createElement("span",{className:"bold"},r)," ",n.a.createElement("span",null,i)),n.a.createElement("div",{className:"p-app_profile_flexpane__slash_command__description overflow_ellipsis"},s))}}]);return t}(r["PureComponent"]);ke.displayName="AppProfileSlashCommandItem";ke.defaultProps=Oe;var Ee=function e(t){return{clogger:Object(B["a"])({state:t})}};var Ce=function e(t){return Object(C["bindActionCreators"])({autoFillSlashCommand:_e["a"]},t)};var je=Object(i["connect"])(Ee,Ce)(ke);var we=new P["b"]("app_profile");var Se={isPublished:c["b"].bool,installedUserId:c["b"].string,appProfile:c["b"].object,appId:c["b"].string,botId:c["b"].string,customIntegrationType:c["b"].string,isUserRestricted:c["b"].bool,dateCreated:c["b"].number,commands:c["b"].arrayOf(c["b"].object),featureM11nAppSpace:c["b"].bool,formattedDescription:c["b"].string,hideDescriptionExpansion:c["b"].bool,showSettingsSection:c["b"].bool};var Ie={isPublished:false,installedUserId:"",appProfile:void 0,appId:"",botId:"",customIntegrationType:"",isUserRestricted:false,dateCreated:void 0,commands:[],featureM11nAppSpace:false,formattedDescription:"",hideDescriptionExpansion:false,showSettingsSection:false};var Te=function(e){E()(t,e);function t(){b()(this,t);return O()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}_()(t,[{key:"getSectionHeaderText",value:function e(){var t=this.props.customIntegrationType;switch(t){case"incoming-webhook":return we.t("About this Incoming Webhook");case"outgoing-webhook":return we.t("About this Outgoing Webhook");case"bot":return we.t("How to use this Bot");case"slash-commands":return we.t("How to use this Slash Command");default:return null}}},{key:"getSectionText",value:function e(){var t=this.props.customIntegrationType;switch(t){case"outgoing-webhook":return null;case"bot":return we.t("You can message bots and invite them to channels like other members.");case"slash-commands":return we.t("Slash commands take actions when you post them in a conversation.");default:return null}}},{key:"renderAboutSection",value:function e(){var t=this.props,a=t.customIntegrationType,r=t.dateCreated,i=t.isUserRestricted,s=t.installedUserId;if(a){var o=n.a.createElement(N["a"],{id:s,onClick:function e(t){t.preventDefault();Object(A["i"])(s)}});return n.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_about"},n.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},this.getSectionHeaderText(a)),n.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},this.getSectionText(a)," ",!i&&we.rt("Created by {custom_integration_creator} on {date_created, date, long}.",{custom_integration_creator:o,date_created:1e3*r})))}return null}},{key:"renderSettingsSection",value:function e(){var t=this.props,a=t.appProfile,r=t.customIntegrationType,i=t.featureM11nAppSpace,s=t.showSettingsSection;var o=Object(p["m"])(a);var l=Object(p["a"])(a);var c=l&&l.length>0;var u=o>0;if(s&&i&&(c||u)){var d=r?we.t("This bot is in {bot_user_channel_count, plural, =1 {# channel} other {# channels} }.",{bot_user_channel_count:o}):we.t("This app is in {bot_user_channel_count, plural, =1 {# channel} other {# channels} }.",{bot_user_channel_count:o});return n.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_settings"},n.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},we.t("Settings")),n.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},!!c&&n.a.createElement("div",{className:"bottom_margin"},we.t("{name} can:",{name:Object(p["n"])(a)}),n.a.createElement("ul",null,l.map(function(e){return n.a.createElement("li",{key:e},e)}))),!!u&&n.a.createElement("div",null,d)))}return null}},{key:"renderCommandsSection",value:function e(){var t=this.props,a=t.appId,r=t.featureM11nAppSpace,i=t.commands;if(r&&i&&i.length)return n.a.createElement("section",{"data-qa":"app_profile_commands",className:"p-app_profile_flexpane__section"},n.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},we.t("Responds to\u2026",{note:"Refers to slash commands the app responds to."})),i.map(function(e){return n.a.createElement(je,{key:e.name,command:e,appId:a})}));return null}},{key:"renderMetaSection",value:function e(){if(!this.props.isPublished)return n.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_meta"},n.a.createElement("p",null,n.a.createElement("i",{className:"sk_dark_grey"},we.t("This app has not been reviewed by Slack."))));return null}},{key:"render",value:function e(){var t=this.props,a=t.appProfile,r=t.appId,i=t.botId,s=t.formattedDescription,o=t.hideDescriptionExpansion;if(!a||Object(S["e"])(a))return null;return n.a.createElement("div",{className:"p-app_profile_flexpane__container","data-qa":"app_profile_container","data-app_id":r,"data-bot_id":i},n.a.createElement(ce,{appProfile:a}),n.a.createElement("div",{className:"sk_black large_bottom_margin"},this.renderAboutSection(),n.a.createElement(ge,{formattedDescription:s,hideExpandButton:o}),this.renderCommandsSection(),this.renderSettingsSection(),this.renderMetaSection()))}}]);return t}(r["Component"]);Te.displayName="BaseAppProfile";Te.defaultProps=Ie;var Ae=function e(t,a){var r=a.serviceId;var n=Object(d["getAppProfileByIds"])(t,{serviceId:r,showAuthSummary:true});return m()({},T(n,Object(j["b"])(t)),{showSettingsSection:Object(p["A"])(t,n),featureM11nAppSpace:Object(h["isFeatureEnabled"])(t,"feature_m11n_app_space")})};var Ne=Object(i["connect"])(Ae)(Te);var Pe={appId:c["b"].string,currentMember:c["b"].object.isRequired,featureM11nAppSpace:c["b"].bool,fetchLegacyAppProfile:c["b"].func};var Re={appId:"",featureM11nAppSpace:false,fetchLegacyAppProfile:void 0};var Me=function(e){E()(t,e);function t(e){b()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={appProfile:void 0};a.getAppProfileProps=a.getAppProfileProps.bind(a);return a}_()(t,[{key:"componentDidMount",value:function e(){this.props.appId&&this.fetchAppProfile()}},{key:"componentDidUpdate",value:function e(t){this.props.appId!==t.appId&&this.fetchAppProfile()}},{key:"getAppProfileProps",value:function e(){var t=this.state.appProfile;var a=this.props,r=a.currentMember,n=a.featureM11nAppSpace;return m()({},T(t,r),{showSettingsSection:false,featureM11nAppSpace:n})}},{key:"fetchAppProfile",value:function e(){var t=this;this.props.fetchLegacyAppProfile({appId:this.props.appId}).then(function(e){t.setState(function(){return{appProfile:Object(_e["c"])(null,e)}})})}},{key:"render",value:function e(){return n.a.createElement(Te,this.getAppProfileProps())}}]);return t}(r["Component"]);Me.displayName="GenericAppProfile";Me.defaultProps=Re;var De=function e(t){return{currentMember:Object(j["b"])(t),featureM11nAppSpace:Object(h["isFeatureEnabled"])(t,"feature_m11n_app_space")}};var xe=function e(t){return Object(C["bindActionCreators"])({fetchLegacyAppProfile:w["b"]},t)};var Fe=Object(i["connect"])(De,xe)(Me);var Le=a(921);var Be=a(3136);var Ue=new P["b"]("app_profile");var qe={featureM11nAppSpace:c["b"].bool.isRequired,serviceId:c["b"].string,appId:c["b"].string,customIntegrationType:c["b"].string};var Ge={serviceId:void 0,appId:void 0,customIntegrationType:""};var We=function e(t){var a={"incoming-webhook":Ue.t("About this Incoming Webhook"),"outgoing-webhook":Ue.t("About this Outgoing Webhook"),bot:Ue.t("About this Bot"),"slash-commands":Ue.t("About this Slash Command")};var r=Ue.t("About this app");var i=a[t.customIntegrationType]||r;if(!t.featureM11nAppSpace)return null;return n.a.createElement(Le["a"],{className:"p-app_profile_flexpane",dataQa:"app_profile_pane",title:i,viewId:"app-profile-flepane",kbNavOrder:4.7,renderBody:function e(){return n.a.createElement(l["a"],null,function(e){var a=e.width,r=e.height;return n.a.createElement(u["b"],{width:a,height:r,fade:true},t.serviceId?n.a.createElement(Ne,{serviceId:t.serviceId}):n.a.createElement(Fe,{appId:t.appId}))})}})};We.displayName="AppProfilePane";We.defaultProps=Ge;var He=function e(t,a){var r=a.serviceId;var n=r?Object(d["getAppProfileByIds"])(t,{serviceId:r}):void 0;return{customIntegrationType:Object(p["e"])(n),featureM11nAppSpace:Object(h["isFeatureEnabled"])(t,"feature_m11n_app_space")}};var Ve=Object(i["connect"])(He)(We);var Ke=Ve;var ze=a(163);var Ye=function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)throw new Error("mountAppProfileFlexpane must be called with a teamId parameter");var l=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(ze["a"],null,n.a.createElement(Ke,r))),a)};var Qe=Ye;var Je=a(44);Object(Je["a"])("interop.mountAppProfileFlexpane",Qe)},,function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a(125);function n(e){if(!e)return;var t=Object(r["a"])(e);var a=new Date(t.getFullYear(),t.getMonth(),t.getDate());return a.getTime().toString()}},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(6);var c=a.n(l);var u=a(7);var d=a.n(u);var p=a(8);var h=a.n(p);var v=a(9);var m=a.n(v);var f=a(0);var b=a(2);var g=a.n(b);var _=a(2414);var y=a(1439);var O=a(4);var k=a(249);var E=a(30);var C=a(10);var j=a(181);var w=a(34);var S=a(782);var I=a(42);var T=a(16);var A=a.n(T);var N=a(50);var P=a(22);var R=a(71);var M=a(128);var D=a(49);var x=a(15);var F=a(1553);var L=a(1053);var B=a(1358);var U=a(803);var q=a(316);var G=a(274);var W=Object(x["b"])("Switches to the All Threads view",function(e){e(Object(q["a"])({id:G["a"].allThreads}))});var H=W;var V=a(73);var K=a(1547);var z=Object(x["b"])("Switches to the All Unreads view",function(e,t){var a=Object(O["isFeatureEnabled"])(t(),"feature_pages")?"Punreads":G["a"].allUnreads;var r=Object(V["a"])(t());e(r===a?Object(K["b"])():Object(q["a"])({id:a}))});var Y=z;var Q=a(20);var J=Object(Q["b"])("TS.ui.react_keyboard_shortcuts.executeShortcut",function(){return null});var Z="browse_dms";var X="open_all_unreads";var $="quick_switcher";var ee="set_a_status";var te="open_preferences";var ae="open_all_threads";var re=Object(x["b"])("Run a keyboard shortcut without the keyboard",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.id;var n=t();if(r===Z&&Object(O["isFeatureEnabled"])(n,"feature_sonic_dm_browser")){e(Object(B["a"])());return}if(r===te){e(Object(U["a"])());return}if(r===ae&&Object(O["isFeatureEnabled"])(n,"feature_react_all_threads")){e(H());return}if(r===X&&Object(O["isFeatureEnabled"])(n,"feature_react_all_unreads")){e(Y());return}if(Object(D["a"])()){r===ee?e(Object(L["a"])()):r===$?e(Object(F["a"])()):r===X&&e(Y());return}J(r)});re.propTypes={id:f["b"].oneOf([X,ee,Z,$,te,ae]).isRequired};var ne=re;var ie=a(3184);var se=a(3186);var oe={os:f["b"].oneOf(["windows","mac","linux"]),browser:f["b"].string,keyboardLocale:f["b"].string,localeBlackList:f["b"].array,title:f["b"].oneOfType([f["b"].string,f["b"].object]),keys:f["b"].array,keysLinux:f["b"].array,keysWin:f["b"].array,hasInfoButton:f["b"].bool,infoButtonMessage:f["b"].string,id:f["b"].string,isSsbOnly:f["b"].bool,browserBlackList:f["b"].array,executeKeyboardShortcut:f["b"].func,telemeter:f["b"].object,enableUnreadView:f["b"].bool};var le={os:null,browser:null,keyboardLocale:null,localeBlackList:null,title:"Basic",keys:[],keysLinux:null,keysWin:null,hasInfoButton:false,infoButtonMessage:"",id:null,isSsbOnly:false,browserBlackList:[],executeKeyboardShortcut:b["noop"],enableUnreadView:false,telemeter:{count:b["noop"]}};var ce={"\u2191":"arrow_up_medium","\u2193":"arrow_down_medium","\u2190":"arrow_left_medium","\u2192":"arrow_right_medium"};var ue=function(e){m()(t,e);function t(){c()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"getKeys",value:function e(){var t=this.props,a=t.keys,r=t.keysWin,n=t.keysLinux,i=t.os;if(null!=r&&"windows"===i)return r;if(null!=n&&"linux"===i)return n;return a}},{key:"execShortcut",value:function e(t){this.props.executeKeyboardShortcut({id:t});this.props.telemeter.count("clicked_keyboard_shortcut")}},{key:"renderKeyLabel",value:function e(t){var a=this.props.os;var r="windows"===a||"linux"===a;if(ce[t])return n.a.createElement(P["a"],{type:ce[t]});if(("Cmd"===t||"Control"===t)&&r)return"Ctrl";if("Option"===t&&r)return"Alt";if("CtrlAlternative"===t)return"Ctrl";if("ShiftAlternative"===t)return"Shift";return t}},{key:"renderKeys",value:function e(){var t=this;return this.getKeys().map(function(e){var a=e.split("key_")[1];if(!a)return e;var r=!!ce[a];var i=A()({"p-shortcuts_flexpane__arrow_key":r,"c-keyboard_key":true});return n.a.createElement("div",{key:t.props.title+" "+e+" "+Object(b["uniqueId"])(),className:i},t.renderKeyLabel(a))})}},{key:"renderInfoButton",value:function e(){if(this.props.hasInfoButton)return n.a.createElement(N["c"],{tip:this.props.infoButtonMessage,delay:N["b"]},n.a.createElement(P["a"],{align:"top",className:"p-shortcuts_flexpane__tip",type:"question_circle"}));return null}},{key:"renderTitle",value:function e(){var t=this;if(null==this.props.id)return n.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title"},n.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title",key:"title "+this.props.title},this.props.title,this.renderInfoButton()));var a=A()("p-shortcuts_flexpane__shortcut_title","btn_link",this.props.id);return n.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title"},n.a.createElement(M["a"],{type:"button",onClick:function e(){return t.execShortcut(t.props.id)},className:a,key:this.props.title+" shortcut_title"},this.props.title,this.renderInfoButton()))}},{key:"render",value:function e(){if(this.props.isSsbOnly&&!I["isDesktop"])return null;var t=null==this.props.browserBlackList?[]:this.props.browserBlackList;var a=Object(b["includes"])(t,this.props.browser)||Object(b["includes"])(t,this.props.os);if(a&&!I["isDesktop"])return null;var r=null==this.props.localeBlackList?[]:this.props.localeBlackList;var i=Object(b["includes"])(r,this.props.keyboardLocale);if(i)return null;if("open_all_unreads"===this.props.id&&!this.props.enableUnreadView)return null;var s=null==this.props.id?"":"p-shortcuts_flexpane__shortcut_hoverable";var o=A()("p-shortcuts_flexpane__shortcut",s);return n.a.createElement("li",{className:o,key:this.props.title+" shortcut"},this.renderTitle(),n.a.createElement("span",{className:"p-shortcuts_flexpane__shortcut_keys",key:this.props.title+" shortcut_keys"},this.renderKeys()))}}]);return t}(n.a.PureComponent);ue.displayName="Shortcut";ue.defaultProps=le;var de=function e(t){return{enableUnreadView:Object(w["f"])(t,"enable_unread_view"),telemeter:Object(R["c"])({state:t})}};var pe={executeKeyboardShortcut:function e(){return ne.apply(void 0,arguments)}};var he=Object(i["connect"])(de,pe)(ue);var ve=a(3188);var me={os:f["b"].oneOf(["windows","mac","linux"]),browser:f["b"].string,keyboardLocale:f["b"].string,id:f["b"].string,title:f["b"].string,subtitle:f["b"].string,shortcuts:f["b"].arrayOf(f["b"].shape({os:f["b"].oneOf(["windows","mac","linux"]),browser:f["b"].string,title:f["b"].oneOfType([f["b"].string,f["b"].object]),keys:f["b"].array,keysLinux:f["b"].array,keysWin:f["b"].array,hasInfoButton:f["b"].bool,infoButtonMessage:f["b"].string,id:f["b"].string,isSsbOnly:f["b"].bool,browserBlackList:f["b"].array,localeBlackList:f["b"].array})),enableUnreadView:f["b"].bool};var fe={os:null,browser:null,keyboardLocale:null,title:null,subtitle:null,id:null,shortcuts:[],enableUnreadView:false};var be=function(e){m()(t,e);function t(){c()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"renderShortcuts",value:function e(){var t=this;return g.a.map(this.props.shortcuts,function(e){return n.a.createElement(he,{os:t.props.os,browser:t.props.browser,keyboardLocale:t.props.keyboardLocale,localeBlackList:e.localeBlackList,key:e.title+e.keys,title:e.title,isSsbOnly:e.isSsbOnly,keys:e.keys,keysLinux:e.keysLinux,keysWin:e.keysWin,hasInfoButton:e.hasInfoButton,infoButtonMessage:e.infoButtonMessage,id:e.id,browserBlackList:e.browserBlackList})})}},{key:"render",value:function e(){if("all_unreads"===this.props.id&&!this.props.enableUnreadView)return null;if("workspaces"===this.props.id&&!I["isDesktop"])return null;return n.a.createElement("div",{className:"p-shortcuts_flexpane__section_container"},n.a.createElement("h3",{className:"p-shortcuts_flexpane__title"},this.props.title),this.props.subtitle&&n.a.createElement("h4",{className:"p-shortcuts_flexpane__sub_heading"},this.props.subtitle),n.a.createElement("ul",{className:"p-shortcuts_flexpane__list"},this.renderShortcuts()))}}]);return t}(n.a.PureComponent);be.displayName="ShortcutsSection";be.defaultProps=fe;function ge(e){return{enableUnreadView:Object(w["f"])(e,"enable_unread_view")}}var _e=Object(i["connect"])(ge)(be);var ye=new C["b"]("shortcuts_flexpane");function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.featureLocaleEnGb,r=t.featureLocalePtBr,n=t.featureReactAllUnreads;var i=[{title:ye.t("Basics"),id:"basics",shortcuts:[{title:ye.t("Quick Switcher"),keys:I["isDesktop"]?["key_Cmd","key_K","  or  ","key_T"]:["key_Cmd","key_K"],hasInfoButton:true,infoButtonMessage:ye.t("Jump to another conversation by just typing its name"),id:"quick_switcher"},{title:ye.t("Browse DMs"),keys:["key_Cmd","key_Shift","key_K"],id:"browse_dms"},{title:ye.t("Edit last message (in empty text input)"),keys:["key_\u2191"]},{title:ye.t("Back in history"),keys:["key_Cmd","key_["],keysWin:["key_Alt","key_\u2190"],keysLinux:["key_Alt","key_\u2190"],localeBlackList:["de","es","fr","ja"]},{title:ye.t("Forward in history"),keys:["key_Cmd","key_]"],keysWin:["key_Alt","key_\u2192"],keysLinux:["key_Alt","key_\u2192"],localeBlackList:["de","es","fr","ja"]},{title:ye.t("All Unreads"),keys:["key_Cmd","key_Shift","key_A"],id:"open_all_unreads"},{title:ye.t("Threads"),keys:["key_Cmd","key_Shift","key_T"],id:"open_all_threads",isSsbOnly:true},{title:ye.t("Search"),keys:["key_Cmd","key_F"],isSsbOnly:true},{title:ye.t("Dismiss dialogs"),keys:["key_Esc"]}]},{title:ye.t("Navigation"),id:"navigation",shortcuts:[{title:ye.t("Move focus to the next element"),keys:["key_Tab"]},{title:ye.t("Move focus to the previous element"),keys:["key_Shift","key_Tab"]},{title:ye.t("Move focus through messages"),keys:["key_\u2191","  or  ","key_\u2193"]},{title:ye.t("Move focus to the next section"),keys:I["isDesktop"]?["key_F6"]:["key_Cmd","key_F6"]},{title:ye.t("Move focus to the previous section"),keys:I["isDesktop"]?["key_Shift","key_F6"]:["key_Cmd","key_Shift","key_F6"]},{title:ye.t('Take action or "click" on selected element'),keys:["key_Enter"]},{title:ye.t("Increase text size"),keys:["key_Cmd","key_+"]},{title:ye.t("Decrease text size"),keys:["key_Cmd","key_-"]},{title:ye.t("Scroll up"),keys:["key_fn","key_\u2191","  or  ","key_Page Up"]},{title:ye.t("Scroll down"),keys:["key_fn","key_\u2193","  or  ","key_Page Down"]},{title:ye.t("Scroll to previous day"),keys:["key_Shift","key_Page Up"]},{title:ye.t("Scroll to next day"),keys:["key_Shift","key_Page Down"]},{title:ye.t("Preferences"),keys:["key_Cmd","key_,"],id:"open_preferences",isSsbOnly:true,browserBlackList:["windows","linux"]},{title:ye.t("Open or close right pane"),keys:["key_Cmd","key_"+Object(k["d"])(".",{kb:e,featureLocaleEnGb:a,featureLocalePtBr:r})]},{title:ye.t("Channel Info"),keys:["key_Cmd","key_Shift","key_I"],isSsbOnly:true},{title:ye.t("Activity"),keys:["key_Cmd","key_Shift","key_M"],browserBlackList:["chrome"]},{title:ye.t("Directory"),keys:["key_Cmd","key_Shift","key_E"],browserBlackList:["firefox"]},{title:ye.t("Starred items"),keys:["key_Cmd","key_Shift","key_S"]},{title:ye.t("Toggle full screen"),keys:["key_Ctrl","key_Cmd","key_F"],keysWin:["key_Ctrl","key_Shift","key_F"],keysLinux:["key_Ctrl","key_Shift","key_F"]}]},{title:ye.t("Messaging"),id:"messaging",shortcuts:[{title:ye.t("Select text to beginning of current line"),keys:["key_Shift","key_\u2191"]},{title:ye.t("Select text to end of current line"),keys:["key_Shift","key_\u2193"]},{title:ye.t("Start a new line"),keys:["key_Shift","key_Enter"]},{title:ye.t("React to last message (or message with focus)"),keys:["key_Cmd","key_Shift","key_"+Object(k["d"])("\\",{kb:e,featureLocaleEnGb:a,featureLocalePtBr:r})]},{title:ye.t("Autocomplete @username"),keys:["key_@"]},{title:ye.t("Autocomplete channel"),keys:["key_#"]},{title:ye.t("Autocomplete emoji"),keys:["key_:"]}]},{title:ye.t("Mark Messages Read and Unread"),shortcuts:[{title:ye.t("Mark all messages in current channel as read"),keys:["key_Esc"]},{title:ye.t("Mark all messages as read"),keys:["key_Shift","key_Esc"]},{title:ye.t("Mark a message as unread"),keys:["key_Option",ye.t("  and click message")],keysWin:["key_Alt",ye.t("  and click message")],keysLinux:["key_Alt",ye.t("  and click message")]}]},{title:ye.t("Channels & Direct Messages"),shortcuts:[{title:ye.t("Previous channel or DM"),keys:["key_Option","key_\u2191"]},{title:ye.t("Next channel or DM"),keys:["key_Option","key_\u2193"]},{title:ye.t("Previous unread channel or DM"),keys:["key_Option","key_Shift","key_\u2191"]},{title:ye.t("Next unread channel or DM"),keys:["key_Option","key_Shift","key_\u2193"]}]},{title:ye.t("All Unreads"),id:"all_unreads",shortcuts:[{title:n?ye.t("Expand channel"):ye.t("Next channel"),keys:["key_\u2192"]},{title:n?ye.t("Collapse channel"):ye.t("Previous channel"),keys:["key_\u2190"]},{title:ye.t("Mark channel as read"),keys:["key_R"]}]},{title:ye.t("Files and Snippets"),shortcuts:[{title:ye.t("Upload a file"),keys:["key_Cmd","key_U"]},{title:ye.t("Create a snippet"),keys:["key_Cmd","key_Shift","key_Enter"]}]},{title:ye.t("Calls"),shortcuts:[{title:ye.t("Toggle mute"),keys:["key_M"]},{title:ye.t("Toggle video"),keys:["key_V"]},{title:ye.t("Invite list"),keys:["key_+",ye.t("  or  "),"key_A"]},{title:ye.t("Emoji reactions"),keys:["key_E",ye.t("  then 1-9")]}]},{title:ye.t("Workspace Switching"),id:"workspaces",shortcuts:[{title:ye.t("Next workspace"),keys:["key_Cmd","key_Shift","key_["],keysWin:["key_Ctrl","key_Tab"]},{title:ye.t("Previous workspace"),keys:["key_Cmd","key_Shift","key_]"],keysWin:["key_Ctrl","key_Shift","key_Tab"]},{title:ye.t("A specific workspace"),keys:["key_Cmd",ye.t("  and 1-9")]}]}];var s=i[Object(b["findIndex"])(i,["id","basics"])].shortcuts;var o=i[Object(b["findIndex"])(i,["id","navigation"])].shortcuts;var l=i[Object(b["findIndex"])(i,["id","messaging"])].shortcuts;I["isDesktop"]&&o.push({title:ye.t("Jump to unread messages"),keys:["key_Cmd","key_J"]});l.push({title:ye.t("Bold text"),keys:["key_Cmd","key_B"]});l.push({title:ye.t("Italic text"),keys:["key_Cmd","key_I"]});l.push({title:ye.t("Strikethrough text"),keys:["key_Cmd","key_Shift","key_X"]});l.push({title:ye.t("Format text as code"),keys:["key_Cmd","key_Shift","key_C"]});if(!I["isDesktop"]||Object(E["isSSBAndAtLeastVersion"])("3.0.0")){l.push({title:ye.t("Format selection as bullet list"),keys:["key_Cmd","key_Shift","key_8"]});l.push({title:ye.t("Format selection as numbered list"),keys:["key_Cmd","key_Shift","key_7"]})}l.push({title:ye.t("Format selection as quote"),keys:["key_Cmd","key_Shift","key_>"]});s.push({title:ye.t("Set a status"),keys:["key_Cmd","key_Shift","key_Y"],id:"set_a_status"});return i}var ke=a(921);var Ee=a(3190);var Ce={os:f["b"].oneOf(["windows","mac","linux"]),browser:f["b"].string,keyboardLocale:f["b"].string,sections:f["b"].arrayOf(f["b"].shape({os:f["b"].oneOf(["windows","mac","linux"]),browser:f["b"].string,title:f["b"].string,shortcuts:f["b"].arrayOf(f["b"].shape({os:f["b"].oneOf(["windows","mac","linux"]),browser:f["b"].string,title:f["b"].oneOfType([f["b"].string,f["b"].object]),keys:f["b"].array,keysLinux:f["b"].array,keysWin:f["b"].array,hasInfoButton:f["b"].bool,infoButtonMessage:f["b"].string,id:f["b"].string,isSsbOnly:f["b"].bool,browserBlackList:f["b"].array}))})).isRequired,featureLocaleEnGb:f["b"].bool,featureLocalePtBr:f["b"].bool,enableUnreadView:f["b"].bool,useGlobalNav:f["b"].bool};var je={os:Object(E["getOperatingSystem"])(),browser:Object(E["getBrowser"])(),keyboardLocale:null,featureLocaleEnGb:false,featureLocalePtBr:false,enableUnreadView:false,useGlobalNav:false};var we=new C["b"]("shortcuts_flexpane");var Se=function(e){m()(t,e);function t(e){c()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(b["bindAll"])(a,["renderBody","renderSubtitle"]);return a}d()(t,[{key:"renderSections",value:function e(){var t=this;return Object(b["map"])(this.props.sections,function(e){return n.a.createElement(_e,{os:t.props.os,browser:t.props.browser,keyboardLocale:t.props.keyboardLocale,key:e.id+e.title,title:e.title,subtitle:e.subtitle,id:e.id,shortcuts:e.shortcuts,enableUnreadView:t.props.enableUnreadView})})}},{key:"renderSubtitle",value:function e(){if(this.props.useGlobalNav)return null;var t=this.props,a=t.featureLocaleEnGb,r=t.featureLocalePtBr;var i="mac"===this.props.os?we.t("Cmd"):we.t("Ctrl");var s=Object(k["d"])("/",{kb:this.props.keyboardLocale,featureLocaleEnGb:a,featureLocalePtBr:r});var o=we.rt('Press <span className="c-keyboard_key c-keyboard_key--slim">{headerCmdButton}</span><span className="c-keyboard_key c-keyboard_key--slim">{headerSlashButton}</span> to toggle this panel.',{headerCmdButton:i,headerSlashButton:s});return n.a.createElement("span",{className:"p-shortcuts_flexpane__sub_heading block"},o)}},{key:"renderBody",value:function e(){var t=this;return n.a.createElement(_["a"],null,function(e){var a=e.width,r=e.height;return n.a.createElement(S["a"],{serializationKey:"keyboard-shortcuts-scrollbar",width:a,height:r,monkey:true},t.renderSections())})}},{key:"render",value:function e(){var t=we.t("Keyboard Shortcuts");return n.a.createElement(ke["a"],{renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,title:t,kbNavOrder:4.6,viewId:"shortcuts"})}}]);return t}(n.a.PureComponent);Se.displayName="KeyboardShortcutsList";Se.defaultProps=je;function Ie(e,t){var a=Object(y["a"])(e);var r=Object(O["isFeatureEnabled"])(e,"feature_locale_en_GB");var n=Object(O["isFeatureEnabled"])(e,"feature_locale_pt_BR");var i=Object(O["isFeatureEnabled"])(e,"feature_react_all_unreads");return{sections:t.sections||Oe(a,{featureLocaleEnGb:r,featureLocalePtBr:n,featureReactAllUnreads:i}),useGlobalNav:Object(j["b"])(e),featureLocaleEnGb:r,featureLocalePtBr:n,enableUnreadView:Object(w["f"])(e,"enable_unread_view")}}var Te=Object(i["connect"])(Ie)(Se);var Ae=Te;var Ne=a(163);var Pe=function e(t,a,r){if(!t)throw new Error("mountKeyboardShortcuts must be called with a teamId parameter");var l=Object(o["d"])(t);var c=r;Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(Ne["a"],null,n.a.createElement(Ae,c))),a)};var Re=Pe;var Me=a(44);Object(Me["a"])("interop.mountKeyboardShortcuts",Re)},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(0);var c=a(2);var u=a(363);var d=a(73);var p=a(61);var h=a(1790);var v=a(284);var m=a(1332);var f=a(205);var b=a(45);var g=a(28);var _=a(10);var y=a(310);var O={appProfile:l["b"].object};var k={appProfile:void 0};function E(e){var t=e.appProfile;if(!t)return null;var a=Object(y["a"])(t.profile,512);return n.a.createElement("div",{className:"p-app_space_profile__side__avatar"},n.a.createElement("img",{className:"rounded",src:a,alt:"app avatar","data-qa":"app_profile_avatar"}))}E.displayName="AppSpaceProfileSideAvatar";E.defaultProps=k;var C=E;var j=a(6);var w=a.n(j);var S=a(7);var I=a.n(S);var T=a(8);var A=a.n(T);var N=a(9);var P=a.n(N);var R=a(21);var M=a(1301);var D=new _["b"]("app_space");var x={showSettingsUrl:l["b"].bool.isRequired,settingsUrl:l["b"].string,homepageUrl:l["b"].string,openAppManagementModal:l["b"].func,appProfile:l["b"].object,clogger:l["b"].object};var F={settingsUrl:void 0,homepageUrl:void 0,openAppManagementModal:c["noop"],appProfile:void 0,clogger:{track:c["noop"]}};var L=function(e){P()(t,e);function t(e){w()(this,t);var a=A()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSettingsButtonClick=a.onSettingsButtonClick.bind(a);a.onWebsiteButtonClick=a.onWebsiteButtonClick.bind(a);return a}I()(t,[{key:"onWebsiteButtonClick",value:function e(){this.props.clogger.track(R["k"].APP_CLICK_LINK_APP_HOMEPAGE_IN_APP_SPACE_ABOUT_TAB,{contexts:{ui_context:{step:R["z"].APP_SPACE_ABOUT_TAB,action:R["v"].CLICK,ui_element:R["y"].LINK_APP_HOMEPAGE}}})}},{key:"onSettingsButtonClick",value:function e(t){var a=this.props.appProfile;this.props.clogger.track(R["k"].APP_CLICK_LINK_APP_SETTINGS_IN_APP_SPACE_ABOUT_TAB,{contexts:{ui_context:{step:R["z"].APP_SPACE_ABOUT_TAB,action:R["v"].CLICK,ui_element:R["y"].LINK_APP_SETTINGS}}});if(Object(f["H"])(a)){t.preventDefault();this.props.openAppManagementModal({serviceId:Object(f["p"])(a),referringEventId:"APP_SPACE_ABOUT_OPEN"})}}},{key:"renderSettingsButton",value:function e(){var t=this.props,a=t.showSettingsUrl,r=t.settingsUrl;var i=D.t("Settings",{fallbackHash:"c7f73bb54d928922c3838bb789ee9fb8a5b1eb37",fallbackHashNs:"app_profile"});if(a)return n.a.createElement(g["d"],{type:"outline",size:"medium",href:r,"data-qa":"app_profile_settings_link",onClick:this.onSettingsButtonClick,className:"p-app_space_profile__side_link",title:i},i);return null}},{key:"renderWebsiteUrl",value:function e(){var t=this.props.homepageUrl;var a=D.t("App Homepage",{fallbackHash:"ee2dbe71c27837ecd0a10d866992e1b3ff0d9b2f",fallbackHashNs:"app_profile"});if(t)return n.a.createElement(g["d"],{type:"outline",size:"medium",href:t,"data-qa":"app_profile_homepage_link",className:"p-app_space_profile__side_link",title:a,onClick:this.onWebsiteButtonClick},a);return null}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-app_space_profile__side__links"},this.renderSettingsButton(),this.renderWebsiteUrl())}}]);return t}(r["PureComponent"]);L.displayName="BaseAppSpaceProfileSideLinks";L.defaultProps=F;var B=function e(t,a){var r=a.appProfile;return{clogger:Object(b["a"])({state:t}),showSettingsUrl:Object(f["A"])(t,r),settingsUrl:Object(f["z"])(t,r),homepageUrl:Object(f["k"])(r)}};var U={openAppManagementModal:M["a"]};var q=Object(i["connect"])(B,U)(L);var G=a(58);var W=a.n(G);var H=a(95);var V=a(141);var K=a(51);var z=a(1789);var Y=a(1168);var Q=a(178);var J=new _["b"]("app_space");var Z={appProfile:l["b"].object,truncatedDescription:l["b"].string,formattedDescription:l["b"].string};var X={appProfile:void 0,truncatedDescription:"",formattedDescription:""};function $(e){var t=e.appProfile,a=e.formattedDescription,i=e.truncatedDescription;var s=Object(r["useState"])(false),o=W()(s,2),l=o[0],c=o[1];if(!t||!a)return null;var u=Object(f["I"])(t);var d=n.a.createElement(z["a"],{formattedDescription:a});return n.a.createElement("section",null,n.a.createElement("div",{className:"p-app_space_profile__description","data-qa":"app_profile_desc"},u?d:n.a.createElement(r["Fragment"],null,n.a.createElement("span",{className:"p-app_space_profile__description__collapsed"},l?d:n.a.createElement(V["a"],{emoji:true,text:i}))," ",n.a.createElement(K["a"],{onClick:function e(){return c(!l)},"data-qa":"toggle-app-description-expansion"},l?J.t("Show less"):J.t("Read more")))))}$.displayName="AppSpaceProfileDescription";$.defaultProps=X;var ee=function e(t,a){var r=a.appProfile;return{truncatedDescription:Object(Y["a"])(t,{messageText:Object(f["s"])(r),teamId:Object(Q["getTeamId"])(t)}),formattedDescription:Object(f["i"])(r)}};var te=Object(i["connect"])(ee)(Object(H["pure"])($));var ae=a(1452);var re=a(4);var ne=new _["b"]("app_space");var ie={isPublished:l["b"].bool,isDistributed:l["b"].bool,appType:l["b"].string,installedUserId:l["b"].string,installerIsYou:l["b"].bool,appName:l["b"].string,appHomeTeamDisplayName:l["b"].string,featureM11nAppSpace:l["b"].bool,featureAddAppHomeTeamName:l["b"].bool};var se={isPublished:false,isDistributed:false,appType:"",installedUserId:"",installerIsYou:false,appName:"",appHomeTeamDisplayName:"",featureM11nAppSpace:false,featureAddAppHomeTeamName:false};function oe(e){var t=e.isPublished,a=e.isDistributed,i=e.appType,s=e.installedUserId,o=e.installerIsYou,l=e.appName,c=e.appHomeTeamDisplayName,u=e.featureM11nAppSpace,d=e.featureAddAppHomeTeamName;if(!t&&u)return n.a.createElement("section",null,n.a.createElement("div",{className:"p-app_space_profile__disclaimer","data-qa":"app_space_profile_disclaimer"},a?n.a.createElement(r["Fragment"],null,ne.t("This app has not been reviewed or approved by Slack.")," ",n.a.createElement(K["a"],{href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team"},ne.t("Learn more")),"."):n.a.createElement(ae["a"],{isError:false,appType:i,memberId:s,installerIsYou:o,appName:l,appHomeTeamDisplayName:c,featureAddAppHomeTeamName:d})));return null}oe.defaultProps=se;function le(e,t){var a=t.appProfile;return{isPublished:Object(f["F"])(a),isDistributed:Object(f["D"])(a),appType:Object(f["t"])(a),installedUserId:Object(f["w"])(a),installerIsYou:Object(f["x"])(e,a),appName:Object(f["n"])(a),appHomeTeamDisplayName:Object(f["j"])(e,a),featureM11nAppSpace:Object(re["isFeatureEnabled"])(e,"feature_m11n_app_space"),featureAddAppHomeTeamName:Object(re["isFeatureEnabled"])(e,"feature_add_app_home_team_name")}}var ce=Object(i["connect"])(le)(oe);var ue=new _["b"]("app_space");var de={appProfile:l["b"].object.isRequired,appName:l["b"].string,isCustomIntegration:l["b"].bool,manageUrl:l["b"].string};var pe={appName:"",isCustomIntegration:false,manageUrl:""};function he(e){var t=e.appProfile,a=e.appName,r=e.isCustomIntegration,i=e.manageUrl;return n.a.createElement("div",{className:"p-app_space_profile__info"},n.a.createElement("div",{className:"p-app_space_profile__side"},n.a.createElement(C,{appProfile:t}),n.a.createElement(q,{appProfile:t})),n.a.createElement("div",{className:"p-app_space_profile__about"},!!a&&n.a.createElement("h2",{className:"p-app_space__header","data-qa":"app_profile_name"},a),n.a.createElement(te,{appProfile:t}),n.a.createElement(ce,{appProfile:t}),r&&n.a.createElement(g["d"],{type:"outline",href:i},ue.t("Manage",{note:"Manage permissions"}))))}he.displayName="AppSpaceProfileInfo";he.defaultProps=pe;var ve=function e(t,a){var r=a.appProfile;return{appName:Object(f["n"])(r),isCustomIntegration:Object(f["C"])(r),manageUrl:Object(f["y"])(t,r)}};var me=Object(i["connect"])(ve)(he);var fe=a(1360);var be=a(168);var ge=a(22);var _e=new _["b"]("app_space");var ye={appName:l["b"].string,appIcon:l["b"].string,appScreenshots:l["b"].array,youtubeUrl:l["b"].string,featureReactFileViewer:l["b"].bool,featureM11nAppSpace:l["b"].bool,openFileViewer:l["b"].func};var Oe={appName:"",appIcon:"",appScreenshots:[],youtubeUrl:"",featureReactFileViewer:false,featureM11nAppSpace:false,openFileViewer:c["noop"]};var ke=function(e){P()(t,e);function t(e){w()(this,t);var a=A()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleYoutubeClick=a.handleYoutubeClick.bind(a);a.handleImageClick=a.handleImageClick.bind(a);return a}I()(t,[{key:"handleYoutubeClick",value:function e(){var t=this.props,a=t.appName,r=t.appScreenshots,n=t.appIcon,i=t.youtubeUrl,s=t.featureReactFileViewer;if(s)this.props.openFileViewer({title:a,youtube:{src:i}});else{var o=Object(f["B"])(i);Object(be["g"])({youtubeId:o,screenshots:r,appName:a,appIcon:n},0)}}},{key:"handleImageClick",value:function e(t){var a=this.props,r=a.appName,n=a.appScreenshots,i=a.appIcon,s=a.youtubeUrl,o=a.featureReactFileViewer;if(o)this.props.openFileViewer({title:r,image:{src:n[t].image_1600,altText:r,thumbnailUrl:n[t].image_440,height:400,width:600}});else{var l=Object(f["B"])(s);var c=s?t+1:t;Object(be["g"])({youtubeId:l,screenshots:n,appName:r,appIcon:i},c)}}},{key:"generateThumbnailUrl",value:function e(t){var a=Object(f["B"])(t);if(""===a)return false;return"https://i.ytimg.com/vi/"+a+"/hqdefault.jpg"}},{key:"renderYoutubeVideo",value:function e(){var t=this.props,a=t.youtubeUrl,r=t.appName,i=t.featureM11nAppSpace;if(!a)return null;var s=this.generateThumbnailUrl(a);if(!s)return null;var o=i?_e.t("Video of {appName}",{note:"Alt text for a screenreader to play a video about an app",appName:r}):"";return n.a.createElement(g["c"],{onClick:this.handleYoutubeClick,className:"p-app_space_profile__screenshots_item"},n.a.createElement("img",{src:s,alt:o,className:"p-app_space_profile__youtube_thumbnail"}),n.a.createElement("div",{className:"p-app_space_profile__youtube_play_button"},n.a.createElement(ge["b"],{type:"play",size:"inherit"})))}},{key:"renderScreenshots",value:function e(){var t=this;var a=this.props,r=a.appScreenshots,i=a.appName,s=a.featureM11nAppSpace;if(!r||!r.length)return null;var o=s?_e.t("Screenshot of {appName}",{note:"Alt text for screenshots of an app in the full screen modal.",appName:i}):"";return r.map(function(e,a){return n.a.createElement(g["c"],{key:e.id,onClick:function e(){return t.handleImageClick(a)},className:"p-app_space_profile__screenshots_item"},n.a.createElement("img",{src:e.image_440,alt:o}))})}},{key:"render",value:function e(){var t=this.props,a=t.youtubeUrl,r=t.appScreenshots;if((!r||!r.length)&&(!a||""===a))return null;return n.a.createElement("div",{className:"p-app_space__screenshots"},n.a.createElement("h3",{className:"p-app_space__subheader"},_e.t("Screenshots",{note:"Heading for screenshots of an app in the app profile."})),n.a.createElement("div",{className:"p-app_space_profile__screenshots","data-qa":"app_profile_screenshots"},this.renderYoutubeVideo(),this.renderScreenshots()))}}]);return t}(r["PureComponent"]);ke.displayName="AppSpaceScreenshots";ke.defaultProps=Oe;ke.displayName="AppSpaceScreenshots";var Ee=ke;function Ce(e,t){var a=t.appProfile;return{youtubeUrl:Object(f["u"])(a),appScreenshots:Object(f["o"])(a),appName:Object(f["n"])(a),appIcon:Object(y["a"])(a.profile,512),featureReactFileViewer:Object(re["isFeatureEnabled"])(e,"feature_react_file_viewer"),featureM11nAppSpace:Object(re["isFeatureEnabled"])(e,"feature_m11n_app_space")}}var je=function e(t){return{openFileViewer:function e(a){return t(Object(fe["a"])(a))}}};var we=Object(i["connect"])(Ce,je)(Ee);var Se=a(399);var Ie=a(710);var Te=new _["b"]("app_space");var Ae={autoFillSlashCommand:l["b"].func,clogger:l["b"].object,command:l["b"].shape({name:l["b"].string.isRequired,usage:l["b"].string.isRequired,description:l["b"].string.isRequired}).isRequired,appId:l["b"].string,botId:l["b"].string};var Ne={autoFillSlashCommand:c["noop"],clogger:{track:c["noop"]},appId:"",botId:""};function Pe(e){var t=e.autoFillSlashCommand,a=e.clogger,i=e.appId,s=e.botId,o=e.command;var l=Object(Se["f"])(o);var c=Object(Se["h"])(o);var u=Object(Se["e"])(o);var d=Object(r["useCallback"])(function(){t({commandName:l});a.track(R["k"].APP_SPACE_ABOUT_SLASH_COMMAND_CLICK,{app_id:i,bot_id:s,contexts:{core:{app_id:i,bot_id:s}}})},[t,l,a,i,s]);return n.a.createElement("div",{className:"p-app_space_profile__slash_command","data-qa":"app_space_profile_slash_command"},n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("strong",null,l),n.a.createElement("span",null,c)),n.a.createElement("div",{className:"p-app_space_profile__slash_command_desc"},u)),n.a.createElement("div",null,n.a.createElement(g["d"],{type:"outline","data-qa":l,onClick:d},Te.t("Start command"))))}Pe.displayName="AppSpaceSlashCommand";Pe.defaultProps=Ne;var Re=function e(t){return{clogger:Object(b["a"])({state:t})}};var Me={autoFillSlashCommand:function e(){return Ie["a"].apply(void 0,arguments)}};var De=Object(i["connect"])(Re,Me)(Pe);var xe=new _["b"]("app_space");var Fe={appProfile:l["b"].object.isRequired,featureM11nAppSpace:l["b"].bool};var Le={featureM11nAppSpace:false};function Be(e){var t=e.appProfile,a=e.featureM11nAppSpace;var i=Object(f["d"])(t);var s=Object(f["l"])(t);var o=Object(f["p"])(t);if(!i||!i.length)return null;if(!a)return null;return n.a.createElement(r["Fragment"],null,n.a.createElement("h3",{className:"p-app_space__subheader"},n.a.createElement("span",null,xe.t("Commands",{note:"Slash commands the app responds to"})),n.a.createElement("span",{className:"p-app_space__subheader__helper"},xe.t("Use / to start commands in any conversation",{note:"How to use slash commands helper text"}))),n.a.createElement("div",{className:"p-app_space_profile__slash_commands"},n.a.createElement("section",null,i.map(function(e){return n.a.createElement(De,{key:e.name,command:e,appId:s,botId:o})}))))}Be.displayName="AppSpaceSlashCommands";Be.defaultProps=Le;var Ue=function e(t){return{featureM11nAppSpace:Object(re["isFeatureEnabled"])(t,"feature_m11n_app_space")}};var qe=Object(i["connect"])(Ue)(Be);var Ge=a(3138);var We={appProfile:l["b"].object,clogger:l["b"].object};var He={appProfile:void 0,clogger:{track:c["noop"]}};function Ve(e){var t=e.clogger,a=e.appProfile;var i=Object(f["l"])(a);var s=Object(f["p"])(a);var o=Object(r["useCallback"])(function(){t.track("APP_SPACE_ABOUT_OPEN",{app_id:i,bot_id:s,contexts:{core:{app_id:i,bot_id:s}}})},[t,i,s]);var l=Object(r["useCallback"])(function(){return Object(m["b"])(a,s)},[a,s]);Object(r["useEffect"])(function(){if(i&&s){l();o()}},[i,s,o,l]);if(!a||Object(p["e"])(a))return null;return n.a.createElement("div",{className:"p-app_space_profile","data-qa":"app_space_profile"},n.a.createElement(me,{appProfile:a}),n.a.createElement(we,{appProfile:a}),n.a.createElement(qe,{appProfile:a}))}Ve.displayName="BaseAppSpace";Ve.defaultProps=He;var Ke=function e(t){var a=Object(d["a"])(t);var r=Object(h["a"])(t,a);if(!r||!Object(v["n"])(t))return{};return{appProfile:Object(u["getAppProfileByChannelId"])(t,a),clogger:Object(b["a"])({state:t})}};var ze=Object(i["connect"])(Ke)(Ve);var Ye=a(163);var Qe=function e(t,a){if(!t)throw new Error("mountAppSpace must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["d"])(t)},n.a.createElement(Ye["a"],null,n.a.createElement(ze,null))),a)};var Je=Qe;var Ze=a(44);Object(Ze["a"])("interop.mountAppSpace",Je)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(88);var o=a.n(s);var l=a(119);var c=a(27);var u=a(6);var d=a.n(u);var p=a(7);var h=a.n(p);var v=a(8);var m=a.n(v);var f=a(9);var b=a.n(f);var g=a(0);var _=a(2);var y=a(10);var O=a(39);var k=a(4);var E=a(759);var C=a(1369);var j=a(921);var w=a(3);var S=a.n(w);var I=a(26);var T=a.n(I);var A=a(2414);var N=a(207);var P=a(16);var R=a.n(P);var M=a(1352);var D=a(15);var x=a(85);var F=a(77);var L=a(17);var B=a(34);var U=a(683);var q=a(1530);var G=a(164);var W=new y["b"]("files");var H=Object(D["b"])("build file summary for aria labels",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.fileId,n=a.hasFocus;var i=t();if(!Object(k["isFeatureEnabled"])(i,"feature_modern_starred_items"))return;if(!(Object(U["isScreenReaderEnabled"])(i)||n))return;var s=Object(x["getFileById"])(i,r);if(!s)return;var o=s.created,l=s.timestamp,c=s.user;var u=o||l;var d=Object(F["isExternal"])(s)?Object(q["a"])(s):Object(F["getFileType"])(s);var p=Object(F["getFileDisplayName"])(s);var h=Object(L["getPrefCompliantMemberNameById"])(i,c);var v=Object(G["i"])(u,{shortenMonth:false,excludeYear:Object(G["h"])(u)});var m=Object(B["f"])(i,"time24");var f=Object(G["n"])(u,{do24hrTime:m});var b=W.t("{fileType} file {fileName} uploaded by {userName} on {dateStr} at {timeStr}",{fileType:d,fileName:p,userName:h,dateStr:v,timeStr:f});return b});H.propTypes={fileId:g["b"].string.isRequired,hasFocus:g["b"].bool};var V=H;var K=a(1368);var z=a(537);var Y=a(96);var Q=a(3257);var J=function e(){return n.a.createElement("div",{className:"p-flexpane__loader_item"},n.a.createElement(Y["a"],{noMargin:true,size:"medium"}))};J.displayName="FlexpaneLoaderItem";var Z=J;var X=a(55);var $=a(1092);var ee=a(925);var te=a(926);var ae=a(1093);var re=a(1776);var ne=a(762);var ie=a(1066);var se=a(1778);var oe=a(1779);var le=a(1214);var ce=a(1347);var ue=a(1095);var de=a(1832);var pe=a(1215);var he=a(1722);var ve={msg:g["b"].object.isRequired,className:g["b"].string,"data-qa":g["b"].string};var me={className:void 0,"data-qa":void 0};var fe=function(e){b()(t,e);function t(){d()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"renderContent",value:function e(t){var a=X["a"].starred_message;return t.blocks?n.a.createElement(ie["a"],{msg:t,blocksContainerContext:a}):n.a.createElement(ae["a"],{msg:t})}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t["data-qa"];var i=R()("p-starred_item__message",this.props.className);return n.a.createElement(ue["a"],{className:i,"data-qa":r},n.a.createElement(ce["a"],{msg:a},n.a.createElement(pe["a"],{msg:a,position:"inside",className:"p-starred_item__message_actions",showComment:false,showShare:false,showReact:false,showJump:true,showMoreActions:false,jumpOrigin:"starred_items"},n.a.createElement(le["a"],{light:n.a.createElement($["a"],{msg:a,size:36})},n.a.createElement(ee["a"],{msg:a}),"\xa0\xa0",n.a.createElement(te["a"],{msg:a,full:true}),n.a.createElement("br",null),this.renderContent(a),n.a.createElement(re["a"],{msg:a}),n.a.createElement(ne["b"],{msg:a}),n.a.createElement(de["a"],{flexOrigin:"starred_items",msg:a}),n.a.createElement("div",{className:"p-starred_item_message__reactions_and_replies"},n.a.createElement(se["a"],{msg:a}),n.a.createElement(oe["a"],{msg:a,flexOrigin:"starred_items"}))))))}}]);return t}(r["PureComponent"]);fe.displayName="StarredItemMessage";fe.defaultProps=me;var be=fe;var ge=a(100);var _e=a(1794);var ye={file:g["b"].object.isRequired,id:g["b"].string.isRequired,className:g["b"].string,useRowAction:g["b"].bool,previewFile:g["b"].func,"data-qa":g["b"].string};var Oe={className:void 0,useRowAction:true,previewFile:_["noop"],"data-qa":void 0};var ke=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onFileClick=a.onFileClick.bind(a);return a}h()(t,[{key:"onFileClick",value:function e(t,a){if(!a)return;var r="starred_items";this.props.previewFile({fileId:a.id,flexOrigin:r})}},{key:"render",value:function e(){var t=R()("p-starred_item__message",this.props.className);var a=this.props["data-qa"];if(!this.props.file)return null;return n.a.createElement(_e["a"],{file:this.props.file,className:t,key:this.props.id,useRowAction:this.props.useRowAction,includeRootDownloadAction:false,includeRootStarAction:true,fullWidth:true,onClick:this.onFileClick,"data-qa":a})}}]);return t}(r["PureComponent"]);ke.displayName="StarredItemFile";ke.defaultProps=Oe;var Ee=function e(t,a){var r=a.id;return{file:Object(x["getFileById"])(t,r)}};var Ce=Object(i["connect"])(Ee,{previewFile:ge["c"]})(ke);var je={comment:g["b"].object,fileId:g["b"].string,className:g["b"].string,"data-qa":g["b"].string};var we={comment:void 0,fileId:void 0,className:void 0,"data-qa":void 0};var Se=function(e){b()(t,e);function t(){d()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=this.props,a=t.comment,r=t.fileId,i=t.className,s=t["data-qa"];if(!a)return null;var o={user:a.user,ts:a.timestamp.toString(),subtype:"file_comment",comment:a,files:[r]};return n.a.createElement(be,{msg:o,className:i,"data-qa":s})}}]);return t}(r["PureComponent"]);Se.displayName="StarredItemFileComment";Se.defaultProps=we;var Ie=function e(t,a){var r=a.fileId,n=a.commentId;return{comment:Object(x["getFileCommentById"])(t,r,n)}};var Te=Object(i["connect"])(Ie)(Se);var Ae=new y["b"]("starred_items");var Ne=Object(K["b"])(be);var Pe={fetchMoreItems:g["b"].func,isLoading:g["b"].bool,items:g["b"].arrayOf(g["b"].object.isRequired),makeMessageSummary:g["b"].func.isRequired,makeFileSummary:g["b"].func.isRequired,featureModernStarredItems:g["b"].bool.isRequired};var Re={fetchMoreItems:_["noop"],isLoading:false,items:void 0};var Me={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment"};var De=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(a,["renderItem","isFocusableItem","getAriaLabelForRow","onFocusEnter","onFocusLeave"]);a.getItemKeys=Object(N["createSelector"])(function(e){var t=e.items;return t},function(e){var t=e.isLoading;return t},function(e,t){var r=["top-anchor-hack"];var n=e.map(function(e){return a.getStarredItemId(e)});r.push.apply(r,T()(n));t&&r.push("loader");return r});a.state={hasKeyboardFocus:false};return a}h()(t,[{key:"onFocusEnter",value:function e(t){this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getStarredItemId",value:function e(t){switch(t.type){case Me.MESSAGE:return t.channel+t.ts;case Me.FILE:return t.id;case Me.FILE_COMMENT:return t.id;default:return null}}},{key:"getAriaLabelForRow",value:function e(t){var a=this.props.items;var r=this.state.hasKeyboardFocus;var n=a[t-1];if(!n||!n.type)return null;if(n.type===Me.MESSAGE)return this.props.makeMessageSummary({channelId:n.channel,ts:n.ts,hasFocus:r,day:{ts:n.ts,isFirstDay:false,isLastDay:false}});return this.props.makeFileSummary({fileId:n.id,hasFocus:r})}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.props,n=r.isLoading,i=r.items;var s=this.getItemKeys({isLoading:n,items:i});var o=s[a];if(!o)return false;if("top-anchor-hack"===o)return false;if("loader"===o)return false;return true}},{key:"renderItem",value:function e(t){var a=this.props,r=a.isLoading,i=a.items;var s=this.getItemKeys({isLoading:r,items:i});if("top-anchor-hack"===s[t])return n.a.createElement("div",{className:"p-starred_item__top_anchor_item_hack"});if("loader"===s[t])return n.a.createElement(Z,null);var o=i[t-1];var l={key:this.getStarredItemId(o),className:R()("p-starred_item",{"p-starred_item--first":o===i[0]}),"data-qa":"starred_item_"+o.type};switch(o.type){case Me.MESSAGE:return n.a.createElement(Ne,S()({},l,{channelId:o.channel,ts:o.ts}));case Me.FILE:return n.a.createElement(Ce,S()({},l,{id:o.id}));case Me.FILE_COMMENT:return n.a.createElement(Te,S()({},l,{fileId:o.fileId,commentId:o.id}));default:return null}}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.isLoading,i=a.items;return n.a.createElement(A["a"],null,function(e){var a=e.width,s=e.height;return n.a.createElement(z["a"],{width:a,height:s,keys:t.getItemKeys({isLoading:r,items:i}),rowRenderer:t.renderItem,loadPost:t.props.fetchMoreItems,animateOnScroll:false,ariaLabel:Ae.t("Starred Items"),getAriaLabelForRow:t.getAriaLabelForRow,isFocusableItem:t.isFocusableItem,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave})})}}]);return t}(r["PureComponent"]);De.displayName="StarredItemsList";De.defaultProps=Re;var xe=function e(t){return{featureModernStarredItems:Object(k["isFeatureEnabled"])(t,"feature_modern_starred_items")}};function Fe(e){return{makeMessageSummary:function t(){return e(M["a"].apply(void 0,arguments))},makeFileSummary:function t(){return e(V.apply(void 0,arguments))}}}var Le=Object(i["connect"])(xe,Fe)(De);var Be=new y["b"]("starred_items");var Ue={currentPage:g["b"].number.isRequired,featureModernStarredItems:g["b"].bool.isRequired,fetchStarsList:g["b"].func,isLoading:g["b"].bool,starredItems:g["b"].arrayOf(g["b"].object.isRequired),totalPages:g["b"].number.isRequired};var qe={fetchStarsList:_["noop"],isLoading:false,starredItems:void 0};var Ge=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(a,["fetchMoreStarredItems","fetchStarredItems","renderEmpty"]);return a}h()(t,[{key:"onBlur",value:function e(){return null}},{key:"onFocus",value:function e(){return null}},{key:"fetchStarredItems",value:function e(t){if(t&&t>this.props.totalPages)return;this.props.fetchStarsList({exclude:"Ch,Gh,Dh",count:20,page:t})}},{key:"fetchMoreStarredItems",value:function e(){if(this.props.isLoading)return;this.fetchStarredItems(this.props.currentPage+1)}},{key:"renderEmpty",value:function e(t){var a=t.isOffline;if(!this.props.featureModernStarredItems)return null;if(a)return n.a.createElement(C["a"],{title:Be.t("Couldn\u2019t load your Starred Items"),description:Be.t("Try again when you\u2019re online"),primaryActionText:Be.t("Retry"),onClickPrimaryAction:this.fetchStarredItems});return n.a.createElement(C["a"],{imageUrl:cdn_url+"/b83595/img/posts.png",imageUrl2x:cdn_url+"/b83595/img/posts@2x.png",title:Be.t("Save important items"),description:Be.t("Any messages or files you mark with a star are added here so that you can easily reference them again later.")})}},{key:"render",value:function e(){var t=this;if(!this.props.featureModernStarredItems)return null;return n.a.createElement(j["a"],{className:"p-starred_items_flexpane",isEmpty:Object(_["isEmpty"])(this.props.starredItems),isLoading:this.props.isLoading,onBlur:this.onBlur,onFocus:this.onFocus,renderBody:function e(){return n.a.createElement(Le,{fetchMoreItems:t.fetchMoreStarredItems,isLoading:t.props.isLoading,items:t.props.starredItems})},renderEmpty:this.renderEmpty,title:Be.t("Starred Items"),viewId:O["MESSAGE_CONTAINERS"].STARS_FLEXPANE,kbNavOrder:4.3})}}]);return t}(r["PureComponent"]);Ge.displayName="StarredItemsFlexpane";Ge.defaultProps=qe;var We=function e(t){return{currentPage:Object(E["getCurrentPageNumber"])(t),featureModernStarredItems:Object(k["isFeatureEnabled"])(t,"feature_modern_starred_items"),isLoading:Object(E["getLoadingState"])(t),starredItems:Object(E["getAllStarredItems"])(t),totalPages:Object(E["getTotalPages"])(t)}};var He={fetchStarsList:function e(){return E["fetchStarsList"].apply(void 0,arguments)}};var Ve=Object(i["connect"])(We,He)(Ge);var Ke=Ve;var ze=a(163);var Ye=function e(t,a){if(!t)throw new Error("mountStarredItemsFlexpane must be called with a teamId parameter");var r=Object(c["d"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(ze["a"],null,n.a.createElement(Ke,null))),a)};var Qe=function e(t){o.a.unmountComponentAtNode(t)};var Je=a(44);Object(Je["a"])("interop.mountStarredItemsFlexpane",Ye);Object(Je["a"])("interop.unmountStarredItemsFlexpane",Qe)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(27);var c=a(44);var u=a(6);var d=a.n(u);var p=a(7);var h=a.n(p);var v=a(8);var m=a.n(v);var f=a(9);var b=a.n(f);var g=a(0);var _=a(2);var y=a(10);var O=a(159);var k=a(392);var E=a(28);var C=a(50);var j=a(22);var w=a(16);var S=a.n(w);var I={headerAction:g["b"].node};var T={headerAction:null};var A=function(e){b()(t,e);function t(){d()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){return n.a.createElement("div",{className:"margin_left_75"},this.props.headerAction)}}]);return t}(r["PureComponent"]);A.displayName="OrgDashboardHeaderItem";A.defaultProps=T;var N=A;var P={title:g["b"].node.isRequired,headerActions:g["b"].array,headerClassName:g["b"].string};var R={headerActions:[],headerClassName:""};var M=function(e){b()(t,e);function t(){d()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"renderActionItems",value:function e(){var t=this.props.headerActions;var a=Object(_["map"])(t,function(e,t){return n.a.createElement(N,{key:t,headerAction:e})});return a}},{key:"render",value:function e(){var t=this.props.headerClassName;var a=S()("margin_left_75","display_flex","justify_content_between",""+t);return n.a.createElement("div",{className:a},n.a.createElement("h1",null,this.props.title),n.a.createElement("div",{className:"display_flex align_items_center"},this.renderActionItems()))}}]);return t}(r["PureComponent"]);M.displayName="OrgDashboardHeader";M.defaultProps=R;var D=M;var x=D;var F=a(3080);var L=new y["b"]("enterprise_dashboard");var B={pageHeader:g["b"].string};var U={pageHeader:""};var q=function(e){b()(t,e);function t(){d()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"render",value:function e(){var t=cdn_url+"/91b7a/img/enterprise/empty_apps_state.png";var a=L.t("No apps have been installed on this workspace.");return n.a.createElement("div",{className:"padding_left_250 padding_right_250 padding_top_200 full_height full_width position_relative"},n.a.createElement(x,{title:this.props.pageHeader,headerClassName:"margin_bottom_150"}),n.a.createElement("div",{className:"display_flex flex_direction_column align_items_center position_absolute p-team_apps_empty_content"},n.a.createElement("img",{src:t,alt:"",className:"auto_width margin_bottom_100"}),n.a.createElement("h3",{className:"black margin_bottom_75"},a)))}}]);return t}(r["PureComponent"]);q.displayName="TeamAppsEmptyState";q.defaultProps=U;var G=q;var W=a(128);var H=a(920);var V=a(138);var K=new y["b"]("enterprise_dashboard");var z={teamApps:g["b"].array,teamId:g["b"].string.isRequired,teamAppsApiCursor:g["b"].string,teamAppsApiTotal:g["b"].number,teamAppsLoading:g["b"].bool,headerItemOnClick:g["b"].func,pageSize:g["b"].number,sortBy:g["b"].string,sortDir:g["b"].string,searchQuery:g["b"].string,rowHeaderItemClassName:g["b"].string,rowClassName:g["b"].string,featureWtaOrgLevelApps:g["b"].bool};var Y={teamApps:[],headerItemOnClick:_["noop"],pageSize:50,sortBy:"name",sortDir:null,searchQuery:"",teamAppsApiCursor:null,teamAppsApiTotal:null,teamAppsLoading:false,rowHeaderItemClassName:"p-app_management_table_view_header_item",rowClassName:"p-app_management_table_view_row",featureWtaOrgLevelApps:false};var Q="asc";var J="desc";var Z="caret_down";var X="caret_up";var $={};$[Q]=Z;$[J]=X;var ee=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=a.props,i=r.featureWtaOrgLevelApps,s=r.sortBy,o=r.sortDir;a.state={rowListItems:[],sortBy:s,sortDir:o,offset:0};a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(a);a.onRequestNextPage=a.onRequestNextPage.bind(a);a.appSources={internal:K.t("Internal"),"app directory":K.t("App Directory"),unknown:K.t("Unknown")};a.sourceTooltipStrings={"app directory":K.t("This app has been installed from the Slack App Directory."),internal:K.t("This app was created by someone within your organization."),unknown:K.t("This app was installed from an unknown external source.")};a.rowTemplate={items:[{value:function e(t){var r=t&&t.icons&&t.icons.image_72;return n.a.createElement(W["a"],{className:"p-app_management_table_view_app_name",onClick:function e(){return a.onAppNameClick(t.id)}},r&&n.a.createElement("img",{src:r,style:{width:"36px",height:"36px",verticalAlign:"middle",marginRight:"1rem"},alt:t.name}),t.name)}},{value:function e(t){var a=t.installed_by&&t.installed_by.count;return K.t("{installCount, plural, =1 {# member} other {# members}}",{installCount:a})}},{value:function e(t){var a=t.installed_by&&t.installed_by.first_installation&&t.installed_by.first_installation.date;var r=new Date(1e3*a).toLocaleDateString();return""+r}},{value:function e(t){var r=a.sourceTooltipStrings[t.source];var i=a.appSources[t.source]||a.appSources.unknown;return n.a.createElement("div",null,n.a.createElement(C["c"],{tip:r,position:"top"},n.a.createElement("span",null,i)))}}]};a.emptyRowTemplate={items:[{value:function e(t){var a=t.searchQuery;var r=K.rt("No apps were found matching <b>{query}</b>",{query:a});return n.a.createElement("div",{className:"align_center"},r)}}]};a.headerData=[{id:"name",value:K.t("Name"),sortable:true},{id:"installed_by",value:i?K.t("Authorized By"):K.t("Installed By"),sortable:true},{id:"installed_on",value:i?K.t("Authorized On"):K.t("Installed On"),sortable:true},{id:"source",value:K.t("Source"),sortable:true}];return a}h()(t,[{key:"componentWillMount",value:function e(){var t=this.props,a=t.teamApps,r=t.sortBy;var n=this.state.offset;a.length?this.updateRowListItemsData(n):Object(O["b"])(Object(O["a"])().teams.setTeamAppsLoading(true));Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortBy(r))}},{key:"componentDidUpdate",value:function e(t){this.maybeUpdateListRowItems(t);this.maybeUpdateSearchQuery(t);this.maybeFetchNextPage(t)}},{key:"onRequestNextPage",value:function e(t){var a=this.props,r=a.teamApps,n=a.teamAppsApiTotal;if(n&&r.length>=n)return;var i={offset:t};this.setState(function(){return i},function(){Object(O["b"])(Object(O["a"])().teams.setTeamAppsLoading(true))})}},{key:"onAppNameClick",value:function e(t){return Object(O["b"])(Object(O["a"])().router.navigateTo("/organization/apps/profile/"+t+"/"+this.props.teamId))}},{key:"maybeFetchNextPage",value:function e(t){var a=this.props.teamAppsLoading;a&&!t.teamAppsLoading&&this.fetchNewPage()}},{key:"maybeUpdateSearchQuery",value:function e(t){var a=this.props.searchQuery;if(t.searchQuery!==a){Object(O["b"])(Object(O["a"])().teams.setTeamAppsSearchQuery(a));this.resetTeamAppsState()}}},{key:"maybeUpdateListRowItems",value:function e(t){var a=this.state.offset;var r=this.props,n=r.searchQuery,i=r.teamApps,s=r.teamAppsLoading;t.teamApps===i&&t.searchQuery===n&&t.teamAppsLoading===s||this.updateRowListItemsData(a)}},{key:"headerItemOnClick",value:function e(t){var a=this;var r=this.state,n=r.sortBy,i=r.sortDir;var e=this.props.headerItemOnClick;var s=n;var o=i;if(t.id===n){o=i&&i!==Q?Q:J;Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortDir(o))}else{s=t.id;o=t.defaultSortType?t.defaultSortType===Q?J:Q:J;Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortDir(o));Object(O["b"])(Object(O["a"])().teams.setTeamAppsSortBy(s))}var l={sortBy:s,sortDir:o};this.setState(function(){return l},function(){a.resetTeamAppsState();e&&e(t)})}},{key:"resetTeamAppsState",value:function e(){Object(O["b"])(Object(O["a"])().teams.setTeamAppsApiTotal(null));Object(O["b"])(Object(O["a"])().teams.resetTeamAppsApiCursor());Object(O["b"])(Object(O["a"])().teams.resetTeamApps());Object(O["b"])(Object(O["a"])().teams.setTeamAppsLoading(true))}},{key:"makeHeader",value:function e(t){var a={id:t.id,value:t.value};if(t.sortable){a.iconType=this.determineSortState(t.id,t);a.onClick=this.headerItemOnClick;t.defaultSortType&&(a.defaultSortType=t.defaultSortType)}return a}},{key:"makeHeaders",value:function e(t){var a=this;var r=[];t.forEach(function(e){r.push(a.makeHeader(e))});return r}},{key:"determineSortState",value:function e(t,a){var r=this.state,n=r.sortBy,i=r.sortDir;var s=a.defaultSortType||Q;var o=$[s];if(!n||n!==t)return o;var l=void 0;l=i?i===Q?Z:X:$[s];return l}},{key:"resetAPICursorMark",value:function e(){Object(O["b"])(Object(O["a"])().teams.setTeamAppsApiCursor(null))}},{key:"fetchNewPage",value:function e(){var t=this.state,a=t.sortBy,r=t.sortDir;var n=this.props,i=n.pageSize,s=n.searchQuery,o=n.teamAppsApiCursor,l=n.teamId;var c={limit:i};a&&(c.sort=a);r&&(c.sort_dir=r);null!==s&&void 0!==s&&Object(_["trim"])(s).length&&(c.query=s);o&&(c.cursor=o);c.team=l;Object(O["b"])(Object(O["a"])().teams.getAppsByWorkspace(l,c))}},{key:"updateRowListItemsData",value:function e(t){var a=this;var r=this.props,n=r.teamApps,i=r.teamAppsLoading;var s=[];var o=t||0;var l=0;var c={rowListItems:s};function u(){l+=1;return"row_"+o+"_item"+l}function d(e,t){var a={id:"row_"+o,items:[]};if(!t||!t.items)return[];t.items.forEach(function(t){var r={value:t.value(e),id:u()};t.className&&(r.className=t.className);a.items.push(r)});o+=1;return a}if(n&&n.length)n.forEach(function(e){s.push(d(e,a.rowTemplate))});else if(!i){var p=this.props.searchQuery;if(null===p||void 0===p||!p.length){this.setState(c);return}var h=[{searchQuery:p}];h.forEach(function(e){s.push(d(e,a.emptyRowTemplate))})}this.setState(c)}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.sortBy,i=a.sortDir,s=a.rowListItems,o=a.offset;var l=this.props,c=l.rowHeaderItemClassName,u=l.rowClassName,d=l.searchQuery,p=l.teamAppsLoading;var h=this.makeHeaders(this.headerData);return n.a.createElement("div",null,n.a.createElement(H["a"],{autoHeight:true,rows:s,headers:h,rowHeaderItemClassName:c,rowClassName:u,headerItemOnClick:this.headerItemOnClick,onRequestNextPage:this.onRequestNextPage,sortBy:r,sortDir:i,searchQuery:d,isLoading:p,newQuery:!o,ref:function e(a){t.tableViewControllerRef=a}}))}}]);return t}(r["PureComponent"]);ee.displayName="TeamAppsList";ee.defaultProps=Y;var te=Object(V["a"])("feature_wta_org_level_apps")(ee);var ae=new y["b"]("enterprise_dashboard");var re={teamId:g["b"].string.isRequired,teamApps:g["b"].array,teamAppsApiCursor:g["b"].string,teamAppsApiTotal:g["b"].number,teamAppsCount:g["b"].number,teamAppsLoading:g["b"].bool,teamAppsSearchQuery:g["b"].string,teamAppsTeamUrl:g["b"].string,teamAppsSortBy:g["b"].string,teamAppsSortDir:g["b"].string};var ne={teamApps:[],teamAppsApiCursor:null,teamAppsApiTotal:null,teamAppsCount:0,teamAppsLoading:false,teamAppsSearchQuery:"",teamAppsTeamUrl:null,teamAppsSortBy:null,teamAppsSortDir:null};var ie=333;var se=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onSearchInputChange=Object(_["debounce"])(a.onSearchInputChange,ie,{trailing:true}).bind(a);a.generateTeamsForAppCSV=a.generateTeamsForAppCSV.bind(a);return a}h()(t,[{key:"onSearchInputChange",value:function e(t){t.persist();var a=Object(_["get"])(t,"target.value","");Object(O["b"])(Object(O["a"])().teams.setTeamAppsSearchQuery(a))}},{key:"getTeamAppListProps",value:function e(){return{teamId:this.props.teamId,teamApps:this.props.teamApps,teamAppsApiCursor:this.props.teamAppsApiCursor,teamAppsApiTotal:this.props.teamAppsApiTotal,teamAppsLoading:this.props.teamAppsLoading,searchQuery:this.props.teamAppsSearchQuery,isLoading:this.props.teamAppsLoading}}},{key:"formatHeader",value:function e(){var t=parseInt(this.props.teamAppsCount,10);if(!Number.isNaN(t))return ae.t("{count} Apps",{count:this.props.teamAppsCount});return ae.t("Apps")}},{key:"generateTeamsForAppCSV",value:function e(){var t={type:"apps",team_id:this.props.teamId};this.props.teamAppsSearchQuery&&(t.query=this.props.teamAppsSearchQuery);if(this.props.teamAppsSortBy){t.sort_prefix=this.props.teamAppsSortBy;this.props.teamAppsSortDir&&(t.sort_dir=this.props.teamAppsSortDir)}Object(O["b"])(Object(O["a"])().apps.generateAppsCSVForSlackbotDM(t))}},{key:"renderManageAppsButton",value:function e(){var t=this.props.teamAppsTeamUrl;var a=t&&t+"apps/manage"||null;var r=ae.t("Manage Apps");if(a)return n.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},n.a.createElement(E["d"],{type:"outline"},r,n.a.createElement(j["a"],{type:"external_link",className:"p-export_csv_button_caret"})));var i=ae.t("You must join this workspace to manage its apps.");return n.a.createElement(C["c"],{tip:i,position:"top"},n.a.createElement("div",null,n.a.createElement(E["d"],{type:"outline",disabled:true},r,n.a.createElement(j["a"],{type:"external_link",className:"p-export_csv_button_caret"}))))}},{key:"renderAppFilterInput",value:function e(){var t=ae.t("Filter by name...");return n.a.createElement(k["a"],{placeholder:t,icon:"search",autoFocus:false,isLoading:this.props.teamAppsLoading,onChange:this.onSearchInputChange,value:this.props.teamAppsSearchQuery})}},{key:"render",value:function e(){var t=[this.renderManageAppsButton()];if(0===this.props.teamAppsCount&&this.props.teamAppsApiCursor&&Object(_["isNull"])(this.props.teamAppsSearchQuery)){var a=ae.t("Apps");return n.a.createElement(G,{pageHeader:a})}var r=this.getTeamAppListProps();return n.a.createElement("div",{className:"padding_left_250 padding_right_250 padding_top_200"},n.a.createElement(x,{title:this.formatHeader(),headerActions:t,headerClassName:"margin_bottom_150"}),this.renderAppFilterInput(),n.a.createElement("div",{className:"p-app_management_team_apps_list"},n.a.createElement(te,r)))}}]);return t}(r["PureComponent"]);se.displayName="TeamApps";se.defaultProps=ne;var oe=se;var le=oe;Object(c["a"])("interop.teamApps",{render:function e(t,a,r){if(!t)throw new Error("Team Apps render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(le,r)),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(27);var c=a(44);var u=a(6);var d=a.n(u);var p=a(7);var h=a.n(p);var v=a(8);var m=a.n(v);var f=a(9);var b=a.n(f);var g=a(0);var _=a(10);var y=a(3088);var O={title:g["b"].string,subtitle:g["b"].string,description:g["b"].node};var k={title:"",subtitle:"",description:null};var E=function(e){b()(t,e);function t(){d()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"renderTitle",value:function e(){if(!this.props.title)return null;return n.a.createElement("h1",{className:"padding_bottom_100"},this.props.title)}},{key:"renderSubtitle",value:function e(){if(!this.props.subtitle)return null;return n.a.createElement("h3",{className:"padding_top_150"},this.props.subtitle)}},{key:"renderDescription",value:function e(){if(!this.props.description)return null;return n.a.createElement("p",{className:"padding_top_50 margin_0 sk_dark_grey"},this.props.description)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-ent_settings_header padding_bottom_150"},this.renderTitle(),this.renderSubtitle(),this.renderDescription())}}]);return t}(r["PureComponent"]);E.displayName="SettingsHeader";E.defaultProps=k;var C=E;var j=a(37);var w=a.n(j);var S=a(3);var I=a.n(S);var T=a(2);var A=a(159);var N=a(48);var P=a(84);var R=a(1562);var M=a(126);var D=a(54);var x=new _["b"]("enterprise_settings");var F={membersShowAll:g["b"].bool,guestsShowAll:g["b"].bool,onSubmit:g["b"].func.isRequired};var L={membersShowAll:true,guestsShowAll:true};var B=function e(t){var a=t.type,r=t.value,i=t.label,s=t.onChange;return n.a.createElement(D["a"],{id:"tos_accept_all_"+a+"_label",htmlFor:"tos_accept_all_"+a+"_checkbox",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_accept_all_form__label",text:i},n.a.createElement(M["a"],{id:"tos_accept_all_"+a+"_checkbox",checked:r,onChange:s}))};B.displayName="renderCheckbox";var U=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={membersShowAll:a.props.membersShowAll,guestsShowAll:a.props.guestsShowAll};Object(T["bindAll"])(a,["onMembersShowAllChange","onGuestsShowAllChange"]);return a}h()(t,[{key:"onMembersShowAllChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{membersShowAll:a}})}},{key:"onGuestsShowAllChange",value:function e(t){var a=t.target.checked;this.setState(function(){return{guestsShowAll:a}})}},{key:"submit",value:function e(t){var a=this.state,r=a.membersShowAll,n=a.guestsShowAll;var i={membersShowAll:r,guestsShowAll:n};this.props.onSubmit(i,t)}},{key:"renderMembersCheckbox",value:function e(){var t={type:"members",value:this.state.membersShowAll,label:x.t("Require existing Full Members to accept new terms"),onChange:this.onMembersShowAllChange};return B(t)}},{key:"renderGuestsCheckbox",value:function e(){var t={type:"guests",value:this.state.guestsShowAll,label:x.t("Require existing Guests to accept new terms"),onChange:this.onGuestsShowAllChange};return B(t)}},{key:"render",value:function e(){var t=x.t("Require existing members to accept the new Terms of Service?");var a=x.t("Future members will be required to accept these new terms, but you can also require existing members to accept them the next time they log in to Slack.");return n.a.createElement("div",{className:"c-ent_custom_tos_accept_all_form"},n.a.createElement("h3",{className:"margin_bottom_100"},t),n.a.createElement("p",{className:"margin_bottom_200"},a),this.renderMembersCheckbox(),this.renderGuestsCheckbox())}}]);return t}(r["PureComponent"]);U.displayName="CustomTOSAcceptForm";U.defaultProps=L;var q=U;var G=a(5);var W=a.n(G);var H=a(16);var V=a.n(H);var K=a(483);var z=a(22);var Y=a(51);var Q=a(211);var J=a(364);var Z=a(179);var X=a(687);var $=a(3090);var ee=new _["b"]("enterprise_settings");var te="members";var ae="guests";var re="text";var ne="url";var ie="all";var se="not_all";var oe="/custom_tos_view";var le=16e3;var ce={membersUrl:g["b"].string,membersText:g["b"].string,membersContentType:g["b"].oneOf([re,ne]),guestsUrl:g["b"].string,guestsText:g["b"].string,guestsContentType:g["b"].oneOf([re,ne]),onSubmit:g["b"].func.isRequired};var ue={membersUrl:"",membersText:"",membersContentType:"text",guestsUrl:"",guestsText:"",guestsContentType:"text"};var de=ee.rt('<b>*bold*</b> <i>_italics_</i> ~strike~ <span className="quote">>quote</span> and links are allowed. <a className="underline sk_dark_grey cursor_pointer">Learn more</a>',null,function(e){var t=e.tag,a=e.key,r=e.text;return"a"===t?n.a.createElement("a",{key:a,href:"https://get.slack.help/hc/articles/202288908-Format-your-messages",target:"_blank",rel:"noopener noreferrer"},r):null});var pe=function e(t){var a=t.error,r=t.url,i=t.type,s=t.onChange;var o=ee.t("https://\u2026");return n.a.createElement(Z["a"],{id:"tos_"+i+"_input",name:"tos_"+i+"_input",value:r,onChange:s,errorText:a,errorLevel:"error",placeholder:o})};pe.displayName="renderInput";var he=function e(t){var a=t.error,r=t.text,i=t.type,s=t.onChange;return n.a.createElement(X["a"],{resize:"none",id:"tos_"+i+"_textarea",name:"tos_"+i+"_textarea",value:r,hintText:de,onChange:s,errorText:a,errorLevel:"error"})};he.displayName="renderTextarea";var ve=function e(t,a){if(!Object(K["d"])(a)){if(t===te)return ee.t("Please enter Terms of Service for Members.");if(t===ae)return ee.rt("Please enter Terms of Service for Guests, or select <strong>Use the same Terms of Service as Full Members.</strong>")}if(a.length>=le)return ee.t("Please enter a shorter Terms of Service (maximum {count, number} characters).",{count:le});return""};var me=function e(t,a){if(!Object(K["d"])(a)){if(t===te)return ee.t("Please enter Terms of Service URL for Members.");if(t===ae)return ee.rt("Please enter Terms of Service URL for Guests, or select <strong>Use the same Terms of Service as Full Members.</strong>")}if(!Object(K["b"])(a))return ee.rt("Looks like that isn\u2019t a valid URL. If you prefer to enter your custom terms directly, select <strong>Enter text</strong> instead.");return""};var fe=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={all:a.props.guestsText||a.props.guestsUrl?se:ie,membersUrl:a.props.membersUrl,membersText:a.props.membersText,membersContentType:a.props.membersContentType,membersUrlError:"",membersTextError:"",guestsUrl:a.props.guestsUrl,guestsText:a.props.guestsText,guestsContentType:a.props.guestsContentType,guestsUrlError:"",guestsTextError:""};a.onAllChange=a.onAllChange.bind(a);a.onMembersTextChange=a.onTextChange.bind(a,te);a.onGuestsTextChange=a.onTextChange.bind(a,ae);a.onMembersUrlChange=a.onUrlChange.bind(a,te);a.onGuestsUrlChange=a.onUrlChange.bind(a,ae);a.onMembersToggle=a.onToggle.bind(a,te);a.onGuestsToggle=a.onToggle.bind(a,ae);return a}h()(t,[{key:"onAllChange",value:function e(t){var a=t.target.value;this.setState(function(){return{all:a}})}},{key:"onToggle",value:function e(t){var a=t+"ContentType";this.setState(function(e){return W()({},a,e[a]===re?ne:re)})}},{key:"onTextChange",value:function e(t,a){this.setState(function(){var e;return e={},W()(e,t+"Text",a),W()(e,t+"TextError",""),e})}},{key:"onUrlChange",value:function e(t,a){this.setState(function(){var e;return e={},W()(e,t+"Url",a),W()(e,t+"UrlError",""),e})}},{key:"validate",value:function e(t){var a=this.state,r=a.all,n=a.membersUrl,i=a.membersText,s=a.membersContentType,o=a.guestsUrl,l=a.guestsText,c=a.guestsContentType;var u={};s===re&&(u.membersTextError=ve(te,i));s===ne&&(u.membersUrlError=me(te,n));if(r!==ie){c===re&&(u.guestsTextError=ve(ae,l));c===ne&&(u.guestsUrlError=me(ae,o))}this.setState(function(){return u},t)}},{key:"submit",value:function e(t){var a=this.state,r=a.all,n=w()(a,["all"]);var i=I()({all:r===ie},n);this.props.onSubmit(i,t)}},{key:"isValid",value:function e(){var t=this.state,a=t.all,r=t.membersUrl,n=t.membersText,i=t.membersContentType,s=t.membersUrlError,o=t.membersTextError,l=t.guestsUrl,c=t.guestsText,u=t.guestsContentType,d=t.guestsUrlError,p=t.guestsTextError;var h=i===re&&n&&!o||i===ne&&r&&!s;if(a===ie||!h)return h;var v=u===re&&c&&!p||u===ne&&l&&!d;return v}},{key:"maybeRenderMembersInput",value:function e(){if(this.state.membersContentType!==ne)return null;var t=this.state,a=t.membersUrl,r=t.membersUrlError;var n={error:r,url:a,type:te,onChange:this.onMembersUrlChange};return pe(n)}},{key:"maybeRenderGuestsInput",value:function e(){if(this.state.all===ie)return null;if(this.state.guestsContentType!==ne)return null;var t=this.state,a=t.guestsUrl,r=t.guestsUrlError;var n={error:r,url:a,type:ae,onChange:this.onGuestsUrlChange};return pe(n)}},{key:"maybeRenderMembersTextarea",value:function e(){if(this.state.membersContentType!==re)return null;var t=this.state,a=t.membersText,r=t.membersTextError;var n={error:r,text:a,type:te,onChange:this.onMembersTextChange};return he(n)}},{key:"maybeRenderGuestsTextarea",value:function e(){if(this.state.all===ie)return null;if(this.state.guestsContentType!==re)return null;var t=this.state,a=t.guestsText,r=t.guestsTextError;var n={error:r,text:a,type:ae,onChange:this.onGuestsTextChange};return he(n)}},{key:"maybeRenderGuestsInputBar",value:function e(){var t=this.state,a=t.all,r=t.guestsUrl,n=t.guestsText,i=t.guestsContentType;if(a===ie)return null;var s=!n&&i===re||!r&&i===ne;var o={previewIsDisabled:s,contentType:i,content:i===re?n:r,type:ae,onToggle:this.onGuestsToggle};return this.renderInputBar(o)}},{key:"renderMembersInputBar",value:function e(){var t=this.state,a=t.membersUrl,r=t.membersText,n=t.membersContentType;var i=!r&&n===re||!a&&n===ne;var s={previewIsDisabled:i,contentType:n,content:n===re?r:a,type:te,onToggle:this.onMembersToggle};return this.renderInputBar(s)}},{key:"renderPreviewButton",value:function e(t){var a=this;var r=t.previewIsDisabled,i=t.contentType,s=t.content,o=t.type;var l=ee.t("Preview");var c=i===ne;var u=c?function(){var e=window.open((Object(T["startsWith"])(s.toLowerCase(),"http")?"":"http://")+s,"_blank");e.opener=null}:function(){return a["tos_preview_"+o].submit()};var d=V()("p-ent_custom_tos_input_form__small_text","p-ent_custom_tos_input_form__small_text--right-divider","padding_right_50",{sk_dark_grey:r});var p=n.a.createElement(Y["a"],{disabled:r,onClick:u},n.a.createElement("span",{className:d},l," ",n.a.createElement(z["a"],{type:"external-link",className:"p-ent_custom_tos_input_form__icon"})));if(c)return p;return n.a.createElement("form",{action:oe,method:"POST",ref:function e(t){a["tos_preview_"+o]=t},target:"_blank"},n.a.createElement("input",{type:"hidden",name:"custom_tos_preview",value:s}),p)}},{key:"renderInputBar",value:function e(t){var a=t.contentType,r=t.onToggle;var i=ee.t("Terms of Service");var s=a===re?ee.t("Enter URL"):ee.t("Enter text");var o=V()("p-ent_custom_tos_input_form__small_text","padding_left_50");return n.a.createElement("div",{className:"p-ent_custom_tos_input_form__toggle_bar"},n.a.createElement("span",{className:"p-ent_custom_tos_input_form__label c-label__text bold"},i),this.renderPreviewButton(t),n.a.createElement(Y["a"],{onClick:r},n.a.createElement("span",{className:o},s)))}},{key:"renderRadio",value:function e(t){var a=this.state.all;var r=t.value,i=t.label;return n.a.createElement("div",{key:"tos_type_"+r},n.a.createElement(D["a"],{id:"tos_type_"+r+"_label",htmlFor:"tos_type_"+r+"_radio",type:"inline",cursor:"pointer",className:"p-ent_custom_tos_input_form__label",text:i},n.a.createElement(Q["a"],{id:"tos_type_"+r+"_radio",value:r,onChange:this.onAllChange,checked:r===a})))}},{key:"renderRadiogroup",value:function e(){var t=[{value:ie,label:ee.t("Use the same Terms of Service as Full Members")},{value:se,label:ee.t("Use a different Terms of Service")}];return n.a.createElement(J["a"],{field:"tos_type"},t.map(this.renderRadio,this))}},{key:"render",value:function e(){var t=ee.t("Set custom Terms of Service that members and guests will have to accept before using Slack. If you already have a URL for your custom Terms of Service, you can enter that instead.");var a=ee.t("Full Members");var r=ee.t("Guests");return n.a.createElement("div",null,n.a.createElement("p",null,t),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},a),this.renderMembersInputBar(),this.maybeRenderMembersTextarea(),this.maybeRenderMembersInput(),n.a.createElement("h3",{className:"margin_top_200 margin_bottom_100"},r),this.renderRadiogroup(),this.maybeRenderGuestsInputBar(),this.maybeRenderGuestsTextarea(),this.maybeRenderGuestsInput())}}]);return t}(r["PureComponent"]);fe.displayName="CustomTOSInputForm";fe.defaultProps=ue;var be=fe;var ge=a(1831);var _e=new _["b"]("enterprise_settings");var ye="text";var Oe="url";var ke={saving:g["b"].bool,customTos:g["b"].bool,membersTos:g["b"].string,membersContentType:g["b"].string,guestsTos:g["b"].string,guestsContentType:g["b"].string,openModal:g["b"].func};var Ee={saving:false,customTos:false,membersTos:"",membersContentType:"text",guestsTos:"",guestsContentType:"text",openModal:T["noop"]};var Ce=function e(t){var a=t.customTos,r=t.membersTos,n=t.membersContentType,i=t.guestsTos,s=t.guestsContentType;return{all:!i,membersUrl:n===Oe?r:"",membersText:n===ye?r:"",membersShowAll:!a,membersContentType:n,guestsUrl:s===Oe?i:"",guestsText:s===ye?i:"",guestsShowAll:!a,guestsContentType:s}};var je=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state=I()({},Ce(a.props),{showEnable:false,showEdit:false,isPending:false,isValid:true});Object(T["bindAll"])(a,["onClick","onEnable","onDisable","onEdit","onEnd","onCancelEnable","onConfirmDisable","onConfirmEnable","setFormSettings","onInputFormSubmit","onAcceptFormSubmit"]);return a}h()(t,[{key:"componentDidUpdate",value:function e(t,a){!this.props.saving&&this.state.isPending&&this.onEnd();this.dialog&&a.isPending!==this.state.isPending&&this.dialog.render({goButtonIsPending:this.state.isPending})}},{key:"onClick",value:function e(){var t=this.props.customTos;this.setState(function(){return t?{showEdit:true}:{showEnable:true}})}},{key:"onEnable",value:function e(){this.setState(function(){return{showEnable:true}})}},{key:"onDisable",value:function e(){this.dialog=this.props.openModal({element:this.renderDisable()})}},{key:"onEdit",value:function e(){this.setState(function(){return{showEdit:true}})}},{key:"onEnd",value:function e(){var t=this;this.reset(function(){t.settingsModalRef.setIndex(0);t.dialog&&t.dialog.close()})}},{key:"onCancelEnable",value:function e(){this.setState(function(){return{showEnable:false,showEdit:false}},this.onEnd)}},{key:"onConfirmDisable",value:function e(){this.setIsPending(true);Object(A["b"])(Object(A["a"])().settings.deactivateOrgCustomTOSSettings())}},{key:"onConfirmEnable",value:function e(){this.setIsPending(true);var t=this.state,a=t.all,r=t.membersUrl,n=t.membersText,i=t.membersShowAll,s=t.membersContentType,o=t.guestsUrl,l=t.guestsText,c=t.guestsShowAll,u=t.guestsContentType;var d=s===ye?n:r;var p=this.props.customTos;var h={customTos:p,membersTos:d,membersShowAll:i,membersContentType:s,guestsShowAll:c};if(!a){var v=u===ye?l:o;h.guestsTos=v;h.guestsContentType=u}Object(A["b"])(Object(A["a"])().settings.createOrgCustomTOSSettings(h))}},{key:"onInputFormSubmit",value:function e(){var t=this;this.inputForm.validate(function(){var e=t.inputForm.isValid();t.setIsValid(e);e&&t.inputForm.submit(t.settingsModalRef.goToNextStep.bind(t.settingsModalRef))})}},{key:"onAcceptFormSubmit",value:function e(){this.acceptForm.submit(this.onConfirmEnable)}},{key:"setFormSettings",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T["noop"];this.setState(function(){return t},a)}},{key:"setIsPending",value:function e(t){this.setState(function(){return{isPending:t}})}},{key:"setIsValid",value:function e(t){this.setState(function(){return{isValid:t}})}},{key:"reset",value:function e(t){var a=this;this.setState(function(){return I()({},Ce(a.props),{showEnable:false,showEdit:false,isPending:false,isValid:true})},t)}},{key:"buildEnableSteps",value:function e(){var t=this;var a=this.renderInputForm();var r=this.renderAcceptForm();var n=function e(){return t.props.customTos?_e.t("Edit Custom Terms of Service"):_e.t("Enable Custom Terms of Service")};var i=function e(){return t.props.customTos?_e.t("Update Custom Terms of Service"):_e.t("Enable Custom Terms of Service")};var s=_e.t("Next");var o=_e.t("Cancel");var l=this.state.isPending;return[{children:a,goButtonText:s,cancelText:o,title:n(),withHeader:true,showBackButton:false,showCancelButton:true,buttonAlignment:"right",onGo:this.onInputFormSubmit,onCancel:this.onCancelEnable},{children:r,goButtonText:i(),goButtonIsPending:l,cancelText:o,title:n(),withHeader:true,showBackButton:true,showCancelButton:true,buttonAlignment:"right",onGo:this.onAcceptFormSubmit,onCancel:this.onCancelEnable}]}},{key:"maybeRenderEnable",value:function e(){var t=this;return n.a.createElement(R["a"],{isOpen:this.state.showEnable||this.state.showEdit,onCancel:this.onCancelEnable,showCloseTransition:true,showOpenTransition:true,steps:this.buildEnableSteps(),position:"fixed",ref:function e(a){t.settingsModalRef=a}})}},{key:"renderDisable",value:function e(){var t=_e.t("Disable");var a="danger";var r=_e.t("When Custom Terms of Service are disabled, all members and guests will only be required to accept Slack\u2019s Terms of Service");var i=_e.t("Disable Custom Terms of Service");var s=this.state.isPending;return n.a.createElement(P["a"],{goButtonText:t,goButtonType:a,goButtonIsPending:s,title:i,onGo:this.onConfirmDisable,shouldCloseOnGo:false},n.a.createElement("p",null,r))}},{key:"renderInputForm",value:function e(){var t=this;var a=this.state,r=a.all,i=a.isValid,s=a.isPending,o=a.showEnable,l=a.showEdit,c=w()(a,["all","isValid","isPending","showEnable","showEdit"]);var u=I()({},c,{onSubmit:this.setFormSettings});return n.a.createElement(be,I()({},u,{ref:function e(a){t.inputForm=a}}))}},{key:"renderAcceptForm",value:function e(){var t=this;var a=!this.props.customTos;var r={membersShowAll:a,guestsShowAll:a,onSubmit:this.setFormSettings};return n.a.createElement(q,I()({},r,{ref:function e(a){t.acceptForm=a}}))}},{key:"renderSetting",value:function e(){var t=this.props.customTos;var a={type:"button",enabled:t,onEnable:this.onEnable,onDisable:this.onDisable,onEdit:this.onEdit};var r=_e.t("Custom Terms of Service");var i=t?_e.t("Enabled"):_e.t("Disabled");var s=_e.t("You can require members of your organization to accept custom Terms of Service before they can use Slack.");return n.a.createElement(ge["a"],{label:r,state:i,description:s,onClick:this.onClick,control:a})}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-ent_custom_tos_setting"},this.renderSetting(),this.maybeRenderEnable())}}]);return t}(r["PureComponent"]);je.displayName="CustomTOSSetting";je.defaultProps=Ee;var we={openModal:N["openModal"]};var Se=Object(o["connect"])(null,we)(je);var Ie=Se;var Te=a(3092);var Ae=new _["b"]("enterprise_settings");var Ne={loading:g["b"].bool,saving:g["b"].bool,customTos:g["b"].bool,membersTos:g["b"].string,guestsTos:g["b"].string,membersContentType:g["b"].string,guestsContentType:g["b"].string};var Pe={loading:true,saving:false,customTos:false,membersTos:"",guestsTos:"",membersContentType:"text",guestsContentType:"text"};var Re=function e(){return n.a.createElement("div",{className:"p-org_wide_settings_pane__loading","data-org-wide-settings-pane-loading":true})};Re.displayName="renderLoadingContainer";var Me=function(e){b()(t,e);function t(){d()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"maybeRenderCustomTOS",value:function e(){if(this.props.loading)return null;var t=this.props,a=t.saving,r=t.customTos,i=t.membersTos,s=t.guestsTos,o=t.membersContentType,l=t.guestsContentType;var c={saving:a,customTos:r,membersTos:i,guestsTos:s,membersContentType:o,guestsContentType:l};return n.a.createElement(Ie,c)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-org_wide_settings_pane"},n.a.createElement(C,{title:Ae.t("Organization Settings")}),Re(),this.maybeRenderCustomTOS())}}]);return t}(r["PureComponent"]);Me.displayName="OrgWideSettingsPane";Me.defaultProps=Pe;var De=Me;var xe=Me;var Fe=xe;Object(c["a"])("interop.orgWideSettingsPane",{render:function e(t,a,r){if(!t)throw new Error("orgWideSettingsPane render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(Fe,r)),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(134);var i=a(156);var s=a(145);var o=a(567);var l=a(504);var c=a(1153);var u=a(426);var d=a(526);var p=a(471);var h=a(1315);var v=a(1189);var m=a(579);var f=a(2);var b=a(60);function g(e){var t=e.bot_id?[e.bot_id]:[];Object(f["values"])(e).forEach(function(e){if(Object(f["isObject"])(e)){t.push(g(e));return}if(!Object(f["isString"])(e))return;var a=Object(f["compact"])(Object(b["findUrlsInString"])(e).map(d["a"]));t.push(a)});return Object(f["uniq"])(Object(f["flatten"])(t))}var _=a(63);var y=a.n(_);var O=a(478);function k(e){var t=[];var a=[];function r(e){return["user","inviter","accepted_user","created_by"].indexOf(e)>=0}function n(e){if(!Object(f["isObject"])(e))return;a.push(e);var s=void 0;Object.keys(e).forEach(function(a){s=e[a];if("string"!==typeof s)return;if(!r(a)){Object(O["b"])(s).m_ids.forEach(function(e){Object(f["includes"])(t,e)||t.push(e)});return}if(!Object(i["a"])(s))return;if(Object(f["includes"])(t,s))return;t.push(s)});Object.keys(e).forEach(function(r){s=e[r];if("object"!==("undefined"===typeof s?"undefined":y()(s)))return;if(-1!==a.indexOf(s))return;if(!Object(f["isArray"])(s)||"members"!==r&&"users"!==r){n(s);return}s.forEach(function(e){if(!Object(i["a"])(e)&&e&&"object"===("undefined"===typeof e?"undefined":y()(e))&&e.id){Object(i["a"])(e.id)&&!Object(f["includes"])(t,e.id)&&t.push(e.id);return}if(!Object(i["a"])(e))return;if(Object(f["includes"])(t,e))return;t.push(e)})})}n(e);return Object(f["uniq"])(t)}function E(e){var t=[];var a=[];function r(e,t){if("channel"===e||"channel_id"===e)return true;if("id"===e&&"channel"===t)return true;return false}function i(e,s){if("object"!==("undefined"===typeof e?"undefined":y()(e)))return;a.push(e);Object(f["forOwn"])(e,function(e,a){if("string"!==typeof e)return;r(a,s)?Object(n["a"])(e)&&!Object(f["includes"])(t,e)&&t.push(e):Object(O["b"])(e).c_ids.forEach(function(e){Object(f["includes"])(t,e)||t.push(e)})});Object(f["forOwn"])(e,function(e,r){if("object"!==("undefined"===typeof e?"undefined":y()(e)))return;if("previous_message"===r)return;if(-1!==a.indexOf(e))return;!Object(f["isArray"])(e)||"string"!==typeof e[0]||"channels"!==r&&"ims"!==r&&"groups"!==r?i(e,r):e.forEach(function(e){Object(n["a"])(e)&&!Object(f["includes"])(t,e)&&t.push(e)})})}i(e);return t}function C(e){var t=[];Object(f["forOwn"])(e,function(e,a){Object(f["isArray"])(e)?"messages"!==a&&"teams"!==a&&"users"!==a&&"channels"!==a||e.forEach(function(e){t.push(C(e))}):Object(f["isObject"])(e)?t.push(C(e)):Object(f["isString"])(e)&&("team"!==a&&"source_team"!==a&&"user_team"!==a&&"team_id"!==a||Object(s["a"])(e)&&t.push(e))});return Object(f["uniq"])(Object(f["flatten"])(t))}var j=a(924);function w(){return["Build Something People Want","We know that we have built something which is genuinely useful: almost any team which adopts Slack as their central application for communication would be significantly better off than they were before.","That means we have something people want.","However, almost all of them have no idea that they want Slack.","How could they?","They\u2019ve never heard of it.","And only a vanishingly small number will have imagined it on their own.","They think they want something different (if they think they want anything at all).","They definitely are not looking for Slack.","(But then no-one was looking for Post-it notes or GUIs either.)","Just as much as our job is to build something genuinely useful, something which really does make people\u2019s working lives simpler, more pleasant and more productive, our job is also to understand what people think they want and then translate the value of Slack into their terms.","A good part of that is \u201cjust marketing,\u201d but even the best slogans, ads, landing pages, PR campaigns, etc., will fall down if they are not supported by the experience people have when they hit our site, when they sign up for an account, when they first begin using the product and when they start using it day in, day out.","Therefore, \u201cunderstanding what people think they want and then translating the value of Slack into their terms\u201d is something we all work on.","It is the sum of the exercise of all our crafts.","We do it with copy accompanying signup forms, with fast-loading pages, with good welcome emails, with comprehensive and accurate search, with purposeful loading screens, and with thoughtfully implemented and well-functioning features of all kinds.","Marketing from Both Ends","Much has been written about \u201cproduct-market fit\u201d in the last few years, probably as a result of the popularity of the lean startup movement (though the idea has been around much longer).","The term refers to the degree to which a product could be successful, given sufficient promotion, appropriate pricing, adequate customer support and so on (before you find that fit, all the pushing in the world won\u2019t get you up the hill).","In this classic post on Marc Andreessen\u2019s old blog, he calls getting to product-market fit the \u201conly thing that matters\u201d for startups and offers a way of thinking about the life of the startup that divides it into two distinct phases: before product-market fit and after.","Once the product fits the market, a company is able to step on the gas, spending to promote a product that will actually sell.","The things you need to do before are very different from the things you need to do after (generally test & iterate vs scale & optimize).","We are right in the middle of that first phase.","It seems we are doing well and there are many encouraging signs, but we\u2019re definitely still in the first phase and it is very, very hard to tell how far we have to go to cross over into the promised land (the last 10% is 90% of the work, etc.)","So, we should be working carefully from both the product end and the market end:","Doing a better and better job of providing what people want (whether they know it or not)","Communicating the above more and more effectively (so that they know they want it)","In the best case, there is a dialectic at play here: the product itself and the way people use it should suggest new ways of articulating the value\u200a\u2014\u200aand refinements to how we communicate the value should lead to principles which clarify decision-making around product features and design.","Our position is different than the one many new companies find themselves in: we are not battling it out in a large, well-defined market with clear incumbents (which is why we can\u2019t get away with \u201cOther group chat products are poisonous. Slack is toasted.\u201d).","Despite the fact that there are a handful of direct competitors and a muddled history of superficially similar tools, we are setting out to define a new market.","And that means we can\u2019t limit ourselves to tweaking the product; we need to tweak the market too.","Sell the innovation, not the product","The best\u200a\u2014\u200amaybe the only?\u200a\u2014\u200areal, direct measure of \u201cinnovation\u201d is change in human behaviour.","In fact, it is useful to take this way of thinking as definitional: innovation is the sum of change across the whole system, not a thing which causes a change in how people behave.","No small innovation ever caused a large shift in how people spend their time and no large one has ever failed to do so.","By that measure, Slack is a real and large innovation.","It is not as eye-catching as self-driving cars or implantable chips\u200a\u2014\u200ait is not basic research-y kind of stuff.","But, for organizations that adopt it, there will be a dramatic shift in how time is spent, how communication happens, and how the team\u2019s archives are utilized.","There will be changes in how team members relate to one another and, hopefully, significant changes in productivity.","We are unlikely to be able to sell \u201ca group chat system\u201d very well: there are just not enough people shopping for group chat system (and, as pointed out elsewhere, our current fax machine works fine).","That\u2019s why what we\u2019re selling is organizational transformation.","What we are selling is not the software product\u200a\u2014\u200athe set of all the features, in their specific implementation\u200a\u2014\u200abecause there are just not many buyers for this software product.","(People buy \u201csoftware\u201d to address a need they already know they have or perform some specific task they need to perform, whether that is tracking sales contacts or editing video.)","However, if we are selling \u201ca reduction in the cost of communication\u201d or \u201czero effort knowledge management\u201d or \u201cmaking better decisions, faster\u201d or \u201call your team communication, instantly searchable, available wherever you go\u201d or \u201c75% less email\u201d or some other valuable result of adopting Slack, we will find many more buyers.","That\u2019s why what we\u2019re selling is organizational transformation.","The software just happens to be the part we\u2019re able to build & ship (and the means for us to get our cut).","We\u2019re selling a reduction in information overload, relief from stress, and a new ability to extract the enormous value of hitherto useless corporate archives.","We\u2019re selling better organizations, better teams.","That\u2019s a good thing for people to buy and it is a much better thing for us to sell in the long run.","We will be successful to the extent that we create better teams.","To see why, consider the hypothetical Acme Saddle Company.","They could just sell saddles, and if so, they\u2019d probably be selling on the basis of things like the quality of the leather they use or the fancy adornments their saddles include; they could be selling on the range of styles and sizes available, or on durability, or on price.","Or, they could sell horseback riding.","Being successful at selling horseback riding means they grow the market for their product while giving the perfect context for talking about their saddles.","It lets them position themselves as the leader and affords them different kinds of marketing and promotion opportunities (e.g., sponsoring school programs to promote riding to kids, working on land conservation or trail maps).","It lets them think big and potentially be big.","Because the best possible way to find product-market fit is to define your own market.","This isn\u2019t a new idea.","There are many brands whose marketing activities or positioning has them selling something other than (and usually larger than) their product: Harley Davidson sells motorcycle riding, but it especially sells freedom and independence.","Most luxury brands sell something that comes down to \u201cbeing better than you are\u201d (richer, better looking, more attractive to those you find desirable, etc.)","My favorite recent example is Lululemon: when they started, there was not a large market for yoga-specific athletic wear and accessories.","They sold yoga like crazy: helping people find yoga studios near their homes, hosting free classes, sponsorships and scholarships, local ambassadors and training, etc.","And as a result, they sold just under $1.4 billion worth of yoga-specific athletic wear and accessories in their most recent fiscal year.","But going back to the Acme Saddle Company, the better analogy to what we are doing now is to imagine them selling horseback riding \u2026 about 4,000 years ago.","It is almost inevitable that centralized internal communication systems will gradually replace email for most organizations over the next 10-20 years and we should do what we can to accelerate the trend and \u201cown it\u201d.","We are at the beginning of a transition.","We have an opportunity to both define the category and push hard for the whole market\u2019s growth.","We\u2019d be crazy not to take it, because the best possible way to find product-market fit is to define your own market."]}var S=a(1770);var I=a(1322);var T=a(66);var A=a(84);var N=a(514);var P=a(354);var R=a(869);var M=a(1292);var D=a(1313);var x=a(391);var F=a(470);var L=a(688);var B=a(1168);var U=a(158);var q=a(210);var G=function e(t){if(!Object(f["isString"])(t))return null;var a=Object(U["e"])();return t.replace(a,function(e){var t=Object(U["a"])(e);var a=Object(q["getEmojiNameFromUnicodeString"])(t);if(a)return":"+a+":";return e})};var W=G;var H=a(428);var V=a(181);var K=a(580);var z=a(1809);var Y=a(1068);var Q=a(319);var J=a(1745);var Z=a(39);function X(e){if(!e)return Promise.resolve();return new Promise(function(t,a){e.then(t).catch(a)})}var $=a(12);var ee=a(1342);var te=a(274);var ae=a(569);var re=a(204);var ne=a(57);var ie=a(689);Object(r["a"])("interop.utility",{addJitter:F["a"],looksLikeChannelId:n["a"],looksLikeMemberId:i["a"],looksLikeTeamId:s["a"],looksLikeFileId:o["a"],looksLikeGlobalActionFrecencyId:D["c"],extractAllBotIds:g,extractAllMemberIds:k,extractAllModelObIds:E,extractAllTeamIds:C,formatThemeColorsArray:function e(t){return Object(K["c"])(Object(V["b"])(TS.redux.getState()),t)},getGlobalNavTheme:V["a"],getStringLength:c["a"],getIconSizeToFit:u["a"],getBotIdFromUrl:d["a"],getEKMRevokedMessageTitle:ee["a"],getHelpCenterUrl:re["b"],getZendeskLocale:ne["a"],getLogger:$["a"],looksLikeBotId:p["a"],looksLikeUserGroupId:l["a"],isVisible:h["a"],ipsum:w,isFileSubtype:N["b"],inTabFlow:v["a"],firstFocusableChild:m["b"],lastFocusableChild:m["c"],snakeCaseKeys:j["a"],isModelObjectExternal:S["a"],isMenuVisible:T["g"],isDialogVisible:A["b"],isFSModalVisible:P["b"],normalize:I["a"],cleanChannelName:J["a"],convertFilesize:R["a"],getSystemTextPreferences:M["a"],decodeGlobalActionFrecencyId:D["a"],getGlobalActionForFrecency:D["b"],FILE_SUBTYPES:N["a"],PRIMARY_VIEWS:te["a"],uuidv4:x["a"],formatNumberWithAbbreviation:L["a"],isCmdKey:H["a"],getColonsRx:U["c"],getEmoticonsRx:U["d"],getNativeEmojiRx:U["e"],emojiTranslation:{addTranslationMap:Q["b"],getLocalizedEmojiName:Q["f"],getCanonicalEmojiName:Q["e"],convertEmojiInStringToLocalized:Q["d"],convertEmojiInStringToCanonical:Q["c"],testEmojiTranslations:Q["i"]},replaceEmoticonsWithColons:U["h"],replaceTextEmojiWithNative:function e(t){return Object(B["a"])(TS.redux.getState(),{messageText:t,teamId:TS.model.team.id})},replaceNativeEmojiWithText:function e(t){return W(t)},getEmoticonMap:function e(){return Z["EMOTICON_MAP"]},setCachedRefererPolicy:ie["d"],getRefererHidingWhiteList:ie["a"],getRefererPolicy:ie["b"],urlNeedsRefererHiding:ie["e"],isInputElement:function e(t){var a=window.jQuery&&t instanceof window.jQuery?t[0]:t;return Object(Y["a"])(a)},isContentEditableElement:function e(t){var a=window.jQuery&&t instanceof window.jQuery?t[0]:t;return Object(z["a"])(a)},getImgProxyUrl:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return ae["a"].apply(void 0,[TS.redux.getState()].concat(a))},makeSafeForTimeout:X})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(3);var d=a.n(u);var p=a(26);var h=a.n(p);var v=a(5);var m=a.n(v);var f=a(6);var b=a.n(f);var g=a(7);var _=a.n(g);var y=a(8);var O=a.n(y);var k=a(9);var E=a.n(k);var C=a(0);var j=a(2);var w=a(28);var S=a(24);var I=a(10);var T=a(281);function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.map(function(a,r){var n=Object(T["i"])(a.email).error_key;if(!n&&("invite"===a.mapping||"create"===a.mapping)){var i=e.some(function(e,t){return t!==r&&e.email===a.email});var s=!i&&t.some(function(e){return e.profile.email===a.email});var o=i||s;n=o?"duped":n}return d()({},a,{email_state:n||"ok"})})}function N(e){return{label:e.profile.real_name+" "+e.name,lfs_id:e.id,id:e.id,member:e,value:e.id}}var P={makeUserLFSItem:N,validateEmails:A};var R=a(22);var M=a(893);var D=a(1544);function x(e){if(e.member)return n.a.createElement(D["a"],{item:e});return e.label}var F=a(1545);function L(e){if(e.member)return n.a.createElement(F["a"],{item:e});return e.label}var B=a(2406);var U=new I["b"]("imports");var q={userMapping:C["b"].shape({id:C["b"].oneOfType([C["b"].string,C["b"].number]).isRequired,name:C["b"].string.isRequired,import_email:C["b"].string.isRequired,email:C["b"].string.isRequired,email_state:C["b"].string.isRequired,mapping:C["b"].string.isRequired}).isRequired,allMembers:C["b"].object.isRequired,onUserMappingChange:C["b"].func};var G={onUserMappingChange:j["noop"]};var W=[{label:U.t("Choose one:"),value:"-",id:"-"},{label:U.t("Create & invite user"),value:"invite",id:"invite"},{label:U.t("Create a disabled user, without inviting them"),value:"create",id:"create"},{label:U.t("Do not create a user, just import messages"),value:"bot",id:"bot"},{label:U.t("Skip user completely, importing no messages"),value:"0",id:"0"}];function H(e){return[].concat(W,h()(Object.values(e.allMembers).map(N))).map(function(t){return t.value===e.userMapping.mapping?d()({},t,{preselected:true}):t})}function V(e){return-1===["-","invite","create","bot","0"].indexOf(e)}var K=function(e){E()(t,e);function t(e){b()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onEmailChange=a.onEmailChange.bind(a);a.onMappingChange=a.onMappingChange.bind(a);return a}_()(t,[{key:"componentWillReceiveProps",value:function e(t){t.userMapping.mapping!==this.props.userMapping.mapping&&this.lazyFilterSelect&&this.lazyFilterSelect.processItems(H(t))}},{key:"onEmailChange",value:function e(t){this.props.onUserMappingChange(d()({},this.props.userMapping,{email:t}))}},{key:"onMappingChange",value:function e(t){var a=void 0;var r=this.props.allMembers[t];a=r&&r.profile&&r.profile.email?r.profile.email:this.props.userMapping.import_email;this.props.onUserMappingChange(d()({},this.props.userMapping,{mapping:t,email:a}))}},{key:"maybeRenderEmailInput",value:function e(){var t=this;var a=this.props.userMapping,r=a.mapping,i=a.email,s=a.email_state,o=a.import_email,l=a.id;if(i===o&&"ok"===s)return null;if(i===o&&"create"!==r&&"invite"!==r)return null;if(V(r))return null;return n.a.createElement("input",{type:"email",name:"email_"+l,defaultValue:i,onChange:function e(a){return t.onEmailChange(a.target.value)},placeholder:Object(T["a"])(),className:"small small_top_margin"})}},{key:"renderErrors",value:function e(){var t=void 0;switch(this.props.userMapping.email_state){case"duped":t=U.t("Another user has this email.");break;case"empty":t=U.t("An email address is required.");break;case"invalid":t=U.t("This address is invalid.");break;case"ok":default:break}var a=["control-group","small_top_margin",{error:!V(this.props.userMapping.mapping)&&"ok"!==this.props.userMapping.email_state}];return n.a.createElement("div",{className:a},t&&n.a.createElement("span",{className:"small_left_margin help-inline"},n.a.createElement(R["a"],{type:"warning",className:"moscow_red"})," ",t),this.maybeRenderEmailInput())}},{key:"renderUserSelect",value:function e(){var t=this;return n.a.createElement(M["a"],{ref:function e(a){t.lazyFilterSelect=a},items:H(this.props),template:x,tokenTemplate:L,onValueChange:function e(a){return t.onMappingChange(a[0].value)},single:true})}},{key:"renderAction",value:function e(){return n.a.createElement("div",{className:"col span_3_of_6"},this.renderUserSelect(),this.renderErrors())}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-service_import_mapping_form--user-mapping-row"},n.a.createElement("div",{className:"col span_3_of_6 break_all"},this.props.userMapping.import_email||U.t("no email")),this.renderAction())}}]);return t}(r["PureComponent"]);K.displayName="ServiceImportUserMapping";K.defaultProps=G;var z=K;var Y=new I["b"]("imports");var Q={service:C["b"].string.isRequired,crumb:C["b"].string.isRequired,allMembers:C["b"].object.isRequired,initialUserMappings:C["b"].arrayOf(C["b"].shape({id:C["b"].oneOfType([C["b"].string,C["b"].number]).isRequired,name:C["b"].string.isRequired,import_email:C["b"].string.isRequired,email:C["b"].string.isRequired,email_state:C["b"].string.isRequired,mapping:C["b"].string.isRequired})).isRequired,initialChannelMappings:C["b"].array.isRequired,ignoreApiUsers:C["b"].bool};var J={ignoreApiUsers:false};var Z=[{label:Y.t("Map users when possible, and manually configure the rest"),value:"-"},{label:Y.t("Create and invite users"),value:"invite"},{label:Y.t("Create deactivated users, without inviting anyone"),value:"create"},{label:Y.t("Do not create users, leaving messages as bot messages"),value:"bot"},{label:Y.t("Skip users, without importing their messages"),value:"0"}];var X=function(e){E()(t,e);function t(e){b()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={batchUserAction:"-",userMappings:e.initialUserMappings,ignoreApiUsers:e.ignoreApiUsers};a.onUserMappingChange=a.onUserMappingChange.bind(a);a.onChange=a.onChange.bind(a);a.renderUserMapping=a.renderUserMapping.bind(a);a.onApplyBatchUserActionToAll=a.onApplyBatchUserActionToAll.bind(a);a.onApplyBatchUserActionToUnmapped=a.onApplyBatchUserActionToUnmapped.bind(a);return a}_()(t,[{key:"onChange",value:function e(t,a){this.setState(function(){return m()({},t,a)})}},{key:"onUserMappingChange",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a.id)return;var r=this.state.userMappings;var n=Object(j["findIndex"])(r,function(e){return e.id===a.id});if(-1===n)return;var i=[].concat(h()(r.slice(0,n)),[a],h()(r.slice(n+1)));this.setState(function(){return{userMappings:A(i,Object.values(t.props.allMembers))}})}},{key:"onApplyBatchUserActionToAll",value:function e(){var t=this;this.setState(function(e){return{userMappings:A(e.userMappings.map(function(a,r){return d()({},a,{mapping:"-"===e.batchUserAction?t.props.initialUserMappings[r].mapping:e.batchUserAction,email:a.import_email})}),Object.values(t.props.allMembers))}})}},{key:"onApplyBatchUserActionToUnmapped",value:function e(){var t=this;this.setState(function(e){return{userMappings:A(e.userMappings.map(function(a,r){return V(a.mapping)?a:d()({},a,{mapping:"-"===e.batchUserAction?t.props.initialUserMappings[r].mapping:e.batchUserAction,email:a.import_email})}),Object.values(t.props.allMembers))}})}},{key:"renderUserMapping",value:function e(t){return n.a.createElement(z,{key:t,userMapping:this.state.userMappings[t],allMembers:this.props.allMembers,onUserMappingChange:this.onUserMappingChange})}},{key:"renderFormInputs",value:function e(){var t=JSON.stringify(this.state.userMappings);var a=JSON.stringify(this.props.initialChannelMappings);var r=this.state.userMappings.map(function(e){return n.a.createElement("div",{key:e.id},n.a.createElement("input",{type:"hidden",value:e.mapping,name:"user_"+e.id}),n.a.createElement("input",{type:"hidden",value:e.email,name:"email_"+e.id}))});var i=this.props.initialChannelMappings.map(function(e){return n.a.createElement("input",{key:e.id,type:"hidden",value:e.mapping,name:"channel_"+e.id})});var s="hipchat"!==this.props.service?null:n.a.createElement("input",{type:"hidden",value:this.state.ignoreApiUsers?1:0,name:"ignore_api_user"});return n.a.createElement("div",null,n.a.createElement("input",{type:"hidden",value:this.props.crumb,name:"crumb"}),n.a.createElement("input",{type:"hidden",value:"mapping",name:"step"}),r,i,n.a.createElement("input",{type:"hidden",value:t,name:"user_list"}),n.a.createElement("input",{type:"hidden",value:a,name:"channel_list"}),s)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-service_import_mapping_form large_bottom_margin"},n.a.createElement("form",{method:"post",action:"/services/import/"+this.props.service},this.renderFormInputs(),n.a.createElement(w["d"],{htmlType:"submit",size:"large"},"Save Changes")))}}]);return t}(r["PureComponent"]);X.displayName="ServiceImportMappingForm";X.defaultProps=J;function $(e){var t=Object(S["a"])(e);return{allMembers:t}}var ee=Object(o["connect"])($)(X);var te=ee;var ae=a(163);var re=function e(t,a,r){if(!t)throw new Error("mountServiceImportMappingForm must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(ae["a"],null,n.a.createElement(te,r))),a)};var ne=s.a.unmountComponentAtNode;var ie={mountServiceImportMappingForm:re,unmountServiceImportMappingForm:ne};var se=a(44);Object(se["a"])("interop.mountServiceImportMappingForm",re);Object(se["a"])("interop.unmountServiceImportMappingForm",ne)},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(2);var o=a.n(s);var l=a(119);var c=a(27);var u=a(207);var d=a(108);var p=a(193);var h=a(3);var v=a.n(h);var m=a(282);function f(e,t){var a=t||Object(m["e"])(e.id)||{};return v()({},e,{fileName:a.name,imageSource:a.thumb_160||a.thumb_80,fileType:a.filetype,prettyType:a.pretty_type,fileSize:a.size})}var b=a(6);var g=a.n(b);var _=a(8);var y=a.n(_);var O=a(7);var k=a.n(O);var E=a(9);var C=a.n(E);var j=a(0);var w=a(10);var S=a(28);var I=a(921);var T=a(2414);var A=a(1181);var N=a(16);var P=a.n(N);var R=a(89);var M=a(4);var D=a(1311);var x=a(22);var F=a(187);var L=a(693);var B=a(30);var U=a(869);var q=a(1521);var G=a(3166);var W=new w["b"]("downloads");var H={id:j["b"].string.isRequired,downloadPath:j["b"].string,downloadState:j["b"].string,startTime:j["b"].number,progress:j["b"].number,fileName:j["b"].string,imageSource:j["b"].string,fileType:j["b"].string,prettyType:j["b"].string,fileSize:j["b"].number,highlight:j["b"].bool,showDownload:j["b"].func,openDownload:j["b"].func,cancelDownload:j["b"].func,retryDownload:j["b"].func,removeDownload:j["b"].func,pauseDownload:j["b"].func,resumeDownload:j["b"].func,hasKeyboardFocusWithin:j["b"].bool,onFocus:j["b"].func,onBlur:j["b"].func,featureI18nFilesize:j["b"].bool};var V={downloadPath:"",downloadState:"",startTime:0,progress:0,fileName:"",imageSource:"",fileType:"",prettyType:"",fileSize:0,highlight:false,showDownload:s["noop"],openDownload:s["noop"],cancelDownload:s["noop"],retryDownload:s["noop"],removeDownload:s["noop"],pauseDownload:s["noop"],resumeDownload:s["noop"],hasKeyboardFocusWithin:false,onFocus:s["noop"],onBlur:s["noop"],featureI18nFilesize:false};var K=function(e){C()(t,e);k()(t,null,[{key:"getEstimatedTimeRemaining",value:function e(t){var a=t.downloadState,r=t.progress,n=t.startTime;if(!["progressing","paused"].includes(a))return"";if(r>=1)return"";if(-1===r)return"";if(!r)return"";var i=Date.now()-n;var s=i*(1/r);var o=s-i;return W.t("{duration} remaining",{duration:R["a"].duration(o,"milliseconds").humanize()})}}]);function t(e){g()(this,t);var a=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(s["bindAll"])(a,["onRootDivClick","onShowClick","onCancel","onRetry","onRemove","onPause","onResume"]);return a}k()(t,[{key:"onRootDivClick",value:function e(t){var a=this.props,r=a.id,n=a.downloadState;if("completed"===n){t.stopPropagation();this.props.openDownload(r)}else if("cancelled"===n||"interrupted"===n){t.stopPropagation();this.props.retryDownload(r)}}},{key:"onShowClick",value:function e(t){t.stopPropagation();this.props.showDownload(this.props.id)}},{key:"onCancel",value:function e(t){t.stopPropagation();this.props.cancelDownload(this.props.id)}},{key:"onRetry",value:function e(t){t.stopPropagation();this.props.retryDownload(this.props.id)}},{key:"onRemove",value:function e(t){t.stopPropagation();this.props.removeDownload(this.props.id)}},{key:"onPause",value:function e(t){t.stopPropagation();this.props.pauseDownload(this.props.id)}},{key:"onResume",value:function e(t){t.stopPropagation();this.props.resumeDownload(this.props.id)}},{key:"renderDownloadIcon",value:function e(){var t=this.props,a=t.fileType,r=t.imageSource;var i=function e(){return n.a.createElement(x["b"],{type:a,file:true})};if(r)return n.a.createElement(D["a"],{src:r,renderPending:i,width:"32",height:"32",className:"p-download_item__image",alt:""});return i()}},{key:"renderExtraActions",value:function e(){var t="paused"===this.props.downloadState?n.a.createElement(F["a"],{className:"p-download_item__link--resume",onClick:this.onResume},W.t("Resume")):n.a.createElement(F["a"],{className:"p-download_item__link--pause",onClick:this.onPause},W.t("Pause"));return n.a.createElement("span",{className:"p-download_item__extra_actions"},t,n.a.createElement(F["a"],{className:"p-download_item__link--cancel",onClick:this.onCancel},W.t("Cancel")))}},{key:"render",value:function e(){var a=this.props,r=a.downloadPath,i=a.downloadState,s=a.fileName,o=a.imageSource,l=a.fileType,c=a.prettyType,u=a.fileSize,d=a.highlight,p=a.hasKeyboardFocusWithin,h=a.featureI18nFilesize;var v=Math.max(this.props.progress,0);var m=s||r.split(/\/|\\/).reverse()[0];var f="completed"===i?100:100*v;var b=["progressing","paused"].includes(i)&&v?v*u:void 0;var g=void 0;g=b?W.t("{partialSize} of {size} {prettyType}",{partialSize:Object(U["a"])(b,{decimalPlaces:2,featureI18nFilesize:h}),size:Object(U["a"])(u),prettyType:c}):Object(U["a"])(u)+" "+c;var _=t.getEstimatedTimeRemaining(this.props);var y=P()("p-download_item",i,{highlight:d,"p-download_item--focus-within":p});var O=P()({"p-download_item__action_icon":true,"p-download_item__action_icon--image":!!o,fileType:l});var k=Object(B["isMac"])()?W.t("Show in Finder"):W.t("Open containing folder");var E={width:f+"%"};var C=W.t("Remove {file}",{file:m,fallbackHash:"e963907dac5cd5c017869b4c96c18021c9bd058b",fallbackHashNs:"admin"});return n.a.createElement("div",{role:"presentation",className:y,onClick:this.onRootDivClick,onFocus:this.props.onFocus,onBlur:this.props.onBlur},n.a.createElement("div",{className:"p-download_item__icon_container"},this.renderDownloadIcon(),n.a.createElement(x["b"],{className:O})),n.a.createElement("div",{className:"p-download_item__container"},n.a.createElement("div",{className:"p-download_item__name_row"},n.a.createElement("span",{className:"p-download_item__name overflow_ellipsis"},m),this.renderExtraActions()),n.a.createElement("div",{className:"p-download_item__size_row"},n.a.createElement("span",{className:"p-download_item__size overflow_ellipsis"},n.a.createElement("span",{className:"p-download_item__partial_size"},g)),n.a.createElement("span",{className:"p-download_item__actions"},n.a.createElement(F["a"],{className:"p-download_item__link--show",onClick:this.onShowClick},k),n.a.createElement(F["a"],{className:"p-download_item__link--retry",onClick:this.onRetry},W.t("Retry"))),n.a.createElement("span",{className:"p-download_item__time_remaining"},_)),n.a.createElement("div",{className:"p-download_item__progress_row progress_bar"},n.a.createElement("div",{className:"p-download_item__progress progress_bar_progress",style:E}))),n.a.createElement(L["a"],{"aria-label":C,icon:"times_circle",className:"p-download_item__link--remove",onClick:this.onRemove}))}}]);return t}(n.a.Component);K.displayName="DownloadItem";K.defaultProps=V;var z=function e(t){return{featureI18nFilesize:Object(M["isFeatureEnabled"])(t,"feature_i18n_filesize")}};var Y={showDownload:p["showDesktopDownload"],openDownload:p["openDesktopDownload"],cancelDownload:p["cancelDesktopDownload"],retryDownload:p["retryDesktopDownload"],removeDownload:p["removeDesktopDownload"],pauseDownload:p["pauseDesktopDownload"],resumeDownload:p["resumeDesktopDownload"]};var Q=Object(q["a"])(Object(i["connect"])(z,Y)(K));var J=new w["b"]("page_client");var Z={items:j["b"].arrayOf(j["b"].object.isRequired)};var X={items:void 0};var $=function(e){C()(t,e);function t(e){g()(this,t);var a=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(s["bindAll"])(a,["renderItem","isFocusableItem"]);return a}k()(t,[{key:"getItemKeys",value:function e(){return this.props.items.map(function(e){return e.id})}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.getItemKeys();var n=r[a];return!!n}},{key:"renderItem",value:function e(t){var a=this.props.items[t];return n.a.createElement(Q,v()({key:a.id},a))}},{key:"render",value:function e(){var t=this;var a=this.getItemKeys();return n.a.createElement(T["a"],null,function(e){var r=e.width,i=e.height;return n.a.createElement(A["a"],{width:r,height:i,keys:a,rowRenderer:t.renderItem,animateOnScroll:false,ariaLabel:J.t("Downloads"),isFocusableItem:t.isFocusableItem})})}}]);return t}(r["PureComponent"]);$.displayName="DownloadsList";$.defaultProps=X;var ee=$;var te=a(3168);var ae={downloads:j["b"].array.isRequired,fileIdsToFetch:j["b"].array.isRequired,fetchFileInfo:j["b"].func.isRequired,isShowing:j["b"].bool,clearDownloads:j["b"].func};var re={clearDownloads:s["noop"],isShowing:true};var ne=new w["b"]("page_client");var ie=function(e){C()(t,e);k()(t,null,[{key:"renderClearAllButton",value:function e(t){return n.a.createElement(S["c"],{className:"p-downloads__clear_all",onClick:t},ne.t("Clear all"))}}]);function t(e){g()(this,t);var a=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderBody=a.renderBody.bind(a);return a}k()(t,[{key:"componentWillUpdate",value:function e(t){var a=t.fileIdsToFetch;if(this.props.fileIdsToFetch===a)return;if(0===a.length)return;if(Object(s["isEqual"])(this.props.fileIdsToFetch,a))return;this.props.fetchFileInfo({ids:a})}},{key:"renderBody",value:function e(){var t=this.props.isShowing;if(!t)return null;if(0===this.props.downloads.length)return null;return n.a.createElement(ee,{ariaLabel:ne.t("Downloads"),items:this.props.downloads})}},{key:"renderTitle",value:function e(){var a=this.props,r=a.downloads,i=a.clearDownloads;var s=r.length>=2?t.renderClearAllButton(i):null;return n.a.createElement("div",{className:"p-downloads__header_items"},n.a.createElement("span",null,ne.t("Downloads")),s)}},{key:"render",value:function e(){return n.a.createElement(I["a"],{className:"p-downloads_list",title:this.renderTitle(),renderBody:this.renderBody,viewId:"downloads-list",kbNavOrder:6})}}]);return t}(n.a.Component);ie.displayName="DownloadsFlexpane";ie.defaultProps=re;var se=ie;var oe=function e(t){return t.files};var le=function e(t,a){return a.startTime-t.startTime};var ce=Object(u["createSelector"])([p["getTeamDownloads"],oe],function(e,t){return e.map(function(e){return f(e,t[e.id])}).sort(le)});var ue=Object(u["createSelector"])([p["getTeamDownloadIds"],oe],function(e,t){return e.filter(function(e){return!t[e]})});var de=function e(t){var a=Object(d["g"])(t);return{downloads:ce(t),fileIdsToFetch:ue(t),isShowing:"downloads"===a}};var pe={fetchFileInfo:p["fetchFileInfo"],clearDownloads:p["clearTeamDesktopDownloads"]};var he=Object(i["connect"])(de,pe)(se);var ve=he;var me=a(163);var fe=function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.a.noop;if(!t)throw new Error("mountDownloadsView must be called with a teamId parameter");var s=Object(c["d"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(me["a"],null,n.a.createElement(ve,null))),a,r)};var be=fe;var ge=a(44);Object(ge["a"])("interop.mountDownloadsView",be)},function(e,t,a){"use strict";var r={};a.r(r);a.d(r,"accessibility",function(){return s_["default"]});a.d(r,"activity",function(){return Fv["default"]});a.d(r,"allThreads",function(){return Nv["default"]});a.d(r,"allUnreads",function(){return Xv["default"]});a.d(r,"appViews",function(){return o_["default"]});a.d(r,"appsInChannels",function(){return mv["default"]});a.d(r,"bootData",function(){return j["default"]});a.d(r,"cfm",function(){return vb["default"]});a.d(r,"channelLoading",function(){return l_["default"]});a.d(r,"channelSidebar",function(){return q["default"]});a.d(r,"channelSidebarFolders",function(){return c_["default"]});a.d(r,"checkoutFlow",function(){return u_["default"]});a.d(r,"connectivity",function(){return m_});a.d(r,"consistency",function(){return jr["default"]});a.d(r,"customEmoji",function(){return f_["default"]});a.d(r,"deletedMessages",function(){return b_["default"]});a.d(r,"desktop",function(){return Ha["default"]});a.d(r,"dnd",function(){return ar["default"]});a.d(r,"drafts",function(){return g_["default"]});a.d(r,"ekmChanges",function(){return cr["default"]});a.d(r,"ephemeralMessages",function(){return __["default"]});a.d(r,"expandables",function(){return Rr["default"]});a.d(r,"experiments",function(){return zn["default"]});a.d(r,"fileRefresh",function(){return xr["default"]});a.d(r,"fileUpload",function(){return y_["default"]});a.d(r,"filesFlexpane",function(){return O_["default"]});a.d(r,"flannelUrl",function(){return k_["default"]});a.d(r,"globalNav",function(){return E_["default"]});a.d(r,"grapevineMeta",function(){return C_["default"]});a.d(r,"help",function(){return j_["default"]});a.d(r,"imports",function(){return w_["default"]});a.d(r,"incrementalBoot",function(){return be["default"]});a.d(r,"inlineFilePreviews",function(){return S_["default"]});a.d(r,"emailRender",function(){return I_["default"]});a.d(r,"invites",function(){return T_["default"]});a.d(r,"lastUsedSlashCommand",function(){return A_["default"]});a.d(r,"memberDirectoryFlexpane",function(){return N_["default"]});a.d(r,"messageEdit",function(){return Xi["default"]});a.d(r,"messagePane",function(){return D_});a.d(r,"messagePaneBanner",function(){return x_["default"]});a.d(r,"modal",function(){return Ze["default"]});a.d(r,"navigationHistory",function(){return _s["default"]});a.d(r,"noop",function(){return Xh["default"]});a.d(r,"onboarding",function(){return F_["default"]});a.d(r,"pendingFiles",function(){return L_["default"]});a.d(r,"pendingOpenChannel",function(){return B_["default"]});a.d(r,"persistedApiCalls",function(){return U_["default"]});a.d(r,"prefs",function(){return ay});a.d(r,"presence",function(){return tf["default"]});a.d(r,"pricingPlans",function(){return ny["default"]});a.d(r,"reactionsToast",function(){return Tu["default"]});a.d(r,"searchAutocomplete",function(){return iy["default"]});a.d(r,"searchChannelsUsers",function(){return sy["default"]});a.d(r,"searchInputBox",function(){return oy["default"]});a.d(r,"searchInProductEducation",function(){return zb["default"]});a.d(r,"searchResults",function(){return Wb["default"]});a.d(r,"searchSession",function(){return ly["default"]});a.d(r,"searchUi",function(){return cy["default"]});a.d(r,"socket",function(){return _["default"]});a.d(r,"stars",function(){return yf["default"]});a.d(r,"pins",function(){return Sm["default"]});a.d(r,"teamCreation",function(){return uy["default"]});a.d(r,"threadsFlexpane",function(){return Pv["default"]});a.d(r,"threadSub",function(){return Av["default"]});a.d(r,"toast",function(){return Je["default"]});a.d(r,"topics",function(){return my});a.d(r,"typing",function(){return gv["default"]});a.d(r,"uiSerialization",function(){return fy["default"]});a.d(r,"unfurls",function(){return by["default"]});a.d(r,"unreadCounts",function(){return ge["default"]});a.d(r,"unreadsView",function(){return ky});a.d(r,"userGroupsFlexpane",function(){return Ey["default"]});a.d(r,"usersCounts",function(){return Cy["default"]});a.d(r,"workspace",function(){return Sy});a.d(r,"adminMembers",function(){return Iy["default"]});a.d(r,"allCalls",function(){return Nu["a"]});a.d(r,"appActions",function(){return Fu["b"]});a.d(r,"appPermissions",function(){return bp["default"]});a.d(r,"appProfiles",function(){return Yp["default"]});a.d(r,"apps",function(){return Zu["default"]});a.d(r,"blocks",function(){return Ty["default"]});a.d(r,"bots",function(){return th["default"]});a.d(r,"channelHistory",function(){return pe["default"]});a.d(r,"channels",function(){return My});a.d(r,"channelsMeta",function(){return Uy});a.d(r,"currentMemberUserGroupRegexp",function(){return Rb["default"]});a.d(r,"customizeEmoji",function(){return qy["default"]});a.d(r,"developerActions",function(){return Gy["default"]});a.d(r,"emoji",function(){return Wy["a"]});a.d(r,"enterprise",function(){return Yy});a.d(r,"environment",function(){return Qy["default"]});a.d(r,"externalTeamIds",function(){return mf["b"]});a.d(r,"files",function(){return Fr["default"]});a.d(r,"idpGroups",function(){return Jy["default"]});a.d(r,"lastNetworkSend",function(){return Zy["default"]});a.d(r,"memberCounts",function(){return Ai["default"]});a.d(r,"members",function(){return rO});a.d(r,"membership",function(){return Li["default"]});a.d(r,"membershipOrdered",function(){return nO["default"]});a.d(r,"messages",function(){return dO});a.d(r,"messagesMeta",function(){return Xb["default"]});a.d(r,"notifications",function(){return pO["default"]});a.d(r,"paidFeatures",function(){return lr["default"]});a.d(r,"reactions",function(){return lf["default"]});a.d(r,"slashCommand",function(){return _O});a.d(r,"teamId",function(){return d["default"]});a.d(r,"selfTeamIds",function(){return EO});a.d(r,"teams",function(){return CO["b"]});a.d(r,"userGroups",function(){return IO});a.d(r,"userGroupMembership",function(){return Mb["default"]});a.d(r,"window",function(){return he["default"]});var n=a(3);var i=a.n(n);var s=a(2);var o=a.n(s);var l=a(292);var c=a(831);var u=a(65);var d=a(178);var p=a(784);var h=a(27);var v=a(26);var m=a.n(v);var f=a(1477);var b=a(49);var g=a(120);var _=a(52);var y=function e(t){switch(t.type){case g["a"].getType():return i()({},t,{payload:"Channel bulk add payload is too big to output to redux devtools"});case _["socketMessageReceived"].getType():return i()({},t,{payload:"View raw WebSocket frames for details, but this was a "+(t.payload.subtype?[t.payload.type,t.payload.subtype].join("."):t.payload.type)+" message"});default:return t}};var O=Object(b["a"])()?void 0:function(){return{apologies:"Serializing our large state kept crashing redux devtools. I hope to bring it back someday, but for now you can see the state by using `TS.redux.getState()` in the console"}};var k={autoPause:true,actionSanitizer:y,stateSanitizer:O,maxAge:1e3,features:{pause:true}};var E=k;function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.teamId,a=e.customEnhancers,r=e.middlewares,n=e.disableDevTools;var o=void 0;var c=window.TS&&Object(s["get"])(window,"TS.boot_data.feature_redux_dev_tools",false);if(c)o=l["compose"].apply(void 0,[l["applyMiddleware"].apply(void 0,m()(r))].concat(m()(a),[f["a"].instrument()]));else{var u=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&!n?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(i()({},E,{name:"Slack-"+t})):l["compose"];o=u.apply(void 0,[l["applyMiddleware"].apply(void 0,m()(r))].concat(m()(a)))}return o}var j=a(4);var w=a(101);var S=a(73);var I=a(97);var T=a(19);var A=a(259);var N=a(24);var P=a(11);var R=a(694);var M=a(56);function D(e,t){if(!Object(P["isIm"])(e))return false;var a=Object(N["d"])(t(),Object(P["getMemberIdFromIm"])(e));return a&&a.deleted}function x(e){return Object(P["isPublicChannel"])(e)&&!Object(P["isMemberOfChannel"])(e)}function F(e,t){Object(R["c"])();(x(e)||Object(P["isArchived"])(e)||D(e,t)||Object(P["isUnavailable"])(t(),e))&&Object(R["a"])(e)}function L(e,t,a){var r=a();if(!Object(j["shouldUseReactMessages"])(r))return;var n=Object(S["a"])(r);var i=Object(T["d"])(r,n);if(!i)return;F(i,a)}function B(e,t,a){var r=a();if(!Object(j["shouldUseReactMessages"])(r))return;var n=Object(S["a"])(r);var i=false;var s=e&&e.payload&&e.payload.channels;if(!s||!s.length)return;s.forEach(function(e){e&&e.id===n&&(i=true)});if(!i)return;var o=Object(T["d"])(r,n);if(!o)return;F(o,a)}function U(e,t,a){var r=a();if(!Object(j["shouldUseReactMessages"])(r))return;var n=e.payload;var i=Object(S["a"])(r);var s=Object(T["d"])(r,i);var o=Object(P["getMemberIdFromIm"])(s);if(!s||!Object(P["isIm"])(s)||!o)return;o===n.id&&F(s,a)}Object(M["b"])({actions:[w["e"]],sideEffect:L});Object(M["b"])({actions:[A["b"]],sideEffect:U});Object(M["b"])({actions:[g["a"]],sideEffect:B,reasons:[I["a"].ADD_CHANNEL,I["a"].ARCHIVE_CHANNEL,I["a"].UNARCHIVE_CHANNEL,I["a"].LEAVE_CHANNEL,I["a"].UPSERT_CHANNEL,I["a"].BULK_ADD_CHANNELS,I["a"].BULK_UPDATE_CHANNELS]});var q=a(796);var G=a(34);var W=a(333);var H=a(108);var V=a(58);var K=a.n(V);function z(e,t){var a=Object(S["a"])(e);var r=Object(T["d"])(e,a);if("details"===t&&Object(P["isUnavailable"])(e,r))return;if(("thread"===t||"convo"===t)&&Object(P["isUnavailable"])(e,r)&&Y(e))return;return t}function Y(e){var t=Object(H["c"])(e);if(!t||!t[0])return false;var a=t[0];var r=a.split("-"),n=K()(r,1),i=n[0];var s=Object(T["d"])(e,i);return Object(P["isUnavailable"])(e,s)}var Q=a(134);var J=a(132);var Z=a(1298);var X=a(20);var $=Object(X["b"])("TS.coachmark.legacyIsShowing");var ee=a(181);var te=a(113);var ae=a(12);var re=a(279);var ne=10;var ie=5;function se(e,t,a){var r=a();var n=!(!!Object(j["getFromBootData"])(r,"inviter_id")&&!!Object(j["getFromBootData"])(r,"inviter_name")||!!Object(j["getFromBootData"])(r,"landing_place_channel"));if(Object(G["f"])(r,"show_sidebar_quickswitcher_button"))return;if(Object(G["f"])(r,"k_key_omnibox_auto_hide_count")===ie)return;if(void 0===Object(G["f"])(r,"k_key_omnibox_auto_hide_count"))return;if(Object(ee["b"])(r))return;if(Object(Z["b"])())return;if($())return;if(Object(T["g"])(r)>=ne){Object(ae["a"])({state:r}).error({show_sidebar_quickswitcher_button:JSON.stringify(Object(G["f"])(r,"show_sidebar_quickswitcher_button")),k_key_omnibox_auto_hide_count:JSON.stringify(Object(G["f"])(r,"k_key_omnibox_auto_hide_count")),count_of_open_channels:Object(T["g"])(r)},"show_sidebar_quickswitcher_button automatically set to true",{subtype:"show_sidebar_quickswitcher_button_true"});t(Object(J["c"])({pref:"show_sidebar_quickswitcher_button",value:true}));n&&t(Object(q["setJumperCoachmarkState"])("SHOW_BUTTON"))}}Object(M["b"])({actions:[g["a"]],sideEffect:se,reasons:[I["a"].ADD_CHANNEL,I["a"].UPSERT_CHANNEL]});function oe(e,t,a){var r=a();var n=z(r,Object(H["g"])(r));n||Object(re["c"])()}Object(M["b"])({actions:[w["e"]],sideEffect:oe});function le(e,t){var a=Object(G["d"])(e).split(",").filter(function(t){return Object(Q["a"])(t)&&!Object(T["q"])(e,t)});a.length&&t(Object(te["d"])({ids:a}))}function ce(e,t,a){var r=a();le(r,t)}Object(M["b"])({actions:[W["c"]],sideEffect:ce});function ue(e,t,a){var r=a();if("newxp_suggested_channels"!==e.payload.pref)return;le(r,t)}Object(M["b"])({actions:[W["b"]],sideEffect:ue});var de=a(98);var pe=a(103);var he=a(209);var ve=a(284);var me=a(300);var fe=a(67);var be=a(547);var ge=a(188);var _e=a(866);var ye=a(39);var Oe=a(298);var ke=a(168);var Ee=a(240);var Ce=a(38);function je(e,t,a){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];var n=a();if(!Object(be["isFullyBooted"])(n)){Me({getState:a},"Not marking "+e+" because not fully booted");return}var i=Object(S["a"])(n);if(i!==e){Object(Ee["d"])(2005)&&Me({getState:a},"Not marking because "+e+" is not active");return}if(Object(ve["a"])(n)){Me({getState:a},"Not marking "+e+" because unread point was set manually");return}if(Object(Oe["b"])()){Me({getState:a},"Not marking "+e+" because active channel is hidden");return}if(Object(Ce["a"])()){if(!Object(_e["c"])(n)){Me({getState:a},"Not marking "+e+" because attention not on chat ("+Object(_e["b"])(n)+")");r||t(Object(w["i"])(null));return}}else if(!Object(ke["f"])()){Me({getState:a},"Not marking "+e+" because attention not on chat ("+Object(ke["c"])()+")");r||t(Object(w["i"])(null));return}var s=Object(T["d"])(n,e);var o=Object(pe["getTimestampsByChannelId"])(n,e),l=o.timestamps;var c=Object(P["getLatestTs"])(s,l);var u=Object(P["isRead"])(s);if(Object(P["getLastReadTs"])(s)>=c&&u){Me({getState:a},"Not marking "+e+" because last_read >= latest && channel is read");return}var d=we(n);var p=Object(ve["q"])(n);var h=Object(P["getLastReadTs"])(s)>=c;var v=Object(fe["a"])(n,e,c);var m=Object(j["getCurrentUserId"])(n);var f=v&&v.user===m;if(d||p||h||u&&f){Me({getState:a},d?"Marking "+e+" because mark_msgs_read_immediately pref":p?"Marking "+e+" because unread line is visible":h?"Marking "+e+" because last_read >= latest":"Marking "+e+" because channel is read and last message is from self");t(Object(de["r"])({channelId:e,saveGhost:r&&!u,reason:ye["MARKED_REASONS"].VIEWED}))}else if(!d){Me({getState:a},"Not marking "+e+", clearing ghost last_read");t(Object(w["i"])(null))}}function we(e){return Object(G["f"])(e,"mark_msgs_read_immediately")&&!Object(G["f"])(e,"start_scroll_at_oldest")}var Se=o.a.debounce(function(e,t,a){var r=a();var n=Object(T["d"])(r,e);if(we(r)||!Object(P["isRead"])(n)){Me({getState:a},"Checking unreads after debounced channel change to "+e);je(e,t,a)}},500);function Ie(e,t,a){var r=e.payload.channelId;if(!r)return;Se(r,t,a)}function Te(e,t,a){var r=a();var n=Object(S["a"])(r);if(!Object(Q["a"])(n))return;var i=Object(he["isWindowFocused"])(r);var s=!Object(Ce["a"])()||Object(H["h"])(r);i&&s&&requestAnimationFrame(function(){Me({getState:a},"Checking unreads after window became focused");je(n,t,a)})}function Ae(e,t,a){var r=a();var n=Object(S["a"])(r);Object(H["h"])(r)&&Object(Q["a"])(n)&&requestAnimationFrame(function(){Me({getState:a},"Checking unreads after workspace became focused");je(n,t,a)});t(Object(ge["activeWorkspaceChanged"])())}var Ne=o.a.debounce(function(e,t,a){var r=Object(ve["q"])(a());if(r){Me({getState:a},"Checking unreads after unread line became visible");je(e,t,a)}},350);function Pe(e,t,a){var r=a();var n=Object(S["a"])(r);if(!Object(Q["a"])(n))return;if(we(r))return;Ne(n,t,a)}function Re(e,t,a){var r=a();var n=Object(S["a"])(r);if(!Object(Q["a"])(n))return;o.a.defer(function(){Me({getState:a},"Checking unreads after fully booted");je(n,t,a)})}Object(M["b"])({actions:[w["e"]],sideEffect:Ie});Object(M["b"])({actions:[he["innerUpdateFocus"],he["setWindow"]],sideEffect:Te});Object(M["b"])({actions:[me["d"]],sideEffect:Ae});Object(M["b"])({actions:[w["n"]],sideEffect:Pe});Object(M["b"])({actions:[be["setFullyBooted"]],sideEffect:Re});function Me(e,t){Object(ae["a"])(e).info("CHECK-UNREADS",t)}var De=a(23);var xe=a(294);var Fe=3;var Le={};function Be(e,t,a){var r=Object(De["c"])(a());Le[r]=(Le[r]||0)+1;Le[r]>=Fe&&Object(xe["a"])({reason:"Provisional connection timed out "+Fe+" in a row"})}function Ue(e,t,a){var r=Object(De["c"])(a());Le[r]=0}Object(M["a"])([{actions:[_["provisionallyConnectedTimeout"]],sideEffect:Be},{actions:[_["connected"]],sideEffect:Ue}]);var qe={PROV_CONNECTED_TIMEOUT_THRESHOLD:Fe,consecutiveProvConnectedTimeouts:Le,maybeColdBootOnSocketTimeouts:Be,resetConsecutiveProvConnectedTimeouts:Ue};Object.defineProperties(qe,{consecutiveProvConnectedTimeouts:{get:function e(){return Le},set:function e(t){Le=t}}});var Ge=a(320);var We=a(195);var He=a(538);var Ve=a(376);function Ke(e,t,a){var r=a();if(!Object(j["isFeatureEnabled"])(r,"feature_degraded_send"))return;if(Object(We["d"])(r)){Object(Ve["g"])();Object(Oe["d"])()}else if(Object(He["b"])())if(Object(We["c"])(r)){if(!Object(We["e"])(r)){Object(Ve["f"])();Object(Oe["c"])({reason:{SERVICE_DOWN:true}})}}else{Object(Ve["f"])();Object(Oe["c"])({reason:{API_ERROR:true}})}else{Object(Ve["f"])();Object(Oe["c"])({reason:{OFFLINE:true}})}}Object(M["b"])({actions:[Ge["b"],Ge["a"]],sideEffect:Ke});var ze=a(1);var Ye=a.n(ze);var Qe=a(15);var Je=a(150);var Ze=a(48);var Xe=a(74);var $e=a.n(Xe);var et=a(30);var tt=a(60);var at=a(255);var rt=a(57);function nt(e){if(Object(tt["urlQueryStringParse"])(window.location).deprecation_is_deprecated_ssb)return true;var t=e();if(!Object(et["isSSB"])())return false;if(Object(j["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation")&&!Object(et["isSSBAndAtLeastVersion"])("3.0.0"))return true;return false}function it(e){if(Object(tt["urlQueryStringParse"])(window.location).deprecation_is_outdated_browser)return true;if(Object(et["isSSB"])())return false;if(Object(j["isFeatureEnabled"])(e(),"feature_deprecate_q119_outdated")){if($e.a.chrome&&$e.a.version<66)return true;if($e.a.firefox&&$e.a.version<60)return true;if($e.a.safari&&$e.a.version<10.1)return true;if($e.a.msedge&&$e.a.version<16.16299)return true}return false}function st(e){if(Object(tt["urlQueryStringParse"])(window.location).deprecation_is_unsupported_browser)return true;if(Object(et["isSSB"])())return false;if(Object(j["isFeatureEnabled"])(e(),"feature_deprecate_q119_unsupported")&&!($e.a.chrome||$e.a.firefox||$e.a.safari||$e.a.msedge))return true;if(Object(j["isFeatureEnabled"])(e(),"feature_deprecate_q119_mobile")&&ct())return true;return false}function ot(e){if(Object(tt["urlQueryStringParse"])(window.location).deprecation_is_outdated_os)return true;if(Object(j["isFeatureEnabled"])(e(),"feature_deprecate_q119_os")&&Object(et["isSSB"])()&&"macOS"===$e.a.osname&&Object(at["compareVersions"])(Object(at["parseVersionString"])($e.a.osversion),Object(at["parseVersionString"])("10.10"))<0)return true;return false}function lt(){if(Object(tt["urlQueryStringParse"])(window.location).deprecation_is_third_party)return true;if(navigator.userAgent&&navigator.userAgent.includes){if(navigator.userAgent.includes("Franz"))return true;if(navigator.userAgent.includes("Rambox"))return true;if(navigator.userAgent.includes("Station"))return true}return false}function ct(){if(Object(tt["urlQueryStringParse"])(window.location).deprecation_is_mobile)return true;if($e.a.mobile||$e.a.tablet)return true;return false}function ut(){if(Object(tt["urlQueryStringParse"])(window.location).deprecation_can_install_ssb)return true;if(Object(tt["urlQueryStringParse"])(window.location).deprecation_cannot_install_ssb)return false;if("macOS"===$e.a.osname){var e=Object(at["parseVersionString"])("10.10");var t=Object(at["parseVersionString"])($e.a.osversion);return Object(at["compareVersions"])(t,e)>-1}if("Windows"===$e.a.osname)return["7","8","8.1","10"].includes($e.a.osversion);if("Linux"===$e.a.osname)return true;return false}function dt(){var e=Object(rt["f"])();if("en-US"===e)return"https://slack.com/downloads";return"https://slack.com/intl/"+e+"/downloads"}function pt(){if(window.process&&window.process.mas)return"macappstore://itunes.apple.com/app/slack/id803453959";if(window.process&&window.process.windowsStore)return"ms-windows-store://pdp/?ProductId=9wzdncrdk3wp";var e=false;var t="";if(Object(et["isMac"])())e="osx";else if(Object(et["isWindows"])()){e="windows";t=Object(et["isWin64"])()?"windows_64":"windows"}else Object(et["isLinux"])()&&(e=false);if(!e)return dt();var a=dt()+"/instructions/"+e;a=Object(tt["setUrlQueryStringValue"])(a,"os",e);t&&(a=Object(tt["setUrlQueryStringValue"])(a,"build_architecture",t));return a}var ht=a(164);var vt=a(71);var mt=a(6);var ft=a.n(mt);var bt=a(7);var gt=a.n(bt);var _t=a(8);var yt=a.n(_t);var Ot=a(9);var kt=a.n(Ot);var Et=a(0);var Ct=a(13);var jt=a(10);var wt=a(157);var St=a(51);var It=new jt["b"]("deprecation");var Tt={featureSsbQ218Deprecation:Et["b"].bool,onCloseComplete:Et["b"].func,telemeter:Et["b"].object};var At={featureSsbQ218Deprecation:false,onCloseComplete:s["noop"],telemeter:{count:s["noop"]}};var Nt=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onLinkClick=a.onLinkClick.bind(a);a.ref=Ye.a.createRef();return a}gt()(t,[{key:"onLinkClick",value:function e(){this.props.telemeter.count("deprecation_toast_click_ssb");this.ref.current&&this.ref.current.getWrappedInstance()&&this.ref.current.getWrappedInstance().hideToast()}},{key:"render",value:function e(){if(!this.props.featureSsbQ218Deprecation)return null;return Ye.a.createElement(wt["b"],{shouldAutoFade:false,ref:this.ref,onCloseComplete:this.props.onCloseComplete},Ye.a.createElement("div",null,Ye.a.createElement("strong",null,It.t("This is an out-of-date version of Slack.",{fallbackHash:"50ebb2ef5c811360b7496e2bec13c28583af12e8"})),Ye.a.createElement("br",null),Ye.a.createElement(St["a"],{href:pt(),onClick:this.onLinkClick},It.t("Update now"))))}}]);return t}(ze["Component"]);Nt.displayName="SSBDeprecationToast";Nt.defaultProps=At;var Pt=function e(t){return{featureSsbQ218Deprecation:Object(j["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation"),telemeter:Object(vt["c"])({state:t})}};var Rt=Object(Ct["connect"])(Pt)(Nt);var Mt=a(84);var Dt=new jt["b"]("deprecation");var xt={featureSsbQ218DeprecationModal:Et["b"].bool,telemeter:Et["b"].object};var Ft={featureSsbQ218DeprecationModal:false,telemeter:{count:s["noop"]}};var Lt=function(e){kt()(t,e);function t(){ft()(this,t);return yt()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}gt()(t,[{key:"onGo",value:function e(){this.props.telemeter.count("deprecation_modal_click_ssb");window.open(pt())}},{key:"render",value:function e(){if(!this.props.featureSsbQ218DeprecationModal)return null;return Ye.a.createElement(Mt["a"],{title:Dt.t("This is an out-of-date version of Slack"),cancelText:Dt.t("Skip for Now"),goButtonText:Dt.t("Update the App"),onGo:this.onGo},Ye.a.createElement("div",null,Ye.a.createElement("p",null,Dt.t("We\u2019ve released a new version of Slack with an assortment of bug fixes and an all-around smoother experience.")),Ye.a.createElement("p",null,Dt.rt("To continue using Slack, please update your version of the app immediately. Feel free to <a>contact us</a> if you have any questions.",{fallbackHash:"c9631f01ab6b932241f68aa1de3b1f179c33aceb"},function(e){var t=e.text;return Ye.a.createElement(St["a"],{href:"https://my.slack.com/help/requests/new"},t)}))))}}]);return t}(ze["Component"]);Lt.displayName="SSBDeprecationModal";Lt.defaultProps=Ft;var Bt=function e(t){return{featureSsbQ218DeprecationModal:Object(j["isFeatureEnabled"])(t,"feature_ssb_q218_deprecation_modal"),telemeter:Object(vt["c"])({state:t})}};var Ut=Object(Ct["connect"])(Bt)(Lt);var qt=a(204);var Gt=new jt["b"]("deprecation");var Wt={canInstallSSB:Et["b"].bool,isThirdParty:Et["b"].bool,featureDeprecateQ119OutdatedToast:Et["b"].bool,onCloseComplete:Et["b"].func,telemeter:Et["b"].object};var Ht={canInstallSSB:false,isThirdParty:false,featureDeprecateQ119OutdatedToast:false,onCloseComplete:s["noop"],telemeter:{count:s["noop"]}};var Vt=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onLinkClick=a.onLinkClick.bind(a);a.ref=Ye.a.createRef();return a}gt()(t,[{key:"onLinkClick",value:function e(){this.props.telemeter.count("deprecation_toast_click_outdated");this.ref.current&&this.ref.current.getWrappedInstance()&&this.ref.current.getWrappedInstance().hideToast()}},{key:"render",value:function e(){if(!this.props.featureDeprecateQ119OutdatedToast)return null;var t=Object(qt["b"])({articleId:"115002037526",zdLocale:Object(rt["a"])()});var a=void 0;a=this.props.isThirdParty?Gt.t("You\u2019re accessing Slack with a third-party app that is out-of-date."):this.props.canInstallSSB?Gt.t("This browser is out-of-date. Please update or switch to the Slack app."):Gt.t("This browser is out-of-date and needs to be updated soon.");return Ye.a.createElement(wt["b"],{shouldAutoFade:false,ref:this.ref,onCloseComplete:this.props.onCloseComplete},Ye.a.createElement("div",null,Ye.a.createElement("strong",null,a)," ",Ye.a.createElement(St["a"],{href:t,onClick:this.onLinkClick},Gt.t("Learn more"))))}}]);return t}(ze["Component"]);Vt.displayName="OutdatedBrowserToast";Vt.defaultProps=Ht;var Kt=function e(t){return{featureDeprecateQ119OutdatedToast:Object(j["isFeatureEnabled"])(t,"feature_deprecate_q119_outdated_toast"),telemeter:Object(vt["c"])({state:t})}};var zt=Object(Ct["connect"])(Kt)(Vt);var Yt=new jt["b"]("deprecation");var Qt={canInstallSSB:Et["b"].bool,isMobile:Et["b"].bool,featureDeprecateQ119UnsupportedToast:Et["b"].bool,featureDeprecateQ119Mobile:Et["b"].bool,onCloseComplete:Et["b"].func,telemeter:Et["b"].object};var Jt={canInstallSSB:false,isMobile:false,featureDeprecateQ119UnsupportedToast:false,featureDeprecateQ119Mobile:false,onCloseComplete:s["noop"],telemeter:{count:s["noop"]}};var Zt=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onLinkClick=a.onLinkClick.bind(a);a.ref=Ye.a.createRef();return a}gt()(t,[{key:"onLinkClick",value:function e(){this.props.telemeter.count("deprecation_toast_click_unsupported");this.ref.current&&this.ref.current.getWrappedInstance()&&this.ref.current.getWrappedInstance().hideToast()}},{key:"render",value:function e(){if(!this.props.featureDeprecateQ119UnsupportedToast)return null;var t=Object(qt["b"])({articleId:"115002037526",zdLocale:Object(rt["a"])()});var a=void 0;this.props.isMobile?this.props.featureDeprecateQ119Mobile&&(a=Yt.t("This browser is no longer supported. Please download the app.")):a=this.props.canInstallSSB?Yt.t("This browser is no longer supported. Please switch browsers or download the app."):Yt.t("This browser is no longer supported \u2014 please switch browsers soon.");return Ye.a.createElement(wt["b"],{shouldAutoFade:false,ref:this.ref,onCloseComplete:this.props.onCloseComplete},Ye.a.createElement("div",null,Ye.a.createElement("strong",null,a)," ",Ye.a.createElement(St["a"],{href:t,onClick:this.onLinkClick},Yt.t("Learn more"))))}}]);return t}(ze["Component"]);Zt.displayName="UnsupportedBrowserToast";Zt.defaultProps=Jt;var Xt=function e(t){return{featureDeprecateQ119UnsupportedToast:Object(j["isFeatureEnabled"])(t,"feature_deprecate_q119_unsupported_toast"),featureDeprecateQ119Mobile:Object(j["isFeatureEnabled"])(t,"feature_deprecate_q119_mobile"),telemeter:Object(vt["c"])({state:t})}};var $t=Object(Ct["connect"])(Xt)(Zt);var ea=new jt["b"]("deprecation");var ta={featureDeprecateQ119OsToast:Et["b"].bool,onCloseComplete:Et["b"].func,telemeter:Et["b"].object};var aa={featureDeprecateQ119OsToast:false,onCloseComplete:s["noop"],telemeter:{count:s["noop"]}};var ra=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onLinkClick=a.onLinkClick.bind(a);a.ref=Ye.a.createRef();return a}gt()(t,[{key:"onLinkClick",value:function e(){this.props.telemeter.count("deprecation_toast_click_os");this.ref.current&&this.ref.current.getWrappedInstance()&&this.ref.current.getWrappedInstance().hideToast()}},{key:"render",value:function e(){if(!this.props.featureDeprecateQ119OsToast)return null;var t=Object(qt["b"])({articleId:"115002037526",zdLocale:Object(rt["a"])()});var a=ea.t("This operating system is no longer supported \u2014 please update soon.");return Ye.a.createElement(wt["b"],{shouldAutoFade:false,ref:this.ref,onCloseComplete:this.props.onCloseComplete},Ye.a.createElement("div",null,Ye.a.createElement("strong",null,a)," ",Ye.a.createElement(St["a"],{href:t,onClick:this.onLinkClick},ea.t("Learn more"))))}}]);return t}(ze["Component"]);ra.displayName="OutdatedOSToast";ra.defaultProps=aa;var na=function e(t){return{featureDeprecateQ119OsToast:Object(j["isFeatureEnabled"])(t,"feature_deprecate_q119_os_toast"),telemeter:Object(vt["c"])({state:t})}};var ia=Object(Ct["connect"])(na)(ra);var sa=new jt["b"]("deprecation");var oa={canInstallSSB:Et["b"].bool,isThirdParty:Et["b"].bool,featureDeprecateQ119Modal:Et["b"].bool,telemeter:Et["b"].object};var la={canInstallSSB:false,isThirdParty:false,featureDeprecateQ119Modal:false,telemeter:{count:s["noop"]}};var ca=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onGo=a.onGo.bind(a);return a}gt()(t,[{key:"onGo",value:function e(){var t=this.props,a=t.isThirdParty,r=t.canInstallSSB,n=t.telemeter;a?n.count("deprecation_modal_click_thirdparty"):n.count("deprecation_modal_click_outdated");r?window.open(pt()):window.open(this.getHelpCenterUrl())}},{key:"getHelpCenterUrl",value:function e(){return Object(qt["b"])({articleId:"115002037526",zdLocale:Object(rt["a"])()})}},{key:"renderThirdParty",value:function e(){var t=this;if(!this.props.featureDeprecateQ119Modal)return null;var a=this.props.canInstallSSB;return Ye.a.createElement(Mt["a"],{title:sa.t("This app is out-of-date"),cancelText:sa.t("Skip for Now"),goButtonText:a?sa.t("Use the Slack App"):sa.t("Learn More"),onGo:this.onGo},Ye.a.createElement("div",null,Ye.a.createElement("p",null,sa.t("You\u2019re using a third-party app to access Slack, and it\u2019s now out-of-date. We know it\u2019s a hassle to update or switch apps, but we want your experience of Slack to be fast, secure, and the best it can possibly be.")),Ye.a.createElement("p",null,a?sa.rt("<strong>Please update your third-party app, if possible, to continue using Slack.</strong> Or, for the finest Slack experience, we recommend switching to the <download>Slack desktop app</download> \u2014 which handily includes automatic updates!",{},function(e){var t=e.tag,a=e.text;if("download"===t)return Ye.a.createElement(St["a"],{href:dt()},a);return false}):sa.rt("Please update your third-party app, if possible, to continue using Slack. You can also switch to using Slack in one of our <hc>supported browsers</hc>, if you\u2019d prefer.",{},function(e){var a=e.tag,r=e.text;if("hc"===a)return Ye.a.createElement(St["a"],{href:t.getHelpCenterUrl()},r);return false})),Ye.a.createElement("p",null,sa.rt("Feel free to <contact>contact us</contact> if you have any questions.",{},function(e){var t=e.tag,a=e.text;if("contact"===t)return Ye.a.createElement(St["a"],{href:"https://my.slack.com/help/requests/new"},a);return false}))))}},{key:"render",value:function e(){var t=this;if(!this.props.featureDeprecateQ119Modal)return null;var a=this.props,r=a.canInstallSSB,n=a.isThirdParty;if(n)return this.renderThirdParty();return Ye.a.createElement(Mt["a"],{title:sa.t("This browser is out-of-date"),cancelText:sa.t("Skip for Now"),goButtonText:r?sa.t("Use the Slack App"):sa.t("Learn More"),onGo:this.onGo},Ye.a.createElement("div",null,Ye.a.createElement("p",null,sa.t("We know it\u2019s a hassle to upgrade, but we want your experience of Slack to be fast, secure, and the best it can possibly be.")),Ye.a.createElement("p",null,sa.rt("<strong>To continue using Slack, please upgrade to a newer version of one of our <hc>supported browsers</hc> by March 15.</strong> As always, feel free to <contact>contact us</contact> if you have any questions.",{},function(e){var a=e.tag,r=e.text;if("contact"===a)return Ye.a.createElement(St["a"],{href:"https://my.slack.com/help/requests/new"},r);if("hc"===a)return Ye.a.createElement(St["a"],{href:t.getHelpCenterUrl()},r);return false})),r&&Ye.a.createElement("p",null,sa.t("For the finest Slack experience, we recommend using our desktop app: You\u2019ll get greater control over your notifications, easy switching between teams, and \u2014 handily \u2014 automatic updates!"))))}}]);return t}(ze["Component"]);ca.displayName="OutdatedBrowserModal";ca.defaultProps=la;var ua=function e(t){return{featureDeprecateQ119Modal:Object(j["isFeatureEnabled"])(t,"feature_deprecate_q119_modal"),telemeter:Object(vt["c"])({state:t})}};var da=Object(Ct["connect"])(ua)(ca);var pa=new jt["b"]("deprecation");var ha={canInstallSSB:Et["b"].bool,featureDeprecateQ119Modal:Et["b"].bool,telemeter:Et["b"].object};var va={canInstallSSB:false,featureDeprecateQ119Modal:false,telemeter:{count:s["noop"]}};var ma=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onGo=a.onGo.bind(a);return a}gt()(t,[{key:"onGo",value:function e(){var t=this.props.canInstallSSB;this.props.telemeter.count("deprecation_modal_click_unsupported");t?window.open(pt()):window.open(this.getHelpCenterUrl())}},{key:"getHelpCenterUrl",value:function e(){return Object(qt["b"])({articleId:"115002037526",zdLocale:Object(rt["a"])()})}},{key:"render",value:function e(){var t=this;if(!this.props.featureDeprecateQ119Modal)return null;var a=this.props.canInstallSSB;return Ye.a.createElement(Mt["a"],{title:pa.t("This browser is no longer supported"),cancelText:pa.t("Skip for Now"),goButtonText:a?pa.t("Use the Slack App"):pa.t("Learn More"),onGo:this.onGo},Ye.a.createElement("div",null,Ye.a.createElement("p",null,pa.t("We know it\u2019s a hassle to change browsers, but we want your experience of Slack to be fast, secure, and the best it can possibly be.")),Ye.a.createElement("p",null,pa.rt("<strong>To continue using Slack, please switch to one of our <hc>supported browsers</hc> by March 15.</strong> As always, feel free to <contact>contact us</contact> if you have any questions.",{},function(e){var a=e.tag,r=e.text;if("contact"===a)return Ye.a.createElement(St["a"],{href:"https://my.slack.com/help/requests/new"},r);if("hc"===a)return Ye.a.createElement(St["a"],{href:t.getHelpCenterUrl()},r);return false})),a&&Ye.a.createElement("p",null,pa.t("For the finest Slack experience, we recommend using our desktop app: You\u2019ll get greater control over your notifications, easy switching between teams, and \u2014 handily \u2014 automatic updates!"))))}}]);return t}(ze["Component"]);ma.displayName="UnsupportedBrowserModal";ma.defaultProps=va;var fa=function e(t){return{featureDeprecateQ119Modal:Object(j["isFeatureEnabled"])(t,"feature_deprecate_q119_modal"),telemeter:Object(vt["c"])({state:t})}};var ba=Object(Ct["connect"])(fa)(ma);var ga=new jt["b"]("deprecation");var _a={featureDeprecateQ119Modal:Et["b"].bool,telemeter:Et["b"].object};var ya={featureDeprecateQ119Modal:false,telemeter:{count:s["noop"]}};var Oa=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onGo=a.onGo.bind(a);return a}gt()(t,[{key:"onGo",value:function e(){this.props.telemeter.count("deprecation_modal_click_os");window.open(this.getHelpCenterUrl())}},{key:"getHelpCenterUrl",value:function e(){return Object(qt["b"])({articleId:"115002037526",zdLocale:Object(rt["a"])()})}},{key:"render",value:function e(){var t=this;if(!this.props.featureDeprecateQ119Modal)return null;return Ye.a.createElement(Mt["a"],{title:ga.t("This operating system is no longer supported"),truncateTitle:false,cancelText:ga.t("Skip for Now"),goButtonText:ga.t("Learn More"),onGo:this.onGo},Ye.a.createElement("div",null,Ye.a.createElement("p",null,ga.t("We know it\u2019s a hassle to run an update, but we want your experience of Slack to be fast, secure, and the best it can possibly be.")),Ye.a.createElement("p",null,ga.rt("<strong>To continue using Slack, please <hc>update your computer\u2019s operating system</hc> by March 15.</strong> As always, feel free to <contact>contact us</contact> if you have any questions.",{},function(e){var a=e.tag,r=e.text;if("contact"===a)return Ye.a.createElement(St["a"],{href:"https://my.slack.com/help/requests/new"},r);if("hc"===a)return Ye.a.createElement(St["a"],{href:t.getHelpCenterUrl()},r);return false}))))}}]);return t}(ze["Component"]);Oa.displayName="OudatedOSModal";Oa.defaultProps=ya;var ka=function e(t){return{featureDeprecateQ119Modal:Object(j["isFeatureEnabled"])(t,"feature_deprecate_q119_modal"),telemeter:Object(vt["c"])({state:t})}};var Ea=Object(Ct["connect"])(ka)(Oa);var Ca=604800;var ja=86400;function wa(e){var t=Object(ht["d"])();var a=Object(G["f"])(e(),"deprecation_toast_last_seen");return t-a<Ca}function Sa(e){var t=Object(ht["d"])();var a=Object(G["f"])(e(),"deprecation_modal_last_seen");return t-a<ja}function Ia(){var e=Object(ht["d"])();return Object(ht["l"])(e).getHours()>=12}function Ta(e){if(Object(tt["urlQueryStringParse"])(window.location).deprecation_show_ssb_toast)return true;if(!nt(e))return false;if(Object(j["isFeatureEnabled"])(e(),"feature_ssb_q218_deprecation_modal"))return false;if(wa(e))return false;if(!Ia())return false;return true}function Aa(e){if(Object(tt["urlQueryStringParse"])(window.location).deprecation_show_ssb_modal)return true;if(!nt(e))return false;if(!Object(j["isFeatureEnabled"])(e(),"feature_ssb_q218_deprecation_modal"))return false;if(Sa(e))return false;if(!Ia())return false;return true}function Na(e){if(Object(tt["urlQueryStringParse"])(window.location).deprecation_show_outdated_browser_modal)return true;if(!it(e))return false;if(!Object(j["isFeatureEnabled"])(e(),"feature_deprecate_q119_modal"))return false;if(Sa(e))return false;if(!Ia())return false;return true}function Pa(e){if(Object(tt["urlQueryStringParse"])(window.location).deprecation_show_unsupported_browser_modal)return true;if(!st(e))return false;if(!Object(j["isFeatureEnabled"])(e(),"feature_deprecate_q119_modal"))return false;if(Sa(e))return false;if(!Ia())return false;return true}function Ra(e){if(Object(tt["urlQueryStringParse"])(window.location).deprecation_show_outdated_os_modal)return true;if(!ot(e))return false;if(!Object(j["isFeatureEnabled"])(e(),"feature_deprecate_q119_modal"))return false;if(Sa(e))return false;if(!Ia())return false;return true}function Ma(e){if(Object(tt["urlQueryStringParse"])(window.location).deprecation_show_outdated_browser_toast)return true;if(!it(e))return false;if(!Object(j["isFeatureEnabled"])(e(),"feature_deprecate_q119_outdated_toast"))return false;if(Object(j["isFeatureEnabled"])(e(),"feature_deprecate_q119_modal"))return false;if(wa(e))return false;if(!Ia())return false;return true}function Da(e){if(Object(tt["urlQueryStringParse"])(window.location).deprecation_show_unsupported_browser_toast)return true;if(!st(e))return false;if(!Object(j["isFeatureEnabled"])(e(),"feature_deprecate_q119_unsupported_toast"))return false;if(Object(j["isFeatureEnabled"])(e(),"feature_deprecate_q119_modal"))return false;if(wa(e))return false;if(!Ia())return false;return true}function xa(e){if(Object(tt["urlQueryStringParse"])(window.location).deprecation_show_outdated_os_toast)return true;if(!ot(e))return false;if(!Object(j["isFeatureEnabled"])(e(),"feature_deprecate_q119_os_toast"))return false;if(Object(j["isFeatureEnabled"])(e(),"feature_deprecate_q119_modal"))return false;if(wa(e))return false;if(!Ia())return false;return true}function Fa(e){e(Object(J["c"])({pref:"deprecation_toast_last_seen",value:Object(ht["d"])()}))}function La(e){e(Object(J["c"])({pref:"deprecation_modal_last_seen",value:Object(ht["d"])()}))}function Ba(e,t){var a=Object(vt["c"])({getState:t});if(Aa(t)){La(e);e(Object(Ze["openModal"])({element:Ye.a.createElement(Ut,null)}));a.count("deprecation_modal_ssb");return true}if(Na(t)){La(e);e(Object(Ze["openModal"])({element:Ye.a.createElement(da,{canInstallSSB:ut(),isThirdParty:lt()})}));lt()?a.count("deprecation_modal_thirdparty"):a.count("deprecation_modal_outdated");return true}if(Pa(t)){La(e);e(Object(Ze["openModal"])({element:Ye.a.createElement(ba,{canInstallSSB:ut()})}));a.count("deprecation_modal_unsupported");return true}if(Ra(t)){La(e);e(Object(Ze["openModal"])({element:Ye.a.createElement(Ea,null)}));a.count("deprecation_modal_os");return true}return false}function Ua(e,t){var a=Object(vt["c"])({getState:t});if(Ta(t)){Fa(e);e(Object(Je["enqueueToast"])({element:Ye.a.createElement(Rt,null)}));a.count("deprecation_toast_ssb");return true}if(Ma(t)){Fa(e);e(Object(Je["enqueueToast"])({element:Ye.a.createElement(zt,{canInstallSSB:ut(),isThirdParty:lt()})}));a.count("deprecation_toast_outdated");return true}if(Da(t)){Fa(e);e(Object(Je["enqueueToast"])({element:Ye.a.createElement($t,{canInstallSSB:ut(),isMobile:ct()})}));a.count("deprecation_toast_unsupported");return true}if(xa(t)){Fa(e);e(Object(Je["enqueueToast"])({element:Ye.a.createElement(ia,null)}));a.count("deprecation_toast_os");return true}return false}var qa=Object(Qe["b"])("shows a deprecation warning if and when appropriate",function(e,t){if(!Object(j["isClientApp"])(t()))return false;if(Ba(e,t))return true;if(Ua(e,t))return true;return false});function Ga(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var r=arguments[2];var n=r();if(t)return;if(!Object(_["isFirstConnection"])(n))return;if(!Object(he["isWindowFocused"])(n))return;a(qa())}function Wa(e,t,a){var r=a();if(!Object(he["isWindowFocused"])(r))return;if(!Object(_["wasPreviouslyConnected"])(r))return;t(qa())}Object(M["b"])({actions:[_["connected"]],sideEffect:Ga});Object(M["b"])({actions:[he["innerUpdateFocus"]],sideEffect:Wa});var Ha=a(193);var Va=a(42);var Ka=a(100);var za="DESKTOP-SIDE-EFFECT";var Ya=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.actions,r=t.sideEffect;return Object(M["b"])({actions:a,sideEffect:function e(t,a,n){Object(ae["a"])({getState:n}).info(za,"Reacting to ",t);return r(t,a,n)}})};Object(M["b"])({actions:[Ha["updateFromDesktop"]],sideEffect:function e(t,a,r){Object(ae["a"])({getState:r}).info(za,"Update from desktop for keys ",Object.keys(t.payload))}});Ya({actions:[Ha["startDesktopDownload"]],sideEffect:function e(t,a,r){var n=t.payload,i=n.fileId,s=n.downloadUrl,o=n.showFlexpane;var l=r();var c=Object(De["c"])(l);s||Object(ae["a"])({getState:r}).error(za,"Received startDesktopDownload with missing url");o&&a(Object(Ka["f"])());Object(Ha["getTeamDownloadIds"])(l).includes(i)&&a(Object(Ha["highlightDownload"])(i));Object(Va["startDownload"])({id:i,teamId:c,url:s})}});var Qa=function e(t,a){Ya({actions:[t],sideEffect:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.payload;var n=arguments[1];var i=arguments[2];var s=Object(De["c"])(i());a(r,s)}})};Qa(Ha["showDesktopDownload"],Va["showDownload"]);Qa(Ha["openDesktopDownload"],Va["openDownload"]);Qa(Ha["cancelDesktopDownload"],Va["cancelDownload"]);Qa(Ha["retryDesktopDownload"],Va["retryDownload"]);Qa(Ha["removeDesktopDownload"],Va["removeDownload"]);Qa(Ha["resumeDesktopDownload"],Va["resumeDownload"]);Qa(Ha["pauseDesktopDownload"],Va["pauseDownload"]);Ya({actions:[Ha["clearTeamDesktopDownloads"]],sideEffect:function e(t,a,r){return Object(Va["clearDownloads"])(Object(De["c"])(r()))}});var Ja=a(47);var Za=a(845);function Xa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];Object(Za["b"])(t)?a(Object(Za["a"])(t)):a(Object(Ja["f"])(t))}function $a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];a(Object(Ja["e"])(t))}Object(M["a"])([{actions:[_["socketErrorMessageReceived"]],sideEffect:function e(){return Xa.apply(void 0,arguments)}},{actions:[_["degradedModeMessageReceived"],_["socketMessageReceived"]],sideEffect:function e(){return $a.apply(void 0,arguments)}}]);var er={};Object.defineProperty(er,"handleSocketErrorMessage",{get:function e(){return Xa},set:function e(t){Xa=t}});Object.defineProperty(er,"handleSocketMessage",{get:function e(){return $a},set:function e(t){$a=t}});var tr=a(252);var ar=a(180);var rr=a(847);var nr="DND";var ir=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.payload;var r=arguments[1];var n=arguments[2];var i=n();if(!Object(j["isFeatureEnabled"])(i,"feature_sonic_dnd_manager"))return;if(a)return;var o=Object(s["keys"])(Object(ar["getAllDndSchedules"])(i));if(Object(s["isEmpty"])(o))return;Object(ae["a"])({getState:n}).info(nr,"Flushing and fetching fresh DND times for the following members after connecting to the websocket: "+o);r(Object(ar["removeDnd"])({memberIds:o}));r(Object(ar["updateSnooze"])({snoozeEnabled:false,snoozeEndTs:void 0}));r(Object(rr["c"])())};Object(M["b"])({actions:[_["connected"],tr["b"]],sideEffect:ir});var sr=a(43);var or=a(377);var lr=a(857);var cr=a(1197);var ur=a(470);var dr=function(){var e=Object(sr["coroutine"])(regeneratorRuntime.mark(function e(t,a){var r,n,i,s,o,l,c,u;return regeneratorRuntime.wrap(function e(d){while(1)switch(d.prev=d.next){case 0:r=a();n=br(r);if(n){d.next=4;break}return d.abrupt("return",Promise.resolve());case 4:i=Object(ae["a"])({state:r,label:pr});s=Object(vt["c"])({getState:a});i.info("Checking for EKM change events");s.count("hc_check_ekm");d.next=10;return Object(sr["resolve"])(t(Object(or["c"])()).tap(function(){s.count("hc_check_ok")}).catch(function(e){var t=e&&e.message?e.message:"unknown_error";s.count("hc_check_error");s.count("hc_check_error_"+t);i.warn("Checking for changes failed due to "+t);return{ekmChangeTimestamp:void 0}}));case 10:o=d.sent;l=o.ekmChangeTimestamp;if(l){d.next=14;break}return d.abrupt("return",Promise.resolve());case 14:c=Object(cr["getLastEKMChangeTimestamp"])(r);i.info("Last ekm change known - "+c+"; Latest ekm change - "+l);u=parseFloat(l)>parseFloat(c);if(u){s.count("hc_clear_cache_ekm");i.info("EKM clear cache event occurred");if(Object(Ce["a"])()){if(Va["isDesktop"]){i.info("Clearing desktop file cache");Object(Va["clearCache"])()}Object(xe["a"])({reason:"EKM change at "+l})}else Object(xe["b"])({reason:"EKM change at "+l})}return d.abrupt("return",Promise.resolve());case 19:case"end":return d.stop()}},e,this)}));return function t(a,r){return e.apply(this,arguments)}}();var pr="EKM-CHANGES";var hr={};var vr=288e5;var mr=5e3;function fr(e){return Object(j["isFeatureEnabled"])(e,"feature_ekm_message_revocation_polling_test")?mr:vr}function br(e){return Object(j["isClientApp"])(e)&&Object(lr["isEKMPurchased"])(e)}function gr(e){return br(e)}function _r(e){return!!hr[e]}function yr(e,t,a){var r=a();var n=Object(De["c"])(r);gr(r)?Or(n,t,a):kr(n,a)}function Or(e,t,a){if(_r(e))return;var r=a();var n=Object(ae["a"])({state:r,label:pr});var i=Object(ur["a"])(fr(r),.8,1.2);hr[e]=setInterval(function(){dr.call({},t,a);n.info("Called conversation.historyChanges API from poller for team "+e)},i);n.info("Started polling conversation.historyChanges API for team "+e+" on an interval of "+i+" ms.")}function kr(e,t){if(!_r(e))return;clearInterval(hr[e]);delete hr[e];var a=Object(ae["a"])({state:t(),label:pr});a.info("Stopped polling conversation.historyChanges API for team "+e)}function Er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var r=arguments[2];if(t)return;var n=r();if(!br(n))return;if(Object(_["isFirstConnection"])(n)){yr({},a,r);if(!Object(Ce["a"])())return}dr(a,r)}var Cr={};Object.defineProperties(Cr,{connectedSideEffect:{get:function e(){return Er},set:function e(t){Er=t}},dispatchFetchHistoryChanges:{get:function e(){return dr},set:function e(t){dr=t}},pollTimers:{get:function e(){return hr}},isPolling:{get:function e(){return _r}},maybeStartPolling:{get:function e(){return yr},set:function e(t){yr=t}},shouldDetectEKMChanges:{get:function e(){return br},set:function e(t){br=t}},shouldPoll:{get:function e(){return gr},set:function e(t){gr=t}},startPolling:{get:function e(){return Or},set:function e(t){Or=t}},stopPolling:{get:function e(){return kr},set:function e(t){kr=t}}});Object(M["a"])([{actions:[_["connected"],tr["b"]],sideEffect:Er},{actions:[lr["setPaidFeatures"]],sideEffect:yr}]);var jr=a(302);var wr=a(862);function Sr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var r=arguments[2];Object(wr["c"])(r,t)}function Ir(e,t,a){Object(wr["d"])(a)}function Tr(e,t,a){var r=a();var n=Object(jr["getLastKnownEventTimestamp"])(r);if(!n)return;Object(wr["f"])(a,{start:n})}function Ar(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var r=arguments[2];Object(wr["e"])(r,t)}Object(M["a"])([{actions:[_["connected"]],sideEffect:Sr},{actions:[_["disconnected"]],sideEffect:Ir},{actions:[tr["b"]],sideEffect:Tr},{actions:[_["socketMessageReceived"]],sideEffect:Ar}]);function Nr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;Object(xe["a"])({reason:"eventlog.history "+(t||"no reason provided")})}Object(M["b"])({actions:[jr["eventlogGapDetected"]],sideEffect:Nr});var Pr={handleEventlogGap:Nr};var Rr=a(340);var Mr=a(691);function Dr(e,t,a){var r=a();Object(Mr["f"])(Object(Rr["getExpandables"])(r))}Object(M["b"])({actions:[Rr["setExpanded"],Rr["bulkSetExpanded"]],sideEffect:Dr});var xr=a(437);var Fr=a(85);var Lr=a(1536);function Br(e,t,a){var r=a();var n=e.payload.id;var i=Object(xr["getFileRefreshState"])(r,n);if(i!==xr["STATE"].REFRESHING)return;var s=Object(xr["getFileRefreshTimeout"])(r,n);s&&clearTimeout(s);var o=setTimeout(function(){return t(Object(xr["refreshReset"])({fileId:n,timeout:o}))},Lr["a"]);t(Object(xr["refreshDone"])({fileId:n}))}Object(M["b"])({actions:[Fr["addFile"]],sideEffect:Br});var Ur=a(282);function qr(e,t,a){var r=a();e.forEach(function(e){var t=Object(Fr["getFileById"])(r,e);Object(Ur["d"])(t)})}function Gr(e,t,a){var r=e.payload;if(!r)return;qr([r.id],t,a)}function Wr(e,t,a){var r=e.payload;if(!r)return;qr(r.map(function(e){return e.id}),t,a)}Object(M["b"])({actions:[Fr["addFile"]],sideEffect:Gr});Object(M["b"])({actions:[Fr["bulkAddFiles"]],sideEffect:Wr});function Hr(e,t,a){var r=a();if(!Object(ee["b"])(r))return;if(!Object(s["get"])(window,"desktop.app.updateDragRegion"))return;var n=Object(De["c"])(r);var i=e.payload;if(n!==i)return;Object(ae["a"])({getState:a}).info("GLOBAL-NAV","Resetting SSB drag region");window.desktop.app.updateDragRegion([])}function Vr(e,t,a){var r="isTitleBarForcedByUser";if(!Object(Va["hasPreference"])(r))return;var n=a();if(!Object(ee["b"])(n)){if(Object(j["isFeatureEnabled"])(n,"feature_global_nav_rollback")){if(false===Object(Va["getPreference"])(r))return;Object(Va["setPreference"])({name:r,value:false});Object(ae["a"])({getState:a}).info("GLOBAL-NAV","Resetting Desktop Nav SSB frame changes")}return}if(true===Object(Va["getPreference"])(r))return;Object(Va["setPreference"])({name:r,value:true});Object(ae["a"])({getState:a}).info("GLOBAL-NAV","Enabling desktop UI frame changes for next boot")}Object(M["b"])({actions:[Ha["setActiveTeam"]],sideEffect:Hr});Object(M["b"])({actions:[be["setFullyBooted"]],sideEffect:Vr});var Kr=a(365);var zr=a(31);var Yr=a(433);var Qr={},Jr=Qr.fetchAuthAndReturnToUrl;var Zr=new jt["b"]("client");var Xr={team:Et["b"].object.isRequired};var $r=function e(){Jr("/"+Object(Yr["b"])())};var en=function e(t){var a=t.team;return Ye.a.createElement(Kr["a"],{onClose:$r,showCancelButton:false,title:""},Zr.rt("You have been removed from <strong>{team_name}</strong>.",{team_name:Object(zr["getTeamDisplayName"])(a)}))};en.displayName="UserRemovedFromTeamAlertDialog";var tn=en;var an=tn;var rn=Object(X["b"])("TS.maybeShowRateLimitedDialog");var nn=a(160);var sn=a(424);var on=a(269);var ln=new jt["b"]("access_limited");var cn=function(e){kt()(t,e);function t(){ft()(this,t);return yt()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}gt()(t,[{key:"render",value:function e(){if(!this.props.featureLimitedAccessUI)return null;return Ye.a.createElement(Mt["a"],{onClose:this.props.onClose,showCancelButton:false,goButtonText:ln.t("Try Again"),title:ln.t("Can\u2019t access from current network")},ln.t("Unfortunately, you can\u2019t access this Slack account from your current network. To get connected, change networks and try again."))}}]);return t}(ze["Component"]);cn.displayName="AccessLimitedDialog";cn.defaultProps={onClose:s["noop"],featureLimitedAccessUI:true};var un=cn;var dn=a(187);var pn=new jt["b"]("access_limited");var hn=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onCloseComplete=a.onCloseComplete.bind(a);a.onLinkClick=a.onLinkClick.bind(a);a.ref=Ye.a.createRef();return a}gt()(t,[{key:"onCloseComplete",value:function e(){this.props.onClose()}},{key:"onLinkClick",value:function e(){this.ref.current&&this.ref.current.getWrappedInstance()&&this.ref.current.getWrappedInstance().hideToast()}},{key:"render",value:function e(){var t=this;if(!this.props.featureLimitedAccessUI)return null;return Ye.a.createElement(wt["b"],{ref:this.ref,shouldAutoFade:false,showCloseButton:false,onCloseComplete:this.onCloseComplete},Ye.a.createElement("div",null,pn.rt("<strong>Can\u2019t access from current network.</strong> Once you\u2019ve changed networks, you can <a>try again</a>.",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.tag,r=e.text;return"strong"===a?Ye.a.createElement("strong",null,r):Ye.a.createElement(dn["a"],{onClick:t.onLinkClick},r)})))}}]);return t}(ze["Component"]);hn.displayName="AccessLimitedToast";hn.defaultProps={onClose:s["noop"],featureLimitedAccessUI:true};var vn=hn;var mn={};var fn=Object(nn["e"])("Opens a modal to notify user that Slack access has been limited on this network",function(e,t){var a=t();var r=Object(d["getTeamId"])(a);if(mn[r])return;mn[r]=true;e(Object(sn["d"])());e(Object(on["halt"])());var n=function t(){Object(Ce["a"])()&&e(Object(Je["dismissCurrentToast"])());mn[r]=false;e(Object(on["clearFastReconnectUrl"])());e(Object(sn["c"])());e(Object(on["unhalt"])())};Object(Ce["a"])()?e(Object(Je["enqueueToast"])({element:Ye.a.createElement(vn,{onClose:n})})):e(Object(Ze["openModal"])({element:Ye.a.createElement(un,{onClose:n})}))});var bn=fn;var gn=a(35);var _n={},yn=_n.fetchAuthAndReturnToUrl;var On=false;var kn=Object(Qe["b"])("Handle when a user is removed from a team",function(e,t){var a=t();var r=Object(gn["d"])(a);if(On)return;On=true;Object(ae["a"])({getState:t}).warn("You have been removed from the "+Object(zr["getTeamDisplayName"])(r)+" workspace.");if(!Object(b["a"])()){Object(Oe["j"])(r.id);return}e(Object(Ze["openModal"])({element:Ye.a.createElement(an,{team:r})}))});kn.propTypes=Et["b"].string;var En=Object(Qe["b"])("Handle invalid auth by refetching or reloading",function(e,t,a){if(Object(et["isElectronAndAtLeastVersion"])("3.0.0")&&Object(he["isWindowUnloading"])(t()))return;Object(Va["invalidateAuth"])();if(Object(b["a"])()){Object(ae["a"])({getState:t}).info("Fetching auth due to invalid_auth error");yn("/"+Object(Yr["b"])())}else Object(xe["b"])({reason:"Reloading due to error "+a})});En.propTypes=Et["b"].string;function Cn(){Object(xe["b"])({noCache:true,reason:"forceReloadWithReason"})}function jn(e){Object(xe["a"])({reason:"Cold booting due to '"+e+"' error"})}function wn(){rn()}function Sn(e){e(bn())}function In(e,t){var a=e.payload;switch(a){case"user_removed_from_team":return t(kn(a));case"account_inactive":case"team_disabled":case"invalid_auth":return t(En(a));case"force_reload":return Cn();case"clear_cache":case"org_login_required":case"team_added_to_org":return jn(a);case"ratelimited":return wn();case"accesslimited":return Sn(t);default:throw new Error("Tried to call `handleStartError` without a valid start error code.")}}Object(M["b"])({actions:[Za["a"]],sideEffect:In});var Tn=a(5);var An=a.n(Tn);var Nn=a(4198);var Pn=a(45);var Rn=a(21);var Mn=a(2308);var Dn=new jt["b"]("toast_new_locale");var xn={locale:Et["b"].string.isRequired,featureNewLocaleToast:Et["b"].bool,featureLocaleToastTranslation:Et["b"].bool,featureLocaleEnGb:Et["b"].bool,featureLocalePtBr:Et["b"].bool,featureLocaleEsLa:Et["b"].bool,featureLocalizationPhaseTwo:Et["b"].bool,fadeDelay:Et["b"].number,onClose:Et["b"].func,onLinkClick:Et["b"].func,openChangeLanguageDialog:Et["b"].func.isRequired,clogger:Et["b"].object.isRequired};var Fn={featureNewLocaleToast:false,featureLocaleToastTranslation:false,featureLocaleEnGb:false,featureLocalePtBr:false,featureLocaleEsLa:false,featureLocalizationPhaseTwo:false,fadeDelay:0,onClose:s["noop"],onLinkClick:s["noop"]};var Ln=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onLinkClick=a.onLinkClick.bind(a);a.onCloseClick=a.onCloseClick.bind(a);a.ref=Ye.a.createRef();return a}gt()(t,[{key:"componentDidMount",value:function e(){this.trackClog(An()({},Rn["x"].action,Rn["v"].IMPRESSION))}},{key:"onLinkClick",value:function e(){var t,a=this;var r=this.props,n=r.locale,e=r.onLinkClick;e();var i=(t={},An()(t,Rn["x"].action,Rn["v"].CLICK),An()(t,Rn["x"].ui_element,Rn["y"].LINK_LOCALE_TRIGGER),An()(t,Rn["x"].ui_component,Rn["w"].TOAST),t);this.trackClog(i);Promise.resolve(this.props.openChangeLanguageDialog({locale:n,options:{referringEventId:Rn["k"].I18N_NEW_LOCALE_TOAST_SHOWN,referringUiContext:i}})).then(function(){var e=a.ref.current&&a.ref.current.getWrappedInstance&&a.ref.current.getWrappedInstance();e&&e.hideToast()})}},{key:"onCloseClick",value:function e(){var t;this.trackClog((t={},An()(t,Rn["x"].action,Rn["v"].CLOSE),An()(t,Rn["x"].ui_element,Rn["y"].BTN_CLOSE),t))}},{key:"getMessage",value:function e(){var t=this;var a=this.props,r=a.featureLocaleToastTranslation,n=a.locale;var i=Object(rt["f"])();if(!("en-US"===i||"es-ES"===i)&&!r)return null;var s=void 0;var o=void 0;switch(n){case"es-LA":s="\xa1Hola! \ud83d\udc4b";o=Dn.t("You can now use Slack in Latin American Spanish.");break;case"pt-BR":s="Ol\xe1! \ud83d\udc4b";o=Dn.t("You can now use Slack in Brazilian Portuguese.");break;case"en-GB":s="Hello! \ud83d\udc4b";o="You can now use Slack in UK English.";break;default:return null}var l=Dn.rt("<Link>Give it a try</Link>, or change your language anytime in Preferences.",null,function(e){var a=e.text;return Ye.a.createElement(St["a"],{onClick:t.onLinkClick},Ye.a.createElement("strong",null,a))});return Ye.a.createElement(ze["Fragment"],null,s," ",o," ",l)}},{key:"trackClog",value:function e(t){var a=this.props,r=a.clogger,n=a.locale;r.track(Rn["k"].I18N_NEW_LOCALE_TOAST_SHOWN,{contexts:{locale:n,ui_context:i()({},t,An()({},Rn["x"].ui_component,Rn["w"].TOAST))}})}},{key:"render",value:function e(){var t=this.props,a=t.featureNewLocaleToast,r=t.featureLocaleEnGb,n=t.featureLocalePtBr,i=t.featureLocaleEsLa,s=t.featureLocalizationPhaseTwo,o=t.fadeDelay,l=t.locale,c=t.onClose;if(!a)return null;var u=!!Object(rt["e"])({featureLocaleEnGb:r,featureLocalePtBr:n,featureLocaleEsLa:i,featureLocalizationPhaseTwo:s})[l];if(!u)return null;var d=this.getMessage();if(!d)return null;var p=cdn_url+"/b1e00/img/i18n/new-locale-toast.png";var h=p.replace(".png","@2x.png");return Ye.a.createElement(wt["b"],{toastClasses:"c-new_locale_toast",closeButtonClasses:"c-new_locale_toast__close_button",showCloseButton:true,shouldAutoFade:!!o,fadeDelay:o,ref:this.ref,onCloseClick:this.onCloseClick,onClose:c},Ye.a.createElement("div",null,Ye.a.createElement("img",{className:"c-new_locale_toast__image",src:p,srcSet:h+" 2x",alt:""}),Ye.a.createElement("div",{className:"c-new_locale_toast__content"},d)))}}]);return t}(ze["PureComponent"]);Ln.displayName="NewLocaleToast";Ln.defaultProps=Fn;var Bn=function e(t){return{featureNewLocaleToast:Object(j["isFeatureEnabled"])(t,"feature_new_locale_toast"),featureLocaleToastTranslation:Object(j["isFeatureEnabled"])(t,"feature_locale_toast_translation"),featureLocaleEnGb:Object(j["isFeatureEnabled"])(t,"feature_locale_en_GB"),featureLocalePtBr:Object(j["isFeatureEnabled"])(t,"feature_locale_pt_BR"),featureLocaleEsLa:Object(j["isFeatureEnabled"])(t,"feature_locale_es_LA"),featureLocalizationPhaseTwo:Object(j["isFeatureEnabled"])(t,"feature_localization_phase_two"),clogger:Object(Pn["a"])({state:t})}};var Un={openChangeLanguageDialog:function e(){return Nn["a"].apply(void 0,arguments)}};var qn=Object(Ct["connect"])(Bn,Un)(Ln);qn.propTypes={onCloseComplete:Et["b"].func};var Gn=function e(t){return Ye.a.createElement(qn,t)};Gn.displayName="newLocaleToastFactory";var Wn=qn;var Hn=a(25);var Vn=a(29);var Kn=Object(Hn["a"])("Fetches a new locale to suggest based on user signals",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;return e(Object(Vn["a"])({method:"i18n.locale.suggestNew",args:{},reason:r}))});Kn.propTypes={reason:Et["b"].string};var zn=a(122);var Yn="seen_p2_locale_change_message";var Qn=3e5;var Jn=function e(t){return{"pt-BR":"i18n_toast_pt_br","en-GB":"i18n_toast_en_gb","es-LA":"i18n_toast_es_la"}[t]};var Zn=Object(Qe["b"])("Update pref value to when new locale toast has been seen",function(e,t,a){return e(Object(J["c"])({pref:Yn,value:a}))});Zn.propTypes={value:Et["b"].number};var Xn=Object(Qe["b"])("Maybe show the new locale toast",function(e,t){var a=t();if(!Object(j["isFeatureEnabled"])(a,"feature_new_locale_toast"))return Promise.resolve();var r=Object(G["f"])(a,Yn);var n=!!r;var i=Date.now()-r;if(n&&i>Qn)return Promise.resolve();return e(Kn()).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.locale;var i=function t(){return e(Zn(Date.now()-Qn))};if(!r||r===Object(rt["f"])())return i();var s=Jn(r);if(s&&"treatment"!==Object(zn["getGroupForUser"])(a,s))return Promise.resolve();var o=Gn({locale:r,onLinkClick:i,onClose:i,fadeDelay:Qn});n||e(Zn(Date.now()));return e(Object(Je["enqueueToast"])({element:o}))})});var $n=Xn;var ei=function e(t,a,r){var n=r();if(!Object(_["isFirstConnection"])(n)||!(Object(j["isClientApp"])(n)||Object(j["isWebApp"])(n)))return;a($n())};Object(M["b"])({actions:[_["connected"]],sideEffect:ei});var ti=a(221);function ai(e,t,a){var r=a();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;var a=Object(T["d"])(r,t);Object(ti["a"])(a)})}function ri(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var r=arguments[2];var n=r();var i=Object(T["d"])(n,t.id);Object(ti["e"])(i)}function ni(e,t,a){var r=a();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(P["isPrivateChannel"])(e))Object(ti["f"])(i()({},e,{is_member:false}));else{var t=Object(T["d"])(r,e.id);Object(ti["f"])(t)}})}function ii(e){var t=e&&e.payload&&e.payload.channels;if(!t||!t.length)return;t.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ti["j"])(e)})}function si(e,t,a){var r=a();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(T["d"])(r,e.id);Object(ti["m"])(t)})}function oi(e,t,a){var r=a();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(T["d"])(r,e.id);if(Object(P["isExternallySharedChannel"])(t)&&!Object(P["isPendingExternallySharedChannel"])(t)){Object(ti["k"])(t);var a=Object(S["a"])(r);a===t.id&&Object(ti["c"])(t)}else Object(P["isPendingExternallySharedChannel"])(t)?Object(ti["l"])(t):Object(P["isExternallySharedChannel"])(t)||Object(P["isPendingExternallySharedChannel"])(t)?Object(P["isPrivateChannel"])(t)&&Object(ti["j"])(t):Object(ti["p"])(t)})}function li(e,t,a){var r=a();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(T["d"])(r,e.id);Object(ti["i"])(t,e.purpose.creator,e.purpose.value)})}function ci(e,t,a){var r=a();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(T["d"])(r,e.id);Object(ti["n"])(t,e.topic.userId,e.topic.value)})}function ui(e,t,a){var r=a();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=Object(T["d"])(r,e.id);Object(ti["o"])(t)})}Object(M["a"])([{actions:[g["a"]],sideEffect:ai,reasons:[I["a"].ARCHIVE_CHANNEL]},{actions:[g["b"]],sideEffect:ri},{actions:[g["a"]],sideEffect:ni,reasons:[I["a"].LEAVE_CHANNEL]},{actions:[g["a"]],sideEffect:ii,reasons:[I["a"].RENAME_CHANNEL]},{actions:[g["a"]],sideEffect:si,reasons:[I["a"].ORG_ACCESS]},{actions:[g["a"]],sideEffect:oi,reasons:[I["a"].CHANNEL_UPDATED]},{actions:[g["a"]],sideEffect:li,reasons:[I["a"].SET_PURPOSE]},{actions:[g["a"]],sideEffect:ci,reasons:[I["a"].SET_TOPIC]},{actions:[g["a"]],sideEffect:ui,reasons:[I["a"].UNARCHIVE_CHANNEL]}]);var di=Object(X["b"])("TS.redux.socket.connectedSig.dispatch");var pi=Object(X["b"])("TS.redux.socket.disconnectedSig.dispatch");var hi=Object(X["b"])("TS.redux.socket.provisionallyConnectedSig.dispatch");var vi=Object(X["b"])("TS.redux.socket.socketErrorMessageReceivedSig.dispatch");var mi=Object(X["b"])("TS.redux.socket.socketMessageReceivedSig.dispatch");var fi=Object(X["b"])("TS.redux.socket.troubleConnectingSig.dispatch");var bi=Object(X["b"])("TS.redux.socket.waitingForRateLimitSig.dispatch");function gi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;di(t)}function _i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;hi(t)}function yi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;vi(t)}function Oi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;mi(t)}function ki(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;bi(t)}function Ei(){pi.apply(void 0,arguments)}function Ci(){fi.apply(void 0,arguments)}Object(M["a"])([{actions:[_["connected"]],sideEffect:gi},{actions:[_["disconnected"]],sideEffect:Ei},{actions:[_["provisionallyConnected"]],sideEffect:_i},{actions:[_["socketErrorMessageReceived"]],sideEffect:yi},{actions:[_["socketMessageReceived"]],sideEffect:Oi},{actions:[_["troubleConnecting"]],sideEffect:Ci},{actions:[_["waitingForRateLimit"]],sideEffect:ki}]);var ji=a(308);var wi=a(1362);var Si=function(){var e=Object(sr["coroutine"])(regeneratorRuntime.mark(function e(t,a,r){var n,i,o,l,c;return regeneratorRuntime.wrap(function e(u){while(1)switch(u.prev=u.next){case 0:n=r();i=t.payload,o=i.channelId,l=i.append;if(!(!l||!o||!Object(j["isFeatureEnabled"])(n,"feature_load_test")||!Object(P["isOrgDefaultChannel"])(Object(T["d"])(n,o,false)))){u.next=4;break}return u.abrupt("return");case 4:u.next=6;return Object(sr["resolve"])(Promise.delay(Object(s["random"])(0,3e4)));case 6:if(!(Object(G["f"])(n,"mark_msgs_read_immediately")||Object(G["f"])(n,"start_scroll_at_oldest"))){u.next=9;break}u.next=9;return Object(sr["resolve"])(a(Object(J["b"])({mark_msgs_read_immediately:false,start_scroll_at_oldest:false})));case 9:if(!(Object(S["a"])(n)!==o)){u.next=12;break}u.next=12;return Object(sr["resolve"])(a(Object(ji["a"])({id:o})));case 12:if(Object(j["isFeatureEnabled"])(n,"feature_load_test_emoji")){u.next=14;break}return u.abrupt("return");case 14:c="+"+Ti[Object(s["random"])(0,Ti.length-1)];a(Object(wi["a"])({messageText:c,channelId:o}));case 16:case"end":return u.stop()}},e,this)}));return function t(a,r,n){return e.apply(this,arguments)}}();var Ii=function(){var e=Object(sr["method"])(function(e,t,a){var r=a();var n=Object(vt["c"])({getState:a});Object(j["isFeatureEnabled"])(r,"feature_load_test")&&Object(_["isFirstConnection"])(r)&&setInterval(function(){return n.count("reporting_in_for_load_test")},6e4)});return function t(a,r,n){return e.apply(this,arguments)}}();var Ti=[":blond-haired-man:",":blush:",":boy:",":breast-feeding:",":busts_in_silhouette:",":child:",":clown_face:",":cry:",":dancer:",":dizzy:",":eye:",":eyeglasses:",":female-farmer:",":female-office-worker:",":female_genie:",":female_mage:",":high_heel:",":joy:",":left-facing_fist:",":lying_face:",":male-detective:",":male-office-worker:",":male-police-officer:",":man-facepalming:",":man-surfing:",":man-woman-girl-boy:",":man_in_business_suit_levitating:",":man_in_lotus_position:",":man_with_gua_pi_mao:",":mans_shoe:",":merman:",":nerd_face:",":open_hands:",":person_doing_cartwheel:",":point_right:",":pouting_cat:",":right-facing_fist:",":ring:",":skull_and_crossbones:",":speaking_head_in_silhouette:",":two_men_holding_hands:",":two_women_holding_hands:",":wave:",":weary:",":woman-boy-boy:",":woman-frowning:",":woman-juggling:",":woman-playing-handball:",":womans_hat:",":zzz:"];Object(M["b"])({actions:[pe["addTimestamps"]],sideEffect:Object(s["debounce"])(Si,1e3)});Object(M["b"])({actions:[_["connected"]],sideEffect:Ii});var Ai=a(241);var Ni=Object(X["b"])("TS.membership.membership_counts_need_refetch_sig.dispatch");var Pi=a(17);function Ri(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var r=arguments[2];if(!t.prevChannelId||t.channelId===t.prevChannelId)return;var n=r();var i=false;var s=Object(T["d"])(n,t.prevChannelId,i);!Object(P["isMemberOfChannel"])(s)&&Object(P["isPublicChannel"])(s)&&a(Object(Ai["clearMemberCounts"])(t.prevChannelId))}function Mi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var r=arguments[2];if(t)return;var n=r();var s=Object(S["a"])(n);var o=Object(Ai["getCachedMemberCounts"])(n,s);a(Object(Ai["clearAllMemberCounts"])());s&&o&&a(Object(Ai["addOrReplaceMemberCounts"])({channelId:s,countInfo:i()({},o,{should_refetch:true})}));Ni()}function Di(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var r=arguments[2];var n=r();a(Object(Ai["updateAndInvalidateMemberCounts"])({channelId:t.id,memberCountDelta:1,restrictedMemberCountDelta:Object(Pi["isRestricted"])(Object(N["b"])(n))?1:0,appCountDelta:0}))}function xi(e,t){var a=e&&e.payload&&e.payload.channels;if(!a||!a.length)return;a.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(Object(Ai["clearMemberCounts"])(e.id))})}Object(M["a"])([{actions:[w["e"]],sideEffect:Ri},{actions:[_["connected"],tr["b"]],sideEffect:Mi},{actions:[g["b"]],sideEffect:Di},{actions:[g["a"]],sideEffect:xi,reasons:[I["a"].LEAVE_CHANNEL]}]);function Fi(e,t,a){var r=a();var n=void 0;if(e.type===g["a"].getType()){n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return}else e.type===g["b"].getType()&&(n=[e&&e.payload]);n.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Object(P["isExternallySharedChannel"])(e))return;var a=Object(P["getPendingAndConnectedTeamIds"])(r,e,{includeSelfTeamId:true});var n=Object(zr["omitCurrentTeamId"])(r,a);var i=n.reduce(function(e,t){return e.concat(o.a.filter(Object(N["a"])(r),{team_id:t}))},[]);i.length&&t(Object(A["a"])(i))})}Object(M["a"])([{actions:[g["b"]],sideEffect:Fi},{actions:[g["a"]],sideEffect:Fi,reasons:[I["a"].LEAVE_CHANNEL]}]);var Li=a(251);function Bi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var r=arguments[2];if(!t.prevChannelId||t.channelId===t.prevChannelId)return;var n=r();var i=false;var s=Object(T["d"])(n,t.prevChannelId,i);!Object(P["isMemberOfChannel"])(s)&&Object(P["isPublicChannel"])(s)&&a(Object(Li["clearChannelMembershipInfo"])(t.prevChannelId))}function Ui(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];t||a(Object(Li["clearAllMembershipInfo"])())}function qi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var r=arguments[2];a(Object(Li["clearChannelMembershipInfo"])(t.id));var n=Object(j["isFeatureEnabled"])(r(),"feature_dont_set_channel_membership_twice");n||a(Object(Li["setChannelMembershipInfoForUsers"])({channelId:t.id,membershipInfo:An()({},Object(j["getCurrentUserId"])(r()),true)}))}function Gi(e,t){var a=e&&e.payload&&e.payload.channels;if(!a||!a.length)return;a.forEach(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(Object(Li["clearChannelMembershipInfo"])(e.id))})}Object(M["a"])([{actions:[w["e"]],sideEffect:Bi},{actions:[_["connected"],tr["b"]],sideEffect:Ui},{actions:[g["b"]],sideEffect:qi},{actions:[g["a"]],sideEffect:Gi,reasons:[I["a"].LEAVE_CHANNEL]}]);var Wi=a(194);var Hi=a(123);var Vi=a(109);var Ki=a(1101);function zi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var r=arguments[2];if(t)return;Object(ae["a"])({getState:r}).info("MESSAGE-HISTORY","Resetting reachedEnd");a(Object(pe["resetReachedEnd"])())}function Yi(e,t,a){var r=a();var n=e.payload,i=n.channelId,s=n.append;var o=Object(S["a"])(r);var l=Object(j["isFeatureEnabled"])(r,"feature_react_threads")&&Object(Vi["getCurrentThreadKey"])(r);if(!s)return;i!==o&&i!==l&&t(Object(pe["truncateChannelHistory"])({channelId:i}))}function Qi(e,t,a){var r=a();var n=e.payload.prevChannelId;if(!n)return;var i=Object(S["a"])(r);if(i===n)return;var s=Object(T["d"])(r,n);if(!s)return;var o=Object(T["d"])(r,i);if(o&&Object(P["isPublicChannel"])(o)&&!Object(P["isMemberOfChannel"])(o)){var l=[i];t(Object(te["f"])({ids:l})).then(function(){return Object(Ki["b"])()})}else if(o&&Object(P["isPublicChannel"])(o)&&!Object(P["isMemberOfChannel"])(o)){var c="message-history/onChannelChange";t(Object(te["i"])({channelId:i,noMembers:true,reason:c})).then(function(e){if(!e||!e.channel)return;t(Object(Wi["a"])({channel:e.channel}));Object(Ki["b"])()})}Object(P["isArchived"])(s)||Object(P["isPublicChannel"])(s)&&!Object(P["isMemberOfChannel"])(s)?t(Object(pe["removeAllTimestamps"])({channelId:n})):t(Object(pe["truncateChannelHistory"])({channelId:n}))}function Ji(e,t,a){var r=a();var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;n.forEach(function(e){if(!e)return;t(Object(pe["removeAllTimestamps"])({channelId:e.id,includeThreads:Object(j["isFeatureEnabled"])(r,"feature_react_threads")}))})}function Zi(e,t,a){var r=void 0;e.type===g["d"].getType()?r=e&&e.payload&&e.payload.ids:e.type===g["b"].getType()&&(r=[e&&e.payload&&e.payload.id]);if(!r||!r.length)return;var n=a();r.forEach(function(e){if(!e)return;t(Object(pe["removeAllTimestamps"])({channelId:e,includeThreads:Object(j["isFeatureEnabled"])(n,"feature_react_threads")}));t(Object(Hi["e"])({channelId:e}))})}Object(M["b"])({actions:[pe["addTimestamps"]],sideEffect:Yi});Object(M["b"])({actions:[w["e"]],sideEffect:Qi});Object(M["b"])({actions:[g["a"]],sideEffect:Ji,reasons:[I["a"].ARCHIVE_CHANNEL,I["a"].LEAVE_CHANNEL]});Object(M["b"])({actions:[g["d"],g["b"]],sideEffect:Zi});Object(M["b"])({actions:[_["connected"],tr["b"]],sideEffect:zi});var Xi=a(358);var $i=a(208);function es(e,t,a){var r=e.payload,n=r.viewContext,i=r.channelId,s=r.ts;var o=Object(fe["a"])(a(),i,s);var l=o?o.thread_ts:null;if((Object(j["isFeatureEnabled"])(a(),"feature_react_threads")||Object(j["isFeatureEnabled"])(a(),"feature_react_all_threads"))&&l&&(n===ye["MESSAGE_CONTAINERS"].THREADS_FLEXPANE||n===ye["MESSAGE_CONTAINERS"].THREADS_VIEW)){var c=Object($i["a"])({viewContext:n,channelId:i,threadTs:l});c&&c.focus();return}if(Object(j["isFeatureEnabled"])(a(),"feature_sonic_inputs")){var u=Object($i["a"])({viewContext:ye["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:i});u&&u.focus();return}Object(Ve["a"])()}Object(M["b"])({actions:[Xi["stopEditingMessage"]],sideEffect:es});var ts={restoreFocusToMessageInput:es};var as=a(1054);function rs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var r=arguments[2];var n=t&&t.ids||[];var i=Object(S["a"])(r());if(n.indexOf(i)<0)return;var s=Object(as["a"])(r());a(Object(ji["a"])({id:s}))}Object(M["a"])([{actions:[g["d"]],sideEffect:rs}]);var ns=Object(Hn["a"])("Check to see whether we need to reload",function(e,t,a){var r=t();if(et["isJsPath"])return Promise.resolve(new Error("Cannot check whether to reload when using js_path"));var n=Object(j["getFromBootData"])(r,"version_ts");var i=a.reason||"unknown";return e(Object(Vn["a"])({method:"rtm.shouldReload",args:{version_ts:n,reason:i}}))});ns.propTypes={reason:Et["b"].string};var is=a(228);var ss=void 0;function os(){"undefined"===typeof ss&&(ss=Object(is["a"])(100));return ss}var ls={};var cs={};var us=false;var ds=27e5;var ps=2e4;var hs="MIN-VERSION";var vs=Object(Qe["b"])("Calls rtm.shouldReload and possibly reloads",function(e,t){if(us)return;var a=t();var r=Object(vt["c"])({getState:t});var n=Object(De["c"])(a);cs[n]=Date.now();Object(ae["a"])({getState:t}).info(hs,"checking to see if we should reload");os()&&r.count("mvp_m_check");e(ns({reason:"polling"})).then(function(e){if(!e||!e.should_reload){Object(ae["a"])({getState:t}).info(hs,"no need to reload");return}if(us)return;us=true;if(!document.hasFocus()){os()&&r.count("mvp_m_shouldreload_immediate");var a="rtm.shouldReload told us to reload, and the window is not currently focused";Object(ae["a"])({getState:t}).info(hs,a);Object(xe["b"])({reason:a});return}os()&&r.count("mvp_m_shouldreload_will_defer");Object(ae["a"])({getState:t}).info(hs,"rtm.shouldReload told us to reload; will reload next time the window loses focus");var n=false;var i=void 0;var s=false;window.addEventListener("blur",function(){if(n)return;i&&clearTimeout(i);i=setTimeout(function(){if(document.hasFocus())return;n=true;os()&&r.count("mvp_m_shouldreload_did_defer");var e="rtm.shouldReload told us to reload earlier, and the window lost focus";Object(ae["a"])({getState:t}).info(hs,e);Object(xe["b"])({reason:e})},ps)},s)}).catch(function(){Object(ae["a"])({getState:t}).warn(hs,"rtm.shouldReload check failed; ignoring since we will try again later")})});function ms(e,t,a){var r=a();var n=Object(De["c"])(r);if(!ls[n]){var i=Object(ur["a"])(ds,.8,1.2);ls[n]=setInterval(function(){t(vs())},i);Object(u["exportToTeamDebugger"])(n,"minVersionPoll",{checkNow:function e(){return t(vs())},getLastPollTime:function e(){return cs[n]},getShouldReloadOnBlur:function e(){return us},timer:ls[n]})}}Object(M["b"])({actions:[on["start"]],sideEffect:ms});var fs=a(1164);function bs(e,t,a){if(!Object(b["a"])())return;var r=e&&e.payload;if(!r)return;var n=void 0;r.pref&&"locale"===r.pref?n=r.value:r.locale&&(n=r.locale);if(!n)return;var i=a();var s=Object(gn["d"])(i).id;var o=Object(fs["a"])({teamId:s});if(o===n)return;Object(fs["b"])(n,s)}Object(M["b"])({actions:[W["b"],W["c"],W["a"]],sideEffect:bs});var gs={maybeSetLocaleSideEffect:bs};var _s=a(410);var ys=a(868);function Os(e,t,a){var r=a();if(!Object(ee["b"])(r))return;var n=e.payload&&e.payload.history;if(!n)return;window.desktop&&window.desktop.deviceStorage&&window.desktop.deviceStorage.setItem("navigation-history",JSON.stringify(n))}function ks(e,t,a){var r=a();if(!Object(ee["b"])(r))return;if(!Object(b["a"])()&&e.type===me["d"].getType())return;var n=Object(S["a"])(r);var i=Object(gn["d"])(r);var o=e.type===me["d"].getType()?i.id===e.payload[0]:i.id===e.payload;Object(ae["a"])({getState:a}).info("WORKSPACE-FOCUS","workspace focus state changed to "+o);if(!i||!o){t(Object(_s["setLoaded"])(false));return}t(Object(ys["f"])()).then(function(){var e=Object(T["d"])(r,n);t(Object(ys["e"])({viewId:n,viewName:Object(P["getDisplayNameForChannel"])(r,e,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}),teamId:i.id,teamName:Object(zr["getTeamDisplayName"])(i),teamIcon:Object(s["get"])(i,"icon.image_44")}))})}Object(M["b"])({actions:[_s["updateNavigationHistory"]],sideEffect:Os});Object(M["b"])({actions:[Ha["setActiveTeam"]],sideEffect:ks});Object(M["b"])({actions:[me["d"]],sideEffect:ks});var Es=a(529);var Cs=a(138);var js=new jt["b"]("offline_mode");function ws(e){var t=e.clientLastOnline,a=e.channelHasHistory,r=e.onCloseComplete,n=e.featureOfflineMode;if(!n)return null;var i=a?js.rt("Last updated {clientLastOnline}.",{clientLastOnline:Object(jt["o"])(Object(Es["a"])(t))}):js.rt("Go online to get the latest messages.");return Ye.a.createElement(wt["b"],{ariaAssertive:true,position:"top-right",icon:"cloud-offline-small",onCloseComplete:r},Ye.a.createElement("span",null,Ye.a.createElement("strong",null,js.rt("No connection."))," ",i))}ws.displayName="OfflineChannelToast";var Ss=Object(Cs["a"])("feature_offline_mode")(ws);var Is=Object(Qe["b"])("shows a toast indicating when the client was last connected",function(e,t,a){var r=a.channelId;var n=t();var i=Object(We["f"])(n)/1e3;var s=Object(pe["channelHasAnyHistory"])(n,r);var o=Ye.a.createElement(Ss,{clientLastOnline:i,channelHasHistory:s});e(Object(Je["enqueueToast"])({element:o}))});Is.propTypes={channelId:Et["b"].string.isRequired};var Ts=Ss;function As(e,t,a){var r=a();if(!Object(j["isFeatureEnabled"])(r,"feature_offline_mode"))return;if(!Object(Ce["a"])())return;if(Object(We["c"])(r))return;var n=Object(S["a"])(r);if(!Object(Q["a"])(n))return;t(Is({channelId:n}))}Object(M["b"])({actions:[w["e"]],sideEffect:As});var Ns=a(568);var Ps=a(37);var Rs=a.n(Ps);var Ms=a(16);var Ds=a.n(Ms);var xs=a(356);var Fs=a.n(xs);var Ls=a(693);var Bs=Object(ze["createContext"])({closeButtonIsVisible:true,closeModal:s["noop"],fullscreen:false});var Us=Bs;var qs=function e(){return Object(ze["useContext"])(Bs)};var Gs=a(4279);var Ws=new jt["b"]("generic_dialog");var Hs=function e(t,a){return Ds()("c-sk-overlay",{"c-sk-overlay--align-start":!t},a)};var Vs=function e(t,a){return Ds()("c-sk-modal",{"c-sk-modal--fullscreen":t,"c-sk-modal--fixed":!t},a)};var Ks=function e(t,a){return{content:{maxWidth:"number"===typeof t?t+"px":t},overlay:{padding:"number"===typeof a?a+"px":a}}};var zs={centered:Et["b"].bool,children:Et["b"].node.isRequired,className:Et["b"].string,closeModal:Et["b"].func,contentLabel:Et["b"].string,describedby:Et["b"].string,fullscreen:Et["b"].bool,invertCloseButton:Et["b"].bool,isOpen:Et["b"].bool,labelledby:Et["b"].string,maxWidth:Et["b"].oneOfType([Et["b"].string,Et["b"].number]),overlayClassName:Et["b"].string,padding:Et["b"].oneOfType([Et["b"].string,Et["b"].number]),role:Et["b"].oneOf(["alertdialog","dialog"]),shouldCloseOnOverlayClick:Et["b"].bool,shouldFadeOut:Et["b"].bool,showCloseButton:Et["b"].bool};var Ys={centered:true,className:null,closeModal:s["noop"],contentLabel:null,describedby:null,fullscreen:false,invertCloseButton:false,isOpen:true,labelledby:null,maxWidth:null,overlayClassName:null,padding:28,role:"dialog",shouldCloseOnOverlayClick:true,shouldFadeOut:false,showCloseButton:true};var Qs=function e(t){var a=t.centered,r=t.children,n=t.className,i=t.closeModal,s=t.contentLabel,o=t.describedby,l=t.fullscreen,c=t.invertCloseButton,u=t.isOpen,d=t.labelledby,p=t.maxWidth,h=t.overlayClassName,v=t.padding,m=t.role,f=t.shouldCloseOnOverlayClick,b=t.shouldFadeOut,g=t.showCloseButton;return Ye.a.createElement(Fs.a,{className:Vs(l,n),contentLabel:s,isOpen:u,overlayClassName:Hs(a,h),closeTimeoutMS:b?160:0,shouldCloseOnOverlayClick:f,onRequestClose:i,style:Ks(p,v),role:m,aria:{labelledby:d,describedby:o}},g&&Ye.a.createElement(Ls["a"],{"aria-label":Ws.t("Close"),backgroundStyle:c?"dark":"light",icon:"times",onClick:i,className:Ds()("c-sk-modal__close_button",{"c-sk-modal__close_button--inverted":c})}),Ye.a.createElement(Us.Provider,{value:{closeButtonIsVisible:g,closeModal:i,fullscreen:l}},r))};Qs.displayName="BaseModal";Qs.defaultProps=Ys;var Js=Qs;var Zs=function e(t){return{closeModal:function e(){return t(Object(Ze["closeModal"])())}}};var Xs=Object(Ct["connect"])(void 0,Zs)(Js);var $s=Xs;var eo=a(4281);var to={children:Et["b"].node,className:Et["b"].string};var ao={children:null,className:null};var ro=function e(t){var a=t.children,r=t.className,n=Rs()(t,["children","className"]);return Ye.a.createElement("div",i()({},n,{className:Ds()("c-sk-modal_header",r)}),a)};ro.displayName="ModalHeader";ro.defaultProps=ao;var no=ro;var io=a(4272);var so=a(782);var oo=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var r=Object(ze["useState"])(0),n=K()(r,2),i=n[0],o=n[1];var l=Object(ze["useCallback"])(function(e){o(e)},[]);var c=Object(ze["useMemo"])(function(){var e=Object(s["throttle"])(l,160);return function(t){e(t.target.scrollTop)}},[l]);var u=a>t&&i>0;var d=a>t&&i<a-t;return{onScroll:c,indicateTop:u,indicateBottom:d}};var lo=oo;var co=a(4283);var uo={children:Et["b"].node,className:Et["b"].string,showScrollIndicatorTop:Et["b"].bool,showScrollIndicatorBottom:Et["b"].bool};var po={children:null,className:null,showScrollIndicatorTop:true,showScrollIndicatorBottom:true};var ho=function e(t){var a=t.children,r=t.className,n=t.showScrollIndicatorTop,s=t.showScrollIndicatorBottom,o=Rs()(t,["children","className","showScrollIndicatorTop","showScrollIndicatorBottom"]);var l=Object(ze["useState"])(null),c=K()(l,2),u=c[0],d=c[1];var p=Object(ze["useState"])({containerHeight:null,containerWidth:null}),h=K()(p,2),v=h[0],m=v.containerHeight,f=v.containerWidth,b=h[1];var g=Object(ze["useCallback"])(function(e){var t=e.client,a=t.height,r=t.width;b({containerHeight:a,containerWidth:r})},[]);var _=lo(m,u),y=_.onScroll,O=_.indicateTop,k=_.indicateBottom;return Ye.a.createElement(io["a"],{client:true,onResize:g},function(e){var t=e.measureRef;return Ye.a.createElement("div",i()({},o,{key:"c-sk-modal__content",className:Ds()("c-sk-modal_content",{"c-sk-modal_content--indicateTop":O&&n,"c-sk-modal_content--indicateBottom":k&&s},r),ref:t}),Ye.a.createElement(so["b"],{width:f||0,height:m||0,contentHeight:u,onScroll:y,inheritSize:true},Ye.a.createElement(io["a"],{offset:true,onResize:function e(t){var a=t.offset.height;return d(a)}},function(e){var t=e.measureRef;return Ye.a.createElement("div",{className:"c-sk-modal__content__inner",ref:t},a)})))})};ho.displayName="ModalContent";ho.defaultProps=po;var vo=ho;var mo=a(4285);var fo={children:Et["b"].node,className:Et["b"].string,icon:Et["b"].node,subtitle:Et["b"].node,title:Et["b"].node};var bo={children:null,className:null,icon:null,subtitle:null,title:null};var go=function e(t){var a=t.children,r=t.className,n=t.icon,s=t.subtitle,o=t.title,l=Rs()(t,["children","className","icon","subtitle","title"]);var c=qs(),u=c.closeButtonIsVisible;return Ye.a.createElement("div",i()({},l,{className:Ds()("c-sk-modal_title_bar",{"c-sk-modal_title_bar--pad_right":u},r)}),n&&Ye.a.createElement("div",{className:"c-sk-modal_title_bar__icon"},n),Ye.a.createElement("div",{className:"c-sk-modal_title_bar__text"},o&&Ye.a.createElement("h2",null,o),s&&Ye.a.createElement("h3",null,s)),a)};go.displayName="ModalTitleBar";go.defaultProps=bo;var _o=go;var yo=a(4287);var Oo={children:Et["b"].node,className:Et["b"].string};var ko={children:null,className:null};var Eo=function e(t){var a=t.children,r=t.className,n=Rs()(t,["children","className"]);return Ye.a.createElement("div",i()({},n,{className:Ds()("c-sk-modal_footer",r)}),a)};Eo.displayName="ModalFooter";Eo.defaultProps=ko;var Co=Eo;var jo=a(4289);var wo={children:Et["b"].node,className:Et["b"].string};var So={children:null,className:null};var Io=function e(t){var a=t.children,r=t.className,n=Rs()(t,["children","className"]);return Ye.a.createElement("div",i()({},n,{className:Ds()("c-sk-modal_footer_actions",r)}),a)};Io.displayName="ModalFooterActions";Io.defaultProps=So;var To=Io;var Ao=a(4291);var No={alt:Et["b"].string.isRequired,className:Et["b"].string,height:Et["b"].number,src:Et["b"].string.isRequired,src2x:Et["b"].string,width:Et["b"].number};var Po={className:null,height:null,src2x:"",width:null};var Ro=function e(t){var a=t.alt,r=t.className,n=t.src,s=t.src2x,o=t.height,l=t.width,c=Rs()(t,["alt","className","src","src2x","height","width"]);var u=s?n+" 1x, "+s+" 2x":void 0;var d=Ye.a.createElement("img",i()({},c,{className:Ds()("c-sk-modal_image",r),src:n,srcSet:u,alt:a,height:o,width:l}));if(l&&o){var p=o/l;var h=100*p;return Ye.a.createElement("div",{style:{paddingTop:h+"%"},className:"c-sk-modal_image__container"},d)}return d};Ro.defaultProps=Po;var Mo=Ro;var Do=a(4293);var xo={children:Et["b"].node,className:Et["b"].string};var Fo={children:null,className:null};var Lo=function e(t){var a=t.children,r=t.className,n=Rs()(t,["children","className"]);return Ye.a.createElement("div",i()({},n,{className:Ds()("c-sk-modal_content_section",r)}),a)};Lo.displayName="ModalContentSection";Lo.defaultProps=Fo;var Bo=Lo;var Uo=a(832);var qo={children:Et["b"].node,onClick:Et["b"].func};var Go={children:void 0,onClick:function e(t){return t()}};function Wo(e){var t=e.children,a=e.onClick,r=Rs()(e,["children","onClick"]);return Ye.a.createElement(Us.Consumer,null,function(e){var n=e.closeModal;return Ye.a.createElement(Uo["a"],i()({},r,{onClick:function e(){return a(n)}}),t)})}Wo.displayName="ModalCloseButton";Wo.defaultProps=Go;var Ho=Wo;var Vo=a(3972);var Ko=a(4295);var zo={defaultPane:Et["b"].string.isRequired,panes:Et["b"].objectOf(Et["b"].shape({modalProps:Et["b"].object,render:Et["b"].func.isRequired})).isRequired};function Yo(e){var t=e.defaultPane,a=e.panes,r=Rs()(e,["defaultPane","panes"]);var n=Object(Vo["a"])();var s=Object(ze["useState"])({pane:t}),o=K()(s,2),l=o[0],c=o[1];var u=Object(ze["useCallback"])(function(e,t){return c({pane:e,props:t})},[]);var d=a[l.pane],p=d.render,h=d.modalProps,v=void 0===h?{}:h;p||n.error("MULTI_PANE_MODAL",'Unknown pane "'+l.pane+'"');return Ye.a.createElement(Js,i()({},r,v,{className:Ds()(r.className,v.className,"c-multi_pane_modal")}),Ye.a.createElement(Ye.a.Fragment,{key:l.pane},p(i()({switchPane:u},l.props))))}Yo.displayName="MultiPaneModal";var Qo=Yo;var Jo={onClick:Et["b"].func.isRequired};function Zo(e){var t=e.onClick;return Ye.a.createElement(Ls["a"],{className:"c-multi_pane_modal__back",icon:"chevron-large-left",onClick:t})}Zo.displayName="ModalBackButton";var Xo=Ye.a.memo(Zo);var $o=Qo;var el=a(1285);var tl=a(1546);var al=a(54);var rl=a(532);var nl=a(4273);var il=new jt["b"]("edit_profile");function sl(e){var t=e.team;var a=Object(fs["a"])();var r=Object(nl["a"])(a);return[{label:Ye.a.createElement(Ye.a.Fragment,null,Ye.a.createElement("strong",null,il.t("Full name"))," ","(",il.t("required"),")"),name:"real_name",placeholder:il.t("Full name"),isRequired:true,type:"text"},{hint:il.t("This could be your first name, or a nickname \u2014 however you\u2019d like people to refer to you in Slack."),label:il.t("Display name"),name:"display_name",type:"text"},{hint:il.t("Let people know what you do at {teamName}.",{teamName:Object(zr["getTeamDisplayName"])(t)}),label:il.t("What I do"),name:"title",type:"text"},{hint:il.t("Enter a phone number."),label:il.t("Phone number"),name:"phone",placeholder:il.t("(123) 555-5555"),type:"text"},{hint:il.t("Your current time zone. Used to send summary and notification emails, for times in your activity feeds, and for reminders."),label:il.t("Time zone"),name:"tz",options:r.map(function(e){var t=K()(e,2),a=t[0],r=t[1];return{label:a,value:r}}),type:"options_list"}]}function ol(e){var t=Object(zr["getTeamProfileFields"])(e)||[];return t.filter(function(e){return e&&!e.is_hidden}).sort(function(e,t){return e.ordering-t.ordering}).map(function(e){return{hint:e.hint,isScim:e.options&&e.options.is_scim,label:e.label,name:e.id,options:Object(s["map"])(e.possible_values,function(e){return{label:e,value:e}}),type:e.type}})}var ll=a(179);var cl=a(22);var ul=a(50);var dl=a(3584);var pl=a(1556);var hl=a(888);var vl=a(4274);var ml=a(1183);var fl=a(61);var bl=a(216);var gl=a(790);var _l=a(451);var yl=a(571);var Ol=a(763);var kl=a(372);var El=a(4297);var Cl=new kl["a"]("inline_member");var jl={featureSkEntities:Et["b"].bool.isRequired,className:Et["b"].string,multiline:Et["b"].bool,invert:Et["b"].bool,name:Et["b"].string,isSelected:Et["b"].bool,isSelf:Et["b"].bool,isAppOrBot:Et["b"].bool,isDeleted:Et["b"].bool,isUnknown:Et["b"].bool,isNonExistent:Et["b"].bool};var wl={className:void 0,multiline:false,invert:false,name:void 0,isSelected:false,isSelf:false,isAppOrBot:false,isDeleted:false,isUnknown:false,isNonExistent:false};function Sl(e){var t=e.className,a=e.multiline,r=e.invert,n=e.name,i=e.isSelected,s=e.isSelf,o=e.isAppOrBot,l=e.isDeleted,c=e.isUnknown,u=e.isNonExistent,d=e.featureSkEntities;var p=void 0;p=c||u?Ye.a.createElement(Ol["b"],{isNonExistent:u,size:"random"}):n;var h=Ds()(t,"c-member_name",{"c-member_name--selected":i,"c-member_name--deactivated":l,"c-member_name--inverted":r});return Ye.a.createElement(gl["b"],{className:h,multiline:a},Ye.a.createElement("strong",null,p,s&&Ye.a.createElement("span",{className:"c-member_name__indicator","data-qa":"member_name__you"},Cl.t("(you)")),l&&Ye.a.createElement("span",{className:"c-member_name__indicator","data-qa":"member_name__deactivated"},d?Cl.t("(deactivated)"):"(deactivated)"),o&&Ye.a.createElement(yl["a"],{className:"c-member_name__indicator","data-qa":"member_name__app",inverse:r})))}Sl.displayName="MemberName";Sl.defaultProps=wl;function Il(e){return{featureSkEntities:Object(j["isFeatureEnabled"])(e,"feature_sk_entities")}}var Tl=Object(Ct["connect"])(Il)(Sl);var Al=a(1150);var Nl=a(373);var Pl=a(1142);var Rl={medium:36,small:20};var Ml=a(4299);var Dl={className:Et["b"].string,id:Et["b"].string.isRequired,secondaryContent:Et["b"].node,invert:Et["b"].bool,isDeactivated:Et["b"].bool,isSelected:Et["b"].bool,showAvatar:Et["b"].bool,showPresence:Et["b"].bool,showTooltip:Et["b"].bool,showUnreadCount:Et["b"].bool,useShortMode:Et["b"].bool,member:Et["b"].object,showDraftIcon:Et["b"].bool,showStatus:Et["b"].bool,unreadCount:Et["b"].number};var xl={className:void 0,member:void 0,invert:false,secondaryContent:void 0,showAvatar:true,showDraftIcon:false,showPresence:true,showStatus:true,showTooltip:true,showUnreadCount:false,isDeactivated:false,isSelected:false,unreadCount:void 0,useShortMode:false};function Fl(e){var t=e.className,a=e.id,r=e.invert,n=e.member,s=e.secondaryContent,o=e.showAvatar,l=e.showDraftIcon,c=e.showPresence,u=e.showStatus,d=e.showTooltip,p=e.showUnreadCount,h=e.isDeactivated,v=e.isSelected,m=e.unreadCount,f=e.useShortMode;var b=Object(Pi["getMemberTeamId"])(n);var g=Object(Pi["isAppOrBot"])(n);var _=Object(Pi["isDeleted"])(n);var y=Object(Pi["isExternal"])(n);var O=Object(Pi["isSelf"])(n);var k=Object(fl["c"])(a);var E=Object(fl["d"])(a);var C=Ye.a.createElement(Tl,{"data-qa":"name",name:n.name,multiline:true,invert:r,isAppOrBot:g,isDeleted:_,isSelected:v,isSelf:O,isNonExistent:k,isUnknown:E});var j=Ye.a.createElement("span",{className:"c-member__secondary-name"},"Cool other name");var w=Ye.a.createElement(cl["b"],{type:"pencil",size:"inherit",className:"c-member__draft_icon","aria-hidden":true});var S=Ye.a.createElement(Pl["b"],i()({},e,{"data-qa":"team_icon",id:b,size:16,className:"c-member__team_icon"}));var I=Ye.a.createElement(Nl["a"],{memberId:a,className:"c-member__presence",invert:r});var T=Ye.a.createElement(_l["a"],{memberId:a,tooltip:d,className:"c-member__current-status c-member__current-status--small"});var A=Ye.a.createElement("span",{className:"c-member__details"},s);var N=Ye.a.createElement(Al["a"],{className:"c-member__unread_count",count:m,style:r?"white":"red"});var P=Ye.a.createElement("span",{className:"c-member__primary_content"},C,c&&I,!f&&j,u&&T);var R=Ye.a.createElement("span",{className:"c-member__secondary_content"},s&&A,y&&S,p&&m&&N);var M=Ds()(t,"c-member","c-member--small",{"c-member--with-presence":c});return Ye.a.createElement(gl["c"],{avatar:function e(t){return o&&(l?w:Ye.a.createElement(bl["b"],i()({},t,{"data-qa":"avatar",size:Rl.small,userId:a})))},className:M,size:"small",isDeactivated:h,isSelected:v,text:P,subtext:R,dataQa:"small_member_entity"})}Fl.displayName="SmallMemberEntity";Fl.defaultProps=xl;function Ll(e,t){var a=t.id,r=t.isDraftContext,n=t.showStatus,i=t.isUnknown;var o=Object(N["d"])(e,a);var l=void 0;if(r){var c=Object(T["i"])(e,a);l=!!(c&&Object(P["getHasDraft"])(e,c.id))}return{member:o,unreadCount:Object(Pi["getImUnreadCountByMember"])(e,o),showDraftIcon:l,showStatus:n&&Object(Pi["hasCustomStatusSet"])(o),isUnknown:Object(s["isBoolean"])(i)?i:Object(fl["d"])(o)}}var Bl=Object(Ct["connect"])(Ll)(Fl);var Ul={className:Et["b"].string,id:Et["b"].string.isRequired,isDeactivated:Et["b"].bool,isSelected:Et["b"].bool,secondaryContent:Et["b"].node};var ql={className:void 0,isDeactivated:false,isSelected:false,secondaryContent:void 0};var Gl=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(s["bindAll"])(a,["onMouseEnter","onMouseLeave"]);a.state={focused:false,hovered:false};return a}gt()(t,[{key:"onBlur",value:function e(){this.setState(function(){return{focused:true}})}},{key:"onFocus",value:function e(){this.setState(function(){return{focused:false}})}},{key:"onMouseEnter",value:function e(){this.setState(function(){return{hovered:true}})}},{key:"onMouseLeave",value:function e(){this.setState(function(){return{hovered:false}})}},{key:"render",value:function e(){var t=this.props,a=t.className,r=t.id,n=t.isDeactivated,s=t.isSelected,o=t.secondaryContent;return Ye.a.createElement(ml["a"],{className:a,isSelected:s,primaryContent:Ye.a.createElement(Bl,i()({id:r,isDeactivated:n,isSelected:s,invert:s||this.state.focused||this.state.hovered,secondaryContent:o},this.props)),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,size:"small"})}}]);return t}(ze["Component"]);Gl.displayName="SmallMemberListEntity";Gl.defaultProps=ql;var Wl=Gl;var Hl=new jt["b"]("edit_profile");var Vl={hint:Et["b"].string,isScim:Et["b"].bool,isRequired:Et["b"].bool,label:Et["b"].node.isRequired,name:Et["b"].string.isRequired,onChange:Et["b"].func,options:Et["b"].arrayOf(Et["b"].object),placeholder:Et["b"].string,type:Et["b"].string.isRequired,value:Et["b"].string,valueAlt:Et["b"].string};var Kl={hint:void 0,isScim:false,isRequired:false,onChange:s["noop"],options:void 0,placeholder:void 0,value:void 0,valueAlt:void 0};function zl(e){var t=e.hint,a=e.isRequired,r=e.isScim,n=e.label,i=e.name,o=e.onChange,l=e.options,c=e.placeholder,u=e.type,d=e.value,p=e.valueAlt;var h=Object(rl["a"])(),v=h.featureSonicEditProfile;if(!v)return null;var m=i+"-label";var f=i+"-input";var b=void 0;b=r?Ye.a.createElement(Ye.a.Fragment,null,Ye.a.createElement(ul["c"],{tip:Hl.t("This field is automatically synced by your organization.")},Ye.a.createElement(cl["b"],{type:"lock"})),Ye.a.createElement("strong",null,n)):n;if("text"===u)return Ye.a.createElement(al["a"],{htmlFor:f,key:i,id:m,text:b},Ye.a.createElement(ll["a"],{ariaDescribedby:m,hintText:t,id:f,isDisabled:r,isRequired:a,name:i,onChange:function e(t){return o(i,t)},placeholder:c||n,size:"large",value:d}));if("options_list"===u)return Ye.a.createElement(al["a"],{htmlFor:f,key:i,id:m,text:b},Ye.a.createElement(dl["c"],{isDisabled:r,isRequired:a,onOptionSelected:function e(t){return o(i,t.value)},options:l,selectedOption:Object(s["find"])(l,{value:d}),selectId:f,size:"large",width:"100%"}),Ye.a.createElement(hl["a"],null,t));if("link"===u){var g=i+"-label-2";var _=i+"-input-2";return Ye.a.createElement("div",{className:"p-edit_profile__columns"},Ye.a.createElement("div",{className:"p-edit_profile__column_primary"},Ye.a.createElement(al["a"],{htmlFor:f,key:i,id:m,text:b},Ye.a.createElement(ll["a"],{ariaDescribedby:m,hintText:t,id:f,isDisabled:r,isRequired:a,name:i,onChange:function e(t){return o(i,t,p)},placeholder:"https://",size:"large",value:d}))),Ye.a.createElement("div",{className:"p-edit_profile__column_secondary"},Ye.a.createElement(al["a"],{htmlFor:_,key:i,id:g,text:Hl.t("Display text")},Ye.a.createElement(ll["a"],{ariaDescribedby:g,hintText:Hl.t("Optional"),id:_,isDisabled:r,name:i+"_alt",onChange:function e(t){return o(i,d,t)},placeholder:Hl.t("My link"),size:"large",value:p}))))}if("date"===u)return Ye.a.createElement(al["a"],{htmlFor:f,key:i,id:m,text:b},Ye.a.createElement(vl["a"],{"aria-labelledby":m,dateFormat:"YYYY-MM-DD",displayFormat:"MMMM D, YYYY",id:f,onDateChange:function e(t){return o(i,t)},required:a,selectedDate:d,size:"large",readOnly:true,datePickerDisabled:r}),Ye.a.createElement(hl["a"],null,t));if("user"===u)return Ye.a.createElement(al["a"],{htmlFor:f,key:i,id:m,text:b},Ye.a.createElement(pl["a"],{isRequired:a,isDisabled:r,onSelectedItemsChange:function e(t){return o(i,t)},placeholderText:Hl.t("Search by name"),renderOption:function e(t,a){return Ye.a.createElement(Wl,{id:t.value,isSelected:a.isActive})},searcherOptions:{allowEmptyQuery:true,entities:{channels:false,members:true,userGroups:false}},selectId:f,size:"large",width:"100%"}),Ye.a.createElement(hl["a"],null,t));return null}zl.defaultProps=Kl;var Yl=Ye.a.memo(zl);var Ql=a(535);var Jl=a(4200);var Zl=Jl["a"];var Xl=a(1311);var $l={className:Et["b"].string,member:Et["b"].object.isRequired};var ec={className:void 0};function tc(e){var t=e.className,a=e.member;var r=Object(rl["a"])(),n=r.featureSonicEditProfile;if(!n)return null;var i=Object(Ql["a"])({avatarHash:Object(Pi["getMemberAvatarHash"])(a),memberId:a.id,size:192,teamId:Object(Pi["getMemberTeamId"])(a)}),s=i.imageUrl,o=i.imageUrl2x;var l=Ye.a.createElement(Zl,{className:"p-edit_profile__photo"});return Ye.a.createElement(Xl["a"],{"aria-hidden":"true",className:Ds()(t,"p-edit_profile__photo"),renderError:function e(){return l},renderPending:function e(){return l},src:s,srcSet:s+", "+o+" 2x"})}tc.displayName="EditProfilePhoto";tc.defaultProps=ec;var ac=Ye.a.memo(tc);var rc=a(28);var nc={children:Et["b"].node.isRequired,switchPane:Et["b"].func};var ic={switchPane:s["noop"]};function sc(e){var t=e.children,a=e.switchPane,r=Rs()(e,["children","switchPane"]);var n=Object(ze["useRef"])();return Ye.a.createElement(rc["d"],i()({},r,{onClick:function e(){return n.current.click()}}),t,Ye.a.createElement("input",{accept:"image/*;capture=camera","aria-hidden":"true",className:"hidden",onChange:function e(t){return a("upload",{file:t.target.files[0]})},ref:n,tabIndex:"-1",type:"file"}))}sc.displayName="EditProfileUploadButton";sc.defaultProps=ic;var oc=sc;var lc=new jt["b"]("edit_profile");var cc={member:Et["b"].object,setUserPrefByApi:Et["b"].func,switchPane:Et["b"].func,team:Et["b"].object,updateCurrentMemberProfile:Et["b"].func};var uc={member:void 0,setUserPrefByApi:s["noop"],switchPane:s["noop"],team:void 0,updateCurrentMemberProfile:s["noop"]};function dc(e){var t=e.member,a=e.setUserPrefByApi,r=e.switchPane,n=e.team,o=e.updateCurrentMemberProfile;var l=Object(ze["useState"])(false),c=K()(l,2),u=c[0],d=c[1];var p=Object(ze["useState"])({}),h=K()(p,2),v=h[0],m=h[1];var f=sl({team:n});var b={display_name:Object(Pi["getMemberProfileFieldDisplayName"])(t),phone:Object(Pi["getMemberPhone"])(t),real_name:Object(Pi["getMemberRealName"])(t),skype:Object(Pi["getMemberSkype"])(t),title:Object(Pi["getMemberTitle"])(t),tz:Object(Pi["getMemberTimezone"])(t)};var g=ol(n);var _=Object(Pi["getMemberProfileFields"])(t);var y=Object(ze["useCallback"])(function(e,t,a){m(e in b?i()({},v,An()({},e,t)):i()({},v,{fields:i()({},v.fields,An()({},e,{alt:a,value:t}))}))},[v,b]);var O=Object(rl["a"])(),k=O.featureSonicEditProfile;if(!k)return null;function E(e){if(e in v)return{value:v[e]};if(e in b)return{value:b[e]};if(v.fields&&e in v.fields)return{value:v.fields[e].value,alt:v.fields[e].alt};if(_&&e in _)return{value:_[e].value,alt:_[e].alt};return{}}function C(e){if(Object(s["isEmpty"])(v)){e();return}d(true);var r=[];v.tz&&r.push(a({pref:"tz",value:v.tz}));var n=Object(Pi["getMemberProfile"])(t);var l=i()({},n,Object(s["omit"])(v,"tz"),{fields:i()({},n.fields,v.fields)});r.push(o({profile:l}));Promise.all(r).then(function(){return e()}).finally(function(){return d(false)})}function j(e){var t=E(e.name),a=t.alt,r=t.value;return Ye.a.createElement(Yl,i()({},e,{key:e.name,onChange:y,value:r,valueAlt:a}))}return Ye.a.createElement(Ye.a.Fragment,null,Ye.a.createElement(no,null,Ye.a.createElement(_o,{id:"edit_profile__title-bar",title:lc.t("Edit your profile")})),Ye.a.createElement(vo,null,Ye.a.createElement(Bo,null,Ye.a.createElement("div",{className:"p-edit_profile__columns"},Ye.a.createElement("div",{className:"p-edit_profile__column_primary"},f.map(j)),Ye.a.createElement("div",{className:"p-edit_profile__column_secondary"},Ye.a.createElement(al["a"],{text:lc.t("Profile photo")},Ye.a.createElement(ac,{member:t})),Ye.a.createElement(oc,{className:"p-edit_profile__column_secondary_control",switchPane:r,type:"outline"},lc.t("Upload an Image")),Object(Pi["hasCustomProfilePhoto"])(t)&&Ye.a.createElement(St["a"],{className:"p-edit_profile__column_secondary_control",onClick:function e(){return r("remove")}},lc.t("Remove photo")))),g.map(j))),Ye.a.createElement(Co,null,Object(Pi["isAdmin"])(t)&&Ye.a.createElement(St["a"],{href:Object(zr["getTeamUrl"])(n,"/customize/profile")},lc.t("Add, edit or reorder fields")),Ye.a.createElement(To,null,Ye.a.createElement(Ho,{type:"outline"},lc.t("Cancel")),Ye.a.createElement(Ho,{loading:u,onClick:C},lc.t("Save Changes")))))}dc.displayName="EditProfileFormPane";dc.defaultProps=uc;function pc(e){return{member:Object(N["b"])(e),team:Object(gn["d"])(e)}}var hc={updateCurrentMemberProfile:function e(){return tl["a"].apply(void 0,arguments)},setUserPrefByApi:function e(){return J["c"].apply(void 0,arguments)}};var vc=Object(Ct["connect"])(pc,hc)(dc);var mc=a(230);var fc=new jt["b"]("edit_profile");var bc={member:Et["b"].object,switchPane:Et["b"].func,submitDeletePhoto:Et["b"].func.isRequired};var gc={member:void 0,switchPane:s["noop"]};function _c(e){var t=e.member,a=e.switchPane,r=e.submitDeletePhoto;var n=Object(rl["a"])(),i=n.featureSonicEditProfile;var s=Object(ze["useState"])(false),o=K()(s,2),l=o[0],c=o[1];if(!i)return null;var u=function e(){c(true);r({reason:"edit_profile_delete_photo"}).then(function(){a("form")}).finally(function(){c(false)})};return Ye.a.createElement(Ye.a.Fragment,null,Ye.a.createElement(no,null,Ye.a.createElement(Xo,{onClick:function e(){return a("form")}}),Ye.a.createElement(_o,{id:"edit_profile__title-bar",title:fc.t("Remove profile photo")})),Ye.a.createElement(vo,null,Ye.a.createElement(Bo,{className:"p-edit_profile__centered"},Ye.a.createElement("div",{className:"p-edit_profile__centered_content p-edit_profile__centered_content--wide"},Ye.a.createElement(ac,{className:"p-edit_profile__centered_title",member:t}),fc.t("Are you sure you want to remove your photo? We\u2019ll replace it with a default Slack avatar.")))),Ye.a.createElement(Co,null,Ye.a.createElement(To,null,Ye.a.createElement(rc["d"],{onClick:function e(){return a("form")},type:"outline"},fc.t("Cancel")),Ye.a.createElement(rc["b"],{onClick:u,loading:l,type:"danger"},fc.t("Yes, Remove Photo")))))}_c.displayName="EditProfileRemovePane";_c.defaultProps=gc;function yc(e){return{member:Object(N["b"])(e)}}var Oc={submitDeletePhoto:function e(){return mc["k"].apply(void 0,arguments)}};var kc=Object(Ct["connect"])(yc,Oc)(_c);var Ec=a(96);var Cc=a(81);function jc(e){return new Promise(function(t,a){if(!e){a(new Error("invalid params"));return}var r=new Image;r.onload=function(){return t(r)};r.onerror=function(){return a(new Error("image failed to load"))};r.src=e})}var wc=["image/gif","image/png","image/jpeg"];var Sc=4e3;var Ic=new Error("invalid_size");var Tc=new Error("invalid_type");var Ac=new Error("api_error");function Nc(e){var t=e.file,a=e.prepareUserPhotoApi;return new Promise(function(e,r){if(!Object(s["includes"])(wc,t.type)){r(Tc);return}jc(URL.createObjectURL(t)).then(function(n){if(n.height>Sc||n.width>Sc){r(Ic);return}a({file:t,reason:"EditProfileModal"}).then(function(t){t.ok&&t.url?jc(t.url).then(e).catch(function(){return r(Ac)}):r(Ac)}).catch(function(){r(Ac)})})})}function Pc(e){var t=e.file,a=e.prepareUserPhotoApi;var r=Object(ze["useState"])({status:"uploading",image:null,error:null}),n=K()(r,2),i=n[0],s=n[1];Object(ze["useEffect"])(function(){Nc({file:t,prepareUserPhotoApi:a}).then(function(e){s({status:"success",image:e})}).catch(function(e){s(e===Ic?{error:"invalid_size"}:e===Tc?{error:"invalid_type"}:{error:"unknown"})})},[t,a]);return i}var Rc=new jt["b"]("edit_profile");var Mc={file:Et["b"].object,switchPane:Et["b"].func,prepareUserPhotoApi:Et["b"].func};var Dc={file:void 0,switchPane:s["noop"],prepareUserPhotoApi:function e(){return Promise.resolve()}};function xc(e){var t=e.file,a=e.switchPane,r=e.prepareUserPhotoApi;var n=Pc({file:t,prepareUserPhotoApi:r}),i=n.status,s=n.image,o=n.error;var l=Object(rl["a"])(),c=l.featureSonicEditProfile;if(!c)return null;if("success"===i){a("crop",{image:s});return null}var u=void 0;var d=void 0;if("uploading"===i){u=Rc.t("Uploading your photo\u2026");d=Ye.a.createElement(Ec["a"],{size:"jumbo"})}else if(o){var p=void 0;var h=void 0;if("invalid_size"===o){u=Rc.t("Dang");p=":worried:";h=Rc.t("That\u2019s a very nice photo, but it\u2019s a bit too big. Try one that\u2019s smaller than {maxSize} tall by {maxSize} wide.",{maxSize:Sc.toLocaleString()+"px"})}else if("invalid_type"===o){u=Rc.t("Oh cripes");p=":flushed:";h=Rc.t("Profile photos must be GIFs, JPGs or PNGs.")}else{u=Rc.t("Eek");p=":frowning:";h=Rc.t("Sorry! Something went wrong. Please try again.")}d=Ye.a.createElement("div",{className:"p-edit_profile__centered_content"},Ye.a.createElement(Cc["b"],{className:"p-edit_profile__centered_title",emojiSize:Cc["a"].LARGE,forceDisplay:true,text:p}),Ye.a.createElement("strong",null,h))}return Ye.a.createElement(Ye.a.Fragment,null,Ye.a.createElement(no,null,Ye.a.createElement(Xo,{onClick:function e(){return a("form")}}),Ye.a.createElement(_o,{id:"edit_profile__title-bar",title:u})),Ye.a.createElement(vo,null,Ye.a.createElement(Bo,{className:"p-edit_profile__centered"},Ye.a.createElement("div",{className:"p-edit_profile__centered_primary p-edit_profile__centered_primary--background"},d))),Ye.a.createElement(Co,null,Ye.a.createElement(To,null,Ye.a.createElement(Ho,{type:"outline"},Rc.t("Cancel")),o&&Ye.a.createElement(oc,{switchPane:a,type:"primary"},Rc.t("Try a Different Image")))))}xc.displayName="EditProfileUploadPane";xc.defaultProps=Dc;var Fc={prepareUserPhotoApi:function e(){return mc["i"].apply(void 0,arguments)}};var Lc=Object(Ct["connect"])(null,Fc)(xc);var Bc=a(771);var Uc=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()({callback_id:"external-menus",fallback:"External menu",id:"1",actions:[{id:"1",name:"external_menu",text:"Pick an item",type:"select",data_source:"external"}]},t)};var qc=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()({callback_id:"play_game",fallback:"Some Buttons",id:"1",actions:[{id:"1",name:"confirm",text:"Yes",type:"button",value:"true",style:"danger"},{id:"2",name:"confirm",text:"No",type:"button",value:"false",style:""}]},t)};var Gc=function e(t){return i()({__meta__:{},type:"message",ts:"1524614173.000015",channel:"C12345678",is_channel:true,is_private:false,is_group:false,is_mpim:false,text:"\xa1Hola Mundo!",user:"W1W832GG1"},t)};var Wc=function e(t){return Gc(i()({ts:"1524614173.000015",thread_ts:"1524614173.000125",subtype:"thread_broadcast",channel:"C12345678",user:"W1W832GG1"},t))};var Hc=function e(t){return Gc(i()({attachments:[Uc()]},t))};var Vc=a(383);var Kc=a(1214);var zc=a(926);var Yc=a(4275);var Qc=a.n(Yc);var Jc=a(4301);var Zc=460;var Xc=36;var $c={image:Et["b"].object.isRequired,onChange:Et["b"].func};var eu={onChange:s["noop"]};function tu(e){var t=e.image,a=e.onChange;var r=Object(ze["useState"])({aspect:1,height:Zc,x:0,y:0}),n=K()(r,2),i=n[0],s=n[1];return Ye.a.createElement(Qc.a,{className:"p-edit_profile__cropper",crop:i,keepSelection:true,maxHeight:Zc,maxWidth:Zc,minHeight:Xc,minWidth:Xc,onChange:s,onComplete:a,src:t.src})}tu.displayName="EditProfileCropper";tu.defaultProps=eu;var au=Ye.a.memo(tu);var ru={crop:Et["b"].shape({height:Et["b"].number,x:Et["b"].number,y:Et["b"].number}).isRequired,image:Et["b"].object.isRequired,imageDisplaySize:Et["b"].number.isRequired,previewDisplaySize:Et["b"].number.isRequired};function nu(e){var t=e.crop,a=e.image,r=e.imageDisplaySize,n=e.previewDisplaySize;var i=void 0;i=a.height>r?a.width*(r/a.height):a.width>r?r:a.width;var s=t.width/i;var o=n/s;var l=o*(t.x/i);var c=o*(t.y/i);return Ye.a.createElement("div",{className:"p-edit_profile__upload_preview_photo",style:{backgroundImage:"url("+a.src,backgroundPosition:"-"+l+"px -"+c+"px",backgroundSize:o+"px"}})}nu.displayName="EditProfileCropPreview";var iu=Ye.a.memo(nu);var su=new jt["b"]("edit_profile");var ou={currentUserId:Et["b"].string,image:Et["b"].object.isRequired,switchPane:Et["b"].func};var lu={currentUserId:void 0,switchPane:s["noop"]};function cu(e){var t=e.currentUserId,a=e.image,r=e.switchPane;var n=Object(ze["useState"])(),i=K()(n,2),s=i[0],o=i[1];var l=Object(el["a"])(function(){return Gc({ts:Object(Bc["a"])(Date.now()),user:t})},[t]);var c=Object(rl["a"])(),u=c.featureSonicEditProfile;if(!u)return null;var d=s?Ye.a.createElement(iu,{crop:s,image:a,imageDisplaySize:Zc,previewDisplaySize:Xc}):Ye.a.createElement(Zl,{size:Xc});return Ye.a.createElement(Ye.a.Fragment,null,Ye.a.createElement(no,null,Ye.a.createElement(Xo,{onClick:function e(){return r("form")}}),Ye.a.createElement(_o,{id:"edit_profile__title-bar",title:su.t("Crop your photo")})),Ye.a.createElement(vo,null,Ye.a.createElement(Bo,{className:"p-edit_profile__centered"},Ye.a.createElement("div",{className:"p-edit_profile__centered_primary p-edit_profile__centered_primary--background"},Ye.a.createElement(au,{image:a,onChange:o})),Ye.a.createElement("div",{className:"p-edit_profile__centered_primary"},Ye.a.createElement("div",{className:"p-edit_profile__upload_preview"},Ye.a.createElement("div",{className:"p-edit_profile__upload_preview_label"},su.t("Preview")),Ye.a.createElement("div",{className:"p-edit_profile__upload_message"},Ye.a.createElement(Kc["a"],{compact:d,light:d},Ye.a.createElement("strong",null,Ye.a.createElement(Vc["a"],{id:t})),"\xa0\xa0",Ye.a.createElement(zc["a"],{msg:l}),Ye.a.createElement("br",null),Ye.a.createElement(Ol["b"],{size:"large"}))))))),Ye.a.createElement(Co,null,Ye.a.createElement(To,null,Ye.a.createElement(Ho,{type:"outline"},su.t("Cancel")),Ye.a.createElement(rc["d"],null,su.t("Save")))))}cu.displayName="EditProfileCropPane";cu.defaultProps=lu;function uu(e){return{currentUserId:Object(j["getCurrentUserId"])(e)}}var du=Object(Ct["connect"])(uu)(cu);var pu=a(4303);var hu={closeModal:Et["b"].func};var vu={closeModal:s["noop"]};function mu(e){var t=e.closeModal;var a=Object(el["a"])(function(){return{crop:{render:function e(t){return Ye.a.createElement(du,t)}},form:{modalProps:{className:"p-edit_profile--wide"},render:function e(t){return Ye.a.createElement(vc,t)}},remove:{render:function e(t){return Ye.a.createElement(kc,t)}},upload:{render:function e(t){return Ye.a.createElement(Lc,t)}}}});return Ye.a.createElement($o,{closeModal:t,defaultPane:"form",panes:a})}mu.displayName="EditProfileModal";mu.defaultProps=vu;var fu={closeModal:function e(){return Ze["closeModal"].apply(void 0,arguments)}};var bu=Object(Ct["connect"])(null,fu)(mu);var gu=bu;var _u=Object(Qe["b"])("Opens the edit profile modal",function(e,t){var a=t();if(!Object(j["isFeatureEnabled"])(a,"feature_sonic_edit_profile")){var r=Object(gn["d"])(a);var n=Object(zr["getTeamUrl"])(r,"/account/profile");Object(Ns["a"])(n);return}e(Object(Ze["openModal"])({element:Ye.a.createElement(gu)}))});_u.propTypes=null;var yu=_u;var Ou=a(3957);Object(M["b"])({actions:[Ou["a"]],sideEffect:function e(t,a){return a(yu())}});var ku=a(1053);var Eu=a(1290);Object(M["b"])({actions:[Eu["a"]],sideEffect:function e(t,a){return a(Object(ku["a"])())}});var Cu=a(1262);var ju=a(1263);var wu=a(695);var Su="PRESENCE-MANAGER";var Iu=function e(t,a,r){if(!Object(b["a"])()&&!Object(j["isFeatureEnabled"])(r(),"feature_sonic_presence_manager"))return;var n=Object(De["c"])(r());var i=Object(wu["b"])(n);if(!i||Object(s["isEmpty"])(i))return;Object(ae["a"])({getState:r}).debug(Su,"Sending the presence subscription after establishing a websocket connection");a(Object(wu["d"])())};Object(M["b"])({actions:[_["connected"]],sideEffect:Iu});var Tu=a(913);function Au(e,t,a){var r=a();var n=Object(De["c"])(r);var i=e.payload&&e.payload[0];n!==i&&t(Object(Tu["clearQueue"])())}Object(M["b"])({actions:[me["d"]],sideEffect:Au});var Nu=a(197);var Pu=a(1176);var Ru=a(480);var Mu=a(541);function Du(e,t){t(Object(Nu["j"])(Object(Pu["a"])(e.room)))}Object(Ja["a"])("sh_room_join",Du);Object(Ja["a"])("sh_room_leave",Du);Object(Ja["a"])("sh_room_update",Du);Object(Ja["a"])("screenhero_invite",function(e,t,a){if(!Object(b["a"])())return;var r=a();var n=Object(T["d"])(r,e.channel);if(Object(Mu["a"])(r,n))return;t(Object(Ru["c"])(e))});Object(Ja["a"])("screenhero_invite_response",function(e,t,a){if(!Object(b["a"])())return;t(Object(Ru["e"])(e))});Object(Ja["a"])("screenhero_invite_cancel",function(e,t,a){if(!Object(b["a"])())return;t(Object(Ru["d"])(e))});var xu=a(1062);var Fu=a(685);var Lu=a(448);function Bu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.is_uninstall,a=e.app_id;var r=arguments[1];var n=arguments[2];if(!a)return;Object(j["isFeatureEnabled"])(n(),"feature_app_actions_fe_refactor")?r(t?Object(Fu["e"])([a]):Object(xu["b"])([a])):r(t&&a?Object(Lu["k"])([a]):Object(Lu["d"])())}Object(Ja["a"])("app_actions_updated",Bu);var Uu=a(780);var qu=a(186);var Gu=a(1187);var Wu=a(339);var Hu=a(924);var Vu=a(1077);var Ku={invalidSubmission:"invalid_submission"};var zu=Object(Hn["a"])("fetch a dialog that has been pushed by an app",function(e,t,a){var r=e(Object(Vn["a"])({method:"dialog.get",args:{dialog_id:a}})).then(function(e){var t=e.dialog,a=void 0===t?{}:t;return Object(Wu["b"])(a)});return Object(Vu["a"])(r)});zu.propTypes=Et["b"].string;var Yu=Object(Hn["a"])("submit and app generated dialog",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.dialogId,n=a.submission;var i={dialog_id:r,submission:JSON.stringify(n)};var s=e(Object(Vn["a"])({method:"dialog.submit",args:i})).catch(function(e){var t=e.data||{};var a=new Error(e.message);a.data={error:t.error,dialogErrors:t.dialog_errors};throw a});return Object(Vu["a"])(s)});Yu.propTypes={dialogId:Et["b"].string,submission:Et["b"].object};var Qu=Object(Hn["a"])("notify an app that the dialog it generated has been canceled",function(e,t,a){return e(Object(Vn["a"])({method:"dialog.notifyCancel",args:{dialog_id:a}}))});Qu.propTypes=Et["b"].string;var Ju=Object(Hn["a"])("fetch select options from a third party app based on a search query",function(e,t,a){var r=a.dialogId,n=a.inputName,i=a.value;return e(Object(Vn["a"])({method:"dialog.selectSuggestion",args:Object(Hu["a"])({dialogId:r,name:n,value:i})})).then(function(e){var t=e.option_groups,a=e.options;if(t)return{optionGroups:t};if(a)return{options:a};return{options:[]}})});Ju.propTypes={dialogId:Et["b"].string.isRequired,inputName:Et["b"].string.isRequired,value:Et["b"].string.isRequired};var Zu=a(182);var Xu=a(310);function $u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.reduce(function(e,t){return i()({},e,An()({},t.name,t.error))},{})}var ed={formatErrors:$u};var td=a(88);var ad=a(95);var rd=a(152);var nd={align:Et["b"].oneOf(Object(s["values"])(rd["a"])),message:Et["b"].node.isRequired,type:Et["b"].oneOf(Object(s["values"])(rd["c"]))};var id={align:rd["a"].left,type:rd["c"].boxed};function sd(e){var t=e.align,a=e.message,r=e.type;return Ye.a.createElement(rd["d"],{type:r,align:t,level:rd["b"].error,className:"margin_bottom_100"},a)}sd.displayName="AppDialogError";sd.defaultProps=id;var od=Object(ad["pure"])(sd);var ld=a(1346);function cd(e,t){return e+"_"+t.name}function ud(e,t,a){return e+"_"+t.name+"_"+a}function dd(e,t,a){return cd(e,t)+"_"+a.value}var pd={dialogId:Et["b"].string.isRequired,error:Et["b"].string,input:Et["b"].object.isRequired,isSubmitting:Et["b"].bool,onBlur:Et["b"].func.isRequired,onChange:Et["b"].func.isRequired,onFocus:Et["b"].func.isRequired,fetchSelectSuggestionDialog:Et["b"].func.isRequired,value:Et["b"].string,featureBotsNotMembers:Et["b"].bool};var hd={error:null,isSubmitting:false,value:"",featureBotsNotMembers:false};var vd=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.optionsFetcher=a.optionsFetcher.bind(a);return a}gt()(t,[{key:"getLabelId",value:function e(){var t=this.props,a=t.dialogId,r=t.input;return ud(a,r,"label")}},{key:"optionsFetcher",value:function e(t){var a=this.props,r=a.dialogId,n=a.input;return this.props.fetchSelectSuggestionDialog({dialogId:r,inputName:n.name,value:t})}},{key:"renderSelect",value:function e(){var t=this.props,a=t.dialogId,r=t.error,n=t.featureBotsNotMembers,i=t.input,s=t.isSubmitting,o=t.onBlur,l=t.onChange,c=t.onFocus,u=t.value;var d=cd(a,i);var p=this.getLabelId();var h={id:d,isSubmitting:s,labelId:p,onBlur:o,onChange:l,onFocus:c,value:u,dialogId:a,dataSource:i.data_source,includeApps:!n,minQueryLength:i.min_query_length,optionsFetcher:this.optionsFetcher,options:i.options,optionGroups:i.option_groups,isDisabled:i.is_disabled,isRequired:i.is_required,hintText:i.hint,errorText:r,name:i.name,placeholder:i.placeholder,ref:this.setRef,selectedOptions:i.selected_options};return Ye.a.createElement(ld["a"],h)}},{key:"render",value:function e(){var t=this.props,a=t.dialogId,r=t.input,n=t.isSubmitting;var i=cd(a,r);var s=this.getLabelId();var o=Ds()({"c-label--disabled":r.disabled||n});return Ye.a.createElement(al["a"],{className:o,htmlFor:i,id:s,key:r.name,text:r.label,optional:!!r.optional},this.renderSelect())}}]);return t}(Ye.a.Component);vd.displayName="AppDialogInputSelect";var md=function e(t){return{featureBotsNotMembers:Object(j["isFeatureEnabled"])(t,"feature_bots_not_members")}};var fd={fetchSelectSuggestionDialog:Ju};vd.defaultProps=hd;var bd=Object(Ct["connect"])(md,fd,null,{withRef:true})(vd);var gd={error:Et["b"].string,dialogId:Et["b"].string.isRequired,input:Et["b"].object.isRequired,isSubmitting:Et["b"].bool,onBlur:Et["b"].func.isRequired,onChange:Et["b"].func.isRequired,onFocus:Et["b"].func.isRequired,value:Et["b"].string};var _d={error:null,isSubmitting:false,value:""};var yd=function(e){kt()(t,e);function t(){ft()(this,t);return yt()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}gt()(t,[{key:"render",value:function e(){var t=this.props,a=t.error,r=t.dialogId,n=t.input,i=t.isSubmitting,s=t.onBlur,o=t.onChange,l=t.onFocus,c=t.value;var u=cd(r,n);var d=ud(r,n,"label");var p=Ds()({"c-label--disabled":n.disabled||i});return Ye.a.createElement(al["a"],{className:p,htmlFor:u,id:d,key:n.name,text:n.label,optional:!!n.optional},Ye.a.createElement(ll["a"],{autoComplete:"off",labelId:d,isDisabled:n.disabled||i,errorText:a,hintText:n.hint,id:u,isRequired:!n.optional,name:n.name,onBlur:s,onChange:o,onFocus:l,placeholder:n.placeholder,type:"text",value:c}))}}]);return t}(Ye.a.Component);yd.displayName="AppDialogInputText";var Od=yd;yd.defaultProps=_d;var kd=a(687);var Ed={dialogId:Et["b"].string.isRequired,error:Et["b"].string,input:Et["b"].object.isRequired,isSubmitting:Et["b"].bool,onBlur:Et["b"].func.isRequired,onChange:Et["b"].func.isRequired,onFocus:Et["b"].func.isRequired,value:Et["b"].string};var Cd={error:null,isSubmitting:false,value:""};function jd(e){var t=e.dialogId,a=e.error,r=e.input,n=e.isSubmitting,i=e.onBlur,s=e.onChange,o=e.onFocus,l=e.value;var c=cd(t,r);var u=ud(t,r,"label");var d=Ds()({"c-label--disabled":r.disabled||n});return Ye.a.createElement(al["a"],{className:d,htmlFor:c,key:r.name,id:u,text:r.label,optional:!!r.optional},Ye.a.createElement(kd["a"],{autoComplete:"off",labelId:u,isDisabled:r.disabled||n,errorText:a,hintText:r.hint,id:c,isRequired:!r.optional,name:r.name,maxCharacterLimit:r.max_length,onBlur:i,onChange:s,onFocus:o,placeholder:r.placeholder,value:l}))}jd.displayName="AppDialogInputTextarea";jd.defaultProps=Cd;var wd={select:"select",text:"text",textarea:"textarea"};var Sd={error:Et["b"].string,dialogId:Et["b"].string.isRequired,input:Et["b"].object.isRequired,isSubmitting:Et["b"].bool,onBlur:Et["b"].func.isRequired,onChange:Et["b"].func.isRequired,onFocus:Et["b"].func.isRequired,value:Et["b"].string};var Id={error:null,isSubmitting:false,value:""};var Td=function(e){kt()(t,e);function t(){ft()(this,t);return yt()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}gt()(t,[{key:"render",value:function e(){var t=this.props,a=t.error,r=t.dialogId,n=t.input,i=t.isSubmitting,s=t.onBlur,o=t.onChange,l=t.onFocus,c=t.value;var u={error:a,dialogId:r,input:n,isSubmitting:i,onBlur:s,onChange:o,onFocus:l,value:c};switch(n.type){case wd.select:return Ye.a.createElement(bd,u);case wd.text:return Ye.a.createElement(Od,u);case wd.textarea:return Ye.a.createElement(jd,u);default:return}}}]);return t}(Ye.a.Component);Td.displayName="AppDialogInput";var Ad=Td;Td.defaultProps=Id;var Nd;var Pd=new jt["b"]("app_dialog");var Rd=(Nd={},An()(Nd,wd.text,150),An()(Nd,wd.textarea,3e3),Nd);var Md={maxLength:"maxLength",minLength:"minLength",required:"required"};function Dd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(e){case Md.maxLength:return Pd.t("You can't enter more than {maxLength, plural, =1 {# character} other {# characters}}.",t);case Md.minLength:return Pd.t("You must enter at least {minLength, plural, =1 {# character} other {# characters}}.",t);case Md.required:return Pd.t("This field is required.");default:break}return null}function xd(e){var t=e.elements,a=e.lastActiveElementName,r=e.touchedElements,n=e.values;return t.reduce(function(e,t){var o=n[t.name];var l=a===t.name;var c=!t.optional&&!o&&!l;var u=Object(s["includes"])([wd.text,wd.textarea],t.type);var d=Math.max(t.min_length,0);var p=Object(s["isNumber"])(d)&&Object(s["get"])(o,"length",0)<d;var h=!o&&l;var v=!o&&t.optional;var m=u&&p&&!h&&!v;var f=Math.min(t.max_length,Rd[t.type]);var b=f&&Object(s["get"])(o,"length")>f;var g=u&&b;if(!r[t.name])return e;if(c)return i()({},e,An()({},t.name,Dd(Md.required)));if(m)return i()({},e,An()({},t.name,Dd(Md.minLength,{minLength:d})));if(g)return i()({},e,An()({},t.name,Dd(Md.maxLength,{maxLength:f})));return e},{})}var Fd={validate:xd};var Ld=a(2310);var Bd=new jt["b"]("app_dialog");var Ud={id:Et["b"].string.isRequired,elements:Et["b"].array,isLoading:Et["b"].bool,isSubmitting:Et["b"].bool,loadingFailed:Et["b"].bool,serverErrors:Et["b"].object,submittingFailed:Et["b"].bool,onLoadRetried:Et["b"].func.isRequired,onSubmit:Et["b"].func.isRequired,onSubmitRetried:Et["b"].func.isRequired};var qd={elements:[],serverErrors:{},isLoading:false,isSubmitting:false,loadingFailed:false,submittingFailed:false};var Gd=300;var Wd=3;var Hd=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={errors:{},lastActiveElementName:null,touchedElements:{},values:{},selectedOptions:{}};Object(s["bindAll"])(a,["onInputBlurred","onInputChanged","onInputFocused","setFirstElementRef","submit","updateErrors"]);a.updateErrors=Object(s["debounce"])(a.updateErrors,Gd);return a}gt()(t,[{key:"componentWillReceiveProps",value:function e(t){var a=!t.isLoading&&this.props.isLoading;if(a){var r=t.elements.reduce(function(e,t){return i()({},e,An()({},t.name,t.value))},{});this.setState(function(){return{values:Object(s["omitBy"])(r,s["isUndefined"])}})}}},{key:"componentDidUpdate",value:function e(t){var a=!this.props.isLoading&&t.isLoading;var r=!this.props.isSubmitting&&t.isSubmitting;if(this.firstElement&&(a||r)){var n=Object(td["findDOMNode"])(this.firstElement);n&&n.focus()}}},{key:"onInputBlurred",value:function e(){this.setState(function(){return{lastActiveElementName:null}})}},{key:"onInputFocused",value:function e(){var t=this;this.setState(function(e){return{errors:xd({elements:t.props.elements,lastActiveElementName:e.lastActiveElementName,touchedElements:e.touchedElements,values:e.values})}})}},{key:"onInputChanged",value:function e(t,a){var r=this;var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n.setTouched,o=void 0===s||s,l=n.selectedOption;this.setState(function(e){var n=t;var s=i()({},e.touchedElements,An()({},t,o));var c=i()({},e.values,An()({},t,a));var u=i()({},e.selectedOptions,An()({},t,l?[l]:void 0));var d=xd({elements:r.props.elements,lastActiveElementName:n,touchedElements:s,values:c});var p={lastActiveElementName:n,touchedElements:s,values:c,selectedOptions:u};return d[t]?p:i()({},p,{errors:d})});this.updateErrors()}},{key:"getElementError",value:function e(t){var a=!this.state.touchedElements[t]&&this.props.serverErrors[t];return a||this.state.errors[t]||null}},{key:"getElementInput",value:function e(t){var a=this.state.selectedOptions;if(a[t.name])return i()({},t,{selected_options:a[t.name]});return t}},{key:"getGeneralError",value:function e(t){return Bd.rt("We had some trouble connecting. <a>Try again?</a>",null,function(e){var a=e.text;return Ye.a.createElement(dn["a"],{onClick:t,type:"button"},a)})}},{key:"getShouldShowSpeedBump",value:function e(t){var a=this.state,r=a.touchedElements,n=a.values;if("go"!==t)return Object(s["some"])(this.props.elements,function(e){var t=e.name,a=e.type;if(!r[t])return false;var i=n[t];if(a===wd.text||a===wd.textarea)return Object(s["get"])(i,"length",0)>=Wd;return!!i});return false}},{key:"setFirstElementRef",value:function e(t){this.firstElement=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"bindArgs",value:function e(t){for(var a=arguments.length,r=Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return t.bind.apply(t,[this].concat(r))}},{key:"updateErrors",value:function e(){var t=this;this.setState(function(e){return{errors:xd({elements:t.props.elements,lastActiveElementName:e.lastActiveElementName,touchedElements:e.touchedElements,values:e.values})}})}},{key:"maybeRenderGeneralError",value:function e(){if(this.props.submittingFailed)return Ye.a.createElement(od,{message:this.getGeneralError(this.props.onSubmitRetried)});return null}},{key:"submit",value:function e(){var t=this;var a=null;var r=this.props.elements.reduce(function(e,t){return i()({},e,An()({},t.name,true))},{});var n=xd({elements:this.props.elements,lastActiveElementName:a,touchedElements:r,values:this.state.values});this.setState(function(){return{errors:n,lastActiveElementName:a,touchedElements:r}});if(!Object(s["isEmpty"])(n)){var o=new Error("Validation failed.");return Promise.reject(o)}return this.props.onSubmit(this.props.id,this.state.values).finally(function(){return t.setState(function(){return{touchedElements:{}}})})}},{key:"renderDialogElements",value:function e(){var t=this;return Ye.a.createElement("form",{onSubmit:function e(t){t.preventDefault()}},this.props.elements.map(function(e,a){return Ye.a.createElement(Ad,{error:t.getElementError(e.name),dialogId:t.props.id,input:t.getElementInput(e),isSubmitting:t.props.isSubmitting,key:e.name,onBlur:t.onInputBlurred,onChange:t.bindArgs(t.onInputChanged,e.name),onFocus:t.onInputFocused,ref:0===a?t.setFirstElementRef:null,value:t.state.values[e.name]})}))}},{key:"render",value:function e(){var t=this.props,a=t.isLoading,r=t.isSubmitting,n=t.loadingFailed,i=t.onLoadRetried;var s=Ds()("p-app_dialog_elements",{"p-app_dialog_elements--empty":a||n},{"p-app_dialog_elements--submitting":r});var o=void 0;o=a?Ye.a.createElement(Ec["a"],{size:"jumbo"}):n?Ye.a.createElement(od,{message:this.getGeneralError(i),align:"center"}):this.renderDialogElements();return Ye.a.createElement("div",{className:s},this.maybeRenderGeneralError(),o)}}]);return t}(ze["Component"]);Hd.displayName="BaseAppDialogElements";Hd.defaultProps=qd;var Vd=Object(Uu["a"])(Hd);var Kd=Vd;var zd={fetcher:Et["b"].func.isRequired,id:Et["b"].string.isRequired,onFetchRejected:Et["b"].func,onFetchResolved:Et["b"].func,onSubmitRetried:Et["b"].func,submitter:Et["b"].func.isRequired};var Yd={onFetchRejected:s["noop"],onFetchResolved:s["noop"],onSubmitRetried:s["noop"]};var Qd=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={errors:{},isLoading:true};Object(s["bindAll"])(a,["onFetchRejected","onFetchResolved","onSubmit","onSubmitRejected","onSubmitResolved","retryLoad","setDialogElementsRef"]);return a}gt()(t,[{key:"componentDidMount",value:function e(){this.state.isLoading&&this.load()}},{key:"onFetchRejected",value:function e(){this.setState(function(){return{isLoading:false,loadingFailed:true}},this.props.onFetchRejected)}},{key:"onFetchResolved",value:function e(t){var a=this;this.setState(function(){return{elements:t.elements,isLoading:false,loadingFailed:false}},function(){a.props.onFetchResolved(t)})}},{key:"onSubmitRejected",value:function e(t){var a=t.data||{};var r={isSubmitting:false};a.error===Ku.invalidSubmission?r.errors=$u(a.dialogErrors):r.submittingFailed=true;this.setState(function(){return r});throw t}},{key:"onSubmitResolved",value:function e(){this.setState(function(){return{errors:{},isSubmitting:false,submittingFailed:false}})}},{key:"onSubmit",value:function e(t,a){this.setState(function(){return{isSubmitting:true}});return this.props.submitter({dialogId:t,submission:a}).then(this.onSubmitResolved).catch(this.onSubmitRejected)}},{key:"getShouldShowSpeedBump",value:function e(t){return"go"!==t&&(!!this.dialogElements&&this.dialogElements.getShouldShowSpeedBump())}},{key:"setDialogElementsRef",value:function e(t){this.dialogElements=t;this.dialogElements&&this.dialogElements.getWrappedInstance&&(this.dialogElements=this.dialogElements.getWrappedInstance())}},{key:"load",value:function e(){this.props.fetcher(this.props.id).then(this.onFetchResolved).catch(this.onFetchRejected)}},{key:"retryLoad",value:function e(){this.setState(function(){return{isLoading:true}},this.load)}},{key:"submit",value:function e(){return this.dialogElements.submit()}},{key:"render",value:function e(){return Ye.a.createElement(Kd,{id:this.props.id,serializationKey:"app-dialog-elements",elements:this.state.elements,serverErrors:this.state.errors,isLoading:this.state.isLoading,isSubmitting:this.state.isSubmitting,loadingFailed:this.state.loadingFailed,onLoadRetried:this.retryLoad,onSubmitRetried:this.props.onSubmitRetried,onSubmit:this.onSubmit,ref:this.setDialogElementsRef,submittingFailed:this.state.submittingFailed})}}]);return t}(ze["Component"]);Qd.displayName="AppDialogElementsContainer";var Jd=function e(t,a){var r=a.fetcher,n=a.submitter;return{fetcher:r||function(e){return t(zu(e))},submitter:n||function(e){return t(Yu(e))}}};Qd.defaultProps=Yd;var Zd=Object(Uu["a"])(Qd);var Xd=Object(Ct["connect"])(null,Jd,null,{withRef:true})(Zd);var $d=Xd;var ep=a(2312);var tp=new jt["b"]("app_dialog");var ap={appId:Et["b"].string.isRequired,app:Et["b"].object,fetcher:Et["b"].func,id:Et["b"].string.isRequired,notifyCancel:Et["b"].func.isRequired,onClose:Et["b"].func,submitLabel:Et["b"].string,submitter:Et["b"].func,title:Et["b"].string.isRequired,clogger:Et["b"].object.isRequired,defaultAppIcon:Et["b"].string.isRequired};var rp={app:{isNonExistent:true},fetcher:null,onClose:s["noop"],submitLabel:tp.t("Submit"),submitter:null};var np=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={goButtonIsDisabled:true,goButtonIsPending:false,shouldNotifyOnCancel:false};Object(s["bindAll"])(a,["getShouldShowSpeedBump","onFetchResolved","onSubmitRejected","onSubmitResolved","onClose","onGo","onKeyPressedCmdEnter","renderTitle","setElementsContainerRef"]);return a}gt()(t,[{key:"componentDidMount",value:function e(){this.track("opened");this.keyCommands=new qu["a"];this.keyCommands.bindAll([{keys:["command+enter"],handler:this.onKeyPressedCmdEnter}])}},{key:"componentWillUnmount",value:function e(){this.keyCommands.reset()}},{key:"onFetchResolved",value:function e(t){var a=t.notifyOnCancel;this.setState(function(){return{goButtonIsDisabled:false,shouldNotifyOnCancel:a}})}},{key:"onSubmitRejected",value:function e(){this.setState(function(){return{goButtonIsPending:false}})}},{key:"onSubmitResolved",value:function e(){this.setState(function(){return{goButtonIsPending:false}},this.props.onClose)}},{key:"onClose",value:function e(){var t=this.props,e=t.onClose,a=t.id,r=t.notifyCancel;var n=this.state.shouldNotifyOnCancel;n&&r(a);this.track("cancelled");Object(s["defer"])(e)}},{key:"onKeyPressedCmdEnter",value:function e(){this.onGo()}},{key:"onGo",value:function e(){this.setState(function(){return{goButtonIsPending:true}});this.elementsContainer.submit().then(this.onSubmitResolved).catch(this.onSubmitRejected)}},{key:"getShouldShowSpeedBump",value:function e(t){return"go"!==t&&(!!this.elementsContainer&&this.elementsContainer.getShouldShowSpeedBump())}},{key:"setElementsContainerRef",value:function e(t){this.elementsContainer=t&&t.getWrappedInstance();this.elementsContainer&&this.elementsContainer.getWrappedInstance&&(this.elementsContainer=this.elementsContainer.getWrappedInstance())}},{key:"track",value:function e(t){var a=this.props,r=a.appId,n=a.id,i=a.clogger;i.track("APP_DIALOG_"+t.toUpperCase(),{app_id:r,dialog_id:n,contexts:{core:{app_id:r}}})}},{key:"renderTitle",value:function e(){var t=this.props,a=t.app,r=t.defaultAppIcon;var n=Object(Xu["a"])(a,72,r);var i=tp.t("Header Icon");return Ye.a.createElement("div",{className:"p-app_dialog__title"},Ye.a.createElement("img",{alt:i,className:"p-app_dialog__title_icon",src:n}),Ye.a.createElement("div",{className:"p-app_dialog__title_text"},this.props.title))}},{key:"render",value:function e(){var t=this.props,a=t.appId,r=t.app;var n="/apps/"+a;var i=void 0;i=Object(fl["b"])(r)?r.name:Object(fl["d"])(r)?Ye.a.createElement(Gu["a"],{type:"unknown"}):Ye.a.createElement(Gu["a"],{type:"non-existent"});var s=tp.rt("Learn more about {appName}",{appName:i});var o=this.props,l=o.fetcher,c=o.id,u=o.submitLabel,d=o.submitter,p=o.title;var h=this.state,v=h.goButtonIsDisabled,m=h.goButtonIsPending;return Ye.a.createElement(Mt["a"],{contentLabel:p,className:"p-app_dialog",footerIcon:"question-circle",footerLink:n,footerText:s,getShouldShowSpeedBump:this.getShouldShowSpeedBump,goButtonIsDisabled:m||v,goButtonIsPending:m,goButtonText:u,goOnEnterPressed:false,onClose:this.onClose,onGo:this.onGo,shouldCloseOnGo:false,title:this.renderTitle()},Ye.a.createElement($d,{fetcher:l,id:c,serializationKey:"app-dialog-elements-container-"+c,onFetchResolved:this.onFetchResolved,onSubmitRetried:this.onGo,ref:this.setElementsContainerRef,submitter:d}))}}]);return t}(ze["Component"]);np.displayName="AppDialog";np.defaultProps=rp;var ip=function e(t,a){var r=a.appId;return{app:Object(Zu["getAppById"])(t,r),defaultAppIcon:Object(Zu["getDefaultAppIcon"])(t),clogger:Object(Pn["a"])({state:t})}};var sp={notifyCancel:Qu};var op=np;var lp=Object(Uu["a"])(np);var cp=Object(Ct["connect"])(ip,sp)(lp);var up=cp;var dp=Object(Qe["b"])("Opens app dialog",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=Ye.a.createElement(up,i()({},a,{serializationKey:"app-dialog",onClose:function t(){return e(Object(Ze["closeModal"])())}}));e(Object(Ze["openModal"])({element:r}))});dp.propTypes={appId:Et["b"].string.isRequired,id:Et["b"].string.isRequired,submitLabel:Et["b"].string,title:Et["b"].string.isRequired};var pp=dp;var hp=a(332);var vp=function e(t,a){var r=t.app_id,n=t.client_token,i=t.dialog_id,s=t.dialog_submit_label,o=t.dialog_title,l=t.timeout_range;if(!hp["a"].check(n))return;var c=hp["a"].getTimeDelta(n),u=c.delta,d=c.nowTs,p=c.tokenTs;Object(Pn["a"])().track(Rn["k"].APP_DIALOG_OPEN_ATTEMPTED,{app_id:r,dialog_id:i,dialog_client_token_ts:p,dialog_ms_event_received_ts:d});if(u>=l)return;a(pp({appId:r,id:i,submitLabel:s,title:o}))};Object(Ja["a"])("dialog_opened",vp);var mp=Object(X["b"])("TS.client.channel_page.handleAppChannelMembershipChange");var fp=Object(X["b"])("TS.client.channel_page.handleAppWildcardChange");var bp=a(295);var gp=a(1056);var _p=a(1364);var yp="app_wildcard_added";var Op="app_wildcard_removed";var kp="app_permission_request";var Ep="app_permission_user_request";var Cp="app_conversation_invite_request";var jp="channel";function wp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_user,a=e.type;var r=arguments[1];var n=arguments[2];var o=n();var l=a===yp;var c=Object(S["a"])(o);var u=Object(Q["a"])(c)&&c;var d=Object(T["u"])(o,u)&&Object(T["d"])(o,u);var p=Object(s["cloneDeep"])(Object(Ai["getCachedMemberCounts"])(o,u));var h=Object(Li["getChannelMembershipInfoForUser"])(o,u,t);var v=Object(P["isPublicChannel"])(d)&&h.isKnown&&l!==h.isMember;r(Object(Li["clearAllMembershipInfoForUser"])(t));r(Object(Ai["clearAllMemberCounts"])());if(v&&p&&p.counts){var m=Object(s["get"])(p,"counts.app_count",0);var f=m+(l?1:-1);p.counts.app_count=f;r(Object(Ai["addOrReplaceMemberCounts"])({channelId:u,countInfo:i()({},p,{should_refetch:true})}))}Ni();r(Object(bp["maybeUpdateAppPermissionsAfterWildcardChange"])({appUserId:t,wildcardEnabled:l}));fp(l)}function Sp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_user,a=e.client_token,r=e.scope_info,n=e.scope_type,i=e.timeout_range,s=e.trigger_id,o=e.type;var l=arguments[1];if(!hp["a"].check(a))return;var c=hp["a"].getTimeDelta(a),u=c.delta;if(u>=i)return;var d={appUserId:t,hasChannelScopes:n===jp,isUserRequest:o===Ep,scopeInfo:r,scopeType:n,triggerId:s};var p=Ye.a.createElement(gp["a"],d);l(Object(Ze["openModal"])({element:p}))}function Ip(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_user,a=e.channel_id,r=e.client_token,n=e.invite_message_ts,i=e.scope_info,s=e.timeout_range;var o=arguments[1];if(!hp["a"].check(r))return;var l=hp["a"].getTimeDelta(r),c=l.delta;if(c>=s)return;o(Object(_p["a"])({appUserId:t,channelId:a,inviteMessageTs:n,referringEventId:"MSG_LINK_CLICKED",scopeInfo:i}))}Object(Ja["a"])(yp,wp);Object(Ja["a"])(Op,wp);Object(Ja["a"])(kp,Sp);Object(Ja["a"])(Ep,Sp);Object(Ja["a"])(Cp,Ip);var Tp=a(846);var Ap=a(800);var Np=a(55);var Pp={view:Et["b"].object.isRequired,containerContext:Et["b"].oneOf(Object(s["values"])(Np["a"])).isRequired,onStateUpdate:Et["b"].func,blockErrors:Et["b"].object};var Rp={onStateUpdate:s["noop"],blockErrors:{}};var Mp=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleStateUpdate=a.handleStateUpdate.bind(a);return a}gt()(t,[{key:"handleStateUpdate",value:function e(t,a){var r={};Object.keys(t).forEach(function(e){r=i()({},r,t[e])});var n={values:r,version:this.props.view.state.version};this.props.onStateUpdate(n,a)}},{key:"render",value:function e(){var t=this.props,a=t.view,r=t.containerContext,n=t.blockErrors;return Ye.a.createElement(Ap["a"],{service:a.service,blocks:a.blocks,errors:n,blocksContainerContext:r,onStateUpdate:this.handleStateUpdate})}}]);return t}(ze["Component"]);Mp.displayName="AppView";Mp.defaultProps=Rp;var Dp=Mp;var xp=a(798);var Fp=a(2314);var Lp=new jt["b"]("app_view_modal");var Bp={viewId:Et["b"].string.isRequired,title:Et["b"].object.isRequired,submitButton:Et["b"].object,closeButton:Et["b"].object,dispatchCloseModal:Et["b"].func.isRequired,dispatchFetchView:Et["b"].func.isRequired,dispatchCloseView:Et["b"].func.isRequired,dispatchSubmitView:Et["b"].func.isRequired,featureAppViewsV1:Et["b"].bool};var Up={featureAppViewsV1:false,submitButton:void 0,closeButton:void 0};var qp=function(e){kt()(t,e);function t(e){ft()(this,t);var a=yt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.viewErrors={};a.state={isLoading:true,loadingFailed:false,errorMsg:"",errors:{},submittingFailed:false,goButtonIsPending:false,viewState:{},view:{}};Object(s["bindAll"])(a,["load","retryLoad","renderTitle","renderViewContents","maybeRenderGeneralError","handleDialogClose","handleDialogGo","handleFetchRejected","handleFetchResolved","handleSubmitRejected","handleSubmitResolved","handleStateUpdate"]);return a}gt()(t,[{key:"componentDidMount",value:function e(){this.state.isLoading&&this.load()}},{key:"getGeneralError",value:function e(t){return this.props.featureAppViewsV1?Lp.rt("We had some trouble connecting. <a>Try again?</a>",null,function(e){var a=e.text;return Ye.a.createElement(St["a"],{onClick:t},a)}):"We had some trouble connecting. Please try again."}},{key:"load",value:function e(){this.props.dispatchFetchView(this.props.viewId).then(this.handleFetchResolved).catch(this.handleFetchRejected)}},{key:"retryLoad",value:function e(){this.setState(function(){return{isLoading:true}},this.load)}},{key:"handleFetchRejected",value:function e(){this.setState(function(){return{isLoading:false,loadingFailed:true}})}},{key:"handleFetchResolved",value:function e(t){this.setState(function(){return{view:t,isLoading:false,loadingFailed:false}})}},{key:"handleDialogClose",value:function e(){this.close()}},{key:"handleDialogGo",value:function e(){this.submit()}},{key:"handleSubmitRejected",value:function e(t){this.setState(function(){return{errorMsg:t.error,errors:t.errors,goButtonIsPending:false,submittingFailed:true}})}},{key:"handleSubmitResolved",value:function e(){this.setState(function(){return{errorMsg:"",errors:{},goButtonIsPending:false,submittingFailed:false}});this.props.dispatchCloseModal();this.close()}},{key:"handleStateUpdate",value:function e(t,a){this.setState(function(){return{viewState:t}});this.viewErrors=a}},{key:"submit",value:function e(){var t=this;if(Object(s["isEmpty"])(this.viewErrors)){this.setState(function(){return{goButtonIsPending:true}});var a=this.state.view;var r=this.state.viewState;this.props.dispatchSubmitView({view:a,viewState:r}).then(this.handleSubmitResolved).catch(this.handleSubmitRejected)}else this.setState(function(){return{errors:t.viewErrors}})}},{key:"close",value:function e(){var t=this.state.view;this.props.dispatchCloseView({view:t})}},{key:"maybeRenderGeneralError",value:function e(){if(this.state.submittingFailed&&this.state.errorMsg!==Tp["a"].validationFailed)return Ye.a.createElement(od,{message:this.getGeneralError(this.submit)});return null}},{key:"renderTitle",value:function e(){var t=this.props.title;return Ye.a.createElement("div",{className:"p-app_dialog__title"},Ye.a.createElement(xp["a"],i()({className:"p-app_dialog__title_text"},t)))}},{key:"renderViewContents",value:function e(){return Ye.a.createElement("div",null,this.maybeRenderGeneralError(),Ye.a.createElement(Dp,{view:this.state.view,containerContext:Np["a"].modal,onStateUpdate:this.handleStateUpdate,blockErrors:this.state.errors}))}},{key:"render",value:function e(){var t=this.state,a=t.isLoading,r=t.loadingFailed,n=t.goButtonIsPending,i=t.view;var s=this.props,o=s.featureAppViewsV1,l=s.title,c=s.closeButton,u=s.submitButton;var d=i.close,p=i.submit;var h=void 0;h=a?Ye.a.createElement(Ec["a"],{size:"jumbo"}):r?Ye.a.createElement(od,{message:this.getGeneralError(this.retryLoad),align:"center"}):this.renderViewContents();var v=c?c.text:"Cancel";var m=u?u.text:"Submit";!c&&o&&(v=Lp.t("Cancel"));!u&&o&&(m=Lp.t("Submit"));return Ye.a.createElement(Mt["a"],{className:"p-app_view_modal",title:this.renderTitle(),titleAria:l.text,showGoButton:true,goButtonText:a?m:p.text,goButtonIsPending:n,goOnEnterPressed:false,onGo:this.handleDialogGo,shouldCloseOnGo:false,showCancelButton:true,cancelText:a?v:d.text,onClose:this.handleDialogClose},h)}}]);return t}(ze["Component"]);qp.displayName="AppViewModal";var Gp=function e(t){return{featureAppViewsV1:Object(j["isFeatureEnabled"])(t,"feature_app_views_v1")}};var Wp=function e(t){return{dispatchCloseModal:function e(a){return t(Object(Ze["closeModal"])(a))},dispatchFetchView:function e(a){return t(Object(Tp["c"])(a))},dispatchCloseView:function e(a){return t(Object(Tp["b"])(a))},dispatchSubmitView:function e(a){return t(Object(Tp["d"])(a))}}};qp.defaultProps=Up;var Hp=Object(Ct["connect"])(Gp,Wp)(qp);var Vp=Object(Qe["b"])("Open an app view in a modal",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.viewId,n=a.title,i=a.submitButton,s=a.closeButton;var o=Ye.a.createElement(Hp,{viewId:r,title:n,submitButton:i,closeButton:s});e(Object(Ze["openModal"])({element:o}))});Vp.propTypes={viewId:Et["b"].string.isRequired};var Kp=Vp;function zp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.view_id,a=e.view_type,r=e.client_token,n=e.timeout_range,i=e.title,s=e.submit,o=e.close;var l=arguments[1];var c=arguments[2];var u=c();if(!Object(j["isFeatureEnabled"])(u,"feature_app_views_v1"))return;if(!hp["a"].check(r))return;var d=hp["a"].getTimeDelta(r),p=d.delta;if(p>=n)return;"modal"===a&&l(Kp({viewId:t,title:i,submitButton:s,closeButton:o}))}Object(Ja["a"])("view_opened",zp);var Yp=a(363);function Qp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app;var a=arguments[1];t&&a(Object(Zu["bulkUpsertAppsAndMarkAsFresh"])([t]))}function Jp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app_id;var a=arguments[1];var r=arguments[2];Zp(t,a);Xp(t,a,r)}function Zp(e,t){e&&t(Object(Zu["bulkRmApps"])([e]))}function Xp(e,t){t(Object(Yp["markAsStaleByAppId"])(e))}Object(Ja["a"])("apps_installed",Qp);Object(Ja["a"])("apps_changed",Qp);Object(Ja["a"])("apps_uninstalled",Jp);var $p=Object(Hn["a"])("Runs a benchmark on a RTM event",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.method,n=a.identifier,i=a.loadtest,o=a.args;return e(Object(Vn["a"])({method:"api.benchmark",args:{m:r,id:n,lt:i,a:o}})).catch(s["noop"])});$p.propTypes={method:Et["b"].string,identifier:Et["b"].string,loadtest:Et["b"].any,args:Et["b"].any};function eh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments[1];var a=e.m,r=e.pct,n=e.lt,i=e.a,s=e.id;Math.floor(100*Math.random())<r&&t($p({method:a,loadtest:n,args:i,id:s}))}Object(Ja["a"])("benchmark",eh);var th=a(199);function ah(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bot;var a=arguments[1];var r=arguments[2];rh({bot:t},a);nh(t,a,r)}function rh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bot;var a=arguments[1];a(Object(th["upsertBot"])(t))}function nh(e,t){t(Object(Yp["markAsStaleByServiceIds"])([e.id]))}Object(Ja["a"])("bot_added",rh);Object(Ja["a"])("bot_changed",ah);var ih=a(2316);var sh=a(1473);var oh=a(397);var lh=a(257);var ch=a(902);var uh=a(472);var dh=a(338);var ph="CHANNEL-STATUS";function hh(e){var t={};Object(s["has"])(e,"is_moved")&&(t.isMoved=true===e.is_moved);Object(s["has"])(e,"is_frozen")&&(t.isFrozen=true===e.is_frozen);return t}function vh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments[1];var a=arguments[2];var r=e.channel;var n=a();var s=Object(T["u"])(n,r)&&Object(T["d"])(n,r);if(!s){Object(ae["a"])({getState:a}).warn("Received archive event for an unknown channel: "+r);return}if(Object(P["isArchived"])(s))return;Object(ae["a"])({getState:a}).info(ph,"Archived channel "+r);var o=void 0;if(Object(P["isPublicChannel"])(s)){var l=Object(N["b"])(n);o=!Object(Pi["isRestricted"])(l)&&Object(P["isMemberOfChannel"])(s)}else Object(P["isPrivateChannel"])(s)&&(o=!!Object(P["isOpen"])(s));var c={id:r,wasArchivedThisSession:o};var u=hh(e);t(Object(de["b"])(i()({},c,u)))}function mh(e,t,a){var r=a();var n=Object(De["c"])(r);var i=Object(ae["a"])({teamId:n,label:ph});var s=e?e.channel:null;if(!s||!s.id){i.warn("Received a backfill with no channel ID: "+JSON.stringify(e));return}i.info("Channel "+s.id+" known to have changed; marking as stale so it will be refetched when needed");Object(oh["d"])(n,[s.id]);t(Object(Li["clearChannelMembershipInfo"])(s.id));t(Object(Ai["clearMemberCounts"])(s.id))}function fh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var a=arguments[1];var r=arguments[2];if(Object(P["isIm"])(t)){a(Object(Wi["a"])({channel:t}));Object(dh["d"])();a(Object(de["B"])({id:t.id,opened_this_session:true}));return}if(Object(Pi["isRestricted"])(Object(N["b"])(r())))return;Object(ae["a"])({getState:r}).info(ph,"Created channel "+t.id);var n=a(Object(Wi["a"])({channel:t}));Object(ti["d"])(n)}var bh=function(){var e=Object(sr["method"])(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.user;var r=arguments[1];r(Object(sh["a"])({channel:t,user:a}))});return function t(a,r){return e.apply(this,arguments)}}();function gh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.converted_to;var r=arguments[1];var n=arguments[2];var i=n();var s=Object(T["u"])(i,t)&&Object(T["d"])(i,t);if(!s){Object(ae["a"])({getState:n}).error("Unknown channel "+t);return}r(Object(de["B"])({id:t,is_open:false}));var o=void 0;if(a){r(Object(de["B"])({id:t,latest:null}));o=a}if(t===Object(S["a"])(n())){var l=Object(j["isClientApp"])(n());if(Object(b["a"])()||l&&o){o=o||Object(as["a"])(n());r(Object(ji["a"])({id:o}))}else l&&Object(Oe["a"])()}Object(P["isIm"])(s)&&Object(uh["a"])(Object(T["d"])(n(),t))}function _h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var a=arguments[1];var r=arguments[2];var n=r();var i=Object(T["u"])(n,t)&&Object(T["d"])(n,t);if(!i){Object(ae["a"])({getState:r}).warn("Received deleted event for an unknown channel: "+t);return}Object(ae["a"])({getState:r}).info(ph,"Deleted channel "+t);a(Object(g["d"])({ids:[t]}))}function yh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var a=arguments[1];var r=arguments[2];var n=r();var i=Object(T["u"])(n,t)&&Object(T["d"])(n,t,false);var s=Object(ae["a"])({getState:r,label:ph});if(!i){s.warn("Received im_deleted event for an unknown im "+t+", ignoring");return}if(!Object(P["isIm"])(i)){s.warn("Received im_deleted event for a non-im channel "+t+", ignoring");return}var o=Object(P["getMemberIdFromIm"])(i);var l=Object(N["d"])(n,o,false);if(!l||Object(Pi["isUnknownOrNonExistent"])(l))s.warn("Received im_deleted event for im ("+t+") with non-existent or unknown member ("+o+"), ignoring.");else{Object(ae["a"])({getState:r}).info("Received im_deleted event for im ("+t+") with member ("+o+"), removing member ("+o+").");a(Object(A["a"])([l]))}Object(ae["a"])({getState:r}).info("Received im_deleted event for im ("+t+") with member ("+o+"), removing channel ("+t+").");a(Object(g["d"])({ids:[t]}))}function Oh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var a=arguments[1];var r=arguments[2];Object(ae["a"])({getState:r}).info(ph,"You joined channel "+t.id);var n=r();if((Object(P["isMpim"])(t)||Object(P["isPrivateChannel"])(t))&&!Object(P["isExternallySharedChannel"])(t)){var s=Object(T["u"])(n,t.id)&&Object(T["d"])(n,t.id);s&&Object(ae["a"])({getState:r}).warn("Received join event for an mpim or group we already know about ("+t.id+"); ignoring it.")}var o=i()({},t,{is_member:true});var l=a(Object(Wi["a"])({channel:o}));a(Object(g["b"])(l));if(Object(N["l"])(n)){var c=Object(N["b"])(n);a(Object(A["f"])([c]))}}function kh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var a=arguments[1];var r=arguments[2];Object(ae["a"])({getState:r}).info(ph,"You left channel "+t);var n=r();var i=Object(T["u"])(n,t)&&Object(T["d"])(n,t);if(!i){Object(ti["q"])(t)||Object(ae["a"])({getState:r}).warn("Received left event for a channel we don't know about ("+t+"); ignoring it.");return}a(Object(de["p"])(i));var s=Object(N["l"])(n);(Object(P["isPrivateChannel"])(i)||s)&&a(Object(g["d"])({ids:[i.id]}));if(s){var o=Object(N["b"])(n);a(Object(A["f"])([o]))}}function Eh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel;var a=arguments[1];var r=arguments[2];var n=r();var i=Object(T["u"])(n,t.id)&&Object(T["d"])(n,t.id);if(!i){Object(ae["a"])({getState:r}).warn("Received rename event for an unknown channel: "+t.id);return}Object(ae["a"])({getState:r}).info(ph,"Renamed channel "+t.id);a(Object(de["t"])({id:t.id,name:t.name,name_normalized:t.name_normalized,_name_lc:t.name.toLowerCase()}))}function Ch(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.user,r=e.ts,n=e.purpose;var i=arguments[1];var s=arguments[2];var o=s();var l=Object(T["u"])(o,t)&&Object(T["d"])(o,t);if(!l){Object(ae["a"])({getState:s}).warn("Received channel purpose change event for an unknown channel: "+t);return}Object(ae["a"])({getState:s}).info(ph,a+" changed purpose for channel "+t);var c={creator:a,last_set:r,value:n};i(Object(de["v"])({id:t,purpose:c}))}function jh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments[1];var a=arguments[2];var r=e.channel;var n=a();var s=Object(T["u"])(n,r)&&Object(T["d"])(n,r);if(!s){Object(ae["a"])({getState:a}).warn("Received unarchive event for an unknown channel: "+r);return}if(!Object(P["isArchived"])(s)||Object(j["isFeatureEnabled"])(n,"feature_esc_disconnect_v2_client")&&Object(P["isFrozen"])(s))return;Object(ae["a"])({getState:a}).info(ph,"Unarchived channel "+r);Object(P["isPublicChannel"])(s)&&s.was_archived_this_session&&t(Object(de["o"])({channelId:r,inBackground:true}));var o={id:r};var l=hh(e);t(Object(de["A"])(i()({},o,l)))}function wh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.user,r=e.ts,n=e.topic;var i=arguments[1];var s=arguments[2];var o=s();var l=Object(T["u"])(o,t)&&Object(T["d"])(o,t);if(!l){Object(ae["a"])({getState:s}).warn("Received topic change event for an unknown channel: "+t);return}Object(ae["a"])({getState:s}).info(ph,a+" changed topic for "+t);var c={creator:a,last_set:r,value:n};i(Object(de["w"])({id:t,topic:c}))}function Sh(e,t,a){var r=e.channel,n=e.ts,i=e.type;var s=a();var o=Object(T["u"])(s,r)&&Object(T["d"])(s,r);if("group_marked"===i&&Object(P["isMpim"])(o))return;if(!o)return;t(Object(ch["d"])({id:r,ts:n}))}function Ih(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.channels,r=e.updates;var n=arguments[1];var o=arguments[2];var l=[];a?l=a:t&&(l=[t]);var c=Object(ae["a"])({getState:o,label:ph});if(!l||!l.length){c.warn("Received channel_updated without a channel, ignoring.");return}l.forEach(function(e){var t=false;var a=Object(T["d"])(o(),e,t);if(!a){c.info("Received channel_updated on missing channel: "+e+", ignoring.");return}if(!r||!Object(s["isObject"])(r)){c.warn("Received channel_updated with no updates for channel: "+e+", ignoring.");return}if(Object(s["has"])(r,"is_archived")){var l=i()({channel:e},r);r.is_archived?vh(l,n,o):jh(l,n,o)}c.info("Received channel_updated for "+e);n(Object(de["n"])({channel:i()({},r,{id:e})}))})}function Th(e,t,a){var r=Object(ae["a"])({getState:a,label:ph});var n=e&&e.channel&&e.channel.id;if(!n){r.warn("Received channel_converted_to_shared without a channel, ignoring.");return}var i=a();var s=Object(T["u"])(i,n)&&Object(T["d"])(a(),n);if(!s){r.info("Received channel_converted_to_shared on missing channel: "+n+", ignoring.");return}if(!Object(P["isOrgShared"])(e.channel)&&!Object(P["isOrgGlobalSharedPublicOrPrivateChannel"])(e.channel)){r.warn("Received channel_converted_to_shared for a non-org-shared, non-global-shared channel: "+n+", ignoring.");return}r.info("Received channel_converted_to_shared for "+n);t(Object(de["i"])({channel:e.channel}))}function Ah(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t=arguments[1];var a=arguments[2];var r=e.group,n=Rs()(e,["group"]);var s=Object(ae["a"])({getState:a,label:ph});if(!r){s.warn("Received group_converted_to_shared without a group, ignoring.");return}var o=i()({},n,{channel:r});Th(o,t,a)}function Nh(e,t,a){var r=e&&e.type;var n=e&&e.channel;if(!n){Object(ae["a"])({getState:a}).warn("Received "+r+" without a 'channel' id.");return}var i=a();var s=Object(T["u"])(i,n)&&Object(T["d"])(i,n);if(!s){Object(ae["a"])({getState:a}).warn("Received "+r+" for an unknown channel: "+n);return}t(Object(pe["removeAllTimestamps"])({channelId:n,includeThreads:Object(j["isFeatureEnabled"])(i,"feature_react_threads")}))}function Ph(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.is_global_shared,r=e.teams,n=e.type;var i=arguments[1];var o=arguments[2];var l=o();var c=Object(ae["a"])({getState:o,label:ph});if(!n){c.warn("Received teams_*_shared_channel without a type, ignoring.");return}if(!Object(lh["c"])(l)){c.warn("Received "+n+" on a non-enterprise, ignoring.");return}if(!t){c.warn("Received "+n+" without a channel, ignoring.");return}var u=false;var d=Object(T["d"])(o(),t,u);if(!d){c.info("Received "+n+" on missing channel: "+t+", ignoring.");return}if(!Object(P["isOrgShared"])(d)){c.warn("Received "+n+" on non-org shared channel: "+t+", ignoring.");return}c.info("Received "+n+" for "+t);var p=Object(De["c"])(l);if("teams_left_shared_channel"===n&&r.indexOf(p)<0){c.info("Handling "+n+", current team ("+p+") was removed from "+t+", removing channel from store.");i(Object(g["d"])({ids:[t]}));return}var h=r;var v=r;if("teams_joined_shared_channel"===n)if(a)h=[];else{var f=Object(P["getInternalTeamIds"])(l,d)||[];v=Object(s["uniq"])([].concat(m()(v),m()(f)));h=Object(s["uniq"])(h.concat(f))}i(Object(de["C"])({channelId:t,orgWide:a,teamIds:h,internalTeamIds:v}))}var Rh={};Object.defineProperty(Rh,"channelArchived",{get:function e(){return vh},set:function e(t){vh=t}});Object.defineProperty(Rh,"channelUnarchived",{get:function e(){return jh},set:function e(t){jh=t}});Object(Ja["a"])("channel_archive",vh);Object(Ja["a"])("channel_changed",mh);Object(Ja["a"])("channel_created",fh);Object(Ja["a"])("channel_deleted",_h);Object(Ja["a"])("channel_joined",Oh);Object(Ja["a"])("channel_left",kh);Object(Ja["a"])("channel_rename",Eh);Object(Ja["a"])("channel_unarchive",jh);Object(Ja["a"])("channel_updated",Ih);Object(Ja["a"])("group_archive",vh);Object(Ja["a"])("group_deleted",_h);Object(Ja["a"])("group_joined",Oh);Object(Ja["a"])("group_left",kh);Object(Ja["a"])("group_rename",Eh);Object(Ja["a"])("group_unarchive",jh);Object(Ja["a"])("mpim_joined",Oh);Object(Ja["a"])("mpim_open",bh);Object(Ja["a"])("im_created",fh);Object(Ja["a"])("im_open",bh);Object(Ja["a"])("im_deleted",yh);Object(Ja["a"])("mpim_close",gh);Object(Ja["a"])("im_close",gh);Object(Ja["a"])("channel_marked",Sh);Object(Ja["a"])("group_marked",Sh);Object(Ja["a"])("mpim_marked",Sh);Object(Ja["a"])("im_marked",Sh);Object(Ja["a"])("channel_converted_to_shared",Th);Object(Ja["a"])("group_converted_to_shared",Ah);Object(Ja["a"])("teams_joined_shared_channel",Ph);Object(Ja["a"])("teams_left_shared_channel",Ph);Object(Ja["a"])("channel_history_changed",Nh);Object(Ja["a"])("im_history_changed",Nh);Object(Ja["a"])("mpim_history_changed",Nh);Object(Ja["a"])("group_history_changed",Nh);var Mh=a(851);var Dh=a(1324);var xh=void 0;function Fh(e){xh||(xh=Object(s["throttle"])(function(){return e(Object(Dh["b"])({resetPreviousCommands:true}))},1e3,{leading:false,trailing:true}));return xh}function Lh(e,t){var a=e.commands_removed,r=e.commands_updated,n=e.commands_cache_ts;if(a||r){Object(s["forEach"])(a,function(e){return t(Object(Mh["b"])({commandName:e.name}))});t(Object(Mh["a"])({commands:r,cacheTs:n}))}else Fh(t)()}Object(Ja["a"])("commands_changed",Lh);var Bh="DND";function Uh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dnd_status,a=e.type,r=e.user;var n=arguments[1];var i=arguments[2];var s=i();if(!Object(j["isFeatureEnabled"])(s,"feature_sonic_dnd_rtm")&&!Object(b["a"])())return;if(!Object(ar["getDndScheduleByMemberId"])(s,r))return;Object(ae["a"])({getState:i}).info(Bh,"Received a "+a+" event for the current member ("+r+") with updated DND times");var o=t.next_dnd_start_ts,l=t.next_dnd_end_ts,c=t.snooze_enabled,u=t.snooze_endtime;n(Object(rr["d"])({nextDndStartTs:o,nextDndEndTs:l,snoozeEnabled:c,snoozeEndTs:u}));n(Object(rr["a"])({fetchDndTimes:false}))}function qh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dnd_status,a=e.type,r=e.user;var n=arguments[1];var i=arguments[2];var s=i();if(!Object(j["isFeatureEnabled"])(s,"feature_sonic_dnd_rtm")&&!Object(b["a"])())return;if(r===Object(j["getCurrentUserId"])(s))return;if(!Object(ar["getDndScheduleByMemberId"])(s,r))return;Object(ae["a"])({getState:i}).info(Bh,"Received a "+a+" event for the following member with updated DND times: "+r);var o=t.next_dnd_start_ts,l=t.next_dnd_end_ts;n(Object(ar["updateDndSchedule"])({memberId:r,nextDndStartTs:o,nextDndEndTs:l}));n(Object(rr["a"])({fetchDndTimes:false}))}Object(Ja["a"])("dnd_updated",Uh);Object(Ja["a"])("dnd_updated_user",qh);var Gh=a(717);var Wh=a(1099);var Hh=a(158);var Vh=function e(t,a,r){if(!t)return;var n=r();var i=Object(j["isFeatureEnabled"])(n,"feature_sonic_emoji");if(!i)return;var s=t.name,o=t.names,l=t.subtype,c=t.value,u=t.old_name,d=t.new_name,p=t.event_ts;var h=Object(De["c"])(n);var v=Object(ae["a"])({teamId:h});if(!p){v.warn("RTM","emoji_changed: missing event_ts");return}if("add"===l){if(s&&c){var m=Object(Hh["i"])(An()({},s,c)),f=m.emojis,b=m.aliases;a(Object(Wh["bulkAddCustomEmoji"])({teamId:h,cacheTs:p,emojis:f,aliases:b}))}else v.warn("RTM",'emoji_changed: "add" subtype missing "name" or "value"');return}if("remove"===l){Array.isArray(o)?a(Object(Gh["bulkRemoveCustomEmoji"])({teamId:h,cacheTs:p,names:o})):v.warn("RTM",'emoji_changed: "remove" subtype missing "names"');return}if("rename"===l){u&&d?a(Object(Gh["renameCustomEmoji"])({teamId:h,cacheTs:p,prevName:u,nextName:d})):v.warn("RTM",'emoji_changed: "rename" subtype missing "old_name" or "new_name"');return}v.warn("RTM","emoji_changed: unknown or missing subtype")};Object(Ja["a"])("emoji_changed",Vh);var Kh={handleEmojiChanged:Vh};var zh=new jt["b"]("files");function Yh(e,t,a){if(Va["isDesktop"]){var r=a();var n=Object(j["isFeatureEnabled"])(r,"feature_email_notify");if(!n)return;var i=e.file_id;if(!i)return;var o=Object(Fr["getFileById"])(r,i);var l=Object(De["c"])(r);var c=Object(T["i"])(r,Object(N["b"])(r).id);if(!c)return;var u=Object(s["includes"])(e.channels,c.id);var d=Object(T["d"])(r,Object(s["head"])(e.channels));if(!d){Object(ae["b"])().warn("invalid channel in email_shared RTM");return}var p={title:zh.t("Shared with {channel_name}",{channel_name:Object(P["getDisplayNameForChannel"])(r,d,{imIncludeAtSign:false})}),content:o.subject||zh.t("(No Subject)"),channel:"launch_uri",thread_ts:u?"slack://share-file?id="+i+"&team="+l:"slack://channel?team="+l+"&id="+d.id};u&&(p.subtitle=zh.t("Click to Share"));Object(Va["notify"])(p)}}Object(Ja["a"])("email_shared",Yh);var Qh=a(1104);function Jh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;Object(Qh["d"])(t);Object(Qh["e"])(t)}Object(Ja["a"])("enterprise_rename",Jh);var Zh=a(479);var Xh=a(1198);var $h=a(473);function ev(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.file_id;var a=arguments[1];var r=arguments[2];if(!t)return;var n=r();if(!Object(Fr["hasFileWithId"])(n,t))return;var i=Object(De["c"])(n);if(!Object(Fr["isObjectFresh"])(i,t))return;var s=Object(Fr["getFileById"])(n,t);Object(Zh["q"])(i,[t]);Object(Ur["d"])(s);Object($h["a"])()&&n.docs&&n.docs[t]&&a(Object(Xh["noopAction"])())}function tv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.file_id,a=e.file_ids;var r=arguments[1];var n=arguments[2];var i=a||[t];Object(s["compact"])(i).forEach(function(e){if(Object(b["a"])()){var t=false;var a=Object(Fr["getFileById"])(n(),e,t);a&&r(Object(Fr["tombstoneFile"])({fileId:e}))}else Object(Ur["n"])(e)})}function av(e,t,a){var r=Object(j["isFeatureEnabled"])(a(),"feature_file_comment_deleted_rtm_handler");if(!r)return;var n=e.file_id,i=e.comment;null!==Object(Zh["j"])(a(),n,i)&&t(Object(Zh["r"])({fileId:n,commentId:i}))}Object(Ja["a"])("file_created",ev);Object(Ja["a"])("file_public",ev);Object(Ja["a"])("file_private",ev);Object(Ja["a"])("file_change",ev);Object(Ja["a"])("file_shared",ev);Object(Ja["a"])("file_unshared",ev);Object(Ja["a"])("file_deleted",tv);Object(Ja["a"])("file_comment_deleted",av);var rv=a(447);function nv(e,t,a){var r=a();if(!Object(j["isFeatureEnabled"])(r,"feature_grapevine_members"))return;var n=Object(De["c"])(r);var i=e.json;i=void 0===i?{}:i;var s=i.key,o=void 0===s?"":s;o&&Object(rv["c"])(n,[o])}Object(Ja["a"])("grapevine",nv);var iv=a(1094);function sv(e,t,a){if(!Object(Ce["a"])()&&"client"!==Object(j["getFromBootData"])(a(),"app"))return;Object(iv["b"])()}Object(Ja["a"])("shared_invite_code_created",sv);Object(Ja["a"])("shared_invite_code_disabled",sv);var ov=Object(X["b"])("TS.help.onIssueChange");function lv(e){ov(e.issue)}Object(Ja["a"])("issue_change",lv);var cv=Object(X["b"])("TS.lessons.channel_created_sig.dispatch");var uv=Object(X["b"])("TS.lessons.file_uploaded_sig.dispatch");var dv=Object(X["b"])("TS.lessons.lesson_assigned_sig.dispatch");var pv=Object(X["b"])("TS.lessons.message_sent_sig.dispatch");function hv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=t.user_lessons;dv(a)}function vv(e,t,a){var r=e.user_event;switch(e.user_event){case"channel_created":cv(e);break;case"message_sent":pv(e);break;case"file_share":uv(e);break;default:Object(ae["a"])({getState:a}).info("Received lesson_user_action event with an user_event value of '"+r+"'; ignoring it")}}Object(Ja["a"])("lesson_assigned",hv);Object(Ja["a"])("lesson_user_action",vv);var mv=a(1083);var fv=a(712);var bv=a(1170);var gv=a(452);var _v=a(68);function yv(e,t,a){var r=e.user,n=e.channel,i=e.inviter;var s=a();var o=Object(N["m"])(s,r)&&Object(N["d"])(s,r);var l=Object(T["u"])(s,n)&&Object(T["d"])(s,n);var c=Object(j["getCurrentUserId"])(s);var u=Object(N["b"])(s);var d=true;var p=Object(ae["a"])({state:s});var h=t(Object(Li["setChannelMembershipInfoForUsers"])({channelId:n,membershipInfo:An()({},r,d)}));if(h){t(Object(Ai["updateAndInvalidateMemberCounts"])({channelId:n}));t(Object(bp["maybeUpdateAppPermissionsAfterChannelAdd"])({appUserId:r,channelId:n}));(Object(j["isFeatureEnabled"])(s,"feature_bots_not_members")?Object(Pi["isAppOrBot"])(o):Object(Pi["isAppUser"])(o))&&(Object(j["isFeatureEnabled"])(s,"feature_m11n_channel_details")?t(Object(mv["markAppsInChannelAsStale"])(n)):mp(l))}if(l&&!Object(P["isIm"])(l)&&!Object(P["isMpim"])(l)){if(!Object(P["isMemberOfChannel"])(l)){p.info(r+" joined channel "+n+" but we are not a member; ignoring");return}p.info(r+" joined channel "+n);i&&r===c&&t(Object(bv["addInviter"])({channelId:n,inviter:i}));if(h){(Object(Pi["isExternal"])(o)||Object(Pi["isRestricted"])(u))&&Object(Pi["isStranger"])(o)&&t(Object(A["g"])(o));Object(ti["g"])(l,r)}}}function Ov(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user,a=e.channel;var r=arguments[1];var n=arguments[2];var i=n();var s=Object(N["m"])(i,t)&&Object(N["d"])(i,t);var o=Object(T["u"])(i,a)&&Object(T["d"])(i,a);var l=false;var c=Object(ae["a"])({state:i});var u=r(Object(Li["setChannelMembershipInfoForUsers"])({channelId:a,membershipInfo:An()({},t,l)}));if(u){r(Object(Ai["updateAndInvalidateMemberCounts"])({channelId:a}));r(Object(bp["maybeUpdateAppPermissionsAfterChannelRemove"])({appUserId:t,channelId:a}));(Object(j["isFeatureEnabled"])(i,"feature_bots_not_members")?Object(Pi["isAppOrBot"])(s):Object(Pi["isAppUser"])(s))&&(Object(j["isFeatureEnabled"])(i,"feature_m11n_channel_details")?r(Object(mv["removeAppsInChannelUserId"])({channelId:a,userId:t})):mp(o))}if(o&&!Object(P["isIm"])(o)&&!Object(P["isMpim"])(o)){if(!Object(P["isMemberOfChannel"])(o)){c.info(t+" left channel "+a+" but we are not a member; ignoring");return}c.info(t+" left channel "+a);if(u){var d=Object(N["b"])(i);!Object(Pi["isExternal"])(s)&&!Object(Pi["isRestricted"])(d)||Object(Pi["isStranger"])(s)||r(Object(A["g"])(s));Object(ti["h"])(o,t)}}}function kv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user;var a=arguments[1];var r=arguments[2];if(!t)return;var n=r();var i=Object(N["m"])(n,t.id)&&Object(N["d"])(n,t.id);if(!i)return;if(!Object(j["isFeatureEnabled"])(n,"feature_degraded_send")&&i.id===Object(j["getCurrentUserId"])(n)&&t.profile&&!t.profile.email&&!Object(_v["a"])(n,"display_email_addresses")){var s=i.profile&&i.profile.email;if(s){Object(ae["a"])({state:n}).info("user_change: email hidden via team pref. appending email from model for local user, so it is not lost in upsert.");t.profile.email=s}}Object(b["a"])()?a(Object(fv["a"])({members:[t]})):Object(dh["f"])(t)}function Ev(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.user,a=e.channel;var r=arguments[1];var n=arguments[2];var i=n();var s=Object(N["m"])(i,t)&&Object(N["d"])(i,t);if(!s){Object(ae["a"])({state:i}).info("user_typing event from user ("+t+") not in model; ignoring");return}var o=Object(T["u"])(i,a)&&Object(T["d"])(i,a);if(!o){Object(ae["a"])({state:i}).error("user_typing event for channel ("+a+") not in model; ignoring");return}r(Object(gv["memberStartedTyping"])({channelId:a,memberId:t}))}Object(Ja["a"])("member_joined_channel",yv);Object(Ja["a"])("member_left_channel",Ov);Object(Ja["a"])("user_change",kv);Object(Ja["a"])("user_typing",Ev);var Cv=a(1277);var jv=a(505);var wv=a(863);var Sv=a(41);var Iv=a(1288);var Tv=a(1289);var Av=a(351);var Nv=a(361);var Pv=a(385);var Rv=a(274);var Mv=Object(Qe["b"])("If all threads is open, maybe update it after a new message arrives",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs;var i=Object(Vi["getThreadKey"])(r,n);var o=Object(ae["a"])({getState:t,label:"MAYBE-ALL-THREADS"});if(!Object(j["isClientApp"])(t()))return Promise.resolve();var l=Object(S["a"])(t());var c=Object(H["h"])(t())||!Object(H["e"])(t());if(l!==Rv["a"].allThreads||!c)return Promise.resolve();return e(Object(Av["promiseToGetSubscribed"])({channelId:r,threadTs:n})).then(function(a){if(!a)return Promise.resolve();o.info("Incrementing new reply count with "+i);e(Object(Nv["incrementTotalUnreadReplies"])());var l=Object(Nv["getThreads"])(t());var c=Object(s["some"])(l,{threadKey:i});if(c)return Promise.resolve();return e(Object(Pv["requestReplies"])({channelId:r,threadTs:n,limit:5})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.msgs;if(!a||!a.length)return;var r=Object(s["last"])(a).ts;var n={threadKey:i,sortTs:r,hasUnreads:true};o.info("Prepending "+i);e(Object(Nv["prependThread"])({thread:n}))})})});Mv.propTypes={channelId:Et["b"].string,threadTs:Et["b"].string};var Dv=Mv;var xv=a(359);var Fv=a(794);var Lv=Object(Qe["b"])("Fetch a specific activity mention item by timestamp if the activity flexpane is open",function(e,t,a){var r=t();var n=Object(H["g"])(r);if("activity"!==n)return Promise.resolve();return e(Object(Fv["fetchActivityByMessageTs"])(a))});Lv.propTypes={channelId:Et["b"].string.isRequired,messageTs:Et["b"].string.isRequired};var Bv=Lv;var Uv=a(268);var qv=a(573);var Gv=a(239);var Wv=a(162);var Hv=a(901);var Vv=new Set;function Kv(e,t,a){var r=a();if(!Object(j["isClientApp"])(r))return null;var n=Object(T["u"])(r,e.channel)&&Object(T["d"])(r,e.channel);var i=Yv(e);var s=void 0;s=Object(P["isMemberOfChannel"])(n)?"desktop_notification"===e.type?Object(Gv["p"])(r,e):Object(P["isIm"])(n)?Object(Gv["q"])(r,e,n):Object(Gv["o"])(r,e,n):Wv["a"].NOT_A_MEMBER;s===Wv["a"].NONE&&Vv.has(i)&&(s=Wv["a"].ALREADY_SHOWN);if(s!==Wv["a"].NONE){var o=Object(Wv["b"])(s,n&&n.id,e.ts);if(o){Object(ae["a"])({getState:a}).warn("Notification ("+e.type+") suppressed because:\n"+o);Qv(r,{channel:n.id,timestamp:e.ts||e.msg,description:o})}}else{t(Object(Hv["d"])({message:e,modelObject:n,options:"desktop_notification"===e.type?{skip_formatting:true,launch_uri:e.launchUri,image_uri:e.imageUri,avatar_image:e.avatarImage}:{}}));Vv.add(i);Qv(r,{channel:n.id,timestamp:e.ts||e.msg,description:"Notification shown"})}return s}function zv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.timestamp;var r=arguments[1];var n=arguments[2];var s=n();var o=Object(fe["a"])(s,t,a);if(!o)return;if(o._ignore_dnd)return;r(Object(Hi["a"])([i()({},o,{_ignore_dnd:true})]));var l=Object(fe["a"])(n(),t,a);Kv(l,r,n)}function Yv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel,a=e.msg,r=e.ts;return t&&(r||a)?t+":"+(r||a):Date.now().toString()}function Qv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channel,r=t.timestamp,n=t.description;var i={channel:a,msg_ts:r,desc:n};Object.keys(i).forEach(function(t){Object(vt["b"])({state:e}).recordMetric(t,i[t])})}Object(Ja["a"])("desktop_notification",Kv);Object(Ja["a"])("dnd_override",zv);var Jv={};Object.defineProperty(Jv,"beaconNotification",{get:function e(){return Qv},set:function e(t){Qv=t}});var Zv=a(293);var Xv=a(326);var $v="RTM-THREADS";var em=function e(t,a,r){var n=r();var i=t.channel,s=t.message;var l=Object(T["u"])(n,i)&&Object(T["d"])(n,i);var c=Object(fe["a"])(n,i,s.ts);var u=void 0;s&&s.latest_reply?u=s.latest_reply:s&&s.replies&&s.replies.length&&(u=o.a.maxBy(s.replies,"ts").ts);if(c&&c.reply_count){var d=void 0;c&&c.latest_reply?d=c.latest_reply:c&&c.replies&&c.replies.length&&(d=o.a.maxBy(c.replies,"ts").ts);if(u<d){Object(ae["a"])({getState:r}).info($v,"Not processing an older message_replied event, "+u+" < "+d+", in "+i);return}}Object(Uv["k"])(t);var p=a(Object(Zv["a"])({imsgs:[s],channelId:i}));a(Object(Hi["a"])(p));Object(Uv["m"])(l,s,true,false)};function tm(e,t,a){var r=e.subscription||{},n=r.channel,i=r.thread_ts,s=r.last_read;if(!n||!i)return;Object(ae["a"])({getState:a}).info($v,"thread_subscribed "+n+" "+i);t(Object(Av["upsertSubscriptionAndMarkAsFresh"])({channelId:n,ts:i,subscribed:true,lastRead:s}))}function am(e,t,a){var r=e.subscription||{},n=r.channel,i=r.thread_ts,s=r.last_read;if(!n||!i)return;Object(ae["a"])({getState:a}).info($v,"thread_unsubscribed "+n+" "+i);t(Object(Av["upsertSubscriptionAndMarkAsFresh"])({channelId:n,ts:i,subscribed:false,lastRead:s}))}function rm(e,t){var a=e.subscription||{},r=a.channel,n=a.thread_ts,i=a.last_read;if(!r||!n)return;t(Object(Av["setSubscription"])({channelId:r,ts:n,lastRead:i}))}function nm(e,t,a){var r=Object(j["isFeatureEnabled"])(a(),"feature_react_threads");if(!r)return;var n=e.has_unreads,i=e.timestamp,s=e.mention_count,l=e.mention_count_by_channel;Object(ae["a"])({getState:a}).info($v,"update_thread_state has_unreads:"+n+" mention_count:"+s+" ts:"+i);Object(j["isFeatureEnabled"])(a(),"feature_incremental_unread_counts")?t(Object(ge["threadsUnreadCountChanged"])({threadsHasUnreads:n,threadsMentionCountByChannel:o.a.isArray(l)?{}:l})):t(Object(Xv["updateUnreadThreads"])({hasUnreads:n,mentionCountByChannel:o.a.isArray(l)?{}:l}))}Object(Ja["a"])("thread_subscribed",tm);Object(Ja["a"])("thread_unsubscribed",am);Object(Ja["a"])("thread_marked",rm);Object(Ja["a"])("update_thread_state",nm);function im(e,t,a){if(!e)return;var r=a();switch(e.subtype){case"message_changed":om(e,t,a);return;case"message_deleted":lm(e,t,a);return;case"message_replied":em(e,t,a);return;case"channel_history_changed":case"group_history_changed":case"im_history_changed":case"mpim_history_changed":return;case"channel_purpose":case"group_purpose":Ch(e,t,a);break;case"channel_topic":case"group_topic":wh(e,t,a);break;default:break}sm(e,t,a);Kv(e,t,a);cm(e,t,a);um(e,a);if(Object(j["isFeatureEnabled"])(r,"feature_sonic_activity")){var n=Object(j["getCurrentUserId"])(r);if(!Object(Sv["isFromCurrentUser"])(e,n)){var i=Object(xv["a"])(r);var o=Object(De["c"])(r);Object(Sv["containsMention"])(e,n,i,o)&&t(Bv({channelId:e.channel,messageTs:e.ts})).catch(s["noop"])}}Object(j["isFeatureEnabled"])(a(),"feature_react_all_threads")&&e.thread_ts&&t(Dv({channelId:e.channel,threadTs:e.thread_ts}))}function sm(e,t,a){if(!Object(Ce["a"])())return;if(!e||!e.channel)return;var r=t(Object(Iv["a"])(e));Object(jv["c"])(a,t,r,e)}function om(e,t,a){var r=a();var n=Object(ae["a"])({state:r});var i=e.message,s=e.channel,o=e._from_evt_log;var l=Object(T["u"])(r,s)&&Object(T["d"])(r,s);if(!i){n.error("no message?");return}if(!i.ts){n.error("no message ts?");return}if(!l&&!Object(j["isFeatureEnabled"])(a(),"feature_message_blocks")){n.error("unknown msg.channel:"+s);return}Object(Uv["k"])(e);t(Object(Tv["a"])({message:i,channelId:s,fromEventLog:o}))}function lm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleted_ts,a=e.channel,r=e._from_evt_log;var n=arguments[1];var i=arguments[2];n(Object(Cv["a"])({deleted_ts:t,channel:a,_from_evt_log:r}));var s=i();Object(j["isFeatureEnabled"])(s,"feature_sonic_activity")&&n(Object(Fv["removeActivityByMessageTs"])({channelId:a,messageTs:t}))}function cm(e,t,a){var r=a();var n=Object(j["getCurrentUserId"])(r);if(!Object(j["isFeatureEnabled"])(r,"feature_ally_sounds"))return;if(!Object(he["isWindowFocused"])(r))return;if(!Object(Va["isScreenReaderEnabled"])())return;if(Object(Sv["isFromCurrentUser"])(e,n))return;if(Object(Sv["isReply"])(e))return;if(!Object(Sv["isFromChannel"])(e,Object(S["a"])(r)))return;var i=Object(Sv["containsMention"])(e,n,Object(xv["a"])(r),Object(De["c"])(r));Object(qv["b"])(i)}function um(e,t){var a=Object(De["c"])(t());var r=e.client_msg_id;Object(wv["b"])(a,r)}Object(Ja["a"])("message",im);var dm=a(933);Object(Ja["a"])("slackbot_continue",dm["c"]);Object(Ja["a"])("slackbot_response_sent",dm["d"]);Object(Ja["a"])("slackbot_skip_or_stop",dm["e"]);var pm=a(2317);var hm=a(1299);function vm(e,t,a){var r=t.pinned_to,n=void 0===r?[]:r;var s=[].concat(m()(n));var o=s.indexOf(a);e?-1===o&&s.push(a):-1!==o&&s.splice(o,1);return i()({},t,{pinned_to:s})}var mm=vm;var fm=Object(Qe["b"])("Upserts a message after a change in pinned status and returns the new message event",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.item,n=a.pinned,s=a.channelId,o=a.pinnedInfo;var l=r.message;var c=mm(n,l,s);var u=Object(Sv["extendMessageWithPinnedInfo"])(c,o);e(Object(hm["a"])({message:u,channelId:s}));return i()({},r,{message:c})});fm.propTypes={channelId:Et["b"].string.isRequired,item:Et["b"].object.isRequired,pinned:Et["b"].bool.isRequired,pinnedInfo:Et["b"].object};var bm=fm;var gm=a(254);var _m=a(77);function ym(e,t){var a=t.file;if(a&&1===Object.keys(a).length){if(Object(Fr["hasFileWithId"])(e,a.id))return Object(Fr["getFileById"])(e,a.id);return null}return a}var Om=ym;var km=Object(Qe["b"])("Upserts a file after a change in the pinned status and returns the new message event",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.item,n=a.pinned,s=a.channelId,o=a.pinnedInfo;var l=Om(t(),r);if(!l)return r;var c=Object(_m["extendFileWithPinnedInfo"])(l,s,o);var u=mm(n,c,s);e(Object(gm["a"])({files:[u]}));return i()({},r,{file:u})});km.propTypes={channelId:Et["b"].string.isRequired,item:Et["b"].object.isRequired,pinned:Et["b"].bool.isRequired,pinnedInfo:Et["b"].object};var Em=km;var Cm=a(838);var jm=Object(Qe["b"])("Upserts a file after a change in a file comment pinned status and returns the new message event",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.item,n=a.pinned,o=a.channelId;var l=Om(t(),r);if(!l)return r;var c=r.comment;var u=Object(s["findIndex"])(l.comments,function(e){return e.id===c.id});var d=i()({},l);var p=void 0;if(u>-1){var h=mm(n,l.comments[u],o);p=i()({},h);d.comments[u]=i()({},h)}else{p=c;d=Object(Cm["a"])(c,l)}e(Object(gm["a"])({files:[d]}));return i()({},r,{comment:p})});jm.propTypes={channelId:Et["b"].string.isRequired,item:Et["b"].object.isRequired,pinned:Et["b"].bool.isRequired};var wm=jm;var Sm=a(234);var Im=a(304);var Tm={message:"message",file_comment:"file_comment",file:"file"};var Am=Tm;var Nm=function e(t,a){var r=a.type;if(r!==t.type)return false;switch(r){case Am.message:return t.message.ts===a.message.ts;case Am.file:return t.file.id===a.file.id;case Am.file_comment:return t.comment.id===a.comment.id;default:return false}};var Pm=function e(t,a){var r=function e(t){return Nm(t,a)};return Object(s["findIndex"])(t,r)};var Rm=function e(t,a){var r=function e(t){return Nm(t,a)};return Object(s["reject"])(t,r)};var Mm=Nm;var Dm=Object(Qe["b"])("Update the pinned_items field for a channel",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.pinned,n=a.item,s=a.channelId,o=a.count;var l=Object(ae["a"])({getState:t,label:"UPDATE_CHANNEL_PINNED_ITEMS"});var c=false;var u=Object(T["d"])(t(),s,c);if(!u){l.warn("Channel matching "+s+" not found.");return}var d=i()({},u,{pinned_items:u.pinned_items||[],pinned_items_count:u.pinned_items_count||0});if(!Object(Im["b"])(d)){e(Object(Sm["updatePinCount"])({channelId:s,count:o}));return}if(r){var p=Pm(d.pinned_items,n);if(-1===p){d.pinned_items=[n].concat(m()(d.pinned_items));Object(Im["i"])(d,o);e(Object(de["a"])({channel:d}));Object(Im["c"])(d,n,r)}}else{d.pinned_items=Rm(d.pinned_items,n);Object(Im["i"])(d,o);e(Object(de["a"])({channel:d}));Object(Im["c"])(d,n,r)}});Dm.propTypes={channelId:Et["b"].string.isRequired,item:Et["b"].object.isRequired,pinned:Et["b"].bool.isRequired,count:Et["b"].number.isRequired};var xm=Dm;var Fm=Object(Qe["b"])("Updates local state when pin status on a channel has changed",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.pinned,n=a.item,i=a.channelId,s=a.pinCount,o=a.pinnedInfo;var l={};if(r&&o){l.pinnedBy=o.pinned_by;l.pinnedTs=o.pinned_ts}var c=n.type;var u=void 0;switch(c){case Am.message:u=e(bm({pinned:r,item:n,channelId:i,pinnedInfo:l}));break;case Am.file_comment:u=e(wm({pinned:r,item:n,channelId:i}));break;case Am.file:u=e(Em({pinned:r,item:n,channelId:i,pinnedInfo:l}));break;default:}e(xm({pinned:r,item:u,channelId:i,count:s}))});Fm.propTypes={pinned:Et["b"].bool.isRequired,item:Et["b"].object.isRequired,channelId:Et["b"].string.isRequired,maybeCount:Et["b"].number,pinnedInfo:Et["b"].object};var Lm=Fm;var Bm=Lm;function Um(e,t,a){var r=Object(ae["a"])({getState:a,label:"PIN_ADDED_RTM"});if(!e||!e.channel_id){r.warn("RTM event missing, or missing channel_id.");return}var n=false;var i=a();var s=e.channel_id;var o=Object(T["d"])(i,s,n);if(!o){r.warn("Channel matching "+s+" not found.");return}var l=e.item,c=e.pin_count,u=e.pinned_info;var d=true;t(Bm({pinned:d,item:l,channelId:e.channel_id,pinCount:c,pinnedInfo:u}));if(Object(j["isFeatureEnabled"])(i,"feature_sonic_pins")){Object(Sm["getLoadingState"])(i,s)===Sm["PINS_LOADING_STATES"].LOADED&&t(Object(Sm["addPinnedItems"])({items:[Object(Sm["formatPinFromAPI"])(l)],channelId:s}));t(Object(Sm["updatePinCount"])({count:c,channelId:s}))}}function qm(e,t,a){var r=Object(ae["a"])({getState:a,label:"PIN_REMOVED_RTM"});if(!e||!e.channel_id){r.warn("RTM event missing, or missing channel_id.");return}var n=false;var i=a();var s=e.channel_id;var o=Object(T["d"])(i,s,n);if(!o){r.warn("Channel matching "+s+" not found.");return}var l=e.item,c=e.pin_count,u=e.pinned_info;var d=false;t(Bm({pinned:d,item:l,channelId:e.channel_id,pinCount:c,pinnedInfo:u}));if(Object(j["isFeatureEnabled"])(i,"feature_sonic_pins")){Object(Sm["getLoadingState"])(i,s)===Sm["PINS_LOADING_STATES"].LOADED&&t(Object(Sm["removePinnedItem"])({item:Object(Sm["formatPinFromAPI"])(l),channelId:s}));t(Object(Sm["updatePinCount"])({count:c,channelId:s}))}}Object(Ja["a"])("pin_added",Um);Object(Ja["a"])("pin_removed",qm);var Gm=a(18);var Wm=Object(Gm["b"])("Set any of the three search prefs that live in the search interface");Wm.propTypes={pref:Et["b"].string.isRequired,value:Et["b"].any};var Hm=a(1218);var Vm=a(217);var Km=a(575);var zm=Object(Qe["b"])("Set currently muted channels from the muted_channels pref",function(e,t,a){var r=t();var n=Object(ae["a"])({state:r,label:"MUTED-CHANNELS"});var i=Object(G["f"])(r,"muted_channels");if(a===i){n.info("Muted channels haven't changed, returning early");return}n.info("Muted channels changed, new muted channels: "+a);e(Object(W["b"])({pref:"muted_channels",value:a}));var o=Object(s["isString"])(a)?a.split(","):[];var l=o.reduce(function(e,t){e[t]=true;return e},{});e(Object(Vm["setMutedChannels"])(l));Object(Km["b"])()});zm.propTypes=Et["b"].string;var Ym=a(1069);var Qm=new Set(["emoji_use","graphic_emoticons","emoji_mode","preferred_skin_tone"]);var Jm=new Set(["who_can_post_general"]);var Zm=new Set(["search_only_my_channels","search_only_current_team","search_exclude_bots"]);function Xm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=e.value;var r=arguments[1];var n=arguments[2];var i=n();if(Zm.has(t)){r(Wm({pref:t,value:a}));return}if("arrow_history"===t&&(Object(Ce["a"])()||Object(j["isFeatureEnabled"])(i,"feature_sonic_inputs")))return;if("muted_channels"===t){r(zm(a));return}if(Qm.has(t))Object(Km["c"])({name:t,value:a});else{r(Object(W["b"])({pref:t,value:a}));Object(Km["e"])({name:t,value:a})}}function $m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=e.value;var r=arguments[1];var n=arguments[2];var i=n();"who_can_manage_ext_shared_channels"===t&&Object(j["isFeatureEnabled"])(i,"feature_esc_admin_client")&&r(Object(Ym["a"])({pref:t,value:a}));if(Jm.has(t))Object(Km["d"])({name:t,value:a});else{r(Object(Hm["a"])({pref:t,value:a}));Object(Km["f"])({name:t,value:a})}}Object(Ja["a"])("pref_change",Xm);Object(Ja["a"])("team_pref_change",$m);var ef={PREFS_WITH_LEGACY_LOGIC:Qm,TEAM_PREFS_WITH_LEGACY_LOGIC:Jm,UNIVERSAL_SEARCH_PREFS:Zm,onPrefChangedEvent:Xm,onTeamPrefChangedEvent:$m};var tf=a(309);var af=a(1061);var rf="PRESENCE";function nf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.presence,a=e.type;var r=arguments[1];var n=arguments[2];var i=Object(ae["a"])({getState:n});if("away"!==t&&"active"!==t){i.error(rf,"An unknown presence was received in the '"+a+"' event: '"+t+"'");return}i.debug("["+rf+"] ","Received a ws manual_presence_change event. Will update current member's presence to "+t);r(Object(af["a"])({presence:t}))}function sf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.presence,a=e.type,r=e.users;var n=arguments[1];var o=arguments[2];var l=o();var c=Object(ae["a"])({getState:o});if("away"!==t&&"active"!==t){c.error(rf,"An unknown presence was received in the '"+a+"' event: '"+t+"'");return}if(Object(s["isEmpty"])(r)){c.error(rf,"The '"+a+"' event did not contain an array of users to update the presence for");return}c.debug("["+rf+"] ",'Received a ws presence_change event. Will update the following users to a status of "'+t+'": '+r.join(", "));var u=r.filter(function(e){return Object(N["m"])(l,e)&&Object(tf["getPresenceByMemberId"])(l,e)!==t}).map(function(e){return i()({},Object(N["i"])(l,e),{presence:t})});if(Object(s["isEmpty"])(u))return;Object(mc["j"])(n,u);u.forEach(function(e){Object(dh["a"])(e)})}Object(Ja["a"])("manual_presence_change",nf);Object(Ja["a"])("presence_change",sf);var of=a(789);var lf=a(318);var cf=a(360);function uf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,a=e.ts,r=e.file,n=e.comment;switch(t){case"message":return!!a;case"file":return"string"===typeof r;case"file_comment":return"string"===typeof r&&!!n;default:return false}}function df(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.type,r=t.ts,n=t.channel,i=t.file,s=t.comment;switch(a){case"message":return Object(fe["a"])(e,n,r)||Object(Uv["d"])(r,n)||void 0;case"file":return Object(Fr["getFileById"])(e,i)||void 0;case"file_comment":return Object(Fr["getFileCommentById"])(e,i,s)||void 0;default:return}}function pf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item,a=e.reaction,r=e.user,n=e.url,i=e._from_evt_log,o=e.event_ts;var l=arguments[1];var c=arguments[2];var u=c();if(!Object(s["isObject"])(t)){Object(ae["a"])({state:u}).error("reaction_added has no item");return}if(!uf(t))return;var d=df(u,t);if(!d)return;var p=t.channel,h=t.type,v=t.ts,m=t.file,f=t.comment;var b=v||f||m;var g=Object(cf["d"])(h,b,p);var _=Object(j["getCurrentUserId"])(u);var y=l(Object(lf["addReaction"])({key:g,name:a,userId:r,url:n}));if(_!==r&&_===d.user){var O=true;var k=!i&&"message"===h;Object(j["isFeatureEnabled"])(c(),"feature_classic_nav")&&Object(H["h"])(u)&&l(Object(Tu["queueToast"])({key:g,emoji:a,userId:r,channelId:p}));Object(of["a"])({adding:O,name:a,key:g,userId:r,eventTs:o,shouldAlert:k,channelId:p,url:n});y&&Object(j["isFeatureEnabled"])(u,"feature_sonic_activity")&&l(Bv({channelId:d.channel,messageTs:d.ts})).catch(s["noop"])}if(y){var E=i||r!==Object(j["getCurrentUserId"])(u);Object(of["b"])({key:g,name:a,userId:r,type:h,shouldThrottle:E})}}function hf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item,a=e.reaction,r=e.user,n=e.url,i=e._from_evt_log,o=e.event_ts;var l=arguments[1];var c=arguments[2];var u=c();if(!Object(s["isObject"])(t)){Object(ae["a"])({state:u}).error("reaction_removed has no item");return}if(!uf(t))return;var d=df(u,t);if(!d)return;var p=t.channel,h=t.type,v=t.ts,m=t.file,f=t.comment;var b=v||f||m;var g=Object(cf["d"])(h,b,p);var _=Object(j["getCurrentUserId"])(u);var y=l(Object(lf["removeReaction"])({key:g,name:a,userId:r,url:n}));if(_!==r&&_===d.user){var O=false;var k=!i&&"message"===h;Object(of["a"])({adding:O,name:a,key:g,userId:r,eventTs:o,shouldAlert:k,channelId:p,url:n});if(y&&Object(j["isFeatureEnabled"])(u,"feature_sonic_activity")){l(Object(Fv["removeActivityByMessageTs"])({channelId:d.channel,messageTs:d.ts}));var E=Object(lf["getReactionsForKey"])(u,g);E&&E.length&&l(Bv({channelId:d.channel,messageTs:d.ts})).catch(s["noop"])}}if(y){var C=i||r!==_;Object(of["b"])({key:g,name:a,userId:r,type:h,shouldThrottle:C})}}Object(Ja["a"])("reaction_added",pf);Object(Ja["a"])("reaction_removed",hf);var vf=a(331);var mf=a(503);var ff="RTM-SHARED-CHANNELS";function bf(e,t,a){var r=e.team;var n=Object(ae["a"])({getState:a,label:ff});n.info("Received external_org_migration_started for "+r.id+".");t(Object(vf["i"])({teamId:r.id,isMigrating:r.is_migrating}));t(Object(mf["c"])())}Object(Ja["a"])("external_org_migration_started",bf);function gf(e,t,a){var r=e.team;var n=Object(ae["a"])({getState:a,label:ff});n.info("Received external_org_migration_finished for "+r.id+".");t(Object(vf["g"])({teamId:r.id,externalOrgMigrated:true,isMigrating:false}));t(Object(mf["c"])())}Object(Ja["a"])("external_org_migration_finished",gf);var _f={gridMigrationStarted:bf,gridMigrationFinished:gf};var yf=a(759);var Of="RTM-STARS";var kf={MESSAGE:"message",FILE:"file",FILE_COMMENT:"file_comment",CHANNEL:"channel"};var Ef=function e(t,a,r){if(!Object(j["isFeatureEnabled"])(r(),"feature_modern_starred_items"))return;if(!t)return;if(!t.item){Object(ae["a"])({getState:r}).info(Of,'imsg type "'+t.type+'" has no item');return}a(Object(yf["addStarredItem"])(t.item));if(t.item.type===kf.MESSAGE){var n=a(Object(Zv["a"])({imsgs:[t.item.message],channelId:t.item.channel}));a(Object(Hi["a"])(n))}else if(t.item.type===kf.FILE)a(Object(gm["a"])({files:[t.item.file]}));else if(t.item.type===kf.CHANNEL){var s=Object(T["d"])(r(),t.item.channel);if(!s||Object(P["isUnknownOrNonExistent"])(s))return;a(Object(Wi["a"])({channel:i()({},s,{is_starred:true}),reason:I["a"].SET_STAR}))}Object(ae["a"])({getState:r}).info(Of,"star_added")};var Cf=function e(t,a,r){if(!Object(j["isFeatureEnabled"])(r(),"feature_modern_starred_items"))return;if(!t&&!t.item){Object(ae["a"])({getState:r}).info(Of,t.type+" has no item");return}a(Object(yf["removeStarredItem"])(t.item));if(t.item.type===kf.MESSAGE){var n=a(Object(Zv["a"])({imsgs:[i()({},t.item.message,{is_starred:false})],channelId:t.item.channel}));a(Object(Hi["a"])(n))}else if(t.item.type===kf.FILE){var s=Object(De["c"])(r());Object(Fr["markObjectsAsStale"])(s,[t.item.file.id])}else if(t.item.type===kf.CHANNEL){var o=Object(T["d"])(r(),t.item.channel);if(!o||Object(P["isUnknownOrNonExistent"])(o))return;a(Object(Wi["a"])({channel:i()({},o,{is_starred:false}),reason:I["a"].SET_STAR}))}Object(ae["a"])({getState:r}).info(Of,"star_removed")};Object(Ja["a"])("star_added",Ef);Object(Ja["a"])("star_removed",Cf);var jf={starAdded:Ef,starRemoved:Cf};var wf=a(544);var Sf=a(380);var If=a(1475);var Tf=a(1476);var Af=a(872);var Nf={},Pf=Nf.ensureCredentialsAreFreshInner,Rf=Nf.refetchAuthInner;var Mf={},Df=Mf.getLocalConfigByKeyInner;var xf=Pf;var Ff=Df;var Lf=Rf;function Bf(e,t,a){if(Object(b["a"])()){if(!Object(Ce["a"])())return;Object(Af["a"])(a);return}Object(wf["h"])()}function Uf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.team_id;var a=arguments[1];var r=arguments[2];var n=Object(ae["a"])({getState:r,label:"RTM"});if(Object(Ce["a"])()){n.info("User was added to team "+t+"; re-fetching auth");Object(Af["b"])(r)}else if(!Object(b["a"])()){n.info("User was added to team "+t);Object(dh["g"])(t)}}function qf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.team_id;var a=arguments[1];var r=arguments[2];var n=Object(ae["a"])({getState:r,label:"RTM"});if(!Object(b["a"])()){n.info("User was removed from team "+t);Object(dh["h"])(t);return}var i=Object(De["c"])(r());var s=Object.keys(Ff("teams")||{}).indexOf(t)>=0;var o=Object(Ce["a"])()?s:t===i;if(o){n.info("User was removed from team "+t+"; re-fetching auth");Object(Af["b"])(r)}else n.info("User was removed from team "+t+" but it is not relevant to us; ignoring")}function Gf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.source_team,a=e.name;var r=arguments[1];var n=arguments[2];var i=n();if(!Object(j["isFeatureEnabled"])(i,"feature_team_rename_m11n"))return;var s=Object(gn["d"])(i);if(!s)return;var o=t||s.id;r(Object(vf["d"])({teamId:o,name:a}));var l=n();var c=Object(gn["i"])(l,o);if(s.id===o){Object(wf["f"])(c);Object(Va["teamNameChanged"])(a)}else Object(wf["c"])(c)}function Wf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.source_team,a=e.icon;var r=arguments[1];var n=arguments[2];var i=Object(gn["d"])(n());if(!i)return;var s=t||i.id;r(Object(vf["h"])({teamId:s,icon:a}));var o=n();var l=Object(gn["d"])(o);if(l.id===s){Object(wf["a"])(l);l.icon&&l.icon.image_68&&true!==l.icon.image_default?Object(Va["setTeamIcon"])(l.icon,s):Object(ae["a"])({state:o}).warn("updateTeamIcon was called, but missing an image to set")}}function Hf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.profile;var a=arguments[1];a(Object(If["a"])({fields:t.fields}));Object(wf["g"])()}function Vf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.profile;var a=arguments[1];a(Object(vf["e"])({fields:t.fields}));Object(wf["g"])()}function Kf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.profile;var a=arguments[1];var r=t.fields;a(Object(Tf["a"])({fieldsToDelete:r}));Object(wf["g"])()}function zf(e,t,a){var r=Object(gn["d"])(a());t(Object(Sf["b"])({team:i()({},r,{email_domain:e.email_domain})}));var n=Object(gn["d"])(a());Object(wf["e"])(n)}function Yf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plan,a=e.can_add_ura,r=e.paid_features;var n=arguments[1];var s=arguments[2];var o=Object(gn["d"])(s());n(Object(Sf["b"])({team:i()({},o,{plan:t,can_add_ura:a})}));r&&n(Object(lr["setPaidFeatures"])(r))}function Qf(e,t,a){var r=Object(gn["d"])(a());t(Object(Sf["b"])({team:i()({},r,{domain:e.domain})}));Object(Va["teamDomainChanged"])(e.url);var n=Object(gn["d"])(a());Object(wf["d"])(n)}Object(Ja["a"])("accounts_changed",Bf);Object(Ja["a"])("user_added_to_team",Uf);Object(Ja["a"])("user_removed_from_team",qf);Object(Ja["a"])("team_plan_change",Yf);Object(Ja["a"])("team_rename",Gf);Object(Ja["a"])("team_icon_change",Wf);Object(Ja["a"])("team_profile_reorder",Vf);Object(Ja["a"])("team_profile_change",Hf);Object(Ja["a"])("team_profile_delete",Kf);Object(Ja["a"])("email_domain_changed",zf);Object(Ja["a"])("team_domain_change",Qf);var Jf={};Object.defineProperty(Jf,"ensureCredentialsAreFresh",{get:function e(){return xf},set:function e(t){xf=t}});Object.defineProperty(Jf,"getLocalConfigByKey",{get:function e(){return Ff},set:function e(t){Ff=t}});Object.defineProperty(Jf,"refetchAuth",{get:function e(){return Lf},set:function e(t){Lf=t}});var Zf=a(1064);var Xf=a(582);var $f=6e4;var eb={};var tb={};function ab(e,t){return eb[e]&&eb[e][t]}function rb(e,t,a){eb[e]||(eb[e]={});eb[e][t]=a}function nb(e,t){return tb[e]&&tb[e][t]}function ib(e,t,a){tb[e]||(tb[e]={});tb[e][t]=a}function sb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$f;clearTimeout(ab(e,t));var a=setTimeout(function(){if(!Object(_["isConnected"])(Object(h["c"])(e))){sb(e,t);return}Object(h["a"])(e,Object(Zf["a"])()).tap(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h["a"])(e,Object(Xf["a"])(t))}).catch(function(t){Object(ae["a"])({teamId:e}).error("After delay, failed to fetch client counts for "+e+": "+t)})},Object(ur["a"])(t,0,.2));rb(e,t,a)}function ob(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$f;clearInterval(nb(e,t));var a=setInterval(function(){if(!Object(_["isConnected"])(Object(h["c"])(e)))return;Object(h["a"])(e,Object(Zf["a"])()).tap(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h["a"])(e,Object(Xf["a"])(t))}).catch(function(t){Object(ae["a"])({teamId:e}).error("On interval, failed to fetch client counts for "+e+": "+t)})},Object(ur["a"])(t,0,.2));ib(e,t,a)}var lb=Object(Qe["b"])("Poll client unreads API after delay",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.delay;return Object(j["isFeatureEnabled"])(t(),"feature_vitess_sidebar")&&sb(Object(De["c"])(t()),r)});lb.propTypes={delay:Et["b"].number};var cb=Object(Qe["b"])("Poll client unreads API on interval",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.interval;return Object(j["isFeatureEnabled"])(t(),"feature_desync_resync")&&ob(Object(De["c"])(t()),r)});cb.propTypes={interval:Et["b"].number};var ub=Object(Qe["b"])("Clear client unreads API timeout",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.delay,n=void 0===r?$f:r;var i=Object(De["c"])(t());var s=ab(i,n);s&&clearTimeout(s)});ub.propTypes={delay:Et["b"].number};var db=Object(Qe["b"])("Clear client unreads API interval",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.interval,n=void 0===r?$f:r;var i=Object(De["c"])(t());var s=nb(i,n);s&&clearInterval(s)});db.propTypes={interval:Et["b"].number};var pb={DEFAULT_WAIT:$f,clientUnreadsTimeoutByTeam:eb,clientUnreadsIntervalByTeam:tb};var hb=a(145);var vb=a(756);var mb=a(840);var fb=Object(ur["a"])(3e5,0,.2);var bb=a(1297);var gb=a(516);var _b={};function yb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var a=Object(h["c"])(e);var r=Object(gb["a"])(e).reduce(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.ts;(e[a]||(e[a]=[])).push(r);return e},{});if(t.length){var n=t.reduce(function(e,t){e[t]=true;return e},{});var i=Object(Fr["getFreshObjects"])(e).filter(function(e){return Object(_m["getFileShareLocations"])(Object(Fr["getFileById"])(a,e,false)).some(function(e){return n[e]})});Object(Fr["markObjectsAsStale"])(e,i);Object(oh["d"])(e,t);t.forEach(function(t){if(!r[t])return;Object(gb["c"])(e,t,r[t]);Object(h["a"])(e,Object(pe["resetReachedEnd"])({channelId:t}))})}else{Object(Fr["markObjectsAsStale"])(e,Object(Fr["getFreshObjects"])(e));Object(oh["d"])(e,Object(oh["a"])(e));Object.keys(r).forEach(function(t){return Object(gb["c"])(e,t,r[t])});Object(h["a"])(e,Object(pe["resetReachedEnd"])())}}function Ob(e){if(Object(Ce["a"])())Object(h["a"])(e,Object(tr["e"])());else if(Object(b["a"])()){Object(h["a"])(e,Object(vb["incrementMajorVersion"])());Object(h["a"])(e,Object(tr["b"])())}else Object(bb["b"])()}function kb(e,t,a,r){if(t)return;var n=[];if(a){n.push("channel_deleted","commands_changed","emoji_changed","file_deleted","team_domain_change","apps_uninstalled","subteam_deleted");Object(b["a"])()||n.push("team_rename","team_domain_change")}if(r){n.push("file_deleted","pin_added","pin_removed","channel_history_changed","group_history_changed","im_history_changed","mpim_history_changed","teams_left_shared_channel");Object(b["a"])()||n.push("channel_converted_to_shared")}if(!n.length)return;var i=Object(h["c"])(e);var o=Object(s["uniq"])(n).join(",");var l=Object(jr["getLastKnownEventTimestamp"])(i);if(!l)return;var c=Object(h["d"])(e);if(!c||!c.getState)return;Object(wr["f"])(c.getState,{start:l,include:o})}function Eb(e){var t=_b[e];_b[e]=[];var a=Object(h["c"])(e);var r=Object(j["getCurrentUserId"])(a);var n=[];var i=[];var s=[];var o=[];var l=[];var c=t.length;for(var u=0;u<c;u++){var d=t[u];if(d===r){n.push(d);break}if(Object(Q["a"])(d))i.push(d);else if(Object(hb["b"])(d))o.push(d);else{if(!Object(hb["a"])(d)){l.push(d);break}s.push(d)}}var p=!!(n.length||l.length);var v=!!(o.length||s.length);var m=!!i.length;p?Ob(e):v?yb(e):m&&yb(e,i);kb(e,p,v,m);Object(h["a"])(e,Object(tr["d"])(t));if(Object(mb["a"])(Object(h["c"])(e)))return;Object(h["a"])(e,db({interval:fb}));Object(h["a"])(e,lb({delay:fb}))}var Cb=function(){var e=Object(s["memoize"])(function(){return Object(s["throttle"])(Eb,fb)});return function(t){return e(t)(t)}}();var jb=Object(Qe["b"])("Invalidate client caches for topics",function(e,t){var a;var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];var n=t();var i=Object(De["c"])(n);(a=_b[i]||(_b[i]=[])).push.apply(a,m()(r));Cb(i)});jb.propTypes=Et["b"].arrayOf(Et["b"].string).isRequired;var wb=Object(Qe["b"])("Cancel pending invalidation for topics",function(e,t){var a=t();var r=Object(De["c"])(a);_b[r]=[]});wb.propTypes=null;var Sb={pendingIdsByTeam:_b};Object.defineProperty(Sb,"invalidateSome",{get:function e(){return yb},set:function e(t){yb=t}});Object.defineProperty(Sb,"invalidateAll",{get:function e(){return Ob},set:function e(t){Ob=t}});Object.defineProperty(Sb,"invalidateTopics",{get:function e(){return Eb},set:function e(t){Eb=t}});Object.defineProperty(Sb,"invalidateTopicsThrottled",{get:function e(){return Cb},set:function e(t){Cb=t}});Object.defineProperty(Sb,"replayEvents",{get:function e(){return kb},set:function e(t){kb=t}});function Ib(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel_ids,a=void 0===t?[]:t;var r=arguments[1];var n=arguments[2];var i=n();if(!Object(j["isFeatureEnabled"])(i,"feature_desync_resync"))return;var s=a.filter(function(e){return!Object(mb["b"])(i,e)});if(!s.length)return;r(Object(tr["c"])(s));r(cb({interval:fb}))}function Tb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channel_ids,a=void 0===t?[]:t;var r=arguments[1];var n=arguments[2];if(!Object(j["isFeatureEnabled"])(n(),"feature_desync_resync"))return;r(jb(a))}Object(Ja["a"])("desync",Ib);Object(Ja["a"])("resync",Tb);var Ab={desync:Ib,resync:Tb};var Nb=a(231);var Pb=a(151);var Rb=a(296);var Mb=a(291);var Db=a(783);function xb(e,t,a){var r=a();if(!e||!e.subteam||!e.subteam.id){Object(ae["a"])({getState:a}).warn("subteam_updated: No message event provided, or no subteam provided in the message event.");return}var n=e.subteam;var i=e.subteam.id;var s=Object(Pb["l"])(r,i)&&Object(Pb["g"])(r,i);if(!s){Object(ae["a"])({getState:a}).warn("subteam_updated: User group "+i+" not in model.");return}var o=Fb({knownUserGroup:s,newUserGroup:n});t(Object(Nb["q"])({userGroups:[o]}));Object(j["isFeatureEnabled"])(a(),"feature_sonic_user_groups")||Object(Db["b"])(i)}function Fb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.knownUserGroup,a=e.newUserGroup;if(t)return i()({},a,{users:t.users||[]});return a}function Lb(e,t,a){if(Object(j["isFeatureEnabled"])(a(),"feature_lazy_user_groups")&&Object(j["isFeatureEnabled"])(a(),"feature_sonic_user_groups"))return;if(!e||!e.subteam_id){Object(ae["a"])({getState:a}).warn("subteam_members_changed: No message event provided, or no subteam_id provided in the message event.");return}var r=e.subteam_id;var n=Object(Pb["l"])(a(),r)&&Object(Pb["g"])(a(),r);if(!n){Object(ae["a"])({getState:a}).warn("subteam_members_changed: Received event for an unknown user group: "+r);return}var i=n.users,o=void 0===i?[]:i;var l=e.added_users,c=void 0===l?[]:l,u=e.removed_users,d=void 0===u?[]:u;var p=o;c.length&&(p=Object(s["union"])(p,c));d.length&&(p=Object(s["difference"])(p,d));t(Object(Nb["d"])({groupId:n.id,users:p}));if(!Object(j["isFeatureEnabled"])(a(),"feature_lazy_user_groups")){var h=Object(j["getCurrentUserId"])(a());var v=!!Object(Rb["getCurrentMemberUserGroupRegExps"])(a())[r];v&&!Object(s["includes"])(p,h)?t(Object(Rb["removeCurrentMemberUserGroupRegexp"])(r)):!v&&Object(s["includes"])(p,h)&&t(Object(Rb["addCurrentMemberUserGroupRegexp"])(n))}}function Bb(e,t,a){if(!e||!e.subteam){Object(ae["a"])({getState:a}).warn("subteam_created: No message event provided, or no subteam provided in the message event.");return}t(Object(Nb["q"])({userGroups:[e.subteam]}));Object(j["isFeatureEnabled"])(a(),"feature_sonic_user_groups")||Object(Db["b"])(e.subteam.id)}function Ub(e,t,a){if(!e||!e.subteam||!e.subteam.id){Object(ae["a"])({getState:a}).warn("subteam_deleted: No message event provided, or no subteam provided in the message event.");return}var r=e.subteam.id;t(Object(Nb["k"])(r));Object(j["isFeatureEnabled"])(a(),"feature_sonic_user_groups")||Object(Db["b"])(r)}function qb(e,t,a){if(!e||!e.subteam_id){Object(ae["a"])({getState:a}).warn("subteam_self_added: No message event provided, or no subteam id provided in the message event.");return}var r=Object(j["getCurrentUserId"])(a());var n=Object(Pb["g"])(a(),e.subteam_id);var i={groupId:e.subteam_id,memberId:r};t(Object(Nb["b"])(i));Object(j["isFeatureEnabled"])(a(),"feature_lazy_user_groups")?t(Object(Mb["upsertUserGroupMembership"])({groupId:e.subteam_id,isMember:true})):t(Object(Rb["addCurrentMemberUserGroupRegexp"])(n))}function Gb(e,t,a){if(!e||!e.subteam_id){Object(ae["a"])({getState:a}).warn("subteam_self_removed: No message event provided, or no subteam id provided in the message event.");return}var r=Object(j["getCurrentUserId"])(a());if(!r)return;var n={groupId:e.subteam_id,memberId:r};t(Object(Nb["l"])(n));Object(j["isFeatureEnabled"])(a(),"feature_lazy_user_groups")?t(Object(Mb["upsertUserGroupMembership"])({groupId:e.subteam_id,isMember:false})):t(Object(Rb["removeCurrentMemberUserGroupRegexp"])(e.subteam_id))}Object(Ja["a"])("subteam_updated",xb);Object(Ja["a"])("subteam_members_changed",Lb);Object(Ja["a"])("subteam_created",Bb);Object(Ja["a"])("subteam_deleted",Ub);Object(Ja["a"])("subteam_self_added",qb);Object(Ja["a"])("subteam_self_removed",Gb);var Wb=a(173);var Hb=a(196);var Vb=a(312);var Kb=a(758);var zb=a(858);var Yb=a(1070);Object(M["b"])({actions:[Wm],sideEffect:function e(t,a,r){var n=r();if(!Object(Hb["o"])(n))return;var i=Object(Wb["getRequest"])(n),s=i.query;a(Object(Wb["clearResponse"])());a(Object(Vb["a"])({query:s,fetchSuggestions:true}));s&&a(Object(Vb["n"])({query:s}))}});Object(M["b"])({actions:[Wm],sideEffect:function e(t,a){a(Object(Wb["setRequestFromEditableRequest"])({fetchSuggestions:true}));a(Object(Yb["a"])())}});Object(M["b"])({actions:[w["e"]],sideEffect:function e(t,a,r){var n=r();Object(Hb["o"])(n)&&a(Object(Kb["a"])())}});Object(M["b"])({actions:[w["e"],w["c"]],sideEffect:function e(t,a){a(Object(zb["searchInProductEducationReset"])())}});var Qb=a(580);function Jb(e,t,a){var r=a();var n=Object(ae["a"])({getState:a});if(!Object(be["isFullyBooted"])(r))return false;var i=Object(G["f"])(r,"sidebar_theme");if("custom_theme"===i)return false;var s=null;try{s=JSON.parse(Object(G["f"])(r,"sidebar_theme_custom_values"))}catch(e){return false}var o=Object(Qb["e"])(i,null,{useGlobalNav:Object(ee["b"])(r)});if(!s.column_bg||!o.column_bg)return false;if(s.column_bg.toUpperCase()!==o.column_bg.toUpperCase()){n.info("SIDEBAR-THEME","Sidebar theme values don't match expected values; fixing the pref");t(Object(J["c"])({pref:"sidebar_theme_custom_values",value:JSON.stringify(o)}));return true}return false}Object(M["b"])({actions:[be["setFullyBooted"]],sideEffect:Jb});function Zb(e,t,a){var r=a();var n=Object(S["a"])(r);var i=Object(T["d"])(r,n);if(!Object(j["isFeatureEnabled"])(r,"feature_esc_grid_migrations_client")||!Object(P["isUnavailable"])(r,i))return;var s=z(r,Object(H["g"])(r));if(!s){Object(R["a"])(i);Object(re["c"])();Object(Ki["b"])()}}Object(M["b"])({actions:[mf["c"]],sideEffect:Zb});var Xb=a(329);var $b=a(1042);var eg=Object(X["b"])("TS.highlights_briefing.handleFeedback",function(){return false});function tg(e,t){eg(e.payload);t(Object($b["b"])(e.payload))}function ag(e,t,a){if(!e.payload.prevChannelId||e.payload.channelId===e.payload.prevChannelId)return;var r=a();if(!Object(j["shouldUseReactMessages"])(r))return;var n=false;var i=Object(T["d"])(r,e.payload.prevChannelId,n);if(!i||!i.last_read)return;var s=Object(Xb["getHighlightedTimestampsPriorToTimestamp"])(r,{channelId:e.payload.prevChannelId,beforeTs:i.last_read});if(!s.length)return;var l=o.a.reduce(s,function(e,t){e[t]={sliHighlight:{isHighlight:false}};return e},{});t(Object(Xb["setHighlightsForMessages"])(An()({},e.payload.prevChannelId,l)))}Object(M["b"])({actions:[Xb["setFeedbackForHighlight"]],sideEffect:tg});Object(M["b"])({actions:[w["e"]],sideEffect:ag});var rg=10;var ng=9e5;var ig=void 0;var sg={};var og={};var lg={};function cg(){void 0===ig&&(ig=Object(is["a"])(rg));return ig}var ug="asleep";var dg="connecting";var pg="connected";var hg="wait_connectivity";var vg="wait_rate_limit";function mg(e){if(Object(_["isAsleep"])(e))return ug;if(Object(_["isConnecting"])(e))return dg;if(Object(_["isConnected"])(e))return pg;if(Object(_["isWaitingForConnectivity"])(e))return hg;if(Object(_["isWaitingForRateLimit"])(e))return vg;return"disconnected"}function fg(e,t,a){if(!cg())return;var r=a();var n=Object(De["c"])(r);var i=mg(r);if(og[n]!==i){og[n]=i;sg[n]=sg[n]||[];sg[n].push({status:i,ts:window.performance.now()})}}function bg(e,t,a){if(!cg())return;var r=a();var n=Object(vt["c"])({getState:a});var i=Object(De["c"])(r);if(lg[i])return;lg[i]=performance.now();var s=Object(ur["a"])(ng,.8,1.2);setInterval(function(){if(!sg[i])return;var e={};sg[i].forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.status,r=t.ts;var n=arguments[1];var s=sg[i][n+1];var o=s?s.ts:performance.now();var l=o-r;e[a]=e[a]||0;e[a]+=l});Object.keys(e).forEach(function(t){var a=e[t];n.count("ws_tis_"+t,a)});var t=performance.now()-lg[i];var a=e[ug]||0;n.count("ws_tis_duration",t);n.count("ws_tis_duration_awake",t-a);lg[i]=performance.now();sg[i]=[{status:og[i],ts:window.performance.now()}]},s)}Object(M["a"])([{actions:[_["stateChanged"]],sideEffect:fg},{actions:[on["start"]],sideEffect:bg}]);function gg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload;var a=arguments[1];var r=arguments[2];if(!Object(j["isFeatureEnabled"])(r(),"feature_desync_resync"))return;if(!Object(mb["a"])(r()))return;a(Object(tr["a"])());a(db({interval:fb}));a(wb());t&&a(lb())}Object(M["a"])([{actions:[_["connected"]],sideEffect:gg}]);var _g={connectedSideEffect:gg};function yg(e,t){if(!Object(b["a"])())return;if(Object(Ce["a"])())return;t(Object(on["finalizeProvisionalConnection"])())}Object(M["b"])({actions:[_["provisionallyConnected"]],sideEffect:yg});var Og=function e(t,a,r){var n=r();var i=Object(ae["a"])({state:n,label:"THREADS"});if(!Object(j["isFeatureEnabled"])(n,"feature_react_threads"))return;var o=Object(H["g"])(n);if("thread"!==o&&"convo"!==o)return;var l=Object(H["c"])(n)[0];var c=Object(Vi["decodeThreadKey"])(l),u=c.channelId,d=c.threadTs;var p=t.type===g["a"].getType()&&Object(s["some"])(t.payload.channels,function(e){return e.id===u&&Object(P["isPrivateChannel"])(e)});var h=t.type===pe["removeTimestamp"].getType()&&t.payload.channelId===u&&t.payload.timestamp===d;switch(true){case p:i.action("Closing flexpane: user left private channel");break;case h:i.action("Closing flexpane: last message in thread deleted");break;default:break}(p||h)&&a(Object(Ka["a"])())};var kg=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.payload;var r=arguments[1];var n=arguments[2];if(a)return;var i=n();if(!Object(j["isFeatureEnabled"])(i,"feature_react_all_threads"))return;if(!Object(j["isClientApp"])(i))return;var s=Object(S["a"])(i);var o=Object(H["h"])(i)||!Object(H["e"])(i);if(s!==Rv["a"].allThreads||!o)return;Object(ae["a"])({state:i,label:"THREADS"}).info("Refreshing threads view on reconnect");r(Object(Nv["incrementAllThreadsRefreshCounter"])())};Object(M["b"])({actions:[g["a"]],sideEffect:Og,reasons:[I["a"].LEAVE_CHANNEL]});Object(M["b"])({actions:[pe["removeTimestamp"]],sideEffect:Og});Object(M["b"])({actions:[_["connected"]],sideEffect:kg});var Eg={};function Cg(e,t,a){var r=a();var n=Object(De["c"])(r);if(Eg[n])return;Eg[n]=setInterval(function(){t(Object(gv["checkTypingMap"])())},1e3)}function jg(e,t,a){var r=a();var n=Object(De["c"])(r);if(!Eg[n])return;clearInterval(Eg[n]);delete Eg[n]}Object(M["b"])({actions:[gv["updateTyping"]],sideEffect:Cg});Object(M["b"])({actions:[gv["clearTypingCleanupInterval"]],sideEffect:jg});var wg=a(409);var Sg=a(1472);var Ig="UNREAD-COUNTS";var Tg={};var Ag=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.teamId,r=t.counts,n=void 0===r?{}:r;var i=n.channels,s=void 0===i?[]:i,o=n.groups,l=void 0===o?[]:o,c=n.ims,u=void 0===c?[]:c,d=n.mpims,p=void 0===d?[]:d;Tg[a]=[].concat(m()(s),m()(l),m()(u),m()(p)).filter(function(e){return e.has_unreads||e.unread_count_display>0}).map(function(e){return e.id})};var Ng=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.teamId,r=t.channelId;var n=Tg[a];return o.a.includes(n,r)};var Pg={};function Rg(e){Pg[e]||Mg(e);return Pg[e]}function Mg(e){Pg[e]={}}var Dg={};function xg(e){Dg[e]||(Dg[e]={});return Dg[e]}function Fg(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"unread-counts/fetchHistoryForCounting";var i=a();var s=Object(De["c"])(i);var l=Rg(s);var c=Object(ae["a"])({state:i});if(l[e.id]){c.warn("Ignoring new unread counting history request for "+e.id);return}var u=xg(s);var d=u[e.id];if(d){if(!r||!o.a.isNumber(d)){c.info(Ig,"Dropping unread history request for "+e.id+" since there is already one pending");return}c.info(Ig,"Cancelling timer and making history request for "+e.id+" now");clearTimeout(u[e.id])}var p=r?0:o.a.random(2500,1e4);c.info(Ig,"Fetching history for unread counting: "+e.id+", waiting "+p+" ms");u[e.id]=setTimeout(function(){var a=!r&&t(Object(Xf["b"])({channelId:e.id}));if(a){delete u[e.id];return}c.info("HISTORY-FETCH","Fetching history for unread counting: "+e.id);u[e.id]=t(Object(or["b"])({channelId:e.id,type:Object(P["getChannelType"])(e),oldest:null,latest:null,reason:n})).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.msgs,n=a.hasMore,i=a.pinCount,s=a.deleted;l[e.id]=true;var c=o.a.map(r,"ts");t(Object(wg["a"])({msgs:r,channelId:e.id,latest:o.a.max(c),oldest:o.a.min(c),hasMore:{hasMoreStart:n,hasMoreEnd:false},forceUnreadCount:true,deleted:s}));o.a.isNumber(i)&&t(Object(Sm["updatePinCount"])({channelId:e.id,count:i}))}).finally(function(){delete u[e.id]})},p)}var Lg={};function Bg(e){Lg[e]||(Lg[e]={});return Lg[e]}function Ug(e,t,a){var r=e.id;var n=Object(ae["a"])({getState:a});var i=Bg(Object(De["c"])(a()));if(i[r]){n.info(Ig,"Ignoring redundant initial count sync request for "+e.id);return}i[r]=true;var s=o.a.random(2500,1e4);n.info(Ig,"Syncing initial counts for "+e.id+" in "+s+" ms");setTimeout(function(){t(Object(te["h"])({channelId:r})).then(function(a){var n=a.has_unreads?1:0;var i=o.a.isNumber(a.mention_count)?a.mention_count:0;var s=Object(P["isIm"])(e)||Object(P["isMpim"])(e)?i:n;t(Object(ge["setInitialUnreadCountsForChannel"])({id:r,unreadCnt:s,unreadHighlightCnt:i}))}).finally(function(){delete i[r]})},s)}function qg(e,t,a){var r=a();if(!Object(j["isFeatureEnabled"])(r,"feature_degraded_send")||!Object(j["shouldUseReactMessages"])(r)||!Object(j["isClientApp"])(r))return;if(Object(_["wasPreviouslyConnected"])(r))return;Gg(e,t,a)}function Gg(e,t,a){var r=a();if(!Object(j["shouldUseReactMessages"])(r)||!Object(j["isClientApp"])(r))return;var n=Object(_["wasLastConnectFast"])(r);if(n)return;var i=Object(De["c"])(r);Mg(i);t(Object(ge["setInitialUnreadCounts"])({}));var s=Object(j["isFeatureEnabled"])(r,"feature_vitess_sidebar")?Zf["a"]:Sg["a"];Object(ae["a"])({getState:a}).info(Ig,"Fetching counts");t(s()).tap(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ag({teamId:i,counts:e});return t(Object(Xf["a"])(e))}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(j["isFeatureEnabled"])(r,"feature_degraded_send")){var a=o.a.compact(o.a.concat(e.channels,e.groups));t(Object(de["s"])({channels:a}))}}).finally(function(){return t(lb())})}function Wg(e,t,a){var r=a();var n=Object(ae["a"])({state:r});var i=Object(De["c"])(r);if(!Object(j["shouldUseReactMessages"])(r))return;var s=e.payload,l=s.channelId,c=s.timestamps,u=s.forceUnreadCount,d=s.append,p=s.fromEvtLog;if(o.a.isEmpty(c))return;if(p)return;var h=false;var v=Object(T["d"])(r,l,h);if(!v)return;var m=Object(P["getLastReadTs"])(v);var f=Object(P["isRead"])(v);var b=o.a.some(c,function(e){return e>=m});if(!b&&!u)return;var g=l===Object(S["a"])(r);g&&n.info(Ig,"Counting unreads in "+l+" because ("+c.length+") timestamps added");var _=t(Object(Xf["b"])({channelId:l}));if(!_){var y=false;var O="unread-counts/onAddTimestamps";Vg(a,v,c)&&Fg(v,t,a,y,O)}if(c&&c.length>1&&f){var k=Object(T["d"])(a(),l);if(Object(P["isUnread"])(k)){var E=Hg(a,k)?"unexpected_unread_joins_after_loading_history":"unexpected_unread_after_loading_history";n.error({id:l,initial:Object(ge["getInitialUnreadCountsByChannelId"])(a(),l)},E);n.info(Ig,l+" initially marked unread in the users.counts || client.counts response: "+Ng({teamId:i,channelId:l}))}}if(Object(j["isFeatureEnabled"])(r,"feature_degraded_send")){var C=e.payload,w=C.hasMore,I=C.oldest;var A=o.a.get(w,"hasMoreEnd",!I||w);if(c&&b&&!A){var N=false;g&&n.info(Ig,"Checking unreads in "+l+" after a new message");je(l,t,a,N)}}else if(c&&1===c.length&&c[0]>m){var R=!d;g&&n.info(Ig,"Checking unreads in "+l+" after a new message");je(l,t,a,R)}}function Hg(e,t){var a=Object(j["getCurrentUserId"])(e());var r=Object(pe["getTimestampsByChannelId"])(e(),t.id);if(!r||o.a.isEmpty(r.timestamps))return false;var n=r.timestamps.map(function(a){return Object(fe["a"])(e(),t.id,a)});var i=Object(P["getLastReadTs"])(t);var s=n.filter(function(e){return Object(Sv["isMessageUnread"])(e,i,a)});if(o.a.isEmpty(s))return false;return o.a.every(s,function(e){return Object(Sv["isJoinLeave"])(e)})}function Vg(e,t,a){if(Object(P["isIm"])(t)||Object(P["isMpim"])(t))return true;var r=e();var n=o.a.map(a||[],function(e){return Object(fe["a"])(r,t.id,e)});return o.a.some(n,function(e){if(!e)return false;var t=Object(Uv["f"])(e);return t.non_channel_mentions})}function Kg(e,t,a){var r=a();var n=Object(ae["a"])({state:r});if(!Object(j["shouldUseReactMessages"])(r))return;var i=e.payload,s=i.channelId,o=i.timestamp,l=i.forceUnreadCount,c=i.fromEvtLog;if(c)return;if(!o)return;var u=false;var d=Object(T["d"])(r,s,u);if(!d)return;var p=Object(P["getLastReadTs"])(d);if(o<p&&!l)return;n.info(Ig,"Counting unreads in "+s+" because message removed");var h=t(Object(Xf["b"])({channelId:s}));h||zg({dispatch:t,getState:a,channel:d,timestamp:o})&&Ug(d,t,a)}function zg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getState,a=e.channel,r=e.timestamp;var n=Object(pe["getTimestampsByChannelId"])(t(),a.id,null),i=n.timestamps,s=n.start;var o=Object(P["getLatestTs"])(a,i);var l=s||o+1e-6;return r<l}function Yg(e,t,a){if(!e.payload.last_read)return;var r=a();var n=Object(ae["a"])({state:r});if(!Object(j["shouldUseReactMessages"])(r))return;var i=e.payload.id;var s=false;var o=Object(T["d"])(r,i,s);if(!o)return;if(Object(P["isFromAnotherTeam"])(o))return;n.info(Ig,"Counting unreads in "+i+" because last_read changed to "+e.payload.last_read);var l=t(Object(Xf["b"])({channelId:i}));if(!l){var c=true;var u="unread-counts/onLastReadUpdated";Fg(o,t,a,c,u)}}function Qg(e,t,a){var r=a();var n=Object(ae["a"])({state:r});if(!Object(j["shouldUseReactMessages"])(r))return;var i=e.payload,s=i.id,o=i.unreadCnt,l=i.unreadHighlightCnt;var c=false;var u=Object(T["d"])(r,s,c);if(!u)return;n.info(Ig,"Counting unreads in "+s+" because initial counts updated to {"+o+", "+l+"}");t(Object(Xf["b"])({channelId:s}))}function Jg(e,t,a){var r=a();if(!Object(j["isFeatureEnabled"])(r,"feature_incremental_unread_counts"))return;var n=o.a.keys(Object(Vm["getMutedChannels"])(r));if(!n||!n.length)return;t(Object(ge["maybeStopCountingChannels"])({channelIds:n}))}function Zg(e,t,a){var r=a();if(!Object(j["isFeatureEnabled"])(r,"feature_incremental_unread_counts"))return;var n=e&&e.payload&&e.payload.channels;if(!n||!n.length)return;t(Object(ge["maybeStopCountingChannels"])({channelIds:o.a.map(n,"id")}))}Object(M["b"])({actions:[_["troubleConnecting"]],sideEffect:qg});Object(M["b"])({actions:[_["connected"]],sideEffect:Gg});Object(M["b"])({actions:[pe["addTimestamps"]],sideEffect:Wg});Object(M["b"])({actions:[pe["removeTimestamp"]],sideEffect:Kg});Object(M["b"])({actions:[g["c"]],sideEffect:Yg});Object(M["b"])({actions:[ge["setInitialUnreadCountsForChannel"]],sideEffect:Qg});Object(M["b"])({actions:[Vm["setMutedChannel"],Vm["setMutedChannels"]],sideEffect:Jg});Object(M["b"])({actions:[g["a"]],sideEffect:Zg,reasons:[I["a"].ARCHIVE_CHANNEL,I["a"].LEAVE_CHANNEL]});var Xg={shouldFetchHistoryAfterTimestampsAdded:Vg,shouldFetchHistoryAfterTimestampRemoved:zg,syncInitialCounts:Ug};function $g(e,t,a){var r=a();var n=Object(De["c"])(r);var i=Object(wv["a"])(n);i.onDisconnect()}function e_(e,t,a){var r=e&&e.payload&&e.payload.reason;if(r!==I["a"].LEAVE_CHANNEL)return;var n=a();var i=Object(De["c"])(n);var s=Object(wv["a"])(i);s.onChannelLeave()}Object(M["b"])({actions:[_["disconnected"]],sideEffect:$g});Object(M["b"])({actions:[g["a"]],sideEffect:e_});var t_="USER_GROUP_MEMBERSHIP";var a_=Object(Hn["a"])("Fetch user groups by id",function(e,t){return e(Object(Vn["a"])({method:"subteams.membership",reason:"user-group-membership-api/fetchUserGroupMembership"})).then(function(e){return e.subteams}).catch(function(e){if(e.data&&"user_is_restricted"===e.data.error){Object(ae["a"])({getState:t}).warn(t_,"subteams.membership failed with user_is_restricted: Guests are not allowed to have user groups");return[]}Object(ae["a"])({getState:t}).error(t_,"failed to fetch user group membership");throw e})});a_.propTypes=null;function r_(e,t,a){var r=a();var n=Object(ae["a"])({state:r});if(!Object(j["isFeatureEnabled"])(r,"feature_lazy_user_groups")||!Object(j["isClientApp"])(r))return Promise.resolve();var i=Object(_["wasLastConnectFast"])(r);if(i)return Promise.resolve();if(!Object(Ce["a"])())return Promise.resolve();if(Object(_["isFirstConnection"])(r))return Promise.resolve();t(Object(Mb["clearAllUserGroupMembership"])());return t(a_()).then(function(e){if(!e)return;t(Object(Mb["bulkAddUserGroupMembership"])({userGroups:e,isMember:true}));n.info(t_,"Completed subteams.membership processing")})}Object(M["b"])({actions:[_["connected"],tr["b"]],sideEffect:r_});var n_={updateUserGroups:r_};function i_(e,t,a){Object(ae["a"])({getState:a}).info("WINDOW-UNLOADING","workspace handling window unloading event")}Object(M["b"])({actions:[he["setUnloading"]],sideEffect:i_});var s_=a(683);var o_=a(1511);var l_=a(533);var c_=a(787);var u_=a(184);var d_=a(36);var p_;var h_={serviceOnline:true,lastSocketActivity:0,clientOnline:true,lastClientConnection:Date.now()};var v_=Object(d_["b"])((p_={},An()(p_,Ge["b"],function(e,t){return i()({},e,{serviceOnline:!!t})}),An()(p_,Ge["c"],function(e){return i()({},e,{lastSocketActivity:Date.now()})}),An()(p_,Ge["a"],function(e,t){return i()({},e,{clientOnline:!!t,lastClientConnection:Date.now()})}),p_),h_,{persistenceEnabled:false});v_.propTypes={serviceOnline:Et["b"].bool.isRequired,lastSocketActivity:Et["b"].number.isRequired,clientOnline:Et["b"].bool.isRequired,lastClientConnection:Et["b"].number.isRequired};var m_=v_;var f_=a(1195);var b_=a(911);var g_=a(684);var __=a(455);var y_=a(236);var O_=a(760);var k_=a(1199);var E_=a(1080);var C_=a(513);var j_=a(912);var w_=a(177);var S_=a(1169);var I_=a(1512);var T_=a(1256);var A_=a(1254);var N_=a(576);var P_;var R_={channelId:null,startTs:null,highlightTs:null,highlightLazy:null,highlightsBackButtonVisible:false,userSetUnreadPoint:false,unreadLineVisible:false,ghostLastRead:null,scrollmarks:{},overlayVisible:false,prevChannelId:null,prevChannelSwitchTs:null,newxpOnboardingStep:null,hasMessagePaneUnmounted:false,isAppSpaceOpen:false,focusRequestedTs:void 0};var M_=Object(d_["b"])((P_={},An()(P_,w["e"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.startTs,n=t.startTsOffset,s=t.highlightTs,o=t.ghostLastRead,l=t.prevChannelId;return i()({},e,{channelId:a,startTs:r||null,startTsOffset:n,highlightTs:s||null,highlightsBackButtonVisible:false,userSetUnreadPoint:false,unreadLineVisible:false,ghostLastRead:o,prevChannelId:l,prevChannelSwitchTs:String(Date.now()/1e3)})}),An()(P_,w["c"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ts,r=t.offset,n=t.highlight,s=t.highlightLazy;var l=n?a:o.a.uniqueId();return i()({},e,{startTs:a,startTsOffset:r,highlightTs:l,highlightLazy:s})}),An()(P_,w["a"],function(e){return i()({},e,{highlightTs:null,highlightLazy:null})}),An()(P_,w["o"],function(e){return i()({},e,{userSetUnreadPoint:true,ghostLastRead:null})}),An()(P_,w["b"],function(e,t){if(t!==e.channelId)return e;if(!e.userSetUnreadPoint)return e;return i()({},e,{userSetUnreadPoint:false})}),An()(P_,w["i"],function(e,t){return i()({},e,{ghostLastRead:t})}),An()(P_,w["j"],function(e,t){return i()({},e,{highlightsBackButtonVisible:t})}),An()(P_,w["n"],function(e,t){if(t===e.unreadLineVisible)return e;return i()({},e,{unreadLineVisible:t})}),An()(P_,w["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.scrollmark;return i()({},e,{scrollmarks:i()({},e.scrollmarks,An()({},a,r))})}),An()(P_,w["m"],function(e,t){if(e.overlayVisible===t)return e;return i()({},e,{overlayVisible:t})}),An()(P_,w["f"],function(e,t){return i()({},e,{channelSessionId:t})}),An()(P_,w["l"],function(e,t){return i()({},e,{newxpOnboardingStep:t})}),An()(P_,w["k"],function(e,t){return i()({},e,{hasMessagePaneUnmounted:t})}),An()(P_,w["g"],function(e,t){return i()({},e,{isAppSpaceOpen:t})}),An()(P_,w["h"],function(e,t){return i()({},e,{focusRequestedTs:t})}),P_),R_,{persistenceEnabled:true});M_.propTypes={channelId:Et["b"].string,startTs:Et["b"].string,highlightTs:Et["b"].string,highlightLazy:Et["b"].bool,highlightsBackButtonVisible:Et["b"].bool,userSetUnreadPoint:Et["b"].bool,unreadLineVisible:Et["b"].bool,ghostLastRead:Et["b"].string,scrollmarks:Et["b"].objectOf(Et["b"].object),overlayVisible:Et["b"].bool,prevChannelId:Et["b"].string,prevChannelSwitchTs:Et["b"].string,newxpOnboardingStep:Et["b"].string,hasMessagePaneUnmounted:Et["b"].bool,isAppSpaceOpen:Et["b"].bool};var D_=M_;var x_=a(530);var F_=a(1513);var L_=a(564);var B_=a(917);var U_=a(1081);var q_=a(1222);var G_=a(806);var W_=a(1184);var H_=a(518);var V_;var K_="notifications";var z_={showOpenTransition:true,lastActiveSection:K_};var Y_={user:{},team:{},enterprise:{},userColors:{},notifications:{},uiState:z_};var Q_="all_notifications_prefs";var J_="user_colors";var Z_="frecency_jumper";var X_="frecency_ent_jumper";var $_="emoji_use";function ey(e){var t;var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.pref,n=a.value;var s=arguments[2];if(!r||!s)return e;if(e[s]&&e[s][r]===n)return e;var o=e.notifications;"user"===s&&r===Q_&&(o=Object(H_["a"])(n));var l=e.userColors;"user"===s&&r===J_&&(l=Object(H_["a"])(n));var c=e.user&&e.user.frecency_jumper;"user"===s&&r===Z_&&(c=Object(H_["a"])(n));var u=e.user&&e.user.frecency_ent_jumper;"user"===s&&r===X_&&(u=Object(H_["a"])(n));var d=e.user&&e.user[$_];"user"===s&&r===$_&&(d=Object(H_["a"])(n));return i()({},e,An()({notifications:o,userColors:l},s,i()({},e[s],(t={},An()(t,r,n),An()(t,"emoji_use",d),An()(t,"frecency_jumper",c),An()(t,"frecency_ent_jumper",u),t))))}var ty=Object(d_["b"])((V_={},An()(V_,W["c"],function(e,t){var a=t&&Object(H_["a"])(t[Q_]);var r=t&&Object(H_["a"])(t[J_]);var n=t&&Object(H_["a"])(t[$_]);var s=t&&Object(H_["a"])(t[Z_]);var o=t&&Object(H_["a"])(t[X_]);return i()({},e,{user:i()({},t,{emoji_use:n,frecency_jumper:s,frecency_ent_jumper:o}),userColors:r,notifications:a})}),An()(V_,W["b"],function(e,t){return ey(e,t,"user")}),An()(V_,q_["a"],function(e,t){return ey(e,t,"team")}),An()(V_,W["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var a=false;if(0===Object.keys(t).length)return e;var r=i()({},e.user);var n=e.notifications;var o=e.userColors;Object(s["forEach"])(t,function(t,i){if(e.user[i]!==t){a=true;r[i]=t;i===Q_&&(n=Object(H_["a"])(t));i===J_&&(o=Object(H_["a"])(t))}});if(!a)return e;return i()({},e,{notifications:n,userColors:o,user:r})}),An()(V_,q_["b"],function(e,t){return i()({},e,{team:t})}),An()(V_,Ym["b"],function(e,t){return i()({},e,{enterprise:t})}),An()(V_,Ym["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.pref,r=t.value;if(!a||null==r)return e;var n=e.enterprise;var s=n.org_prefs;return i()({},e,{enterprise:i()({},n,{org_prefs:i()({},s,An()({},a,r))})})}),An()(V_,G_["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.name,r=t.value,n=t.sync,s=void 0!==n&&n;if(!a||null==r)return e;var o=e.notifications.global||{};if(!s||"global_desktop"!==a&&"global_mobile"!==a)o[a]=r;else{o.global_desktop=r;o.global_mobile=r}var l={channels:e.notifications.channels,global:i()({},o)};return i()({},e,{notifications:l})}),An()(V_,G_["c"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.name,n=t.value,s=t.sync;if(!a||!r||null==n)return e;if(s&&"desktop"!==r)throw new Error("Cannot use sync arg with "+r+", can only be applied when name is 'desktop'");var o=e.notifications&&e.notifications.channels||{};var l=o[a]||{};if(s&&l.desktop===n&&l.mobile===n)return e;if(l[r]===n)return e;var c=i()({},l,An()({},r,n));s&&(c.mobile=n);var u=i()({},e.notifications,{channels:i()({},o,An()({},a,i()({},c)))});return i()({},e,{notifications:u})}),An()(V_,G_["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId;if(!a)return e;if(!e.notifications||!e.notifications.channels)return e;var r=Object(s["omit"])(e.notifications.channels,a);return i()({},e,{notifications:i()({},e.notifications,{channels:r})})}),An()(V_,G_["b"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.override;if(!a||!r)return e;return i()({},e,{notifications:i()({},e.notifications,{channels:i()({},e.notifications.channels,An()({},a,r))})})}),An()(V_,Wm,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ey(e,t,"user")}),An()(V_,W_["b"],function(e,t){return i()({},e,{uiState:{showOpenTransition:t,lastActiveSection:e.uiState.lastActiveSection}})}),An()(V_,W_["a"],function(e,t){return i()({},e,{uiState:{showOpenTransition:e.uiState.showOpenTransition,lastActiveSection:t}})}),V_),Y_,{persistenceEnabled:true});ty.propTypes={user:Et["b"].objectOf(Et["b"].any),team:Et["b"].objectOf(Et["b"].any),enterprise:Et["b"].objectOf(Et["b"].any),userColors:Et["b"].objectOf(Et["b"].string),notifications:Et["b"].shape({global:Et["b"].object,channels:Et["b"].any}),uiState:Et["b"].shape({showOpenTransition:Et["b"].bool,lastActiveSection:Et["b"].string})};var ay=ty;var ry={DEFAULT_UI_STATE:z_};var ny=a(146);var iy=a(198);var sy=a(1514);var oy=a(273);var ly=a(434);var cy=a(1259);var uy=a(232);var dy;var py={};var hy=function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!a.length)return t;var n=i()({},t);a.forEach(function(e){n[e]=i()({},n[e],{desynced:r})});return n};var vy=Object(d_["b"])((dy={},An()(dy,tr["c"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var a=true;return hy(e,t,a)}),An()(dy,tr["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var a=false;return hy(e,t,a)}),An()(dy,tr["a"],function(){return{}}),dy),py,{persistenceEnabled:false});vy.propTypes=Et["b"].objectOf(Et["b"].shape({desynced:Et["b"].bool}));var my=vy;var fy=a(856);var by=a(1432);var gy=a(1547);var _y;var yy={newUnreadMsgCount:0,refreshId:0};var Oy=Object(d_["b"])((_y={},An()(_y,gy["c"],function(e,t){return i()({},e,{newUnreadMsgCount:t})}),An()(_y,gy["a"],function(e){var t=e.refreshId||0;return i()({},e,{refreshId:t+1})}),_y),yy,{persistenceEnabled:false});Oy.propTypes={newUnreadMsgCount:Et["b"].number};var ky=Oy;var Ey=a(692);var Cy=a(1515);var jy;var wy=Object(d_["b"])((jy={},An()(jy,me["c"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.id;if(!a)return e;return i()({},e,{primaryViewId:a})}),An()(jy,me["e"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.flexName,r=t.flexParams,n=void 0===r?[]:r,s=t.flexOrigin,o=void 0===s?null:s,l=t.flexOriginId,c=void 0===l?null:l;return i()({},e,{flexName:a,flexParams:n,flexOrigin:o,flexOriginId:c})}),An()(jy,me["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.flexOrigin,r=void 0===a?null:a,n=t.flexOriginId,s=void 0===n?null:n;return i()({},e,{flexOrigin:r,flexOriginId:s})}),An()(jy,me["b"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.flexRestore,r=void 0===a?null:a;return i()({},e,{flexRestore:r})}),An()(jy,me["d"],function(e,t){return i()({},e,{focusedWorkspaces:t})}),jy),{},{persistenceEnabled:true});wy.propTypes={primaryViewId:Et["b"].string,flexName:Et["b"].string,flexParams:Et["b"].arrayOf(Et["b"].string),flexOrigin:Et["b"].string,flexRestore:Et["b"].object,flexOriginId:Et["b"].string,focusedWorkspaces:Et["b"].arrayOf(Et["b"].string)};var Sy=wy;var Iy=a(237);var Ty=a(1082);var Ay;var Ny=(Ay={},An()(Ay,g["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channels,r=t.reason;var n=false;if(!r){Object(ae["b"])().warn("addOrReplace action must have a reason! Ignoring.");return e}if(!a||!a.length)return e;var s=i()({},e);a.forEach(function(e){if(e&&e.id){n=true;s[e.id]=e}});return n?s:e}),An()(Ay,g["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.ids;if(!a||!a.length)return e;return o.a.omit(e,a)}),Ay);var Py=Object(d_["b"])(Ny,{},{persistenceEnabled:true});Py.propTypes=Et["b"].objectOf(Et["b"].shape({id:Et["b"].string.isRequired}));var Ry={reducerConfig:Ny};var My=Py;var Dy=a(1479);var xy=a(1480);var Fy=a(895);var Ly=a(686);var By=Object(c["a"])({channelNamesToIds:Dy["default"],inviters:bv["default"],mutedChannels:Vm["default"],needsApiMarking:xy["default"],needsCreatedMessage:Fy["default"],prqMetrics:Ly["default"]});var Uy=By;var qy=a(411);var Gy=a(581);var Wy=a(1430);var Hy=a(1103);var Vy;var Ky={};var zy=Object(d_["b"])((Vy={},An()(Vy,Hy["b"],function(e,t){if(!t||!t.id)return e;return i()({},e,t)}),An()(Vy,Hy["c"],function(e,t){if(!t)return e;var a=i()({},e);a.name=t;return a}),Vy),Ky,{persistenceEnabled:true});zy.propTypes={id:Et["b"].string.isRequired,domain:Et["b"].string,icon:Et["b"].object,locale:Et["b"].string,name:Et["b"].string,pay_prod_cur:Et["b"].string,primary_owner:Et["b"].shape({id:Et["b"].string,email:Et["b"].string}),saml_provider:Et["b"].string,sso_provider:Et["b"].shape({type:Et["b"].string,name:Et["b"].string,label:Et["b"].string})};var Yy=zy;var Qy=a(1079);var Jy=a(914);var Zy=a(1196);var Xy;var $y=function e(t){return t&&t.profile&&t.profile.fields};var eO=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r=false;if(a.possible_values&&$y(t)){var n=t.profile.fields[a.id];r=void 0!==n&&-1===a.possible_values.indexOf(n.value)}return r};var tO=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return i()({},t,{profile:i()({},t.profile,{fields:Object(s["omit"])(t.profile.fields,a)})})};var aO=Object(d_["b"])((Xy={},An()(Xy,A["b"],function(e,t){if(!t||!t.id)return e;return i()({},e,An()({},t.id,t))}),An()(Xy,A["c"],function(e,t){if(!t||!t.length||!Object(s["isArray"])(t))return e;var a=i()({},e);t.forEach(function(e){a[e.id]=e});return a}),An()(Xy,A["g"],function(e,t){if(!t||!t.id||!e[t.id])return e;return Object(s["omit"])(e,t.id)}),An()(Xy,A["a"],function(e,t){if(!t||!t.length||!Object(s["isArray"])(t))return e;return Object(s["omit"])(e,Object(s["map"])(t,"id"))}),An()(Xy,A["f"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var a=Object(s["compact"])(t.map(function(t){return e[t.id]}));var r=e[Pi["SLACKBOT_ID"]];var n=Object(s["uniq"])([r].concat(m()(a)));var i=n.reduce(function(e,t){t&&(e[t.id]=t);return e},{});return i}),An()(Xy,A["e"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.fieldsToDelete;var r=Object(s["reduce"])(e,function(e,t,r){$y(t)&&Object(s["some"])(a,function(e){return void 0!==t.profile.fields[e]})&&(e[r]=tO(t,a));return e},{});if(Object(s["isEmpty"])(r))return e;return i()({},e,r)}),An()(Xy,A["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.fields,r=void 0===a?[]:a;var n=Object(s["reduce"])(e,function(e,t,a){if($y(t)){var n=Object(s["filter"])(r,function(e){return eO(t,e)});n.length>0&&(e[a]=tO(t,n.map(function(e){return e.id})))}return e},{});if(Object(s["isEmpty"])(n))return e;return i()({},e,n)}),Xy),{},{persistenceEnabled:true});aO.propTypes=Et["b"].objectOf(Et["b"].shape({id:Et["b"].string.isRequired}));var rO=aO;var nO=a(1516);var iO;var sO=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.channelId,n=a.ts,s=a.isHidden;var o=t[r];if(!o)return t;var l=o[n];if(!l)return t;if("thread_broadcast"!==l.subtype)return t;if(!!l._hidden_reply===s)return t;return i()({},t,An()({},r,i()({},o,An()({},n,i()({},l,{_hidden_reply:s})))))};var oO=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.messages,n=a.replace;var s=r.map(function(e){var t=e.file&&e.file.id?{file:e.file.id}:{};var a=o.a.map(o.a.compact(e.files),function(e){return e.id||e});var r=a&&a.length?{files:a}:{files:void 0};var n=performance.now().toString();return i()({},e,t,r,{__meta__:{lastUpdatedTs:n}})});var l=o.a.groupBy(s,"channel");var c=o.a.mapValues(l,function(e,a){return i()({},t[a])||{}});o.a.forEach(l,function(e,t){o.a.forEach(e,function(e){c[t][e.ts]=n?e:i()({},c[t][e.ts],e)})});return i()({},t,c)};var lO=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.messages,n=a.replace;if(!r||!r.length||!o.a.isArray(r))return t;var i=o.a.compact(o.a.map(r,"root"));var s=oO(t,{messages:r,replace:n});if(i.length)return oO(s,{messages:i,replace:false});return s};var cO={};var uO=Object(d_["b"])((iO={},An()(iO,Hi["a"],function(e,t){return lO(e,{messages:t})}),An()(iO,Hi["i"],function(e,t){return lO(e,{messages:t,replace:true})}),An()(iO,Hi["h"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channel,r=t.ts;if(!a||!r)return e;return i()({},e,An()({},a,o.a.omit(e[a],r)))}),An()(iO,Hi["f"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channel,r=t.oldestAllowableTs;if(!a||!r)return e;if(!e[a])return e;var n=parseFloat(r);if(isNaN(n))throw new Error("Invalid oldestAllowableTs");return i()({},e,An()({},a,o.a.omitBy(e[a],function(e,t){return parseFloat(t)<n})))}),An()(iO,Hi["e"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId;if(!a)return e;if(!e[a])return e;return o.a.omit(e,a)}),An()(iO,Hi["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.ts;return sO(e,{channelId:a,ts:r,isHidden:true})}),An()(iO,Hi["l"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.ts;return sO(e,{channelId:a,ts:r,isHidden:false})}),An()(iO,Hi["c"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.ts,n=t.text,s=t.blocks,l=t.memberId,c=t.editTs;var u=e[a];if(!u)return e;var d=e[a][r];if(!d)return e;if(s){if(o.a.isEqual(s,d.blocks))return e}else if(d.text===n)return e;var p=void 0;l&&(p={user:l,ts:c});var h=i()({},d,{edited:p});s?h.blocks=s:h.text=n;return i()({},e,An()({},a,i()({},u,An()({},r,h))))}),An()(iO,Hi["j"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.messageTs,n=t.attachmentId,s=t.actionId,o=t.isPending;var l=e[a][r];if(!l)return e;var c=l.__meta__||{};var u=An()({},"attachment-"+n+"-isPending",o);var d=An()({},"attachment-"+n+"-action-"+s+"-isPending",o);return i()({},e,An()({},a,i()({},e[a],An()({},r,i()({},l,{__meta__:i()({},c,u,d)})))))}),An()(iO,Hi["k"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.messageTs,n=t.attachmentId,s=t.isShowing;var o=e[a][r];if(!o)return e;var l=o.__meta__||{};var c=An()({},"attachment-"+n+"-loaderIsShowing",s);return i()({},e,An()({},a,i()({},e[a],An()({},r,i()({},o,{__meta__:i()({},l,c)})))))}),An()(iO,Hi["g"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.channelId,r=t.messageTs,n=t.attachmentId;var s=e[a];if(!s)return e;var l=s[r];if(!l)return e;var c=o.a.find(l.attachments,{id:n});if(!c)return e;return i()({},e,An()({},a,i()({},s,An()({},r,i()({},l,{attachments:o.a.reject(l.attachments,{id:n})})))))}),An()(iO,Hi["b"],function(){return cO}),iO),cO,{persistenceEnabled:true});uO.propTypes=Et["b"].objectOf(Et["b"].objectOf(Et["b"].shape({ts:Et["b"].string,type:Et["b"].string,user:Et["b"].string})));var dO=uO;var pO=a(1194);var hO=a(1357);var vO=a(399);var mO=function(e,t){var a=i()({},e);var r={};Object(s["forEach"])(t,function(e){var t=Object(vO["f"])(e);if(!Object(s["startsWith"])(t,"/"))return;var n=Object(vO["a"])(e);if(n){r[n]=r[n]||[];r[n].push(t);return}var o=Object(vO["d"])(e);Object(hO["a"])(o)||(a[o]=i()({autocomplete:true},e,{isServer:true}))});if(!Object(s["isEmpty"])(r)){var n=Object(s["keyBy"])(a,vO["f"]);Object(s["forEach"])(r,function(e,t){var a=n[t];if(!a)return;a.aliases=e})}return a};var fO;var bO={commands:{},cacheTs:null};var gO=Object(d_["b"])((fO={},An()(fO,Mh["c"],function(){return bO}),An()(fO,Mh["b"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.commandName;var r=e.commands,n=r[a],s=Rs()(r,[a]);if(!n)return e;return i()({},e,{commands:s})}),An()(fO,Mh["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.commands,r=void 0===a?[]:a,n=t.cacheTs;if(Object(s["isEmpty"])(r))return e;var i=mO(e.commands,Object(s["keyBy"])(r,"name"));return{commands:i,cacheTs:n}}),fO),bO,{persistenceEnabled:true});gO.propTypes=Et["b"].shape({commands:Et["b"].objectOf(Et["b"].shape({app:Et["b"].string,autocomplete:Et["b"].bool,desc:Et["b"].string,isServer:Et["b"].bool,name:Et["b"].string,usage:Et["b"].string})),cacheTs:Et["b"].string});var _O=gO;var yO;var OO={};var kO=Object(d_["b"])((yO={},An()(yO,p["a"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.id;return i()({},e,{enterpriseId:a})}),An()(yO,p["b"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.id;return i()({},e,{teamId:a})}),yO),OO,{persistenceEnabled:true});kO.propTypes=Et["b"].shape({enterpriseId:Et["b"].string,teamId:Et["b"].string});var EO=kO;var CO=a(1140);var jO;var wO=Object(ae["b"])();var SO=Object(d_["b"])((jO={},An()(jO,Nb["a"],function(e,t){if(!t||!t.id){wO.warn('addGroup: user group missing required "id" prop');return e}var a=i()({},e);a[t.id]=i()({},t);return a}),An()(jO,Nb["c"],function(e,t){if(!t||!t.length)return e;var a=t.some(function(e){return e.id});if(!a)return e;var r=i()({},e);t.forEach(function(e){if(!e.id){wO.warn('bulkAddGroups: user group missing required "id" prop');return}r[e.id]=i()({},e,{users:e.users||[]})});return r}),An()(jO,Nb["d"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId,r=t.users,n=void 0===r?[]:r;if(!n||!a||!e[a])return e;var s=i()({},e[a]);s.users=n;s.user_count=n.length;return i()({},e,An()({},a,s))}),An()(jO,Nb["b"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId,r=t.memberId;if(!r||!a||!e[a]||Object(s["includes"])(e[a].users,r))return e;var n=i()({},e[a]);n.users=[].concat(m()(n.users||[]),[r]);return i()({},e,An()({},a,n))}),An()(jO,Nb["l"],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.groupId,r=t.memberId;if(!r||!a||!e[a]||!Object(s["includes"])(e[a].users,r))return e;var n=e[a],o=n.users,l=Rs()(n,["users"]);l.users=Object(s["without"])(o,r);return i()({},e,An()({},a,l))}),An()(jO,Nb["k"],function(e,t){if(!t)return e;var a=Object(s["omit"])(e,t);return a}),jO),{},{persistenceEnabled:true});SO.propTypes=Et["b"].objectOf(Et["b"].shape({id:Et["b"].string.isRequired,users:Et["b"].array}));var IO=SO;var TO=a(1683);var AO=a.n(TO);var NO=a(527);var PO="_testOnlySpyableDispatch";var RO=function(){return function(e){var t=function e(){return e[PO].apply(e,arguments)};t[PO]=e;return t}};var MO=a(250);var DO=Object(MO["b"])("Handle side effects",function(e,t,a){var r=M["c"][a.type];r&&Promise.resolve().then(function(){r.forEach(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.sideEffect,n=void 0===r?o.a.noop:r,i=t.reasons,s=void 0===i?[]:i;if(s.length){var l=a&&a.payload&&a.payload.reason;if(!o.a.includes(s,l))return}n(a,e.dispatch,e.getState)})});return t(a)});var xO=DO;var FO=[];var LO=Object(ae["b"])();var BO=Object(MO["b"])("Allows devs to get console logging or trigger breakpoints when state they care about changes",function(e,t,a){var r=[];var n=e.getState();FO.forEach(function(e){r.push(e(n,a))});var i=t(a);var s=e.getState();FO.forEach(function(e,t){var n=e(s,a);if(r[t]!==n){LO.warn("redux watcher","watcher value has changed! \nAction: ",a,"\nBefore: ",r[t],"\nAfter:  ",n);et["isDev"]||et["isJsPath"]}});return i});var UO=BO;function qO(e){if(!o.a.isFunction(e)){LO.error("watcherFn passed in to addWatcher must be a function");return}FO.push(e)}function GO(){FO=[]}Object(u["exportToGlobalDebugger"])("reduxWatcher",{addWatcher:qO,clearAllWatchers:GO});var WO=a(311);var HO=a(1072);var VO="DESKTOP-MIDDLEWARE";var KO=[];var zO=Object(HO["a"])([function(e){return Object(G["f"])(e,"sidebar_theme")},G["c"],ee["b"]],function(e,t,a){var r=Object(Qb["e"])(e,t,{useGlobalNav:a});return{titlebarBackground:Object(WO["c"])(r.column_bg,32,{outputHex:true}),titlebarTextColor:r.text_color}});var YO=Object(HO["a"])(KO.map(function(e){return function(t){return Object(j["isFeatureEnabled"])(t,e)}}),function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(s["fromPairs"])(KO.map(function(e,a){return[e,t[a]]}))});var QO=Object(HO["a"])([function(e){return Object(j["isFeatureEnabled"])(e,"feature_desktop_sonic_rollout")}],function(e){return{isSonicEnabled:e}});function JO(){return"beta"===Object(Va["getReleaseChannel"])()}var ZO=Object(HO["a"])([zO,YO,QO],function(e,t,a){return{theme:e,featureFlags:t,bootConfig:a}});var XO={};var $O=Object(MO["b"])("Handle desktop data sync",function(e,t,a){var r=e.getState();var n=Object(d["getTeamId"])(r);if(!n)return t(a);XO[n]||(XO[n]={});var o=ZO(r);var l=Object.entries(o).reduce(function(e,t){var a=K()(t,2),r=a[0],s=a[1];if(XO[n][r]===s)return e;XO[n][r]=s;return i()({},e,An()({},r,s))},{});if(!Object(s["isEmpty"])(l)){Object(ae["a"])({getState:e.getState}).info(VO,"Forwarding redux payload to desktop",Object.keys(l));var c=An()({},n,l);Object(Va["dispatchReduxUpdate"])({teams:c})}return t(a)});var ek=$O;var tk=a(1283);var ak=a(172);var rk=[];var nk=1e4;var ik={};function sk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,a=e.reducerConfig;var r=Object(De["c"])(t);var n=ik[r]||{};ik[r]=t;t&&Object.keys(t).forEach(function(e){if(t[e]===n[e])return;var r=Object(ak["j"])(a&&a[e]);if(!r){Object(ae["b"])().error('dev-only-unserializable-state-detector-middleware cannot find a persistence config for the store "'+e+'". Please share this message in #devel-redux-persist');return}var i=r.persistenceEnabled,s=r.beforeWriteTransform;if(!i)return;var o=s?s(t[e]):t[e];if(!Object(tk["a"])(o)){if(rk.includes(e))return;Object(ae["b"])().error('Redux store "'+e+'" has unserializable state!\nFix this by ensuring that the store contains no functions or promises.\nAre you not working on the '+e+" store? Were you just minding your own business when this error popped up out of nowhere?\nPlease DM @drew this error message and he'll look into it.");rk.push(e)}})}var ok=Object(s["throttle"])(sk,nk);var lk=ok;var ck=Object(MO["b"])("In dev, warns when store state is unserializable",function(e,t,a){var r=(et["isDev"]||et["isJsPath"])&&!Object(Ce["a"])();if(!r)return t(a);var n=e.getState();var i=t(a);var s=Object(De["c"])(n);var o=Object(ak["i"])(s);if(!s)return i;var l=e.getState();ok({state:l,reducerConfig:o});return i});var uk=ck;var dk={resetLoggedOffenders:function e(){rk=[]},validateState:sk,setPrevStateForTeamId:function e(t,a){ik[t]=a},replaceThrottledValidateState:function e(t){ok=t},resetThrottledValidateState:function e(){ok=lk}};var pk=a(1484);var hk={},vk=hk.getImmediatelyPersistedState,mk=hk.clearImmediatelyPersistedState;var fk=100;var bk={};var gk={};var _k=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};bk[t]=a};var yk=function e(t){return bk[t]||{}};var Ok=function e(t,a){try{localStorage.setItem(t,JSON.stringify(a))}catch(e){}};var kk=function e(t){var a=void 0;try{a=JSON.parse(localStorage.getItem(t))}catch(e){}return a};function Ek(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,a=void 0===t?{}:t,r=e.reducerConfig,n=void 0===r?{}:r,i=e.teamId,s=e.keyPrefix,o=void 0===s?"":s,l=e.prevStatePassedIn;var c=void 0;if(l)c=l;else{c=yk(i);_k(i,a)}Object.keys(a).forEach(function(e){var t=n[e];var r=a[e];var s=c[e];if(r===s)return;var l=Object(ak["h"])({teamId:i,key:""+o+e});if(Object(ak["k"])(t)){Ek({state:r,prevState:s,reducerConfig:Object(ak["g"])(t),keyPrefix:l+"."});return}var u=Object(ak["j"])(t)||{},d=u.persistenceEnabled,p=void 0!==d&&d,h=u.persistImmediately,v=void 0!==h&&h,m=u.beforeWriteTransform;if(!p||!v)return;var f=m?m(a[e]):a[e];Ok(l,f)})}var Ck={};var jk=function e(t){var a=Ck[t];if(!a){a=Object(s["throttle"])(Ek,fk);Ck[t]=a}return a};var wk=Object(MO["b"])("Persists data from Redux into localStorage for rehydration later",function(e,t,a){var r=e.getState();var n=Object(De["c"])(r);var i=Object(ak["i"])(n);if(r&&i&&n){var s=jk(n);s({state:r,teamId:n,reducerConfig:i})}if(n&&!gk[n]){gk[n]={persist:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;Object(ae["a"])({teamId:n}).info("DEBUG","Persisting to immediate persistence");Ek({state:t,teamId:n,reducerConfig:i})},get:function e(){Object(ae["a"])({teamId:n}).info("DEBUG","Getting immediately persisted state");return vk&&vk({teamId:n})},clear:function e(){Object(ae["a"])({teamId:n}).info("DEBUG","Clearing immediately persisted state");return mk&&mk(n)}};Object(u["exportToTeamDebugger"])(n,"persist.immediatePersist",gk[n])}return t(a)});var Sk=wk;var Ik={immediatelyPersistState:Ek,immediatelyPersistStateThrottledByTeam:Ck,getImmediatelyPersistStateThrottled:jk,setPrevState:_k,getPrevState:yk,setItem:Ok,getItem:kk};Object.defineProperties(Ik,{getImmediatelyPersistStateThrottled:{get:function e(){return jk},set:function e(t){jk=t}},setPrevState:{get:function e(){return _k},set:function e(t){_k=t}},getPrevState:{get:function e(){return yk},set:function e(t){yk=t}},setItem:{get:function e(){return Ok},set:function e(t){Ok=t}}});var Tk=a(233);var Ak={},Nk=Ak.dispatchActionToAllBootedTeamsInOrg;var Pk=false;function Rk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.prevState,a=void 0===t?{}:t,r=e.state,n=void 0===r?{}:r,i=e.reducerConfig,s=void 0===i?{}:i;var o=false;Object.keys(n).forEach(function(e){if(o)return;var t=s[e];var r=n[e];var i=a[e];if(r===i)return;if(Object(ak["k"])(t)){o=Rk({prevState:i,state:r,reducerConfig:Object(ak["g"])(t)});return}Object(ak["m"])(t)&&(o=true)});return o}var Mk=Object(MO["b"])("Syncs data between workspaces in the same org by fanning out actions to other workspaces",function(e,t,a){if(!Object(Ce["a"])()||Pk)return t(a);var r=e.getState();var n=t(a);var i=e.getState();var s=Object(Tk["a"])(i);var o=Object(De["c"])(i);var l=Object(ak["i"])(o);if(i&&s&&l&&Rk({prevState:r,state:i,reducerConfig:l})){Pk=true;var c=Object(h["b"])();c.dispatch(Nk({enterpriseId:s,action:a,ignoreIds:[o]}))}Pk=false;return n});var Dk=Mk;var xk={shouldSyncAction:Rk,currentlySyncing:Pk};Object.defineProperties(xk,{currentlySyncing:{get:function e(){return Pk},set:function e(t){Pk=t}}});var Fk=a(227);var Lk=a(170);var Bk=[NO["b"],AO.a,Dk,xO,on["default"],UO,uk,pk["a"]];Va["isDesktop"]&&Object(Va["isDesktopReduxSyncEnabled"])()&&Bk.push(ek);Object(Fk["a"])()||Object(Lk["a"])()||Bk.push(Sk);"undefined"!==typeof window.__karma__&&Bk.unshift(RO);var Uk=Bk;var qk=a(1684);var Gk="_testOnlyFlush";var Wk=false;var Hk=function e(t){return function(){if(Object(Lk["a"])()&&!Wk){var e=t.apply(void 0,arguments);return i()({},e,{subscribeImmediate:e.subscribe})}var a=void 0;var r=void 0;var n=function e(){r=null;if(a){var t=a;a=null;t()}};var s=function e(t){if(r)return;a=t;r=requestAnimationFrame(n)};var o=Object(qk["batchedSubscribe"])(s)(t);return i()({},o.apply(void 0,arguments),An()({},Gk,n))}};var Vk=Hk;var Kk={setEnableEvenInTests:function e(t){Wk=t}};var zk="persist:";var Yk="persist/FLUSH";var Qk="persist/REHYDRATE";var Jk="persist/PAUSE";var Zk="persist/PERSIST";var Xk="persist/PURGE";var $k="persist/REGISTER";var eE=-1;var tE="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var aE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};function rE(e,t,a,r){var n=r.debug;var i=aE({},a);e&&"object"===("undefined"===typeof e?"undefined":tE(e))&&Object.keys(e).forEach(function(r){if("_persist"===r)return;if(t[r]!==a[r]){false;return}i[r]=e[r]});false;return i}function nE(e){var t=e.blacklist||null;var a=e.whitelist||null;var r=e.transforms||[];var n=e.throttle||0;var i=""+(void 0!==e.keyPrefix?e.keyPrefix:zk)+e.key;var s=e.storage;var o=false===e.serialize?function(e){return e}:iE;var l={};var c={};var u=[];var d=null;var p=null;var h=function e(t){Object.keys(t).forEach(function(e){if(!f(e))return;if(l[e]===t[e])return;if(-1!==u.indexOf(e))return;u.push(e)});Object.keys(l).forEach(function(e){void 0===t[e]&&u.push(e)});null===d&&(d=setInterval(v,n));l=t};function v(){if(0===u.length){d&&clearInterval(d);d=null;return}var e=u.shift();var t=r.reduce(function(t,a){return a.in(t,e,l)},l[e]);if(void 0!==t)try{c[e]=o(t)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete c[e];0===u.length&&m()}function m(){Object.keys(c).forEach(function(e){void 0===l[e]&&delete c[e]});p=s.setItem(i,o(c)).catch(b)}function f(e){if(a&&-1===a.indexOf(e)&&"_persist"!==e)return false;if(t&&-1!==t.indexOf(e))return false;return true}function b(e){e&&false}var g=function e(){while(0!==u.length)v();return p||Promise.resolve()};return{update:h,flush:g}}function iE(e){return JSON.stringify(e)}function sE(e){var t=e.transforms||[];var a=""+(void 0!==e.keyPrefix?e.keyPrefix:zk)+e.key;var r=e.storage;var n=e.debug;var i=false===e.serialize?function(e){return e}:oE;return r.getItem(a).then(function(e){if(!e)return;try{var a={};var r=i(e);Object.keys(r).forEach(function(e){a[e]=t.reduceRight(function(t,a){return a.out(t,e,r)},i(r[e]))});return a}catch(e){false;throw e}})}function oE(e){return JSON.parse(e)}function lE(e){var t=e.storage;var a=""+(void 0!==e.keyPrefix?e.keyPrefix:zk)+e.key;return t.removeItem(a,cE)}function cE(e){e&&false}var uE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};function dE(e,t){var a={};for(var r in e){if(t.indexOf(r)>=0)continue;if(!Object.prototype.hasOwnProperty.call(e,r))continue;a[r]=e[r]}return a}var pE=5e3;function hE(e,t){false;var a=void 0!==e.version?e.version:eE;var r=e.debug||false;var n=void 0===e.stateReconciler?rE:e.stateReconciler;var i=e.getStoredState||sE;var s=void 0!==e.timeout?e.timeout:pE;var o=null;var l=false;var c=true;var u=function e(t){t._persist.rehydrated&&o&&!c&&o.update(t);return t};return function(r,d){var p=r||{},h=p._persist,v=dE(p,["_persist"]);var m=v;if(d.type===Zk){var f=false;var b=function t(a,r){false;if(!f){d.rehydrate(e.key,a,r);f=true}};s&&setTimeout(function(){!f&&b(void 0,new Error('redux-persist: persist timed out for persist key "'+e.key+'"'))},s);c=false;o||(o=nE(e));if(h)return r;if("function"!==typeof d.rehydrate||"function"!==typeof d.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");d.register(e.key);i(e).then(function(t){var r=e.migrate||function(e,t){return Promise.resolve(e)};r(t,a).then(function(e){b(e)},function(e){false;b(void 0,e)})},function(e){b(void 0,e)});return uE({},t(m,d),{_persist:{version:a,rehydrated:false}})}if(d.type===Xk){l=true;d.result(lE(e));return uE({},t(m,d),{_persist:h})}if(d.type===Yk){d.result(o&&o.flush());return uE({},t(m,d),{_persist:h})}if(d.type===Jk)c=true;else if(d.type===Qk){if(l)return uE({},m,{_persist:uE({},h,{rehydrated:true})});if(d.key===e.key){var g=t(m,d);var _=d.payload;var y=false!==n&&void 0!==_?n(_,r,g,e):g;var O=uE({},y,{_persist:uE({},h,{rehydrated:true})});return u(O)}}if(!h)return t(r,d);var k=t(m,d);if(k===m)return r;k._persist=h;return u(k)}}var vE="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var mE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};function fE(e,t,a,r){var n=r.debug;var i=mE({},a);e&&"object"===("undefined"===typeof e?"undefined":vE(e))&&Object.keys(e).forEach(function(r){if("_persist"===r)return;if(t[r]!==a[r]){false;return}if(bE(a[r])){i[r]=mE({},i[r],e[r]);return}i[r]=e[r]});false;return i}function bE(e){return null!==e&&!Array.isArray(e)&&"object"===("undefined"===typeof e?"undefined":vE(e))}function gE(e,t){e.stateReconciler=void 0===e.stateReconciler?fE:e.stateReconciler;return hE(e,Object(l["combineReducers"])(t))}var _E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};function yE(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var OE={registry:[],bootstrapped:false};var kE=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:OE;var a=arguments[1];switch(a.type){case $k:return _E({},t,{registry:[].concat(yE(t.registry),[a.key])});case Qk:var r=t.registry.indexOf(a.key);var n=[].concat(yE(t.registry));n.splice(r,1);return _E({},t,{registry:n,bootstrapped:0===n.length});default:return t}};function EE(e,t,a){var r,n;false;var i=a||false;var s=Object(l["createStore"])(kE,OE,t?t.enhancer:void 0);var o=function e(t){s.dispatch({type:$k,key:t})};var c=function t(a,r,n){var o={type:Qk,payload:r,err:n,key:a};e.dispatch(o);s.dispatch(o);if(i&&u.getState().bootstrapped){i();i=false}};var u=_E({},s,{purge:function t(){var a=[];e.dispatch({type:Xk,result:function e(t){a.push(t)}});return Promise.all(a)},flush:function t(){var a=[];e.dispatch({type:Yk,result:function e(t){a.push(t)}});return Promise.all(a)},pause:function t(){e.dispatch({type:Jk})},persist:function t(){e.dispatch({type:Zk,register:o,rehydrate:c})}});u.persist();return u}function CE(e,t){var a=t||{},r=a.debug;return function(t,a){if(!t){false;return Promise.resolve(void 0)}var r=t._persist&&void 0!==t._persist.version?t._persist.version:eE;if(r===a){false;return Promise.resolve(t)}if(r>a){false;return Promise.resolve(t)}var n=Object.keys(e).map(function(e){return parseInt(e)}).filter(function(e){return a>=e&&e>r}).sort(function(e,t){return e-t});false;try{var i=n.reduce(function(t,a){false;return e[a](t)},t);return Promise.resolve(i)}catch(e){return Promise.reject(e)}}}function jE(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.whitelist||null;var n=a.blacklist||null;function i(e){if(r&&-1===r.indexOf(e))return true;if(n&&-1!==n.indexOf(e))return true;return false}return{in:function t(a,r,n){return!i(r)&&e?e(a,r,n):a},out:function e(a,r,n){return!i(r)&&t?t(a,r,n):a}}}var wE=a(1182);var SE=a(1318);var IE=a(469);var TE="generate prop types hashes";function AE(e){var t=Object.keys(e);var a=t.reduce(function(t,a){var r=e[a];if(r&&r.propTypes&&Object(ak["l"])(r)){var n=Object(IE["c"])(r.propTypes,a);var i=Object(SE["a"])(n);t[a]=i;r.propTypesHash=i}return t},{});return a}function NE(e){var t=Object(ak["g"])(e);if(t)return AE(t);Object(ae["b"])().info(TE,"invalid reducer passed in to generatePropTypesHashesFromReducer. You should pass in a reducer created using combineReducers");return null}var PE=a(1155);var RE={},ME=RE.getPersistConfigForStore;var DE=Object(is["a"])(100);var xE=void 0;function FE(){xE=null}function LE(e){xE=e}var BE=false;var UE=function e(t){return function(e){for(var a=arguments.length,r=Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];var i=xE;var o=Object(ak["g"])(e);i&&o&&Object(ak["p"])(i,o);var l=Object(Lk["a"])()||Object(Fk["a"])();var c=void 0!==ME&&Object(Ce["a"])()&&(!l||BE);if(!c)return t.apply(void 0,[e].concat(r));if(c&&!i){var d=Object(ae["b"])();d.error(new Error("Redux persist enhancer cannot find a team id. Redux persist will be disabled"));return t.apply(void 0,[e].concat(r))}var p=void 0;var v=void 0;var m=e;if(c){var f=ME({teamId:i,reducerConfig:o});m=hE(f,e);Object(ak["o"])({reducer:m,reducerConfig:o});p=nE(f);v=NE(m)}var b=t.apply(void 0,[m].concat(r));var g=b._initStore;b._initStore=function e(t){g&&g(t);v&&t.dispatch(Object(PE["a"])(v))};if(c){var _=function e(){var t=Object(vt["a"])();var a=Object(ae["a"])({teamId:i});a.info(ak["n"],"Persisting state to storage");DE&&t.mark(ak["b"]+"_persistence_write_mark_"+ak["c"]);p.update(b.getState());p.flush().then(function(){var e=void 0;DE&&(e=t.measureAndClear(ak["b"]+"_persistence_write_mark_"+ak["c"]));a.info(ak["n"],"Persisted state"+(e?": "+e.toFixed(1)+"ms":""))}).catch(function(){DE&&t.clearMarks(ak["b"]+"_persistence_write_mark_"+ak["c"])})};var y=b.subscribe(Object(s["throttle"])(_,ak["d"],{trailing:true,leading:false}));var O=Object(s["throttle"])(function(){Object(ae["a"])({teamId:i}).info(ak["n"],"Persisting state to storage because we just lost network connectivity");_()},ak["d"],{leading:true});window.addEventListener("offline",O);window.addEventListener("beforeunload",function(){Object(h["a"])(i,Object(fy["clearSerializedData"])());Object(wE["c"])();Object(ae["a"])({teamId:i}).info(ak["n"],"Persisting state to storage because the window is about to unload");_()});Object(u["exportToTeamDebugger"])(i,"persist.reduxPersist",{getPersistoid:function e(){Object(ae["a"])({teamId:i}).info("DEBUG","Getting Redux Persist persistoid object");return p},persist:function e(){Object(ae["a"])({teamId:i}).info("DEBUG","Persisting state to Redux Persist");_()},get:function e(){Object(ae["a"])({teamId:i}).info("DEBUG","Getting stored model from Redux Persist");var t=Object(u["getFromGlobalDebugger"])("reduxPersist.getStoredModel");return t&&t(i)},clear:function e(){Object(ae["a"])({teamId:i}).info("DEBUG","Clearing cache from Redux Persist");p.flush()},stop:function e(){Object(ae["a"])({teamId:i}).info("DEBUG","No longer running Redux Persist");y()}})}return b}};var qE=UE;var GE={};Object.defineProperty(GE,"isEnabledInTests",{get:function e(){return BE},set:function e(t){BE=t}});var WE=[Vk,qE];var HE=a(1481);var VE=a(14);a.d(t,"a",function(){return KE});function KE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.teamId,a=e.reducers,n=void 0===a?r:a,s=e.middlewares,o=void 0===s?Uk:s,v=e.customEnhancers,m=void 0===v?WE:v,f=e.initialState,b=void 0===f?{}:f,g=e.disableDevTools,_=void 0!==g&&g;if(!t)throw new Error("configureStore must be called with a teamId parameter");var y=C({teamId:t,customEnhancers:m,middlewares:o,disableDevTools:_});var O=Object(c["a"])(i()({},n,{persistenceHashes:HE["a"]}));LE(t);var k=Object(l["createStore"])(O,b,y);FE();var E=k._initStore;k._initStore=function e(a){E&&E(a);a.dispatch(Object(d["setTeamId"])(t));a.dispatch(Object(p["b"])({id:t}))};k._initStore(k);Object(h["f"])(t,k);Object(u["exportToTeamDebugger"])(t,"redux",k);return k}var zE=void 0;Object(u["exportToGlobalDebuggerWithGetter"])("redux",function(){if(zE)return zE;var e=function e(t,a){var r=t.replace("@slack/redux/","").replace(/\.js$/,"").replace(/-middleware$/,"").replace(/\//,"_");return Object(s["camelCase"])(r+"_"+a)};var t=function t(a){var r={};Object.values(a).forEach(function(t){t.meta&&(r[e(t.meta.file,t.meta.name)]=t)});return r};var a=function e(t){var a={};Object.values(t).forEach(function(e){a[e.meta.name]=e});return a};zE={actions:t(Object(Gm["a"])()),middlewares:a(Object(MO["a"])()),reducers:t(Object(d_["a"])()),selectors:t(Object(VE["a"])()),thunks:t(Object(Qe["a"])())};return zE})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(6);var c=a.n(l);var u=a(7);var d=a.n(u);var p=a(8);var h=a.n(p);var v=a(9);var m=a.n(v);var f=a(0);var b=a(1848);var g=a(2);var _=a(12);var y=a(245);var O={href:f["b"].string.isRequired,sizes:f["b"].string,type:f["b"].string,logger:f["b"].object.isRequired};var k={sizes:"16x16 32x32 48x48",type:"image/png"};var E=0;var C=function(e){m()(t,e);function t(e){c()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.originalFavicon=a.findFavicon();return a}d()(t,[{key:"componentDidMount",value:function e(){E&&this.props.logger.error("Multiple Favicons mounted");E+=1;this.updateFavicon()}},{key:"componentDidUpdate",value:function e(t){Object(y["a"])(this.getFaviconProps(t),this.getFaviconProps(this.props))||this.updateFavicon()}},{key:"componentWillUnmount",value:function e(){E-=1;this.setOrRemoveFavicon(this.originalFavicon)}},{key:"getFaviconProps",value:function e(t){return{rel:"shortcut icon",href:t.href,sizes:t.sizes,type:t.type}}},{key:"setOrRemoveFavicon",value:function e(t){var a=document.querySelector("head");if(!a){this.logger.error("<head> not found");return}var r=this.findFavicon();r?t?a.replaceChild(t,r):r.remove():t&&a.appendChild(t)}},{key:"findFavicon",value:function e(){var t=document.querySelectorAll("head > link");return Object(g["find"])(t,function(e){var t=e.getAttribute("rel");if(t&&t.split(" ").includes("icon"))return true;return false})}},{key:"updateFavicon",value:function e(){var t=document.createElement("link");Object(g["forEach"])(this.getFaviconProps(this.props),function(e,a){t.setAttribute(a,e)});this.setOrRemoveFavicon(t)}},{key:"render",value:function e(){return null}}]);return t}(r["PureComponent"]);C.displayName="Favicon";C.defaultProps=k;var j=function e(t){return{logger:Object(_["a"])({state:t})}};var w=Object(i["connect"])(j)(C);var S=w;var I=a(195);var T=a(52);var A=a(188);var N=a(473);var P={online:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lJREFUeNqMVk1vGkEMndmu4MLmkOWQoCqkh0APqAdUVNpKiXLux/+tFKlSDlEitcm15RI4BBBiucCFjdDUs571eL1L1EEC450d28/P9ujvH7+qbBljFFtaa9SgAN9ij9Xnb/LNdBrKIUn0rNKGKi1vvkpPQqi0syYiIBvlN7lt2kM7C6ErE2gr6BfcpCXO4mg4AURlCg6ZHCIrGuk1Kckp/q20P13u1NknW4E7VMkAreE8ONTLEA0Lpep0jDvgSReZIGRQbkSNuBnT0+ggOowP0X3uB0cC1qvu6453Te8lT3/Qv7i8SLfpbDrDN4efh4MPg91ut1gsMBprqYSEY1EledA1fNo+bcN3kiS0HzVgz7pMwGrJhRBs5glS+EuVQbkDZKIoAmHyOEEP2m/s6WmaJsnKRZ5XoijJkIrAWtKG8sP5dNw6ds46Puhmswni+HFsmclKnZe9M0BmiXD4uFavdbod3ERC713PRZDhA2GhJlkmmBuOj0vkt+EXbhl5BnY6bzvDT0P1f+v25nb0Z8SZ6rikMwO51gcGf8G7xkEDNtRqtfPLc1Be/7zebreYkv77PghXP65g5ypZWT3RP3ufjIWeOb6A7LPNZrNerymfIE/GE4wSKgAZNX2aenIrhwF5jzZCOpg3Ly4jf1bIlozsWF+zpxmxQ+liN81UWBaBMrIjOhpoZwkpBGl0hW0U1vNmvXGFooycHMbHFJY7OO4jwqAB6BOkieMYM9GrW818Oge4CuzUDCIqcW4GDsU00iKm0jrrnqFw/+t+uVxyHhZA9jRlZuAvOg5wgyXI8N3NHb55cnoCxgCxh98P6A1gBR/uIkc7LGQ4xx0WFA4lAEAAwuA76Ph85jR82ogJmje7whD37RBfOGodYYaJ4GgSMKFZW25BHiiVzwMaOx47KLF6DfPpupAxkFioO99Eiye6GhYRFEZYcdi2Wi0sMYCYJwYCek6fOdC+GRt5zQmlC8wSdGNgiG3RxlX46O8ITfojlBHDkuLwzU7cscr1LLqhd5y3hfK8Iogq7lLZ8jZK9zU+9co3KK4P+LnCca9nG8T9RedLXBL8tUUMIGwvojXtc99dthiqLnoWViADNHvvAGL2uROVFtcykZjwhZdFcAJc6TjbwTEM3QAq3lP40VSThRxU3U0rgf0nwADpJQebhAz3/AAAAABJRU5ErkJggg==",onlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4JJREFUeNqMVj1MFEEUntlsx1FzQgmXnI13JGA0XIWJmvgTEzAxBhXbw0Rjg4VWamFLIjWGUkwgFoIFNkAhJN5VHGEpMVBz1OPbfW/evJldyc1d9t7Nzrzf7/3o+9fvqmwZY5RYWmvcQQKewZl0396Uh5kb0jFT/K5QhsotJ75on4lYaZIWWMAy8jelbD7DJz3TlYl0SugL1OQV8JLeIAJIZTyFjHVRSppQa95kpeRTacc9PKmzT7YiYqpCA1PB1jjcD000wpQi7mh3JIMeRII9k8eYp4oyUg/pCVix5zJdAFAg+kp98x/f1Mbr3bPu45uPkN3aznd4tndb716+ZT+z7nw3QhTltaMLGa+JGw3gjuzw/JWxGp7s6y+lKiM7Gwp2XWoByLQBUvjLmcEXRqojyK4FArIzvNPea1G8tZZ3WemYzUklaWejxFNtrE7sMgvg05hskMjfLSVSXaY9CQhcJiMGXAYGB4AoD5VxZ2KygRYPWwtGqpVKtQI735ZXgiyhQN67dkdKplAbNf3k4dPmM9XbSjrJ6+evJFIJSzrLA7trI5N5CXXvcW1vbiltPSrSIs0VsCBwnKEkpUjMzb+49eA2EIufPq+v/oBjUzPTaNyXxSXwDOqbL7pUTW0KK1m8JM3uTg4SxG5tnDB6+veUqoBWQT5hqOAZKRNWRFIkMxlSjBGZ7B8i2J3IziGKDDsHwT79G+crOPG9XIG/jnsnwVwr9Zfgi5vloUvwPeokkOEeOrVIWOhoaIvMZ+D1fuFDjxHm+uFSSjg5MlzDtSvUAO3eIXRyfBIEkksnJZos8Sh8ZfkrhBSI2eYsehwAc3RwBMTUzBT6CvDT3mvDmfOzrqxCxu+Asd/EDQOitftHxnNjdb3bPYdLzfk5wv6vrWQ/8Qq1bNS2vsZeERWRAHq4OsxOAEdjhMuDZQuqpKCRcA5bvMZeC/ObbX181CuZWtevjrqq52tNrHMZF8ms81ouVIuhAcYoZjjXD6jbdIUbgHEhlO06LmxhqALwPTleAv9AqcFXP9c20Hs7m9uyqJFOHGqR2Ronu8KZR3g21bZwCAumIzEREPqjoDbJHHH7/3EjR5hfSYy4RPPGN+VyJGh+8qScnaQRqB/PWPA3Cg00xTOAlOFxVDoYyyRS0yBfcDkwzjk3531vBDZezYjxV1nMkY2y//DMI2NQNJsWOvafAAMAxE3MJSrFyPAAAAAASUVORK5CYII=",onlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABExJREFUeNqkVktsG0UYnpl9OF6/4JDYaWirNrFIgTbvNEilByS4FHogQeJQoCcOidQjiF6LBGcEnIs4cABBKZeUQw+IQkUicFDVJo0TJ0gtSW2paWLHr90d/t2ZnZ11TBubie3Mzu7+3//9b3z2xdeQuyilKLhMy6yb8KmVq+VLPT0j0RhqfakgF2MMO/YrlnfOYa098PsFQJjLamBA3SVQdyyrPQCCHdWbMJCx4PtPrdYmA64+osgjIJA4MMKEkFy10iYDLgv5QoWtYA+i4Qc+i+Xy/wJgPBo9QZ0PcWHyprVU3m3LyZJXGQ0B46huExAfiUSmzk2VCg/R3VzrDHCTDGBsYKMQomAyOjH63InnN48e3ia4nSjypLJ48fHYLeDR198XiUY6nk5cteotA/iJxv48T7gWc6yvEGVodCgWi8UT8av37y+36AlVeJgpDtEqwvTUy6e6urtM0zx45NDWw61EIv7C8MB3j7YvVMwwwi07WbiXZcTU22++M/0uXAFAtVI1IkY8kXjjrcnNjc3fF7On/7qD6b4BuPpSPgNG8kCSPQEm0jTNMAxAqtfr8M2nj96s1k4urZJ9FCj8+sQZBiAsQxHnz4w2/f7MK2dfrdVqn3/y2eyPs6ZVP/nSxND4sLq6NvLHrfiTbEXEA9Rb2NszQn3H0uBqILGeW9cUVVXUkfGRzmQnerbv43plfmf7SSZyFRYkRBF1vI0wRCfEKJwAxtrdHPyqSD0+fBxMpev631vbF/P5gXD4vVR3Omw8LorkngPSHbnH0nAJ0tlJdjE7MDYIJx1GONWdKpV29ZD+zKGDncmulbX1mdzqoGGMRaKnE08ldT3gA+hoTFk5n0HWpU8/aqza7rJtm8VVpVIpl3aLpVLhQeHihQ/h3LJNeKBH06KKciQUUjGGa5XLxTzT2GW6P90kHljxUBSnymKiqqquaaFwR2Gz0KGHbGpblgYK5Kn9wLRzZpnFixpoyJ4zvv3qm+xSFjbnp8/3ulb68ovLK0srsJk8N3lidABr+MrX3y/ML0DfLj7a0VTNIUdseMB2Mwl7MtVAlrm2YpeZuT9BASYd1rUrs8ViCV6a/mCGUbn582/Lt5eZQhBaTEvgwaIGds4tTIOZLHkC9r39vWy/cW+juFOETTQWTR1IcbffyTIkpylRN/wwJRD3DIBwk6h+FdozXgyODbHNwnyGnQ+OeydzGT/tRfOgvPo6ogi/RURoikcFiWQPrxYQo8xjon5k5jKiqPDXpXxiZvZ94LewIBuQu3HvMtjnxvVf2K2ffrjGrPfr9RtckNxCvNEBS/UDs8lOToK9eIiPYLTpfNYwi3gFjY8pBAXflPu+f/4fZhSjgrjV0A0DHU0gixdkiXIUyPpSRGUSckfhg08jQdp8BpAxAhIRlj0n93Ze7B7zcgM537h7rO8mqTxp+jZU2X/kxZxcsQPAXq/2WneAVmDUDBr2XwEGADZFpKJDFtSPAAAAAElFTkSuQmCC",trouble:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA6VJREFUeNp8Vr1PVEEQn3m+Ais+TOQ4TCCeARMxRyESC6EwkUIDpf530kqnJVZqZayMFBI5wpGAYMEdDZzR3Dqzszs7b+9gL7k3b97sfP5mdnH9yUvwyzkHZiGicISg/0yG+XGnFVZtQpdK6behNmBgJfPD+EqUgMFaFoHaGNxpbauMSlZCB1cgE3iNm7oyXTYbgSASXMUhF1PEpMu9VqY6Zf8Bk/ZcEv3PryIohTxANhyDE34eojOhDNMucRe26FklNDNCj4/CdC3pnxjD+mRw3/phM0HrxvydueQaXgmetVX3eqPf60GrLRtxY63/4pn7+w8Oj1CiYUsDmQgoGgoecU2+Lswz/+gEVN5zcL/tXdbEYo6FkmzGAoE8tTO0dpSZ8TEmdnaDgwvz/HrZg6NT3ib67F51ukiNJr9YCV+usO7OsHTrAAMeEKdrrHfnB2uCak9k+SjVrAJO7N0cgaVmwPXjZqjP02XnI+5LxibGiMM5o9S12i7rkliDgdkgSh/eh+erfUi5w8asa8yC0ML3HH59t42ttnE0ZpuI0uAXbXl/HsCbLepzDuXVOou/fV9cXPKueo1AxbY3tyjD8Os3Xlya5mKkpimZIsDUQPytew6drov1xE6XKyw+3hpn/vEJ7h3ITielCc0EaVzQW6mKhxaKaI8f59ESwD51m01STsIkT3Mg6vEsaYtCuzzlR3CFYf89zjtSGQO0XOjns25sFHD5yRFgH1OUTXCRW1kmMU50w2N0YhQJQiJWr3EE9RqujPAm6u3jU9M9Jt2cIm1xa6YxQxBysSK8lhbB5NZzmoIx2P5YUHzqfna6lGn2IqiZ/UPc3GL21CRPoU6XgSguPphzS4sM/A+fCu8NnJ1DVkjbz2WlwjHvtChwHwqDYq/NgJE9j5reg8ixp012gsqnonqIm1ntaSnA8Yk0ecien3pOz1oFSLDHuEpIKSqdbCpBNLVYnQGDFIG4RPi5yYXloa2TMY0A6eEsgsGjVZ3yAKUCQOc88L37VADs/al4nVS7VG3Ba5m7YEpE05gQ8n03jnGAr99YA5lMZQSXHZZqLA277I6lNqiMYRjET+T45y8QnDNDLUQfzw/b2eXgzUejSSAZuK/ZsTh4g7L8wurNBlHiG4Hs/hLPJMwuCenaUmnxeOBko+kq98Nlq4oOPVGEU+QBuivvANnZFzQCZtcywMpMKa/ZnAWXJTd33EjYHJbyhOo9xarWu2WlBsPupkMT+1+AAQCmPwV2bobFnwAAAABJRU5ErkJggg==",troubleUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1hJREFUeNqMVr1PFUEQn9lcIc+ORylHB9gBNpLY+dEISKWhNHYWdhb+FRaa+CeYWJnYKVoJdAiVQMc7Oh90go1vnX2zOzs7dxj2JXfz9mbne36zuLa8AuPlvQe1EJF3mKCn4Qn76aRmFmlMV0LJt04d0FpZfde+EBVg1GY8EB3tk1q38Ahn4Tp4h4HA/5gpy8jS0YgEkeALg3wKUSC9tVo2xSj9BMzSLSeOf+PlolCwDgbFyTnety565UqXdPbb6aSbTEhk2jVWmAJe26EjQasqQoYdBUrExDX/7Kmfnx2dX8DLV47FvX39l54HR/jmHUqcxXY5G6uos3jYNPq6tEjSA8/BITL/3Gzk7PUCH4g3aGuhohMpQcBv6QzJ3fR0FHd4FHnqaZ92MOYbUZ8Vo11uNP6lTIwjFhebLx7QztJiVPnzIJtv+oNXZUKmM3ZrwU9Ohs2pfuReXGDOUX0jSqlrmKmDNV++2i5JOWgVBoflwT14tDIyuVlf9QCFgetjnsEJkoJsaIo2EU7Vb9TMldDvdyDHZWv3B3Do2Expi9Arq7cfarwELgpV+xtP/J3lQLz/4L5vh2P373p27uMnMhzZ3jboxipKLQydiSJaCqY5ifg1l3J+dparw/QTFyc9XXZHyp8NGbtMLSb5PB5E/BKVx01UaSdHLPvwt2ojeJRbh78ia9AgN9f1nu9NRGOpuqb6vmmQOlwHWRwKGaWJxr7o+iVZL56PrphhwQ+pIh1k5wXDMQP1TH31CoLhEE0iBTpzHwjEs/LPmxQT0g3razEHVDDNSThAJcSNTfVDSEc8FxcZVPQEtY2m4XAMk+GYZHhrG8//BJzbeJxqfx8HA3HaFqjgqys6WWWC6Dph3PA0BJpOU3qnUgOSdCNRAL/woBhh5bCdn4PkTdy/OV+CqAZOhodWxznddcXIhWxs08QOZ+wLIHqYZ0YeZJinZpGD9ghjEwYN/Bri6Sns7kUM396hkI6I3tsvQC3aJKlWkaraNx8J6NaOS+5Hnt/nfvObM1OvfYPS+85gk+6RvH9JGKXe5ZOuETvRRLMcMMNPc+q7k0ZGPVF4x1kH/aV3ADP7ZHiYa1meNiYH7cPGORNca7ji0DGs+A3lPaWYP3Ln0Tnoupt2BvafAAMA603M1k3efM4AAAAASUVORK5CYII=",troubleMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABBhJREFUeNqkVk1vG0UYfudj/bExbWo3kJLaKRWO3aaooIoKOMCBDwlBI06F/oEeQOIHcIU7N34CEieQekMIkBDtBaEgDk1aRIgdRGiSpqSpN1nvzPDOzuzurO2SxozX69lZz/vM836ThRffhngopSA/IhH1I7zCYD/4eGbmQuUxOPzgKJcQgjNzT0eybmHFEPyjAgCxsgYYqHikqPeFGA+AEn30EQxcLPz+FYZjMrDHBwUJgRTJAgOhlK7s743JwMqCTGiqK5yjaLzhtRQE/wvA8Bi0hNIXjWE2IrEc9MYHsFaN1ZTC6KPjl1K/RBbepJv1u2MBkBERYNjghFHKCD13lj59mv4xtf0PhON4USLV+EuGZ14hh0ad+WVWrNAvg/VDA2SBZj6JJTRMrH1G2ZkWmZjglQq/dmfn9iEtwVon54adx0wuPAfzZ+WpWTh/DqRUeG3dVUti5yI95hF6aIBMdHx74zW4clm256DVNHrT+ntyWvnV/hrsNnePZbo90Ivs8RMMs7NWs4QoBY+TcolVfH7kiDc5Wdid3vt2alXAI2UncumFtwxAqhllOVhrv/eueumi7Efy8y/ghxtRJPrPzIft5r7/d/GVtVNHqXewm7rZTSMlc0Noto4kCOd0fZ16jHPG59terVoIZ8JPdn/76f7OQdk0PnBKIk2iqHNcLpdU46TGYpSs/YlOhRt4q6n6EXge6T4QH213zpfLV6dPNMv+QwAcx09PreU29GOjblZgtUNacwhPSyU1VeO9PVLw6InHRXWS3V7vf7Dy+7O+//xE5eWjk08UCjkbYEUzh3XjuTUHH74vB7N2/F5IJSIVhnI/FMGe7AXR9rb49DN0YilkhEJmPK/C2FPFIicEn7mVS2ykmcfZxih/0ElF64pwncEZJx6XxQK9d0+VCjpOhPCUkhtK3onkShQYf+G5gpwY4+tvoNPFIId3FrQN8M1X10h3TfvD668qjAw0+3ffw81lJoR80FOIhLsk1aRlnDRJIpO7Cc7oyjwu3dIHMNJx/HidoN5x05XLlsrir3R1Fd1B64AzaU6JPIzX4EwLJIrnlOBYAuf1up1vbkEvZuyX4XjNmr3TsZGvi5KK3Y8oin5vAKhVCU+z0HB70W5Bwsaun2lbyOVb2T+z4qFs9tWiqH1FU9dM/5qSOJ5ki27XRni1alduLidbkhrlxpNRc2aDrITl2XS6sLFJtrbg50Wbw6/fwNwlcb74SyLILSFJ6+DmQWI6OzcIhvHAtmBqZH82kOSThGbbFAr5nW5hyNYfosa0VUhfDVTDXEVLkdMNrkTXC9zzKlAuCZvNwGl8Bgmq0T2Ai5GTCMS1nFvbbbL7j80D5DLlDmk/DlK308x0yM0vJD7nZuwcMKicDfK0cq1mXrH/CjAAfjaCPa5V5tYAAAAASUVORK5CYII=",offline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2pJREFUeNp8Vr13EzEMly5uQl+nlKnpRrtRNsp7DO1Ilz5W/gZW/iG6MrLCyMhIN9JsKVvDlH7dRdiWLcu6K27fxaeTrY/fT7Lx/dtziIOIQA1EZAlP/NPoBHleqZVlN547mcm3QRvQG8X8kFwmDjBZMxGIjf5KbVt0RLMKHajBMMH/uCnD7KWzkSZ+ClQ5RDlFYUrWaxGKU/oJWHa3mhj/4mjSpmADDIZzcCy3IZIKZWh3jrvRoBskJDM8nzawPyr7745w1iT3tR86E3401XZAg+Txr2fP4NMOHbmy8t2EPu7Aybj4J1mWHPiRWDRIHnaNv/LWyw2IPksWm6AHkli0XHA+Xxkg4F+pDMFu38E0hnr5mDw42grPW4JlF5bxfnqtOO2kCIIlJMFH8+lFzPVVK3zACAYFewFV1NVa/GMDJYNUIbaNcDxOlt6Mk7bPOGtyfnYbOJkE7WXnzZOpklzJvd7AaXm1FWDUXw9c+AdVSlESXr/e4VUEVZiatDAayFLU8P5u6fM6ZMOH8mE7qH+5xXV0ajbCs2j7Yh3w+7PB9UYVV2BqYWOJAEsBhW9/CVatnxLjudrAZcsJx+cR8OsO5i1DRQxNKiYVo39zsrFuXno+jQgHgub+tRcNeMyFHYB1N42iACf4QiPbERMNMK0/jNW7bHNhU6rnm00uFCB7ciTa5xSZDs56p5MUx4EQJnNpFg3MHJ5yKB36dFXsRJUidoGtiRm/qaHQ8dh28uOtpPDtHpctifvmdHGl9yKImUWHF+sg3hvR2SQg7InIfrx05I154n+/T3y7iRQyXUiy7SqEc9798IHHUAIp5h3Ocx29jqEsskTaWGmU9Qno6kOchBC84GAUntctpQLzJhnzjuSs7begkiigpqpkhQSXGOM575JLnj/bmDgqnbG0ACLL19BN9RFWH7aHMT8egFWmMrcKD8Bd7AZV4+QCI3vNcdYFZcl3Y8+QX4+pnfvHz4egsiKVE31GCU2wxsDcscSGh3HeVn3wDvHHAx+uoJtaCiKfH7qyXf/mI9EUOvfua7ot9m9QWt7ofU0jKnKlYO4vmIe5JJRrizmAuL2Y1vSU++mypTqjPlFY0tgA6ck7gDn70o6A5loGul9rDPqLTXAmudZxpaFz6PgX6nuK3lpqssJg6G46mNh/AgwA1LYLPz5hMyUAAAAASUVORK5CYII=",offlineUnreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAzFJREFUeNqMVr1zUzEMlxyHtincsdDOyUo6Aytz6Qoz3HVk5y/gr6ATQ2dgBWZYKWvDDAsDaZvmJUZ+smVZ77UXp5e4sqyPn76MR08OoV0hBFALEZnCG/o2PJGeb2pmkcZ7Lzs569UBnVXU99Fl4wGTNuOB6Oje1LqFRzgr1yE4jBu8xUxZRpZGI21oC6EyKGSI4jZYq4UoRulvwCLdcmL7aZdLQsE6GBVn55huXQzKlT7p7LfTQTeREGS6OVaZAkHboZGg5SvIsCdBaTOC8PoeTH2YBzj+mwx/fz8enS3h7RwEZ7Fd7qYs6k0eNo1OH90h6cDimH86TJy7LvKBeIM2FzzpzAEC/pXKkNiNs59nTeIZDxSF442o74rRrhQaf3IkWsTSmoqC1gOikE+KUtWEwcMbyHTEHg/hgYvEvZQKQHLZY/FgPMDJIHr18SqYKskx6CQGw3K0jc93bGxe7ABAqCnx39mKFChDM9q0cSp/k2bOBLZ9w/XtOkHHZkpZxEou5pcCimcnl/DuIjK+GsHTrUg/ucDPi2jjsy1g504vo+FsrzRdVD62dYC2l5lGNvZpTzhwsj/MVv1ZR2mqL5R64lDRtyvuSPpzXrUuj1Q8z5sUIMna81WqLzs5UtrHf323g7Pcia+yhczn4trF+Mdr3+G+oyOc6+pRcEfEaKKxLzp/Sdabu5tGWPqHZJEG2QXp4Vga9WSAm6fQ7zWYQErrLHUgLZ6Vf7gK5DhppsRnlChhfq3ihcPtwIVN+fOziTzzdWkqeoLaQtPtkNaPpo1nBurLAubtpZejnPtLmDWCe9WCClCQ54GMnZKggBJhAoGAptsUXmkbswaMRGn4lQfVCKuH7cEwFU1qmYgHQzCUaoKGquL4yOlpXo1c6haDUBmr+gc1UZkZZZBhmZpVDLojjE0guaeriA+1Gj76ep1K9/sSdFNLNkmoFVK++/IRQElcdj/x/FuHTws0U6/7gtJ0p+WaRlToN8Ao+S5HOkfsRBPNcsEMP82p3066M+qJwhRnHQw3vgHM7JPhYZ5lgNVM8rdcNs4ZcK3hikNj6PkX6neKFl3ePDoGfW/TXmD/CzAAcryyBfjeu1oAAAAASUVORK5CYII=",offlineMentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA+pJREFUeNqkVktvHEUQ7q7unp19xAkHJ6BFAhshgeI8pAgpuSAO3OLkCJw5cOEXwBX4F/yAiBMCxA1yyQWUG4kEIsoGoyiWDYg4jsc7091F9XRPT8/YkeNlPLvunUd99X1V1VX8+pV1Vh+IyLqHNrrSdJbFvPhsOr00OcGOf0iyyzmnlf+OR3M9wJoD8M8LwHiw1WOA9RFRnxizGABw5/ohDFIs+jwqywUZBPcZsoZARArAjAPAbL6/IINgi7VGo1a0JtP0ReevRfG/ADyPfiTQnVDDbGvzW7G3OECIai1ThHGu0wdgzPl7Y3i8+89CAPyQCvBsaCEABIeLA/FGJh7uPd6pykWyqLHq86XF87eIw0oGIyEHnH+9vXlsgLbQ/F8TCQdTqy9AnM/ERIolJb/9d+f3Y0YCYoR9CFK5Liu2PsCrOZ9KGAt5Qqo3c/HVo43iOEUne9LHUF/P+ftDx0IjKw1JJJakvDZWW/Py1ubs3elrrbZHMgjuN/Xs31yGQEWQFwBDQSrJk0q9oFSh57c2N55zd+LXLl/1ALGAkQXfvFwfjtg7GVbWfrmLPxSVNtUlVq6xciAHV868siTV0Wma7m4OqVl7QqvS1RqReIighJRCns+z5UFmTPnFg3u3n+wcFYPa4UgibqIUCbo8Yrgi3COE8YdllFSSybNDXmmmOGzMq0//3LgwHH704kuvD0fPDHLMnOg12V2VDoOs+wqZGbaWETzkyE4rXnCeAbyci2Wp71XVx7P7F0ejt8aTt0+eOpNlnRhQR/POpgm6ptgnk0N2bTotokYsjd23hvJ1z5i/KvP5jrHWGkt3cKrURIiVwUByykCUwS4PleZ/roqmrFNffFLVyeDKD7gCyEH8zU2eWYvWGIVot9FuaTvThfdJdhpyE4xv9nFmnEQfDJlX6UbBHhgHsZ7jWemS+fsC71ag0ewaUJKIoQXLaoq1JMGm7FRZrZX/+Yt2BbfSCPXjnD2tHaGs9U/c1vy+pnSQ9JwU1ntJPHzW0MoZ5Nit5CQStH5VhPWWZU/dEsecnYYm7Dq0PNeUsE4/jkB57wEgSCLj7n9wvDinQiTu6EDxnGK9K23ugXPYL5wpCLcgpmZ8NJJYbhjMdMiiuH/cqZpXmh6V1pMXsY1B28K6bMjuDeP0+akMt26WjhPZ+bliwVDaQprRId0HZTqtpDDeXJNd4Zldi9/NOzNHHEb6c1tzHVK7vamivf4MGeOoEG/1umGno0Xk+EJqMc2C1F9kmI45aUcJg0+fIB4+A6QYHYuMp5FLe3s/Bgdf7pHridt3vDNpthpK/581EUt37A4ww04MurQ6o2ZX2P8EGAAu1YEi4TmT9gAAAABJRU5ErkJggg==",posts:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAw0lEQVR4AWOAg4IAAYaqqHqG6sj9QPo/jfB5IE5gwAAVEQpAifsgRXTC98F2wgB9LUc4AhzqoCCBC9IfNzAwVEefHzAHVALTG4gxoJiQglEHJKyZ8b9hzxpyMEgv5Q64//71f3LB/XevaRwFo2lgNA2MpoHRNDCaBgjHOZ3SACLOh2IUjDpg1AGV0fsHrlkO7KqBOgcD5oCKCGA/sSFBANhBoHvXDGQnSucUJEBPy8F2ogNwkFRH0ayrBu36N4A7pVAAAK813oG8J1mnAAAAAElFTkSuQmCC"};var R={store:f["b"].shape({getState:f["b"].func.isRequired,subscribeImmediate:f["b"].func,subscribe:f["b"].func.isRequired}).isRequired};var M=function(e){m()(t,e);function t(e){c()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderWithState=a.renderWithState.bind(a);return a}d()(t,[{key:"renderWithState",value:function e(t){var a=Object(T["isHavingTroubleReconnecting"])(t);var r=Object(I["d"])(t);var i=!!Object(A["getTotalUnreadHighlights"])(t);var s=Object(A["teamHasUnreads"])(t);var o=void 0;if(a)o=i?P.troubleMentions:s?P.troubleUnreads:P.trouble;else if(r)o=i?P.onlineMentions:s?P.onlineUnreads:Object(N["a"])()?P.posts:P.online;else{o=P.offline;o=i?P.offlineMentions:s?P.offlineUnreads:P.offline}return n.a.createElement(S,{href:o})}},{key:"render",value:function e(){return n.a.createElement(b["a"],{render:this.renderWithState,store:this.props.store})}}]);return t}(r["Component"]);M.displayName="WorkspaceFavicon";var D=M;var x=D;var F=function e(t,a){if(!t)throw new Error("mountFavicon must be called with a teamId parameter");var r=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(x,{store:r})),a)};var L=F;var B=a(44);Object(B["a"])("interop.mountFavicon",L)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(6);var c=a.n(l);var u=a(7);var d=a.n(u);var p=a(8);var h=a.n(p);var v=a(9);var m=a.n(v);var f=a(0);var b=a(1848);var g=a(19);var _=a(35);var y=a(209);var O=a(188);var k=a(73);var E=a(11);var C=a(274);var j=a(10);var w=a(12);var S=new j["b"]("view");var I={title:f["b"].string.isRequired,logger:f["b"].object.isRequired};var T={};var A=0;var N=function(e){m()(t,e);function t(){c()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"componentDidMount",value:function e(){A&&this.props.logger.error("Multiple DocumentTitles mounted");A+=1;this.originalTitle=document.title;this.updateTitle()}},{key:"componentDidUpdate",value:function e(t){t.title!==this.props.title&&this.updateTitle()}},{key:"componentWillUnmount",value:function e(){A-=1;document.title=this.originalTitle}},{key:"updateTitle",value:function e(){document.title=this.props.title||S.t("Slack",{fallbackHash:"430b38bf6daa7f9164b164b2ffd540b5a3afe2fd",fallbackHashNs:"migration_status_page"})}},{key:"render",value:function e(){return null}}]);return t}(r["PureComponent"]);N.displayName="DocumentTitle";N.defaultProps=T;var P=function e(t){return{logger:Object(w["a"])({state:t})}};var R=Object(i["connect"])(P)(N);var M=R;var D={viewName:f["b"].string,teamName:f["b"].string,isWindowFocused:f["b"].bool.isRequired,highlightCount:f["b"].number.isRequired,unreadCount:f["b"].number.isRequired};var x={viewName:"",teamName:""};var F=function(e){m()(t,e);d()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,a){var r=!t.isWindowFocused&&(a.showHighlights||t.highlightCount>a.highlightCount);var n=!t.isWindowFocused&&(a.showUnreads||t.unreadCount>a.unreadCount);return{highlightCount:t.highlightCount,unreadCount:t.unreadCount,showHighlights:r,showUnreads:n}}}]);function t(e){c()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={highlightCount:0,unreadCount:0,showHighlights:false,showUnreads:false};return a}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.viewName,r=t.teamName;if(!r)return null;var i=a?a+" | "+r:r;this.state.showHighlights?i="! "+i:this.state.showUnreads&&(i="* "+i);return n.a.createElement(M,{title:i})}}]);return t}(r["PureComponent"]);F.displayName="WorkspaceDocumentTitle";F.defaultProps=x;var L=F;var B=new j["b"]("view");var U={store:f["b"].shape({getState:f["b"].func.isRequired,subscribeImmediate:f["b"].func,subscribe:f["b"].func.isRequired}).isRequired};var q=function(e){m()(t,e);function t(e){c()(this,t);var a=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderWithState=a.renderWithState.bind(a);return a}d()(t,[{key:"renderWithState",value:function e(t){var a=Object(k["a"])(t);var r=Object(g["d"])(t,a);var i=Object(_["d"])(t);var s="";a===C["a"].allUnreads?s=B.t("Unread Messages"):a===C["a"].allThreads?s=B.t("Threads"):r&&(s=Object(E["getDisplayNameForChannel"])(t,r,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}));return n.a.createElement(L,{viewName:s,teamName:i&&i.name,isWindowFocused:!!Object(y["isWindowFocused"])(t),highlightCount:Object(O["getTotalUnreadHighlights"])(t),unreadCount:Object(O["getTotalUnreads"])(t)})}},{key:"render",value:function e(){return n.a.createElement(b["a"],{render:this.renderWithState,store:this.props.store})}}]);return t}(r["Component"]);q.displayName="ConnectedWorkspaceDocumentTitle";var G=q;var W=G;var H=function e(t,a){if(!t)throw new Error("mountDocumentTitle must be called with a teamId parameter");var r=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(W,{store:r})),a)};var V=H;var K=a(44);Object(K["a"])("interop.mountDocumentTitle",V)},,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(6);var c=a.n(l);var u=a(7);var d=a.n(u);var p=a(8);var h=a.n(p);var v=a(9);var m=a.n(v);var f=a(2);var b=a(0);var g=a(88);var _=a.n(g);var y=a(107);var O=a.n(y);var k=a(10);var E=a(57);var C=a(11);var j=a(93);var w=a(73);var S=a(19);var I=a(505);var T=a(452);var A=a(24);var N=a(34);var P=a(23);var R=a(1806);var M=a(1057);var D=a(66);var x=a(17);var F=a(38);var L=a(866);var B=a(4173);var U=a(1807);var q=a(4168);var G=a(1842);var W=a(900);var H=a(39);var V=a(208);var K=a(1800);var z=a(1808);var Y=a(1048);var Q=a(71);var J=a(1442);var Z=a(691);var X=a(376);var $=a(98);var ee=a(4);var te=a(1054);var ae=a(308);var re=a(1811);var ne=a(28);var ie=a(139);var se=a(22);var oe=new k["b"]("view");var le={channelId:b["b"].string.isRequired,channel:b["b"].object,showCloseButton:b["b"].bool,channelIsIMWithDeletedMember:b["b"].bool,prevChannelId:b["b"].string,closeChannelApi:b["b"].func.isRequired,member:b["b"].object,archiveChannel:b["b"].func.isRequired,displayModelOrViewById:b["b"].func.isRequired,previouslyConnectedTeamName:b["b"].string,featureEscDisconnectV2Client:b["b"].bool,featureAnnounceOnly:b["b"].bool};var ce={channel:void 0,showCloseButton:false,channelIsIMWithDeletedMember:false,prevChannelId:void 0,member:void 0,previouslyConnectedTeamName:void 0,featureEscDisconnectV2Client:false,featureAnnounceOnly:false};var ue=function(e){m()(t,e);function t(){c()(this,t);var e=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onCloseButtonClicked=e.onCloseButtonClicked.bind(e);return e}d()(t,[{key:"onCloseButtonClicked",value:function e(){Object(C["isIm"])(this.props.channel)?this.props.closeChannelApi({channelId:this.props.channelId}):this.props.archiveChannel({id:this.props.channelId,wasArchivedThisSession:false});this.props.displayModelOrViewById({id:this.props.prevChannelId})}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.showCloseButton,i=t.channelIsIMWithDeletedMember,s=t.member,o=t.previouslyConnectedTeamName,l=t.featureEscDisconnectV2Client,c=t.featureAnnounceOnly;if(!a)return null;var u=Object(C["isChannel"])(a)?oe.t("Close Channel"):oe.t("Close");var d=null;var p="";if(l&&Object(C["isFrozen"])(a))p=Object(C["isImOrMpim"])(a)?oe.rt("<strong>{external_team}</strong> is no longer connected to your organization.",{external_team:o}):oe.rt("This channel is no longer shared with your organization.");else if(Object(C["isArchived"])(a)&&!Object(C["isIm"])(a))p=Object(C["getIsChannelMoved"])(a)?oe.rt("You are viewing {channel_or_group}, a moved channel",{channel_or_group:n.a.createElement("strong",null,n.a.createElement(ie["a"],{channel:a}))}):oe.rt("You are viewing {channel_or_group}, an archived channel",{channel_or_group:n.a.createElement("strong",null,n.a.createElement(ie["a"],{channel:a}))});else if(i&&s&&Object(x["isAppUser"])(s))p=oe.t("You are viewing messages from {app_name} which has been removed from your workspace",{app_name:Object(x["getMemberRealName"])(s)});else if(i){d=n.a.createElement(se["b"],{type:"archive"});p=oe.rt("You are viewing the archives of a deactivated account",{fallbackHash:"a2f3df2a30993d2303ac6a87adcd41cb35c1799f"})}else{if(c){var h=oe.t("Posting to this channel has been restricted to select members");return n.a.createElement(re["a"],{tooltip:h,featureAnnounceOnly:c,border:true,padding:"large"})}p=oe.rt("Your Workspace Owners have limited who can post to {channel_or_group}",{channel_or_group:n.a.createElement("strong",null,n.a.createElement(ie["a"],{channel:a}))})}return n.a.createElement("div",{className:"p-message_pane_input__disabled"},n.a.createElement("span",null,d," ",p),r&&n.a.createElement(ne["d"],{pillarClassName:"p-message_pane_input__disabled_button",onClick:this.onCloseButtonClicked,type:"outline",size:"small"},u))}}]);return t}(r["Component"]);ue.displayName="MessagePaneInputDisabled";ue.defaultProps=ce;var de=function e(t,a){var r=a.channelId;var n=Object(ee["isFeatureEnabled"])(t,"feature_esc_disconnect_v2_client");var i=Object(S["d"])(t,r);var s=Object(C["isIm"])(i)?Object(A["d"])(t,Object(C["getMemberIdFromIm"])(i)):null;var o=Object(C["isImWithDeletedMember"])(t,i);var l=Object(te["a"])(t);var c=Object(C["getPreviouslyConnectedTeamNameForIm"])(t,i);return{channel:i,member:s,previouslyConnectedTeamName:c,channelIsIMWithDeletedMember:o,prevChannelId:l,showCloseButton:Object(C["isArchived"])(i)&&(!n||!Object(C["isFrozen"])(i))||o,featureEscDisconnectV2Client:n,featureAnnounceOnly:Object(ee["isFeatureEnabled"])(t,"feature_announce_only")}};var pe={closeChannelApi:$["g"],archiveChannel:$["b"],displayModelOrViewById:ae["a"]};var he=Object(i["connect"])(de,pe)(ue);var ve=a(108);var me=a(100);var fe=a(168);var be=a(298);var ge=a(164);var _e=a(1068);var ye=a(289);var Oe=a(378);var ke=a(79);var Ee=new k["b"]("archives");var Ce={channelId:b["b"].string.isRequired,channel:b["b"].object.isRequired,channelCreatedBySelf:b["b"].bool,channelDetailsVisible:b["b"].bool,dateCreated:b["b"].number,createdById:b["b"].string,showDetails:b["b"].func.isRequired,joinConversationApi:b["b"].func.isRequired,displayModelOrViewById:b["b"].func.isRequired,userAttentionIsOnChat:b["b"].bool,previousChannelId:b["b"].string};var je={channelCreatedBySelf:false,channelDetailsVisible:false,dateCreated:void 0,createdById:void 0,userAttentionIsOnChat:false,previousChannelId:void 0};var we=function(e){m()(t,e);function t(){c()(this,t);var e=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onJoinButtonClicked=e.onJoinButtonClicked.bind(e);e.onDetailsButtonClicked=e.onDetailsButtonClicked.bind(e);e.handleKeyDown=e.handleKeyDown.bind(e);return e}d()(t,[{key:"componentDidMount",value:function e(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"onDetailsButtonClicked",value:function e(){this.props.showDetails()}},{key:"onJoinButtonClicked",value:function e(){this.props.joinConversationApi({channelId:this.props.channelId})}},{key:"handleKeyDown",value:function e(t){var a=this.props,r=a.userAttentionIsOnChat,n=a.previousChannelId;if(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey)return;if(Object(_e["a"])(document.activeElement))return;if(Object(F["a"])()&&!r)return;if(!Object(F["a"])()&&!Object(fe["f"])())return;if(t.keyCode===ke["c"]){this.onJoinButtonClicked();return}if(t.keyCode===ke["d"]){if(Object(F["a"])()){this.props.displayModelOrViewById({id:n});return}Object(be["a"])()}}},{key:"render",value:function e(){var t=this.props,a=t.channel,r=t.dateCreated,i=t.createdById,s=t.channelCreatedBySelf,o=t.channelDetailsVisible;var l=n.a.createElement(Oe["a"],{type:"unknown"});r&&(l=Object(ge["i"])(r));var c=n.a.createElement(Oe["a"],{type:"unknown"});i&&(c=n.a.createElement(ye["a"],{id:i}));var u=Ee.rt("You are viewing {channel_name}",{channel_name:n.a.createElement("strong",null,n.a.createElement(ie["a"],{channel:a}))});var d="";d=s?Ee.rt("Created by you on {created_at}",{created_at:l}):Ee.rt("Created by {name} on {created_at}",{name:c,created_at:l});return n.a.createElement("div",{className:"p-message_pane_input__preview"},n.a.createElement("div",{className:"p-message_pane_input__preview_subtitle"},u),n.a.createElement("div",{className:"p-message_pane_input__preview_metadata"},d),n.a.createElement("div",null,n.a.createElement(ne["d"],{pillarClassName:"p-message_pane_input__preview_join",onClick:this.onJoinButtonClicked,type:"primary",size:"medium"},Ee.t("Join Channel")),!o&&n.a.createElement(ne["d"],{pillarClassName:"p-message_pane_input__preview_details",onClick:this.onDetailsButtonClicked,type:"outline",size:"medium"},Ee.t("See More Details"))))}}]);return t}(r["Component"]);we.displayName="MessagePaneInputPreview";we.defaultProps=je;var Se=function e(t,a){var r=a.channelId;var n=Object(S["d"])(t,r);var i=Object(ve["g"])(t);return{channel:n,channelDetailsVisible:"details"===i||"channel_info"===i,createdById:n.creator,dateCreated:n.created,channelCreatedBySelf:n.creator===Object(ee["getCurrentUserId"])(t),userAttentionIsOnChat:Object(L["c"])(t),previousChannelId:Object(te["a"])(t)}};var Ie={joinConversationApi:$["o"],showDetails:me["e"],displayModelOrViewById:ae["a"]};var Te=Object(i["connect"])(Se,Ie)(we);var Ae=a(451);var Ne=new k["b"]("msg_input");var Pe={isSelfDm:b["b"].bool,channelName:b["b"].string,memberId:b["b"].string,showStatus:b["b"].bool,forcePlaceholderText:b["b"].string};var Re={isSelfDm:false,channelName:void 0,memberId:void 0,showStatus:false,forcePlaceholderText:void 0};var Me=function(e){m()(t,e);function t(){c()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"render",value:function e(){var t=this.props,a=t.channelName,r=t.isSelfDm,i=t.showStatus,s=t.memberId,o=t.forcePlaceholderText;var l=void 0;if(o)l=o;else{l=Ne.t("Message channel");r?l=Ne.t("Jot something down"):a&&(l=Ne.rt("Message {msg}",{msg:a}))}var c=!o&&i&&n.a.createElement(Ae["a"],{memberId:s,tooltip:false});return n.a.createElement("div",{className:"c-texty_input__placeholder"},l,c)}}]);return t}(r["Component"]);Me.displayName="MessagePaneInputPlaceholder";Me.defaultProps=Re;var De=function e(t,a){var r=a.channelId;var n=Object(S["d"])(t,r);var i=Object(C["getDisplayNameForChannel"])(t,n,{imIncludeAtSign:false});var s=Object(ee["getCurrentUserId"])(t);var o=Object(C["isYou"])(s,n);var l=Object(C["getMemberIdFromIm"])(n);var c=l?Object(A["d"])(t,l):null;return{channelName:i,isSelfDm:o,memberId:l||void 0,showStatus:Object(C["isIm"])(n)&&!o&&Object(x["hasCustomStatusSet"])(c)}};var xe=Object(i["connect"])(De)(Me);var Fe=a(3229);var Le={channel:b["b"].object,channelId:b["b"].string,prepareAndSendMessage:b["b"].func,currentUserStartedTyping:b["b"].func,currentUserEndedTyping:b["b"].func,editLastMessageInChannel:b["b"].func,openSnippetDialog:b["b"].func,typingNames:b["b"].array,useSendButton:b["b"].bool,userCanPost:b["b"].bool,stealFocusWhenTyping:b["b"].bool,teamId:b["b"].string,featureWysiwygComposer:b["b"].bool,telemeter:b["b"].object.isRequired,isUnavailable:b["b"].bool};var Be={channel:void 0,channelId:void 0,prepareAndSendMessage:function e(){return Promise.resolve()},currentUserStartedTyping:f["noop"],currentUserEndedTyping:f["noop"],editLastMessageInChannel:f["noop"],openSnippetDialog:f["noop"],useSendButton:false,userCanPost:true,typingNames:[],stealFocusWhenTyping:false,teamId:void 0,featureWysiwygComposer:false,isUnavailable:false};var Ue=function(e){m()(t,e);function t(){c()(this,t);var e=h()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));Object(f["bindAll"])(e,["handleKeyDown","onTextChange","sendMessage","editLastMessage","snippetCallback","startListeningToKeydown","stopListeningToKeydown","registerInput","unregisterInput","focus","blur","onBlur"]);e.textyRef=n.a.createRef();e.state={textyValue:"",textyWysiwygLength:0,hasKeyboardFocus:false};return e}d()(t,[{key:"componentDidMount",value:function e(){this.updatePlaceholder();this.registerInput();this.restoreLegacyDraft()}},{key:"shouldComponentUpdate",value:function e(t){var a=this.props,r=a.userCanPost,n=a.channel;(r&&!t.userCanPost||!Object(C["isPreview"])(n)&&Object(C["isPreview"])(t.channel))&&this.unmountPlaceholder();return true}},{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.stealFocusWhenTyping,n=a.channelId,i=a.userCanPost,s=a.channel;t.stealFocusWhenTyping&&!r?this.stopListeningToKeydown():!t.stealFocusWhenTyping&&r&&this.startListeningToKeydown();if(t.channelId!==n){t.channelId&&this.unregisterInput(t.channelId);if(n){this.registerInput();this.restoreLegacyDraft()}}(n&&t.channelId!==n||!t.userCanPost&&i||(!t.channel||Object(C["isPreview"])(t.channel))&&!Object(C["isPreview"])(s))&&this.updatePlaceholder()}},{key:"componentWillUnmount",value:function e(){var t=this.props.channelId;this.stopListeningToKeydown();this.unmountPlaceholder();this.unregisterInput(t)}},{key:"onTextChange",value:function e(t,a){var r=this.props.channelId;this.setState(function(){return{textyValue:t,textyWysiwygLength:Object(Y["a"])(new O.a(a))}});Object(F["a"])()||Object(X["h"])(t);t&&0!==t.indexOf("/")&&Object(f["trim"])(t).length?this.props.currentUserStartedTyping({channelId:r}):this.props.currentUserEndedTyping({channelId:r})}},{key:"onBlur",value:function e(){this.startListeningToKeydown();var t=this.getInputRef();t&&this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getInputRef",value:function e(){if(!this.textyRef.current)return null;return this.textyRef.current.getWrappedInstance?this.textyRef.current.getWrappedInstance():this.textyRef.current}},{key:"restoreLegacyDraft",value:function e(){var t=this.props.channelId;var a=this.getInputRef();if(!t)return;if(Object(F["a"])())return;if(!a)return;var r=Object(Z["a"])(t);a.value(r||"");var n=Object(X["b"])(t);n?a.setCursor(n.start,n.length):a.setCursorAtEnd()}},{key:"registerInput",value:function e(){var t=this;var a=this.props.channelId;if(!a)return;Object(V["b"])({viewContext:H["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:a,functions:{getContainer:function e(){var a=t.getInputRef();return a?a.container:null},setText:function e(a){var r=t.getInputRef();r&&r.value(a)},getText:function e(){var a=t.getInputRef();return a?a.value():null},getLength:function e(){var a=t.getInputRef();return a?a.getLength():null},getDisplayValue:function e(){var a=t.getInputRef();return a?a.displayValue():null},focus:function e(){var a=t.getInputRef();a&&a.setCursorAtEnd()},focusWithoutSettingCursor:function e(){var a=t.getInputRef();a&&a.focus()},hasFocus:function e(){var a=t.getInputRef();return!!a&&a.hasFocus()},isEnabled:function e(){var a=t.getInputRef();return!!a&&a.isEnabled()},getSelection:function e(){var a=t.getInputRef();return a?a.getSelection():null},insertContentsAtCursor:function e(a){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";var i=t.getInputRef();i&&i.insertContentsAtCursor(a,r,n)},setCursor:function e(a,r){var n=t.getInputRef();n&&n.setCursor(a,r)},setPlaceholder:function e(a){t.updatePlaceholder(a)},getContentsForCurrentSelection:function e(){var a=t.getInputRef();if(!a)return null;var r=a.getSelection();if(!r)return null;return a.getContentsForRange(r.index,r.length)}}})}},{key:"unregisterInput",value:function e(t){if(!t)return;Object(V["c"])({viewContext:H["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:t})}},{key:"unmountPlaceholder",value:function e(){var t=this.getInputRef();if(!t)return;var a=t.container.querySelector(".ql-placeholder");a&&_.a.unmountComponentAtNode(a)}},{key:"updatePlaceholder",value:function e(t){var a=this.props,r=a.teamId,s=a.channelId;var l=this.getInputRef();if(!l)return;var c=l.container.querySelector(".ql-placeholder");c&&_.a.render(n.a.createElement(i["Provider"],{store:Object(o["d"])(r)},n.a.createElement(xe,{channelId:s,forcePlaceholderText:t})),c)}},{key:"editLastMessage",value:function e(){this.props.editLastMessageInChannel({channelId:this.props.channelId})}},{key:"handleKeyDown",value:function e(t){if(!Object(z["a"])({e:t,isMenuVisible:Object(D["g"])()}))return;var a=Object(K["a"])(t.target,function(e){return e.classList.contains("p-threads_flexpane")});if(a)return;var r=this.getInputRef();Object(E["c"])()?setTimeout(function(){return r.focus()},0):r.focus()}},{key:"startListeningToKeydown",value:function e(){var t=this.props.stealFocusWhenTyping;if(!t)return;document.addEventListener("keydown",this.handleKeyDown)}},{key:"stopListeningToKeydown",value:function e(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"sendMessage",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.useSendButton,i=a.featureWysiwygComposer,s=a.telemeter;var o=this.getInputRef();var l=o.value();var c=o.getContents();if(!Object(U["a"])(o.getContents(),{featureWysiwygComposer:i}))return null;Object(J["a"])()&&s.mark("msg_input_try_to_submit");o.clear();n&&o.focus();return this.props.prepareAndSendMessage({channelId:r,text:l,delta:i?new O.a(c.contents):null,includeBroadcastKeywordWarning:true,includePrivateFileReshareWarning:true}).then(function(){var e=t.getInputRef();e&&e.clearHistory()}).catch(function(){o.isEmpty()&&o.setContents(c)})}},{key:"snippetCallback",value:function e(){var t=this.getInputRef();this.props.openSnippetDialog({initialChannelId:this.props.channelId,initialText:t.displayValue(),fromPrompt:true});t.clear()}},{key:"focus",value:function e(){var t=this.getInputRef();if(t){t.setCursorAtEnd();this.setState(function(){return{hasKeyboardFocus:true}})}}},{key:"blur",value:function e(){var t=this.getInputRef();t&&t.blur();this.onBlur()}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.channel,i=t.typingNames,s=t.useSendButton,o=t.userCanPost;var l=this.state,c=l.textyValue,u=l.textyWysiwygLength,d=l.hasKeyboardFocus;if(this.props.isUnavailable)return null;if(a&&!o)return n.a.createElement(he,{channelId:this.props.channelId});if(a&&Object(C["isPreview"])(r))return n.a.createElement(Te,{channelId:this.props.channelId});return n.a.createElement(W["a"],{component:this,order:2},n.a.createElement("div",{className:"p-workspace__message_pane_input"},n.a.createElement("div",{className:"p-workspace__message_pane_input_inner"},n.a.createElement(B["c"],{channelId:a,viewContext:H["MESSAGE_CONTAINERS"].MESSAGE_PANE,className:"p-workspace__input",sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,useSendButton:s,useLegacyDrafts:!Object(F["a"])(),ref:this.textyRef,enableEmojiButton:true,enableMentionButton:true,focusOnMount:true,onTextChange:this.onTextChange,onFocus:this.stopListeningToKeydown,onBlur:this.onBlur,maxLines:null,showFocusOutline:d,tabIndex:1,fileButtonTabIndex:2}),n.a.createElement(G["a"],{typingNames:i,snippetCallback:this.snippetCallback,inputText:c,wysiwygTextLength:u})),s&&n.a.createElement(B["b"],{isDisabled:!c,sendMessage:this.sendMessage,className:"p-workspace__message_pane_send",tabIndex:1})))}}]);return t}(r["Component"]);Ue.displayName="MessagePaneInput";Ue.defaultProps=Be;var qe=function e(t){var a=Object(w["a"])(t);var r=Object(S["d"])(t,a);var n=Object(f["map"])(Object(T["getTyperIdsInChannel"])(t,a),function(e){return Object(A["d"])(t,e)});n.sort(function(e,a){return Object(k["p"])(Object(x["getPrefCompliantMemberNameLowerCase"])(t,e),Object(x["getPrefCompliantMemberNameLowerCase"])(t,a))});return{channelId:a,channel:r,userCanPost:Object(j["p"])(t,a)&&!Object(C["isArchived"])(r),typingNames:n.map(function(e){return Object(x["getPrefCompliantMemberName"])(t,e)}),useSendButton:Object(N["f"])(t,"msg_input_send_btn"),stealFocusWhenTyping:Object(L["c"])(t),teamId:Object(P["c"])(t),featureWysiwygComposer:Object(q["a"])(t),isUnavailable:Object(C["isUnavailable"])(t,r),telemeter:Object(Q["c"])({state:t})}};var Ge={prepareAndSendMessage:function e(){return I["a"].apply(void 0,arguments)},currentUserStartedTyping:function e(){return T["currentUserStartedTyping"].apply(void 0,arguments)},currentUserEndedTyping:function e(){return T["currentUserEndedTyping"].apply(void 0,arguments)},editLastMessageInChannel:function e(){return R["a"].apply(void 0,arguments)},openSnippetDialog:function e(){return M["a"].apply(void 0,arguments)}};var We=Object(i["connect"])(qe,Ge)(Ue);var He=We;var Ve=a(163);var Ke=function e(t,a){if(!t)throw new Error("mountMessagePaneInput must be called with a teamId parameter");var r=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(Ve["a"],null,n.a.createElement(He,null))),a)};var ze=Ke;var Ye=a(44);Object(Ye["a"])("interop.mountMessagePaneInput",ze)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(27);var c=a(44);var u=a(0);var d=a(4);var p=a(6);var h=a.n(p);var v=a(7);var m=a.n(v);var f=a(8);var b=a.n(f);var g=a(9);var _=a.n(g);var y=a(40);var O=a.n(y);var k=a(10);var E=a(150);var C=a(764);var j=a(28);var w=a(157);var S=a(701);var I=a(135);var T=a(1681);var A=a(1474);var N=a(3058);var P=new k["b"]("enterprise_dashboard");var R={enqueueToast:u["b"].func.isRequired,orgName:u["b"].string,configured:u["b"].bool,featureEKMPhase2:u["b"].bool,getClearCacheTs:u["b"].func.isRequired,setClearCacheTs:u["b"].func.isRequired,lastCacheClearTs:u["b"].number};var M={orgName:"",configured:false,featureEKMPhase2:false,lastCacheClearTs:0};var D=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onPushClick=a.onPushClick.bind(a);a.state={lastCacheClearTs:e.lastCacheClearTs};return a}m()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.configured&&this.props.getClearCacheTs().then(function(e){var a=e.timestamp;t.setState(function(){return{lastCacheClearTs:a}})})}},{key:"onPushClick",value:function e(){var t=this;var a=this.props.featureEKMPhase2;this.props.setClearCacheTs({timestamp:O()().unix(),reason:"EKMPurchasedView_setClearCacheTs"}).then(function(e){var r=e.timestamp;t.setState(function(){return{lastCacheClearTs:r}});t.props.enqueueToast({element:n.a.createElement(w["b"],{position:"bottom-right"},n.a.createElement("div",null,a?P.rt("<b>Caches cleared.</b> Key changes will be reflected across all clients in a few minutes."):P.rt("Policy changes pushed to {teamName}.",{teamName:t.props.orgName})))})})}},{key:"renderCacheClearControls",value:function e(){var t=this.props.featureEKMPhase2;return n.a.createElement("div",null,n.a.createElement("div",{className:"display_flex justify_content_between"},n.a.createElement("div",null,n.a.createElement("h2",{className:"p-ekm_purchased_view__subtitle"},P.t("Made key policy changes in AWS?")),n.a.createElement("div",{className:"sk_dark_gray margin_bottom_100"},n.a.createElement("span",{className:"bold"},t?P.t("Last Cleared: "):P.t("Last Push: ")),n.a.createElement("span",null,n.a.createElement(A["a"],{timestamp:this.state.lastCacheClearTs})))),n.a.createElement("div",null,n.a.createElement(j["d"],{type:"primary",onClick:this.onPushClick},t?P.t("Clear Cache"):P.t("Push to Slack")))),n.a.createElement("p",null,t?P.t("Clearing client caches is recommended when making any key changes in AWS as different Slack clients cache data for varying amounts of time. This will ensure key changes are reflected across all clients within 24 hours. Any offline devices will update the next time they\u2019re online."):P.rt("Pushing key policy changes made in AWS will force all clients to reload, ensuring those changes are reflected in Slack. This may take <b>up to 24 hours.</b> Offline devices will update when they\u2019re next online.")),n.a.createElement(S["a"],null))}},{key:"renderUnconfiguredMessage",value:function e(){if(!this.props.featureEKMPhase2)return null;return n.a.createElement(I["a"],{type:"boxed",level:"info",icon:"info-circle",align:"left",className:"margin_bottom_100"},n.a.createElement("span",{className:"bold"},P.t("Contact your Slack Customer Success Manager to enable EKM")),n.a.createElement("div",null,P.t("To start encrypting all data using your own keys, you\u2019ll need to enable EKM by providing the ARN for your key family.")))}},{key:"render",value:function e(){var t=this.props,a=t.featureEKMPhase2,r=t.configured,i=t.orgName;return n.a.createElement("div",{className:"p-ekm_purchased_view"},n.a.createElement("h1",{className:"p-ekm_purchased_view__title"},P.t("Enterprise Key Management")),a?n.a.createElement("p",null,P.t("Enterprise Key Management (EKM) encrypts all messages and files in your organization using your keys managed through AWS Key Management Service. These keys are never visible to Slack.")):n.a.createElement("p",null,P.t("EKM encrypts all messages and files in your organization using your keys managed through AWS Key Management Service. These keys are never visible to Slack.")),!r&&this.renderUnconfiguredMessage(),a&&r&&n.a.createElement("hr",null),n.a.createElement(T["a"],{orgName:i}),r&&n.a.createElement("hr",null),r&&this.renderCacheClearControls())}}]);return t}(r["PureComponent"]);D.displayName="EKMPurchasedView";D.defaultProps=M;var x=function e(t){return{featureEKMPhase2:Object(d["isFeatureEnabled"])(t,"feature_ekm_phase_2")}};var F=function e(t){return{enqueueToast:function e(a){return t(Object(E["enqueueToast"])(a))},getClearCacheTs:function e(){return t(Object(C["c"])({reason:"EKMPurchasedView_getClearCacheTs"}))},setClearCacheTs:function e(a){return t(Object(C["i"])(a))}}};var L=Object(o["connect"])(x,F)(D);var B=L;var U=a(3060);var q=new k["b"]("enterprise_dashboard");var G={orgName:u["b"].string,featureEKMPhase2:u["b"].bool};var W={orgName:"",featureEKMPhase2:false};var H="https://slack.com/enterprise-key-management";var V=function(e){_()(t,e);function t(){h()(this,t);return b()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}m()(t,[{key:"render",value:function e(){var t=this.props,a=t.orgName,r=t.featureEKMPhase2;if(!r)return null;return n.a.createElement("div",{className:"p-ekm_status_view__not_purchased display_flex flex_direction_column align_items_center"},n.a.createElement("div",{className:"p-ekm_status_view__not_purchased_img"}),n.a.createElement("h2",{className:"p-ekm_status_view__title"},q.t("Enterprise Key Management")),n.a.createElement("p",{className:"p-ekm_status_view__not_purchased_text align_center"},q.rt("Adding Enterprise Key Management (EKM) to <strong>{orgName}</strong> allows you to encrypt all messages and files in your organization using your own encryption keys, giving you complete control of your data in Slack.",{orgName:a})),n.a.createElement(j["d"],{href:H,className:"no_underline"},q.t("Learn More")))}}]);return t}(r["PureComponent"]);V.displayName="EKMNotPurchasedView";V.defaultProps=W;var K=V;var z=K;var Y={purchased:u["b"].bool,featureEKMPhase2:u["b"].bool};var Q={purchased:false,featureEKMPhase2:false};function J(e){var t=e.featureEKMPhase2,a=e.purchased;if(t&&!a)return n.a.createElement(z,e);return n.a.createElement(B,e)}J.displayName="EKMView";J.defaultProps=Q;var Z=function e(t){return{featureEKMPhase2:Object(d["isFeatureEnabled"])(t,"feature_ekm_phase_2")}};var X=Object(o["connect"])(Z)(J);var $=X;Object(c["a"])("interop.ekmStatus",{render:function e(t,a,r){if(!t)throw new Error("ekmStatus render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement($,r)),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(27);var c=a(44);var u=a(3);var d=a.n(u);var p=a(6);var h=a.n(p);var v=a(7);var m=a.n(v);var f=a(8);var b=a.n(f);var g=a(9);var _=a.n(g);var y=a(0);var O=a(2);var k=a(16);var E=a.n(k);var C=a(159);var j=a(10);var w=a(1562);function S(e){var t=e.workspaceName,a=e.workspaceDomain,r=e.workspaceDesc,n=e.accessSetting;var i={name:t,domain:a};if(r||n)return d()({},i,{description:r,access_setting:n});return i}var I=a(37);var T=a.n(I);var A=a(5);var N=a.n(A);var P=a(54);var R=a(179);var M=a(687);var D=a(321);var x=new j["b"]("enterprise_dashboard");var F=/^[a-z0-9-]+$/i;var L=/[a-z]+/i;var B=/^[a-z0-9]/i;var U=/[a-z0-9]$/i;var q=void 0;function G(){q={empty_domain:x.t("Please fill in a workspace domain."),invalid_domain_characters:x.t("Your domain can only have letters, numbers, and dashes."),domain_no_start_end_dash:x.t("Your domain can\u2019t start or end with a dash."),domain_minimum_one_letter:x.t("Your domain needs at least one letter in it."),maximum_domain_length_reached:Object(D["b"])(re),empty_name:x.t("Please fill in a name."),maximum_workspace_name_length_reached:Object(D["b"])(ne),empty_description:x.t("Please fill in a workspace description."),maximum_description_length_reached:Object(D["b"])(ie)};return null}function W(e){return U.test(e)}function H(e){return e.length<=re}function V(e){return e.length<=ne}function K(e){return e.length<=ie}function z(e){return B.test(e)}function Y(e){return e.trim().length>0}function Q(e){if(Object(O["isNull"])(e)||Object(O["isUndefined"])(e))return"";if(!Y(e))return q.empty_name;if(!V(e))return q.maximum_workspace_name_length_reached;return""}function J(e){if(Object(O["isNull"])(e)||Object(O["isUndefined"])(e))return"";if(!Y(e)||"organization"===e)return q.empty_domain;if(!H(e))return q.maximum_domain_length_reached;if(!F.test(e))return q.invalid_domain_characters;if(!L.test(e))return q.domain_minimum_one_letter;if(!z(e)||!W(e))return q.domain_no_start_end_dash;return""}function Z(e){if(Object(O["isNull"])(e)||Object(O["isUndefined"])(e))return"";if(!Y(e))return q.empty_description;if(!K(e))return q.maximum_description_length_reached;return""}function X(e){G();var t=e.workspaceName,a=e.workspaceDomain,r=e.workspaceDesc;var n=Q(t);var i=J(a);var s=Z(r);if(!n&&!i&&!s)return{};return{workspaceName:n,workspaceDomain:i,workspaceDesc:s}}var $={};Object.defineProperty($,"isValidWorkspaceName",{get:function e(){return Q},set:function e(t){Q=t}});Object.defineProperty($,"isValidWorkspaceDomain",{get:function e(){return J},set:function e(t){J=t}});Object.defineProperty($,"isValidWorkspaceDescription",{get:function e(){return Z},set:function e(t){Z=t}});var ee=new j["b"]("enterprise_dashboard");var te={workspaceName:y["b"].string,workspaceDomain:y["b"].string,workspaceDesc:y["b"].string,errors:y["b"].object,onSubmit:y["b"].func.isRequired};var ae={workspaceName:null,workspaceDomain:null,workspaceDesc:null,errors:null};var re=21;var ne=255;var ie=255;var se=function e(t){Object(C["b"])(Object(C["a"])().teams.setCreateTeamErrors(t))};var oe=function e(t,a){Object(C["b"])(Object(C["a"])().teams.setCreateTeamError(t,a))};var le=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={values:{workspaceDomain:a.props.workspaceDomain,workspaceName:a.props.workspaceName,workspaceDesc:a.props.workspaceDesc},errors:a.props.errors};return a}m()(t,[{key:"onInputChanged",value:function e(t,a){this.setFormValue(t,a);oe(t,"")}},{key:"setFormValue",value:function e(t,a){this.setState(function(e){return{values:d()({},e.values,N()({},t,a))}})}},{key:"bindArgs",value:function e(t){for(var a=arguments.length,r=Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return t.bind.apply(t,[this].concat(r))}},{key:"submit",value:function e(t){var a=X(this.state.values);if(!Object(O["isEmpty"])(a)){se(a);return}this.props.onSubmit(this.state.values,t)}},{key:"renderTextInput",value:function e(t){var a=t.suffix,r=t.name,i=T()(t,["suffix","name"]);return n.a.createElement(R["a"],d()({},i,{name:r,suffix:a,onChange:this.bindArgs(this.onInputChanged,r)}))}},{key:"renderNameInput",value:function e(){var t=this.state.values.workspaceName;var a=Object(O["get"])(this.props.errors,"workspaceName");var r="workspace_input_name";var n={name:"workspaceName",inputLabel:ee.t("Workspace Name"),maxCharacterLimit:ne,value:t,id:r,labelId:r+"_label"};a&&(n=d()({},n,{errorText:a}));return this.renderTextElement(n)}},{key:"renderDomainInput",value:function e(){var t=this.state.values.workspaceDomain;var a=Object(O["get"])(this.props.errors,"workspaceDomain");var r="workspace_input_domain";var n={name:"workspaceDomain",inputLabel:ee.t("Workspace Domain"),hintText:ee.t("Letters, numbers, and hyphens only."),maxCharacterLimit:re,suffix:ee.t(".slack.com"),placeholder:ee.t("workspace-url"),value:t,id:r,labelId:r+"_label"};a&&(n=d()({},n,{errorText:a}));return this.renderTextElement(n)}},{key:"renderDescriptionInput",value:function e(){var t=this.state.values.workspaceDesc;var a=Object(O["get"])(this.props.errors,"workspaceDesc");var r="workspace_input_description";var n={name:"workspaceDesc",inputLabel:ee.t("Workspace Description"),hintText:ee.t("A detailed description can help members of your organization decide whether they should join this workspace."),maxCharacterLimit:ie,value:t,id:r,labelId:r+"_label"};a&&(n=d()({},n,{errorText:a}));return this.renderTextareaElement(n)}},{key:"renderTextareaElement",value:function e(t){var a=t.labelId,r=t.inputLabel,i=t.sublabelText,s=t.id,o=t.name,l=T()(t,["labelId","inputLabel","sublabelText","id","name"]);return n.a.createElement(P["a"],{id:a,htmlFor:s,className:"p-ent_workspace_create__label",text:r,subtext:i},n.a.createElement(M["a"],d()({},l,{id:s,name:o,onChange:this.bindArgs(this.onInputChanged,o),resize:"none"})))}},{key:"renderTextElement",value:function e(t){var a=t.inputLabel,r=t.labelId,i=t.sublabelText,s=t.id,o=T()(t,["inputLabel","labelId","sublabelText","id"]);return n.a.createElement(P["a"],{id:r,htmlFor:s,className:"p-ent_workspace_create__label",text:a,subtext:i},this.renderTextInput(d()({id:s},o)))}},{key:"render",value:function e(){return n.a.createElement("div",null,this.renderNameInput(),this.renderDomainInput(),this.renderDescriptionInput())}}]);return t}(r["Component"]);le.displayName="CreateWorkspaceModalNameForm";le.defaultProps=ae;var ce=le;var ue=a(211);var de=a(364);var pe=new j["b"]("enterprise_dashboard");var he={accessSetting:y["b"].string,onSubmit:y["b"].func.isRequired};var ve={accessSetting:null};var me=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={accessSetting:a.props.accessSetting};Object(O["bindAll"])(a,["renderAccessSettingRadio","handleAccessSettingChange"]);return a}m()(t,[{key:"componentWillReceiveProps",value:function e(t){this.updateOnAccessSettingChange(t)}},{key:"getAccessSetting",value:function e(){return this.state.accessSetting}},{key:"setAccessSetting",value:function e(t){this.setState(function(){return{accessSetting:t}})}},{key:"updateOnAccessSettingChange",value:function e(t){var a=t.accessSetting!==this.props.accessSetting;a&&this.setAccessSetting(t.accessSetting)}},{key:"submit",value:function e(t){var a=this.getAccessSetting();this.props.onSubmit(a,t)}},{key:"handleAccessSettingChange",value:function e(t){t.persist();this.setAccessSetting(t.target.value)}},{key:"renderAccessSettingRadio",value:function e(t){var a=this.state.accessSetting;var r=t.accessType,i=t.accessName,s=t.descriptionText;return n.a.createElement("div",{key:r},n.a.createElement(P["a"],{id:r,htmlFor:"workspace_access_type_"+r,type:"inline",cursor:"pointer",className:"p-ent_workspace_create__label p-ent_workspace_create__label--radio",text:i,subtext:s},n.a.createElement(ue["a"],{id:"workspace_access_type_"+r,value:r,onChange:this.handleAccessSettingChange,checked:r===a})))}},{key:"renderAccessSettingForm",value:function e(){var t=[{accessType:"open",accessName:pe.t("Open"),descriptionText:pe.t("Anyone in your organization will be able to join this workspace.")},{accessType:"closed",accessName:pe.t("By Request"),descriptionText:pe.t("Members can request to join this workspace.")},{accessType:"invite_only",accessName:pe.t("Invite Only"),descriptionText:pe.t("Members must be invited by a Workspace Owner or Admin.")},{accessType:"unlisted",accessName:pe.t("Hidden"),descriptionText:pe.t("This workspace will be hidden from the rest of your organization. Members must be invited by a Workspace Owner or Admin.")}];var a=t.map(this.renderAccessSettingRadio);return n.a.createElement(de["a"],{field:"workspaceAccessSetting",noTouch:true},a)}},{key:"render",value:function e(){return n.a.createElement("div",null,this.renderAccessSettingForm())}}]);return t}(r["Component"]);me.displayName="CreateWorkspaceModalAccessForm";me.defaultProps=ve;var fe=me;var be=a(3034);var ge=new j["b"]("enterprise_dashboard");var _e={workspaceName:y["b"].string,workspaceDomain:y["b"].string,accessSetting:y["b"].string,workspaceDesc:y["b"].string,apiCallCount:y["b"].number,errors:y["b"].object,ui:y["b"].object,open:y["b"].bool,onSubmit:y["b"].func.isRequired,onCancel:y["b"].func.isRequired};var ye={workspaceName:"",workspaceDomain:"",accessSetting:"closed",workspaceDesc:"",apiCallCount:null,errors:{},ui:{},open:true};var Oe=function(e){_()(t,e);function t(e){h()(this,t);var a=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={workspaceName:a.props.workspaceName,workspaceDomain:a.props.workspaceDomain,workspaceDesc:a.props.workspaceDesc,accessSetting:a.props.accessSetting,isPending:false};Object(O["bindAll"])(a,["renderChooseNamePane","renderAccessSettingPane","setWorkspaceInfo","setAccessSetting","getWorkspaceInfo"]);return a}m()(t,[{key:"componentWillReceiveProps",value:function e(t){this.updateOnApiCountChange(t);this.updateOnModalClose(t)}},{key:"getWorkspaceInfo",value:function e(){return{workspaceName:this.state.workspaceName,workspaceDomain:this.state.workspaceDomain,accessSetting:this.state.accessSetting,workspaceDesc:this.state.workspaceDesc}}},{key:"setWorkspaceInfo",value:function e(t,a){this.setState(function(){return{workspaceName:t.workspaceName,workspaceDomain:t.workspaceDomain,workspaceDesc:t.workspaceDesc}},a)}},{key:"setAccessSetting",value:function e(t,a){this.setState(function(){return{accessSetting:t}},a)}},{key:"setPendingState",value:function e(t){this.setState(function(){return{isPending:t}})}},{key:"updateOnApiCountChange",value:function e(t){var a=t.apiCallCount!==this.props.apiCallCount;if(a){var r=t.apiCallCount>0;this.setPendingState(r)}}},{key:"updateOnModalClose",value:function e(t){var a=this.props.open&&!t.open;a&&this.reset()}},{key:"reset",value:function e(){var t=ye.workspaceName,a=ye.workspaceDomain,r=ye.workspaceDesc,n=ye.accessSetting;this.setWorkspaceInfo({workspaceName:t,workspaceDomain:a,workspaceDesc:r},O["noop"]);this.setAccessSetting(n);this.setPendingState(ye.isPending)}},{key:"isPending",value:function e(){return this.state.isPending}},{key:"submit",value:function e(t){this.props.onSubmit(t)}},{key:"buildModalSteps",value:function e(){var t=this;var a=function e(){var a={header:ge.t("Set up your workspace"),subtitle:ge.t("Choose a name and domain for your workspace, and give it a description. You can always change these later."),renderInnerPane:t.renderChooseNamePane};return t.renderModalPane(a)};var r=function e(){var a={header:ge.t("Set access for this workspace"),subtitle:ge.t("Choose how members in your organization can join this workspace."),renderInnerPane:t.renderAccessSettingPane};return t.renderModalPane(a)};var n=function e(){var a=function e(){var a=t.state,r=a.workspaceName,n=a.workspaceDomain;Object(C["b"])(Object(C["a"])().teams.getWorkspaceInfoAvailability({workspaceName:r,workspaceDomain:n}))};t.chooseNameForm.submit(a)};var i=function e(){var a=t.getWorkspaceInfo();t.setPendingState(true);t.submit(S(a));t.createWorkspaceModalRef.goToNextStep()};var s=function e(){t.accessSettingForm.submit(i);t.createWorkspaceModalRef.goToNextStep()};var o=[{children:a,goButtonText:ge.t("Next"),title:ge.t("Choose Name"),withFooter:true,withBreadcrumbHeader:true,showBackButton:false,goButtonIsPending:this.isPending(),showCancelButton:true,onGo:n,onCancel:this.props.onCancel},{children:r,goButtonText:ge.t("Create Workspace"),title:ge.t("Set Access"),withFooter:true,withBreadcrumbHeader:true,showBackButton:true,goButtonIsPending:this.isPending(),showCancelButton:true,onBack:function e(){Object(C["b"])(Object(C["a"])().ui.updateModalStepIndex(0))},onGo:s,cancelText:ge.t("Cancel"),onCancel:this.props.onCancel}];return o}},{key:"renderSubtitle",value:function e(t){if(t)return n.a.createElement("p",{className:"p-ent_workspace_create__subtitle"},t);return null}},{key:"renderChooseNamePane",value:function e(){var t=this;var a=this.state,r=a.workspaceName,i=a.workspaceDomain,s=a.workspaceDesc;var o=this.props.errors;return n.a.createElement(ce,{workspaceName:r,workspaceDomain:i,workspaceDesc:s,errors:o,onSubmit:this.setWorkspaceInfo,ref:function e(a){t.chooseNameForm=a}})}},{key:"renderAccessSettingPane",value:function e(){var t=this;var a=this.state.accessSetting;return n.a.createElement(fe,{accessSetting:a,onSubmit:this.setAccessSetting,ref:function e(a){t.accessSettingForm=a}})}},{key:"renderModalPane",value:function e(t){var a=t.header,r=t.subtitle,i=t.renderInnerPane;var s=E()("p-ent_workspace_create__header",{"p-ent_workspace_create__header--with_subtitle":r});return n.a.createElement("div",{className:"p-ent_workspace_create","data-enterprise-teams-create":true},n.a.createElement("div",{className:"p-ent_workspace_create__pane"},n.a.createElement("div",{className:"p-ent_workspace_create__form"},n.a.createElement("h3",{className:s},a),this.renderSubtitle(r),i())))}},{key:"render",value:function e(){var t=this;var a=ge.t("Set up");var r=ge.t("Set access");var i=[a,r];var s={steps:this.buildModalSteps(),breadcrumbTitles:i,onCancel:this.props.onCancel,stepIndex:this.props.ui.modal_step_index,isOpen:this.props.open,position:"fixed"};return n.a.createElement(w["a"],d()({},s,{ref:function e(a){t.createWorkspaceModalRef=a}}))}}]);return t}(r["Component"]);Oe.displayName="CreateWorkspaceModal";Oe.defaultProps=ye;var ke=Oe;var Ee=ke;Object(c["a"])("interop.createWorkspaceModal",{render:function e(t,a,r){if(!t)throw new Error("createWorkspaceModal render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(Ee,r)),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},,function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(88);var l=a.n(o);var c=a(13);var u=a(119);var d=a(27);var p=a(3);var h=a.n(p);var v=a(6);var m=a.n(v);var f=a(7);var b=a.n(f);var g=a(8);var _=a.n(g);var y=a(9);var O=a.n(y);var k=a(0);var E=a(56);var C=a(15);var j=a(18);var w=a(14);var S=a(36);var I=a(250);var T=a(16);var A=a.n(T);var N=a(172);var P=a(354);var R=a(128);var M=a(392);var D=a(22);var x=a(707);var F={};F.SelectorInfo=k["b"].shape({selector:k["b"].func.isRequired,name:k["b"].string.isRequired,file:k["b"].string.isRequired,usageCount:k["b"].number.isRequired,reducers:k["b"].arrayOf(k["b"].string)});F.ActionOrThunkInfo=k["b"].shape({action:k["b"].func,thunk:k["b"].func,name:k["b"].string.isRequired,description:k["b"].string.isRequired,file:k["b"].string.isRequired,usageCount:k["b"].number.isRequired,sideEffectsCount:k["b"].number,props:k["b"].arrayOf(k["b"].string),reducers:k["b"].arrayOf(k["b"].string),isThunk:k["b"].bool.isRequired,isFetcher:k["b"].bool.isRequired});F.ReducerInfo=k["b"].shape({reducer:k["b"].func.isRequired,name:k["b"].string.isRequired,file:k["b"].string.isRequired,actions:k["b"].arrayOf(k["b"].string).isRequired,selectors:k["b"].arrayOf(k["b"].string).isRequired});F.MiddlewareInfo=k["b"].shape({middleware:k["b"].func.isRequired,name:k["b"].string.isRequired,file:k["b"].string.isRequired,description:k["b"].string.isRequired});var L=F;var B=a(3250);var U=L.ActionOrThunkInfo,q=L.SelectorInfo,G=L.ReducerInfo,W=L.MiddlewareInfo;var H={actions:k["b"].arrayOf(U).isRequired,selectors:k["b"].arrayOf(q).isRequired,reducers:k["b"].arrayOf(G).isRequired,middlewares:k["b"].arrayOf(W).isRequired,onClose:k["b"].func};var V={onClose:n.a.noop};var K={name:"asc",usageCount:"desc",reducers:"asc",actions:"asc",selectors:"asc",file:"asc",isThunk:"desc",isFetcher:"desc",sideEffectsCount:"desc"};var z=function(e){O()(t,e);function t(){m()(this,t);var e=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.a.bindAll(e,["renderReducers","renderSelectors","renderMiddlewares","renderActionsAndThunks","onSearchTermChange","renderSearchInput","filterResults","changeToTabAndUpdateSearch","onTabChange","sortCollection","updateSort","renderColumnHeader"]);e.state={searchTerm:"",defaultTabId:"selectors",sort:{selectors:{direction:"desc",key:"usageCount"},actionsAndThunks:{direction:"desc",key:"usageCount"},reducers:{direction:"asc",key:"name"},middlewares:{direction:"asc",key:"name"}}};return e}b()(t,[{key:"onSearchTermChange",value:function e(t){t.preventDefault();var a=t.target.value;this.setState(function(){return{searchTerm:a}})}},{key:"onTabChange",value:function e(){this.setState(function(){return{searchTerm:""}})}},{key:"updateSort",value:function e(t,a){this.setState(function(e){var r=h()({},e.sort);if(r[t].key===a)r[t].direction="asc"===r[t].direction?"desc":"asc";else{r[t].key=a;r[t].direction=K[a]||"asc"}return{sort:r}})}},{key:"sortCollection",value:function e(t,a){var r=this.state.sort;var i=n.a.sortBy(t,r[a].key);"desc"===r[a].direction&&i.reverse();return i}},{key:"changeToTabAndUpdateSearch",value:function e(t,a){var r=this;this.setState(function(){return{defaultTabId:null}},function(){r.setState(function(){return{defaultTabId:t}},function(){r.setState(function(){return{searchTerm:a}})})})}},{key:"filterResults",value:function e(t,a,r){if(!t)return a;var i=t.toLowerCase();var s=a.filter(function(e){var t=false;r.forEach(function(a){var r=e&&e[a];n.a.isArray(r)&&(r=r.join(","));r.toLowerCase().indexOf(i)>=0&&(t=true)});return t});return s}},{key:"renderSearchInput",value:function e(){var t=this.state.searchTerm;return s.a.createElement(M["a"],{className:"p-redox__search_input margin_top_150 margin_bottom_150",value:t,onChange:this.onSearchTermChange,placeholder:"search"})}},{key:"renderColumnHeader",value:function e(t,a,r){var n=this;var i=this.state.sort;var o={};var l=void 0;var c=false;if(a&&r){c=true;o.onClick=function(){n.updateSort(a,r)};i[a].key===r&&(l="asc"===i[a].direction?s.a.createElement(D["b"],{className:"nudge_top_2",inline:true,type:"caret-up"}):s.a.createElement(D["b"],{className:"nudge_top_2",inline:true,type:"caret-down"}))}var u=A()("p-redox__table_cell","p-redox__table_column_header","p-redox__table_column_header--"+r,{"p-redox__table_column_header--sortable":c});return s.a.createElement("td",h()({className:u},o),t,l)}},{key:"renderReducers",value:function e(){var t=this;var a=this.props.reducers;var r=this.state.searchTerm;var n=this.filterResults(r,a,["name","file","actions","selectors"]);var i=this.sortCollection(n,"reducers");return s.a.createElement(s.a.Fragment,null,this.renderSearchInput(),s.a.createElement("table",{className:"p-redox__table"},s.a.createElement("tbody",null,s.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","reducers","name"),this.renderColumnHeader("Actions"),this.renderColumnHeader("Selectors"),this.renderColumnHeader("File","reducers","file"),this.renderColumnHeader("Persistence Enabled?")),i.map(function(e,a){return s.a.createElement(J,{key:""+e.name+a,reducer:e,changeToTabAndUpdateSearch:t.changeToTabAndUpdateSearch})}))))}},{key:"renderMiddlewares",value:function e(){var t=this.props.middlewares;var a=this.state.searchTerm;var r=this.filterResults(a,t,["name","description","file"]);var n=this.sortCollection(r,"middlewares");return s.a.createElement(s.a.Fragment,null,this.renderSearchInput(),s.a.createElement("table",{className:"p-redox__table"},s.a.createElement("tbody",null,s.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","middlewares","name"),this.renderColumnHeader("Description"),this.renderColumnHeader("File","middlewares","file")),n.map(function(e,t){return s.a.createElement(Z,{key:""+e.name+t,middleware:e})}))))}},{key:"renderSelectors",value:function e(){var t=this;var a=this.props.selectors;var r=this.state.searchTerm;var n=this.filterResults(r,a,["name","file"]);var i=this.sortCollection(n,"selectors");return s.a.createElement(s.a.Fragment,null,this.renderSearchInput(),s.a.createElement("table",{className:"p-redox__table"},s.a.createElement("tbody",null,s.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","selectors","name"),this.renderColumnHeader("Usage Count","selectors","usageCount"),this.renderColumnHeader("Reducers"),this.renderColumnHeader("File","selectors","file")),i.map(function(e,a){return s.a.createElement(Q,{key:""+e.name+a,selector:e,changeToTabAndUpdateSearch:t.changeToTabAndUpdateSearch})}))))}},{key:"renderActionsAndThunks",value:function e(){var t=this;var a=this.props.actions;var r=this.state.searchTerm;var n=this.filterResults(r,a,["name","description","file"]);var i=this.sortCollection(n,"actionsAndThunks");var o=s.a.createElement("tr",{className:"bold p-redox__table_header_row"},this.renderColumnHeader("Name","actionsAndThunks","name"),this.renderColumnHeader("Description"),this.renderColumnHeader("Usage Count","actionsAndThunks","usageCount"),this.renderColumnHeader("Thunk?","actionsAndThunks","isThunk"),this.renderColumnHeader("Fetcher?","actionsAndThunks","isFetcher"),this.renderColumnHeader("Props"),this.renderColumnHeader("Reducers"),this.renderColumnHeader("# Side Effects","actionsAndThunks","sideEffectsCount"),this.renderColumnHeader("File","actionsAndThunks","file"));return s.a.createElement(s.a.Fragment,null,this.renderSearchInput(),s.a.createElement("table",{className:"p-redox__table"},s.a.createElement("tbody",null,i.map(function(e,a){return s.a.createElement(s.a.Fragment,{key:""+e.name+a},a%30===0?o:null,s.a.createElement(Y,{action:e,changeToTabAndUpdateSearch:t.changeToTabAndUpdateSearch}))}))))}},{key:"render",value:function e(){var t=this.state.defaultTabId;var a=[{title:"Selectors",id:"selectors",content:this.renderSelectors()},{title:"Actions and Thunks",id:"actionsAndThunks",content:this.renderActionsAndThunks()},{title:"Reducers",id:"reducers",content:this.renderReducers()},{title:"Middleware",id:"middlewares",content:this.renderMiddlewares()}];return s.a.createElement(P["a"],{modalClasses:"p-redox_modal",title:"Redox",showCancelButton:false,showGoButton:false,onCancel:this.props.onClose},s.a.createElement(x["a"],{defaultTabId:t,tabs:a,onTabChange:this.onTabChange}))}}]);return t}(i["Component"]);z.displayName="Redox";z.defaultProps=V;var Y=function e(t){var a=t.action,r=t.changeToTabAndUpdateSearch;var n=void 0;if(a.isThunk)n=s.a.createElement("td",{className:"p-redox__table_cell"},"n/a");else if(a.reducers&&a.reducers.length){var i=a.reducers;n=s.a.createElement("td",{className:"p-redox__table_cell"},i.map(function(e){return s.a.createElement(R["a"],{key:e,className:"p-redox__search_term_link",onClick:function t(){r("reducers",e)}},e)}))}else n=s.a.createElement("td",{className:"p-redox__table_cell"});return s.a.createElement("tr",{className:"p-redox__table_row"},s.a.createElement("td",{className:"p-redox__table_cell"},a.name),s.a.createElement("td",{className:"p-redox__table_cell"},a.description),s.a.createElement("td",{className:"p-redox__table_cell"},a.usageCount),s.a.createElement("td",{className:"p-redox__table_cell"},a.isThunk?"x":""),s.a.createElement("td",{className:"p-redox__table_cell"},a.isFetcher?"x":""),s.a.createElement("td",{className:"p-redox__table_cell"},a.props.map(function(e){return s.a.createElement("div",{key:e},e)})),n,s.a.createElement("td",{className:"p-redox__table_cell"},a.sideEffectsCount),s.a.createElement("td",{className:"p-redox__table_cell"},a.file))};Y.displayName="ActionThunkRow";var Q=function e(t){var a=t.selector,r=t.changeToTabAndUpdateSearch;var n=void 0;if(a.reducers&&a.reducers.length){var i=a.reducers;n=s.a.createElement("td",{className:"p-redox__table_cell"},i.map(function(e,t){return s.a.createElement(R["a"],{key:""+e+t,className:"p-redox__search_term_link",onClick:function t(){r("reducers",e)}},e)}))}else n=s.a.createElement("td",{className:"p-redox__table_cell"});return s.a.createElement("tr",{className:"p-redox__table_row"},s.a.createElement("td",{className:"p-redox__table_cell"},a.name),s.a.createElement("td",{className:"p-redox__table_cell"},a.usageCount),n,s.a.createElement("td",{className:"p-redox__table_cell"},a.file))};Q.displayName="SelectorRow";var J=function e(t){var a=t.reducer,r=t.changeToTabAndUpdateSearch;var n=void 0;if(a.actions&&a.actions.length){var i=a.actions;n=s.a.createElement("td",{className:"p-redox__table_cell"},i.map(function(e,t){return s.a.createElement(R["a"],{key:""+e+t,className:"p-redox__search_term_link",onClick:function t(){r("actionsAndThunks",e)}},e)}))}else n=s.a.createElement("td",{className:"p-redox__table_cell"});var o=void 0;if(a.selectors&&a.selectors.length){var l=a.selectors;o=s.a.createElement("td",{className:"p-redox__table_cell"},l.map(function(e,t){return s.a.createElement(R["a"],{key:""+e+t,className:"p-redox__search_term_link",onClick:function t(){r("selectors",e)}},e)}))}else o=s.a.createElement("td",{className:"p-redox__table_cell"});return s.a.createElement("tr",{className:"p-redox__table_row"},s.a.createElement("td",{className:"p-redox__table_cell"},a.name),n,o,s.a.createElement("td",{className:"p-redox__table_cell"},a.file),s.a.createElement("td",{className:"p-redox__table_cell"},Object(N["l"])(a.reducer)?"x":""))};J.displayName="ReducerRow";var Z=function e(t){var a=t.middleware;return s.a.createElement("tr",{className:"p-redox__table_row"},s.a.createElement("td",{className:"p-redox__table_cell"},a.name),s.a.createElement("td",{className:"p-redox__table_cell"},a.description),s.a.createElement("td",{className:"p-redox__table_cell"},a.file))};Z.displayName="MiddlewareRow";var X=z;var $=Object(j["a"])();var ee=Object(C["a"])();var te=Object(w["a"])();var ae=Object(S["a"])();var re=Object(I["a"])();var ne={onClose:k["b"].func};var ie={onClose:n.a.noop};var se=function(e){O()(t,e);function t(){m()(this,t);return _()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}b()(t,[{key:"componentDidMount",value:function e(){var t=this;this.interval=setInterval(function(){t.forceUpdate()},1e3)}},{key:"componentWillUnmount",value:function e(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function e(){var t=pe();return s.a.createElement(X,h()({onClose:this.props.onClose},t))}}]);return t}(i["Component"]);se.displayName="ConnectedRedox";se.defaultProps=ie;function oe(e){if(!e)return["(no props)"];if(!n.a.isFunction(e)&&n.a.isObject(e))return Object.keys(e);return["(single unnamed payload)"]}function le(e){var t=[];ae.forEach(function(a){a&&a.has&&a.has(e)&&t.push(a&&a.meta&&a.meta.name)});return t}function ce(e){var t=n.a.values($);if(e&&e.has){var a=t.filter(function(t){return e.has(t)});return a.map(function(e){return e.meta.name})}return[]}function ue(e){if(e&&e.meta&&e.meta.file){var t=e.meta.file.replace(/-store.*/,"");var a=te.filter(function(e){var a=e&&e.meta&&e.meta.file&&e.meta.file.replace(/-store.*/,"");return a&&a===t});return a.map(function(e){return e.meta.name})}return[]}function de(e){if(!e||!e.meta||!e.meta.file)return"";var t=[];var a=e.meta.file.replace(/-store.*/,"");ae.forEach(function(e){if(e&&e.meta&&e.meta.file){var r=e.meta.file.replace(/-store.*/,"");a===r&&t.push(e&&e.meta&&e.meta.name)}});return t}function pe(){var e=n.a.map($,function(e){var t=e.meta,a=t.name,r=t.description,n=t.file,i=t.usageCount;return{action:e,name:a,description:r,file:n,usageCount:i||0,isThunk:false,isFetcher:false,props:oe(e.propTypes),reducers:le(e),sideEffectsCount:E["c"][e]?E["c"][e].length:0}});var t=n.a.map(ee,function(e){var t=e.meta,a=t.name,r=t.description,n=t.file,i=t.usageCount;return{thunk:e,name:a,description:r,file:n,usageCount:i||0,isThunk:true,isFetcher:!!e.isFetcherCreator,props:oe(e.propTypes),sideEffectsCount:0}});var a=n.a.map(te,function(e){var t=e.meta,a=t.name,r=t.file,n=t.usageCount;return{selector:e,name:a,file:r,reducers:de(e),usageCount:n||0}});var r=n.a.map(ae,function(e){var t=e.meta||{},a=t.name,r=t.file;return{reducer:e,name:a||"",file:r||"",actions:ce(e),selectors:ue(e)}});var i=n.a.map(re,function(e){var t=e.meta||{},a=t.name,r=t.file,n=t.description;return{middleware:e,name:a||"",file:r||"",description:n||""}});return{actions:e.concat(t),selectors:a,reducers:r,middlewares:i}}var he=se;var ve=he;var me=function e(t,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.a.noop;if(!t)throw new Error("mountRedox must be called with a teamId parameter");var i=Object(d["d"])(t);Object(u["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(ve,{onClose:r})),a)};var fe=function e(t){l.a.unmountComponentAtNode(t)};var be={mountRedox:me,unmountRedox:fe};var ge=a(30);var _e=a(12);var ye=a(44);var Oe=a(65);var ke="redox-container";var Ee=false;var Ce=Object(_e["b"])();function je(){if(Ee)return;if(!ge["isDev"]&&!ge["isJsPath"]){Ce.warn("Redox only works in a development environment");return}var e=document.getElementById(ke);if(!e){e=document.createElement("div");e.id=ke;document.body.appendChild(e)}Ee=true;me(TS.boot_data.team_id,e,we)}function we(){if(!ge["isDev"]&&!ge["isJsPath"]){Ce.warn("Redox only works in a development environment");return}Ee=false;fe(document.getElementById(ke))}Object(ye["a"])("interop.mountRedox",je);Object(ye["a"])("interop.unmountRedox",we);Object(Oe["exportToGlobalDebugger"])("redox",je);Object(Oe["exportToGlobalDebugger"])("unmountRedox",we)},function(e,t){e.exports={}},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(27);var c=a(44);var u=a(26);var d=a.n(u);var p=a(3);var h=a.n(p);var v=a(58);var m=a.n(v);var f=a(6);var b=a.n(f);var g=a(7);var _=a.n(g);var y=a(8);var O=a.n(y);var k=a(9);var E=a.n(k);var C=a(0);var j=a(2);var w=a(4);var S=a(29);var I=a(25);var T=a(12);var A=Object(I["a"])("Get payment company info",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;return e(Object(S["a"])({reason:r,method:"enterprise.payments.companyGet"})).catch(function(e){var a="failed to get payment company info";Object(T["a"])({getState:t}).error("payments",a);throw e})});A.propTypes={reason:C["b"].string.isRequired};var N=Object(I["a"])("Get payments info",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;return e(Object(S["a"])({reason:r,method:"enterprise.payments.info"})).catch(function(e){var a="failed to get payment info";Object(T["a"])({getState:t}).error("payments",a);throw e})});N.propTypes={reason:C["b"].string.isRequired};var P=Object(I["a"])("Get payments contact list",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.reason;return e(Object(S["a"])({reason:r,method:"enterprise.payments.contactsList"})).catch(function(e){var a="failed to get payment contact list";Object(T["a"])({getState:t}).error("payments",a);throw e})});P.propTypes={reason:C["b"].string.isRequired};var R=a(1060);var M=a(159);var D=a(357);var x=a(216);var F=a(22);var L=a(16);var B=a.n(L);var U=a(10);var q=a(96);var G=a(3054);var W={loading:C["b"].bool};var H={loading:false};function V(e){var t=e.loading;if(!t)return null;return n.a.createElement("div",{className:"p-billing_loading"},n.a.createElement("div",{className:"p-billing_loading__overlay"}),n.a.createElement("div",{className:"p-billing_loading__content"},n.a.createElement(q["a"],null)))}V.displayName="LoadingState";V.defaultProps=H;var K=V;var z=K;var Y=a(3056);var Q={getTeamPaidFeatures:C["b"].func.isRequired,getPaymentsCompany:C["b"].func.isRequired,getPaymentsContacts:C["b"].func.isRequired,setOrgError:C["b"].func.isRequired,featureEKMPhase2:C["b"].bool,orgName:C["b"].string};var J={featureEKMPhase2:false,orgName:void 0};var Z=new U["b"]("enterprise_dashboard");var X=function(e){E()(t,e);function t(e){b()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={billingOverviewLoading:true};return a}_()(t,[{key:"componentDidMount",value:function e(){if(!this.props.featureEKMPhase2)return;this.getBillingOverview()}},{key:"getBillingOverview",value:function e(){var t=this;if(!this.props.featureEKMPhase2)return;var a=this.props,r=a.getTeamPaidFeatures,n=a.getPaymentsCompany,i=a.getPaymentsContacts,s=a.setOrgError;this.setState(function(){return{billingOverviewLoading:true}});var o={reason:"enterprise-billing-dashboard"};Promise.all([r(o),n(o),i(o)]).then(function(e){var a=m()(e,3),r=a[0],n=a[1],i=a[2];t.setState(function(){return{billingOverviewLoading:false,billingCompanyName:n.billing_company_name,billingCompanyAddress:h()({},n.address_fields),billingContacts:i.billing_contacts,paidFeatures:r}})}).catch(function(){s({message:Z.t("We couldn\u2019t load your organization\u2019s billing information."),retryAction:function e(){return t.getBillingOverview()},retry_message:Z.t("Try again")});t.setState(function(){return{billingOverviewLoading:false}})})}},{key:"getMemberType",value:function e(t){if(t.is_primary_owner)return Z.t("Primary Org Owner");if(t.is_owner)return Z.t("Org Owner");if(t.is_admin)return Z.t("Org Admin");if(t.profile)return Z.t("Member");return Z.t("Not In Organization")}},{key:"hasELA",value:function e(){var t=this.state.paidFeatures,a=void 0===t?{}:t;return a.is_ela}},{key:"renderNoELAMessage",value:function e(){if(!this.props.featureEKMPhase2)return null;if(this.state.billingOverviewLoading)return null;var t=this.props.orgName;var a=void 0;a=t?Z.rt("No ELA information available for <strong>{orgName}</strong>",{orgName:t}):Z.t("No ELA information available for your organization.");return n.a.createElement("div",{className:"licensing_table_row--no_ela"},a)}},{key:"renderLicensingTable",value:function e(){if(!this.props.featureEKMPhase2)return null;var t=this.hasELA();return n.a.createElement("div",{className:"p-billing_overview__licensing_table"},n.a.createElement("div",{className:"licensing_table_row licensing_table_header"},n.a.createElement("div",{className:"licensing_table_cell"},Z.t("Annual license")),t&&n.a.createElement("div",{className:"licensing_table_cell"},Z.t("Renewal date"))),t?this.renderLicensingTableRows():this.renderNoELAMessage())}},{key:"renderLicensingTableRows",value:function e(){if(!this.props.featureEKMPhase2)return null;var t=this.state,a=t.billingOverviewLoading,r=t.paidFeatures;r=void 0===r?{}:r;var i=r.level,s=r.add_ons;if(a)return null;var o=[h()({},i,{typeName:Z.t("Enterprise License Agreement")})].concat(d()(s.map(function(e){return h()({},e,{typeName:Z.t("Add-on")})})));return o.map(function(e){return n.a.createElement("div",{key:Object(j["uniqueId"])(e.feature_id+"_"),className:"licensing_table_row"},n.a.createElement("div",{className:"licensing_table_cell"},n.a.createElement("div",{className:"bold"},e.name),n.a.createElement("div",{className:"sk_dark_gray"},e.typeName)),n.a.createElement("div",{className:"licensing_table_cell"},Object(D["a"])(e.term.end_ts,"{date}")))})}},{key:"renderBillingCompanyInfo",value:function e(){if(!this.props.featureEKMPhase2)return null;var t=this.state,a=t.billingOverviewLoading,r=t.billingCompanyName,i=t.billingCompanyAddress;if(a)return null;if(!r&&Object(j["isEmpty"])(i))return n.a.createElement("div",null,Z.t("No company information"));return n.a.createElement("div",null,r&&n.a.createElement("div",{className:"bold"},r),i.street1&&n.a.createElement("div",{className:"sk_dark_gray"},i.street1),i.street2&&n.a.createElement("div",{className:"sk_dark_gray"},i.street2),(i.city||i.state)&&n.a.createElement("div",{className:"sk_dark_gray"},i.city&&i.city,i.city&&i.state&&", ",i.state&&i.state),i.zip&&n.a.createElement("div",{className:"sk_dark_gray"},i.zip),i.country&&n.a.createElement("div",{className:"sk_dark_gray"},i.country),i.vat_id&&n.a.createElement("div",{className:"sk_dark_gray"},"VAT ID: "+i.vat_id),i.abn_id&&n.a.createElement("div",{className:"sk_dark_gray"},"ABN ID: "+i.abn_id))}},{key:"renderAvatar",value:function e(t){var a=t.profile;var r=a&&a.image_48;var i=B()("p-biling_overview__billing_contact_avatar",{"p-biling_overview__billing_contact_avatar--no_profile":!r});if(r)return n.a.createElement("div",{className:i},n.a.createElement(x["a"],{size:36,imageUrl:a.image_48}));return n.a.createElement("div",{className:i},n.a.createElement(F["b"],{type:"user"}))}},{key:"renderBillingContact",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=t.real_name;var r=t.profile&&t.profile.email||t.email;return n.a.createElement("div",{key:t.id,className:"p-biling_overview__billing_contact"},this.renderAvatar(t),n.a.createElement("div",null,a&&n.a.createElement("div",{className:"bold"},a),r&&n.a.createElement("div",{className:"sk_dark_gray"},r),n.a.createElement("div",{className:"sk_dark_gray bold"},this.getMemberType(t))))}},{key:"renderBillingContacts",value:function e(){var t=this;if(!this.props.featureEKMPhase2)return null;var a=this.state,r=a.billingOverviewLoading,i=a.billingContacts,s=void 0===i?[]:i;if(r)return null;if(!s.length)return n.a.createElement("div",{className:"p-biling_overview__billing_contact--none"},Z.t("No billing contacts"));return s.map(function(e){return t.renderBillingContact(e)})}},{key:"renderBillingInfo",value:function e(){if(!this.props.featureEKMPhase2)return null;return n.a.createElement("div",null,n.a.createElement("div",{className:"p-biling_overview__billing_info_titles"},n.a.createElement("div",{className:"p-biling_overview__billing_info_cell billing_header"},Z.t("Company")),n.a.createElement("div",{className:"p-biling_overview__billing_info_cell billing_header"},Z.t("Billing contacts"))),n.a.createElement("div",{className:"p-biling_overview__billing_info_content"},n.a.createElement("div",{className:"p-biling_overview__billing_info_cell"},this.renderBillingCompanyInfo()),n.a.createElement("div",{className:"p-biling_overview__billing_info_cell"},this.renderBillingContacts())))}},{key:"render",value:function e(){if(!this.props.featureEKMPhase2)return null;return n.a.createElement("div",{className:"p-billing_overview","data-enterprise-billing-overview":true,"data-name":"enterprise_billing_overview"},n.a.createElement("h1",{className:"p-billing_overview__title"},Z.t("Billing Overview")),n.a.createElement("p",{className:"p-billing_overview__title_description"},Z.t("Below is a summary of your billing information. Upon renewal of your Enterprise License Agreement, we\u2019ll review any increased usage or add-on products to calculate a new rate. For additional invoicing information, please reach out to your Account Executive.")),n.a.createElement("div",{className:"p-billing_overview__container"},n.a.createElement("div",{className:"p-billing_overview__content"},n.a.createElement("div",{className:"p-billing_overview__licensing"},n.a.createElement("h2",{className:"p-billing_overview__subtitle"},Z.t("Licensing")),this.renderLicensingTable()),n.a.createElement("div",{className:"p-billing_overview__billing"},n.a.createElement("h2",{className:"p-billing_overview__subtitle"},Z.t("Billing Information")),this.renderBillingInfo())),n.a.createElement(z,{loading:this.state.billingOverviewLoading})))}}]);return t}(r["PureComponent"]);X.displayName="BillingOverview";X.defaultProps=J;var $=function e(t){return{featureEKMPhase2:Object(w["isFeatureEnabled"])(t,"feature_ekm_phase_2")}};var ee=function e(t){return{getTeamPaidFeatures:function e(a){return t(Object(R["c"])(a))},getPaymentsCompany:function e(a){return t(A(a))},getPaymentsContacts:function e(a){return t(P(a))},setOrgError:function e(a){return t(Object(M["a"])().org.setOrgError(a))}}};var te=Object(o["connect"])($,ee)(X);var ae=te;Object(c["a"])("interop.billingOverview",{render:function e(t,a,r){if(!t)throw new Error("billingOverview render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(ae,r)),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(3);var i=a.n(n);function s(e,t){return e.map(function(e){return i()({},e,{items:e.items.map(function(e){return{label:t[e],value:e}})})})}var o=a(2);function l(e){return Object(o["flatten"])(e.map(function(e){return e.items}))}function c(e,t){return e.map(function(e){return i()({},e,{items:Object(o["difference"])(e.items,t)})}).filter(function(e){var t=e.items;return t&&t.length})}function u(e,t,a){var r=Object(o["intersection"])(l(e),t);return r.map(function(e){return{label:a[e]}})}var d="interop.enterpriseAnalytics";Object(r["a"])(d+".addLabelAndValueToGroupItems",s);Object(r["a"])(d+".getItemKeysFromGroups",l);Object(r["a"])(d+".filterGroups",c);Object(r["a"])(d+".formatDisabledOptions",u)},,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(356);var c=a.n(l);var u=a(6);var d=a.n(u);var p=a(7);var h=a.n(p);var v=a(8);var m=a.n(v);var f=a(9);var b=a.n(f);var g=a(2);var _=a(10);var y=a(24);var O=a(35);var k=a(4);var E=a(17);var C=a(31);var j=a(535);var w=a(270);var S=a(28);var I=a(22);var T=a(223);function A(e){return!!Object(g["has"])(e,"activeCall")}var N=a(197);var P=a(1209);var R=a(457);var M=a(3142);var D=a(149);var x=new _["b"]("incoming_call_window");var F=function(e){b()(t,e);function t(){d()(this,t);var e=m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));e.answerCallButton=n.a.createRef();return e}h()(t,[{key:"componentDidMount",value:function e(){this.answerCallButton&&this.answerCallButton.current&&this.answerCallButton.current.focus();Object(P["a"])(R["g"],{loop:true})}},{key:"componentWillUnmount",value:function e(){Object(P["b"])(R["g"])}},{key:"getSrcSetAttribute",value:function e(t){if(!t)return"";return t+" 2x"}},{key:"maybeRenderGuestBadge",value:function e(){if(this.props.isUltraRestricted)return n.a.createElement(I["b"],{type:"single-channel-guest",inline:true});if(this.props.isRestricted)return n.a.createElement(I["b"],{type:"restricted-user",inline:true});return null}},{key:"renderUserImage",value:function e(){var t=this.props.avatarUrls,a=t.imageUrl,r=t.imageUrl2x;if(a||r)return n.a.createElement("img",{className:"p-incoming_call__member_image",src:a||r,srcSet:this.getSrcSetAttribute(r),alt:""});return null}},{key:"renderExternalTeamLabel",value:function e(){return n.a.createElement("div",{className:"p-incoming_call__external_team_banner"},n.a.createElement("span",{className:"p-incoming_call__external_team_name"},this.props.externalTeamName),n.a.createElement(w["b"],{className:"p-incoming_call__external_team_icon",id:this.props.memberTeamId,size:18}))}},{key:"renderUserName",value:function e(){return n.a.createElement("div",{className:"p-incoming_call__member_name_wrapper"},n.a.createElement("span",{className:"p-incoming_call__member_name"},this.props.prefCompliantMemberName),this.maybeRenderGuestBadge())}},{key:"renderCaptionText",value:function e(){var t=this.props.featureSpockCalls?x.t("is calling you"):"";return n.a.createElement("div",{className:"p-incoming_call__user_caption"},t)}},{key:"renderCallButtons",value:function e(){var t=this;return n.a.createElement("div",{className:"p-incoming_call__button_container"},n.a.createElement(S["d"],{type:"danger",size:"medium",onClick:function e(){return t.props.onRejectCall(t.props.callId)},className:"p-incoming_call__button"},n.a.createElement(I["b"],{type:"times"})),n.a.createElement(S["d"],{type:"primary",size:"medium",onClick:function e(){return t.props.onAcceptCall(t.props.callId)},className:"p-incoming_call__button",ref:this.answerCallButton},n.a.createElement(I["b"],{type:"phone"})))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-incoming_call"},this.props.isExternal&&this.renderExternalTeamLabel(),this.renderUserImage(),n.a.createElement("div",{className:"p-incoming_call__info"},this.renderUserName(),this.renderCaptionText(),this.renderCallButtons()))}}]);return t}(r["PureComponent"]);F.displayName="IncomingCall";function L(e,t){if(A(e))return e.activeCall.otherUserId;var a=Object(N["b"])(e,t).invite;if(!a||!Object(D["g"])(a)){Object(T["c"])("Not an incoming invite");return}return a.userId}var B=function e(t,a){var r=L(t,a.callId);Object(T["c"])(!!r,"No inviting user");var n=Object(y["d"])(t,r);var i=Object(E["getMemberTeamId"])(n);var s=Object(O["i"])(t,i);var o=Object(E["isExternal"])(n);var l=Object(E["getPrefCompliantMemberName"])(t,n);var c=Object(C["getTeamDisplayName"])(s);var u=Object(g["get"])(n,"profile.avatar_hash");var d=Object(j["a"])({size:200,teamId:i,memberId:r,avatarHash:u});return{avatarUrls:d,prefCompliantMemberName:l,memberTeamId:i,externalTeamName:c,isRestricted:Object(E["isRestricted"])(n),isUltraRestricted:Object(E["isUltraRestricted"])(n),isExternal:o,featureSpockCalls:Object(k["isFeatureEnabled"])(t,"feature_spock_calls")}};var U={mapStateToProps:B};Object.defineProperty(U,"mapStateToProps",{get:function e(){return B},set:function e(t){B=t}});var q=Object(i["connect"])(B)(F);var G=a(704);var W=a(12);var H=a(3144);var V=a(480);var K=function e(t){var a=t.invitingCall,r=t.onAcceptCall,i=t.onRejectCall;Object(G["a"])()&&Object(W["b"])().error("BrowserIncomingCall should only be instantiated in a browser.");if(!a)return null;var s={content:{background:"transparent",border:"none",left:"50%",margin:"0",padding:"0",width:"200px"}};return n.a.createElement(c.a,{isOpen:true,overlayClassName:"p-browser_incoming_call--shroud",shouldFocusAfterRender:true,shouldReturnFocusAfterClose:true,style:s},n.a.createElement("div",{className:"p-browser_incoming_call"},n.a.createElement(q,{callId:a,onAcceptCall:r,onRejectCall:i})))};var z=function e(t){var a=Object(N["c"])(t);return{invitingCall:a&&a.id}};var Y=function e(t){return{onAcceptCall:function e(a){return t(Object(V["a"])(a))},onRejectCall:function e(a){return t(Object(V["b"])({id:a,response:D["c"].Reject}))}}};var Q=Object(i["connect"])(z,Y)(K);var J=a(163);var Z=function e(t,a){if(!t)throw new Error("mountIncomingCall must be called with a teamId parameter");var r=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(J["a"],null,n.a.createElement(Q,null))),a)};var X=Z;var $=a(44);Object($["a"])("interop.mountBrowserIncomingCall",X)},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(0);var d=a(28);var p=a(1816);var h=a(183);var v=a(58);var m=a.n(v);var f=a(2);var b=a(22);var g=a(50);var _=a(10);var y=a(1295);var O=a(3252);var k=new _["b"]("apps");var E=function e(t){var a=t.description,r=t.is_dangerous;return s.a.createElement(h["a"],{enabled:["feature_group_scopes_rolling_research"]},s.a.createElement("p",{className:"display_flex p-scope_info__description padding_top_75 padding_bottom_75 margin_bottom_0"},s.a.createElement("span",{className:"flex_one margin_right_75"},a),r?s.a.createElement(g["c"],{tip:k.t("This grants access to potentially sensitive data. Proceed with caution.")},s.a.createElement(d["c"],null,s.a.createElement(b["b"],{type:"warning",className:"sk_just_orange margin_right_75 margin_left_75"}))):null))};E.displayName="ScopeInfoDescription";var C=function e(t){var a=t.icon,r=t.summary_items,n=t.groups;var o=Object(i["useState"])(false),l=m()(o,2),c=l[0],u=l[1];var p=c?"caret-down":"caret-right";var h=Object(i["useCallback"])(function(){u(!c)},[c]);return s.a.createElement("div",{className:"p-scope_info__group_container"},s.a.createElement(d["c"],{className:"p-scope_info__group",onClick:h},s.a.createElement(b["b"],{className:"sk_light_gray",type:a}),s.a.createElement("span",{className:"flex_one margin_left_75 margin_right_75"+(c?" bold":"")},Object(f["upperFirst"])(r.join(", "))),s.a.createElement(b["b"],{inline:true,type:p,className:"margin_left_75"})),c?s.a.createElement("div",{className:"padding_left_200"},n.map(function(e){return s.a.createElement("div",{className:"margin_bottom_100"},s.a.createElement("strong",{className:"block margin_bottom_25"},e.heading),s.a.createElement("div",null,e.descriptions.map(function(e){return s.a.createElement(E,e)})))})):null)};C.displayName="ScopeInfoGroup";var j=function e(t){var a=t.scopeInfo;return s.a.createElement("div",{className:"p-scope_info"},a.map(function(e){return s.a.createElement("section",null,s.a.createElement("h3",{className:"margin_bottom_50 margin_top_150"},e.heading),s.a.createElement("div",null,e.groups.map(function(e){return s.a.createElement(C,e)})))}))};j.displayName="ScopeInfo";var w=Object(y["a"])(j);var S=a(3254);var I=new _["b"]("apps");var T={appIcon:u["b"].string.isRequired,appName:u["b"].string.isRequired,scopeInfo:u["b"].object.isRequired,teamIcon:u["b"].string.isRequired,teamName:u["b"].string.isRequired};var A=function e(t){var a=t.appName,r=t.appIcon,n=t.teamName,i=t.teamIcon,o=t.scopeInfo;return s.a.createElement(h["a"],{enabled:["feature_group_scopes_rolling_research"]},s.a.createElement("div",{className:"p-oauth_page"},s.a.createElement("div",{className:"p-oauth_page__container"},s.a.createElement(p["a"],{appName:a,appIcon:r,teamName:n,teamIcon:i}),s.a.createElement("h1",{className:"margin_bottom_4 margin_top_200"},I.t("{appName} would like to",{appName:a})),s.a.createElement(w,{scopeInfo:o}),s.a.createElement("div",{className:"p-oauth_page__buttons"},s.a.createElement(d["d"],{className:"margin_right_75",type:"outline"},I.t("Cancel")),s.a.createElement(d["d"],null,I.t("Install"))))))};A.displayName="OAuthPage";var N=Object(y["a"])(A);var P=function e(){return[{scopes:["emoji:read"],short_description:"View your workspace\u2019s custom emoji",is_dangerous:false},{scopes:["users:write"],short_description:"Change your profile information",is_dangerous:false},{scopes:["users:red"],short_description:"View your workspace\u2019s list of members and their contact information",is_dangerous:true}]};var R=function e(){return[{scopes:["pins:read","pins:write"],short_description:"View your workspace's pinned items, and add or remove pins",long_description:"View your workspace's pinned items (including contents of files and sharing information).",is_dangerous:false},{scopes:["commands"],short_description:"Add slash commands",is_dangerous:false},{scopes:["channels:history"],short_description:"View messages, activity, and files in this channel",is_dangerous:true},{scopes:["channels:read"],short_description:"View the channel name, member list, topic, and purpose",is_dangerous:false},{scopes:["chat:write"],short_description:"Post messages as the app",is_dangerous:false}]};var M=function e(){return[{scopes:["dnd:write:user"],short_description:"Change the user\u2019s Do Not Disturb settings and schedule, as well as view the workspace\u2019s settings",is_dangerous:false},{scopes:["reminders:write:user"],short_description:"Add, remove, or complete reminders for user",long_description:"App will be able to add, remove, or complete reminders for individual workspace members, as user.",is_dangerous:false},{scopes:["users.profile:write"],short_description:"Change a user\u2019s profile fields and any data entered in them",is_dangerous:false}]};var D=function e(){return[{scopes:["dnd:write:user"],short_description:"Change your Do Not Disturb settings and schedule, as well as view your workspace\u2019s settings",is_dangerous:false}]};var x=function e(){return M().map(function(e){return e.scopes[0]})};var F=function e(t){return[{heading:"Add or remove",groups:[{icon:"smile-o",summary_items:["emoji reactions","pinned messages","stars from messages"],groups:[{heading:"On your behalf",descriptions:[{description:"Access your starred items, along with associated messages and files (including contents and information such as who uploaded the file, when it was uploaded, and sharing history), and who starred them.",is_dangerous:false},{description:"Upload and modify files as you.",is_dangerous:true}]},{heading:"On its behalf",descriptions:[{description:"View URLs to provide previews and other functionality.",is_dangerous:false},{description:"Access any messages history and activity you can see in direct messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in group messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in private channels.",is_dangerous:true},{description:"Access any messages history and activity you can see in public channels.",is_dangerous:true}]},{heading:"On "+t,descriptions:[{description:"Access emoji reactions on your workspace along with associated messages, files (including contents and information such as who uploaded it, when it was uploaded, and sharing history), and who added the \u2018reaction\u2019.",is_dangerous:false},{description:"Access pinned items on your workspace along with associated messages, files (including content and information such as who uploaded it, when it was uploaded, and sharing history), and who pined the item.",is_dangerous:false}]}]}]},{heading:"Create, update, delete",groups:[{icon:"channel-list",summary_items:["information about group messages","private channels","public channels"],groups:[{heading:"On your behalf",descriptions:[{description:"Access your starred items, along with associated messages and files (including contents and information such as who uploaded the file, when it was uploaded, and sharing history), and who starred them.",is_dangerous:false},{description:"Upload and modify files as you.",is_dangerous:true}]},{heading:"On its behalf",descriptions:[{description:"View URLs to provide previews and other functionality.",is_dangerous:false},{description:"Access any messages history and activity you can see in direct messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in group messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in private channels.",is_dangerous:true},{description:"Access any messages history and activity you can see in public channels.",is_dangerous:true}]},{heading:"On "+t,descriptions:[{description:"Access emoji reactions on your workspace along with associated messages, files (including contents and information such as who uploaded it, when it was uploaded, and sharing history), and who added the \u2018reaction\u2019.",is_dangerous:false},{description:"Access pinned items on your workspace along with associated messages, files (including content and information such as who uploaded it, when it was uploaded, and sharing history), and who pined the item.",is_dangerous:false}]}]}]},{heading:"Modify",groups:[{icon:"comment-alt",summary_items:["unread status of direct messages"],groups:[{heading:"On your behalf",descriptions:[{description:"Access your starred items, along with associated messages and files (including contents and information such as who uploaded the file, when it was uploaded, and sharing history), and who starred them.",is_dangerous:false},{description:"Upload and modify files as you.",is_dangerous:true}]},{heading:"On its behalf",descriptions:[{description:"View URLs to provide previews and other functionality.",is_dangerous:false},{description:"Access any messages history and activity you can see in direct messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in group messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in private channels.",is_dangerous:true},{description:"Access any messages history and activity you can see in public channels.",is_dangerous:true}]},{heading:"On "+t,descriptions:[{description:"Access emoji reactions on your workspace along with associated messages, files (including contents and information such as who uploaded it, when it was uploaded, and sharing history), and who added the \u2018reaction\u2019.",is_dangerous:false},{description:"Access pinned items on your workspace along with associated messages, files (including content and information such as who uploaded it, when it was uploaded, and sharing history), and who pined the item.",is_dangerous:false}]}]}]},{heading:"Upload and modify",groups:[{icon:"all-files",summary_items:["files","file comments"],groups:[{heading:"On your behalf",descriptions:[{description:"Access your starred items, along with associated messages and files (including contents and information such as who uploaded the file, when it was uploaded, and sharing history), and who starred them.",is_dangerous:false},{description:"Upload and modify files as you.",is_dangerous:true}]},{heading:"On its behalf",descriptions:[{description:"View URLs to provide previews and other functionality.",is_dangerous:false},{description:"Access any messages history and activity you can see in direct messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in group messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in private channels.",is_dangerous:true},{description:"Access any messages history and activity you can see in public channels.",is_dangerous:true}]},{heading:"On "+t,descriptions:[{description:"Access emoji reactions on your workspace along with associated messages, files (including contents and information such as who uploaded it, when it was uploaded, and sharing history), and who added the \u2018reaction\u2019.",is_dangerous:false},{description:"Access pinned items on your workspace along with associated messages, files (including content and information such as who uploaded it, when it was uploaded, and sharing history), and who pined the item.",is_dangerous:false}]}]}]},{heading:"View",groups:[{icon:"channel-list",summary_items:["information about direct messages","group messages","public channels","public channels"],groups:[{heading:"On your behalf",descriptions:[{description:"Access your starred items, along with associated messages and files (including contents and information such as who uploaded the file, when it was uploaded, and sharing history), and who starred them.",is_dangerous:false},{description:"Upload and modify files as you.",is_dangerous:true}]},{heading:"On its behalf",descriptions:[{description:"View URLs to provide previews and other functionality.",is_dangerous:false},{description:"Access any messages history and activity you can see in direct messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in group messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in private channels.",is_dangerous:true},{description:"Access any messages history and activity you can see in public channels.",is_dangerous:true}]},{heading:"On "+t,descriptions:[{description:"Access emoji reactions on your workspace along with associated messages, files (including contents and information such as who uploaded it, when it was uploaded, and sharing history), and who added the \u2018reaction\u2019.",is_dangerous:false},{description:"Access pinned items on your workspace along with associated messages, files (including content and information such as who uploaded it, when it was uploaded, and sharing history), and who pined the item.",is_dangerous:false}]}]},{icon:"all-files",summary_items:["files"],groups:[{heading:"On your behalf",descriptions:[{description:"Access your starred items, along with associated messages and files (including contents and information such as who uploaded the file, when it was uploaded, and sharing history), and who starred them.",is_dangerous:false},{description:"Upload and modify files as you.",is_dangerous:true}]},{heading:"On its behalf",descriptions:[{description:"View URLs to provide previews and other functionality.",is_dangerous:false},{description:"Access any messages history and activity you can see in direct messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in group messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in private channels.",is_dangerous:true},{description:"Access any messages history and activity you can see in public channels.",is_dangerous:true}]},{heading:"On "+t,descriptions:[{description:"Access emoji reactions on your workspace along with associated messages, files (including contents and information such as who uploaded it, when it was uploaded, and sharing history), and who added the \u2018reaction\u2019.",is_dangerous:false},{description:"Access pinned items on your workspace along with associated messages, files (including content and information such as who uploaded it, when it was uploaded, and sharing history), and who pined the item.",is_dangerous:false}]}]},{icon:"all-files-alt",summary_items:["URLs","message history and activity","emoji reactions","pinned items","starred items"],groups:[{heading:"On your behalf",descriptions:[{description:"Access your starred items, along with associated messages and files (including contents and information such as who uploaded the file, when it was uploaded, and sharing history), and who starred them.",is_dangerous:false},{description:"Upload and modify files as you.",is_dangerous:true}]},{heading:"On its behalf",descriptions:[{description:"View URLs to provide previews and other functionality.",is_dangerous:false},{description:"Access any messages history and activity you can see in direct messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in group messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in private channels.",is_dangerous:true},{description:"Access any messages history and activity you can see in public channels.",is_dangerous:true}]},{heading:"On "+t,descriptions:[{description:"Access emoji reactions on your workspace along with associated messages, files (including contents and information such as who uploaded it, when it was uploaded, and sharing history), and who added the \u2018reaction\u2019.",is_dangerous:false},{description:"Access pinned items on your workspace along with associated messages, files (including content and information such as who uploaded it, when it was uploaded, and sharing history), and who pined the item.",is_dangerous:false}]}]},{icon:"user",summary_items:["profile information","profile fields","email addresses"],groups:[{heading:"On your behalf",descriptions:[{description:"Access your starred items, along with associated messages and files (including contents and information such as who uploaded the file, when it was uploaded, and sharing history), and who starred them.",is_dangerous:false},{description:"Upload and modify files as you.",is_dangerous:true}]},{heading:"On its behalf",descriptions:[{description:"View URLs to provide previews and other functionality.",is_dangerous:false},{description:"Access any messages history and activity you can see in direct messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in group messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in private channels.",is_dangerous:true},{description:"Access any messages history and activity you can see in public channels.",is_dangerous:true}]},{heading:"On "+t,descriptions:[{description:"Access emoji reactions on your workspace along with associated messages, files (including contents and information such as who uploaded it, when it was uploaded, and sharing history), and who added the \u2018reaction\u2019.",is_dangerous:false},{description:"Access pinned items on your workspace along with associated messages, files (including content and information such as who uploaded it, when it was uploaded, and sharing history), and who pined the item.",is_dangerous:false}]}]},{icon:"all-files-alt",summary_items:["Do Not Disturb settings","custom emoji","information about "+t,"User Groups"],groups:[{heading:"On your behalf",descriptions:[{description:"Access your starred items, along with associated messages and files (including contents and information such as who uploaded the file, when it was uploaded, and sharing history), and who starred them.",is_dangerous:false},{description:"Upload and modify files as you.",is_dangerous:true}]},{heading:"On its behalf",descriptions:[{description:"View URLs to provide previews and other functionality.",is_dangerous:false},{description:"Access any messages history and activity you can see in direct messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in group messages.",is_dangerous:true},{description:"Access any messages history and activity you can see in private channels.",is_dangerous:true},{description:"Access any messages history and activity you can see in public channels.",is_dangerous:true}]},{heading:"On "+t,descriptions:[{description:"Access emoji reactions on your workspace along with associated messages, files (including contents and information such as who uploaded it, when it was uploaded, and sharing history), and who added the \u2018reaction\u2019.",is_dangerous:false},{description:"Access pinned items on your workspace along with associated messages, files (including content and information such as who uploaded it, when it was uploaded, and sharing history), and who pined the item.",is_dangerous:false}]}]}]}]};var L=function e(t,a,r){if(!t)throw new Error("mountOAuthConfirm must be called with a teamId parameter");Object(l["a"])(s.a.createElement(o["Provider"],{store:Object(c["d"])(t)},s.a.createElement(N,n()({},r,{scopeInfo:F(r.teamName)}))),a)};var B=L;var U=a(44);Object(U["a"])("interop.mountRollingResearchOAuth",B)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(6);var d=a.n(u);var p=a(7);var h=a.n(p);var v=a(8);var m=a.n(v);var f=a(9);var b=a.n(f);var g=a(4);var _=a(0);var y=a(10);var O=a(39);var k=a(384);var E=a(900);var C=a(1349);var j=a(1350);var w=a(3301);var S=new y["b"]("calendar");var I={featureCalendarSimpleAgendaView:_["b"].bool,isGlobalNavEnabled:_["b"].bool,isLoading:_["b"].bool};var T={featureCalendarSimpleAgendaView:true,isGlobalNavEnabled:false,isLoading:true};var A=function(e){b()(t,e);function t(){d()(this,t);return m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}h()(t,[{key:"focus",value:function e(){return null}},{key:"blur",value:function e(){return null}},{key:"renderBody",value:function e(){var t=this.props,a=t.isLoading,r=t.featureCalendarSimpleAgendaView;if(!r)return null;if(a)return n.a.createElement("div",{className:"p-calendar_flexpane__loading"},S.t("Loading\u2026"));return n.a.createElement("div",null," This is user calendar ")}},{key:"render",value:function e(){var t=this.props,a=t.featureCalendarSimpleAgendaView,r=t.isGlobalNavEnabled;if(!a)return null;return n.a.createElement(E["a"],{component:this,order:4},n.a.createElement(k["a"],{id:O["MESSAGE_CONTAINERS"].ACTIVITY_FLEXPANE},n.a.createElement("div",{className:"p-calendar_flexpane"},!r&&n.a.createElement(C["a"],null,n.a.createElement(j["a"],{size:"medium"}),n.a.createElement("div",null,S.t("Your calendar"))),this.renderBody())))}}]);return t}(n.a.Component);A.displayName="CalendarFlexpane";A.defaultProps=T;var N=function e(t){return{featureCalendarSimpleAgendaView:Object(g["isFeatureEnabled"])(t,"feature_calendar_simple_agenda_view")}};var P={};var R=Object(o["connect"])(N,P)(A);var M=R;var D=function e(t,a){if(!t)throw new Error("mountUserCalendar must be called with a teamId parameter");var r=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(M,null)),a)};var x=function e(t){s.a.unmountComponentAtNode(t)};var F={mountUserCalendarFlexPane:D,unmountUserCalendarFlexPane:x};var L=a(44);Object(L["a"])("interop.mountUserCalendarFlexPane",D);Object(L["a"])("interop.unMountUserCalendarFlexPane",x)},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(88);var l=a.n(o);var c=a(13);var u=a(2);var d=a(119);var p=a(27);var h=a(6);var v=a.n(h);var m=a(7);var f=a.n(m);var b=a(8);var g=a.n(b);var _=a(9);var y=a.n(_);var O=a(0);var k=a(4);var E=a(805);var C=a(927);var j=a(19);var w=a(10);var S=a(706);var I=a(17);var T=a(11);var A=a(22);var N=a(28);var P=a(139);var R=a(3122);var M={invite:O["b"].object.isRequired,approveRequest:O["b"].func.isRequired,denyRequest:O["b"].func.isRequired,removeRow:O["b"].func.isRequired,featureRequestToInvite:O["b"].bool,channels:O["b"].array,requesterNames:O["b"].array};var D={featureRequestToInvite:false,channels:[],requesterNames:[]};var x=new w["b"]("admin");var F=1e3;var L=200;var B=function(e){y()(t,e);function t(e){v()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(u["bindAll"])(a,["onClickApprove","onClickDeny","onDeleteAnimationTick","onDeleteAnimationEnd","setRef","startDeleteAnimation"]);a.rowRef=null;a.deleteAnimation=null;a.state={isApproving:false,isApproved:false,isDenying:false,isDenied:false,height:null,opacity:1};return a}f()(t,[{key:"componentWillUnmount",value:function e(){if(this.deleteAnimation){this.deleteAnimation.cancel();this.onDeleteAnimationEnd()}}},{key:"onClickApprove",value:function e(){var t=this;var a=this.props,r=a.invite,n=a.approveRequest;var i=this.state,s=i.isApproving,o=i.isDenying;if(s||o)return;this.setState(function(){return{isApproving:true}});n(r).then(function(){t.setState(function(){return{isApproving:false,isApproved:true}});setTimeout(t.startDeleteAnimation,F)})}},{key:"onClickDeny",value:function e(){var t=this;var a=this.props,r=a.invite,n=a.denyRequest;var i=this.state,s=i.isApproving,o=i.isDenying;if(s||o)return;this.setState(function(){return{isDenying:true}});n(r).then(function(){t.setState(function(){return{isDenying:false,isDenied:true}});setTimeout(t.startDeleteAnimation,F)})}},{key:"onDeleteAnimationTick",value:function e(t){var a=t.value,r=t.nextTick;if(!this.rowRef)return;this.setState(function(){return{height:a,opacity:.01*a}},r)}},{key:"onDeleteAnimationEnd",value:function e(){var t=this.props.invite;this.props.removeRow(t);this.deleteAnimation=null}},{key:"setRef",value:function e(t){this.rowRef=t}},{key:"startDeleteAnimation",value:function e(){if(!this.rowRef)return;var t=this.rowRef.clientHeight;this.deleteAnimation=Object(S["a"])({fromValue:t,toValue:0,duration:L,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"renderInviteInfo",value:function e(){var t=this.props,a=t.featureRequestToInvite,r=t.invite;if(!a)return null;var n=s.a.createElement("div",{className:"p-admin_invites_row__text p-admin_invites_row__email"},s.a.createElement("span",{className:"bold"},r.email));r.real_name&&(n=s.a.createElement("div",{className:"p-admin_invites_row__text p-admin_invites_row__email"},s.a.createElement("span",{className:"bold"},r.real_name)," ",s.a.createElement("span",null,"(",r.email,")")));return s.a.createElement("div",{className:"p-admin_invites_row__info"},n,s.a.createElement("div",{className:"p-admin_invites_row__text"},this.renderMemberTypeAndChannels()),s.a.createElement("div",{className:"p-admin_invites_row__text"},this.renderInviters()))}},{key:"renderMemberTypeAndChannels",value:function e(){var t=this.props,a=t.featureRequestToInvite,r=t.invite,n=t.channels;if(!a)return null;if("restricted"!==r.invite_type&&"ultra_restricted"!==r.invite_type)return x.t("Full Member");if(!n||!n.length)return null;var i=Object(u["filter"])(n,function(e){return Object(T["isUnknownOrNonExistent"])(e)});if(i.length){if("ultra_restricted"===r.invite_type)return x.rt("Single-Channel Guest: 1 private channel");var o=Object(u["filter"])(n,function(e){return!Object(T["isUnknownOrNonExistent"])(e)});var l=Object(w["g"])(o.map(function(e){return s.a.createElement(P["a"],{channel:e,inline:true})}),{react:true,noConj:true});if(1===o.length)return x.rt("Multi-Channel Guest: {knownChannel} and {hiddenPrivateChannelsCount, plural, =1 {# private channel} other {# private channels}}",{knownChannel:l,hiddenPrivateChannelsCount:i.length});return x.rt("Multi-Channel Guest: {knownChannels}, and {hiddenPrivateChannelsCount, plural, =1 {# private channel} other {# private channels}}",{knownChannels:l,hiddenPrivateChannelsCount:i.length})}var c=Object(w["g"])(n.map(function(e){return s.a.createElement(P["a"],{channel:e,inline:true})},{react:true}));if("restricted"===r.invite_type)return x.rt("Multi-Channel Guest: {channels}",{channels:c});if("ultra_restricted"===r.invite_type)return x.rt("Single-Channel Guest: {channel}",{channel:c});return null}},{key:"renderInviters",value:function e(){var t=this.props,a=t.featureRequestToInvite,r=t.requesterNames,n=t.invite;if(!a)return null;var i=Object(w["g"])(r.map(function(e,t){var a=n.inviters[t];return s.a.createElement("a",{href:"/team/"+a,target:"_blank",rel:"noopener noreferrer"},e)}),{react:true,noEscape:true});return x.rt("Requested by {users}",{users:i})}},{key:"renderInviteActions",value:function e(){var t=this.props.featureRequestToInvite;var a=this.state,r=a.isApproving,n=a.isDenying,i=a.isApproved,o=a.isDenied;if(!t)return null;if(r||i)return s.a.createElement("div",{className:"p-admin_invites_row__actions"},s.a.createElement(N["b"],{type:"outline",className:"p-admin_invites_row__button",size:"small",loading:r&&!i,disabled:true},i?s.a.createElement(A["b"],{type:"check-small",inline:true}):null,i?x.t("Invitation sent"):x.t("Sending")));if(n||o)return s.a.createElement("div",{className:"p-admin_invites_row__actions"},s.a.createElement(N["b"],{type:"outline",className:"p-admin_invites_row__button",size:"small",loading:n&&!o,disabled:true},o?x.t("Denied"):x.t("Denying")));return s.a.createElement("div",{className:"p-admin_invites_row__actions"},s.a.createElement(N["b"],{type:"outline",className:"p-admin_invites_row__button",onClick:this.onClickApprove,size:"small"},x.t("Send Invitation")),s.a.createElement(N["b"],{type:"outline",className:"p-admin_invites_row__button",onClick:this.onClickDeny,size:"small"},x.t("Deny")))}},{key:"render",value:function e(){var t=this.props.featureRequestToInvite;var a=this.state,r=a.height,n=a.opacity;if(!t)return null;var i={};null!==r&&(i={height:r,opacity:n});return s.a.createElement("div",{className:"p-admin_invites_row",ref:this.setRef,style:i},this.renderInviteInfo(),this.renderInviteActions())}}]);return t}(i["Component"]);B.displayName="AdminInvitesRow";B.defaultProps=D;function U(e,t){var a=t.invite;var r=a.channels;"restricted"!==a.invite_type&&"ultra_restricted"!==a.invite_type||(r=a.channels.map(function(t){return Object(j["d"])(e,t)}));var n=a.inviters.map(function(t){return Object(I["getPrefCompliantMemberNameById"])(e,t)});return{featureRequestToInvite:Object(k["isFeatureEnabled"])(e,"feature_request_to_invite"),channels:r,requesterNames:n}}var q=Object(c["connect"])(U)(B);var G=a(20);var W=Object(G["b"])("TS.web.admin.onApproveInviteRequest",function(){return null});var H=Object(G["b"])("TS.web.admin.decrementInviteRequestsCount",function(){return null});var V=a(3124);var K={featureRequestToInvite:O["b"].bool,fetchInviteRequests:O["b"].func.isRequired,submitApproveInviteRequest:O["b"].func.isRequired,submitDenyInviteRequest:O["b"].func.isRequired};var z={featureRequestToInvite:false};var Y=function(e){y()(t,e);function t(e){v()(this,t);var a=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(u["bindAll"])(a,["approveRequest","denyRequest","removeRow"]);a.headers=[{id:"invite_request",value:null,noHover:true}];a.state={invitesData:[]};return a}f()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.fetchInviteRequests().then(function(e){t.setState(function(){return{invitesData:e.requests}})})}},{key:"getRows",value:function e(){var t=this;var a=this.state.invitesData;return a.map(function(e){return{id:"inviteRequest-"+e.id,items:[{id:"invite_request",value:s.a.createElement(q,{invite:e,approveRequest:t.approveRequest,denyRequest:t.denyRequest,removeRow:t.removeRow})}]}})}},{key:"approveRequest",value:function e(t){if(!this.props.featureRequestToInvite)return null;return this.props.submitApproveInviteRequest({requestId:t.id}).then(function(e){var t=e.successful_requests[0];W(t)})}},{key:"denyRequest",value:function e(t){if(!this.props.featureRequestToInvite)return null;return this.props.submitDenyInviteRequest({requestId:t.id}).then(function(){H()})}},{key:"removeRow",value:function e(t){this.setState(function(e){var a=Object(u["reject"])(e.invitesData,{id:t.id});return{invitesData:a}})}},{key:"render",value:function e(){if(!this.props.featureRequestToInvite)return null;return s.a.createElement("div",{className:"p-admin_invites_table","data-qa":"admin_invites_table"},s.a.createElement(C["b"],{height:700,useKeyboardNavigableTable:true,headers:this.headers,rows:this.getRows(),rowClassName:"p-admin_invites_table__row",disableHover:true}))}}]);return t}(i["Component"]);Y.displayName="AdminInvitesTable";Y.defaultProps=z;function Q(e){return{featureRequestToInvite:Object(k["isFeatureEnabled"])(e,"feature_request_to_invite")}}var J=function e(t){return{fetchInviteRequests:function e(a){return t(Object(E["d"])(a))},submitApproveInviteRequest:function e(a){return t(Object(E["h"])(a))},submitDenyInviteRequest:function e(a){return t(Object(E["i"])(a))}}};var Z=Object(c["connect"])(Q,J)(Y);var X=function e(t,a){var r=document.getElementById("admin_invites_table_mount_point");if(!r||!t)return;var i=Object(p["d"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(Z,n()({},a,{onClose:o}))),r)};var $={mountAdminInvitesTable:X};var ee=a(44);Object(ee["a"])("interop.mountAdminInvitesTable",X)},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(2);var s=a(29);var o=a(44);var l=a(1484);var c=["activity.mentions","channels.history","channels.insights","channels.listShared","channels.replies","chat.command","conversations.history","files.info","files.list","groups.history","groups.listShared","groups.replies","highlights.briefing","im.history","im.replies","mpim.history","pins.list","search.files","search.messages","stars.list","subscriptions.thread.getView","subteams.list","subteams.users.list","unread.history"];function u(e){return c.includes(e)}var d=c;var p=["activity.mentions","channels.history","conversations.history","groups.history","im.history","mpim.history","pins.list","unread.history"];function h(e){return p.includes(e)}var v=p;var m=["activity.mentions","conversations.history","conversations.info","unread.history","pins.list"];function f(e){return m.includes(e)}var b=m;function g(e){var t=e.data,a=e.method,r=e.args;var i=n()({},t,{args:null});var s=false===a.startsWith("bots.")&&TS.bots.legacyEnsureBotsInDataArePresent(i,a,r&&r.channel);var o=false===a.startsWith("users.")&&false===h(a)&&TS.members.legacyEnsureMembersInDataArePresent(i,a);var l=false===a.startsWith("teams.")&&TS.teams.ensureTeamsInDataArePresent(i,"api/ensureModelForLegacy for method: "+a);var c=false===f(a)&&TS.shared.legacyEnsureModelObsInDataArePresent(i,a);return TS.ensureFullyBooted().then(function(){return c}).then(function(){return Promise.join(s,o,l)}).catch(TS.error)}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.reason||e._x_reason||"legacy_no_reason_provided"}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expedited,a=void 0!==t&&t;return function(e,t,r,i){var o={method:e,args:t,reason:_(t),EXPEDITED:a,SET_ACTIVE:!TS.client&&!i};var l=function a(r){return{ok:r.ok,request_id:r.request_id,data:r,method:e,args:t}};var c=TS.redux.dispatch(Object(s["a"])(o)).then(l).tap(u(e)&&g).catch(function(e){e.args=n()({_attempts:e.attempts},e.args);throw e});"function"===typeof r&&(c=c.then(function(e){return r(true,e.data,t)}).catch(function(e){return r(false,e.data,t)}));return c}}function O(){return Object(l["b"])(TS.redux.getState())}function k(){return O().isPaused()}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i["noop"];O().awaitEmptyQ().then(e)}var C=y();var j=y({expedited:true});Object(o["a"])("interop.api",{call:C,callExpedited:j,callImmediately:j,getQueue:O,isPaused:k,callFuncWhenApiQisEmpty:E})},,function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(284);var i=a(101);var s=a(1274);function o(){return Object(s["a"])({channelId:null,startTs:null})}var l=a(0);var c=a(15);var u=a(73);var d=Object(c["b"])("Switch to a channel if it is not currently active",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId;var n=Object(u["a"])(t());n!==r&&e(Object(s["a"])({channelId:r}))});d.propTypes={channelId:l["b"].string};var p=d;var h=a(1441);var v=a(23);var m=a(4);function f(e,t,a){if(!e)return null;if(!t)return null;if(!a)return null;var r=Date.now();return e+"-"+t+"-"+a+"-"+r+"000"}var b=Object(c["b"])("Update the active channel session id",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId;var n=t();var s=Object(v["c"])(n);var o=Object(m["getCurrentUserId"])(n);var l=f(s,o,r);e(Object(i["f"])(l))});b.propTypes={channelId:l["b"].string};var g=b;function _(){return Object(n["b"])(TS.redux.getState())}function y(){return Object(n["k"])(TS.redux.getState())}function O(){return TS.redux.dispatch(o())}function k(){return TS.redux.dispatch(i["g"].apply(void 0,arguments))}function E(){return TS.redux.dispatch(i["c"].apply(void 0,arguments))}function C(){return TS.redux.dispatch(i["m"].apply(void 0,arguments))}function j(){return TS.redux.dispatch(p.apply(void 0,arguments))}function w(){return Object(n["h"])(TS.redux.getState())}function S(){return TS.redux.dispatch(i["i"].apply(void 0,arguments))}function I(){return TS.redux.dispatch(i["j"].apply(void 0,arguments))}function T(){return TS.redux.dispatch(i["l"].apply(void 0,arguments))}function A(){return TS.redux.dispatch(h["a"].apply(void 0,arguments))}function N(){return TS.redux.dispatch(g.apply(void 0,arguments))}function P(){return Object(n["c"])(TS.redux.getState())}Object(r["a"])("interop.messagePane",{getChannelSessionId:_,getPrevChannelId:y,hideMessagePane:O,setAppSpaceOpen:k,jumpToTimestamp:E,setOverlayVisible:C,switchToChannelIfNotActive:j,getMessagePaneStartTs:w,setGhostLastRead:S,setHighlightsBackButtonVisible:I,setNewxpOnboardingStep:T,deprecatedMaybeAnimateDeleteMessage:A,updateActiveChannelSessionId:N,getFocusRequestedTs:P})},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(6);var c=a.n(l);var u=a(7);var d=a.n(u);var p=a(8);var h=a.n(p);var v=a(9);var m=a.n(v);var f=a(0);var b=a(16);var g=a.n(b);var _=a(28);var y=a(22);var O=a(10);var k=a(3238);var E=new O["b"]("migration_blocker_page");var C={enterpriseName:f["b"].string,sendEmail:f["b"].bool,teamName:f["b"].string,migrationID:f["b"].string,isOrgOwner:f["b"].bool,isWorkspaceOwner:f["b"].bool,isOrgAdmin:f["b"].bool,isWorkspaceAdmin:f["b"].bool,teamURL:f["b"].string};var j={isOrgOwner:false,isWorkspaceOwner:false,isOrgAdmin:false,isWorkspaceAdmin:false,enterpriseName:null,teamURL:null,migrationID:null,sendEmail:false,teamName:null};var w=function(e){m()(t,e);function t(){c()(this,t);return h()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}d()(t,[{key:"renderMigrationTitle",value:function e(){var t=this.props,a=t.teamName,r=t.enterpriseName;return n.a.createElement("h3",{className:"p-migration_blocker_page__title"},E.t("The {teamName} workspace is joining {enterpriseName}!",{teamName:a,enterpriseName:r}))}},{key:"renderMigrationMessage",value:function e(){var t=this.props,a=t.enterpriseName,r=t.sendEmail;var i=E.rt("It\u2019s moving day! Your workspace is being migrated into the <b>{enterpriseName}</b> Enterprise Grid organization, and will be temporarily unavailable until the process is complete.",{enterpriseName:a,fallbackHash:"f805600b955705eefe22feb6f32b1871508f03bd"});return n.a.createElement("div",{className:"p-migration_blocker_page__description"},i,r?E.t(" You\u2019ll receive an email when it\u2019s all done."):"")}},{key:"renderMigrationButton",value:function e(){var t=this.props,a=t.migrationID,r=t.isOrgOwner,i=t.isWorkspaceOwner,s=t.isOrgAdmin,o=t.isWorkspaceAdmin,l=t.teamURL;if(!r&&!i&&!s&&!o)return null;return n.a.createElement(_["c"],{className:"p-migration_blocker_page__button",href:l+"migrations/"+a+"/status"},n.a.createElement("div",{className:"p-migration_blocker_page__button__text"},n.a.createElement("span",{className:"p-migration_blocker_page__button__title"},E.t("View migration status")),n.a.createElement("span",{className:"p-migration_blocker_page__button__subtitle"},E.t("Migration status is only visible to owners and admins."))),n.a.createElement("span",{className:"p-migration_blocker_page__button_icon"},n.a.createElement(y["b"],{type:"chevron-large-right"})))}},{key:"render",value:function e(){var t=g()("p-migration_blocker_page","p-migration_blocker_page--large");return n.a.createElement("div",{className:t,role:"button",tabIndex:"0"},n.a.createElement("div",{className:"p-migration_blocker_text"},n.a.createElement("div",{className:"p-migration_blocker_icon"}),this.renderMigrationTitle(),this.renderMigrationMessage()),this.renderMigrationButton())}}]);return t}(r["Component"]);w.displayName="MigrationBlockerPage";w.defaultProps=j;var S={};var I=w;var T=I;var A=a(163);var N=function e(t,a,r){if(!t)throw new Error("mountMigrationBlocker must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["d"])(t)},n.a.createElement(A["a"],null,n.a.createElement(T,r))),a)};var P=N;var R=a(44);Object(R["a"])("interop.mountMigrationBlocker",P)},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(2414);var c=a(0);var u=a(17);var d=a(31);var p=a(24);var h=a(35);var v=a(66);var m=a(22);var f=a(28);var b=a(782);var g=a(532);var _=a(1455);var y=a(1490);var O=a(1457);var k=a(1458);var E=a(1459);var C=a(1316);var j=a(3);var w=a.n(j);var S=a(2);var I=a(10);var T=a(276);var A=a(309);var N=a(803);var P=a(100);var R=a(1416);var M=new I["b"]("member_profile");var D={isPresenceActive:c["b"].bool,member:c["b"].object.isRequired,menuProps:c["b"].object.isRequired,openPrefsModal:c["b"].func,showFileList:c["b"].func,team:c["b"].object.isRequired,toggleUserPresence:c["b"].func};var x={isPresenceActive:false,openPrefsModal:S["noop"],showFileList:S["noop"],toggleUserPresence:S["noop"]};function F(e){var t=e.isPresenceActive,a=e.member,r=e.menuProps,i=e.openPrefsModal,s=e.showFileList,o=e.team,l=e.toggleUserPresence;var c=Object(g["a"])(),p=c.featureModernProfileFlexpane;if(!p)return null;var h=void 0;if(Object(u["isSelf"])(a)){var v=void 0;v=t?M.t("Set yourself away"):M.t("[AWAY] Set yourself active");h=[{label:M.t("View preferences"),click:function e(){return i()}},{label:M.t("Account settings"),href:Object(d["getTeamUrl"])(o,"/account/settings")},{type:"separator"},{label:M.t("View your files"),click:function e(){return s({user:a.id})}},{label:v,click:function e(){return l()}}]}else h=[{label:M.t("View files"),click:function e(){return s({user:a.id})}}];if(Object(T["canWriteText"])()){h.push({type:"separator"});h.push({label:M.t("Copy member ID"),description:a.id,click:function e(){return Object(T["writeText"])(a.id)}})}return n.a.createElement(R["a"],w()({},r,{template:h}))}F.displayName="MemberProfileOverflowMenu";F.defaultProps=x;function L(e,t){var a=t.member;return{isPresenceActive:Object(A["getPresenceByMemberId"])(e,a.id)===A["PRESENCE_ACTIVE"]}}var B={openPrefsModal:function e(){return N["a"].apply(void 0,arguments)},showFileList:function e(){return P["g"].apply(void 0,arguments)},toggleUserPresence:function e(){return A["toggleUserPresence"].apply(void 0,arguments)}};var U=Object(i["connect"])(L,B)(F);var q=a(807);var G=a(1711);var W=[q["a"].STATUS,q["a"].TITLE,q["a"].NAME,q["a"].TIME,q["a"].PHONE,q["a"].EMAIL,q["a"].CUSTOM];var H={member:c["b"].object,memberTeam:c["b"].object,team:c["b"].object};var V={member:void 0,memberTeam:void 0,team:void 0};function K(e){var t=e.member,a=e.memberTeam,r=e.team;var i=Object(g["a"])(),s=i.featureEscGridMigrationsClient,o=i.featureModernProfileFlexpane;if(!o)return null;var c=n.a.createElement(_["a"],{className:"p-member_profile__picture",member:t});var p=n.a.createElement(O["a"],{className:"p-member_profile__restriction",member:t,team:a,showRestrictionTip:false});var h=n.a.createElement(C["a"],{className:"p-member_profile__name",member:t});if(s&&Object(d["isUnavailable"])(a))return n.a.createElement(n.a.Fragment,null,c,p,h,n.a.createElement(k["a"],{memberTeam:a}));if(Object(u["isStranger"])(t))return n.a.createElement(n.a.Fragment,null,c,p,h,n.a.createElement(E["a"],{member:t}));return n.a.createElement(l["a"],null,function(e){var i=e.width,s=e.height;return n.a.createElement(b["b"],{width:i,height:s,fade:true},c,p,n.a.createElement(y["a"],{className:"p-member_profile__buttons",includeOverflow:true,member:t},n.a.createElement(v["e"],{offsetY:8,position:"bottom-right",renderMenu:function e(r){return n.a.createElement(U,{member:t,menuProps:r,team:a})}},n.a.createElement(f["d"],{className:"p-member_profile_buttons__button p-member_profile_buttons__button--overflow",type:"outline"},n.a.createElement(m["b"],{type:"ellipsis"})))),h,n.a.createElement(q["b"],{member:t,team:r,types:W}))})}K.displayName="MemberProfileDetails";K.defaultProps=V;function z(e,t){var a=t.memberId;var r=Object(p["d"])(e,a);if(!r)return{};return{member:r,memberTeam:Object(h["i"])(e,Object(u["getMemberTeamId"])(r)),status:status,team:Object(h["d"])(e)}}var Y=Object(i["connect"])(z)(K);var Q=a(163);var J=function e(t,a,r){if(!t)throw new Error("mountProfileFlexpane must be called with a teamId parameter");var l=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:l},n.a.createElement(Q["a"],null,n.a.createElement(Y,r))),a)};var Z=J;var X=a(44);Object(X["a"])("interop.mountProfileFlexpane",Z)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(1830);var d=a(5);var p=a.n(d);var h=a(3);var v=a.n(h);var m=a(6);var f=a.n(m);var b=a(7);var g=a.n(b);var _=a(8);var y=a.n(_);var O=a(9);var k=a.n(O);var E=a(0);var C=a(4);var j=a(68);var w=a(1823);var S=a(142);var I=a(1520);var T=a(2112);var A={dndDays:E["b"].string.isRequired,dndEnabledDays:E["b"].objectOf(E["b"].string).isRequired,dndBeforeDays:E["b"].objectOf(E["b"].string).isRequired,dndAfterDays:E["b"].objectOf(E["b"].string).isRequired,dndBaseBeforeTime:E["b"].string.isRequired,dndBaseAfterTime:E["b"].string.isRequired,featureGranularDnd:E["b"].bool};var N={featureGranularDnd:false};var P=function(e){k()(t,e);function t(e){f()(this,t);var a=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=e.dndDays,n=e.dndEnabledDays,i=e.dndBeforeDays,s=e.dndAfterDays,o=e.dndBaseBeforeTime,l=e.dndBaseAfterTime;a.state={dndDays:r,dndEnabledDays:n,dndBeforeDays:i,dndAfterDays:s,dndBaseBeforeTime:o,dndBaseAfterTime:l};a.handleDndDaysChange=a.handleDndDaysChange.bind(a);a.handleTimeChange=a.handleTimeChange.bind(a);a.handleAllDayChange=a.handleAllDayChange.bind(a);a.handleDayChange=a.handleDayChange.bind(a);return a}g()(t,[{key:"getDayOfTheWeek",value:function e(t){if(!t)return null;return t.split("_")[2]}},{key:"handleDndDaysChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.value;var r=this.state,n=r.dndBaseBeforeTime,i=r.dndBaseAfterTime,s=r.dndEnabledDays;if(a===S["a"].CUSTOM){this.setState(function(){return{dndDays:a}});return}var o=Object(I["a"])({dndDays:a,dndEnabledDays:s});var l=o?S["b"].DISABLED:S["b"].PARTIAL;var c=a===S["a"].WEEKDAYS;this.setState(function(){return{dndDays:a,dndBeforeDays:{monday:n,tuesday:n,wednesday:n,thursday:n,friday:n,saturday:n,sunday:n},dndAfterDays:{monday:i,tuesday:i,wednesday:i,thursday:i,friday:i,saturday:i,sunday:i},dndEnabledDays:{monday:l,tuesday:l,wednesday:l,thursday:l,friday:l,saturday:c?S["b"].ALL_DAY:l,sunday:c?S["b"].ALL_DAY:l}}})}},{key:"handleTimeChange",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.value,n=a.type,i=a.pref;var s=this.state.dndDays;var o="dndBeforeDays";var l="dndBaseBeforeTime";if("AFTER"===n){o="dndAfterDays";l="dndBaseAfterTime"}if(s===S["a"].CUSTOM){this.setState(function(e){return p()({},o,v()({},e[o],p()({},t.getDayOfTheWeek(i),r)))});return}this.setState(function(){var e;return e={},p()(e,o,{monday:r,tuesday:r,wednesday:r,thursday:r,friday:r,saturday:r,sunday:r}),p()(e,l,r),e})}},{key:"handleAllDayChange",value:function e(t){var a=this;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.pref;var i=this.state.dndDays;var s=t.target.checked?S["b"].DISABLED:S["b"].PARTIAL;if(i===S["a"].CUSTOM){this.setState(function(e){return{dndEnabledDays:v()({},e.dndEnabledDays,p()({},a.getDayOfTheWeek(n),s))}});return}var o=i===S["a"].WEEKDAYS;this.setState(function(){return{dndEnabledDays:{monday:s,tuesday:s,wednesday:s,thursday:s,friday:s,saturday:o?S["b"].ALL_DAY:s,sunday:o?S["b"].ALL_DAY:s}}})}},{key:"handleDayChange",value:function e(t){var a=this;var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.pref;var i=t.target.checked?S["b"].PARTIAL:S["b"].ALL_DAY;this.setState(function(e){return{dndEnabledDays:v()({},e.dndEnabledDays,p()({},a.getDayOfTheWeek(n),i))}})}},{key:"render",value:function e(){var t=this.props.featureGranularDnd;var a=this.state,i=a.dndDays,s=a.dndEnabledDays,o=a.dndBeforeDays,l=a.dndAfterDays,c=a.dndBaseBeforeTime,u=a.dndBaseAfterTime;if(!t)return null;return n.a.createElement(r["Fragment"],null,n.a.createElement(w["a"],{dndDays:i,dndEnabledDays:s,dndBeforeDays:o,dndAfterDays:l,dndBaseBeforeTime:c,dndBaseAfterTime:u,handleDndDaysChange:this.handleDndDaysChange,handleTimeChange:this.handleTimeChange,handleAllDayChange:this.handleAllDayChange,handleDayChange:this.handleDayChange,featureGranularDnd:t}))}}]);return t}(r["Component"]);P.displayName="DndAdminPreferences";P.defaultProps=N;var R=function e(t){return{featureGranularDnd:Object(C["isFeatureEnabled"])(t,"feature_granular_dnd"),dndDays:Object(j["a"])(t,"dnd_days"),dndEnabledDays:{monday:Object(j["a"])(t,"dnd_enabled_monday"),tuesday:Object(j["a"])(t,"dnd_enabled_tuesday"),wednesday:Object(j["a"])(t,"dnd_enabled_wednesday"),thursday:Object(j["a"])(t,"dnd_enabled_thursday"),friday:Object(j["a"])(t,"dnd_enabled_friday"),saturday:Object(j["a"])(t,"dnd_enabled_saturday"),sunday:Object(j["a"])(t,"dnd_enabled_sunday")},dndBeforeDays:{monday:Object(j["a"])(t,"dnd_before_monday"),tuesday:Object(j["a"])(t,"dnd_before_tuesday"),wednesday:Object(j["a"])(t,"dnd_before_wednesday"),thursday:Object(j["a"])(t,"dnd_before_thursday"),friday:Object(j["a"])(t,"dnd_before_friday"),saturday:Object(j["a"])(t,"dnd_before_saturday"),sunday:Object(j["a"])(t,"dnd_before_sunday")},dndAfterDays:{monday:Object(j["a"])(t,"dnd_after_monday"),tuesday:Object(j["a"])(t,"dnd_after_tuesday"),wednesday:Object(j["a"])(t,"dnd_after_wednesday"),thursday:Object(j["a"])(t,"dnd_after_thursday"),friday:Object(j["a"])(t,"dnd_after_friday"),saturday:Object(j["a"])(t,"dnd_after_saturday"),sunday:Object(j["a"])(t,"dnd_after_sunday")},dndBaseBeforeTime:Object(j["a"])(t,"dnd_before_monday"),dndBaseAfterTime:Object(j["a"])(t,"dnd_after_monday")}};var M=Object(o["connect"])(R)(P);var D=a(163);var x=function e(t,a){if(!t)throw new Error("mountDndPreferences must be called with a teamId parameter");var r=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(D["a"],null,n.a.createElement(u["a"],null))),a)};var F=function e(t){s.a.unmountComponentAtNode(t)};var L=function e(t,a){if(!a)throw new Error("mountDndAdminPreferences needs a valid reactRoot to mount to");if(!t)throw new Error("mountDndAdminPreferences must be called with a teamId parameter");var r=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(D["a"],null,n.a.createElement(M,null))),a)};var B=a(44);Object(B["a"])("interop.mountDndPreferences",x);Object(B["a"])("interop.unmountDndPreferences",F);Object(B["a"])("interop.mountDndAdminPreferences",L)},,function(e,t,a){"use strict";a.r(t);var r={};a.r(r);a.d(r,"hydrateStartData",function(){return g});a.d(r,"getStartData",function(){return _});var n=a(3);var i=a.n(n);var s=a(43);var o=a(2);var l=a.n(o);var c=a(15);var u=a(0);var d=a(11);var p=a(37);var h=a.n(p);var v=a(25);var m=a(4);var f=a(29);var b=Object(v["a"])("Fetch start data",function(e,t,a){var r=a.reason,n=h()(a,["reason"]);var s=i()({flannel_api_ver:4},n);Object(m["isFeatureEnabled"])(t(),"feature_lazy_user_groups")&&(s.only_self_subteams=1);return e(Object(f["b"])({method:"client.boot",args:s,reason:r}))});b.propTypes={reason:u["b"].string.isRequired,only_self_subteams:u["b"].oneOf([0,1])};var g=Object(c["b"])("Hydrate start data by fetching any required objects",function(){var e=Object(s["method"])(function(e,t,a){var r=a.startData;var n=i()({},r.rtm_start);var s=l.a.get(r,"self",l.a.get(n,"self"));var o=n.channels;var c=n.channels_latest;if(o&&c){var u=n.last_read,p=void 0===u?{}:u,h=n.channels_priority,v=void 0===h?{}:h,m=n.is_open,f=void 0===m?[]:m,b=n.starred,g=void 0===b?[]:b;var _=f.reduce(function(e,t){e[t]=true;return e},{});var y=g.reduce(function(e,t){e[t]=true;return e},{});var O=[];var k=[];var E=o.length;for(var C=0;C<E;C++){var j=o[C];var w=j.id;var S=c[w];var I=!!S;var T=p[w];var A=v[w];var N=!!y[w];var P=!!_[w];var R=Object(d["isMpim"])(j)?i()({},j,{is_member:I,latest:S,last_read:T,priority:A,is_starred:N,is_open:P}):i()({},j,{is_member:I,latest:S,last_read:T,priority:A,is_starred:N});(j.is_group?O:k).push(R)}n.groups=O;n.channels=k}delete n.users;delete n.updated_users;delete n.updated_bots;n.bots=[];n.users=[s];return Promise.resolve(n)});return function(t,a,r){return e.apply(this,arguments)}}());g.propTypes={startData:u["b"].object.isRequired};var _=Object(c["b"])("Fetch start data",function(){var e=Object(s["method"])(function(e){return e(b({reason:"fetch-legacy-start-data"})).then(function(t){return e(g({startData:{rtm_start:t}}))})});return function(t){return e.apply(this,arguments)}}());_.propTypes={};var y=a(44);Object(y["a"])("interop.boot",{data:r})},function(e,t,a){"use strict";a.r(t);var r=a(71);var n=a(44);var i=a(848);var s=a(58);var o=a.n(s);var l=a(2);var c=a(12);var u=a(42);var d=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];var p=["B","kB","MB","GB","TB","PB","EB","ZB","YB"];var h=function e(t,a,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(0===t)return 0;if(a===r)return parseFloat(t.toFixed(n));var s=i?1024:1e3;var o=i?d:p;var l=o.findIndex(function(e){return e.toLowerCase()===a.toLowerCase()});var c=o.findIndex(function(e){return e.toLowerCase()===r.toLowerCase()});if(-1===l)throw new Error("Unknown currentType '"+a+"' passed to convertToSize");if(-1===c)throw new Error("Unknown desiredType '"+r+"' passed to convertToSize");if(l<c)return parseFloat((t/Math.pow(s,c-l)).toFixed(n));return parseFloat((t*Math.pow(s,l-c)).toFixed(n))};var v=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"B";var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(0===t)return{size:0,type:"B"};var i=n?1024:1e3;var s=n?d:p;var o=Math.log(t)/Math.log(i);o<1&&(o=-Math.floor(Math.log(Math.abs(o))/Math.log(10)+1));var l=s.findIndex(function(e){return e.toLowerCase()===a.toLowerCase()});var c=Math.max(Math.min(l+Math.floor(o),s.length-1),0);if(-1===l)throw new Error("Unknown currentType '"+a+"' passed to convertToSize");return{size:h(t,a,s[c],r,n),type:s[c]}};var m=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return h(t,"B","KB",a,false)};var f=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return h(t,"B","MB",a,false)};var b=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return h(t,"B","GB",a,false)};var g=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return h(t,"KB","MB",a,false)};var _=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return h(t,"KB","GB",a,false)};var y=a(65);var O=a(30);var k=a(38);var E=Object(c["b"])();var C=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.desktop;var r=a.stats;var n=r.getMemoryUsage();var i=r.getAppMetrics();var s=r.getAppMemoryUsage?r.getAppMemoryUsage():Promise.resolve();return Promise.all([n,i,s]).then(function(e){var a=o()(e,3),r=a[0],n=a[1],i=a[2];var s={};if(navigator&&navigator.hardwareConcurrency){var c=Object(l["sumBy"])(n,function(e){return e.cpu.percentCPUUsage*navigator.hardwareConcurrency});s["cpu_v4_app_"+t+"_teams"]=c.toFixed(2)}if(Object(O["isElectronAndAtLeastVersion"])("4.0.0")){if(i){r&&(s.memory_v4_mb_full_client=Math.ceil(g(r.private)));var u=Object(l["sumBy"])(i,function(e){return e.memory.private});var d=Object(l["sumBy"])(i,function(e){return e.memory.shared});var p=u+d;var h=Math.ceil(g(u));var v=Math.ceil(g(p));s["memory_v4_app_mb_"+t+"_teams"]=v;s["memory_v4_app_private_mb_"+t+"_teams"]=h}}else{r&&(s.memory_v4_mb_full_client=Math.ceil(g(r.privateBytes)));var m=Object(l["sumBy"])(n,function(e){return e.memory.privateBytes});var f=Object(l["sumBy"])(n,function(e){return e.memory.workingSetSize});var b=Math.ceil(g(m));var _=Math.ceil(g(f));s["memory_v4_app_mb_"+t+"_teams"]=_;s["memory_v4_app_private_mb_"+t+"_teams"]=b}return s}).catch(function(e){return E.warn("metrics: Invalid data returned by desktop.stats",e.message)})};var j=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.desktop;var a=t.stats;var r=a.getMemoryUsage();var n=a.getAppMetrics();var i=a.getAppMemoryUsage?a.getAppMemoryUsage():Promise.resolve();return Promise.all([r,n,i]).then(function(e){var t=o()(e,3),a=t[0],r=t[1],n=t[2];var i={};var s=r.filter(function(e){return"Tab"===e.type});var c=s.length-1;if(navigator&&navigator.hardwareConcurrency){var u=Object(l["sumBy"])(r,function(e){return e.cpu.percentCPUUsage*navigator.hardwareConcurrency});i["cpu_v3_app_"+c+"_teams"]=u.toFixed(2)}if(Object(O["isElectronAndAtLeastVersion"])("4.0.0")){if(n){a&&(i.memory_v3_team_mb_full_client=Math.ceil(g(a.private)));var d=Object(l["sumBy"])(n,function(e){return e.memory.private});var p=Object(l["sumBy"])(n,function(e){return e.memory.shared});var h=d+p;var v=Math.ceil(g(d));var m=Math.ceil(g(h));i["memory_v3_app_mb_"+c+"_teams"]=m;i["memory_v3_app_private_mb_"+c+"_teams"]=v}}else{a&&(i.memory_v3_team_mb_full_client=Math.ceil(g(a.privateBytes)));var f=Object(l["sumBy"])(r,function(e){return e.memory.privateBytes});var b=Object(l["sumBy"])(r,function(e){return e.memory.workingSetSize});var _=Math.ceil(g(f));var y=Math.ceil(g(b));i["memory_v3_app_mb_"+c+"_teams"]=y;i["memory_v3_app_private_mb_"+c+"_teams"]=_}return i}).catch(function(e){return E.warn("metrics: Invalid data returned by desktop.stats",e.message)})};var w=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.desktop;var a=t.stats;var r=a.getTeamsMemoryUsage();var n=a.getCombinedMemoryUsage();return Promise.all([r,n]).then(function(e){var t=o()(e,2),a=t[0],r=t[1];var n={};if(!a)throw a;if(!r)throw r;Object(l["forOwn"])(a,function(e){n["memory_v2_team_mb_"+e.state]=g(e.memory.privateBytes)});var i=r.numTeams;var s=Math.ceil(g(r.memory.sharedBytes));var c=Math.ceil(g(r.memory.privateBytes));n["memory_v2_app_mb_"+i+"_teams"]=s+c;n["memory_v2_app_shared_mb_"+i+"_teams"]=s;n["memory_v2_app_private_mb_"+i+"_teams"]=c;return n}).catch(function(e){return E.warn("metrics: Invalid data returned by desktop.stats",e.message)})};var S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.desktop;var a=t.stats;var r=a.getMemoryUsage();var n=a.getCombinedMemoryUsage();return Promise.all([r,n]).then(function(e){var t=o()(e,2),a=t[0],r=t[1];var n={};var i=a.memory.privateBytes+a.memory.sharedBytes;n.memory_v1_usage_team_mb=g(i,3);if(r&&r.memory){var s=r.memory.privateBytes+r.memory.sharedBytes;var l=s/r.numTeams;n.memory_v1_usage_all_mb=g(s,3);n.memory_v1_usage_all_per_team_mb=g(l,3)}else E.warn("Unexpected results from call to getCombinedMemoryUsage()",r);return n}).catch(function(e){return E.warn("Error logging combined memory stats",e.message)})};var I=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.desktop;if(!t||!t.stats||!Object(u["canRequestMetrics"])())return Promise.resolve(null);var a=t.stats;if(a.getAppMetrics)return j(t);if(a.getTeamsMemoryUsage&&a.getCombinedMemoryUsage)return w(t);if(a.getMemoryUsage)return S(t);return Promise.resolve(null)};function T(e){var t=e.state;if(!Object(u["canRequestMetrics"])()||!Object(u["isSelectedTeam"])()||Object(k["a"])())return null;return I().then(function(e){if(!e)return null;var a=t?Object(r["c"])({state:t}):Object(r["a"])();var n=Object.keys(e);n.forEach(function(t){return a.store(t,e[t])});return e})}var A={fetchMemoryStatsV1:S,fetchMemoryStatsV2:w,fetchMemoryStatsV3:j,fetchMemoryStatsV4:C};Object(y["exportToGlobalDebugger"])("ssbMetrics",{fetchMemoryStatsV3:j,fetchMemoryStatsV4:C});var N=36e5;var P=6e5;var R=false;function M(e){var t=N+Math.floor(Math.random()*P);if(!e||R)return;R=true;setInterval(function(){T({state:TS.redux.getState()})},t)}Object(n["a"])("interop.getTelemeter",function(){return Object(r["c"])({state:TS.redux.getState()})});Object(n["a"])("interop.telemeter",{start:function e(){return i["a"].start()},sendDataAndEmptyQueue:function e(){return i["a"].sendDataAndEmptyQueue()},startMemoryStatsLogging:M})},function(e,t,a){"use strict";a.r(t);var r=a(588);var n=a(589);var i=a(590);var s=a(591);var o=a(592);var l=a(593);var c=a(594);var u=a(595);var d=a(596);var p=a(597);var h=a(598);var v=a(599);var m=a(600);var f=a(601);var b=a(602);var g=a(603);var _=a(604);var y=a(605);var O=a(606);var k=a(607);var E=a(608);var C=a(609);var j=a(610);var w=a(611);var S=a(612);var I=a(613);var T=a(614);var A=a(615);var N=a(616);var P=a(617);var R=a(618);var M=a(619);var D=a(620);var x=a(621);var F=a(622);var L=a(623);var B=a(624);var U=a(625);var q=a(626);var G=a(627);var W=a(628);var H=a(629);var V=a(630);var K=a(631);var z=a(632);var Y=a(633);var Q=a(634);var J=a(635);var Z=a(636);var X=a(637);var $=a(638);var ee=a(639);var te=a(640);var ae=a(641);var re=a(642);var ne=a(643);var ie=a(644);var se=a(645);var oe=a(646);var le=a(510);var ce=a(647);var ue=a(648);var de=a(649);var pe=a(650);var he=a(651);var ve=a(652);var me=a(653);var fe=a(654);var be=a(655);var ge=a(656);var _e=a(657);var ye=a(658);var Oe=a(659);var ke=a(660);var Ee=a(661);var Ce=a(662);var je=a(663);var we=a(664);var Se=a(665);var Ie=a(666);var Te=a(667);var Ae=a(668);var Ne=a(669);var Pe=a(670);var Re=a(671);var Me=a(672);var De=a(673);var xe=a(674);var Fe=a(675);var Le=a(676);var Be=a(677);var Ue=a(678);var qe=a(679);var Ge=a(680);var We=a(1);var He=a.n(We);var Ve=a(88);var Ke=a.n(Ve);var ze=a(701);var Ye=a(3);var Qe=a.n(Ye);var Je=a(6);var Ze=a.n(Je);var Xe=a(7);var $e=a.n(Xe);var et=a(8);var tt=a.n(et);var at=a(9);var rt=a.n(at);var nt=a(13);var it=a(16);var st=a.n(it);var ot=a(0);var lt=a(10);var ct=a(4);var ut=a(180);var dt=a(73);var pt=a(19);var ht=a(66);var vt=a(128);var mt=a(22);var ft=a(50);var bt=a(1728);var gt=a(2);var _t=a(34);var yt=a(132);var Ot=a(1045);var kt=a(139);var Et=a(11);var Ct=a(1102);var jt=a(553);var wt=a(803);var St=a(1846);var It=a(1217);var Tt=a(21);var At=a(45);var Nt=a(1714);var Pt=new lt["b"]("do_not_disturb");var Rt={inDndBySnooze:ot["b"].bool.isRequired,snoozeNotifications:ot["b"].func.isRequired,endDndSnooze:ot["b"].func.isRequired,endDndSchedule:ot["b"].func.isRequired,snoozeEndTs:ot["b"].number,dndEndTs:ot["b"].number,do24hrTime:ot["b"].bool,currentChannel:ot["b"].object,menuProps:ot["b"].object,openPrefsModal:ot["b"].func,openDndDialog:ot["b"].func,openChannelNotificationPrefsModal:ot["b"].func,clogger:ot["b"].object,setUserPrefByApi:ot["b"].func,showNotificationScheduleNewBadge:ot["b"].bool,featureGranularDnd:ot["b"].bool};var Mt={snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:false,currentChannel:{},menuProps:{},openPrefsModal:gt["noop"],openDndDialog:gt["noop"],openChannelNotificationPrefsModal:gt["noop"],clogger:{track:gt["noop"]},showNotificationScheduleNewBadge:false,setUserPrefByApi:gt["noop"],featureGranularDnd:false};var Dt=function(e){rt()(t,e);function t(e){Ze()(this,t);var a=tt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderSubmenu=a.renderSubmenu.bind(a);a.onClickDoNotDisturbSchedule=a.onClickDoNotDisturbSchedule.bind(a);a.onClickNotificationPreferences=a.onClickNotificationPreferences.bind(a);return a}$e()(t,[{key:"onClickDoNotDisturbSchedule",value:function e(){var t=this.props,a=t.featureGranularDnd,r=t.showNotificationScheduleNewBadge;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"});a&&r&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:true})}},{key:"onClickNotificationPreferences",value:function e(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"renderDndMenuHeader",value:function e(){var t=this.props,a=t.inDndBySnooze,r=t.snoozeEndTs,n=t.dndEndTs,i=t.do24hrTime,s=t.featureGranularDnd;var o=a?r:n;var l=Object(Ct["b"])(o,{do24hrTime:i});var c=st()({"p-dnd_menu__snooze_header":a||s,"p-dnd_menu__schedule_header":!a&&!s});return He.a.createElement("div",{className:c},He.a.createElement("div",{className:"p-dnd_menu__header_status"},He.a.createElement("div",null,He.a.createElement("strong",null,s?Pt.t("Do Not Disturb"):Pt.t("Do Not Disturb: ON"))),He.a.createElement("div",null,l)))}},{key:"renderSubmenu",value:function e(t){var a=this;var r=this.props.clogger;return He.a.createElement(ht["f"],Qe()({},t,{width:200}),He.a.createElement(ht["b"],{label:Pt.t("30 minutes"),onSelected:function e(){var t=30;a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:30m"});r.track(Tt["k"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Tt["h"].DURATION_30_MINUTES,dnd_snooze_type:Tt["i"].SNOOZE_ADJUST})}}),He.a.createElement(ht["b"],{label:Pt.t("1 hour"),onSelected:function e(){var t=60;a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:1hr"});r.track(Tt["k"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Tt["h"].DURATION_1_HOUR,dnd_snooze_type:Tt["i"].SNOOZE_ADJUST})}}),He.a.createElement(ht["b"],{label:Pt.t("2 hours"),onSelected:function e(){var t=120;a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:2hr"});r.track(Tt["k"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Tt["h"].DURATION_2_HOURS,dnd_snooze_type:Tt["i"].SNOOZE_ADJUST})}}),He.a.createElement(ht["b"],{label:Pt.t("4 hours"),onSelected:function e(){var t=240;a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:4hr"});r.track(Tt["k"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Tt["h"].DURATION_4_HOURS,dnd_snooze_type:Tt["i"].SNOOZE_ADJUST})}}),He.a.createElement(ht["b"],{label:Pt.t("Until tomorrow"),onSelected:function e(){var t=Object(Ct["d"])();a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:tomorrow"});r.track(Tt["k"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Tt["h"].DURATION_TOMORROW,dnd_snooze_type:Tt["i"].SNOOZE_ADJUST})}}),He.a.createElement(ht["b"],{label:Pt.t("Until next week"),onSelected:function e(){var t=Object(Ct["c"])();a.props.snoozeNotifications({duration:t,reason:"DndEnabledMenu:week"});r.track(Tt["k"].DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:Tt["h"].DURATION_NEXT_WEEK,dnd_snooze_type:Tt["i"].SNOOZE_ADJUST})}}),He.a.createElement(ht["b"],{label:Pt.t("Custom\u2026"),onSelected:function e(){a.props.openDndDialog();r.track(Tt["k"].DND_OPEN_CUSTOM_SNOOZE_DIALOG)}}))}},{key:"renderAdjustMenuItem",value:function e(){var t=this.props,a=t.inDndBySnooze,r=t.featureGranularDnd;if(a||r)return He.a.createElement(Ot["a"],{label:Pt.t("Adjust time"),renderSubmenu:this.renderSubmenu});return He.a.createElement(ht["b"],{label:Pt.t("Adjust schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule})}},{key:"renderSettingsMenuItem",value:function e(){var t=this;var a=this.props.currentChannel;if(!a.id||Object(Et["isIm"])(a))return null;var r=He.a.createElement(kt["a"],{channelId:a.id,iconProps:{inherit:true,align:"baseline"},inline:true});var n=Pt.rt("Settings for {name}\u2026",{name:He.a.createElement("strong",null,r),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return He.a.createElement(ht["b"],{label:n,onSelected:function e(){return t.props.openChannelNotificationPrefsModal({channelId:a.id})}})}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.inDndBySnooze,n=a.menuProps,i=a.featureGranularDnd,s=a.showNotificationScheduleNewBadge;var o=void 0;var l=void 0;if(i){o=He.a.createElement("span",{className:"p-dnd_menu__new_pill"},Pt.t("NEW"));l=s?He.a.createElement("span",null,Pt.t("Notification schedule\u2026")," ",o):Pt.t("Notification schedule\u2026")}var c=function e(){r?t.props.endDndSnooze({reason:"DndEnabledMenu:end_snooze"}):t.props.endDndSchedule({reason:"DndEnabledMenu:end_schedule"})};return He.a.createElement("div",null,this.renderDndMenuHeader(),He.a.createElement(ht["f"],Qe()({},n,{menuClassNames:"p-dnd_menu"}),He.a.createElement(ht["b"],{label:i?Pt.t("Turn off"):Pt.t("Resume notifications now"),onSelected:c,danger:i}),this.renderAdjustMenuItem(),He.a.createElement(ht["d"],null),i&&He.a.createElement(ht["b"],{label:i?l:Pt.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!i&&this.renderSettingsMenuItem(),!i&&He.a.createElement(ht["b"],{label:Pt.t("Your notification preferences\u2026",{fallbackHash:"4fa8d4f0498a550e3cf075dc9c810f7b6f771e65"}),onSelected:this.onClickNotificationPreferences})))}}]);return t}(We["PureComponent"]);Dt.displayName="DndEnabledMenu";Dt.defaultProps=Mt;var xt=function e(t){var a=Object(ct["getCurrentUserId"])(t);var r=Object(ut["getDndScheduleByMemberId"])(t,a),n=r.nextDndEndTs;var i=Object(ut["getSnoozeScheduleForCurrentUser"])(t),s=i.snoozeEnabled,o=i.snoozeEndTs;return{inDndBySnooze:s,snoozeEndTs:o,dndEndTs:n,do24hrTime:Object(_t["f"])(t,"time24"),clogger:Object(At["a"])({state:t}),featureGranularDnd:Object(ct["isFeatureEnabled"])(t,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(_t["f"])(t,"dnd_notification_schedule_new_badge_seen")}};var Ft=function e(t){return{snoozeNotifications:function e(a){return t(Object(jt["e"])(a))},openDndDialog:function e(){return t(Object(St["a"])())},endDndSnooze:function e(a){return t(Object(jt["b"])(a))},endDndSchedule:function e(a){return t(Object(jt["a"])(a))},openChannelNotificationPrefsModal:function e(a){return t(Object(It["a"])(a))},setUserPrefByApi:function e(a){return t(Object(yt["c"])(a))},openPrefsModal:function e(a){return t(Object(wt["a"])(a))}}};var Lt=Object(nt["connect"])(xt,Ft)(Dt);var Bt=new lt["b"]("do_not_disturb");var Ut={inDnd:ot["b"].bool.isRequired,currentChannel:ot["b"].object,className:ot["b"].string,featureGranularDnd:ot["b"].bool,featureClassicNav:ot["b"].bool};var qt={currentChannel:{},className:void 0,featureGranularDnd:false,featureClassicNav:false};var Gt=function(e){rt()(t,e);function t(e){Ze()(this,t);var a=tt()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderMenu=a.renderMenu.bind(a);return a}$e()(t,[{key:"renderMenu",value:function e(t){var a=this.props,r=a.inDnd,n=a.currentChannel,i=a.featureClassicNav;var s=void 0;i&&(s={menuProps:Qe()({},t,{onMenuItemSelected:function e(a,r){r.stopPropagation();t.onMenuItemSelected(a,r)}})});if(r)return He.a.createElement(Lt,Qe()({currentChannel:n,menuProps:t},s));return He.a.createElement(bt["a"],Qe()({currentChannel:n,menuProps:t},s))}},{key:"render",value:function e(){var t=this.props,a=t.inDnd,r=t.className,n=t.featureGranularDnd;var i=a?"snooze-outline":"bell-o";return He.a.createElement(ht["e"],{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:8},He.a.createElement(ft["c"],{tip:n?Bt.t("Do Not Disturb"):Bt.t("Notifications"),position:"bottom"},He.a.createElement(vt["a"],{className:st()("p-dnd_button",r),"data-qa":"do_not_disturb_btn"},He.a.createElement(mt["b"],{type:i}))))}}]);return t}(We["PureComponent"]);Gt.displayName="DndButton";Gt.defaultProps=qt;var Wt=function e(t){var a=Object(dt["a"])(t);return{inDnd:!!Object(ut["getCurrentMemberDnd"])(t),currentChannel:Object(pt["d"])(t,a)||void 0,featureGranularDnd:Object(ct["isFeatureEnabled"])(t,"feature_granular_dnd"),featureClassicNav:Object(ct["isFeatureEnabled"])(t,"feature_classic_nav")}};var Ht=Object(nt["connect"])(Wt)(Gt);var Vt=a(350);var Kt=a(89);var zt=a(1505);Object(Vt["a"])({ToastContainer:ze["a"],DndButton:Ht});Object(zt["a"])(a(2822));window.React=He.a;window.ReactDOM=Ke.a;window.moment=Kt["a"]},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(10);var i=new n["b"]("a11y");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=e.isCurrent,r=e.hasNotifications,n=e.isStarred,s=e.isMuted,o=e.hasDraft,l=e.featureLabelsForCoreObjects;if(!l)return null;var c=function(){if(a&&r&&s&&n&&o)return i.t("current conversation, has notifications, muted, starred, has a draft message");if(!a&&r&&s&&n&&o)return i.t("has notifications, muted, starred, has a draft message");if(a&&!r&&s&&n&&o)return i.t("current conversation, muted, starred, has a draft message");if(!a&&!r&&s&&n&&o)return i.t("muted, starred, has a draft message");if(a&&r&&!s&&n&&o)return i.t("current conversation, has notifications, starred, has a draft message");if(!a&&r&&!s&&n&&o)return i.t("has notifications, starred, has a draft message");if(a&&!r&&!s&&n&&o)return i.t("current conversation, starred, has a draft message");if(!a&&!r&&!s&&n&&o)return i.t("starred, has a draft message");if(a&&r&&s&&!n&&o)return i.t("current conversation, has notifications, muted, has a draft message");if(!a&&r&&s&&!n&&o)return i.t("has notifications, muted, has a draft message");if(a&&!r&&s&&!n&&o)return i.t("current conversation, muted, has a draft message");if(!a&&!r&&s&&!n&&o)return i.t("muted, has a draft message");if(a&&r&&!s&&!n&&o)return i.t("current conversation, has notifications, has a draft message");if(!a&&r&&!s&&!n&&o)return i.t("has notifications, has a draft message");if(a&&!r&&!s&&!n&&o)return i.t("current conversation, has a draft message");if(!a&&!r&&!s&&!n&&o)return i.t("has a draft message");if(a&&r&&s&&n&&!o)return i.t("current conversation, has notifications, muted, starred");if(!a&&r&&s&&n&&!o)return i.t("has notifications, muted, starred");if(a&&!r&&s&&n&&!o)return i.t("current conversation, muted, starred");if(!a&&!r&&s&&n&&!o)return i.t("muted, starred");if(a&&r&&!s&&n&&!o)return i.t("current conversation, has notifications, starred");if(!a&&r&&!s&&n&&!o)return i.t("has notifications, starred");if(a&&!r&&!s&&n&&!o)return i.t("current conversation, starred");if(!a&&!r&&!s&&n&&!o)return i.t("starred");if(a&&r&&s&&!n&&!o)return i.t("current conversation, has notifications, muted");if(!a&&r&&s&&!n&&!o)return i.t("has notifications, muted");if(a&&!r&&s&&!n&&!o)return i.t("current conversation, muted");if(!a&&!r&&s&&!n&&!o)return i.t("muted");if(a&&r&&!s&&!n&&!o)return i.t("current conversation, has notifications");if(!a&&r&&!s&&!n&&!o)return i.t("has notifications");if(a&&!r&&!s&&!n&&!o)return i.t("current conversation");return""}();if(t&&c)return i.t("{name} ({context})",{name:t,context:c});if(t)return t;return""}var o=a(1782);var l=a(785);var c=new n["b"]("a11y");function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,a=e.isGuest,r=e.isSelf,n=e.isAppOrBot,i=e.isDeleted,s=e.isPrescenceAway,o=e.isPrescenceDND,u=e.statusEmojiCode,d=e.statusText,p=e.isCurrent,h=e.hasNotifications,v=e.isStarred,m=e.isMuted,f=e.hasDraft,b=e.featureLabelsForCoreObjects;if(!b)return null;var g=function(){if(i)return c.t("deactivated");if(n)return c.t("APP");if(a&&!s&&o)return c.t("guest, do not disturb");if(a&&s&&!o)return c.t("guest, away");if(a&&!s&&!o)return c.t("guest");if(r&&!s&&o)return c.t("you, do not disturb");if(r&&!s&&!o)return c.t("you");if(!a&&!s&&o)return c.t("do not disturb");if(!a&&s&&!o)return c.t("away");return""}();var _=u&&Object(l["a"])(u);var y=function(){if(_&&!d)return _;if(_&&d)return c.t("{statusEmoji} {statusText}",{statusEmoji:_,statusText:d,fallbackHash:"ad5c47c4aa7f1e2be1e151ea075d02eff6e54376"});if(!_&&d)return d;return""}();var O=function(){if(p&&h&&m&&v&&f)return c.t("current conversation, has notifications, muted, starred, has a draft message");if(!p&&h&&m&&v&&f)return c.t("has notifications, muted, starred, has a draft message");if(p&&!h&&m&&v&&f)return c.t("current conversation, muted, starred, has a draft message");if(!p&&!h&&m&&v&&f)return c.t("muted, starred, has a draft message");if(p&&h&&!m&&v&&f)return c.t("current conversation, has notifications, starred, has a draft message");if(!p&&h&&!m&&v&&f)return c.t("has notifications, starred, has a draft message");if(p&&!h&&!m&&v&&f)return c.t("current conversation, starred, has a draft message");if(!p&&!h&&!m&&v&&f)return c.t("starred, has a draft message");if(p&&h&&m&&!v&&f)return c.t("current conversation, has notifications, muted, has a draft message");if(!p&&h&&m&&!v&&f)return c.t("has notifications, muted, has a draft message");if(p&&!h&&m&&!v&&f)return c.t("current conversation, muted, has a draft message");if(!p&&!h&&m&&!v&&f)return c.t("muted, has a draft message");if(p&&h&&!m&&!v&&f)return c.t("current conversation, has notifications, has a draft message");if(!p&&h&&!m&&!v&&f)return c.t("has notifications, has a draft message");if(p&&!h&&!m&&!v&&f)return c.t("current conversation, has a draft message");if(!p&&!h&&!m&&!v&&f)return c.t("has a draft message");if(p&&h&&m&&v&&!f)return c.t("current conversation, has notifications, muted, starred");if(!p&&h&&m&&v&&!f)return c.t("has notifications, muted, starred");if(p&&!h&&m&&v&&!f)return c.t("current conversation, muted, starred");if(!p&&!h&&m&&v&&!f)return c.t("muted, starred");if(p&&h&&!m&&v&&!f)return c.t("current conversation, has notifications, starred");if(!p&&h&&!m&&v&&!f)return c.t("has notifications, starred");if(p&&!h&&!m&&v&&!f)return c.t("current conversation, starred");if(!p&&!h&&!m&&v&&!f)return c.t("starred");if(p&&h&&m&&!v&&!f)return c.t("current conversation, has notifications, muted");if(!p&&h&&m&&!v&&!f)return c.t("has notifications, muted");if(p&&!h&&m&&!v&&!f)return c.t("current conversation, muted");if(!p&&!h&&m&&!v&&!f)return c.t("muted");if(p&&h&&!m&&!v&&!f)return c.t("current conversation, has notifications");if(!p&&h&&!m&&!v&&!f)return c.t("has notifications");if(p&&!h&&!m&&!v&&!f)return c.t("current conversation");return""}();if(t&&g&&y&&O)return c.t("{name} ({userInfo}), status: {status} ({context})",{name:t,userInfo:g,status:y,context:O});if(t&&!g&&y&&O)return c.t("{name}, status: {status} ({context})",{name:t,status:y,context:O});if(t&&g&&!y&&O)return c.t("{name} ({userInfo}) ({context})",{name:t,userInfo:g,context:O});if(t&&!g&&!y&&O)return c.t("{name} ({context})",{name:t,context:O});if(t&&g&&y&&!O)return c.t("{name} ({userInfo}), status: {status}",{name:t,userInfo:g,status:y});if(t&&!g&&y&&!O)return c.t("{name}, status: {status}",{name:t,status:y});if(t&&g&&!y&&!O)return c.t("{name} ({userInfo})",{name:t,userInfo:g});if(t)return t;return""}var d=a(42);var p=a(900);Object(r["a"])("interop.a11y",{makeAriaLabelForMPIM:s,makeAriaLabelForChannel:o["a"],makeAriaLabelForMember:u,isScreenReaderEnabled:d["isScreenReaderEnabled"],focusableSectionManager:p["b"]})},function(e,t,a){"use strict";a.r(t);var r={};a.r(r);a.d(r,"supportsCallWindowStatus",function(){return E});a.d(r,"setCallWindowBusy",function(){return C});a.d(r,"isCallWindowBusy",function(){return j});a.d(r,"setCallWindowToken",function(){return w});a.d(r,"clearCallWindowToken",function(){return S});a.d(r,"getCallWindowToken",function(){return I});a.d(r,"setCallWindowTeamId",function(){return T});a.d(r,"clearCallWindowTeamId",function(){return A});a.d(r,"getCallWindowTeamId",function(){return N});a.d(r,"setCallWindowTeamName",function(){return P});a.d(r,"clearCallWindowTeamName",function(){return R});a.d(r,"getCallWindowTeamName",function(){return M});a.d(r,"setIncomingCallWindowBusy",function(){return D});a.d(r,"isIncomingCallWindowBusy",function(){return x});a.d(r,"setIncomingCallWindowToken",function(){return F});a.d(r,"clearIncomingCallWindowToken",function(){return L});a.d(r,"getIncomingCallWindowToken",function(){return B});a.d(r,"setIncomingCallWindowTeamId",function(){return U});a.d(r,"clearIncomingCallWindowTeamId",function(){return q});a.d(r,"getIncomingCallWindowTeamId",function(){return G});a.d(r,"setIncomingCallWindowTeamName",function(){return W});a.d(r,"clearIncomingCallWindowTeamName",function(){return H});a.d(r,"getIncomingCallWindowTeamName",function(){return V});var n=a(3);var i=a.n(n);var s=a(44);var o=a(42);var l=a(1845);var c=a(481);var u=a(12);var d=a(4);var p=a(30);var h=a(15);var v=Object(h["b"])("Called when the client first mounts",function(e,t){Object(o["didFinishLoading"])();b(t);g();_(t);y(t);O(t);f(t)});var m=v;function f(e){setTimeout(function(){if(!Object(d["isFeatureEnabled"])(e(),"feature_desktop_logs_upload"))return;var t="ssb";var a=Object(d["getFromBootData"])(e(),"api_token");c["b"].fetch("api.features",{token:a,platform:t}).then(function(e){e&&e.features&&e.features.desktop_diagnostics_timestamp&&Object(o["getAppLogFiles"])().then(function(e){var r=e&&e.length>0?e[0]:null;if(!r)return;var n=new c["b"]({method:"profiling.addLogging",token:a,httpMethod:"POST",args:{token:a,platform:t,log_file:r}});n.send()})})},6e4)}function b(e){if(!Object(d["isFeatureEnabled"])(e(),"feature_desktop_force_production_channel"))return;Object(o["setPreference"])({name:"releaseChannel",value:"prod"})}function g(){try{if(!Object(p["isWindows"])())return;if(!Object(p["isSSBAndAtLeastVersion"])("3.2"))return;if(Object(p["isSSBAndAtLeastVersion"])("3.3"))return;if(Object(o["getPreference"])("isOpenExternalShellForced"))return;Object(o["setPreference"])({name:"isOpenExternalShellForced",value:true})}catch(e){Object(u["b"])().error("Tried to set isOpenExternalShellForced, but failed",e)}}function _(e){try{if(!Object(d["isFeatureEnabled"])(e(),"feature_desktop_notifications_2018"))return;if(!Object(p["isSSBAndAtLeastVersion"])("3.3"))return;Object(o["setPreference"])({name:"notificationTimeout",value:6e3});Object(o["setPreference"])({name:"notificationAfterHoverTimeout",value:2e3});Object(o["setPreference"])({name:"notificationMaxItems",value:8});Object(o["setPreference"])({name:"notificationStyle",value:"2018"})}catch(e){Object(u["b"])().error("Tried to set notification style for 2018, but failed",e)}}function y(e){try{Object(d["isFeatureEnabled"])(e(),"feature_desktop_sandbox_signin")&&Object(o["setPreference"])({name:"sandboxSigninWindow",value:true})}catch(e){Object(u["b"])().error("Tried to set sandboxSignin, but failed",e);Object(u["b"])().error(e.message);Object(u["b"])().error(e.stack)}}function O(e){try{if(!Object(d["isFeatureEnabled"])(e(),"feature_tinyspeck"))return;if(!Object(p["isSSBAndAtLeastVersion"])("3.3"))return;if("v2"===Object(o["getPreference"])("spellCheckerVersion"))return;Object(o["setPreference"])({name:"spellCheckerVersion",value:"v2"})}catch(e){Object(u["b"])().error("Tried to set spellchecker v2, but failed",e);Object(u["b"])().error(e.message);Object(u["b"])().error(e.stack)}}var k=a(43);function E(){return Object(o["hasDeviceStorage"])()}function C(e){Object(o["setItem"])("isCallWindowBusy",e)}var j=function(){var e=Object(k["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(k["resolve"])(Object(o["getItem"])("isCallWindowBusy"));case 3:t=a.sent;return a.abrupt("return","true"===t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return",false);case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function w(e){Object(o["setItem"])("callWindowToken",e)}function S(){Object(o["removeItem"])("callWindowToken")}var I=function(){var e=Object(k["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(k["resolve"])(Object(o["getItem"])("callWindowToken"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function T(e){Object(o["setItem"])("callWindowTeamId",e)}function A(){Object(o["removeItem"])("callWindowTeamId")}var N=function(){var e=Object(k["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(k["resolve"])(Object(o["getItem"])("callWindowTeamId"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function P(e){Object(o["setItem"])("callWindowTeamName",e)}function R(){Object(o["removeItem"])("callWindowTeamName")}var M=function(){var e=Object(k["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(k["resolve"])(Object(o["getItem"])("callWindowTeamName"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function D(e){Object(o["setItem"])("isIncomingCallWindowBusy",e)}var x=function(){var e=Object(k["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(k["resolve"])(Object(o["getItem"])("isIncomingCallWindowBusy"));case 3:t=a.sent;return a.abrupt("return","true"===t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return",false);case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function F(e){Object(o["setItem"])("incomingCallWindowToken",e)}function L(){Object(o["removeItem"])("incomingCallWindowToken")}var B=function(){var e=Object(k["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(k["resolve"])(Object(o["getItem"])("incomingCallWindowToken"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function U(e){Object(o["setItem"])("incomingCallWindowTeamId",e)}function q(){Object(o["removeItem"])("incomingCallWindowTeamId")}var G=function(){var e=Object(k["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(k["resolve"])(Object(o["getItem"])("incomingCallWindowTeamId"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();function W(e){Object(o["setItem"])("incomingCallWindowTeamName",e)}function H(){Object(o["removeItem"])("incomingCallWindowTeamName")}var V=function(){var e=Object(k["coroutine"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function e(a){while(1)switch(a.prev=a.next){case 0:a.prev=0;a.next=3;return Object(k["resolve"])(Object(o["getItem"])("incomingCallWindowTeamName"));case 3:t=a.sent;return a.abrupt("return",t);case 7:a.prev=7;a.t0=a["catch"](0);return a.abrupt("return","");case 10:case"end":return a.stop()}},e,this,[[0,7]])}));return function t(){return e.apply(this,arguments)}}();Object(s["a"])("interop.desktop",i()({},o,r,{getParsedNotificationWarnings:l["a"],onWebappBooted:m}))},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(3);var c=a.n(l);var u=a(6);var d=a.n(u);var p=a(7);var h=a.n(p);var v=a(8);var m=a.n(v);var f=a(9);var b=a.n(f);var g=a(0);var _=a(2);var y=a(10);var O=a(28);var k=a(1491);var E=a(54);var C=a(1710);var j=a(1361);var w=a(1488);var S=a(211);var I=a(22);var T=a(51);var A=a(50);var N=a(1558);var P=a(45);var R=a(355);var M=a(1816);var D=a(3242);var x=new y["b"]("pages_oauth");var F=g["b"].arrayOf(R["a"]);var L={appIsReviewed:g["b"].bool,appIsInternalIntegration:g["b"].bool,authRowIdentifier:g["b"].string.isRequired,crumbKey:g["b"].string.isRequired,appIcon:g["b"].string.isRequired,appName:g["b"].string.isRequired,teamIcon:g["b"].string.isRequired,teamName:g["b"].string.isRequired,denyUrl:g["b"].string.isRequired,safeTeamScopeInfo:F,dangerousTeamScopeInfo:F,safeChannelScopeInfo:F,dangerousChannelScopeInfo:F,needSecondStep:g["b"].bool.isRequired,needTeamPicker:g["b"].bool.isRequired,singleChannel:g["b"].bool,channelItems:g["b"].shape({channels:g["b"].object,group_channels:g["b"].object,im_channels:g["b"].object,mpim_channels:g["b"].object}),appId:g["b"].string,appType:g["b"].string,appIsInstalled:g["b"].bool,initialSelectedTeamID:g["b"].string,teamsList:g["b"].arrayOf(g["b"].shape({href:g["b"].string.required,teamId:g["b"].string.required,teamImg:g["b"].string.required,teamName:g["b"].string.required})),signInUrl:g["b"].string,switchTeamUrlPathAndQuery:g["b"].string,onTeamSelected:g["b"].func,orgName:g["b"].string,appDevelopmentTeamName:g["b"].string,teamId:g["b"].string,enterpriseId:g["b"].string,userId:g["b"].string};var B={appIsReviewed:true,appIsInternalIntegration:false,safeTeamScopeInfo:[],dangerousTeamScopeInfo:[],safeChannelScopeInfo:[],dangerousChannelScopeInfo:[],singleChannel:false,appId:void 0,appType:void 0,appIsInstalled:false,initialSelectedTeamID:void 0,teamsList:[],onTeamSelected:_["noop"],signInUrl:void 0,switchTeamUrlPathAndQuery:void 0,channelItems:{},orgName:void 0,appDevelopmentTeamName:void 0,teamId:void 0,userId:void 0,enterpriseId:void 0};var U=300;var q=function e(t){return"p-oauth_flow__channel_picker_list_item"+(t.group?"--group-title":"")};var G=function e(t,a,r){return t.map(function(e){var t={id:e.encoded_id,channelType:a};t.label="im"===a?"@"+e.username:"channel"===a||"private"===a?"#"+e.name:e.name;r&&r.find(function(t){return t.id===e.encoded_id})&&(t.preselected=true);return t})};var W=function e(t,a){var r=[];t.channels&&r.push({id:"channels",label:"Channels",group:true,children:G(Object(_["values"])(t.channels),"channel",a)});t.group_channels&&r.push({id:"group_channels",label:"Private Channels",group:true,children:G(Object(_["values"])(t.group_channels),"private",a)});if(t.im_channels||t.mpim_channels){var n=[];var i=[];t.im_channels&&(n=G(Object(_["values"])(t.im_channels),"im",a));t.mpim_channels&&(i=G(Object(_["values"])(t.mpim_channels),"mpim",a));var s=n.concat(i);r.push({id:"im_mpim_channels",label:"Direct Messages",group:true,children:s})}return r};var H=function e(t,a,r,n){var i=Object(_["compact"])(t.concat(a,r,n));return Object(_["map"])(i,function(e){return e.scopes.join(",")}).join(",")};var V=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=a.props,n=r.appId,i=r.appName,s=r.safeTeamScopeInfo,o=r.dangerousTeamScopeInfo,l=r.safeChannelScopeInfo,c=r.dangerousChannelScopeInfo,u=r.userId,p=r.teamId,h=r.enterpriseId;a.trackingProps={app_scopes:H(s,o,l,c),app_name:i,app_id:n};a.state={step:0,selectedRadioValue:"all-channels",selectedChannelValues:[],lfsInputValue:""};a.clogger=Object(P["a"])({userId:u,teamId:p,enterpriseId:h,locale:Object(y["q"])()});Object(_["bindAll"])(a,["onDenyClick","onContinueClick","onBackClick","onInputKeyUp","changeRadioButtonCheck","updateSpecificChannelsValues","setLfsRef"]);return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this.props,a=t.appIsInstalled,r=t.appId,n=t.appType;window.dataLayer=window.dataLayer||[];window.dataLayer.push({event:"AppDirectoryApp_OAuthDetails",is_installed:a,app_id:r,app_type:n});this.clogger.track("OAUTH_REVIEWS_SCOPES",this.trackingProps);this.clogger.trackForm("#oauth_authorize_confirm_form","OAUTH_AUTHORIZE_CONFIRM_FORM",this.trackingProps)}},{key:"onDenyClick",value:function e(){this.clogger.track("OAUTH_DENY",this.trackingProps)}},{key:"onContinueClick",value:function e(t){t.preventDefault();this.clogger.track("OAUTH_NEXT_PAGE",this.trackingProps);this.setState(function(){return{step:1}})}},{key:"onBackClick",value:function e(t){t.preventDefault();this.clogger.track("OAUTH_PREVIOUS_PAGE",this.trackingProps);this.setState(function(){return{step:0}})}},{key:"onInputKeyUp",value:function e(){var t=Object(_["get"])(this,"lfs.input.value","");this.setState(function(){return{lfsInputValue:t}})}},{key:"setLfsRef",value:function e(t){this.lfs=t}},{key:"updateSpecificChannelsValues",value:function e(t){this.setState(function(){return{lfsInputValue:"",selectedChannelValues:t,selectedRadioValue:"specific-channels"}})}},{key:"changeRadioButtonCheck",value:function e(t){var a=t.target.id;this.setState(function(){return{selectedRadioValue:a}})}},{key:"noWorkspaceScopesUsed",value:function e(){var t=this.props,a=t.dangerousTeamScopeInfo,r=t.safeTeamScopeInfo;return Object(_["isEmpty"])(a)&&Object(_["isEmpty"])(r)}},{key:"noChannelScopesUsed",value:function e(){var t=this.props,a=t.dangerousChannelScopeInfo,r=t.safeChannelScopeInfo;return Object(_["isEmpty"])(a)&&Object(_["isEmpty"])(r)}},{key:"isChannelInputRequired",value:function e(){var t=this.state.step;var a=this.props,r=a.appIsInstalled,n=a.singleChannel,i=a.needSecondStep,s=a.channelItems;if(Object(_["isEmpty"])(s)||this.noChannelScopesUsed())return false;if(1===t&&!n&&r)return false;if(0===t&&i&&!this.noWorkspaceScopesUsed())return false;return true}},{key:"isRequiredChannelMissing",value:function e(){var t=false;var a=this.state,r=a.selectedChannelValues,n=a.selectedRadioValue,i=a.lfsInputValue;var s=this.props.singleChannel;this.isChannelInputRequired()&&(s?t=0===r.length:"specific-channels"===n&&(t=0===r.length||i.length>0));return t}},{key:"isLastStep",value:function e(){var t=this.state.step;var a=this.props.needSecondStep;if(this.noWorkspaceScopesUsed())return true;return!a||1===t}},{key:"maybeRenderBackButton",value:function e(){var t=this.props.needSecondStep;var a=this.state.step;if(t&&1===a)return n.a.createElement(T["a"],{role:"button",className:"p-oauth_flow__nav_anchor margin_left_100 margin_top_25 position_relative",onClick:this.onBackClick},n.a.createElement(I["b"],{type:"arrow-large-left",className:"position_relative p-oauth_flow__nav_back_arrow"}));return false}},{key:"maybeRenderTeamPicker",value:function e(){var t=this.props,a=t.needTeamPicker,r=t.initialSelectedTeamID,i=t.teamsList,s=t.signInUrl,o=t.switchTeamUrlPathAndQuery;var l=this.state.step;if(a&&0===l){var u=i;o&&(u=Object(_["map"])(i,function(e){return c()({},e,{href:window.location.protocol+"//"+window.location.hostname+o+"&switch_to_team="+e.teamId})}));return n.a.createElement("div",{"data-qa":"team_switcher",className:"p-oauth_flow__team_switcher position_relative"},n.a.createElement(N["a"],{initialSelectedTeamID:r,teamsList:u,signInUrl:s}))}return false}},{key:"renderAlert",value:function e(){var t=this.props,a=t.appDevelopmentTeamName,r=t.appIsInternalIntegration,i=t.appIsReviewed,s=t.orgName,o=t.teamName;if(i)return null;var l=void 0;l=r?a?x.t("This app was created by a member of {teamName}, another workspace in {orgName}.",{orgName:Object(y["o"])(s),teamName:Object(y["o"])(a)}):x.t("This app was created by a member of your workspace, {teamName}.",{teamName:Object(y["o"])(o)}):x.rt("This app hasn\u2019t been reviewed or approved by Slack. <a>Learn More</a>.",null,function(e){var t=e.key,a=e.text;return n.a.createElement("a",{key:t,className:"p-oauth_flow__app_not_reviewed_link",href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team",target:"_blank",rel:"noopener noreferrer"},a)});return n.a.createElement(k["a"],{type:r?"neutral":"warning",showCloseButton:false,isFixedPosition:false},l)}},{key:"renderConfirmTitle",value:function e(){var t=this.props,a=t.appIsInstalled,r=t.appName,n=t.needSecondStep,i=t.singleChannel,s=t.teamName;var o=this.state.step;var l=void 0;l=1===o?i?x.rt("{appName} would like to do the following in the <strong>selected channel:</strong>",{appName:r}):a?x.rt("{appName} would like to do the following in the <strong>all channels it\u2018s a member of:</strong>",{appName:r}):x.rt("{appName} would like to do the following in the <strong>selected channels:</strong>",{appName:r}):a?this.noWorkspaceScopesUsed()?n?i?x.rt("{appName} is already installed on {teamName}, and would now also like to do the following in the <strong>selected channel:</strong>",{appName:r,teamName:s}):x.rt("{appName} is already installed on {teamName}, and would now also like to do the following in <strong>all channels it\u2019s a member of:</strong>",{appName:r,teamName:s}):this.noChannelScopesUsed()?x.t("{appName} is already installed on {teamName}.",{teamName:Object(y["o"])(s),appName:Object(y["o"])(r)}):x.t("{appName} is already installed on {teamName}, and would now also like to:",{teamName:Object(y["o"])(s),appName:Object(y["o"])(r)}):x.t("{appName} is already installed on {teamName}, and would now also like to:",{teamName:Object(y["o"])(s),appName:Object(y["o"])(r)}):x.t("On {teamName}, {appName} would like to:",{teamName:Object(y["o"])(s),appName:Object(y["o"])(r)});return l}},{key:"renderContinueOrInstallButton",value:function e(){var t=this.state.step;var a=this.props,r=a.needSecondStep,i=a.appIsInstalled,s=a.appId,o=a.appType,l=a.singleChannel;var c=this.isRequiredChannelMissing();var u=void 0;var d=void 0;var p=void 0;var h=void 0;var v=x.t("Allow");var m=x.t("Continue");var f=x.t("Install");if(0===t&&r&&!this.noWorkspaceScopesUsed()){u=m;d=this.onContinueClick;p="button"}else{u=i?this.noWorkspaceScopesUsed()&&this.noChannelScopesUsed()?m:v:f;d=function e(){window.dataLayer.push({event:"AppDirectoryApp_Authorize",is_installed:i,app_id:s,app_type:o})};p="submit"}c&&(h=l?x.t("Select channel"):x.t("Select channels"));return n.a.createElement(O["d"],{"data-qa":"oauth_flow_button_next",className:"p-oauth_flow__button",htmlType:p,onClick:d,disabled:c},u,h&&n.a.createElement(A["c"],{tip:h},n.a.createElement("div",{className:"p-oauth_flow__button_tooltip_target"})))}},{key:"renderChannelSelections",value:function e(){var t=this.state,a=t.selectedChannelValues,r=t.selectedRadioValue;var i=this.props,s=i.channelItems,o=i.appName;var l=x.t("Select channels");var c=x.t("All Public Channels");var u=x.t("Any channel accessible to full members of your team.");var d=x.t("Specific channels");var p=x.t("Search for channels");var h=x.t("No channels");var v=x.t("{app_name} will still be able to access a private conversation with you",{app_name:o});var m=W(s,a);var f=a.map(function(e){return'"'+e.id+'"'}).join(",");return n.a.createElement("div",{className:"margin_auto no_right_padding"},n.a.createElement("div",{className:"large_top_margin"},n.a.createElement("p",{className:"p-oauth_flow__para bold"},l),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(E["a"],{text:c,htmlFor:"all-channels",type:"inline",subtext:u,cursor:"pointer"},n.a.createElement(S["a"],{name:"channels",id:"all-channels",value:"['*']",checked:"all-channels"===r,onChange:this.changeRadioButtonCheck}))),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement("label",{htmlFor:"specific-channels",className:"c-label c-label--inline c-label--pointer margin_bottom_100"},n.a.createElement("div",{className:"c-label__text full_width"},n.a.createElement("span",{className:"bold"},d)),n.a.createElement("input",{id:"specific-channels",className:"c-input_radio",type:"radio",name:"channels",value:"["+f+"]",checked:"specific-channels"===r,onChange:this.changeRadioButtonCheck})),n.a.createElement("div",{className:"margin_left_150 margin_top_50 p-oauth_flow__lazy-filter-select-container"},n.a.createElement(j["a"],{ref:this.setLfsRef,items:m,scrollThreshold:U,placeholderText:p,onKeyUp:this.onInputKeyUp,onValueChange:this.updateSpecificChannelsValues,listItemClass:q}))),n.a.createElement("div",{className:"margin_bottom_100"},n.a.createElement(E["a"],{text:h,htmlFor:"no-channels",type:"inline",subtext:v,cursor:"pointer"},n.a.createElement(S["a"],{name:"channels",id:"no-channels",value:"[]",checked:"no-channels"===r,onChange:this.changeRadioButtonCheck})))))}},{key:"renderSingleChannelPicker",value:function e(){var t=this.props,a=t.channelItems,r=t.needSecondStep;var i=this.state.selectedChannelValues;var s=i.map(function(e){return e.id});var o=W(a,i);var l=x.t("Post to");var c=x.t("Select Channel");var u=n.a.createElement(j["a"],{ref:this.setLfsRef,items:o,scrollThreshold:U,placeholderText:c,onValueChange:this.updateSpecificChannelsValues,listItemClass:q,single:true});return r?n.a.createElement("div",{className:"margin_top_200"},n.a.createElement("p",{className:"p-oauth_flow__para bold"},x.t("Select a channel")),n.a.createElement("div",{className:"p-oauth_flow__lazy-filter-select-container"},u),n.a.createElement("input",{type:"hidden",name:"channel",value:s})):n.a.createElement("div",{className:"p-oauth_flow__single_channel_picker display_flex align_items_center"},n.a.createElement("span",{className:"margin_right_50"},l),n.a.createElement("div",{className:"flex_one p-oauth_flow__lazy-filter-select-container"},u),n.a.createElement("input",{type:"hidden",name:"channel",value:s}))}},{key:"renderSingleChannelOrChannelSelections",value:function e(){var t=this.state.step;var a=this.props,r=a.appIsInstalled,n=a.singleChannel,i=a.needSecondStep,s=a.channelItems;if(Object(_["isEmpty"])(s)||this.noChannelScopesUsed())return null;if(1===t){if(!n&&r)return null}else if(i&&!this.noWorkspaceScopesUsed())return null;return n?this.renderSingleChannelPicker():this.renderChannelSelections()}},{key:"render",value:function e(){var t=this.state.step;var a=this.props,r=a.appIcon,i=a.appName,s=a.teamIcon,o=a.teamName,l=a.safeTeamScopeInfo,c=a.dangerousTeamScopeInfo,u=a.safeChannelScopeInfo,d=a.dangerousChannelScopeInfo,p=a.authRowIdentifier,h=a.crumbKey,v=a.denyUrl,m=a.needSecondStep;var f={appIcon:r,appName:i,teamIcon:s,teamName:o};var b=void 0;b=0!==t||this.noWorkspaceScopesUsed()&&m?u.concat(d):Object(_["compact"])(l.concat(c));var g=x.t("Cancel");return n.a.createElement("div",null,this.renderAlert(),n.a.createElement("header",{className:"p-oauth_flow__nav"},n.a.createElement("div",{className:"p-oauth_flow__nav_back"},this.maybeRenderBackButton()),n.a.createElement("div",{className:"p-oauth_flow__nav_back clearfix"},this.maybeRenderTeamPicker())),n.a.createElement("section",{className:"p-oauth_flow__header align_center"},n.a.createElement(M["a"],f),n.a.createElement("h3",{className:"p-oauth_flow__title normal","data-qa":"oauth_page_title"},this.renderConfirmTitle())),n.a.createElement("section",{className:"p-oauth_flow__body"},n.a.createElement("form",{id:"oauth_authorize_confirm_form",name:"oauth-confirm",action:"/oauth/"+p,method:"post","accept-encoding":"UTF-8"},n.a.createElement("input",{type:"hidden",name:"create_authorization",value:"1"}),n.a.createElement("input",{type:"hidden",name:"crumb",value:h}),n.a.createElement("div",{className:"p-oauth_flow__scopes_container"},n.a.createElement(w["a"],{scopeInfo:b}),this.renderSingleChannelOrChannelSelections(),n.a.createElement("div",{className:"p-oauth_flow__buttons_container"},n.a.createElement(O["d"],{type:"outline",onClick:this.onDenyClick,href:v,className:"p-oauth_flow__button",target:"_self"},g),this.renderContinueOrInstallButton())))))}}]);return t}(r["PureComponent"]);V.displayName="OAuthConfirm";V.defaultProps=B;V.displayName="OAuthConfirm";var K=V;var z=a(163);var Y=function e(t,a,r){if(!t)throw new Error("mountOAuthConfirm must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["d"])(t)},n.a.createElement(z["a"],null,n.a.createElement(K,r))),a)};var Q=Y;var J=a(44);Object(J["a"])("interop.mountOAuthConfirm",Q)},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(27);var c=a(44);var u=a(6);var d=a.n(u);var p=a(7);var h=a.n(p);var v=a(8);var m=a.n(v);var f=a(9);var b=a.n(f);var g=a(0);var _=a(2);var y=a(138);var O=a(159);var k=a(54);var E=a(687);var C=a(126);var j=a(10);var w=new j["b"]("enterprise_moving_channels");var S=/\r?\n|\r/g;var I={onInputChange:g["b"].func,onCheckboxChange:g["b"].func,customMessageError:g["b"].string,featureDeleteMovedChannels:g["b"].bool.isRequired};var T={onInputChange:_["noop"],onCheckboxChange:_["noop"],customMessageError:null};var A=300;var N=void 0;var P=function e(t){return N[t]};var R=function e(t){t&&t.length>A?Object(O["b"])(Object(O["a"])().channels.setMoveChannelMessageError("message_too_long")):Object(O["b"])(Object(O["a"])().channels.setMoveChannelMessageError())};var M=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={includeCustomMessage:false,customMessage:""};a.onInputChange=a.onInputChange.bind(a);a.onKeyDown=a.onKeyDown.bind(a);a.onCheckboxChange=a.onCheckboxChange.bind(a);a.props.featureDeleteMovedChannels&&(N={message_too_long:w.t("That\u2019s a bit too long. Messages must be fewer than {maxlength} characters.",{maxlength:A}),message_empty:w.t("Please fill in a custom message.")});return a}h()(t,[{key:"onKeyDown",value:function e(t){13===t.keyCode&&t.preventDefault()}},{key:"onInputChange",value:function e(t){var a=t.replace(S," ");this.setCustomMessage(a);this.props.onInputChange(a);R(a)}},{key:"onCheckboxChange",value:function e(t){t.persist();var a=t.target.checked;this.setIncludeCustomMessage(a);this.props.onCheckboxChange(a);a?R(this.state.customMessage):Object(O["b"])(Object(O["a"])().channels.setMoveChannelMessageError())}},{key:"setIncludeCustomMessage",value:function e(t){this.setState(function(){return{includeCustomMessage:t}})}},{key:"setCustomMessage",value:function e(t){this.setState(function(){return{customMessage:t}})}},{key:"renderCheckbox",value:function e(){if(!this.props.featureDeleteMovedChannels)return null;var t=this.state.includeCustomMessage;var a=w.t("Add a custom message to channel members");var r=w.t("This message will appear within the Slackbot notification that each member will receive.");return n.a.createElement("div",null,n.a.createElement(k["a"],{htmlFor:"mvch_message_checkbox",className:"p-move_channels_msg__label",cursor:"pointer",text:a,subtext:r,type:"inline"},n.a.createElement(C["a"],{id:"mvch_message_checkbox",checked:t,onChange:this.onCheckboxChange,"data-qa":"mvch_message_checkbox"})))}},{key:"renderCustomMessageTextarea",value:function e(){if(!this.props.featureDeleteMovedChannels)return null;var t=this.state.customMessage;var a=this.props.customMessageError;var r=w.rt("<b>*bold*</b> <i>_italics_</i> and links are allowed. Line breaks aren\u2019t supported for this message.");return n.a.createElement("div",{className:"margin_left_150"},n.a.createElement(E["a"],{id:"ent_mvch_custom_message","data-qa":"ent_mvch_custom_message_input",resize:"none",name:"move_channels_custom_message_input",value:t,hintText:r,maxCharacterLimit:A,onChange:this.onInputChange,onKeyDown:this.onKeyDown,errorText:P(a)||a,errorLevel:"warning",isRequired:true}))}},{key:"render",value:function e(){if(!this.props.featureDeleteMovedChannels)return null;var t=this.state.includeCustomMessage;return n.a.createElement("div",{"data-qa":"ent_mvch_custom_message"},this.renderCheckbox(),t&&this.renderCustomMessageTextarea())}}]);return t}(r["PureComponent"]);M.displayName="MoveChannelsCustomMessage";M.defaultProps=T;var D=Object(y["a"])("feature_delete_moved_channels")(M);var x=D;Object(c["a"])("interop.moveChannelsCustomMessage",{render:function e(t,a,r){if(!t)throw new Error("moveChannelsCustomMessage render must be called with a teamId parameter");var i=Object(l["d"])(t);s.a.render(n.a.createElement(o["Provider"],{store:i},n.a.createElement(x,r)),a)},stop:function e(t){s.a.unmountComponentAtNode(t)}})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(2);var i=a(12);var s=a(71);var o="CDN-DOWNLOAD-TEST";var l="https://a.slack-edge.com/bv1-4/cdn-download-test.838a524ba45462f63be8.min.js";var c="[1][3262]";function u(){var e=Object(i["b"])({label:o});e.info("Running test");var t=Object(s["a"])();var a=(Date.now()*Math.random()).toString(36);var r=l+"?_x="+a;var u=function a(){var i=Object(n["snakeCase"])(o+" success");t.count(i);e.info(r+" SUCCESS")};var d=function a(){var i=Object(n["snakeCase"])(o+" failure");t.count(i);e.info(r+" FAILED");e.error(i,"CDN download test failed: "+r)};var p=document.createElement("script");p.setAttribute("type","text/javascript");p.setAttribute("src",r);p.onload=function(){try{Object(n["get"])(Object(n["find"])(window.webpackJsonp,c),c)()}catch(e){return}window.cdnDownloadTestWorked?u(r):d(r)};p.onerror=function(){d(r)};document.body.appendChild(p)}Object(r["a"])("interop.runCdnDownloadTest",u)},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(2);var i=a.n(n);var s=a(4);var o=a(797);var l=a(45);var c=a(456);var u=0;var d=6e4;var p=["focus","focusin","touchstart","mousedown","mouseup","wheel","keydown","keyup","beforeinput","input","scroll","compositionstart","compositionupdate","compositionend"];function h(e){if(!Object(s["isFeatureEnabled"])(e(),"feature_track_time_spent"))return i.a.noop;var t={capture:true,passive:true};var a=function t(){return m(e)};var r=setInterval(a,d);var n=i.a.throttle(function(){document.hasFocus&&document.hasFocus()&&Object(c["e"])(Object(c["c"])(e()))},5e3,{leading:true,trailing:true});p.forEach(function(e){window.addEventListener(e,n,t)});var o=function e(){p.forEach(function(e){window.removeEventListener(e,n,t)});clearInterval(r)};return o}function v(e){return{uid:e.id,timestamp_start:Object(o["a"])(e.startTime),timestamp_refresh:Object(o["a"])(e.lastActivity),version:u}}function m(e){var t=e();var a=Object(c["a"])(Object(c["c"])(t));var r=Object(l["a"])({state:t});i.a.each(a,function(e){null===e.lastLogged?r.track("SESSION_START",{client_session:v(e)}):e.isActive&&e.needsRefresh&&r.track("SESSION_REFRESH",{client_session:v(e)});e.isActive||r.track("SESSION_END",{client_session:v(e)})})}Object(r["a"])("interop.activity_session",{listenForUserEvents:function e(){return h(TS.redux.getState)},recordUserActivity:c["e"]})},function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a(24);var i=a(259);var s=a(712);var o=a(1061);var l=a(1546);var c=a(447);var u=a(23);var d=a(34);var p=a(359);var h=a(1741);var v=a(230);var m=a(17);var f=a(1475);var b=a(1476);var g=a(242);var _=a(338);function y(e,t){var a=Object(_["e"])(e);var r=Object(_["e"])(t);return Object(g["a"])(a,r)}var O=a(44);function k(e){var t=TS.redux.getState();return Object(n["d"])(t,e)}function E(e){var t=e;e&&"@"===e[0]&&(t=e.substring(1));var a=TS.redux.getState();var r=Object(n["d"])(a,t);if(!r)return null;if(r.isUnknown)return null;if(r.isNonExistent)return null;return r}function C(e){var t=e;e&&"@"===e[0]&&(t=e.substring(1));var a=TS.redux.getState();var r=Object(n["i"])(a,t);if(!r)return null;if(r.isUnknown)return null;if(r.isNonExistent)return null;return r}function j(e){return Object(r["isString"])(e)?E(e):e}function w(e){return Object(s["b"])(TS.redux.getState(),e)}function S(e){return TS.redux.dispatch(Object(v["a"])(e))}function I(e){return TS.redux.dispatch(Object(v["d"])(e))}function T(e){return TS.redux.dispatch(Object(v["c"])(e))}function A(e){return TS.redux.dispatch(Object(l["a"])(e))}function N(e){return TS.redux.dispatch(Object(o["a"])(e))}function P(e){return TS.redux.dispatch(Object(i["b"])(e))}function R(e){return TS.redux.dispatch(Object(i["c"])(e))}function M(e){var t=TS.redux.getState();var a=Object(u["c"])(t);Object(c["b"])(a,e)}function D(e){var t=TS.redux.getState();var a=Object(u["c"])(t);return Object(c["a"])(a,e)}function x(){return Object(c["e"])()}function F(e,t){return TS.redux.dispatch(Object(f["a"])({teamId:e,fields:t}))}function L(e,t){return TS.redux.dispatch(Object(b["a"])({teamId:e,fieldsToDelete:t}))}Object(O["a"])("interop.members",{getMemberById:E,getPotentiallyUnknownMemberById:k,getRawMemberById:C,dangerouslyAddMember:P,dangerouslyBulkAddMembers:R,membersSelectorsTest:n["p"],shouldDisplayRealNames:function e(){return Object(d["g"])(TS.redux.getState())},getCurrentMember:function e(){return Object(n["b"])(TS.redux.getState())},getUserHighlightWords:function e(){return Object(p["a"])(TS.redux.getState())},getPrefCompliantMemberName:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return m["getPrefCompliantMemberName"].apply(void 0,[TS.redux.getState()].concat(a))},getPrefCompliantMemberNameById:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return m["getPrefCompliantMemberNameById"].apply(void 0,[TS.redux.getState()].concat(a))},getPrefCompliantMemberNameLowerCase:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return m["getPrefCompliantMemberNameLowerCase"].apply(void 0,[TS.redux.getState()].concat(a))},getMemberByName:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return n["e"].apply(void 0,[TS.redux.getState()].concat(a))},getMemberByEmail:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return n["c"].apply(void 0,[TS.redux.getState()].concat(a))},memberExistsWithName:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return n["o"].apply(void 0,[TS.redux.getState()].concat(a))},hasMemberWithId:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return n["j"].apply(void 0,[TS.redux.getState()].concat(a))},getAllMembers:function e(){return Object(n["a"])(TS.redux.getState())},isAppmin:function e(){return Object(n["k"])(TS.redux.getState())},isExternal:m["isExternal"],isExternalById:function e(t){return Object(m["isExternalById"])(TS.redux.getState(),t)},isMember:m["isMember"],isMemberOnTeam:m["isMemberOnTeam"],fetchMemberProfileExtras:function e(t,a){return TS.redux.dispatch(Object(v["e"])({userId:t,keys:a}))},memberSorterByName:y,getMemberCurrentStatus:n["f"],getMemberMentionName:m["getMemberMentionName"],getMemberMentionRegExp:m["getMemberMentionRegExp"],getMemberRealName:function e(t){return Object(m["getMemberRealName"])(j(t))},getMemberRealNameLowerCase:function e(t){return Object(m["getMemberRealNameLowerCase"])(j(t))},getMemberProfileFieldDisplayName:function e(t){return Object(m["getMemberProfileFieldDisplayName"])(j(t))},getMemberProfileFieldDisplayNameLowerCase:function e(t){return Object(m["getMemberProfileFieldDisplayNameLowerCase"])(j(t))},getMemberSecondaryName:function e(t){return Object(m["getMemberSecondaryName"])(TS.redux.getState(),j(t))},ensureMembersArePresent:function e(t){return TS.redux.dispatch(Object(h["a"])({memberIds:t}))},processMemberForUpserting:w,fetchAndUpsertMembersById:S,fetchAndUpsertMembersWithQuery:I,fetchAndUpsertMembersFromFlannel:T,markObjectsAsFresh:M,isObjectFresh:D,pauseRefetch:x,updateCurrentMemberPresence:N,updateCurrentMemberProfile:A,updateProfileFields:F,deleteProfileFields:L,canMemberJoinChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return m["canMemberJoinChannel"].apply(void 0,[TS.redux.getState()].concat(a))},canMemberBeInvitedToChannel:function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return m["canMemberBeInvitedToChannel"].apply(void 0,[TS.redux.getState()].concat(a))}})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(88);var o=a.n(s);var l=a(119);var c=a(27);var u=a(1827);var d=a(163);var p=function e(t,a,r){if(!t)throw new Error("mountUserGroupsFlexpane must be called with a teamId parameter");var s=Object(c["d"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(d["a"],null,n.a.createElement(u["a"],r))),a)};var h=function e(t){o.a.unmountComponentAtNode(t)};var v=a(44);Object(v["a"])("interop.mountUserGroupsList",p);Object(v["a"])("interop.unmountUserGroupsList",h)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(1561);var d=a(163);function p(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountFileUploadBanner must be called with a teamId parameter");var r=Object(c["d"])(e);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(d["a"],null,n.a.createElement(u["a"],a))),t)}function h(e){s.a.unmountComponentAtNode(e)}var v=a(44);Object(v["a"])("interop.mountFileUploadBanner",p);Object(v["a"])("interop.unmountFileUploadBanner",h)},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(334);var i=a(2);var s=a(1269);var o=/[,\uff0c\u3001]/;function l(e){if(!Object(i["isString"])(e))return"";return Object(s["a"])(e).split(o).map(i["trim"]).filter(i["identity"]).join(",")}var c=a(132);var u=a(34);var d=a(333);var p=a(359);var h=a(1738);var v=a(305);var m=a(1206);var f=a(68);var b=a(1218);var g=a(1222);var _=a(1069);var y=a(1279);function O(){return TS.redux.dispatch(d["b"].apply(void 0,arguments))}function k(){return TS.redux.dispatch(d["c"].apply(void 0,arguments))}function E(){return TS.redux.dispatch(d["a"].apply(void 0,arguments))}function C(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return v["d"].apply(void 0,[TS.redux.getState()].concat(t))}function j(){return Object(v["a"])(TS.redux.getState())}function w(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return v["c"].apply(void 0,[TS.redux.getState()].concat(t))}function S(){return TS.redux.dispatch(m["b"].apply(void 0,arguments))}function I(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return f["a"].apply(void 0,[TS.redux.getState()].concat(t))}function T(){return TS.redux.dispatch(b["a"].apply(void 0,arguments))}function A(){return TS.redux.dispatch(g["b"].apply(void 0,arguments))}function N(){return TS.redux.dispatch(_["b"].apply(void 0,arguments))}function P(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return u["f"].apply(void 0,[TS.redux.getState()].concat(t))}function R(e){return Object(y["a"])(TS.redux.getState(),e)}Object(r["a"])("interop.prefs",{setUserPref:O,setUserPrefs:k,setMultipleUserPrefs:E,getNotificationsGlobalPref:C,getAllNotificationOverrides:j,getNotificationsChannelPref:w,setChannelNotificationOverrideAndCallApi:S,getTeamPref:I,setTeamPrefs:A,setTeamPref:T,setEnterprisePrefs:N,getOrgPref:R,getHighlightWords:function e(){var t=TS.redux.getState();return Object(p["a"])(t)},getUserGroupHighlightById:n["d"],cleanHighlightWords:l,setUserPrefByApi:c["c"],getUserPref:P,getReadStateTrackingPref:function e(){return Object(h["a"])(TS.redux.getState())}})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(3);var i=a.n(n);var s=a(1);var o=a.n(s);var l=a(88);var c=a.n(l);var u=a(13);var d=a(2);var p=a(119);var h=a(27);var v=a(1485);var m=a(163);var f=function e(t,a){var r=document.getElementById("pricing_plans_modal_mount_point");if(!r)throw new Error("Could not find a valid pricing plans modal mount point.");if(!t)throw new Error("mountPricingPlansModal must be called with a valid teamId parameter.");var n=Object(h["d"])(t);var s=function e(){Object(d["defer"])(function(){c.a.unmountComponentAtNode(r)})};Object(p["a"])(o.a.createElement(u["Provider"],{store:n},o.a.createElement(m["a"],null,o.a.createElement(v["a"],i()({},a,{onClose:s})))),r)};var b={mountPricingPlansModal:f};Object(r["a"])("interop.mountPricingPlansModal",f)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(1098);var d=a(163);var p=function e(t,a){if(!t)throw new Error("mountModalContainer must be called with a teamId parameter");var r=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(d["a"],null,n.a.createElement(u["a"],null))),a)};var h=function e(t){s.a.unmountComponentAtNode(t)};var v={mountModalContainer:p,unmountModalContainer:h};var m=a(44);Object(m["a"])("interop.modalContainer",{mountModalContainer:p,unmountModalContainer:h})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(1843);function d(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountMessagePaneDragOverlay must be called with a teamId parameter");var r=Object(c["d"])(e);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(u["a"],a)),t)}function p(e){s.a.unmountComponentAtNode(e)}var h=a(44);Object(h["a"])("interop.mountMessagePaneDragOverlay",d);Object(h["a"])("interop.unmountMessagePaneDragOverlay",p)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(1689);var c=a(163);function u(e,t,a){if(!e)throw new Error("mountPricingCalculator must be called with a teamId parameter");var r=Object(o["d"])(e);Object(s["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(c["a"],null,n.a.createElement(l["a"],a))),t)}var d=a(44);Object(d["a"])("interop.mountPricingCalculator",u)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(1842);var c=a(163);var u=function e(t,a,r){if(!t)throw new Error("mountNotificationBar must be called with a teamId parameter");var u=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:u},n.a.createElement(c["a"],null,n.a.createElement(l["a"],r))),a)};var d={mountNotificationBar:u};var p=a(44);Object(p["a"])("interop.mountNotificationBar",u)},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(1);var i=a.n(n);var s=a(13);var o=a(119);var l=a(27);var c=a(1819);var u=a(277);var d=a(163);function p(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{isOpen:false};if(!e)throw new Error("mountMessageActionsMenu must be called with a teamId parameter");Object(o["a"])(i.a.createElement(s["Provider"],{store:Object(l["d"])(e)},i.a.createElement(d["a"],null,i.a.createElement(u["a"],r,r.isOpen?i.a.createElement(c["a"],a):i.a.createElement("span",null)))),t)}var h=p;var v=a(39);Object(r["a"])("interop.mountMessageActionsMenu",h);Object(r["a"])("interop.mountMessageActionsMenu.actionIds",v["SLACK_ACTION_IDS"])},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(1226);var d=a(71);var p=a(163);var h=function e(t,a,r){if(!t)throw new Error("mountCustomStatusInput must be called with a teamId parameter");var i=Object(c["d"])(t);var s=Object(d["c"])({state:i.getState()});var h="react_custom_status_input_render";s.mark(h+"_mark");Object(l["a"])(n.a.createElement(o["Provider"],{store:i},n.a.createElement(p["a"],null,n.a.createElement(u["c"],r))),a,function(){return s.measureAndClear(h+"_mark",h)})};var v=s.a.unmountComponentAtNode;var m=a(44);Object(m["a"])("interop.mountCustomStatusInput",h);Object(m["a"])("interop.unmountCustomStatusInput",v)},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(277);var d=a(1483);var p=a(71);var h=a(163);var v=function e(t,a,r,i){if(!t)throw new Error("mountEmojiPicker must be called with a teamId parameter");var v=Object(c["d"])(t);var m=Object(p["c"])({state:v.getState()});var f="react_emoji_menu_render";m.mark(f+"_mark");Object(l["a"])(s.a.createElement(o["Provider"],{store:v},s.a.createElement(h["a"],null,s.a.createElement(u["a"],n()({shouldFade:false},i),s.a.createElement(d["a"],r)))),a,function(){return m.measureAndClear(f+"_mark",f)})};var m=v;var f=a(44);Object(f["a"])("interop.mountEmojiPicker",m)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(1688);var d=a(163);var p=function e(t,a){if(!t)throw new Error("mountBannerContainer must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(d["a"],null,n.a.createElement(u["a"],null))),a)};var h=function e(t){s.a.unmountComponentAtNode(t)};var v=a(44);Object(v["a"])("interop.mountMessagePaneBanner",p);Object(v["a"])("interop.unmountMessagePaneBanner",h)},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(196);var i=a(116);var s=a(273);var o=a(1693);var l=a(758);var c=a(850);var u=a(1792);var d=a(1);var p=a.n(d);var h=a(88);var v=a.n(h);var m=a(13);var f=a(2);var b=a(119);var g=a(27);var _=a(3952);var y=a(163);var O=function e(){return document.getElementById("search_popover_container")};var k=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O();if(!t)throw new Error("mountSearch must be called with a teamId parameter");Object(b["a"])(p.a.createElement(m["Provider"],{store:Object(g["d"])(t)},p.a.createElement(y["a"],null,p.a.createElement(_["a"],{onClickRefreshSearch:f["noop"]}))),a)};var E=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O();v.a.unmountComponentAtNode(t)};var C={mountPrimarySearch:k};var j=a(531);var w=a(366);var S=a(198);var I=function e(t){return function(){return TS.redux.dispatch(t.apply(void 0,arguments))}};Object(r["a"])("interop.searchUi",{getVisible:function e(){return Object(n["o"])(TS.redux.getState())}});Object(r["a"])("interop.searchInputBox",{getSearchInputBoxDisplayQuery:function e(){return Object(s["getSearchInputBoxDisplayQuery"])(TS.redux.getState())},getInFilterTextyString:function e(t){return Object(o["a"])(TS.redux.getState(),t)}});Object(r["a"])("interop.searchActions",{close:I(l["a"]),setFocusedViaTabKey:I(i["o"]),openFromCmdF:I(c["b"]),openFromCmdG:I(c["c"]),toggleFromQuickSwitcherCmd:I(u["a"]),openFromClick:I(c["a"]),openFromSlashCommand:I(c["g"]),openFromKeyDown:I(c["e"]),openFromFilesMenu:I(c["d"])});Object(r["a"])("interop.mountPrimarySearch",k);Object(r["a"])("interop.unmountPrimarySearch",E);Object(r["a"])("interop.usePrimarySearch",function(){return Object(j["a"])(TS.redux.getState())});Object(r["a"])("interop.isExperimentAnyOmniSwitcher",function(){return Object(w["a"])(TS.redux.getState())});Object(r["a"])("interop.isExperimentOmniSwitcher",function(){return Object(w["b"])(TS.redux.getState())});Object(r["a"])("interop.isExperimentSearchSwitcher",function(){return Object(w["e"])(TS.redux.getState())});Object(r["a"])("interop.isSearchAutocompleteOpen",function(){return Object(S["isSearchAutocompleteOpen"])(TS.redux.getState())})},function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a.n(r);function i(e){if(e._last_query!==e.query)return true;if(e._last_include_org!==e.include_org)return true;if(n.a.xor(e._last_org_team_ids,e.org_team_ids).length)return true;return false}var s=a(1314);var o=a(290);var l=a(443);var c=a(44);Object(c["a"])("interop.searcher",{isNewMemberSearch:i,emojiSkiplist:s["a"],search:o["a"],recordFrecencyEvent:l["c"]})},function(e,t,a){"use strict";a.r(t);var r=a(37);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(88);var l=a.n(o);var c=a(13);var u=a(119);var d=a(27);var p=a(782);var h=function e(t,a,r){if(!t)throw new Error("mountScrollbar must be called with a teamId parameter");var i=Object(d["d"])(t);var o=r.safeHtml,l=n()(r,["safeHtml"]);Object(u["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(p["b"],l,s.a.createElement("div",{dangerouslySetInnerHTML:{__html:o}}))),a)};var v=function e(t){l.a.unmountComponentAtNode(t)};var m={mountScrollbar:h,unmountScrollbar:v};var f=a(44);Object(f["a"])("interop.mountScrollbar",h);Object(f["a"])("interop.unmountScrollbar",v)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(893);var c=function e(t,a,r){if(!t)throw new Error("mountLazyFilterSelect must be called with a teamId parameter");var c=Object(o["d"])(t);Object(s["a"])(n.a.createElement(i["Provider"],{store:c},n.a.createElement(l["a"],r)),a)};var u=c;var d=a(44);Object(d["a"])("interop.mountLazyFilterSelect",u)},function(e,t,a){"use strict";a.r(t);var r=a(1481);var n=a(1155);var i=a(14);var s=Object(i["b"])(function(e){return e&&e.persistenceHashes});a.d(t,"setPersistenceHashes",function(){return n["a"]});a.d(t,"getPersistenceHashes",function(){return s});var o=t["default"]=r["a"]},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(1086);var i=a(896);var s=a(708);var o=a(1162);var l=a(2);var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,a=e.prefix,r=e.suffix;if(!t)return t;var n=t;if(a&&!Object(l["startsWith"])(n,a)){var i=n.search(/\S/);n=i>0?n.slice(0,i)+a+n.slice(i):a+n}if(r&&!Object(l["endsWith"])(n,r)){var s=n.search(/\s+$/);s>0?n=n.slice(0,s)+r+n.slice(s):n+=r}return n};var u=a(1269);var d=a(352);Object(r["a"])("interop.format",{formatBroadcastCommand:n["a"],formatChannelName:i["a"],formatTeamName:s["a"],locateHighlightWords:o["a"],surroundTextWith:c,replaceUnicodeDoppelgangers:u["a"],cleanMessageTextWithState:d["b"]})},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(88);var l=a.n(o);var c=a(13);var u=a(2);var d=a(119);var p=a(27);var h=a(1821);var v=a(163);var m=function e(t,a){var r=document.getElementById("invite_modal_mount_point");if(!r)throw new Error("Could not find a valid invite modal mount point.");if(!t)throw new Error("mountInviteModal must be called with a valid teamId parameter.");var i=Object(p["d"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(v["a"],null,s.a.createElement(h["a"],n()({},a,{onClose:o})))),r)};var f={mountInviteModal:m};var b=a(44);Object(b["a"])("interop.mountInviteModal",m)},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(1552);function d(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("mountThreadDragOverlay must be called with a teamId parameter");var r=Object(c["d"])(e);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(u["a"],a)),t)}function p(e){s.a.unmountComponentAtNode(e)}var h=a(44);Object(h["a"])("interop.mountThreadDragOverlay",d);Object(h["a"])("interop.unmountThreadDragOverlay",p)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(1822);var d=a(163);var p=function e(t,a,r){var i=r.image,s=r.onDidZoomLevelChange;if(!t)throw new Error("mountImageViewer must be called with a teamId parameter");var p=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:p},n.a.createElement(d["a"],null,n.a.createElement(u["a"],{image:i,onDidZoomLevelChange:s}))),a)};var h=function e(t){s.a.unmountComponentAtNode(t)};var v=a(44);Object(v["a"])("interop.mountImageViewer",p);Object(v["a"])("interop.unmountImageViewer",h)},,function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(88);var l=a.n(o);var c=a(13);var u=a(2);var d=a(119);var p=a(27);var h=a(1555);var v=a(163);var m=function e(t,a){var r=document.getElementById("help_modal_mount_point");if(!r)throw new Error("Could not find a valid help modal mount point.");if(!t)throw new Error("mountHelpModal must be called with a valid teamId parameter.");var i=Object(p["d"])(t);var o=function e(){Object(u["defer"])(function(){l.a.unmountComponentAtNode(r)})};Object(d["a"])(s.a.createElement(c["Provider"],{store:i},s.a.createElement(v["a"],null,s.a.createElement(h["a"],n()({},a,{onClose:o})))),r)};var f={mountHelpModal:m};var b=a(44);Object(b["a"])("interop.mountHelpModal",m)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(88);var o=a.n(s);var l=a(119);var c=a(27);var u=a(1690);var d=a(163);var p=function e(t,a,r){if(!t)throw new Error("mountToast must be called with a teamId parameter");var s=Object(c["d"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:s},n.a.createElement(d["a"],null,n.a.createElement(u["a"],r))),a)};var h=function e(t){o.a.unmountComponentAtNode(t)};var v={mountTermsOfService:p,unmountTermsOfService:h};var m=a(44);Object(m["a"])("interop.mountTermsOfService",p);Object(m["a"])("interop.unmountTermsOfService",h)},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(855);var d=a(289);var p=function e(t,a,r,i){if(!t)throw new Error("mountTooltipTip must be called with a teamId parameter");var s=Object(c["d"])(t);r?Object(l["a"])(n.a.createElement(o["Provider"],{store:s},n.a.createElement(u["a"],i,n.a.createElement(d["b"],{id:r,size:"small",showAvatar:true,useDarkMode:true,showPresence:true,forcedPrimary:"real_name"}))),a):Object(l["a"])(n.a.createElement(o["Provider"],{store:s},n.a.createElement(u["a"],i)),a)};var h=function e(t){s.a.unmountComponentAtNode(t)};var v={mountTooltipTip:p,unmountTooltipTip:h};var m=a(44);Object(m["a"])("interop.mountTooltipTip",p);Object(m["a"])("interop.unmountTooltipTip",h)},function(e,t,a){"use strict";a.r(t);var r=a(2);var n=a(45);var i=a(12);var s=a(1507);var o=Object(i["b"])();function l(e,t){return new Promise(function(a){Object(s["a"])("experiments.getByInvite",{encoded_invite_id:e,domain:t},function(e,t){e&&t.assignments&&m(t.assignments);a(e)})})}function c(){return new Promise(function(e){Object(s["a"])("experiments.getByVisitor",{},function(t,a){t&&a.assignments&&m(a.assignments);e(t)})})}function u(e){if(void 0===e){o.warn("fetchLeadAssignments requires a leadId");return Promise.resolve(false)}return new Promise(function(t){Object(s["a"])("experiments.getByLead",{lead_id:e},function(e,a){e&&a.assignments&&m(a.assignments);t(e)})})}function d(e){if(void 0===e){o.warn("fetchUserAssignments requires a token");return Promise.resolve(false)}return new Promise(function(t){Object(s["a"])("experiments.getByUser",{token:e},function(e,a){e&&a.assignments&&m(a.assignments);t(e)})})}var p={};var h={};function v(e){var t=p[e];if(!t)return null;t.log_exposures&&f(e,t);return t.group}function m(e){Object(r["forEach"])(e,function(e,t){Object(r["isEqual"])(h[t],e)||(h[t]=null);p[t]=e})}function f(e,t){if(!Object(r["isEqual"])(h[e],t)){Object(n["a"])().track("EXPERIMENT_EXPOSURE",{experiment_name:e,experiment_type:t.type,experiment_id:t.experiment_id,experiment_group:t.group,experiment_trigger:t.trigger,exposure_id:t.exposure_id});h[e]=t}}var b=a(44);Object(b["a"])("interop.experiments_unauthed",{fetchInviteAssignments:l,fetchLeadAssignments:u,fetchVisitorAssignments:c,fetchUserAssignments:d,getGroup:v})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(12);var i=Object(n["b"])();function s(){i.info("Greetings Earth!")}function o(){i.info("\ud83d\udc7d")}Object(r["a"])("interop.greetingsEarth",{greet:s,takeMeToYourLeader:o})},function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(88);var l=a.n(o);var c=a(13);var u=a(119);var d=a(27);var p=a(277);var h=a(66);var v=a(71);var m=a(163);var f=function e(t,a,r,i){if(!t)throw new Error("mountMenu must be called with a teamId parameter");var o=Object(d["d"])(t);var l=Object(v["c"])({state:o.getState()});var f=function e(){return a};var b="react_menu_render";l.mark(b+"_mark");Object(u["a"])(s.a.createElement(c["Provider"],{store:o},s.a.createElement(m["a"],null,s.a.createElement(p["a"],n()({},i,{parentSelector:f,shouldFade:false}),s.a.createElement(h["a"],r)))),a,function(){return l.measureAndClear(b+"_mark",b)})};var b=l.a.unmountComponentAtNode;var g={mountMenu:f,unmountMenu:b};var _=a(44);Object(_["a"])("interop.mountMenu",f);Object(_["a"])("interop.unmountMenu",b)},,function(e,t,a){"use strict";a.r(t);var r=window.navigator&&"function"===typeof window.navigator.sendBeacon;function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.apiUrl,a=e.method,n=e.token,i=e.args,s=void 0===i?{}:i,o=e.versionTs,l=void 0===o?"":o,c=e.versionUid,u=void 0===c?"":c;var d=false;var p=""+t+a+"?_x_id="+u.substring(0,8)+"-"+Date.now()/1e3;var h=new FormData;h.append("token",n);Object.keys(s).forEach(function(e){return h.append(e,s[e])});if(r)d=navigator.sendBeacon(p,h);else{var v=new XMLHttpRequest;v.addEventListener("load",function(){var e=v.readyState,t=v.status,a=v.DONE;e===a&&200===t&&(d=true)});v.open("POST",p,true);v.setRequestHeader("X-Slack-Version-Ts",l);v.send(h)}return d}var i=a(44);Object(i["a"])("interop.beaconApiCall",n)},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(88);var o=a.n(s);var l=a(119);var c=a(27);var u=a(1701);var d=a(163);var p=function e(t,a){if(!t)throw new Error("mountUserGroupsFlexpane must be called with a teamId parameter");var r=Object(c["d"])(t);Object(l["a"])(n.a.createElement(i["Provider"],{store:r},n.a.createElement(d["a"],null,n.a.createElement(u["f"],null))),a)};var h=function e(t){o.a.unmountComponentAtNode(t)};var v=a(44);Object(v["a"])("interop.mountUserGroupsFlexpane",p);Object(v["a"])("interop.unmountUserGroupsFlexpane",h)},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(15);var i=a(243);var s=a(4);var o=a(34);var l=a(132);var c=a(42);var u=a(704);var d=a(38);var p=a(1034);var h=a(71);var v=a(12);var m=i["a"].OK;var f="HEAD";var b="https://upload-edge.slack.com/ping";var g="edge_upload_proxy_check_completed";var _="edge_upload_proxy_check";var y=3;var O=false;function k(){return new Promise(function(e,t){var a=new XMLHttpRequest;a.onload=function(){if(a.status===m){e();return}t(new Error("request loaded with unexpected status: "+a.status))};a.onerror=function(){t(new Error("request failed to load: "+a.status))};a.ontimeout=function(){t(new Error("request timed out"))};var r=1e3*Object(p["b"])();setTimeout(function(){a.open(f,b);a.send()},r)})}var E=Object(n["b"])("Tests if Flannel socket can be opened and send/receive a message",function(e,t){var a=t();var r=Object(h["c"])({state:a});var n=Object(v["a"])({state:a});var i=!Object(d["a"])()&&Object(u["a"])()&&!Object(c["isSelectedTeam"])();if(!Object(s["isFeatureEnabled"])(a,"feature_edge_upload_proxy_check")||Object(o["f"])(a,g)===y||O||i)return;O=true;n.info(_,"beginning edge upload proxy check");k().then(function(){r.count(_+"_passed_"+y)}).catch(function(e){var t=_+"_failed_"+y;r.count(t);n.error(e,{subtype:t})}).finally(function(){e(Object(l["c"])({pref:g,value:y}));n.info(_,"edge upload proxy check complete")})});var C=E;Object(r["a"])("interop.edgeUploadProxyCheck",function(){return TS.redux.dispatch(C())})},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(2);var i=a(1034);var s=a(15);var o=a(4);var l=a(34);var c=a(132);var u=a(71);var d=a(12);var p=["wss-primary","wss-backup","wss-mobile"];var h="_CONNECTION_TEST_TOKEN_";var v="failover_proxy_check";var m=4;var f=1e4;var b=3e3;var g=JSON.stringify({ok:true});function _(e){return new Promise(function(t,a){var r=void 0;var i=setTimeout(function(){a(new Error("Socket open timed out"))},f);var s=new WebSocket("wss://"+e+".slack.com/?flannel=1&token="+h);s.onopen=function(){clearTimeout(i);r=setTimeout(function(){a(new Error("Message response timed out"));s.close()},b);s.send(g)};s.onmessage=function(e){clearTimeout(r);try{var i=JSON.parse(e.data);if(!i.ok)throw new Error("Message response is not ok");t();s.onclose=n["noop"];s.close()}catch(e){a(e)}};s.onclose=function(){a(new Error("Socket closed unexpectedly"))}})}function y(){var e={};return Promise.each(p,function(t,a){var r=1e3*Object(i["b"])({attempts:a});return Promise.delay(r).then(function(){return _(t)}).catch(function(a){e[t]=a.message})}).then(function(){return e})}var O=Object(s["b"])("Tests if Flannel socket can be opened and send/receive a message",function(e,t){var a=t();var r=Object(u["c"])({state:a});if(!Object(o["isFeatureEnabled"])(a,"feature_failover_proxy_check")||Object(l["f"])(a,"failover_proxy_check_completed")===m)return;y().then(function(a){if(Object.keys(a).length){r.count(v+"_failed_"+m);var n=new Error(JSON.stringify(Object.keys(a)));var i=JSON.stringify(a);var s=v;Object(d["a"])({getState:t}).error(n,i,{subtype:s})}else r.count(v+"_passed_"+m);e(Object(c["c"])({pref:"failover_proxy_check_completed",value:m}))})});Object(r["a"])("interop.failoverProxyCheck",function(){return TS.redux.dispatch(O())})},,function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(2);var i=a(12);var s=false;var o=function e(t){if(!t)return;var a="";var r=t.srcElement||t.target;var n=i["b"]&&Object(i["b"])();if(r&&r.nodeName)if("SCRIPT"===r.nodeName){var s=r.src;var o=t.type||"error";a="["+o+"] from script at "+s+" (failed to load?)"}else if("IMG"===r.nodeName){var c=r.src||r.currentSrc||"unknown";n.warn("<img> fired error with url = "+c);return}t.error&&t.error.stack&&(a+=" "+t.error.stack);if(t.filename){var u=t.filename;var d=t.lineno;var p=t.colno;a+=" from "+u;d&&(a+=" @ line "+d+", col "+p)}var h=void 0;h=t.error&&t.error.stack?a:(t.message||"")+" "+a;h&&h.replace&&(h=h.replace(/\s+/g," ").trim());if(!h||!h.length)if(r){var v=r.nodeName||"unknown";h="error event from node of "+v+", no message provided?"}else h="error event fired, no relevant message or node found";h="\ud83d\udc1e "+h;var m="js_runtime_error";l({error:t.error||t,msg:h,subtype:m})};function l(e){var t=e.error,a=e.msg,r=e.subtype;Object(i["b"])().error(t,a,{subtype:r})}var c=function e(){if(s)return;var t=true;var a=Object(n["throttle"])(o,1e4);window.addEventListener("error",a,t);s=true};var u=c;var d={globalErrorHandler:o};Object.defineProperty(d,"logError",{get:function e(){return l},set:function e(t){l=t}});Object.defineProperty(d,"hasRegisteredGlobalErrorHandler",{get:function e(){return s},set:function e(t){s=t}});Object(r["a"])("interop.registerGlobalErrorHandler",function(){return u()})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var r=a(4115),n=a(4117);function i(e,t,a){return r(n,e,t,a)}e.exports=i},function(e,t,a){var r=a(4083),n=a(1716);function i(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var a=r(e.prototype),i=e.apply(a,t);return n(i)?i:a}}e.exports=i},function(e,t,a){var r=a(1716);var n=Object.create;var i=function(){function e(){}return function(t){if(!r(t))return{};if(n)return n(t);e.prototype=t;var a=new e;e.prototype=void 0;return a}}();e.exports=i},function(e,t){function a(e,t){var a=-1,r=e.length;t||(t=Array(r));while(++a<r)t[a]=e[a];return t}e.exports=a},function(e,t,a){var r=a(2828),n=a(2114);function i(e,t,a,i){var s=!a;a||(a={});var o=-1,l=t.length;while(++o<l){var c=t[o];var u=i?i(a[c],e[c],c,a,e):void 0;void 0===u&&(u=e[c]);s?n(a,c,u):r(a,c,u)}return a}e.exports=i},function(e,t,a){var r=a(4096),n=a(4119),i=a(4120),s=a(4098),o=a(4129),l=a(4089),c=a(4130),u=a(4104),d=a(4105),p=a(4093);var h="Expected a function";var v=1,m=2,f=8,b=16,g=32,_=64;var y=Math.max;function O(e,t,a,O,k,E,C,j){var w=t&m;if(!w&&"function"!=typeof e)throw new TypeError(h);var S=O?O.length:0;if(!S){t&=~(g|_);O=k=void 0}C=void 0===C?C:y(p(C),0);j=void 0===j?j:p(j);S-=k?k.length:0;if(t&_){var I=O,T=k;O=k=void 0}var A=w?void 0:l(e);var N=[e,t,a,O,k,I,T,E,C,j];A&&c(N,A);e=N[0];t=N[1];a=N[2];O=N[3];k=N[4];j=N[9]=void 0===N[9]?w?0:e.length:y(N[9]-S,0);!j&&t&(f|b)&&(t&=~(f|b));if(t&&t!=v)P=t==f||t==b?i(e,t,j):t!=g&&t!=(v|g)||k.length?s.apply(void 0,N):o(e,t,a,O);else var P=n(e,t,a);var R=A?r:u;return d(R(P,N),e,t)}e.exports=O},function(e,t,a){var r=a(4083),n=a(4088);var i=4294967295;function s(e){this.__wrapped__=e;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=i;this.__views__=[]}s.prototype=r(n.prototype);s.prototype.constructor=s;e.exports=s},function(e,t){function a(){}e.exports=a},function(e,t,a){var r=a(4097),n=a(2173);var i=r?function(e){return r.get(e)}:n;e.exports=i},function(e,t,a){var r=a(4083),n=a(4088);function i(e,t){this.__wrapped__=e;this.__actions__=[];this.__chain__=!!t;this.__index__=0;this.__values__=void 0}i.prototype=r(n.prototype);i.prototype.constructor=i;e.exports=i},function(e,t){function a(e,t){var a=-1,r=null==e?0:e.length;while(++a<r)if(false===t(e[a],a,e))break;return e}e.exports=a},function(e,t){var a="__lodash_placeholder__";function r(e,t){var r=-1,n=e.length,i=0,s=[];while(++r<n){var o=e[r];if(o===t||o===a){e[r]=a;s[i++]=r}}return s}e.exports=r},function(e,t,a){var r=a(4131);function n(e){var t=r(e),a=t%1;return t===t?a?t-a:t:0}e.exports=n},function(e,t,a){var r=a(2189);function n(e){var t=new e.constructor(e.byteLength);new r(t).set(new r(e));return t}e.exports=n},function(e,t,a){var r=a(4081),n=r("join",a(4164));n.placeholder=a(3969);e.exports=n},function(e,t,a){var r=a(1233),n=a(4097);var i=n?function(e,t){n.set(e,t);return e}:r;e.exports=i},function(e,t,a){var r=a(2200);var n=r&&new r;e.exports=n},function(e,t,a){var r=a(4099),n=a(4100),i=a(4121),s=a(4082),o=a(4101),l=a(4106),c=a(4128),u=a(4092),d=a(524);var p=1,h=2,v=8,m=16,f=128,b=512;function g(e,t,a,_,y,O,k,E,C,j){var w=t&f,S=t&p,I=t&h,T=t&(v|m),A=t&b,N=I?void 0:s(e);function P(){var p=arguments.length,h=Array(p),v=p;while(v--)h[v]=arguments[v];if(T)var m=l(P),f=i(h,m);_&&(h=r(h,_,y,T));O&&(h=n(h,O,k,T));p-=f;if(T&&p<j){var b=u(h,m);return o(e,t,g,P.placeholder,a,h,b,E,C,j-p)}var R=S?a:this,M=I?R[e]:e;p=h.length;E?h=c(h,E):A&&p>1&&h.reverse();w&&C<p&&(h.length=C);this&&this!==d&&this instanceof P&&(M=N||s(M));return M.apply(R,h)}return P}e.exports=g},function(e,t){var a=Math.max;function r(e,t,r,n){var i=-1,s=e.length,o=r.length,l=-1,c=t.length,u=a(s-o,0),d=Array(c+u),p=!n;while(++l<c)d[l]=t[l];while(++i<o)(p||i<s)&&(d[r[i]]=e[i]);while(u--)d[l++]=e[i++];return d}e.exports=r},function(e,t){var a=Math.max;function r(e,t,r,n){var i=-1,s=e.length,o=-1,l=r.length,c=-1,u=t.length,d=a(s-l,0),p=Array(d+u),h=!n;while(++i<d)p[i]=e[i];var v=i;while(++c<u)p[v+c]=t[c];while(++o<l)(h||i<s)&&(p[v+r[o]]=e[i++]);return p}e.exports=r},function(e,t,a){var r=a(4102),n=a(4104),i=a(4105);var s=1,o=2,l=4,c=8,u=32,d=64;function p(e,t,a,p,h,v,m,f,b,g){var _=t&c,y=_?m:void 0,O=_?void 0:m,k=_?v:void 0,E=_?void 0:v;t|=_?u:d;t&=~(_?d:u);t&l||(t&=~(s|o));var C=[e,t,h,k,y,E,O,f,b,g];var j=a.apply(void 0,C);r(e)&&n(j,C);j.placeholder=p;return i(j,e,t)}e.exports=p},function(e,t,a){var r=a(4087),n=a(4089),i=a(4103),s=a(4123);function o(e){var t=i(e),a=s[t];if("function"!=typeof a||!(t in r.prototype))return false;if(e===a)return true;var o=n(a);return!!o&&e===o[0]}e.exports=o},function(e,t,a){var r=a(4122);var n=Object.prototype;var i=n.hasOwnProperty;function s(e){var t=e.name+"",a=r[t],n=i.call(r,t)?a.length:0;while(n--){var s=a[n],o=s.func;if(null==o||o==e)return s.name}return t}e.exports=s},function(e,t,a){var r=a(4096),n=a(2169);var i=n(r);e.exports=i},function(e,t,a){var r=a(4125),n=a(4126),i=a(2166),s=a(4127);function o(e,t,a){var o=t+"";return i(e,n(o,s(r(o),a)))}e.exports=o},function(e,t){function a(e){var t=e;return t.placeholder}e.exports=a},function(e,t,a){var r=a(4085),n=a(1640);function i(e,t){return e&&r(t,n(t),e)}e.exports=i},function(e,t,a){var r=a(1648),n=a(4091),i=a(2828),s=a(4107),o=a(4134),l=a(4137),c=a(4084),u=a(4138),d=a(4139),p=a(2192),h=a(4140),v=a(2197),m=a(4141),f=a(4142),b=a(4147),g=a(502),_=a(2118),y=a(4148),O=a(1716),k=a(4150),E=a(1640);var C=1,j=2,w=4;var S="[object Arguments]",I="[object Array]",T="[object Boolean]",A="[object Date]",N="[object Error]",P="[object Function]",R="[object GeneratorFunction]",M="[object Map]",D="[object Number]",x="[object Object]",F="[object RegExp]",L="[object Set]",B="[object String]",U="[object Symbol]",q="[object WeakMap]";var G="[object ArrayBuffer]",W="[object DataView]",H="[object Float32Array]",V="[object Float64Array]",K="[object Int8Array]",z="[object Int16Array]",Y="[object Int32Array]",Q="[object Uint8Array]",J="[object Uint8ClampedArray]",Z="[object Uint16Array]",X="[object Uint32Array]";var $={};$[S]=$[I]=$[G]=$[W]=$[T]=$[A]=$[H]=$[V]=$[K]=$[z]=$[Y]=$[M]=$[D]=$[x]=$[F]=$[L]=$[B]=$[U]=$[Q]=$[J]=$[Z]=$[X]=true;$[N]=$[P]=$[q]=false;function ee(e,t,a,I,T,A){var N,M=t&C,D=t&j,F=t&w;a&&(N=T?a(e,I,T,A):a(e));if(void 0!==N)return N;if(!O(e))return e;var L=g(e);if(L){N=m(e);if(!M)return c(e,N)}else{var B=v(e),U=B==P||B==R;if(_(e))return l(e,M);if(B==x||B==S||U&&!T){N=D||U?{}:b(e);if(!M)return D?d(e,o(N,e)):u(e,s(N,e))}else{if(!$[B])return T?e:{};N=f(e,B,M)}}A||(A=new r);var q=A.get(e);if(q)return q;A.set(e,N);if(k(e)){e.forEach(function(r){N.add(ee(r,t,a,r,e,A))});return N}if(y(e)){e.forEach(function(r,n){N.set(n,ee(r,t,a,n,e,A))});return N}var G=F?D?h:p:D?keysIn:E;var W=L?void 0:G(e);n(W||e,function(r,n){if(W){n=r;r=e[n]}i(N,n,ee(r,t,a,n,e,A))});return N}e.exports=ee},function(e,t,a){var r=a(2836),n=a(4135),i=a(2123);function s(e){return i(e)?r(e,true):n(e)}e.exports=s},function(e,t,a){var r=a(2113),n=a(2175),i=a(2194),s=a(2196);var o=Object.getOwnPropertySymbols;var l=o?function(e){var t=[];while(e){r(t,i(e));e=n(e)}return t}:s;e.exports=l},function(e,t,a){var r=a(1743),n=a(2164),i=a(2166);function s(e){return i(n(e,void 0,r),e+"")}e.exports=s},function(e,t,a){var r=a(4081),n=r("flow",a(4158));n.placeholder=a(3969);e.exports=n},function(e,t,a){var r=a(4081),n=r("map",a(4160));n.placeholder=a(3969);e.exports=n},function(e,t,a){var r=a(4081),n=r("slice",a(4165));n.placeholder=a(3969);e.exports=n},function(e,t,a){var r=a(4116),n=a(3969);var i=Array.prototype.push;function s(e,t){return 2==t?function(t,a){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}function o(e,t){return 2==t?function(t,a){return e(t,a)}:function(t){return e(t)}}function l(e){var t=e?e.length:0,a=Array(t);while(t--)a[t]=e[t];return a}function c(e){return function(t){return e({},t)}}function u(e,t){return function(){var a=arguments.length,r=a-1,n=Array(a);while(a--)n[a]=arguments[a];var s=n[t],o=n.slice(0,t);s&&i.apply(o,s);t!=r&&i.apply(o,n.slice(t+1));return e.apply(this,o)}}function d(e,t){return function(){var a=arguments.length;if(!a)return;var r=Array(a);while(a--)r[a]=arguments[a];var n=r[0]=t.apply(void 0,r);e.apply(void 0,r);return n}}function p(e,t,a,i){var h="function"==typeof t,v=t===Object(t);if(v){i=a;a=t;t=void 0}if(null==a)throw new TypeError;i||(i={});var m={cap:!("cap"in i)||i.cap,curry:!("curry"in i)||i.curry,fixed:!("fixed"in i)||i.fixed,immutable:!("immutable"in i)||i.immutable,rearg:!("rearg"in i)||i.rearg};var f=h?a:n,b="curry"in i&&i.curry,g="fixed"in i&&i.fixed,_="rearg"in i&&i.rearg,y=h?a.runInContext():void 0;var O=h?a:{ary:e.ary,assign:e.assign,clone:e.clone,curry:e.curry,forEach:e.forEach,isArray:e.isArray,isError:e.isError,isFunction:e.isFunction,isWeakMap:e.isWeakMap,iteratee:e.iteratee,keys:e.keys,rearg:e.rearg,toInteger:e.toInteger,toPath:e.toPath};var k=O.ary,E=O.assign,C=O.clone,j=O.curry,w=O.forEach,S=O.isArray,I=O.isError,T=O.isFunction,A=O.isWeakMap,N=O.keys,P=O.rearg,R=O.toInteger,M=O.toPath;var D=N(r.aryMethod);var x={castArray:function(e){return function(){var t=arguments[0];return S(t)?e(l(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[0],a=arguments[1],r=e(t,a),n=r.length;if(m.cap&&"number"==typeof a){a=a>2?a-2:1;return n&&n<=a?r:o(r,a)}return r}},mixin:function(e){return function(t){var a=this;if(!T(a))return e(a,Object(t));var r=[];w(N(t),function(e){T(t[e])&&r.push([e,a.prototype[e]])});e(a,Object(t));w(r,function(e){var t=e[1];T(t)?a.prototype[e[0]]=t:delete a.prototype[e[0]]});return a}},nthArg:function(e){return function(t){var a=t<0?1:R(t)+1;return j(e(t),a)}},rearg:function(e){return function(t,a){var r=a?a.length:0;return j(e(t,a),r)}},runInContext:function(t){return function(a){return p(e,t(a),i)}}};function F(e,t){if(m.cap){var a=r.iterateeRearg[e];if(a)return V(t,a);var n=!h&&r.iterateeAry[e];if(n)return H(t,n)}return t}function L(e,t,a){return b||m.curry&&a>1?j(t,a):t}function B(e,t,a){if(m.fixed&&(g||!r.skipFixed[e])){var n=r.methodSpread[e],i=n&&n.start;return void 0===i?k(t,a):u(t,i)}return t}function U(e,t,a){return m.rearg&&a>1&&(_||!r.skipRearg[e])?P(t,r.methodRearg[e]||r.aryRearg[a]):t}function q(e,t){t=M(t);var a=-1,r=t.length,n=r-1,i=C(Object(e)),s=i;while(null!=s&&++a<r){var o=t[a],l=s[o];null==l||T(l)||I(l)||A(l)||(s[o]=C(a==n?l:Object(l)));s=s[o]}return i}function G(e){return Y.runInContext.convert(e)(void 0)}function W(e,t){var a=r.aliasToReal[e]||e,n=r.remap[a]||a,s=i;return function(e){var r=h?y:O,i=h?y[n]:t,o=E(E({},s),e);return p(r,a,i,o)}}function H(e,t){return K(e,function(e){return"function"==typeof e?o(e,t):e})}function V(e,t){return K(e,function(e){var a=t.length;return s(P(o(e,a),t),a)})}function K(e,t){return function(){var a=arguments.length;if(!a)return e();var r=Array(a);while(a--)r[a]=arguments[a];var n=m.rearg?0:a-1;r[n]=t(r[n]);return e.apply(void 0,r)}}function z(e,t,a){var n,i=r.aliasToReal[e]||e,s=t,o=x[i];o?s=o(t):m.immutable&&(r.mutate.array[i]?s=d(t,l):r.mutate.object[i]?s=d(t,c(t)):r.mutate.set[i]&&(s=d(t,q)));w(D,function(e){w(r.aryMethod[e],function(t){if(i==t){var a=r.methodSpread[i],o=a&&a.afterRearg;n=o?B(i,U(i,s,e),e):U(i,B(i,s,e),e);n=F(i,n);n=L(i,n,e);return false}});return!n});n||(n=s);n==t&&(n=b?j(n,1):function(){return t.apply(this,arguments)});n.convert=W(i,t);n.placeholder=t.placeholder=a;return n}if(!v)return z(t,a,f);var Y=a;var Q=[];w(D,function(e){w(r.aryMethod[e],function(e){var t=Y[r.remap[e]||e];t&&Q.push([e,z(e,t,Y)])})});w(N(Y),function(e){var t=Y[e];if("function"==typeof t){var a=Q.length;while(a--)if(Q[a][0]==e)return;t.convert=W(e,t);Q.push([e,t])}});w(Q,function(e){Y[e[0]]=e[1]});Y.convert=G;Y.placeholder=Y;w(N(Y),function(e){w(r.realToAlias[e]||[],function(t){Y[t]=Y[e]})});return Y}e.exports=p},function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"};t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]};t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]};t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2};t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]};t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]};t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}};t.mutate={array:{fill:true,pull:true,pullAll:true,pullAllBy:true,pullAllWith:true,pullAt:true,remove:true,reverse:true},object:{assign:true,assignAll:true,assignAllWith:true,assignIn:true,assignInAll:true,assignInAllWith:true,assignInWith:true,assignWith:true,defaults:true,defaultsAll:true,defaultsDeep:true,defaultsDeepAll:true,merge:true,mergeAll:true,mergeAllWith:true,mergeWith:true},set:{set:true,setWith:true,unset:true,update:true,updateWith:true}};t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,a=t.aliasToReal,r={};for(var n in a){var i=a[n];e.call(r,i)?r[i].push(n):r[i]=[n]}return r}();t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"};t.skipFixed={castArray:true,flow:true,flowRight:true,iteratee:true,mixin:true,rearg:true,runInContext:true};t.skipRearg={add:true,assign:true,assignIn:true,bind:true,bindKey:true,concat:true,difference:true,divide:true,eq:true,gt:true,gte:true,isEqual:true,lt:true,lte:true,matchesProperty:true,merge:true,multiply:true,overArgs:true,partial:true,partialRight:true,propertyOf:true,random:true,range:true,rangeRight:true,subtract:true,zip:true,zipObject:true,zipObjectDeep:true}},function(e,t,a){e.exports={ary:a(4118),assign:a(4107),clone:a(4133),curry:a(4152),forEach:a(4091),isArray:a(502),isError:a(4153),isFunction:a(2382),isWeakMap:a(4154),iteratee:a(4155),keys:a(2841),rearg:a(4156),toInteger:a(4093),toPath:a(4157)}},function(e,t,a){var r=a(4086);var n=128;function i(e,t,a){t=a?void 0:t;t=e&&null==t?e.length:t;return r(e,n,void 0,void 0,void 0,void 0,t)}e.exports=i},function(e,t,a){var r=a(4082),n=a(524);var i=1;function s(e,t,a){var s=t&i,o=r(e);function l(){var t=this&&this!==n&&this instanceof l?o:e;return t.apply(s?a:this,arguments)}return l}e.exports=s},function(e,t,a){var r=a(2165),n=a(4082),i=a(4098),s=a(4101),o=a(4106),l=a(4092),c=a(524);function u(e,t,a){var u=n(e);function d(){var n=arguments.length,p=Array(n),h=n,v=o(d);while(h--)p[h]=arguments[h];var m=n<3&&p[0]!==v&&p[n-1]!==v?[]:l(p,v);n-=m.length;if(n<a)return s(e,t,i,d.placeholder,void 0,p,m,void 0,void 0,a-n);var f=this&&this!==c&&this instanceof d?u:e;return r(f,this,p)}return d}e.exports=u},function(e,t){function a(e,t){var a=e.length,r=0;while(a--)e[a]===t&&++r;return r}e.exports=a},function(e,t){var a={};e.exports=a},function(e,t,a){var r=a(4087),n=a(4090),i=a(4088),s=a(502),o=a(682),l=a(4124);var c=Object.prototype;var u=c.hasOwnProperty;function d(e){if(o(e)&&!s(e)&&!(e instanceof r)){if(e instanceof n)return e;if(u.call(e,"__wrapped__"))return l(e)}return new n(e)}d.prototype=i.prototype;d.prototype.constructor=d;e.exports=d},function(e,t,a){var r=a(4087),n=a(4090),i=a(4084);function s(e){if(e instanceof r)return e.clone();var t=new n(e.__wrapped__,e.__chain__);t.__actions__=i(e.__actions__);t.__index__=e.__index__;t.__values__=e.__values__;return t}e.exports=s},function(e,t){var a=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;function n(e){var t=e.match(a);return t?t[1].split(r):[]}e.exports=n},function(e,t){var a=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function r(e,t){var r=t.length;if(!r)return e;var n=r-1;t[n]=(r>1?"& ":"")+t[n];t=t.join(r>2?", ":" ");return e.replace(a,"{\n/* [wrapped with "+t+"] */\n")}e.exports=r},function(e,t,a){var r=a(4091),n=a(1642);var i=1,s=2,o=8,l=16,c=32,u=64,d=128,p=256,h=512;var v=[["ary",d],["bind",i],["bindKey",s],["curry",o],["curryRight",l],["flip",h],["partial",c],["partialRight",u],["rearg",p]];function m(e,t){r(v,function(a){var r="_."+a[0];t&a[1]&&!n(e,r)&&e.push(r)});return e.sort()}e.exports=m},function(e,t,a){var r=a(4084),n=a(2119);var i=Math.min;function s(e,t){var a=e.length,s=i(t.length,a),o=r(e);while(s--){var l=t[s];e[s]=n(l,a)?o[l]:void 0}return e}e.exports=s},function(e,t,a){var r=a(2165),n=a(4082),i=a(524);var s=1;function o(e,t,a,o){var l=t&s,c=n(e);function u(){var t=-1,n=arguments.length,s=-1,d=o.length,p=Array(d+n),h=this&&this!==i&&this instanceof u?c:e;while(++s<d)p[s]=o[s];while(n--)p[s++]=arguments[++t];return r(h,l?a:this,p)}return u}e.exports=o},function(e,t,a){var r=a(4099),n=a(4100),i=a(4092);var s="__lodash_placeholder__";var o=1,l=2,c=4,u=8,d=128,p=256;var h=Math.min;function v(e,t){var a=e[1],v=t[1],m=a|v,f=m<(o|l|d);var b=v==d&&a==u||v==d&&a==p&&e[7].length<=t[8]||v==(d|p)&&t[7].length<=t[8]&&a==u;if(!(f||b))return e;if(v&o){e[2]=t[2];m|=a&o?0:c}var g=t[3];if(g){var _=e[3];e[3]=_?r(_,g,t[4]):g;e[4]=_?i(e[3],s):t[4]}g=t[5];if(g){_=e[5];e[5]=_?n(_,g,t[6]):g;e[6]=_?i(e[5],s):t[6]}g=t[7];g&&(e[7]=g);v&d&&(e[8]=null==e[8]?t[8]:h(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0];e[1]=m;return e}e.exports=v},function(e,t,a){var r=a(4132);var n=1/0,i=1.7976931348623157e308;function s(e){if(!e)return 0===e?e:0;e=r(e);if(e===n||e===-n){var t=e<0?-1:1;return t*i}return e===e?e:0}e.exports=s},function(e,t,a){var r=a(1716),n=a(1405);var i=NaN;var s=/^\s+|\s+$/g;var o=/^[-+]0x[0-9a-f]+$/i;var l=/^0b[01]+$/i;var c=/^0o[0-7]+$/i;var u=parseInt;function d(e){if("number"==typeof e)return e;if(n(e))return i;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var a=l.test(e);return a||c.test(e)?u(e.slice(2),a?2:8):o.test(e)?i:+e}e.exports=d},function(e,t,a){var r=a(4108);var n=4;function i(e){return r(e,n)}e.exports=i},function(e,t,a){var r=a(4085),n=a(4109);function i(e,t){return e&&r(t,n(t),e)}e.exports=i},function(e,t,a){var r=a(1716),n=a(2842),i=a(4136);var s=Object.prototype;var o=s.hasOwnProperty;function l(e){if(!r(e))return i(e);var t=n(e),a=[];for(var s in e)"constructor"==s&&(t||!o.call(e,s))||a.push(s);return a}e.exports=l},function(e,t){function a(e){var t=[];if(null!=e)for(var a in Object(e))t.push(a);return t}e.exports=a},function(e,t,a){(function(e){var r=a(524);var n=(true,t)&&!t.nodeType&&t;var i=n&&"object"==typeof e&&e&&!e.nodeType&&e;var s=i&&i.exports===n;var o=s?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(e,t){if(t)return e.slice();var a=e.length,r=l?l(a):new e.constructor(a);e.copy(r);return r}e.exports=c}).call(this,a(325)(e))},function(e,t,a){var r=a(4085),n=a(2194);function i(e,t){return r(e,n(e),t)}e.exports=i},function(e,t,a){var r=a(4085),n=a(4110);function i(e,t){return r(e,n(e),t)}e.exports=i},function(e,t,a){var r=a(2193),n=a(4110),i=a(4109);function s(e){return r(e,i,n)}e.exports=s},function(e,t){var a=Object.prototype;var r=a.hasOwnProperty;function n(e){var t=e.length,a=new e.constructor(t);if(t&&"string"==typeof e[0]&&r.call(e,"index")){a.index=e.index;a.input=e.input}return a}e.exports=n},function(e,t,a){var r=a(4094),n=a(4143),i=a(4144),s=a(4145),o=a(4146);var l="[object Boolean]",c="[object Date]",u="[object Map]",d="[object Number]",p="[object RegExp]",h="[object Set]",v="[object String]",m="[object Symbol]";var f="[object ArrayBuffer]",b="[object DataView]",g="[object Float32Array]",_="[object Float64Array]",y="[object Int8Array]",O="[object Int16Array]",k="[object Int32Array]",E="[object Uint8Array]",C="[object Uint8ClampedArray]",j="[object Uint16Array]",w="[object Uint32Array]";function S(e,t,a){var S=e.constructor;switch(t){case f:return r(e);case l:case c:return new S(+e);case b:return n(e,a);case g:case _:case y:case O:case k:case E:case C:case j:case w:return o(e,a);case u:return new S;case d:case v:return new S(e);case p:return i(e);case h:return new S;case m:return s(e)}}e.exports=S},function(e,t,a){var r=a(4094);function n(e,t){var a=t?r(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}e.exports=n},function(e,t){var a=/\w*$/;function r(e){var t=new e.constructor(e.source,a.exec(e));t.lastIndex=e.lastIndex;return t}e.exports=r},function(e,t,a){var r=a(681);var n=r?r.prototype:void 0,i=n?n.valueOf:void 0;function s(e){return i?Object(i.call(e)):{}}e.exports=s},function(e,t,a){var r=a(4094);function n(e,t){var a=t?r(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}e.exports=n},function(e,t,a){var r=a(4083),n=a(2175),i=a(2842);function s(e){return"function"!=typeof e.constructor||i(e)?{}:r(n(e))}e.exports=s},function(e,t,a){var r=a(4149),n=a(2121),i=a(2840);var s=i&&i.isMap;var o=s?n(s):r;e.exports=o},function(e,t,a){var r=a(2197),n=a(682);var i="[object Map]";function s(e){return n(e)&&r(e)==i}e.exports=s},function(e,t,a){var r=a(4151),n=a(2121),i=a(2840);var s=i&&i.isSet;var o=s?n(s):r;e.exports=o},function(e,t,a){var r=a(2197),n=a(682);var i="[object Set]";function s(e){return n(e)&&r(e)==i}e.exports=s},function(e,t,a){var r=a(4086);var n=8;function i(e,t,a){t=a?void 0:t;var s=r(e,n,void 0,void 0,void 0,void 0,void 0,t);s.placeholder=i.placeholder;return s}i.placeholder={};e.exports=i},function(e,t,a){var r=a(755),n=a(682),i=a(2174);var s="[object DOMException]",o="[object Error]";function l(e){if(!n(e))return false;var t=r(e);return t==o||t==s||"string"==typeof e.message&&"string"==typeof e.name&&!i(e)}e.exports=l},function(e,t,a){var r=a(2197),n=a(682);var i="[object WeakMap]";function s(e){return n(e)&&r(e)==i}e.exports=s},function(e,t,a){var r=a(4108),n=a(2178);var i=1;function s(e){return n("function"==typeof e?e:r(e,i))}e.exports=s},function(e,t,a){var r=a(4086),n=a(4111);var i=256;var s=n(function(e,t){return r(e,i,void 0,void 0,void 0,t)});e.exports=s},function(e,t,a){var r=a(1644),n=a(4084),i=a(502),s=a(1405),o=a(2204),l=a(1238),c=a(2207);function u(e){if(i(e))return r(e,l);return s(e)?[e]:n(o(c(e)))}e.exports=u},function(e,t,a){var r=a(4159);var n=r();e.exports=n},function(e,t,a){var r=a(4090),n=a(4111),i=a(4089),s=a(4103),o=a(502),l=a(4102);var c="Expected a function";var u=8,d=32,p=128,h=256;function v(e){return n(function(t){var a=t.length,n=a,v=r.prototype.thru;e&&t.reverse();while(n--){var m=t[n];if("function"!=typeof m)throw new TypeError(c);if(v&&!f&&"wrapper"==s(m))var f=new r([],true)}n=f?n:a;while(++n<a){m=t[n];var b=s(m),g="wrapper"==b?i(m):void 0;f=g&&l(g[0])&&g[1]==(p|u|d|h)&&!g[4].length&&1==g[9]?f[s(g[0])].apply(f,g[3]):1==m.length&&l(m)?f[b]():f.thru(m)}return function(){var e=arguments,r=e[0];if(f&&1==e.length&&o(r))return f.plant(r).value();var n=0,i=a?t[n].apply(this,e):r;while(++n<a)i=t[n].call(this,i);return i}})}e.exports=v},function(e,t,a){var r=a(1644),n=a(2178),i=a(4161),s=a(502);function o(e,t){var a=s(e)?r:i;return a(e,n(t,3))}e.exports=o},function(e,t,a){var r=a(4162),n=a(2123);function i(e,t){var a=-1,i=n(e)?Array(e.length):[];r(e,function(e,r,n){i[++a]=t(e,r,n)});return i}e.exports=i},function(e,t,a){var r=a(2117),n=a(4163);var i=n(r);e.exports=i},function(e,t,a){var r=a(2123);function n(e,t){return function(a,n){if(null==a)return a;if(!r(a))return e(a,n);var i=a.length,s=t?i:-1,o=Object(a);while(t?s--:++s<i)if(false===n(o[s],s,o))break;return a}}e.exports=n},function(e,t){var a=Array.prototype;var r=a.join;function n(e,t){return null==e?"":r.call(e,t)}e.exports=n},function(e,t,a){var r=a(4166),n=a(4167),i=a(4093);function s(e,t,a){var s=null==e?0:e.length;if(!s)return[];if(a&&"number"!=typeof a&&n(e,t,a)){t=0;a=s}else{t=null==t?0:i(t);a=void 0===a?s:i(a)}return r(e,t,a)}e.exports=s},function(e,t){function a(e,t,a){var r=-1,n=e.length;t<0&&(t=-t>n?0:n+t);a=a>n?n:a;a<0&&(a+=n);n=t>a?0:a-t>>>0;t>>>=0;var i=Array(n);while(++r<n)i[r]=e[r+t];return i}e.exports=a},function(e,t,a){var r=a(1639),n=a(2123),i=a(2119),s=a(1716);function o(e,t,a){if(!s(a))return false;var o=typeof t;if("number"==o?n(a)&&i(t,a.length):"string"==o&&t in a)return r(a[t],e);return false}e.exports=o},,,,,,function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(6);var s=a.n(i);var o=a(7);var l=a.n(o);var c=a(8);var u=a.n(c);var d=a(9);var p=a.n(d);var h=a(2);var v=a(0);var m=a(1);var f=a.n(m);var b=a(16);var g=a.n(b);var _=a(13);var y=a(107);var O=a.n(y);var k=a(23);var E=a(19);var C=a(4);var j=a(195);var w=a(122);var S=a(884);var I=a(34);var T=a(150);var A=a(684);var N=a(1057);var P=a(109);var R=a(515);var M=a(1097);var D=a(12);var x=a(860);var F=a(4168);var L=a(799);var B=a(892);var U=a(38);var q=a(157);var G=a(10);var W=a(45);var H=a(30);var V=a(1345);var K=new G["b"]("offline_mode");var z=function e(t){if(!t)return"";var a=document.createElement("span");a.innerHTML=t;return a.textContent.trim()};var Y={channelId:v["b"].string,teamId:v["b"].string,legacyChannel:v["b"].object,threadTs:v["b"].string,viewContext:v["b"].string,placeholder:v["b"].string,sendMessage:v["b"].func,className:v["b"].string,enableEmojiButton:v["b"].bool,enableMentionButton:v["b"].bool,enableBroadcastKeywords:v["b"].bool,enableJumbomoji:v["b"].bool,arrowHistory:v["b"].bool,forwardedRef:v["b"].object.isRequired,useSendButton:v["b"].bool,isDisabled:v["b"].bool,maxLines:v["b"].number,useLegacyCreate:v["b"].bool,useLegacyDrafts:v["b"].bool,focusOnMount:v["b"].bool,draft:v["b"].object,draftDelay:v["b"].number,setChannelDraft:v["b"].func,clearChannelDraft:v["b"].func,editLastMessage:v["b"].func,openSnippetDialog:v["b"].func,featureOfflineMode:v["b"].bool,featureSonicInputs:v["b"].bool,clientToolBar:v["b"].bool,featureWysiwygComposer:v["b"].bool,wasRecentlyOnline:v["b"].bool,enqueueToast:v["b"].func,logger:v["b"].object.isRequired,clogger:v["b"].object.isRequired,maxLength:v["b"].number,tabIndex:v["b"].number,fileButtonTabIndex:v["b"].number,showFocusOutline:v["b"].bool,additionalDraftContent:v["b"].object,onDraftRestore:v["b"].func,onTextChange:v["b"].func,onFocus:v["b"].func,onBlur:v["b"].func};var Q={channelId:void 0,teamId:void 0,legacyChannel:void 0,threadTs:void 0,viewContext:void 0,placeholder:void 0,sendMessage:function e(){return Promise.resolve()},className:void 0,enableEmojiButton:false,enableMentionButton:false,enableBroadcastKeywords:true,enableJumbomoji:false,arrowHistory:false,useSendButton:false,isDisabled:false,maxLines:void 0,useLegacyCreate:false,useLegacyDrafts:false,focusOnMount:false,draft:void 0,draftDelay:1e3,setChannelDraft:h["noop"],clearChannelDraft:h["noop"],editLastMessage:h["noop"],openSnippetDialog:h["noop"],featureOfflineMode:false,featureSonicInputs:false,clientToolBar:false,featureWysiwygComposer:false,wasRecentlyOnline:false,onTextChange:h["noop"],onFocus:h["noop"],onBlur:h["noop"],enqueueToast:h["noop"],maxLength:void 0,tabIndex:void 0,fileButtonTabIndex:void 0,showFocusOutline:false,additionalDraftContent:void 0,onDraftRestore:h["noop"]};var J=function(e){p()(t,e);function t(e){s()(this,t);var a=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(h["bindAll"])(a,["onEnter","onFileMenuClose","onFileMenuOpen","onLeftWhenEmpty","onTextChange","onUpArrow","renderInput"]);a.state={isPlusMenuOpen:false,forcePlusMenuOpen:false};a.getComputedModules=Object(L["a"])(function(e,t,a,r){if(!(a||r))return e;var i=Object(V["a"])({featureWysiwygComposer:r});return n()({},e,{composer:n()({},i,{teamId:t}),slacklink:r&&{convertImages:false,disableLinksWithLabels:true},slackmarkdown:r&&{convertHeaders:false,convertHorizontalRule:false}})});return a}l()(t,[{key:"componentDidMount",value:function e(){this.handlePropChanges();this.maybeFocusInput()}},{key:"componentDidUpdate",value:function e(t){this.handlePropChanges(t);this.maybeFocusInput(t)}},{key:"componentWillUnmount",value:function e(){this.updateDraftThrottled&&this.updateDraftThrottled.flush()}},{key:"onEnter",value:function e(t){var a=t.metaKey,r=t.ctrlKey,n=t.shiftKey;var i=this.props,s=i.sendMessage,o=i.useLegacyDrafts,l=i.featureOfflineMode,c=i.featureSonicInputs,u=i.wasRecentlyOnline,d=i.threadTs,p=i.channelId;o||this.updateDraftThrottled.cancel();if(l&&!u){this.props.enqueueToast({element:f.a.createElement(q["b"],{ariaAssertive:true,position:"top-right",icon:"cloud-offline-small"},f.a.createElement("span",null,f.a.createElement("strong",null,K.rt("No connection."))," ",K.rt("You\u2019ll be able to send messages as soon as you\u2019re back online.")))});return false}var h=this.getInputRef();if(!h)return false;if(c&&!d&&(Object(H["isMac"])()&&a&&n||!Object(H["isMac"])()&&r&&n)){this.props.openSnippetDialog({initialText:h?h.displayValue():"",initialChannelId:p,threadTs:d});h.value("");return false}s();return false}},{key:"onUpArrow",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var a=this.props.arrowHistory;if(a&&!t)return;var r=this.getInputRef();if(!r)return;if(!r.isEmpty())return;this.props.editLastMessage()}},{key:"onLeftWhenEmpty",value:function e(){this.setState(function(){return{isPlusMenuOpen:true,forcePlusMenuOpen:true}})}},{key:"onTextChange",value:function e(){var t=this.props,e=t.onTextChange,a=t.useLegacyDrafts,r=t.featureWysiwygComposer;var n=this.getInputRef();a||this.updateOrClearDraft({inputRef:n});e(n.value(),r?n.getContents().contents:[])}},{key:"onFileMenuOpen",value:function e(){this.setState(function(){return{isPlusMenuOpen:true}});var t=this.props.clogger;var a={contexts:{growth:{action:"click",trigger:"plus_menu_button"}}};t.track("PFP_ACTION",a)}},{key:"onFileMenuClose",value:function e(){this.setState(function(){return{isPlusMenuOpen:false,forcePlusMenuOpen:false}})}},{key:"getInputRef",value:function e(){var t=this.props.forwardedRef;return t.current.getWrappedInstance?t.current.getWrappedInstance():t.current}},{key:"handlePropChanges",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.props,r=a.channelId,n=a.threadTs,i=a.draft,s=a.draftDelay,o=a.logger,l=a.useLegacyDrafts,c=a.onDraftRestore,u=a.additionalDraftContent;if(l)return;t.draftDelay!==s&&(this.updateDraftThrottled=Object(h["debounce"])(this.updateDraft,s));if(!l&&t.additionalDraftContent!==u){var d=this.getInputRef();this.updateOrClearDraft({inputRef:d})}if(t.channelId!==r||t.threadTs!==n){this.updateDraftThrottled.flush();var p=this.getInputRef();p.clearHistory();if(r)if(i){o.debug("DRAFT","Restoring draft to "+r);i.ops&&p.value(Object(x["a"])({contents:i.ops}));i.range&&p.setCursor(i.range.index,i.range.length);c(i)}else{o.debug("DRAFT","No draft, clearing input for "+r);p.clear()}}}},{key:"maybeFocusInput",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=this.props,r=a.channelId,n=a.threadTs,i=a.focusOnMount,s=a.logger;if(!i)return;var o=i!==t.focusOnMount||r&&!n&&t.channelId!==r||n&&t.threadTs!==n;if(!o)return;var l=this.getInputRef();try{l.focus()}catch(e){s.error("MESSAGE-INPUT","maybeFocusInput caught error: "+(e&&e.message));e.stack&&s.error("MESSAGE-INPUT",e.stack)}}},{key:"updateOrClearDraft",value:function e(t){var a=t.inputRef;var r=this.props,n=r.channelId,i=r.threadTs,s=r.logger,o=r.useLegacyDrafts;if(!n||!a)return;if(o)return;var l=a.getContents();if(a.getLength()&&Object(h["trim"])(Object(x["a"])(l)).length){var c=new O.a(l.contents);s.debug("DRAFT","Updating draft in "+n);this.updateDraftThrottled({channelId:n,threadTs:i,delta:c})}else{s.debug("DRAFT","Clearing draft for "+n);this.updateDraftThrottled({channelId:n,threadTs:i})}}},{key:"updateDraft",value:function e(t){var a=t.channelId,r=t.threadTs,i=t.delta;var s=this.props.additionalDraftContent;if(i){var o=this.getInputRef();this.props.setChannelDraft(n()({channelId:a,threadTs:r,delta:i,range:o.getSelection()},s))}else this.props.clearChannelDraft({channelId:a,threadTs:r})}},{key:"renderInput",value:function e(t){var a=t.modules,r=t.isOpen,n=t.legacyTextyClassName;var i=this.props,s=i.placeholder,o=i.channelId,l=i.enableEmojiButton,c=i.enableMentionButton,u=i.enableBroadcastKeywords,d=i.useLegacyCreate,p=i.onFocus,h=i.onBlur,v=i.forwardedRef,m=i.enableJumbomoji,b=i.isDisabled,g=i.maxLines,_=i.threadTs,y=i.viewContext,O=i.maxLength,k=i.tabIndex,E=i.clientToolBar,C=i.featureWysiwygComposer,j=i.teamId;var w=z(s);var S=this.getComputedModules(a,j,E,C);return f.a.createElement(R["g"],{legacyTextyClassName:n,channelId:o,className:"p-message_input_field",ariaLabel:w,placeholder:s,onEnter:this.onEnter,onUpArrow:this.onUpArrow,onLeftWhenEmpty:this.onLeftWhenEmpty,"data-qa":"message_input","data-thread-key":_?Object(P["getThreadKey"])(o,_):null,"data-view-context":y,ref:v,useLegacyCreate:d,maxLines:g,modules:S,isAutocompleteOpen:r,isDisabled:b,enableEmojiButton:l,enableMentionButton:c,enableBroadcastKeywords:u,enableJumbomoji:m,onTextChange:this.onTextChange,onFocus:p,onBlur:h,maxLength:O,tabIndex:k})}},{key:"renderLegacyAutocomplete",value:function e(){var t=this.props,a=t.legacyChannel,r=t.threadTs,n=t.forwardedRef;var i={tabcomplete:{searchOptions:{model_ob:a,in_thread:!!r},positionMenu:function e(t){var a=n.current.getWrappedInstance?n.current.getWrappedInstance():n.current;t.style.width=a.container.offsetWidth+"px";Object(B["a"])(t,a.container)}}};return this.renderInput({modules:i,legacyTextyClassName:"c-texty_input"})}},{key:"renderModernAutocomplete",value:function e(){return f.a.createElement(M["a"],{completeOnMembers:true,completeOnChannels:true,completeOnCommands:true,completeOnEmoji:true,channelId:this.props.channelId,threadTs:this.props.threadTs,renderInput:this.renderInput,shouldCompleteOnTab:!this.props.useSendButton})}},{key:"render",value:function e(){var t=this.props,a=t.className,r=t.useLegacyCreate,n=t.channelId,i=t.threadTs,s=t.viewContext,o=t.showFocusOutline,l=t.fileButtonTabIndex;var c=g()(a,"p-message_input",{"p-message_input--focus-visible":o});return f.a.createElement("div",{className:c},r?this.renderLegacyAutocomplete():this.renderModernAutocomplete(),f.a.createElement(me,{channelId:n,threadTs:i,viewContext:s,isOpen:this.state.isPlusMenuOpen,forceOpen:this.state.forcePlusMenuOpen,onFileMenuOpen:this.onFileMenuOpen,onFileMenuClose:this.onFileMenuClose,fileButtonTabIndex:l,useLegacyCreate:r}))}}]);return t}(m["Component"]);J.displayName="MessageInput";J.defaultProps=Q;function Z(e,t){var a=t.channelId,r=t.threadTs;return{legacyChannel:Object(U["a"])()?null:Object(E["d"])(e,a),enableJumbomoji:Object(S["a"])(e),arrowHistory:Object(I["f"])(e,"arrow_history"),draft:Object(A["getChannelDraft"])(e,{channelId:a,threadTs:r}),featureOfflineMode:Object(C["isFeatureEnabled"])(e,"feature_offline_mode"),featureSonicInputs:Object(C["isFeatureEnabled"])(e,"feature_sonic_inputs"),clientToolBar:"composer_toolbar"===Object(w["getGroupForUser"])(e,"composer_toolbar"),featureWysiwygComposer:Object(F["a"])(e),wasRecentlyOnline:Object(j["h"])(e),logger:Object(D["a"])({state:e}),clogger:Object(W["a"])({state:e}),teamId:Object(k["c"])(e)}}var X={setChannelDraft:A["setChannelDraft"],clearChannelDraft:A["clearChannelDraft"],enqueueToast:T["enqueueToast"],openSnippetDialog:N["a"]};var $=Object(_["connect"])(Z,X)(J);var ee=f.a.forwardRef(function(e,t){return f.a.createElement($,n()({},e,{forwardedRef:t||f.a.createRef()}))});var te=a(28);var ae=a(22);var re=a(66);var ne=a(4212);var ie=ne["a"];var se=a(1551);var oe=a(1329);var le=a(1351);var ce=a(50);var ue=new G["b"]("message_input_plus_button");var de={channelId:v["b"].string,threadTs:v["b"].string,viewContext:v["b"].string,featureOfflineMode:v["b"].bool,isOpen:v["b"].bool,onFileMenuOpen:v["b"].func,onFileMenuClose:v["b"].func,forceOpen:v["b"].bool,fileButtonTabIndex:v["b"].number,useLegacyCreate:v["b"].bool};var pe={channelId:void 0,threadTs:void 0,viewContext:void 0,featureOfflineMode:false,isOpen:false,onFileMenuOpen:h["noop"],onFileMenuClose:h["noop"],forceOpen:false,fileButtonTabIndex:void 0,useLegacyCreate:false};var he=function(e){p()(t,e);function t(){s()(this,t);var e=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.renderMenu=e.renderMenu.bind(e);e.hiddenFileInputRef=f.a.createRef();return e}l()(t,[{key:"renderMenu",value:function e(t){var a=this.props,r=a.channelId,n=a.threadTs,i=a.viewContext;if(!r)return null;return f.a.createElement(ie,{menuProps:t,channelId:r,threadTs:n,viewContext:i,hiddenFileInputRef:this.hiddenFileInputRef})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext,i=t.featureOfflineMode,s=t.isOpen,o=t.onFileMenuOpen,l=t.onFileMenuClose,c=t.forceOpen,u=t.fileButtonTabIndex,d=t.useLegacyCreate;var p=g()("p-message_input_file_button",{"p-message_input_file_button--active":s});var h=f.a.createElement(te["c"],{className:p,"aria-label":ue.t("File menu"),tabIndex:u||null},f.a.createElement(ae["b"],{className:"p-message_input_file_icon",type:d?"plus-thick":"paperclip"}),f.a.createElement(se["a"],{ref:this.hiddenFileInputRef,channelId:a,threadTs:r,viewContext:n}));var v=f.a.createElement(re["e"],{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:o,onClose:l,forceOpen:c},h);if(i){var b=f.a.createElement(le["a"],{tooltipLabel:ue.t("File menu")});return f.a.createElement(m["Fragment"],null,f.a.createElement(oe["b"],null,v),f.a.createElement(oe["a"],null,f.a.createElement(re["e"],{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:o,onClose:l},f.a.createElement(ce["c"],{tip:b},h))))}return v}}]);return t}(m["Component"]);he.displayName="MessageInputFileButton";he.defaultProps=pe;function ve(e){return{featureOfflineMode:Object(C["isFeatureEnabled"])(e,"feature_offline_mode")}}var me=Object(_["connect"])(ve)(he);var fe=new G["b"]("msg_input");var be={sendMessage:v["b"].func.isRequired,isDisabled:v["b"].bool,isOffline:v["b"].bool,className:v["b"].string,tabIndex:v["b"].number,featureOfflineMode:v["b"].bool,buttonSize:v["b"].string,showTooltip:v["b"].bool};var ge={isDisabled:false,isOffline:false,className:void 0,tabIndex:-1,featureOfflineMode:false,buttonSize:void 0,showTooltip:false};var _e=function e(t){var a=t.isDisabled,r=t.isOffline,n=t.className,i=t.sendMessage,s=t.featureOfflineMode,o=t.tabIndex,l=t.buttonSize,c=t.showTooltip;var u=fe.t("Send");var d=void 0;c&&(d=Object(H["isMac"])()?fe.t("\u2318Enter"):fe.t("Ctrl+Enter"));var p="top";var h=f.a.createElement(te["d"],{className:n,pillarClassName:"p-message_input__send",disabled:a||r,tabIndex:o,onClick:i,size:l},u);if(s&&r){h=f.a.createElement("div",{style:{marginLeft:"auto"}},h);p="top-right";d=f.a.createElement(le["a"],{tooltipLabel:u})}if(a&&!s)return h;if(!d)return h;return f.a.createElement(ce["c"],{tip:d,position:p},h)};_e.displayName="MessageInputSendButton";_e.defaultProps=ge;var ye=function e(t){return{isOffline:!Object(j["d"])(t),featureOfflineMode:Object(C["isFeatureEnabled"])(t,"feature_offline_mode"),showTooltip:Object(I["f"])(t,"msg_input_send_btn")}};var Oe=Object(_["connect"])(ye)(_e);a.d(t,"a",function(){return me});a.d(t,"b",function(){return Oe});var ke=t["c"]=ee},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(6);var d=a.n(u);var p=a(7);var h=a.n(p);var v=a(8);var m=a.n(v);var f=a(9);var b=a.n(f);var g=a(0);var _=a(2);var y=a(4);var O=a(24);var k=a(108);var E=a(17);var C=a(1158);var j=a(10);var w=a(576);var S=a(392);var I=a(66);var T=a(693);var A=a(854);var N=a(921);var P=a(35);var R=a(31);var M=a(45);var D=a(899);var x=a(537);var F=a(1067);var L=a(1369);var B=a(1071);var U=a(100);var q=a(289);var G={id:g["b"].string.isRequired,saveScrollmarkForKey:g["b"].func,clogger:g["b"].shape({track:g["b"].func.isRequired}).isRequired,showMemberProfile:g["b"].func};var W={showMemberProfile:_["noop"],saveScrollmarkForKey:_["noop"]};var H=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}h()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.id,r=t.clogger;this.props.showMemberProfile({memberId:a});this.props.saveScrollmarkForKey(a);r.track("ORGANIZATION_DIRECTORY_CLICK",{})}},{key:"render",value:function e(){var t=this.props.id;return n.a.createElement("div",{className:"p-member_directory__member_row","data-qa":"member_directory_show_profile","data-qa-member":t,role:"presentation",onClick:this.onClick},n.a.createElement(q["b"],{id:t,size:"medium"}))}}]);return t}(r["Component"]);H.displayName="SearchableMemberListMember";H.defaultProps=W;var V=function e(t){return{clogger:Object(M["a"])({state:t})}};var K={showMemberProfile:function e(){return U["j"].apply(void 0,arguments)},saveScrollmark:function e(){return w["saveScrollmark"].apply(void 0,arguments)}};var z=Object(o["connect"])(V,K)(H);var Y=a(3194);var Q=new j["b"]("member_directory");var J={memberIds:g["b"].arrayOf(g["b"].string),scrollmark:g["b"].shape({key:g["b"].string,offset:g["b"].number}),searchQuery:g["b"].string,setSearchQuery:g["b"].func,filter:g["b"].string,setFilter:g["b"].func,fetchMembersPost:g["b"].func,saveScrollmark:g["b"].func,nonExactMatchMemberIds:g["b"].arrayOf(g["b"].string),isEnterprise:g["b"].bool,isFreeTeamAdmin:g["b"].bool,clogger:g["b"].shape({track:g["b"].func.isRequired}).isRequired,featureSonicMemberDirectory:g["b"].bool};var Z={memberIds:[],scrollmark:void 0,searchQuery:void 0,setSearchQuery:_["noop"],filter:"everyone",setFilter:_["noop"],fetchMembersPost:_["noop"],saveScrollmark:_["noop"],nonExactMatchMemberIds:[],isEnterprise:false,isFreeTeamAdmin:false,featureSonicMemberDirectory:false};var X=100;var $=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(a,["onScroll","onClearSearch","onViewMatchesClick","onPricingClick","setListRef","saveScrollmarkForKey","fetchPost","fetchAround","fetchMembers","fetchNonExactMatchMembers","renderRow","getListKeys","shouldFetchNonExactMembers","isFocusableItem"]);a.requestPost=null;a.requestNonExactMatchMembers=null;a.keys=null;a.list=null;a.layout=new F["a"];a.state={reachedEnd:false};a.debouncedFetchPost=Object(_["debounce"])(a.fetchPost,X);return a}h()(t,[{key:"componentDidMount",value:function e(){if(!this.props.scrollmark)return;var t=this.props.scrollmark,a=t.key,r=t.offset;this.layout.setAnchor(a,r);this.props.saveScrollmark(null)}},{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.searchQuery,n=a.filter,i=a.clogger;if(t.searchQuery===r&&t.filter===n)return;this.requestPost&&this.requestPost.cancel();this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel();this.requestPost=null;this.requestNonExactMatchMembers=null;this.layout&&this.layout.setAnchor(false);this.setReachedEnd(false,this.fetchAround);t.searchQuery!==r&&i.track("ORGANIZATION_DIRECTORY_KEYPRESS",{});t.filter!==n&&i.track("ORGANIZATION_DIRECTORY_FILTER",{organization_directory_filter:n})}},{key:"componentWillUnmount",value:function e(){this.requestPost&&this.requestPost.cancel();this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel()}},{key:"onScroll",value:function e(){this.layout.anchor&&this.layout.setAnchor(false)}},{key:"onClearSearch",value:function e(){this.props.setSearchQuery("");this.props.setFilter("everyone")}},{key:"onViewMatchesClick",value:function e(){this.props.setFilter("everyone")}},{key:"onPricingClick",value:function e(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{ui_element:"pricing_link",step:"team_directory",action:"click"}}})}},{key:"setReachedEnd",value:function e(t,a){this.setState(function(){return{reachedEnd:t}},a)}},{key:"setListRef",value:function e(t){this.list=t}},{key:"getListKeys",value:function e(){return this.props.memberIds.filter(function(e){return"L"!==e[0]})}},{key:"getFilterLabel",value:function e(){if(!this.props.featureSonicMemberDirectory)return null;var t=this.props,a=t.filter,r=t.isEnterprise;switch(a){case"everyone":return Q.t("members");case"admins":return r?Q.t("workspace admins"):Q.t("admins");case"bots":return Q.t("bots");case"org_members":return Q.t("members");case"org_admins":return Q.t("org admins");case"guests":return Q.t("guests");case"deactivated":return Q.t("deactivated members");default:return Q.t("members")}}},{key:"saveScrollmarkForKey",value:function e(t){if(!this.list)return;if(!t)return;this.props.saveScrollmark({key:t,offset:this.layout.getOffsetForKey(t)-this.list.getScrollTop()})}},{key:"fetchPost",value:function e(){var t=this;if(this.requestPost)return false;if(this.state.reachedEnd)return false;this.requestPost=this.fetchMembers();return this.requestPost.finally(function(){t.requestPost=null})}},{key:"shouldFetchNonExactMembers",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var a=this.props,r=a.filter,n=a.searchQuery;return!Object(_["isEmpty"])(n)&&"everyone"!==r&&0===t.length}},{key:"fetchMembers",value:function e(){var t=this;var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.props.fetchMembersPost({isNonExactMatchMembersSearch:a}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.nextMarker,r=e.members;!t.props.searchQuery&&a||t.setReachedEnd(true);t.shouldFetchNonExactMembers(r)&&t.fetchNonExactMatchMembers()})}},{key:"fetchAround",value:function e(){if(this.requestPost||this.state.reachedEnd)return false;return this.debouncedFetchPost()}},{key:"fetchNonExactMatchMembers",value:function e(){var t=this;if(this.requestNonExactMatchMembers)return false;var a=true;this.requestNonExactMatchMembers=this.fetchMembers(a);return this.requestNonExactMatchMembers.finally(function(){t.requestNonExactMatchMembers=null})}},{key:"isFocusableItem",value:function e(t){var a=t.key;return"L"!==a}},{key:"renderRow",value:function e(t){if(!this.props.featureSonicMemberDirectory)return null;var a=this.keys[t];if(!a)return null;switch(a[0]){case"L":return n.a.createElement("div",{className:"p-member-directory__loading"},Q.t("Loading\u2026"));default:return this.renderMember(a)}}},{key:"renderMember",value:function e(t){return n.a.createElement(z,{id:t,saveScrollmarkForKey:this.saveScrollmarkForKey})}},{key:"renderEmptyListView",value:function e(){var t=this;if(!this.props.featureSonicMemberDirectory)return null;var a=this.props,r=a.searchQuery,i=a.nonExactMatchMemberIds,s=a.filter,o=a.isFreeTeamAdmin,l=a.clogger;var c=this.getFilterLabel();var u=Q.t("Clear Search");var d=Q.t("View Matches");var p=void 0;if(i.length){p=Q.rt("No {filterLabel} match <strong>{searchQuery}</strong>, but there are other members who do.",{filterLabel:c,searchQuery:r});return n.a.createElement(L["a"],{className:"p-member-directory__empty_list",description:p,primaryActionText:d,onClickPrimaryAction:this.onViewMatchesClick,secondaryActionText:u,onClickSecondaryAction:this.onClearSearch})}if(r)p=Q.rt("No {filterLabel} found matching <strong>{searchQuery}</strong>",{searchQuery:r,filterLabel:c});else if("guests"===s&&o){p=Q.rt("Workspaces on paid plans can invite guests, like contractors, vendors, or clients. <a>See pricing plans</a>",null,function(e){var a=e.key,r=e.text;return n.a.createElement(B["a"],{key:a,href:"/pricing?ui_step=86&ui_element=5",class:"no_underline",target:"_blank",onClick:t.onPricingClick},r)});l.track("GROWTH_PRICING",{contexts:{ui_context:{step:"team_directory",action:"impression"}}})}else p=Q.rt("No {filterLabel} found",{searchQuery:r,filterLabel:c});return n.a.createElement(L["a"],{className:"p-member-directory__empty_list",description:p,primaryActionText:u,onClickPrimaryAction:this.onClearSearch})}},{key:"render",value:function e(){var t=this;this.keys=this.getListKeys();if(!this.keys.length&&this.state.reachedEnd)return this.renderEmptyListView();this.state.reachedEnd||this.keys.push("Loading"+this.keys.length);return n.a.createElement(D["a"],null,function(e){var a=e.measureRef,r=e.width,i=e.height;return n.a.createElement("div",{className:"p-member_directory__member_list",ref:a},n.a.createElement(x["a"],{width:r,height:i,keys:t.keys,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,ref:t.setListRef,loadAround:t.fetchAround,loadPost:t.debouncedFetchPost,isFocusableItem:t.isFocusableItem}))})}}]);return t}(r["PureComponent"]);$.displayName="SearchableMemberList";$.defaultProps=Z;var ee=Object(o["connect"])(function(e){return{scrollmark:Object(w["getScrollmark"])(e),searchQuery:Object(w["getSearchQuery"])(e),filter:Object(w["getFilter"])(e),memberIds:Object(w["getFlexpaneMemberIds"])(e),nonExactMatchMemberIds:Object(w["getFlexpaneNonExactMatchMemberIds"])(e),isEnterprise:Object(y["pageNeedsEnterprise"])(e),isFreeTeamAdmin:!Object(R["isPaidTeam"])(Object(P["d"])(e))&&Object(E["isAdmin"])(Object(O["b"])(e)),clogger:Object(M["a"])({state:e}),featureSonicMemberDirectory:Object(y["isFeatureEnabled"])(e,"feature_sonic_member_directory")}},{fetchMembersPost:w["fetchMembersPost"],saveScrollmark:w["saveScrollmark"],setSearchQuery:w["setSearchQuery"],setFilter:w["setFilter"]})($);var te=a(3);var ae=a.n(te);var re=a(26);var ne=a.n(re);var ie=a(301);var se=a(22);var oe=a(3196);var le=new j["b"]("member_directory");var ce={featureSonicMemberDirectory:g["b"].bool,isEnterprise:g["b"].bool,selectedFilter:g["b"].string,onMenuItemSelected:g["b"].func,workspaceName:g["b"].string,enterpriseOrgName:g["b"].string,externalWorkspaces:g["b"].array,menuProps:g["b"].object};var ue={featureSonicMemberDirectory:false,isEnterprise:false,selectedFilter:void 0,onMenuItemSelected:_["noop"],workspaceName:void 0,enterpriseOrgName:void 0,externalWorkspaces:[],menuProps:void 0};var de={everyone:"everyone",orgMembers:"org_members",orgAdmins:"org_admins",workspaceMembers:"members",workspaceAdmins:"admins",bots:"bots",guests:"guests",deactivatedMembers:"deactivated"};var pe=function(e){b()(t,e);h()(t,null,[{key:"menuSeparator",value:function e(){return{type:"separator"}}}]);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.memberDirectoryStrings=a.props.featureSonicMemberDirectory?{everyone:le.t("Everyone"),org_members:le.t("All Members"),org_admins:le.t("Org Admins"),members:le.t("All Members"),admins:a.props.isEnterprise?le.t("Workspace Admins"):le.t("Admins"),bots:le.t("Bots"),guests:le.t("Guests"),deactivated:le.t("Deactivated accounts")}:null;return a}h()(t,[{key:"getLabel",value:function e(t){return this.memberDirectoryStrings[t]}},{key:"getWorkspaceSectionLabel",value:function e(){var t=this.props,a=t.isEnterprise,r=t.externalWorkspaces,n=t.workspaceName,i=t.featureSonicMemberDirectory;if(!i)return null;var s=r.length>0;if(a)return le.t("{workspaceName} (current workspace)",{workspaceName:n});return s?n:""}},{key:"buildMenuItemTemplate",value:function e(t){var a=this.props,r=a.selectedFilter,i=a.onMenuItemSelected;var s=n.a.createElement(se["b"],{type:"check-small",className:"p-member_directory_menu--icon"});var o="p-member_directory_menu--selected-item";return{label:this.getLabel(t),click:function e(){return i(t)},icon:r===t?s:null,className:r===t?o:""}}},{key:"maybeBuildOrgFilterSection",value:function e(){var a=this.props,r=a.isEnterprise,n=a.enterpriseOrgName;if(!r)return[];var i={type:"header",label:n};return[t.menuSeparator(),i,this.buildMenuItemTemplate(de.orgMembers),this.buildMenuItemTemplate(de.orgAdmins)]}},{key:"buildWorkspaceFilterSection",value:function e(){var a=this.getWorkspaceSectionLabel();var r={type:"header",label:a};return[t.menuSeparator(),r,this.buildMenuItemTemplate(de.workspaceMembers),this.buildMenuItemTemplate(de.workspaceAdmins),this.buildMenuItemTemplate(de.guests),this.buildMenuItemTemplate(de.bots)]}},{key:"maybeBuildExternalWorkspaceSection",value:function e(){var a=this.props,r=a.workspaceName,i=a.externalWorkspaces,s=a.selectedFilter,o=a.onMenuItemSelected,l=a.featureSonicMemberDirectory;if(!l)return null;var c=i.length>0;var u=n.a.createElement(se["b"],{type:"check-small",className:"p-member_directory_menu--icon"});var d="p-member_directory_menu--selected-item";if(!c)return[];var p=le.t("Outside {workspaceName}",{workspaceName:r});var h={type:"header",label:p};var v=i.map(function(e){var t=Object(R["getTeamId"])(e);return{label:Object(R["getTeamDisplayName"])(e),click:function e(){return o(t)},icon:s===t?u:null,className:s===t?d:""}});return[t.menuSeparator(),h].concat(ne()(v))}},{key:"render",value:function e(){var a=this.props,r=a.featureSonicMemberDirectory,i=a.menuProps;if(!r)return null;var s=[this.buildMenuItemTemplate(de.everyone)].concat(ne()(this.maybeBuildOrgFilterSection()),ne()(this.buildWorkspaceFilterSection()),ne()(this.maybeBuildExternalWorkspaceSection()),[t.menuSeparator(),this.buildMenuItemTemplate(de.deactivatedMembers)]);return n.a.createElement(I["a"],ae()({},i,{template:s}))}}]);return t}(r["PureComponent"]);pe.displayName="MemberDirectoryMenu";var he=function e(t,a){var r=a.externalTeams;var n=Object(P["d"])(t);var i=Object(y["pageNeedsEnterprise"])(t);var s={featureSonicMemberDirectory:Object(y["isFeatureEnabled"])(t,"feature_sonic_member_directory"),workspaceName:Object(R["getTeamDisplayName"])(n),isEnterprise:i,externalWorkspaces:r.map(function(e){return Object(P["i"])(t,e)})};i&&(s.enterpriseOrgName=Object(ie["a"])(t));return s};pe.defaultProps=ue;var ve=Object(o["connect"])(he)(pe);var me=a(3198);var fe=new j["b"]("member_directory");var be={isEnterprise:g["b"].bool,isAdmin:g["b"].bool,setSearchQuery:g["b"].func,searchQuery:g["b"].string,setFilter:g["b"].func,filter:g["b"].string,featureSonicMemberDirectory:g["b"].bool,secondaryView:g["b"].string,flexParams:g["b"].arrayOf(g["b"].string),fetchMemberCountsForTeam:g["b"].func};var ge={isEnterprise:false,isAdmin:false,setSearchQuery:_["noop"],setFilter:_["noop"],searchQuery:"",filter:"everyone",featureSonicMemberDirectory:false,secondaryView:void 0,flexParams:[],fetchMemberCountsForTeam:_["noop"]};var _e=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(a,["onSearchInputChange","onMenuItemSelected","renderMenu","renderBody"]);a.state={externalTeams:[]};return a}h()(t,[{key:"componentDidMount",value:function e(){this.fetchExternalTeams()}},{key:"onSearchInputChange",value:function e(t){var a=t.target.value||"";this.props.setSearchQuery(a)}},{key:"onMenuItemSelected",value:function e(t){this.props.setFilter(t)}},{key:"getTitle",value:function e(){var t=this.props,a=t.featureSonicMemberDirectory,r=t.isEnterprise;if(!a)return null;var i=this.props.isAdmin&&n.a.createElement(A["c"],{tip:fe.t("Manage members"),position:"bottom-right"},n.a.createElement(T["a"],{icon:"cog-o",href:"/admin",className:"p-member_directory__header__manage"}));var s=r?fe.t("Organization Directory"):fe.t("Workspace Directory");return n.a.createElement("div",{className:"p-member_directory__header"},s,i)}},{key:"fetchExternalTeams",value:function e(){var t=this;this.props.fetchMemberCountsForTeam().then(function(e){if(!e||!e.external_teams)return;t.setState(function(){return{externalTeams:Object.keys(e.external_teams)}})})}},{key:"renderSearch",value:function e(){if(!this.props.featureSonicMemberDirectory)return null;return n.a.createElement("div",{className:"p-member_directory__search"},n.a.createElement(S["a"],{value:this.props.searchQuery,onChange:this.onSearchInputChange,placeholder:fe.t("Search by name or title"),icon:"search"}))}},{key:"renderMenu",value:function e(t){return n.a.createElement(ve,{onMenuItemSelected:this.onMenuItemSelected,selectedFilter:this.props.filter,menuProps:t,externalTeams:this.state.externalTeams})}},{key:"renderFilterIconButton",value:function e(){var t="everyone"!==this.props.filter;return n.a.createElement(I["e"],{renderMenu:this.renderMenu,position:"bottom-left"},n.a.createElement(T["a"],{icon:"filters","data-qa":"p-member_directory_menu_trigger",showBadge:t}))}},{key:"renderBody",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-member_directory__search_filter_container","data-qa":"member_directory"},this.renderSearch(),this.renderFilterIconButton()),n.a.createElement(ee,null))}},{key:"render",value:function e(){var t=this.props,a=t.secondaryView,r=t.flexParams;if("team"!==a&&"directory"!==a)return null;if(r.length)return null;return n.a.createElement(N["a"],{title:this.getTitle(),renderBody:this.renderBody,kbNavOrder:5,viewId:"member-directory"})}}]);return t}(r["PureComponent"]);_e.displayName="MemberDirectoryFlexpane";_e.defaultProps=ge;var ye=function e(t){return{featureSonicMemberDirectory:Object(y["isFeatureEnabled"])(t,"feature_sonic_member_directory"),isEnterprise:Object(y["pageNeedsEnterprise"])(t),isAdmin:Object(E["isAdmin"])(Object(O["b"])(t)),searchQuery:Object(w["getSearchQuery"])(t),filter:Object(w["getFilter"])(t),secondaryView:Object(k["g"])(t),flexParams:Object(k["c"])(t)}};var Oe={setSearchQuery:function e(){return w["setSearchQuery"].apply(void 0,arguments)},setFilter:function e(){return w["setFilter"].apply(void 0,arguments)},fetchMemberCountsForTeam:function e(){return C["b"].apply(void 0,arguments)}};var ke=Object(o["connect"])(ye,Oe)(_e);var Ee=ke;var Ce=a(163);var je=function e(t,a){if(!t)throw new Error("mountMemberDirectoryFlexpane must be called with a teamId parameter");var r=Object(c["d"])(t);Object(l["a"])(n.a.createElement(o["Provider"],{store:r},n.a.createElement(Ce["a"],null,n.a.createElement(Ee,null))),a)};var we=function e(t){s.a.unmountComponentAtNode(t)};var Se=a(44);Object(Se["a"])("interop.mountMemberDirectoryFlexpane",je);Object(Se["a"])("interop.unmountMemberDirectoryFlexpane",we)},,,function(e,t,a){"use strict";var r=a(2);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(0);var l=a(10);var c=a(28);var u=a(81);var d=a(3296);var p=a.n(d);var h=new l["b"]("threads");var v={tryAgain:o["b"].func,"data-qa":o["b"].string,children:o["b"].node};var m={tryAgain:r["noop"],"data-qa":"message_container_error",children:null};function f(e){var t=e.tryAgain,a=e["data-qa"],r=e.children;return s.a.createElement("div",{className:"p-message_container_error","data-qa":a},s.a.createElement("div",{className:"p-message_container_error__contents"},s.a.createElement("div",{className:"p-message_container_error__emoji"},s.a.createElement(u["b"],{text:":tropical_fish:",emojiSize:u["a"].LARGE})),s.a.createElement("p",{className:"p-message_container_error__msg"},r),s.a.createElement(c["d"],{type:"primary",onClick:t,"data-qa":a+"_try_again"},h.t("Try Again"))))}f.displayName="MessageContainerError";f.defaultProps=m;t["a"]=f},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(0);var p=a(1);var h=a.n(p);var v=a(13);var m=a(16);var f=a.n(m);var b=a(2);var g=a.n(b);var _=a(67);var y=a(4);var O=a(41);var k=a(100);var E=a(10);var C=a(187);var j=new E["b"]("message");var w={ts:d["b"].string.isRequired,threadTs:d["b"].string.isRequired,channelId:d["b"].string.isRequired,latestReply:d["b"].string.isRequired,className:d["b"].string,showThread:d["b"].func,featureNewRepliesAfterBcast:d["b"].bool};var S={className:void 0,showThread:b["noop"],featureNewRepliesAfterBcast:false};var I=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}s()(t,[{key:"onClick",value:function e(t){var a=this.props,r=a.channelId,n=a.threadTs,i=a.ts;t.preventDefault();this.props.showThread({channelId:r,threadTs:n,highlightTs:i})}},{key:"render",value:function e(){var t=this.props,a=t.ts,r=t.latestReply,n=t.featureNewRepliesAfterBcast;if(!n||!r)return null;if(r<=a)return null;var i=f()("c-message__broadcast_footer",this.props.className);return h.a.createElement(C["a"],{className:i,onClick:this.onClick},j.t("View newer replies"))}}]);return t}(p["PureComponent"]);I.displayName="ThreadBroadcastFooter";I.defaultProps=S;var T=function e(t,a){var r=a.channelId,n=a.threadTs;var i=Object(_["a"])(t,r,n);return{latestReply:Object(O["getLatestReply"])(i),featureNewRepliesAfterBcast:Object(y["isFeatureEnabled"])(t,"feature_new_replies_after_bcast")}};t["a"]=Object(v["connect"])(T,{showThread:k["l"]})(I)},function(e,t,a){"use strict";var r=a(5);var n=a.n(r);var i=a(10);var s={default:{tada:cdn_url+"/69c58/img/unread/empty/default/1f389.png",victory:{1:cdn_url+"/69c58/img/unread/empty/default/270c-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/default/270c-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/default/270c-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/default/270c-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/default/270c-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/default/270c-1f3ff.png"},racecar:cdn_url+"/69c58/img/unread/empty/default/1f3ce-fe0f.png",rocket:cdn_url+"/69c58/img/unread/empty/default/1f680.png",octopus:cdn_url+"/69c58/img/unread/empty/default/1f419.png",high5:{1:cdn_url+"/69c58/img/unread/empty/default/1f64c.png",2:cdn_url+"/69c58/img/unread/empty/default/1f64c-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/default/1f64c-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/default/1f64c-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/default/1f64c-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/default/1f64c-1f3ff.png"},apple:cdn_url+"/69c58/img/unread/empty/default/1f34f.png",sunglasses:cdn_url+"/69c58/img/unread/empty/default/1f60e.png",thumbup:{1:cdn_url+"/69c58/img/unread/empty/default/1f44d.png",2:cdn_url+"/69c58/img/unread/empty/default/1f44d-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/default/1f44d-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/default/1f44d-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/default/1f44d-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/default/1f44d-1f3ff.png"},boom:cdn_url+"/69c58/img/unread/empty/default/1f4a5.png",bee:cdn_url+"/69c58/img/unread/empty/default/1f41d.png",clap:{1:cdn_url+"/69c58/img/unread/empty/default/1f44f.png",2:cdn_url+"/69c58/img/unread/empty/default/1f44f-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/default/1f44f-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/default/1f44f-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/default/1f44f-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/default/1f44f-1f3ff.png"},crystalball:cdn_url+"/69c58/img/unread/empty/default/1f52e.png",tractor:cdn_url+"/69c58/img/unread/empty/default/1f69c.png",pony:cdn_url+"/69c58/img/unread/empty/default/1f434.png",chick:cdn_url+"/69c58/img/unread/empty/default/1f423.png",growth:cdn_url+"/69c58/img/unread/empty/default/1f331.png",sun:cdn_url+"/69c58/img/unread/empty/default/2600-fe0f.png",balloon:cdn_url+"/69c58/img/unread/empty/default/1f388.png",sweetpotato:cdn_url+"/69c58/img/unread/empty/default/1f360.png",leafs:cdn_url+"/69c58/img/unread/empty/default/1f343.png",owl:cdn_url+"/69c58/img/unread/empty/default/1f989.png",books:cdn_url+"/69c58/img/unread/empty/default/1f4da.png",island:cdn_url+"/69c58/img/unread/empty/default/1f3dd-fe0f.png",coffee:cdn_url+"/69c58/img/unread/empty/default/2615.png",footprints:cdn_url+"/69c58/img/unread/empty/default/1f463.png",tea:cdn_url+"/69c58/img/unread/empty/default/1f375.png",croissant:cdn_url+"/69c58/img/unread/empty/default/1f950.png",art:cdn_url+"/69c58/img/unread/empty/default/1f3a8.png",person_ball:{1:cdn_url+"/69c58/img/unread/empty/default/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/default/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/69c58/img/unread/empty/default/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/69c58/img/unread/empty/default/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/69c58/img/unread/empty/default/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/69c58/img/unread/empty/default/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/69c58/img/unread/empty/default/2708-fe0f.png",sailboat:cdn_url+"/69c58/img/unread/empty/default/26f5.png",ship:cdn_url+"/69c58/img/unread/empty/default/1f6a2.png",bulb:cdn_url+"/69c58/img/unread/empty/default/1f4a1.png",hammer:cdn_url+"/69c58/img/unread/empty/default/1f528.png",checkered_flag:cdn_url+"/69c58/img/unread/empty/default/1f3c1.png",wrench:cdn_url+"/69c58/img/unread/empty/default/1f527.png",metro:cdn_url+"/69c58/img/unread/empty/default/1f687.png",soccer:cdn_url+"/69c58/img/unread/empty/default/26bd.png",trophy:cdn_url+"/69c58/img/unread/empty/default/1f3c6.png",cityscape:cdn_url+"/69c58/img/unread/empty/default/1f3d9-fe0f.png",dog:cdn_url+"/69c58/img/unread/empty/default/1f436.png",crossed_swords:cdn_url+"/69c58/img/unread/empty/default/2694-fe0f.png",blush:cdn_url+"/69c58/img/unread/empty/default/1f60a.png",candy:cdn_url+"/69c58/img/unread/empty/default/1f36c.png",herb:cdn_url+"/69c58/img/unread/empty/default/1f33f.png",sparkles:cdn_url+"/69c58/img/unread/empty/default/2728.png",check_mark:cdn_url+"/69c58/img/unread/empty/default/2705.png",confetti_ball:cdn_url+"/69c58/img/unread/empty/default/1f38a.png",doughnut:cdn_url+"/69c58/img/unread/empty/default/1f369.png",bookmark_tabs:cdn_url+"/69c58/img/unread/empty/default/1f4d1.png",sleuth:{1:cdn_url+"/69c58/img/unread/empty/default/1f575-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/default/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/69c58/img/unread/empty/default/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/69c58/img/unread/empty/default/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/69c58/img/unread/empty/default/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/69c58/img/unread/empty/default/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/69c58/img/unread/empty/default/23f3.png",newspaper:cdn_url+"/69c58/img/unread/empty/default/1f5de-fe0f.png",flex:{1:cdn_url+"/69c58/img/unread/empty/default/1f4aa.png",2:cdn_url+"/69c58/img/unread/empty/default/1f4aa-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/default/1f4aa-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/default/1f4aa-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/default/1f4aa-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/default/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/7ff4/img/unread/empty/default/1f30e.png",chocolate_bar:cdn_url+"/7ff4/img/unread/empty/default/1f36b.png",wave:{1:cdn_url+"/7ff4/img/unread/empty/default/1f44b.png",2:cdn_url+"/7ff4/img/unread/empty/default/1f44b-1f3fb.png",3:cdn_url+"/7ff4/img/unread/empty/default/1f44b-1f3fc.png",4:cdn_url+"/7ff4/img/unread/empty/default/1f44b-1f3fd.png",5:cdn_url+"/7ff4/img/unread/empty/default/1f44b-1f3fe.png",6:cdn_url+"/7ff4/img/unread/empty/default/1f44b-1f3ff.png"},relieved:cdn_url+"/7ff4/img/unread/empty/default/1f60c.png",walking:{1:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/7ff4/img/unread/empty/default/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/7ff4/img/unread/empty/default/1f6cb.png",unicorn_face:cdn_url+"/7ff4/img/unread/empty/default/1f984.png",zap:cdn_url+"/7ff4/img/unread/empty/default/26a1.png",star:cdn_url+"/7ff4/img/unread/empty/default/2b50.png"},google:{tada:cdn_url+"/69c58/img/unread/empty/google/1f389.png",victory:{1:cdn_url+"/69c58/img/unread/empty/google/270c-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/google/270c-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/google/270c-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/google/270c-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/google/270c-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/google/270c-1f3ff.png"},racecar:cdn_url+"/69c58/img/unread/empty/google/1f3ce-fe0f.png",rocket:cdn_url+"/69c58/img/unread/empty/google/1f680.png",octopus:cdn_url+"/69c58/img/unread/empty/google/1f419.png",high5:{1:cdn_url+"/69c58/img/unread/empty/google/1f64c.png",2:cdn_url+"/69c58/img/unread/empty/google/1f64c-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/google/1f64c-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/google/1f64c-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/google/1f64c-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/google/1f64c-1f3ff.png"},apple:cdn_url+"/69c58/img/unread/empty/google/1f34f.png",sunglasses:cdn_url+"/69c58/img/unread/empty/google/1f60e.png",thumbup:{1:cdn_url+"/69c58/img/unread/empty/google/1f44d.png",2:cdn_url+"/69c58/img/unread/empty/google/1f44d-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/google/1f44d-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/google/1f44d-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/google/1f44d-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/google/1f44d-1f3ff.png"},boom:cdn_url+"/69c58/img/unread/empty/google/1f4a5.png",bee:cdn_url+"/69c58/img/unread/empty/google/1f41d.png",clap:{1:cdn_url+"/69c58/img/unread/empty/google/1f44f.png",2:cdn_url+"/69c58/img/unread/empty/google/1f44f-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/google/1f44f-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/google/1f44f-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/google/1f44f-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/google/1f44f-1f3ff.png"},crystalball:cdn_url+"/69c58/img/unread/empty/google/1f52e.png",tractor:cdn_url+"/69c58/img/unread/empty/google/1f69c.png",pony:cdn_url+"/69c58/img/unread/empty/google/1f434.png",chick:cdn_url+"/69c58/img/unread/empty/google/1f423.png",growth:cdn_url+"/69c58/img/unread/empty/google/1f331.png",sun:cdn_url+"/69c58/img/unread/empty/google/2600-fe0f.png",balloon:cdn_url+"/69c58/img/unread/empty/google/1f388.png",sweetpotato:cdn_url+"/69c58/img/unread/empty/google/1f360.png",leafs:cdn_url+"/69c58/img/unread/empty/google/1f343.png",owl:cdn_url+"/69c58/img/unread/empty/google/1f989.png",books:cdn_url+"/69c58/img/unread/empty/google/1f4da.png",island:cdn_url+"/69c58/img/unread/empty/google/1f3dd-fe0f.png",coffee:cdn_url+"/69c58/img/unread/empty/google/2615.png",footprints:cdn_url+"/69c58/img/unread/empty/google/1f463.png",tea:cdn_url+"/69c58/img/unread/empty/google/1f375.png",croissant:cdn_url+"/69c58/img/unread/empty/google/1f950.png",art:cdn_url+"/69c58/img/unread/empty/google/1f3a8.png",person_ball:{1:cdn_url+"/69c58/img/unread/empty/google/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/google/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/69c58/img/unread/empty/google/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/69c58/img/unread/empty/google/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/69c58/img/unread/empty/google/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/69c58/img/unread/empty/google/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/69c58/img/unread/empty/google/2708-fe0f.png",sailboat:cdn_url+"/69c58/img/unread/empty/google/26f5.png",ship:cdn_url+"/69c58/img/unread/empty/google/1f6a2.png",bulb:cdn_url+"/69c58/img/unread/empty/google/1f4a1.png",hammer:cdn_url+"/69c58/img/unread/empty/google/1f528.png",checkered_flag:cdn_url+"/69c58/img/unread/empty/google/1f3c1.png",wrench:cdn_url+"/69c58/img/unread/empty/google/1f527.png",metro:cdn_url+"/69c58/img/unread/empty/google/1f687.png",soccer:cdn_url+"/69c58/img/unread/empty/google/26bd.png",trophy:cdn_url+"/69c58/img/unread/empty/google/1f3c6.png",cityscape:cdn_url+"/69c58/img/unread/empty/google/1f3d9-fe0f.png",dog:cdn_url+"/69c58/img/unread/empty/google/1f436.png",crossed_swords:cdn_url+"/69c58/img/unread/empty/google/2694-fe0f.png",blush:cdn_url+"/69c58/img/unread/empty/google/1f60a.png",candy:cdn_url+"/69c58/img/unread/empty/google/1f36c.png",herb:cdn_url+"/69c58/img/unread/empty/google/1f33f.png",sparkles:cdn_url+"/69c58/img/unread/empty/google/2728.png",check_mark:cdn_url+"/69c58/img/unread/empty/google/2705.png",confetti_ball:cdn_url+"/69c58/img/unread/empty/google/1f38a.png",doughnut:cdn_url+"/69c58/img/unread/empty/google/1f369.png",bookmark_tabs:cdn_url+"/69c58/img/unread/empty/google/1f4d1.png",sleuth:{1:cdn_url+"/69c58/img/unread/empty/google/1f575-fe0f.png",2:cdn_url+"/69c58/img/unread/empty/google/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/69c58/img/unread/empty/google/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/69c58/img/unread/empty/google/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/69c58/img/unread/empty/google/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/69c58/img/unread/empty/google/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/69c58/img/unread/empty/google/23f3.png",newspaper:cdn_url+"/69c58/img/unread/empty/google/1f5de-fe0f.png",flex:{1:cdn_url+"/69c58/img/unread/empty/google/1f4aa.png",2:cdn_url+"/69c58/img/unread/empty/google/1f4aa-1f3fb.png",3:cdn_url+"/69c58/img/unread/empty/google/1f4aa-1f3fc.png",4:cdn_url+"/69c58/img/unread/empty/google/1f4aa-1f3fd.png",5:cdn_url+"/69c58/img/unread/empty/google/1f4aa-1f3fe.png",6:cdn_url+"/69c58/img/unread/empty/google/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/7ff4/img/unread/empty/google/1f30e.png",chocolate_bar:cdn_url+"/7ff4/img/unread/empty/google/1f36b.png",wave:{1:cdn_url+"/7ff4/img/unread/empty/google/1f44b.png",2:cdn_url+"/7ff4/img/unread/empty/google/1f44b-1f3fb.png",3:cdn_url+"/7ff4/img/unread/empty/google/1f44b-1f3fc.png",4:cdn_url+"/7ff4/img/unread/empty/google/1f44b-1f3fd.png",5:cdn_url+"/7ff4/img/unread/empty/google/1f44b-1f3fe.png",6:cdn_url+"/7ff4/img/unread/empty/google/1f44b-1f3ff.png"},relieved:cdn_url+"/7ff4/img/unread/empty/google/1f60c.png",walking:{1:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/7ff4/img/unread/empty/google/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/7ff4/img/unread/empty/google/1f6cb.png",unicorn_face:cdn_url+"/7ff4/img/unread/empty/google/1f984.png",zap:cdn_url+"/7ff4/img/unread/empty/google/26a1.png",star:cdn_url+"/7ff4/img/unread/empty/google/2b50.png"}};var o=[{emoji:"airplane",skintone:false,lineOne:"Jetzt bist du startklar.",lineTwo:""},{emoji:"art",skintone:false,lineOne:"Alles paletti!",lineTwo:""},{emoji:"bee",skintone:false,lineOne:"Geschafft!",lineTwo:"Ganz sch\xf6n flei\xdfig."},{emoji:"books",skintone:false,lineOne:"Alles gelesen.",lineTwo:"Wie es im Buche steht."},{emoji:"boom",skintone:false,lineOne:"Du bist der Knaller!",lineTwo:""},{emoji:"bulb",skintone:false,lineOne:"Heureka!",lineTwo:"Du hast ALLES gelesen!"},{emoji:"checkered_flag",skintone:false,lineOne:"Du bist am Ziel angelangt!",lineTwo:"Du hast alles gelesen!"},{emoji:"clap",skintone:true,lineOne:"Das war das T\xfcpfelchen auf dem i.",lineTwo:""},{emoji:"croissant",skintone:false,lineOne:"Voil\xe0!",lineTwo:"Das war es auch schon."},{emoji:"crystalball",skintone:false,lineOne:"Alles klar.",lineTwo:"Die Zukunft geh\xf6rt dir!"},{emoji:"footprints",skintone:false,lineOne:"Gut gemacht.",lineTwo:"Jetzt liegt dir die Welt zu F\xfc\xdfen!"},{emoji:"hammer",skintone:false,lineOne:"Du bist der Hammer!",lineTwo:"Alles gelesen!"},{emoji:"high5",skintone:true,lineOne:"Geschafft!",lineTwo:"Das war alles."},{emoji:"metro",skintone:false,lineOne:"Hier ist das Licht am Ende des Tunnels!",lineTwo:""},{emoji:"island",skintone:false,lineOne:"Land in Sicht!",lineTwo:"Du hast alles gelesen!"},{emoji:"person_ball",skintone:true,lineOne:"Immer am Ball bleiben!",lineTwo:""},{emoji:"rocket",skintone:false,lineOne:"Du hast ein ganz sch\xf6nes Lesetempo drauf!",lineTwo:""},{emoji:"sailboat",skintone:false,lineOne:"Alles im Lot auf dem Boot.",lineTwo:""},{emoji:"sailboat",skintone:false,lineOne:"Alles in Butter auf dem Kutter!",lineTwo:""},{emoji:"ship",skintone:false,lineOne:"Klar Schiff!",lineTwo:""},{emoji:"soccer",skintone:false,lineOne:"Volltreffer! ",lineTwo:"Du hast alles gelesen!"},{emoji:"sun",skintone:false,lineOne:"Alles heiter und klar!",lineTwo:""},{emoji:"sunglasses",skintone:false,lineOne:"Alles klar!",lineTwo:""},{emoji:"tada",skintone:false,lineOne:"Ta-da !",lineTwo:"Du bist jetzt ganz sch\xf6n belesen."},{emoji:"tea",skintone:false,lineOne:"Du hast alles aufgeholt.",lineTwo:"Zeit f\xfcr eine kleine Pause."},{emoji:"thumbup",skintone:true,lineOne:"Du bist ganz sch\xf6n auf Zack!",lineTwo:""},{emoji:"victory",skintone:true,lineOne:"Alles erledigt!",lineTwo:"Das ist das A und O."},{emoji:"wrench",skintone:false,lineOne:"Ganz sch\xf6n fix!",lineTwo:""}];var l=[{emoji:"chocolate_bar",skintone:false,lineOne:"You\u2019ve read everything you need to.",lineTwo:"Take a little break."},{emoji:"balloon",skintone:false,lineOne:"There, all caught up.",lineTwo:"Turn your mind to something new."},{emoji:"bee",skintone:false,lineOne:"You\u2019re up to date.",lineTwo:"Go on and do great things."},{emoji:"zap",skintone:false,lineOne:"Boom!",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:true,lineOne:"Everything unread has now been read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:false,lineOne:"Everything\u2019s sorted.",lineTwo:"Let\u2019s do something else."},{emoji:"crystalball",skintone:false,lineOne:"All that was unread has now been read.",lineTwo:"But what\u2019s next?"},{emoji:"high5",skintone:true,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"check_mark",skintone:false,lineOne:"Done and dusted.",lineTwo:""},{emoji:"octopus",skintone:false,lineOne:"All sorted.",lineTwo:"The world is your oyster."},{emoji:"unicorn_face",skintone:false,lineOne:"You\u2019ve read it all.",lineTwo:"Here\u2019s a unicorn."},{emoji:"racecar",skintone:false,lineOne:"Right!",lineTwo:"All caught up."},{emoji:"rocket",skintone:false,lineOne:"That\u2019s it.",lineTwo:"The future is yours."},{emoji:"sailboat",skintone:false,lineOne:"You\u2019ve caught up on everything.",lineTwo:"Plain sailing from now on."},{emoji:"sunglasses",skintone:false,lineOne:"All clear.",lineTwo:""},{emoji:"coffee",skintone:false,lineOne:"You\u2019ve got through the lot!",lineTwo:"Pop the kettle on?"},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019re all up to date."},{emoji:"couch_and_lamp",skintone:false,lineOne:"That\u2019s you sorted.",lineTwo:"Put your feet up."},{emoji:"tractor",skintone:false,lineOne:"You\u2019ve read everything.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:true,lineOne:"Caught up on everything.",lineTwo:"What\u2019s next?"}];var c=[{emoji:"apple",skintone:false,lineOne:"You\u2019ve read all you needed.",lineTwo:"Take a moment."},{emoji:"balloon",skintone:false,lineOne:"There! Caught up.",lineTwo:"Set your mind to something new."},{emoji:"bee",skintone:false,lineOne:"You\u2019re up to date.",lineTwo:"Go forth and do great things."},{emoji:"boom",skintone:false,lineOne:"Boom.",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:true,lineOne:"Everything unread is now read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:false,lineOne:"Everything\u2019s sorted!",lineTwo:"Let\u2019s start something new."},{emoji:"crystalball",skintone:false,lineOne:"All that was unread is now read.",lineTwo:"What\u2019s next?"},{emoji:"high5",skintone:true,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"leafs",skintone:false,lineOne:"Done and done.",lineTwo:""},{emoji:"octopus",skintone:false,lineOne:"All done.",lineTwo:"The world is your oyster."},{emoji:"pony",skintone:false,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a pony."},{emoji:"racecar",skintone:false,lineOne:"There.",lineTwo:"All caught up."},{emoji:"rocket",skintone:false,lineOne:"All done.",lineTwo:"The future is yours."},{emoji:"sun",skintone:false,lineOne:"You\u2019re all caught up!",lineTwo:"Clear screens ahead."},{emoji:"sunglasses",skintone:false,lineOne:"All clear.",lineTwo:""},{emoji:"sweetpotato",skintone:false,lineOne:"Sweet potato!",lineTwo:"You\u2019re all done."},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:false,lineOne:"Ta-da!",lineTwo:"You\u2019re up to date."},{emoji:"thumbup",skintone:true,lineOne:"That\u2019s that.",lineTwo:"You\u2019re good to go."},{emoji:"tractor",skintone:false,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:true,lineOne:"All caught up.",lineTwo:"What\u2019s next?"}];var u=[{emoji:"boom",skintone:false,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"chick",skintone:false,lineOne:"Est\xe1s al d\xeda.",lineTwo:"Es hora de salir a hacer algo estupendo."},{emoji:"candy",skintone:false,lineOne:"Has le\xeddo todo.",lineTwo:"Aqu\xed tienes un caramelo de regalo."},{emoji:"cityscape",skintone:false,lineOne:"Has terminado de leer.",lineTwo:"Tienes el mundo a tus pies."},{emoji:"checkered_flag",skintone:false,lineOne:"Has terminado de leer.",lineTwo:"\xbfY ahora qu\xe9 sigue?"},{emoji:"flex",skintone:true,lineOne:"Has terminado de leer.",lineTwo:"\xa1Lo lograste!"},{emoji:"high5",skintone:true,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"hourglass",skintone:false,lineOne:"Has terminado de leer.",lineTwo:"El futuro es tuyo."},{emoji:"leafs",skintone:false,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"newspaper",skintone:false,lineOne:"Ya est\xe1s al d\xeda con tu lectura.",lineTwo:"Ahora puedes tomarte un descanso."},{emoji:"rocket",skintone:false,lineOne:"\xa1Listo! Est\xe1s al tanto de todo.",lineTwo:"Ahora puedes proponerte algo nuevo."},{emoji:"sunglasses",skintone:false,lineOne:"El pron\xf3stico se ve despejado.",lineTwo:""},{emoji:"sleuth",skintone:true,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"sleuth",skintone:true,lineOne:"Listo.",lineTwo:"Ya est\xe1s al tanto de todo."},{emoji:"tada",skintone:false,lineOne:"\xa1Enhorabuena!",lineTwo:"Has le\xeddo todo lo que hab\xeda que leer."},{emoji:"trophy",skintone:false,lineOne:"\xa1Al fin!",lineTwo:"Ya has terminado."}];var d=[{emoji:"apple",skintone:false,lineOne:"Est\xe1s al d\xeda con la lectura.",lineTwo:"T\xf3mate un descanso."},{emoji:"balloon",skintone:false,lineOne:"\xa1Listo! Est\xe1s al d\xeda.",lineTwo:"Centra tu mente en algo nuevo."},{emoji:"bee",skintone:false,lineOne:"Est\xe1s al d\xeda.",lineTwo:"\xa1Ve a conquistar el mundo!"},{emoji:"boom",skintone:false,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"clap",skintone:true,lineOne:"Terminaste de leer todo.",lineTwo:"\xa1Lo lograste!"},{emoji:"growth",skintone:false,lineOne:"\xa1Todo resuelto!",lineTwo:"Empecemos algo nuevo."},{emoji:"crystalball",skintone:false,lineOne:"Le\xedste todo lo que hab\xeda que leer.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"high5",skintone:true,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"leafs",skintone:false,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"octopus",skintone:false,lineOne:"Todo listo.",lineTwo:"El mundo est\xe1 a tus pies."},{emoji:"pony",skintone:false,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un poni."},{emoji:"racecar",skintone:false,lineOne:"!Bien hecho!",lineTwo:"Est\xe1s al tanto de todo."},{emoji:"rocket",skintone:false,lineOne:"Todo listo.",lineTwo:"El futuro es tuyo."},{emoji:"sun",skintone:false,lineOne:"Ya est\xe1s al tanto de todo.",lineTwo:"\xa1Pantalla despejada!"},{emoji:"sunglasses",skintone:false,lineOne:"\xa1Todo despejado!",lineTwo:""},{emoji:"sweetpotato",skintone:false,lineOne:"\xa1Qu\xe9 belleza!",lineTwo:"Ya terminaste."},{emoji:"tada",skintone:false,lineOne:"\xa1Felicidades!",lineTwo:"Le\xedste todo lo que hab\xeda que leer."},{emoji:"tada",skintone:false,lineOne:"\xa1Felicidades!",lineTwo:"Est\xe1s al d\xeda."},{emoji:"thumbup",skintone:true,lineOne:"Eso es todo.",lineTwo:"Puedes seguir con tus otras tareas."},{emoji:"tractor",skintone:false,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un tractor."},{emoji:"victory",skintone:true,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"}];var p=[{emoji:"balloon",skintone:false,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On se sent d\xe9j\xe0 plus l\xe9ger."},{emoji:"bee",skintone:false,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On d\xe9colle mieux face au vent, courage !"},{emoji:"books",skintone:false,lineOne:"Lu et relu !",lineTwo:""},{emoji:"boom",skintone:false,lineOne:"Boum !",lineTwo:"Vous \xeates \xe0 jour."},{emoji:"clap",skintone:true,lineOne:"Bravo !",lineTwo:"Vous avez tout lu."},{emoji:"coffee",skintone:false,lineOne:"Vous avez tout lu !",lineTwo:"Une pause s\u2019impose !"},{emoji:"crystalball",skintone:false,lineOne:"Vous avez tout lu !",lineTwo:"Que vous r\xe9serve l\u2019avenir ?"},{emoji:"high5",skintone:true,lineOne:"C\u2019est tout !",lineTwo:""},{emoji:"island",skintone:false,lineOne:"Termin\xe9 !",lineTwo:"Vous pouvez vous la couler douce !"},{emoji:"owl",skintone:false,lineOne:"Chouette !",lineTwo:"Vous avez termin\xe9."},{emoji:"racecar",skintone:false,lineOne:"Voil\xe0 !",lineTwo:"Vous \xeates sur la bonne voie."},{emoji:"rocket",skintone:false,lineOne:"Termin\xe9 !",lineTwo:"L\u2019avenir vous appartient."},{emoji:"sun",skintone:false,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"L\u2019horizon est d\xe9gag\xe9."},{emoji:"sunglasses",skintone:false,lineOne:"Tout est \xe0 jour.",lineTwo:""},{emoji:"tada",skintone:false,lineOne:"Tadam !",lineTwo:"Vous avez tout lu."},{emoji:"thumbup",skintone:true,lineOne:"\xc7a y est !",lineTwo:"Vous avez fini."},{emoji:"victory",skintone:true,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"Quelle est la suite du programme ?"}];var h=[{emoji:"blush",skintone:false,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u4ee5\u4e0a\u3067\u3059\u3002",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"bookmark_tabs",skintone:false,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01\u6e96\u5099\u4e07\u7aef\uff01",lineTwo:"\u3055\u3042\u3001\u4f55\u304b\u3089\u3084\u308a\u307e\u3059\u304b\uff1f"},{emoji:"candy",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u306f\u3044\u3001\u30a2\u30e1\u3061\u3083\u3093\uff01"},{emoji:"check_mark",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3084\u308b\u3053\u3068\u30ea\u30b9\u30c8\u304b\u30891\u3064\u6d88\u3048\u307e\u3057\u305f\uff01"},{emoji:"cityscape",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u9060\u304f\u3092\u898b\u308b\u3068\u75b2\u308c\u76ee\u306b\u3044\u3044\u3089\u3057\u3044\u3067\u3059\u3088\uff1f"},{emoji:"coffee",skintone:false,lineOne:"\u3059\u3079\u3066\u306e\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002",lineTwo:"\u3061\u3087\u3063\u3068\u4e00\u606f\u5165\u308c\u307e\u305b\u3093\u304b\uff1f"},{emoji:"confetti_ball",skintone:false,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u8aad\u4e86\u3092\u9054\u6210\u3057\u307e\u3057\u305f\uff01",lineTwo:""},{emoji:"crossed_swords",skintone:false,lineOne:"\u307f\u3069\u304f\u3000\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u3000\u3084\u3063\u3064\u3051\u305f\u3002",lineTwo:"\u304b\u3057\u3053\u3055\u304c\u3000\uff11\u30dd\u30a4\u30f3\u30c8\u3000\u3042\u304c\u3063\u305f\uff01"},{emoji:"dog",skintone:false,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u30ef\u30f3\u3060\u3075\u308b\uff01"},{emoji:"doughnut",skintone:false,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3061\u3087\u3063\u3068\u4f11\u61a9\u3057\u3066\u3001\u75b2\u308c\u305f\u8133\u306b\u7cd6\u5206\u88dc\u7d66"},{emoji:"herb",skintone:false,lineOne:"\u672a\u8aad\u30b9\u30c3\u30ad\u30ea\uff01\u6c17\u5206\u3082\u30b9\u30c3\u30ad\u30ea\uff01",lineTwo:""},{emoji:"leafs",skintone:false,lineOne:"\u5168\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u65e2\u8aad\u306b\u306a\u308a\u307e\u3057\u305f\u3002",lineTwo:"\u305d\u308c\u306f\u305d\u308c\u3067\u3001\u3061\u3087\u3063\u3068\u5bc2\u3057\u3044\u2026\uff1f"},{emoji:"rocket",skintone:false,lineOne:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01",lineTwo:"\u3053\u306e\u8abf\u5b50\u3067\u3069\u3093\u3069\u3093\u884c\u3063\u3061\u3083\u3044\u307e\u3057\u3087\u3046\uff01"},{emoji:"sparkles",skintone:false,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3001\u305c\u3093\u3076\u30ad\u30ec\u30a4\u306b\u7247\u4ed8\u304d\u307e\u3057\u305f\u3002",lineTwo:""},{emoji:"tada",skintone:false,lineOne:"\u3059\u3054\u3044\uff01",lineTwo:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01"},{emoji:"tea",skintone:false,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"trophy",skintone:false,lineOne:"\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01",lineTwo:"\u5168\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\u3067\u3059\uff01"},{emoji:"victory",skintone:true,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:""},{emoji:"sleuth",skintone:true,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092",lineTwo:"\u6f0f\u308c\u306a\u304f\u3059\u3079\u3066\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002"}];var v=[{emoji:"apple",skintone:false,lineOne:"Voc\xea j\xe1 leu tudo.",lineTwo:"Agora fa\xe7a uma pausa."},{emoji:"balloon",skintone:false,lineOne:"Pronto!",lineTwo:"Agora voc\xea j\xe1 pode partir para outra."},{emoji:"bee",skintone:false,lineOne:"Tudo em dia.",lineTwo:"Voc\xea est\xe1 pronto para outra."},{emoji:"flex",skintone:true,lineOne:"Feito!",lineTwo:"Voc\xea leu todas as suas mensagens."},{emoji:"clap",skintone:true,lineOne:"Todas as n\xe3o lidas foram lidas.",lineTwo:"Parab\xe9ns!"},{emoji:"relieved",skintone:false,lineOne:"Miss\xe3o cumprida!",lineTwo:"Pronto para algo novo."},{emoji:"crystalball",skintone:false,lineOne:"Agora voc\xea est\xe1 por dentro de tudo.",lineTwo:"Pronto para o futuro?"},{emoji:"high5",skintone:true,lineOne:"Isso \xe9 tudo!",lineTwo:""},{emoji:"high5",skintone:true,lineOne:"Deu.",lineTwo:""},{emoji:"earth_americas",skintone:false,lineOne:"Tudo pronto.",lineTwo:"Agora o mundo est\xe1 nas suas m\xe3os."},{emoji:"walking",skintone:true,lineOne:"\xc9 isso.",lineTwo:"J\xe1 pode sair por a\xed."},{emoji:"check_mark",skintone:false,lineOne:"Tudo em dia.",lineTwo:"O que vai fazer agora?"},{emoji:"rocket",skintone:false,lineOne:"Dever cumprido.",lineTwo:"O futuro \xe9 seu."},{emoji:"sunglasses",skintone:false,lineOne:"Tudo lido.",lineTwo:"Agora j\xe1 pode relaxar."},{emoji:"sunglasses",skintone:false,lineOne:"Tudo pronto!",lineTwo:""},{emoji:"star",skintone:false,lineOne:"Bom trabalho!",lineTwo:"Leitura conclu\xedda."},{emoji:"tada",skintone:false,lineOne:"Surpresa!",lineTwo:"Voc\xea terminou."},{emoji:"tada",skintone:false,lineOne:"Surpresa!",lineTwo:"Agora voc\xea est\xe1 atualizado."},{emoji:"thumbup",skintone:true,lineOne:"Acabou!",lineTwo:"Miss\xe3o dada \xe9 miss\xe3o cumprida."},{emoji:"wave",skintone:true,lineOne:"Era isso.",lineTwo:"Por hoje \xe9 s\xf3!"},{emoji:"victory",skintone:true,lineOne:"Atualizado!",lineTwo:"E agora?"}];a.d(t,"a",function(){return b});var m;var f=(m={"de-DE":o,"en-GB":l},n()(m,i["b"].DEFAULT_LOCALE,c),n()(m,"es-ES",u),n()(m,"es-LA",d),n()(m,"fr-FR",p),n()(m,"ja-JP",h),n()(m,"pt-BR",v),m);function b(e){var t=e.locale,a=void 0===t?i["b"].DEFAULT_LOCALE:t,r=e.preferredSkintone,n=void 0===r?1:r,o=e.emojiMode,l=void 0===o?"default":o;var c="apple"===l?"default":l;var u=f[a]||f[i["b"].DEFAULT_LOCALE];var d=u[Math.floor(Math.random()*u.length)];var p=d.skintone?s[c][d.emoji][n]:s[c][d.emoji];d.emojiUrl=p;return d}},function(e,t,a){"use strict";var r=a(13);var n=a(2);var i=a.n(n);var s=a(423);var o=a(4);var l=a(67);var c=a(85);var u=a(23);var d=a(35);var p=a(41);var h=a(31);var v=a(100);var m=a(6);var f=a.n(m);var b=a(7);var g=a.n(b);var _=a(8);var y=a.n(_);var O=a(9);var k=a.n(O);var E=a(16);var C=a.n(E);var j=a(0);var w=a(1);var S=a.n(w);var I=a(442);var T=a(10);var A=a(22);var N=a(141);var P=a(317);var R=a(1733);var M=a(1565);var D=new T["b"]("threads");var x={ts:j["b"].string.isRequired,threadTs:j["b"].string.isRequired,channelId:j["b"].string.isRequired,className:j["b"].string,rootText:j["b"].string,theme:j["b"].string,replyCount:j["b"].number,replyUsers:j["b"].arrayOf(j["b"].string),replyUsersCount:j["b"].number,teamDomain:j["b"].string.isRequired,featureFileThreads:j["b"].bool,showThread:j["b"].func,featureNewRepliesAfterBcast:j["b"].bool,hasBlocks:j["b"].bool};var F={className:null,rootText:null,theme:"light",replyCount:0,replyUsers:void 0,replyUsersCount:0,featureFileThreads:false,showThread:n["noop"],featureNewRepliesAfterBcast:false,hasBlocks:false};var L=function(e){k()(t,e);function t(e){f()(this,t);var a=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.openThread=a.openThread.bind(a);return a}g()(t,[{key:"openThread",value:function e(t){var a=this.props,r=a.showThread,n=a.channelId,i=a.threadTs,s=a.ts;t.preventDefault();r({channelId:n,threadTs:i,highlightTs:s})}},{key:"renderRepliersSummary",value:function e(t){var a=this.props,r=a.replyCount,n=a.replyUsers,i=a.replyUsersCount,s=a.featureFileThreads,o=a.featureNewRepliesAfterBcast;if(!r||!i)return null;if(o)return null;return S.a.createElement("div",{className:"c-message__broadcast_repliers"},s?null:S.a.createElement(A["a"],{type:"comment_alt",className:"c-message__broadcast_repliers_icon"}),S.a.createElement("a",{className:"c-message__broadcast_repliers_link",href:t,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread},S.a.createElement(M["a"],{replyCount:r,replyUsers:n,replyUsersCount:i,prefixWithReplyCount:true,broadcastPreabmle:true})))}},{key:"render",value:function e(){var t=this;var a=Object(p["constructAbsoluteMsgPermalink"])({teamDomain:this.props.teamDomain,channelId:this.props.channelId,ts:this.props.ts,threadTs:this.props.threadTs});var r=C()("c-message__broadcast_preamble",this.props.className);var n=void 0;if(this.props.rootText&&!this.props.hasBlocks)n=S.a.createElement("div",{className:r},S.a.createElement("span",{"data-qa":"thread-broadcast-preamble-with-text",className:"c-message__broadcast_preamble_meta"},Object(R["a"])()),S.a.createElement(P["a"],{className:"c-message__broadcast_preamble_link",href:a,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread},S.a.createElement(N["a"],{text:this.props.rootText,noHighlights:true,noHexColors:true,noJumbomoji:true,noLinking:true,noCode:true,noQuotes:true,customLineEnding:"\u2026",maxNewlines:1})));else{var i=D.rt("replied to <a>a thread</a>",null,function(e){var r=e.key,n=e.text;return S.a.createElement(P["a"],{className:"c-message__broadcast_preamble_link",key:r,href:a,target:"_blank",rel:"noopener noreferrer",onClick:t.openThread},n)});n=S.a.createElement("div",{className:r},i)}if("light"===this.props.theme)return S.a.createElement("div",{className:"c-message__broadcast_preamble_outer"},n,this.renderRepliersSummary(a));return n}}]);return t}(I["a"]);L.displayName="ThreadBroadcastPreamble";L.propTypes=x;L.defaultProps=F;var B=L;function U(e,t){var a=t.threadTs,r=t.channelId;var n=Object(l["a"])(e,r,a);if(!n)return{};var v=n.blocks&&n.blocks.length;var m=n.reply_count;var f=n.replies||[];var b=void 0;b=n.reply_users?n.reply_users:i.a.uniq(i.a.map(f,"user"));var g=n.reply_users_count?n.reply_users_count:b.length;var _=Object(p["getMessageRootText"])(n);var y=Object(o["isFeatureEnabled"])(e,"feature_file_threads");if(y&&n.files&&n.files.length){var O=i.a.first(n.files);var k=Object(c["getFileById"])(e,O);_=Object(p["getMessageRootText"])(n,k)}var E=Object(p["getSourceTeamId"])(n)||Object(u["c"])(e);var C=Object(d["i"])(e,E);var j=Object(h["getTeamDomain"])(C);return{rootText:_,replyCount:m,replyUsers:b,replyUsersCount:g,teamDomain:j,theme:Object(s["a"])(e),featureFileThreads:y,featureNewRepliesAfterBcast:Object(o["isFeatureEnabled"])(e,"feature_new_replies_after_bcast"),hasBlocks:v}}var q={showThread:v["l"]};var G=t["a"]=Object(r["connect"])(U,q)(B)},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(2);var p=a.n(d);var h=a(0);var v=a(1);var m=a.n(v);var f=a(13);var b=a(16);var g=a.n(b);var _=a(4);var y=a(34);var O=a(10);var k=a(431);var E=a(220);var C=a(529);var j=a(337);var w=a(125);var S=new O["b"]("threads");function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.latestReply,a=e.replyCount,r=e.do24hrTime;if(Object(j["a"])(Object(w["a"])(t),new Date)){if(1===a)return S.t("Today at {time}",{time:Object(E["a"])(t,{do24hrTime:r})});return S.t("Last reply today at {time}",{time:Object(E["a"])(t,{do24hrTime:r})})}if(1===a)return Object(C["a"])(t);return S.t("Last reply {time_ago}",{time_ago:Object(C["a"])(t)})}var T=a(216);var A=a(22);var N=a(317);var P=a(17);var R=a(268);var M=a(471);var D=new O["b"]("threads");var x={replies:h["b"].array,replyCount:h["b"].number.isRequired,replyUsers:h["b"].arrayOf(h["b"].string),replyUsersCount:h["b"].number,latestReply:h["b"].string,channelId:h["b"].string.isRequired,threadTs:h["b"].string.isRequired,do24hrTime:h["b"].bool,showThreadIfThreadable:h["b"].func,featureNewRepliesAfterBcast:h["b"].bool,isThreadExpanded:h["b"].bool,threadListId:h["b"].string,className:h["b"].string};var F={replies:null,do24hrTime:false,replyUsers:[],replyUsersCount:0,latestReply:null,showThreadIfThreadable:p.a.noop,featureNewRepliesAfterBcast:false,isThreadExpanded:void 0,threadListId:void 0,className:void 0};var L=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.openThread=a.openThread.bind(a);a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.state={hasKeyboardFocus:false};return a}s()(t,[{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent;a&&"keydown"===a.type&&this.setState(function(){return{hasKeyboardFocus:true}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"getLastReplyTs",value:function e(){if(this.props.latestReply)return this.props.latestReply;if(this.props.replies){var t=p.a.last(this.props.replies);if(t)return t.ts}return null}},{key:"openThread",value:function e(t){t.preventDefault();this.props.showThreadIfThreadable({channelId:this.props.channelId,threadTs:this.props.threadTs,requestFocus:this.state.hasKeyboardFocus})}},{key:"renderFaces",value:function e(){var t=this;var a=void 0;a=this.props.replyUsers&&this.props.replyUsers.length?p.a.reject(this.props.replyUsers,function(e){return"B00"===e}):p.a.uniq(p.a.reject(p.a.map(this.props.replies,"user"),function(e){return"B00"===e}));var r=this.props.replyUsersCount?this.props.replyUsersCount:a.length;if(a.length>5)return p.a.concat(p.a.map(p.a.take(a,4),function(e){return t.renderSingleAvatar(e)}),this.renderSingleAvatar(a[4],r-5));return p.a.map(a,function(e){return t.renderSingleAvatar(e)})}},{key:"renderSingleAvatar",value:function e(t,a){var r=Object(M["a"])(t);var n=!Object(P["isEKMAccessDenied"])({id:t});return m.a.createElement(T["b"],{key:t,userId:r?null:t,botId:r?t:null,size:24,additionalOverlay:a,showCard:true,isInteractive:n})}},{key:"render",value:function e(){var t=this.props,a=t.replyCount,r=t.channelId,n=t.threadTs,i=t.do24hrTime,s=t.featureNewRepliesAfterBcast,o=t.isThreadExpanded;var l=D.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:a});var c=Object(R["b"])(r,n);var u=this.getLastReplyTs();var d="";d=s?I({latestReply:u,replyCount:a,do24hrTime:i}):Object(j["a"])(Object(w["a"])(u),new Date)?1===a?D.t("Today at {time}",{time:Object(E["a"])(u,{do24hrTime:i})}):D.t("Last reply today at {time}",{time:Object(E["a"])(u,{do24hrTime:i})}):1===a?Object(C["a"])(u):D.t("Last reply {time_ago}",{time_ago:Object(C["a"])(u)});var p=g()("c-message__reply_bar",this.props.className,{"c-message__reply_bar--focus":this.state.hasKeyboardFocus});var h=true===o?this.props.threadListId:void 0;return m.a.createElement(k["a"],{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},m.a.createElement("div",{role:"presentation",className:p,onClick:this.openThread,"data-qa":"reply_bar"},this.renderFaces(),m.a.createElement(N["a"],{className:"c-message__reply_count",href:c,target:"_blank",rel:"noopener noreferrer","aria-expanded":o,"aria-controls":h},l),m.a.createElement("div",{className:"c-message__reply_bar_description"},m.a.createElement("span",{className:"c-message__reply_bar_last_reply"},d),m.a.createElement("span",{className:"c-message__reply_bar_view_thread"},D.t("View thread"))),m.a.createElement(A["a"],{type:"chevron_right",className:"c-message__reply_bar_arrow",align:"baseline","aria-hidden":true})))}}]);return t}(m.a.PureComponent);L.displayName="ReplyBar";L.defaultProps=F;function B(e){return{do24hrTime:Object(y["f"])(e,"time24"),featureNewRepliesAfterBcast:Object(_["isFeatureEnabled"])(e,"feature_new_replies_after_bcast")}}var U=t["a"]=Object(f["connect"])(B)(L)},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(4180);Object(r["a"])("interop.allUnreads",{getMessageForLocale:n["a"]})},function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(2);var c=a.n(l);var u=a(207);var d=a(71);var p=a(12);var h=a(284);var v=a(858);var m=a(3);var f=a.n(m);var b=a(0);var g=a(15);var _=a(409);var y=a(533);var O=a(234);var k=a(377);var E=a(281);var C=Object(g["b"])("Helper for handling history",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.oldest,n=a.latest,i=a.channelId,s=a.msgs,o=a.hasMore,l=a.pinCount,u=a.isLimited,d=a.deleted;var p=c.a.map(s,"ts");e(r||n?Object(_["a"])({msgs:s,channelId:i,oldest:r,latest:n,hasMore:o,isLimited:u,loading:false,deleted:d}):Object(_["a"])({msgs:s,channelId:i,isLimited:u,latest:c.a.max(p),oldest:c.a.min(p),hasMore:{hasMoreStart:o,hasMoreEnd:false},loading:false,deleted:d}));c.a.isNumber(l)&&e(Object(O["updatePinCount"])({channelId:i,count:l}))});C.propTypes={oldest:b["b"].string,latest:b["b"].string,channelId:b["b"].string,msgs:b["b"].array,hasMore:b["b"].oneOfType([b["b"].object,b["b"].bool]),pinCount:b["b"].number,isLimited:b["b"].bool,deleted:b["b"].array};var j=Object(g["b"])("Fetch conversation history",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.type,i=a.oldest,s=void 0===i?null:i,o=a.latest,l=void 0===o?null:o,u=a.reason,d=void 0===u?"message-pane-store/fetchHistory":u;if(!r||!n)return false;var h=t();var m=Object(y["isChannelLoading"])(h,r);if(m)return false;Object(p["a"])({getState:t}).info("HISTORY-FETCH","Fetching history for message pane: "+r+" oldest: "+s+" latest: "+l);if(l&&s){var b=e(Object(k["b"])({channelId:r,type:n,oldest:null,latest:l,reason:d}));var g=e(Object(k["b"])({channelId:r,type:n,oldest:s,latest:null,reason:d}));var _=Promise.all([b,g]).then(function(t){var a=t[0],n=a.msgs,i=a.hasMore,o=a.isLimited,u=a.pinCount,d=a.deleted;var p=t[1],h=p.msgs,v=p.hasMore,m=p.deleted;var f=c.a.uniqBy(n.concat(h),"ts");var b=c.a.uniq(c.a.concat(d,m));var g=c.a.map(f,"ts");e(C({channelId:r,msgs:f,isLimited:o,pinCount:u,hasMore:{hasMoreStart:i,hasMoreEnd:v},oldest:c.a.min([s,c.a.min(g)]),latest:c.a.max([l,c.a.max(g)]),deleted:b}))}).catch(function(t){Object(E["e"])(t,"Failed to fetch history for "+r,"message_pane_history_fetch_fail");e(Object(y["doneLoading"])({channelId:r}))});e(Object(y["startLoading"])({channelId:r,loadingOlder:true,request:_}));return _}l&&e(Object(v["searchInProductEducationIncrement"])());var O=e(Object(k["b"])({channelId:r,type:n,oldest:s,latest:l,reason:d})).then(function(t){e(C(f()({},t,{oldest:s,latest:l,channelId:r})))}).catch(function(t){Object(E["e"])(t,"Failed to fetch history for "+r,"message_pane_history_fetch_fail");e(Object(y["doneLoading"])({channelId:r}))});e(Object(y["startLoading"])({channelId:r,loadingOlder:!!l,request:O}));return O});j.propTypes={channelId:b["b"].string.isRequired,type:b["b"].string,oldest:b["b"].string,latest:b["b"].string,reason:b["b"].string};var w=j;var S=a(101);var I=a(19);var T=a(11);var A=Object(g["b"])("Save the scrollmark if the current user is viewing a public channel that they are a member of",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.scrollmark;var i=t();var s=Object(I["d"])(i,r);if(Object(T["isPublicChannel"])(s)&&!Object(T["isMemberOfChannel"])(s))return;e(Object(S["d"])({channelId:r,scrollmark:n}))});A.propTypes={channelId:b["b"].string,scrollmark:b["b"].object};var N=a(217);var P=a(448);var R=a(329);var M=a(103);var D=a(98);var x=a(67);var F=a(423);var L=a(4);var B=a(686);var U=a(233);var q=a(73);var G=a(385);var W=a(1352);var H=a(25);var V=a(29);var K=Object(H["a"])("Call to trigger App Home Open Event",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.appHomeSection;return e(Object(V["a"])({method:"apps.home.dispatchOpenEvent",args:{id:r,type:n},reason:"app-home-logging"})).catch(l["noop"])});K.propTypes={channelId:b["b"].string.isRequired,appHomeSection:b["b"].string};var z=a(41);var Y=a(109);var Q=a(93);var J=a(245);var Z=a(23);var X=a(209);var $=a(683);var ee=a(181);var te=a(1790);var ae=a(5);var re=a.n(ae);var ne=a(6);var ie=a.n(ne);var se=a(7);var oe=a.n(se);var le=a(8);var ce=a.n(le);var ue=a(9);var de=a.n(ue);var pe=a(16);var he=a.n(pe);var ve=a(74);var me=a.n(ve);var fe=a(87);var be=a(38);var ge=a(10);var _e=a(586);var ye=a(1106);var Oe=a(21);var ke=a(39);var Ee=a(168);var Ce=a(183);var je=a(2414);var we=a(442);var Se=a(228);var Ie=a(1068);var Te=a(889);var Ae=a(3945);var Ne=a(1801);var Pe={channelId:b["b"].string,channelType:b["b"].string,hasLimitedHistory:b["b"].bool,isShared:b["b"].bool,isSlackbotIm:b["b"].bool,newxpOnboardingStep:b["b"].string};var Re={channelId:null,channelType:null,hasLimitedHistory:false,isShared:false,isSlackbotIm:false,newxpOnboardingStep:null};var Me=function(e){de()(t,e);function t(){ie()(this,t);return ce()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}oe()(t,[{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.channelType,i=t.hasLimitedHistory,s=t.isShared,o=t.isSlackbotIm,l=t.newxpOnboardingStep;if(o){if(l&&l!==Ja.COMPLETE)return n.a.createElement(Xa,{step:l});return n.a.createElement(La,null)}if(i)return n.a.createElement(ba,{channelId:a});if("channel"===r||"private"===r){if(s)return n.a.createElement(Va,{channelId:a});return n.a.createElement(Nt,{channelId:a})}if("im"===r){if(s)return n.a.createElement(la,{channelId:a});return n.a.createElement($t,{channelId:a})}if("mpim"===r)return n.a.createElement(Pa,{channelId:a});Object(p["b"])().warn('Unknown foreword type "'+r+'"');return null}}]);return t}(r["PureComponent"]);Me.displayName="Foreword";Me.defaultProps=Re;function De(e,t){var a=t.channelId;var r=Object(I["d"])(e,a);if(!r)return null;return{isShared:Object(T["isExternallySharedChannel"])(r),isSlackbotIm:Object(T["isSlackbot"])(r),newxpOnboardingStep:Object(h["j"])(e)}}var xe=Object(i["connect"])(De)(Me);var Fe=a(24);var Le=a(164);var Be=a(17);var Ue=a(378);var qe=a(430);var Ge=a(139);var We=a(20);var He=Object(We["b"])("TS.ui.purpose_dialog.start",c.a.noop);var Ve=a(1500);var Ke=a(4174);var ze=a(1100);var Ye=a(1523);var Qe=a(45);var Je=a(22);var Ze=a(187);var Xe=new ge["b"]("message_pane_foreword");var $e={onClick:b["b"].func};var et={onClick:c.a.noop};var tt=function(e){de()(t,e);function t(){ie()(this,t);return ce()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}oe()(t,[{key:"render",value:function e(){var t=this.props.onClick;return n.a.createElement(Ze["a"],{className:"p-message_pane__foreword__button",onClick:t},n.a.createElement(Je["a"],{type:"plus",inherit:true})," ",Xe.t("Add an app"))}}]);return t}(r["PureComponent"]);tt.displayName="AppButton";tt.defaultProps=et;var at=tt;var rt=new ge["b"]("message_pane_foreword");var nt={isPrivate:b["b"].bool,onClick:b["b"].func};var it={isPrivate:false,onClick:c.a.noop};var st=function(e){de()(t,e);function t(){ie()(this,t);return ce()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}oe()(t,[{key:"render",value:function e(){var t=this.props,a=t.isPrivate,r=t.onClick;var i=void 0;i=a?rt.t("Add people to this private channel",{fallbackHash:"e39d2befa2a64ec5522429e9d4be5aace4c8f08b"}):rt.t("Add people to this channel",{fallbackHash:"379e588d09f8d3998101d407aac8b99c9555d635"});return n.a.createElement(Ze["a"],{className:"p-message_pane__foreword__button",onClick:r},n.a.createElement(Je["a"],{type:"user",inherit:true})," ",i)}}]);return t}(r["PureComponent"]);st.displayName="InviteButton";st.defaultProps=it;var ot=st;var lt=a(138);var ct=new ge["b"]("message_pane_foreword");var ut={onClick:b["b"].func,featureChangePurposeToDescription:b["b"].bool};var dt={onClick:c.a.noop,featureChangePurposeToDescription:false};var pt=function(e){de()(t,e);function t(){ie()(this,t);return ce()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}oe()(t,[{key:"render",value:function e(){var t=this.props,a=t.onClick,r=t.featureChangePurposeToDescription;return n.a.createElement(Ze["a"],{className:"p-message_pane__foreword__button",onClick:a},n.a.createElement(Je["a"],{type:"pencil",inherit:true})," ",r?ct.t("Set a description"):ct.t("Set a purpose"))}}]);return t}(r["PureComponent"]);pt.displayName="PurposeButton";pt.defaultProps=dt;var ht=Object(lt["a"])("feature_change_purpose_to_description")(pt);var vt={channelId:b["b"].string,purpose:b["b"].string,isUserRestricted:b["b"].bool,isOrgShared:b["b"].bool,channelType:b["b"].string,clogger:b["b"].object.isRequired,canInviteToChannel:b["b"].bool,startChannelInviteModal:b["b"].func,featureSonicChannelInviteModal:b["b"].bool};var mt={channelId:null,purpose:null,isUserRestricted:false,isOrgShared:false,channelType:null,canInviteToChannel:false,startChannelInviteModal:l["noop"],featureSonicChannelInviteModal:false};var ft=function(e){de()(t,e);function t(e){ie()(this,t);var a=ce()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onPurposeButtonClick=a.onPurposeButtonClick.bind(a);a.onInviteButtonClick=a.onInviteButtonClick.bind(a);a.onAppButtonClick=a.onAppButtonClick.bind(a);return a}oe()(t,[{key:"onPurposeButtonClick",value:function e(){var t=this.props.channelId;He(t)}},{key:"onInviteButtonClick",value:function e(){var t=this.props,a=t.channelId,r=t.clogger,n=t.featureSonicChannelInviteModal;r.track(Oe["k"].CHANNEL_FOREWORD,{contexts:{ui_context:{action:"click",ui_properties:{element_type:"button",element_name:"channel_foreword_add"}}}});n?this.props.startChannelInviteModal({channelId:a}):Object(Ve["a"])(a,[],"channel_foreword")}},{key:"onAppButtonClick",value:function e(){var t;var a=this.props,r=a.channelId,n=a.clogger;var i=Oe["k"].CHANNEL_FOREWORD;var s=(t={},re()(t,Oe["x"].action,Oe["v"].CLICK),re()(t,Oe["x"].ui_element,Oe["y"].BTN_ADD_APPS),t);n.track(i,{contexts:re()({},Oe["b"].ui_context,s)});Object(Ye["a"])()?Object(ze["f"])(i,s):Object(E["f"])("/apps/new?channel="+r+"&utm_source=in-prod&utm_medium=inprod-btn_add_apps-foreword-click","new")}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.isOrgShared,i=t.isUserRestricted,s=t.purpose,o=t.channelType,l=t.canInviteToChannel;var c=void 0;s||i||(c=n.a.createElement(ht,{channelId:a,onClick:this.onPurposeButtonClick}));var u=void 0;r||i||(u=n.a.createElement(at,{onClick:this.onAppButtonClick}));var d=void 0;l&&(d=n.a.createElement(ot,{onClick:this.onInviteButtonClick,isPrivate:"private"===o}));return n.a.createElement("div",{className:"p-message_pane__foreword__buttons"},c,u,d)}}]);return t}(r["PureComponent"]);ft.displayName="ChannelForewordButtons";ft.defaultProps=mt;function bt(e,t){var a=t.channelId;var r=Object(I["d"])(e,a);if(!r)return{};var n=Object(Fe["b"])(e);var i=r.purpose?r.purpose.value:null;var s=Object(T["isOrgSharedPublicOrPrivateChannel"])(r);var o=Object(Q["C"])(e,a);return{purpose:i,isUserRestricted:Object(Be["isRestricted"])(n),isOrgShared:s,channelType:Object(T["getChannelType"])(r),clogger:Object(Qe["a"])({state:e}),canInviteToChannel:o,featureSonicChannelInviteModal:Object(L["isFeatureEnabled"])(e,"feature_sonic_channel_invite_modal")}}var gt=function e(t){return{startChannelInviteModal:function e(){return t(Ke["b"].apply(void 0,arguments))}}};var _t=Object(i["connect"])(bt,gt)(ft);var yt=a(141);var Ot=new ge["b"]("message_pane_foreword");var kt={channelId:b["b"].string,description:b["b"].node,purpose:b["b"].string,isUserRestricted:b["b"].bool,featureChangePurposeToDescription:b["b"].bool};var Et={channelId:null,description:null,purpose:null,isUserRestricted:false,featureChangePurposeToDescription:false};var Ct=function(e){de()(t,e);function t(e){ie()(this,t);var a=ce()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onPurposeButtonClick=a.onPurposeButtonClick.bind(a);return a}oe()(t,[{key:"onPurposeButtonClick",value:function e(){var t=this.props.channelId;He(t)}},{key:"maybeRenderPurpose",value:function e(){var t=this.props,a=t.purpose,r=t.featureChangePurposeToDescription;if(!a)return null;return n.a.createElement("span",null," ",r?Ot.t("Description:"):Ot.t("Purpose:")," ",n.a.createElement(yt["a"],{text:a}))}},{key:"maybeRenderPurposeEditLink",value:function e(){var t=this.props,a=t.purpose,r=t.isUserRestricted;if(!a||r)return null;return n.a.createElement("span",{className:"no_wrap"}," ","(",n.a.createElement(Ze["a"],{onClick:this.onPurposeButtonClick},Ot.t("edit")),")")}},{key:"render",value:function e(){var t=this.props.description;return n.a.createElement("div",{className:"p-message_pane__foreword__description"},t,this.maybeRenderPurpose(),this.maybeRenderPurposeEditLink())}}]);return t}(r["PureComponent"]);Ct.displayName="ChannelForewordDescription";Ct.defaultProps=Et;var jt=Object(lt["a"])("feature_change_purpose_to_description")(Ct);var wt=new ge["b"]("message_pane_foreword");var St={channelId:b["b"].string,purpose:b["b"].string,creatorIsYou:b["b"].bool,createdById:b["b"].string,dateCreated:b["b"].number,isPrivate:b["b"].bool,isUserRestricted:b["b"].bool};var It={channelId:null,purpose:null,creatorIsYou:false,createdById:null,dateCreated:null,isPrivate:false,isUserRestricted:false};var Tt=function(e){de()(t,e);function t(){ie()(this,t);return ce()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}oe()(t,[{key:"renderTitle",value:function e(){var t=this.props.channelId;var a={inherit:true,align:"baseline"};return n.a.createElement("h1",{className:"p-message_pane__foreword__title"},n.a.createElement(Ge["a"],{channelId:t,inline:true,iconProps:a}))}},{key:"renderDescription",value:function e(){var t=this.props,a=t.channelId,r=t.createdById,i=t.creatorIsYou,s=t.dateCreated,o=t.isPrivate,l=t.purpose,c=t.isUserRestricted;var u=void 0;if(s){u=Object(Le["j"])(s);u=Object(Le["e"])(s)||Object(Le["f"])(s)?u.toLowerCase():wt.t("on {date}",{date:u})}else u=wt.rt("on {date}",{date:n.a.createElement(Ue["a"],{type:"unknown"})});var d={inherit:true,align:"baseline"};var p=n.a.createElement(Ge["a"],{channelId:a,inline:true,iconProps:d,className:"bold"});var h=void 0;if(i)h=o?wt.rt("You created this private channel {date}. This is the very beginning of the {name} channel.",{date:u,name:p}):wt.rt("You created this channel {date}. This is the very beginning of the {name} channel.",{date:u,name:p});else{var v=r?n.a.createElement(qe["a"],{id:r,showTooltip:true}):n.a.createElement(Ue["a"],{type:"unknown"});h=o?wt.rt("{creator} created this private channel {date}. This is the very beginning of the {name} channel.",{creator:v,date:u,name:p}):wt.rt("{creator} created this channel {date}. This is the very beginning of the {name} channel.",{creator:v,date:u,name:p})}return n.a.createElement(jt,{channelId:a,description:h,purpose:l,isUserRestricted:c})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.isPrivate;var i=he()("p-message_pane__foreword",{"p-message_pane__foreword--private":r});return n.a.createElement("div",{className:i},this.renderTitle(),this.renderDescription(),n.a.createElement(_t,{channelId:a}))}}]);return t}(r["PureComponent"]);Tt.displayName="ChannelForeword";Tt.defaultProps=It;function At(e,t){var a=t.channelId;var r=Object(I["d"])(e,a);if(!r)return{};var n=Object(Fe["b"])(e);var i=r.purpose?r.purpose.value:null;var s=Object(T["isPrivateChannel"])(r);return{purpose:i,creatorIsYou:n&&n.id===r.creator,createdById:r.creator,dateCreated:r.created,isPrivate:s,isUserRestricted:Object(Be["isRestricted"])(n)}}var Nt=Object(i["connect"])(At)(Tt);var Pt=a(182);var Rt=a(1085);var Mt=a(34);var Dt=a(894);var xt=a(289);var Ft=a(28);var Lt=a(51);var Bt=new ge["b"]("message_pane_foreword");var Ut={botName:b["b"].string,botId:b["b"].string,clogger:b["b"].object.isRequired,featureM11nAppSpace:b["b"].bool,openAboutAppWithMemberId:b["b"].func};var qt={botName:null,botId:null,featureM11nAppSpace:false,openAboutAppWithMemberId:void 0};var Gt=function(e){de()(t,e);function t(e){ie()(this,t);var a=ce()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}oe()(t,[{key:"onClick",value:function e(){var t=this.props.botId;this.props.featureM11nAppSpace?this.props.openAboutAppWithMemberId({memberId:t}):Object(Rt["a"])("about");var a=this.props.clogger;a.track("APP_SPACE_ABOUT_CLICKED",{about_clicked_from_bot_dm:true})}},{key:"render",value:function e(){var t=this.props.botName;return n.a.createElement(Ze["a"],{className:"p-message_pane__foreword__button",onClick:this.onClick},n.a.createElement(Je["a"],{type:"lightbulb-o",inherit:true})," ",Bt.t("How does {name} work?",{name:Object(ge["o"])(t)}))}}]);return t}(r["PureComponent"]);Gt.displayName="AppHelpButton";Gt.defaultProps=qt;function Wt(e,t){var a=t.botId;var r=Object(Fe["d"])(e,a);var n=Object(Qe["a"])({state:e});var i=Object(L["isFeatureEnabled"])(e,"feature_m11n_app_space");if(!r)return{clogger:n};var s=Object(Be["getMemberMentionName"])(r);return{botName:s,clogger:n,featureM11nAppSpace:i}}var Ht=function e(t){return{openAboutAppWithMemberId:function e(){return t(Dt["c"].apply(void 0,arguments))}}};var Vt=Object(i["connect"])(Wt,Ht)(Gt);var Kt=new ge["b"]("message_pane_foreword");var zt={isAppSpaceEnabled:b["b"].bool.isRequired,memberId:b["b"].string,type:b["b"].oneOf(["self","bot","member"]).isRequired,prefWhoCanSeeThis:b["b"].bool,featureM11nAppSpace:b["b"].bool,openAboutAppWithMemberId:b["b"].func};var Yt={memberId:null,prefWhoCanSeeThis:false,featureM11nAppSpace:false,openAboutAppWithMemberId:l["noop"]};var Qt=function(e){de()(t,e);function t(e){ie()(this,t);var a=ce()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onMemberClick=a.onMemberClick.bind(a);return a}oe()(t,[{key:"onMemberClick",value:function e(t){t.preventDefault();var a=this.props,r=a.memberId,n=a.featureM11nAppSpace;this.canAppSpaceBeUsed()?n?this.props.openAboutAppWithMemberId({memberId:r}):Object(Rt["b"])("about"):Object(Ee["i"])(r)}},{key:"canAppSpaceBeUsed",value:function e(){var t=this.props,a=t.isAppSpaceEnabled,r=t.type;return"bot"===r&&a}},{key:"renderAvatar",value:function e(){var t=this.props.memberId;return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},n.a.createElement(Ft["c"],{onClick:this.onMemberClick},n.a.createElement(xt["b"],{id:t,size:"large",showPresence:true,showStatus:true,showAvatar:true})))}},{key:"renderDescription",value:function e(){var t=this.props,a=t.memberId,r=t.type;if("self"===r)return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},Kt.rt("<b>This is your space.</b> Draft messages, list your to-dos, or keep links and files handy. You can also talk to yourself here, but please bear in mind you\u2019ll have to supply both sides of the conversation."));var i=Kt.rt("This is the very beginning of your direct message history with {name}",{name:n.a.createElement(qe["a"],{id:a,showTooltip:true})});this.props.prefWhoCanSeeThis&&(i=Kt.rt("This is the very beginning of your direct message history with {name}. Only the two of you are in this conversation, and no one else can join it. <a>Learn more</a>",{name:n.a.createElement(qe["a"],{id:a,showTooltip:true})},function(e){var t=e.text,a=e.key;return n.a.createElement(Lt["a"],{key:a,href:"https://get.slack.help/hc/articles/360002063088",rel:"noopener noreferrer"},t)}));return n.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},i)}},{key:"renderButtons",value:function e(){var t=this.props.memberId;if(this.canAppSpaceBeUsed())return n.a.createElement("div",{className:"p-message_pane__foreword__buttons"},n.a.createElement(Vt,{botId:t}));return null}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription(),this.renderButtons())}}]);return t}(r["PureComponent"]);Qt.displayName="BaseImForeword";Qt.defaultProps=Yt;function Jt(e,t){var a=t.channelId;var r=Object(I["d"])(e,a);if(!r)return{};var n=Object(T["getMemberIdFromIm"])(r);var i=Object(Fe["d"])(e,n);var s=Object(L["getCurrentUserId"])(e);var o=void 0;o=n===s?"self":Object(Be["isAppOrBot"])(i)?"bot":"member";return{isAppSpaceEnabled:Object(Pt["isAppSpaceEnabled"])(e),memberId:n,type:o,prefWhoCanSeeThis:Object(Mt["f"])(e,"whocanseethis_dm_mpdm_badge"),featureM11nAppSpace:Object(L["isFeatureEnabled"])(e,"feature_m11n_app_space")}}var Zt=function e(t){return{openAboutAppWithMemberId:function e(){return t(Dt["c"].apply(void 0,arguments))}}};var Xt=Object(i["connect"])(Jt,Zt)(Qt);Xt.propTypes={channelId:b["b"].string};Xt.defaultProps={channelId:null};var $t=Xt;var ea=a(35);var ta=a(31);var aa=a(512);var ra=new ge["b"]("message_pane_foreword");var na={memberId:b["b"].string,sharedTeam:b["b"].object};var ia={memberId:void 0,sharedTeam:void 0};var sa=function(e){de()(t,e);function t(){ie()(this,t);return ce()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}oe()(t,[{key:"renderAvatar",value:function e(){var t=this.props.memberId;return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},n.a.createElement(xt["b"],{id:t,size:"large",showPresence:true,showStatus:true,showAvatar:true}))}},{key:"renderDescription",value:function e(){var t=this.props,a=t.sharedTeam,r=t.memberId;var i=!a||Object(ta["isUnknown"])(a)?n.a.createElement(aa["a"],{type:"unknown"}):n.a.createElement("strong",null,Object(ta["getTeamDisplayName"])(a));var s=ra.rt("{name} is from {team} and not a member of your team, so share files and information with care.",{name:n.a.createElement(qe["a"],{id:r,showTooltip:true}),team:i});return n.a.createElement("div",{className:"p-message_pane__foreword__description"},s)}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription())}}]);return t}(r["PureComponent"]);sa.displayName="ImSharedForeword";sa.defaultProps=ia;function oa(e,t){var a=t.channelId;var r=Object(I["d"])(e,a);if(!r)return null;var n=Object(Fe["d"])(e,Object(T["getMemberIdFromIm"])(r));var i=Object(Be["getMemberTeamId"])(n);var s=Object(ea["i"])(e,i);return{memberId:Object(T["getMemberIdFromIm"])(r),sharedTeam:s}}var la=Object(i["connect"])(oa)(sa);var ca=a(81);var ua=a(530);var da=new ge["b"]("message_pane_foreword");var pa={channelType:b["b"].string.isRequired,channelName:b["b"].string,clogger:b["b"].object.isRequired,showPricingPlans:b["b"].func.isRequired};var ha={channelName:""};var va=function(e){de()(t,e);function t(e){ie()(this,t);var a=ce()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.pricingPlansPageUrl="pricing?ui_step=42&ui_element="+a.getClogUiElementVal();a.onClickLearnMore=a.onClickLearnMore.bind(a);return a}oe()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:this.getClogUiElementVal()}}})}},{key:"onClickLearnMore",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"click",ui_element:this.getClogUiElementVal()}}});this.props.showPricingPlans({pricingPlansPageUrl:this.pricingPlansPageUrl,source:"limited_history_foreword"})}},{key:"getClogUiElementVal",value:function e(){var t=this.props.channelType;if("mpim"===t||"im"===t)return 33;return 34}},{key:"render",value:function e(){var t=this.props,a=t.channelName,r=t.channelType;var i="";var s="";if("mpim"===r||"im"===r){s=da.t("To see and search this conversation\u2019s full history, upgrade to one of our paid plans.");i=da.t("There\u2019s more to this conversation")}else{i=da.t("There\u2019s more to the conversation in {name}",{name:a});s=da.t("To see and search this channel\u2019s full history, upgrade to one of our paid plans.")}return n.a.createElement("div",{className:"p-message_pane__limited_history_foreword","data-qa":"msg_lim_header"},n.a.createElement("div",{className:"p-message_pane__limited_history_foreword_headline"},n.a.createElement(ca["b"],{text:":speech_balloon:",emojiSize:ca["a"].MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0",i),n.a.createElement("div",{className:"p-message_pane__limited_history_foreword_subheading"},s),n.a.createElement(Ft["d"],{onClick:this.onClickLearnMore,"data-qa":"learn_more_btn",size:"small"},da.t("Learn More")))}}]);return t}(r["PureComponent"]);va.displayName="LimitedHistoryForeword";va.defaultProps=ha;function ma(e,t){var a=t.channelId;var r=Object(I["d"])(e,a);if(!r)return{};return{channelType:Object(T["getChannelType"])(r),channelName:Object(T["getDisplayNameForChannel"])(e,r),clogger:Object(Qe["a"])({state:e})}}var fa={showPricingPlans:ua["showPricingPlans"]};var ba=Object(i["connect"])(ma,fa)(va);var ga=a(1079);var _a=a(239);var ya=a(216);var Oa=a(317);var ka=a(1217);var Ea=a(803);var Ca=new ge["b"]("message_pane_foreword");var ja={channelId:b["b"].string.isRequired,memberIds:b["b"].arrayOf(b["b"].string),externalTeams:b["b"].arrayOf(b["b"].object),notificationPermission:b["b"].string,notificationSetting:b["b"].oneOf(["everything","mentions_dms","nothing"]),featureReactMessages:b["b"].bool,prefWhoCanSeeThis:b["b"].bool,openChannelNotificationPrefsModal:b["b"].func,openPrefsModal:b["b"].func};var wa={memberIds:[],externalTeams:[],notificationPermission:"na",notificationSetting:"everything",featureReactMessages:true,prefWhoCanSeeThis:false,openChannelNotificationPrefsModal:l["noop"],openPrefsModal:l["noop"]};var Sa=function(e){de()(t,e);function t(e){ie()(this,t);var a=ce()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.openPrefsDialog=a.openPrefsDialog.bind(a);a.openChannelPrefsDialog=a.openChannelPrefsDialog.bind(a);a.state=Object(_a["m"])();return a}oe()(t,[{key:"componentWillReceiveProps",value:function e(t){this.props.notificationPermission!==t.notificationPermission&&this.setState(function(){return Object(_a["m"])()})}},{key:"getNotificationWarningText",value:function e(){var t=this;var a=this.state,r=a.notificationsEnabled,i=a.notificationDisabledType;if(r)return null;switch(i){case"not_yet_allowed":return Ca.rt("You have not yet allowed desktop notifications. Open the <button>Preferences Dialog</button> and follow the instructions to set them up.",null,function(e){var a=e.key,r=e.text;return n.a.createElement(Ze["a"],{onClick:t.openPrefsDialog,key:a},r)});case"not_allowed":return Ca.t("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.");case"impossible":return Ca.rt("Your browser does not support desktop notifications. <a>Try one of our apps?</a>",{},function(e){var t=e.key,a=e.text;return n.a.createElement(Oa["a"],{target:"_blank",key:t,href:"/downloads"},a)});default:return null}}},{key:"openPrefsDialog",value:function e(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"openChannelPrefsDialog",value:function e(){this.props.openChannelNotificationPrefsModal({channelId:this.props.channelId})}},{key:"renderAvatars",value:function e(){var t=this.props.memberIds;var a=t.map(function(e){return n.a.createElement(ya["b"],{key:e,className:"p-message_pane__foreword__avatar",userId:e,size:56})});return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},a)}},{key:"renderTeamName",value:function e(t){if(Object(ta["isUnknown"])(t))return n.a.createElement(aa["a"],{type:"unknown"});return Object(ta["getTeamDisplayName"])(t)}},{key:"renderDescription",value:function e(){var t=this.props,a=t.memberIds,r=t.externalTeams;if(r.length){var i=r.map(this.renderTeamName);var s=Ca.rt("This conversation includes people from {teams}, so share files and information with care.",{teams:Object(ge["g"])(i,{noEscape:true,react:true,strong:true})});return n.a.createElement("div",{className:"p-message_pane__foreword__description"},s,this.renderDescriptionActions())}var o=a.map(function(e){return n.a.createElement(qe["a"],{id:e,showTooltip:true})});var l=Ca.rt("This is the very beginning of your direct message history with {names}",{names:Object(ge["g"])(o,{noEscape:true,react:true})});this.props.prefWhoCanSeeThis&&(l=Ca.rt("This is the very beginning of your direct message history with {names}. Only the {number} of you are in this conversation, and no one else can join it. <a>Learn more</a>",{names:Object(ge["g"])(o,{noEscape:true,react:true}),number:o.length+1},function(e){var t=e.text,a=e.key;return n.a.createElement(Oa["a"],{key:a,href:"https://get.slack.help/hc/articles/360002063088",target:"_blank",rel:"noopener noreferrer"},t)}));return n.a.createElement("div",{className:"p-message_pane__foreword__description"},l,this.renderDescriptionActions())}},{key:"renderDescriptionActions",value:function e(){var t=this.getNotificationWarningText();if(t)return n.a.createElement("div",{className:"p-message_pane__foreword__notification_warning"},t);if(!this.props.featureReactMessages)return null;var a=this.props.notificationSetting;if("everything"===a)return n.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},Ca.rt("You\u2019ll be notified for <strong>every new message</strong> in this conversation.",{fallbackHash:"d74e681b9c224e38f01310015fd4ae63f9c3ba9c"})," ",this.renderEditButton());if("mentions_dms"===a)return n.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},Ca.rt("You\u2019ll be notified when <strong>a teammate mentions you or uses one of your keywords</strong>.")," ",this.renderEditButton());return n.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},Ca.rt("You won\u2019t receive notifications.")," ",this.renderEditButton())}},{key:"renderEditButton",value:function e(){if(!this.props.featureReactMessages)return null;return n.a.createElement(Ze["a"],{onClick:this.openChannelPrefsDialog},Ca.rt("Change this setting",{fallbackHash:"5301648dcf6b53cefc9ed52999aaa92d4603cae0"}))}},{key:"render",value:function e(){return n.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatars(),this.renderDescription())}}]);return t}(r["PureComponent"]);Sa.displayName="BaseMpimForeword";Sa.defaultProps=wa;var Ia=Object(u["createSelector"])(function(e,t){var a=t.channelId;return Object(I["d"])(e,a)},L["getCurrentUserId"],function(e,t){var a=Object(T["getMemberIdsFromMpim"])(e);return Object(l["without"])(a,t)});function Ta(e,t){var a=t.channelId;var r=Object(I["d"])(e,a);if(!r)return null;var n=[];if(Object(T["isExternallySharedChannel"])(r)){var i=Object(T["getPendingAndConnectedTeamIds"])(e,r,{includeSelfTeamId:true});var s=Object(ta["omitCurrentTeamId"])(e,i);n=s.map(function(t){return Object(ea["i"])(e,t)})}return{memberIds:Ia(e,{channelId:a}),externalTeams:n,notificationPermission:Object(ga["getNotificationPermission"])(e),notificationSetting:Object(_a["g"])(e,a),featureReactMessages:Object(L["isFeatureEnabled"])(e,"feature_react_messages"),prefWhoCanSeeThis:Object(Mt["f"])(e,"whocanseethis_dm_mpdm_badge")}}function Aa(e){return{openChannelNotificationPrefsModal:function t(){return e(ka["a"].apply(void 0,arguments))},openPrefsModal:function t(){return e(Ea["a"].apply(void 0,arguments))}}}var Na=Object(i["connect"])(Ta,Aa)(Sa);Na.propTypes={channelId:b["b"].string};Na.defaultProps={channelId:null};var Pa=Na;var Ra=new ge["b"]("message_pane_foreword");var Ma="USLACKBOT";var Da=n.a.createElement("h1",{className:"p-message_pane__foreword__title"},Ra.t("Hi, Slackbot here!"));var xa=n.a.createElement("div",{className:"p-message_pane__foreword__description display_flex"},n.a.createElement(ya["b"],{userId:Ma,size:48,className:"p-message_pane__foreword__avatar"}),n.a.createElement("div",null,n.a.createElement("p",null,Ra.rt("You can ask me simple questions about how Slack works, or just type a few keywords. For example: <b>Can I edit a message I\u2019ve posted?</b> Or simply: <b>edit message</b>.")),n.a.createElement("p",{className:"margin_0"},Ra.rt("I\u2019m only a bot, but I\u2019ll do my best to answer! If I don\u2019t understand, I\u2019ll search the <a>Help Center</a>.",null,function(e){var t=e.key,a=e.text;return n.a.createElement(Lt["a"],{key:t,rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},a)}))));var Fa=function(e){de()(t,e);function t(){ie()(this,t);return ce()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}oe()(t,[{key:"shouldComponentUpdate",value:function e(){return false}},{key:"render",value:function e(){var t=he()("p-message_pane__foreword","p-message_pane__foreword--slackbot");return n.a.createElement("div",{className:t},Da,xa)}}]);return t}(r["Component"]);Fa.displayName="SlackbotForeword";var La=Fa;var Ba=a(270);var Ua=new ge["b"]("message_pane_foreword");var qa={channel:b["b"].object,channelId:b["b"].string,isPrivate:b["b"].bool,isPendingShared:b["b"].bool,sharedTeams:b["b"].arrayOf(b["b"].shape({id:b["b"].string.isRequired,name:b["b"].string})),externalTeams:b["b"].arrayOf(b["b"].shape({id:b["b"].string.isRequired,name:b["b"].string})),purpose:b["b"].string,isUserRestricted:b["b"].bool,featureOrgAwareExternalSharedChannels:b["b"].bool};var Ga={channel:null,channelId:null,isPrivate:false,isPendingShared:false,sharedTeams:[],externalTeams:[],purpose:null,isUserRestricted:false,featureOrgAwareExternalSharedChannels:false};var Wa=function(e){de()(t,e);function t(){ie()(this,t);var e=ce()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.renderTeamName=e.renderTeamName.bind(e);return e}oe()(t,[{key:"renderTitle",value:function e(){var t=this.props.channel;var a={inherit:true,align:"baseline"};return n.a.createElement("h1",{className:"p-message_pane__foreword__title"},n.a.createElement(Ge["a"],{channel:t,inline:true,iconProps:a}))}},{key:"renderAvatars",value:function e(){var t=this.props,a=t.channel,r=t.sharedTeams,i=t.featureOrgAwareExternalSharedChannels;if(c.a.isEmpty(r))return null;var s=r.map(function(e){var t=Object(T["isPendingSharedForTeamId"])(a,e.id,{featureOrgAwareExternalSharedChannels:i});return n.a.createElement(Ba["b"],{key:e.id,id:e.id,size:56,isPendingShared:t,className:"p-message_pane__foreword__avatar"})});return n.a.createElement("div",{className:"p-message_pane__foreword__avatars"},s)}},{key:"renderTeamName",value:function e(t){if(Object(ta["isUnknown"])(t))return n.a.createElement(aa["a"],{type:"unknown"});return Object(ta["getTeamDisplayName"])(t)}},{key:"renderDescription",value:function e(){var t=this.props,a=t.channelId,r=t.purpose,i=t.sharedTeams,s=t.externalTeams,o=t.isPendingShared,l=t.isUserRestricted;var c=void 0;if(o){var u=s.map(this.renderTeamName);var d=Object(ge["g"])(u,{noEscape:true,react:true,strong:true});c=Ua.rt("This is a shared channel. Waiting for {names} to join...",{names:d})}else{var p=i.map(this.renderTeamName);var h=Object(ge["g"])(p,{noEscape:true,react:true,strong:true});c=Ua.rt("This is a shared channel between {names}.",{names:h})}return n.a.createElement(jt,{channelId:a,description:c,purpose:r,isUserRestricted:l})}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.isPrivate;var i=he()("p-message_pane__foreword",{"p-message_pane__foreword--private":r});return n.a.createElement("div",{className:i},this.renderAvatars(),this.renderTitle(),this.renderDescription(),n.a.createElement(_t,{channelId:a}))}}]);return t}(r["PureComponent"]);Wa.displayName="SharedForeword";Wa.defaultProps=Ga;function Ha(e,t){var a=t.channelId;var r=Object(I["d"])(e,a);if(!r)return null;var n=Object(Fe["b"])(e);var i=r.purpose?r.purpose.value:null;var s=Object(T["isPrivateChannel"])(r);var o=Object(T["isExternallySharedChannel"])(r);var l=Object(T["isPendingExternallySharedChannel"])(r);var c=[];var u=[];if(o||l){var d=Object(T["getPendingAndConnectedTeamIds"])(e,r,{includeSelfTeamId:true});c=d.map(function(t){return Object(ea["i"])(e,t)});var p=Object(ta["omitCurrentTeamId"])(e,d);u=p.map(function(t){return Object(ea["i"])(e,t)})}return{channel:r,isPendingShared:l,isPrivate:s,isUserRestricted:n.is_restricted,purpose:i,sharedTeams:c,externalTeams:u,featureOrgAwareExternalSharedChannels:Object(L["isFeatureEnabled"])(e,"feature_org_aware_external_shared_channels")}}var Va=Object(i["connect"])(Ha)(Wa);var Ka=a(933);var za=new ge["b"]("newxp_onboarding");var Ya={step:b["b"].string};var Qa={step:null};var Ja={START:"onboarding_start",CANCELLED:"onboarding_cancelled",SLACKBOT:"onboarding_slackbot_conversation",COMPLETE:"onboarding_complete"};var Za=function(e){de()(t,e);function t(){ie()(this,t);return ce()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}oe()(t,[{key:"renderHeaderAction",value:function e(){if(this.props.step===Ja.CANCELLED)return za.rt("I changed my mind. <a>Take the tutorial.</a>",null,function(e){var t=e.key,a=e.text;return n.a.createElement(Lt["a"],{key:t,onClick:Ka["b"]},a)});if(this.props.step===Ja.SLACKBOT)return za.rt("Got the hang of Slack already? <a>Skip the tutorial.</a>",null,function(e){var t=e.key,a=e.text;return n.a.createElement(Lt["a"],{key:t,onClick:Ka["a"]},a)});return null}},{key:"renderFooter",value:function e(){if(this.props.step!==Ja.START)return null;return n.a.createElement("div",{className:"p-message_pane__newxp_foreword__footer"},n.a.createElement(Ft["d"],{type:"primary",size:"large",className:"p-message_pane__newxp_foreword__explore",onClick:Ka["f"]},za.rt("Explore Slack")),n.a.createElement("div",{className:"p-message_pane__newxp_foreword__pre_skip"},za.rt("Not your first Slack workspace? <a>Skip the tutorial</a>",null,function(e){var t=e.key,a=e.text;return n.a.createElement(Lt["a"],{key:t,onClick:Ka["a"],"data-qa":"skip_tutorial"},a)})))}},{key:"render",value:function e(){var t=this.props.step;var a=he()("p-message_pane__newxp_foreword",{"p-message_pane__newxp_foreword--start":"onboarding_start"===t});return n.a.createElement("div",{className:a},n.a.createElement("div",{className:"p-message_pane__newxp_foreword__header"},n.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_text"},za.rt("Welcome!")),n.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_message"},za.t("Slack is a collaboration hub for teams.",{fallbackHash:"2548745b7be53c916d085ad9d7a6350c53b003b3"})),n.a.createElement("div",{className:"p-message_pane__newxp_foreword__skip_messaging"},this.renderHeaderAction())),this.renderFooter())}}]);return t}(r["PureComponent"]);Za.displayName="NewxpForeword";Za.defaultProps=Qa;var Xa=Za;var $a=xe;var er=new ge["b"]("message_pane_foreword");var tr={clogger:b["b"].object.isRequired};var ar=35;var rr=function(e){de()(t,e);function t(){ie()(this,t);return ce()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}oe()(t,[{key:"componentDidMount",value:function e(){var t=this.props.clogger;t.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:ar}}})}},{key:"render",value:function e(){var t="/pricing?ui_step=42&ui_element="+ar;return n.a.createElement("div",{className:"p-message_pane__limited_history_alert"},n.a.createElement(ca["b"],{text:":speech_balloon:",emojiSize:ca["a"].MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0",er.rt("<b>There\u2019s more to this conversation.</b> To see and search this conversation\u2019s full history, upgrade to one of our paid plans."),"\xa0",n.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"slackbot_message_limit_header","data-clog-ui-action":"click","data-clog-ui-step":"history"},er.t("Learn More")))}}]);return t}(r["PureComponent"]);rr.displayName="LimitedHistoryAlert";var nr=function e(t){return{clogger:Object(Qe["a"])({state:t})}};var ir=Object(i["connect"])(nr)(rr);var sr=a(1812);var or=a(1813);var lr=a(112);var cr=a.n(lr);var ur=a(1067);var dr=function(e){de()(t,e);function t(e){ie()(this,t);var a=ce()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));c.a.isFunction(e.shouldExcludeFirstItemFromGravity)&&(a.shouldExcludeFirstItemFromGravity=e.shouldExcludeFirstItemFromGravity);return a}oe()(t,[{key:"layout",value:function e(){cr()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"layout",this).call(this);if(this.totalHeight<this.containerHeight){var a=this.containerHeight-this.totalHeight;this.tops=c.a.mapValues(this.tops,function(e){return e+a});this.totalHeight=this.containerHeight}this.shouldExcludeFirstItemFromGravity&&this.shouldExcludeFirstItemFromGravity()&&this.keys.length>0&&(this.tops[c.a.first(this.keys)]=0)}}]);return t}(ur["a"]);var pr=dr;var hr=a(1174);var vr=a(1814);var mr=a(3921);var fr=mr["a"];var br=a(96);var gr=a(374);var _r=a(1761);var yr=a(3930);var Or=a(3233);var kr=sr["a"];var Er=or["a"];var Cr={channelId:b["b"].string,timestamps:b["b"].arrayOf(b["b"].string),requestHistory:b["b"].func,lastReadTs:b["b"].string,isGhostLastRead:b["b"].bool,startTs:b["b"].string,startTsOffset:b["b"].number,highlightTs:b["b"].string,focusRequestedTs:b["b"].string,rollups:b["b"].objectOf(fe["a"].Rollup()),setUnreadPoint:b["b"].func,isLoading:b["b"].bool,isLoadingOlder:b["b"].bool,reachedStart:b["b"].bool,reachedEnd:b["b"].bool,prevReachedEnd:b["b"].bool,oldest:b["b"].string,latest:b["b"].string,onScroll:b["b"].func,onVisibleRowsChanged:b["b"].func,doneHighlighting:b["b"].func,isLimited:b["b"].bool,isSlackbotIm:b["b"].bool,useStickyDayDividers:b["b"].bool,shouldIgnoreScrollKeys:b["b"].func,shouldIgnoreArrowKeys:b["b"].func,channelSessionId:b["b"].string,theme:b["b"].string,firstUnreadTs:b["b"].string,featureReactMessages:b["b"].bool,featureTinyspeck:b["b"].bool,featureAriaApplicationMode:b["b"].bool,messageContainerType:b["b"].string,ariaLabel:b["b"].string.isRequired,teamId:b["b"].string,enterpriseId:b["b"].string,sessionId:b["b"].string,msgTriggers:b["b"].object,currentUserId:b["b"].string,jumpToTimestamp:b["b"].func,makeMessageSummary:b["b"].func,isScreenReaderEnabled:b["b"].bool,windowLastFocusEvent:b["b"].number,onFocusEnter:b["b"].func,onFocusLeave:b["b"].func,isBannerVisible:b["b"].bool,setFocusRequestedTs:b["b"].func,showThreadIfThreadable:b["b"].func,featureReactThreads:b["b"].bool,currentThreadKey:b["b"].string,isThreadable:b["b"].func,threadListId:b["b"].string,telemeter:b["b"].object};var jr={channelId:null,timestamps:[],requestHistory:c.a.noop,lastReadTs:void 0,isGhostLastRead:false,startTs:null,startTsOffset:null,highlightTs:null,focusRequestedTs:void 0,rollups:null,setUnreadPoint:c.a.noop,isLoading:false,isLoadingOlder:false,reachedStart:false,reachedEnd:false,prevReachedEnd:false,oldest:void 0,latest:void 0,onScroll:c.a.noop,onVisibleRowsChanged:c.a.noop,doneHighlighting:c.a.noop,isLimited:false,isSlackbotIm:false,useStickyDayDividers:true,shouldIgnoreScrollKeys:function e(){return false},shouldIgnoreArrowKeys:function e(){return false},channelSessionId:null,theme:"light",firstUnreadTs:null,featureReactMessages:false,featureTinyspeck:false,featureAriaApplicationMode:false,messageContainerType:void 0,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,currentUserId:null,jumpToTimestamp:c.a.noop,makeMessageSummary:void 0,isScreenReaderEnabled:false,windowLastFocusEvent:null,onFocusEnter:c.a.noop,onFocusLeave:c.a.noop,isBannerVisible:false,setFocusRequestedTs:c.a.noop,showThreadIfThreadable:c.a.noop,featureReactThreads:false,currentThreadKey:void 0,isThreadable:c.a.noop,threadListId:void 0,telemeter:{store:c.a.noop,measure:c.a.noop}};var wr=80;var Sr=60;var Ir=64;var Tr=120;var Ar=28;var Nr="MESSAGE-LIST";var Pr=864e5;var Rr={ABOVE:1,VISIBLE:2,BELOW:3};var Mr="0000000000.000001";var Dr=function e(t){var a=Math.floor(t/1e3);return a+".000000"};var xr=function(e){de()(t,e);function t(e){ie()(this,t);var a=ce()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=Object(vr["a"])();a.state={degraded:r,isLoading:e.isLoading,isLoadingOlder:e.isLoadingOlder,isSelecting:false,hasKeyboardFocus:false};a.DEFAULT_ROW_HEIGHT="light"===e.theme?wr:Sr;a.STICKY_EPSILON=a.DEFAULT_ROW_HEIGHT/2;a.ANCHOR_OFFSET=r?Tr:Ir;a.heightCache=new hr["a"]({DEFAULT_HEIGHT:a.DEFAULT_ROW_HEIGHT});a.layout=new pr({heightCache:a.heightCache,stickToBottom:e.reachedEnd||e.prevReachedEnd,shouldExcludeFirstItemFromGravity:a.isFirstRowLimitedHistoryForeword.bind(a),STICKY_EPSILON:a.STICKY_EPSILON,STICKY_EPSILON_SETHEIGHT:2,ANCHOR_OFFSET:a.ANCHOR_OFFSET});a.keys=[];a.rows=[];a.visibleRows=[];a.unreadIndex=null;a.list=null;a.useAnchor=true;a.keyToScrollTo=null;a.width=0;a.hasRenderedOneMessage=false;a.requestAround=a.requestAround.bind(a);a.requestOlder=a.requestOlder.bind(a);a.requestNewer=a.requestNewer.bind(a);a.renderRow=a.renderRow.bind(a);a.setListRef=a.setListRef.bind(a);a.getAriaLabelForRow=a.getAriaLabelForRow.bind(a);a.isItemAriaExpanded=a.isItemAriaExpanded.bind(a);a.onScroll=a.onScroll.bind(a);a.onListScrolled=a.onListScrolled.bind(a);a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.debouncedOnListScrolled=Object(Te["a"])(a.onListScrolled,150);a.isMessage=a.isMessage.bind(a);a.onSelectionChange=a.onSelectionChange.bind(a);a.onJumpToUnreadShortcut=a.onJumpToUnreadShortcut.bind(a);a.onShiftPageUp=a.onShiftPageUp.bind(a);a.onShiftPageDown=a.onShiftPageDown.bind(a);a.onEnd=a.onEnd.bind(a);a.onArrowKeyRight=a.onArrowKeyRight.bind(a);a.scrollToOffset=c.a.throttle(a.scrollToOffset.bind(a),200);a.messagesRendered={};a.loadingHistoriesSeen=0;a.loadingHistoriesSeenHighEnd=0;a.loadingHistoriesPerHowManyMessages=84;a.loadingHistoriesPerHowManyMessagesHighEnd=500;a.scrollMetricsGatheringEnabled=Object(Se["a"])(1)||a.props.featureTinyspeck;if(a.scrollMetricsGatheringEnabled){var n=Object(o["c"])(e.teamId);var i=Object(d["c"])({state:n});a.debounceBatchMessagesSeen=c.a.debounce(function(){i.store("modern_history_load_seen_per_84_messages",a.loadingHistoriesSeen,{allow_zero:true});a.loadingHistoriesSeen=0},1e3);a.debounceBatchMessagesSeenHighEnd=c.a.debounce(function(){i.store("modern_history_load_seen_per_500_messages",a.loadingHistoriesSeenHighEnd,{allow_zero:true});a.loadingHistoriesSeenHighEnd=0},1e3)}a.debounceCountHistoryLoadSeen=c.a.debounce(function(){a.loadingHistoriesSeen+=1;a.loadingHistoriesSeenHighEnd+=1},1e3);a.prqMetrics={channelSwitch:{}};return a}oe()(t,[{key:"componentDidUpdate",value:function e(t){if(this.keyToScrollTo&&this.list){this.list.scrollToKey(this.keyToScrollTo,{lazy:this.lazyScroll});this.keyToScrollTo=null}var a=this.props.isLoading||this.props.isLoadingOlder;if(c.a.isFunction(this.onJump)&&!a&&this.props.timestamps.length){this.onJump();this.onJump=null}this.layout.setStickToBottom(this.props.reachedEnd||this.props.prevReachedEnd);this.onListScrolled();this.maybeLogChannelSwitch(t)}},{key:"maybeLogChannelSwitch",value:function e(t){if(!navigator.onLine)return;if("undefined"===typeof this.props.msgTriggers[this.props.channelId]||this.props.windowLastFocusEvent!==this.props.msgTriggers[this.props.channelId].lastFocus){this.prqMetrics.channelSwitch={};return}if(t.channelId!==this.props.channelId)this.trackChannelSwitchWithoutSync(t.channelId);else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&false===t.isLoading&&true===this.props.isLoading&&true!==this.props.isLoadingOlder&&false===this.prqMetrics.channelSwitch.hasLoggedVisible&&false===this.prqMetrics.channelSwitch.hasLoggedUsable){var a=false;this.trackChannelSwitchWithSync(_e["g"],a)}else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&true===t.isLoading&&false===this.props.isLoading&&true!==this.props.isLoadingOlder&&true===this.prqMetrics.channelSwitch.hasLoggedVisible){var r=true;this.trackChannelSwitchWithSync(_e["f"],r)}}},{key:"trackChannelSwitchWithoutSync",value:function e(t){if(this.prqMetrics.channelSwitch.duration){Object(_e["f"])(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop);Object(_e["g"])(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop)}var a=Object(o["c"])(this.props.teamId);var r=Object(d["c"])({state:a});var n="start_channel_change_"+this.props.channelId;var i=r.measure(n,"channel_change_react_msgs",null,{return_unprocessed:true}).unprocessed;this.prqMetrics.channelSwitch={duration:i,prevChannelId:t,nextChannelId:this.props.channelId,fetchHistoryState:_e["c"],hasLoggedVisible:false,hasLoggedUsable:false}}},{key:"trackChannelSwitchWithSync",value:function e(t,a){var r="start_channel_change_"+this.prqMetrics.channelSwitch.nextChannelId;var n=Object(o["c"])(this.props.teamId);var i=Object(d["c"])({state:n});t(i.measure(r,"channel_change_not_stored",null,{ephemeral:true,return_unprocessed:true}).unprocessed,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,_e["a"],this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop);if(a){this.prqMetrics.channelSwitch={};this.prqMetrics.channelSwitch.hasLoggedUsable=true}else this.prqMetrics.channelSwitch.hasLoggedVisible=true}},{key:"findTimestampClosestToStartTs",value:function e(){var t=this.props,a=t.startTs,r=t.timestamps;if(!r.length)return false;if(!a)return null;return c.a.find(r,function(e){return e>=a})}},{key:"focus",value:function e(){this.list.focus()}},{key:"blur",value:function e(){this.list.blur()}},{key:"setListRef",value:function e(t){this.list=t}},{key:"jumpToUnread",value:function e(t){var a=this;var r=this.props,n=r.lastReadTs,i=r.isScreenReaderEnabled,s=r.firstUnreadTs;var o=t&&"keydown"===t.type&&(i||this.state.hasKeyboardFocus);var l=c.a.isNumber(this.unreadIndex)&&this.keys[this.unreadIndex];if(l){if(o){this.list.setActiveItem(s);this.list.scrollToKey(s)}else this.list.scrollToKey(l);return}this.jumpToTimestamp({ts:n,onJump:function e(){a.state.hasKeyboardFocus&&a.list.setActiveItem(a.props.firstUnreadTs)}})}},{key:"isAtBottom",value:function e(){if(!this.list)return false;var t=this.list.getScrollTop();var a=this.layout.getTotalHeight();var r=this.height;return t+r>=Math.floor(a)-this.STICKY_EPSILON}},{key:"getUnreadLinePlacement",value:function e(){if("number"!==typeof this.unreadIndex)return Rr.ABOVE;if(!this.list)return Rr.ABOVE;var t=this.list.getVisibleRange(),a=t.start,r=t.end;if(this.unreadIndex<a)return Rr.ABOVE;if(this.unreadIndex<r)return Rr.VISIBLE;return Rr.BELOW}},{key:"getVisibleRows",value:function e(){if(!this.list)return[];var t=this.list.getVisibleRange(),a=t.start,r=t.end;var n=this.rows.slice(a,r);return n}},{key:"getScrollmarkForFocusedItem",value:function e(t){var a=t===Mr?this.props.timestamps[0]:t;return{mark:t,offset:this.layout.getTop(a)-this.list.getScrollTop()}}},{key:"getScrollmark",value:function e(){if(!this.list||!this.layout)return null;var t=this.state.hasKeyboardFocus?this.list.getActiveItem():this.previouslyActiveItem;this.previouslyActiveItem=null;if(t)return this.getScrollmarkForFocusedItem(t);var a=this.list.getScrollTop();if(this.layout.shouldStickToBottom(a))return null;var r=this.props.timestamps;var n=this.layout.findAnchor(r,r,a+this.ANCHOR_OFFSET);var i=this.layout.getTop(n)-a;return{mark:n,offset:i}}},{key:"onScroll",value:function e(){this.useAnchor=false;this.layout.setAnchor(false);this.debouncedOnListScrolled();this.props.onScroll()}},{key:"onSelectionChange",value:function e(t){if(!this.node)return;this.setState(function(){return{isSelecting:t}})}},{key:"isMessage",value:function e(t){var a=this.rows[t.index];return a&&("message"===a.type||"foreword"===a.type)}},{key:"onListScrolled",value:function e(){var t=this.getVisibleRows();if(c.a.isEqual(t,this.visibleRows))return;this.visibleRows=t;this.props.onVisibleRowsChanged(t)}},{key:"onShiftPageUp",value:function e(){var t=this;var a=this.getTimestampOfPrevDay();if(!a)return;var r=this.state.hasKeyboardFocus;if(this.list.isScrolledToTop()&&this.props.reachedStart&&r){this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(a));return}var n=Dr(a);var i=this.props.isBannerVisible?Ir:Ar;this.jumpToTimestamp({ts:n,offset:i,onJump:function e(){var n=t.getTimestampOfFirstMessageForDay(a);r&&t.list.setActiveItem(n);t.list.scrollToKey(n,{lazy:t.lazyScroll})}})}},{key:"onShiftPageDown",value:function e(){var t=this;var a=this.getTimestampOfNextDay();if(!a)return;var r=this.state.hasKeyboardFocus;if(this.list.isScrolledToBottom()&&this.props.reachedEnd&&r){this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(a));return}var n=Dr(a);var i=this.props.isBannerVisible?Ir:Ar;this.jumpToTimestamp({ts:n,offset:i,onJump:function e(){var n=t.getTimestampOfFirstMessageForDay(a);r&&t.list.setActiveItem(n);t.list.scrollToKey(n,{lazy:t.lazyScroll})}})}},{key:"onEnd",value:function e(){var t=this;var a=this.props,r=a.reachedEnd,n=a.timestamps;var i=r?n[n.length-1]:null;this.jumpToTimestamp({ts:i,onJump:function e(){if(!t.state.hasKeyboardFocus)return;var a=t.rows;var r=a[a.length-1];var n=r&&r.type;"message"===n&&t.list.setActiveItem(r.ts)}});return false}},{key:"onArrowKeyRight",value:function e(t){var a=t.target;if(Object(Ie["a"])(a))return;var r=this.props,n=r.channelId,i=r.timestamps,s=r.featureReactThreads;if(!s)return;if(!this.state.hasKeyboardFocus)return;var o=this.list.getInitialActiveItem();if(!o||!c.a.includes(i,o))return;var l=this.props.showThreadIfThreadable({channelId:n,threadTs:o,requestFocus:true});l&&this.blur()}},{key:"onJumpToUnreadShortcut",value:function e(t){if(!gr["a"])return;this.jumpToUnread(t)}},{key:"onFocusEnter",value:function e(t){var a=this;this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}},function(){a.props.onFocusEnter(t);var e=a.props,r=e.featureReactThreads,n=e.focusRequestedTs,i=e.setFocusRequestedTs;r&&n&&n===a.list.getActiveItem()&&i(null)})}},{key:"onFocusLeave",value:function e(t){var a=this;this.state.hasKeyboardFocus&&(this.previouslyActiveItem=t.activeItem);this.setState(function(){return{hasKeyboardFocus:false}},function(){a.props.onFocusLeave(t)})}},{key:"scrollToOffset",value:function e(){var t;if(!this.list)return;(t=this.list).scrollToOffset.apply(t,arguments)}},{key:"shouldShowLimitedHistoryAlert",value:function e(){var t=this.props,a=t.isLimited,r=t.isSlackbotIm;return a&&r}},{key:"shouldShowLimitedHistoryForeword",value:function e(){var t=this.props,a=t.isLimited,r=t.isSlackbotIm;return a&&!r}},{key:"isFirstRowLimitedHistoryForeword",value:function e(){if(!this.shouldShowLimitedHistoryForeword())return false;var t=c.a.first(this.rows);return t&&"foreword"===t.type}},{key:"requestAround",value:function e(){var t=this;if(this.state.isLoading)return false;if(this.props.reachedEnd)return this.requestOlder();if(this.props.reachedStart)return this.requestNewer();Object(p["a"])({teamId:this.props.teamId}).info(Nr,"requestAround channelId: "+this.props.channelId+" isLoading: "+this.state.isLoading+" timestamps: "+c.a.size(this.props.timestamps)+" reachedStart: "+this.props.reachedStart+" reachedEnd: "+this.props.reachedEnd);var a=this.props,r=a.oldest,n=a.latest,i=a.timestamps,s=a.startTs;if(c.a.isEmpty(i)&&!s)return this.props.requestHistory({});var o=r||i&&c.a.first(i)||s;var l=n||i&&c.a.last(i)||s;var u=this.props.requestHistory({latest:o,oldest:l});if(u){this.prqMetrics.channelSwitch.fetchHistoryState!==_e["a"]&&(this.prqMetrics.channelSwitch.fetchHistoryState=_e["b"]);u.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=_e["a"]});this.setState(function(){return{isLoading:true,isLoadingOlder:false}})}return u}},{key:"requestOlder",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,r=a.oldest,n=a.timestamps,i=a.startTs;var s=r||n&&c.a.first(n)||i;var o=this.props.requestHistory({latest:s});if(o){this.prqMetrics.channelSwitch.fetchHistoryState!==_e["a"]&&(this.prqMetrics.channelSwitch.fetchHistoryState=_e["b"]);o.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=_e["a"]});this.setState(function(){return{isLoading:true,isLoadingOlder:true}})}return o}},{key:"requestNewer",value:function e(){var t=this;if(this.state.isLoading)return false;var a=this.props,r=a.latest,n=a.timestamps,i=a.startTs;var s=r||n&&c.a.last(n)||i;var o=this.props.requestHistory({oldest:s});if(o){this.prqMetrics.channelSwitch.fetchHistoryState!==_e["a"]&&(this.prqMetrics.channelSwitch.fetchHistoryState=_e["b"]);o.then(function(){t.prqMetrics.channelSwitch.fetchHistoryState=_e["a"]});this.setState(function(){return{isLoading:true,isLoadingOlder:false}})}return o}},{key:"renderMessage",value:function e(t,a){var r=a.hasFocus,i=a.isHovered,s=a.isExpanded;var o=t.ts,l=t.previousMessageTs;var u=c.a.last(this.props.timestamps);var d=o&&o===this.props.highlightTs;if(this.scrollMetricsGatheringEnabled){this.messagesRendered[t.ts]=true;var p=c.a.keys(this.messagesRendered).length;p%this.loadingHistoriesPerHowManyMessages===0&&this.debounceBatchMessagesSeen();p%this.loadingHistoriesPerHowManyMessagesHighEnd===0&&this.debounceBatchMessagesSeenHighEnd()}return n.a.createElement(fr,{ts:o,key:o,channelId:this.props.channelId,previousMessageTs:l,isLast:o===u,rollup:this.props.rollups[o],setUnreadPoint:this.props.setUnreadPoint,fadeAwayHighlight:d,doneHighlighting:this.props.doneHighlighting,channelType:this.props.channelType,channelSessionId:this.props.channelSessionId,isHovered:i,isThreadExpanded:s,threadListId:this.props.threadListId,messageContainerType:this.props.messageContainerType,renderActions:i||r,hasFocus:r,renderActionsOffscreen:this.state.hasKeyboardFocus,showThreadIfThreadable:this.props.showThreadIfThreadable})}},{key:"renderForeword",value:function e(){return n.a.createElement($a,{key:"message-list-foreword",channelType:this.props.channelType,channelId:this.props.channelId,hasLimitedHistory:this.shouldShowLimitedHistoryForeword()})}},{key:"renderRow",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.hasFocus,i=a.isHovered,s=a.isExpanded;var o=this.rows[t];if(!o||!o.type)return null;switch(o.type){case"message":return this.renderMessage(o,{hasFocus:r,isHovered:i,isExpanded:s});case"dayDividerLabel":return n.a.createElement(yr["b"],{key:o.day,date:o.day,sticky:this.props.useStickyDayDividers});case"dayDivider":return n.a.createElement(yr["a"],{key:o.day,date:o.day,isUnread:o.showDayDividerAsUnread,ghost:this.props.isGhostLastRead});case"unread":return n.a.createElement(_r["a"],{key:"unread",ghost:this.props.isGhostLastRead});case"loading":this.debounceCountHistoryLoadSeen();return n.a.createElement("div",{key:"loading",className:he()("c-message_list__placeholders","c-message_list__placeholders--"+this.props.theme,{"c-message_list__placeholders--legacy":!Object(be["a"])()})});case"loadingSpinner":return n.a.createElement("div",{className:"c-message_list__spinner"},n.a.createElement(br["a"],{size:"jumbo"}));case"foreword":return this.renderForeword({hasFocus:r});case"limited_history":return n.a.createElement(ir,null);default:return null}}},{key:"isItemAriaExpanded",value:function e(t,a){var r=this.props,n=r.channelId,i=r.isThreadable,s=r.currentThreadKey;if(!i)return;var o=this.rows[a];if(!o||!o.type)return;if("message"!==o.type)return;var l=Object(Y["decodeThreadKey"])(s),c=l.threadTs,u=l.channelId;var d=c===t&&n===u;if(i({channelId:n,threadTs:t}))return d;return}},{key:"getAriaLabelForRow",value:function e(t){var a=this.props,r=a.channelId,n=a.makeMessageSummary,i=a.isScreenReaderEnabled;if(!n)return null;var s=this.rows[t];if(!s||!s.type)return null;if("message"!==s.type)return null;var o=s.ts,l=s.previousMessageTs,c=s.isFirstMsgForDay,u=s.isLastMsgForDay,d=s.isFirstUnreadMsg,p=s.day;var h=this.props.rollups[o];if(!this.state.hasKeyboardFocus&&!i)return null;return n({channelId:r,ts:o,isFirstUnreadMsg:d,isFirstMsgForDay:c,isLastMsgForDay:u,previousMessageTs:l,day:p,rollup:h,hasFocus:this.state.hasKeyboardFocus})}},{key:"componentWillReceiveProps",value:function e(t){var a=this;this.setState(function(e){if(t.isLoading===e.isLoading&&t.isLoadingOlder===e.isLoadingOlder)return null;Object(p["a"])({teamId:a.props.teamId}).info(Nr,"componentWillReceiveProps isLoading: "+t.isLoading+" isLoadingOlder: "+t.isLoadingOlder+" timestamps: "+c.a.size(t.timestamps));return{isLoading:t.isLoading,isLoadingOlder:t.isLoadingOlder}});if(t.channelId!==this.props.channelId||t.startTs!==this.props.startTs||t.highlightTs&&t.highlightTs!==this.props.highlightTs||t.timestamps.length&&!this.props.timestamps.length){this.useAnchor=true;var r=t.startTs;var n=this.props.timestamps;var i=t.timestamps;if(c.a.inRange(r,c.a.floor(c.a.first(n)),c.a.ceil(c.a.last(n)))&&t.channelId===this.props.channelId){var s=c.a.findLast(i,function(e){return e<=t.startTs});this.keyToScrollTo=s;this.lazyScroll=t.highlightLazy;this.useAnchor=false}}if(t.channelId!==this.props.channelId){this.heightCache.invalidate();this.list&&this.list.resetRendered&&this.list.resetRendered();Object(p["a"])({teamId:this.props.teamId}).info(Nr,"Switching channels: "+t.channelId+" timestamps: "+c.a.size(t.timestamps))}t.lastReadTs!==this.props.lastReadTs&&(this.unreadIndex=null)}},{key:"groupTimestampsByDay",value:function e(t){return c.a.groupBy(t,function(e){return Object(Ae["a"])(e)})}},{key:"getTimestampsForDays",value:function e(t){return c.a.keys(this.groupTimestampsByDay(t)).sort()}},{key:"getTimestampOfDayClosestToTop",value:function e(){var t=this.list.getVisibleRange(),a=t.start;var r=this.rows[a];if(!r)return;if("dayDivider"===r.type)return r.day.toString();if("dayDividerLabel"===r.type)return r.day.toString();if("message"===r.type)return r.day.ts.toString();return}},{key:"getStartTimestampForDayNavigation",value:function e(){if(this.state.hasKeyboardFocus)return Object(Ae["a"])(this.list.getInitialActiveItem());return this.getTimestampOfDayClosestToTop()}},{key:"getTimestampOfPrevDay",value:function e(){var t=this.getStartTimestampForDayNavigation();var a=this.getTimestampOfFirstMessageForDay(t);if(!a)return t;if(a&&!this.list.isItemInView(a))return t;var r=this.getTimestampsForDays(this.props.timestamps);var n=c.a.indexOf(r,t);var i=n-1;return r[i]}},{key:"getTimestampOfNextDay",value:function e(){var t=this.getStartTimestampForDayNavigation();var a=this.getTimestampsForDays(this.props.timestamps);var r=c.a.indexOf(a,t);var n=a[r+1];if(n)return n;return(parseInt(t,10)+Pr).toString()}},{key:"getTimestampOfFirstMessageForDay",value:function e(t){var a=this.getTimestampsForDays(this.props.timestamps);var r=c.a.indexOf(a,t);if(r<0)return;if(0===r&&!this.props.reachedStart)return;var n=this.groupTimestampsByDay(this.props.timestamps);var i=n[t];return i?i[0]:void 0}},{key:"jumpToTimestamp",value:function e(t){var a=t.ts,r=t.offset,n=t.onJump;c.a.isFunction(n)&&(this.onJump=n);this.props.jumpToTimestamp({ts:a,offset:r})}},{key:"render",value:function e(){var t=this;var a=this.groupTimestampsByDay(this.props.timestamps);var r=c.a.keys(a).sort();var i=[];var s=[];var o=[];var l=this.findTimestampClosestToStartTs();var u=this.props.firstUnreadTs;var d=l;if(this.props.reachedStart){s.push(Mr);i.push({type:"foreword",ts:Mr});if(this.shouldShowLimitedHistoryAlert()){s.push("limited_history");i.push({type:"limited_history"})}}this.unreadIndex=null;var p=c.a.first(this.props.timestamps)<=this.props.lastReadTs||this.props.reachedStart;c.a.forEach(r,function(e,n){var l=parseInt(e,10);var h=a[e];var v=e+"."+t.props.channelId;var m=p&&c.a.first(h)===u;if(m){t.unreadIndex=i.length;t.props.startTs===t.props.lastReadTs&&(d=v)}i.push({type:"dayDividerLabel",day:l,showDayDividerAsUnread:m});t.props.useStickyDayDividers&&o.push({key:v,index:s.length});s.push(v);if(n>0||t.props.reachedStart||t.state.degraded){i.push({type:"dayDivider",day:l,showDayDividerAsUnread:m});s.push(e+"divider")}if(!t.state.degraded&&!t.state.isSelecting&&0===n&&t.state.isLoadingOlder){s.push("loading");i.push({type:"loading"})}var f=void 0;c.a.forEach(h,function(e,a){if(p&&0!==a&&e===u){t.unreadIndex=i.length;var o="unreadDivider";s.push(o);i.push({type:"unread",day:l});t.props.startTs===t.props.lastReadTs&&(d=u)}var c=0===n&&t.props.reachedStart;var v=n===r.length-1&&t.props.reachedEnd;var m=0===a&&(n>0||t.props.reachedStart);var b=a===h.length-1&&(n<r.length-1||t.props.reachedEnd);var g=u===e;i.push({type:"message",ts:e,previousMessageTs:f,isFirstMsgForDay:m,isLastMsgForDay:b,isFirstUnreadMsg:g,day:{ts:l,isFirstDay:c,isLastDay:v}});s.push(e);f=e})});if(this.state.isLoading&&!this.state.isLoadingOlder&&!this.props.reachedEnd&&!this.props.prevReachedEnd){s.push("loadingSpinner");i.push({type:"loadingSpinner"})}this.layout.setAnchor(this.useAnchor&&d,this.useAnchor&&this.props.startTsOffset);!this.useAnchor&&this.keyToScrollTo&&c.a.isNumber(this.props.startTsOffset)&&(this.layout.anchorOffset=this.props.startTsOffset);this.keys=s;this.rows=i;var h={firstVisibleUnreadTs:u,isGhostLastRead:this.props.isGhostLastRead,highlightTs:this.props.highlightTs,lastTimestamp:c.a.last(this.props.timestamps),reachedEnd:this.props.reachedEnd,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:this.props.useStickyDayDividers};var v=this.state.degraded?Er:kr;var m=this.props.shouldIgnoreScrollKeys;var f=[{keys:["command+j","ctrl+j"],handler:this.onJumpToUnreadShortcut},{keys:["shift+pagedown"],handler:this.onShiftPageDown.bind(this),filter:m},{keys:["shift+pageup"],handler:this.onShiftPageUp.bind(this),filter:m},{keys:["right"],handler:this.onArrowKeyRight,filter:m}];var b=function(){if(t.state.isLoading)return null;var e=i[i.length-1];var a=e&&e.type;var r=t.props.startTs===Mr||false===l&&"foreword"===a;if(r)return Mr;if(null===l&&"message"===a)return e.ts;if(u)return u;if(l)return l;return null}();return n.a.createElement(je["a"],null,function(e){var a=e.width,r=e.height;if(0===a||0===r)return null;if(a!==t.width){t.heightCache.invalidate();t.width=a}t.height=r;return n.a.createElement(v,{ref:t.setListRef,className:"c-message_list",ariaLabel:t.props.ariaLabel,height:r,width:a,keys:s,rowRenderer:t.renderRow,getAriaLabelForRow:t.getAriaLabelForRow,layout:t.layout,stickyItems:o,stickyOffsetTop:-21,stickyZIndex:200,loadAround:t.requestAround,loadPre:t.requestOlder,loadPost:t.requestNewer,isLoading:t.state.isLoading,reachedStart:t.props.reachedStart,reachedEnd:t.props.reachedEnd||t.props.prevReachedEnd,fadeScrollbar:true,onScroll:t.onScroll,onSelectionChange:t.onSelectionChange,onEnd:t.onEnd,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,keyCommands:f,shouldIgnoreScrollKeys:t.props.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:t.props.shouldIgnoreArrowKeys,isFocusableItem:t.isMessage,unrelatedUpdateProps:h,featureReactMessages:t.props.featureReactMessages,activeItem:t.props.focusRequestedTs,initialActiveItem:b,useAriaApplicationMode:t.props.featureAriaApplicationMode,isItemAriaExpanded:t.isItemAriaExpanded,itemAriaControls:t.props.threadListId})})}}]);return t}(we["a"]);xr.displayName="MessageList";xr.propTypes=Cr;xr.defaultProps=jr;var Fr=Object(Ne["a"])(xr);var Lr=Fr;var Br=a(1815);var Ur=a(1561);var qr=a(900);var Gr=a(780);var Wr=a(1348);var Hr=a(1826);var Vr=a(189);var Kr=a(2405);var zr=new ge["b"]("messages");var Yr={firstTimestamp:b["b"].string.isRequired,lastTimestamp:b["b"].string.isRequired,jumpToRecent:b["b"].func.isRequired};var Qr={};var Jr=function(e){de()(t,e);function t(){ie()(this,t);return ce()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}oe()(t,[{key:"render",value:function e(){var t=Object(Vr["a"])(this.props.firstTimestamp,{shortenMonth:true});var a=Object(Vr["a"])(this.props.lastTimestamp,{shortenMonth:true});return n.a.createElement("div",{className:"p-archives_banner"},n.a.createElement("span",{className:"p-archives_banner__date_range"},zr.t("Viewing archives from {rangeStart} - {rangeEnd}",{rangeStart:t,rangeEnd:a})),n.a.createElement(Ft["c"],{className:"p-archives_banner__jump",onClick:this.props.jumpToRecent},zr.t("Jump to recent messages"),n.a.createElement(Je["a"],{type:"arrow_down"})))}}]);return t}(r["PureComponent"]);Jr.displayName="ArchivesBanner";var Zr=Jr;Jr.defaultProps=Qr;var Xr=a(50);var $r=a(220);var en=a(706);var tn=a(79);var an=a(30);var rn=new ge["b"]("messages");var nn=3e3;var sn=100;var on={hasUnreads:b["b"].bool.isRequired,displayCount:b["b"].number,since:b["b"].oneOfType([b["b"].string,b["b"].number]),known:b["b"].bool,do24hrTime:b["b"].bool,channelId:b["b"].string,ghost:b["b"].bool,unreadPlacement:b["b"].oneOf(Object(l["values"])(Rr)),jumpToUnread:b["b"].func,markMostRecentMsgRead:b["b"].func,onHide:b["b"].func};var ln={displayCount:0,since:null,do24hrTime:false,known:false,channelId:null,ghost:false,unreadPlacement:Rr.VISIBLE,jumpToUnread:l["noop"],markMostRecentMsgRead:l["noop"],onHide:l["noop"]};var cn=function(e){de()(t,e);function t(e){ie()(this,t);var a=ce()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.startFade=a.startFade.bind(a);a.onAnimationTick=a.onAnimationTick.bind(a);a.onAnimationEnd=a.onAnimationEnd.bind(a);a.onKeyDown=a.onKeyDown.bind(a);a.jumpOrMark=a.jumpOrMark.bind(a);a.markAsRead=a.markAsRead.bind(a);a.animation=null;a.state={hasUnreads:e.hasUnreads,displayCount:e.displayCount,since:e.since,unreadPlacement:e.unreadPlacement,opacity:1};return a}oe()(t,[{key:"componentWillReceiveProps",value:function e(t){t.channelId!==this.props.channelId&&this.animation&&this.animation.cancel();if(this.state.hasUnreads&&!t.hasUnreads){var a=t.ghost?nn:0;this.startFade(a);return}this.setState(function(){return{hasUnreads:t.hasUnreads,displayCount:t.displayCount,since:t.since,unreadPlacement:t.unreadPlacement,opacity:1}})}},{key:"componentWillUnmount",value:function e(){this.animation&&this.animation.cancel()}},{key:"onAnimationTick",value:function e(t){var a=t.value,r=t.nextTick;if(!this.animation)return;this.setState(function(){return{opacity:a}});r()}},{key:"onAnimationEnd",value:function e(){var t=this;this.setState(function(){return{hasUnreads:false,opacity:1}},function(){t.props.onHide()})}},{key:"onKeyDown",value:function e(t){var a=[tn["c"],tn["h"]];Object(l["includes"])(a,t.keyCode)&&this.jumpOrMark(t)}},{key:"startFade",value:function e(t){this.animation=Object(en["a"])({delay:t,fromValue:1,toValue:0,duration:sn,easing:"easeInQuad",onTick:this.onAnimationTick,onComplete:this.onAnimationEnd})}},{key:"markAsRead",value:function e(t){t.stopPropagation();Object(p["b"])().action("UNREAD-BANNER","Mark "+this.props.channelId+" read");this.props.markMostRecentMsgRead({channelId:this.props.channelId,reason:ke["MARKED_REASONS"].CLICKED});this.animation&&this.animation.cancel();this.onAnimationEnd()}},{key:"jumpOrMark",value:function e(t){this.state.unreadPlacement===Rr.VISIBLE?this.markAsRead(t):this.props.jumpToUnread(t)}},{key:"makeJumpLabel",value:function e(){if(!Object(gr["a"])())return rn.t("Jump");var t=Object(an["isMac"])()?rn.t("Cmd"):rn.t("Ctrl");return rn.rt("Jump <span>({cmdButton} + J)</span>",{cmdButton:t},function(e){var t=e.text,a=e.key;return n.a.createElement("span",{key:a,className:"normal"},t)})}},{key:"makeJumpAriaLabel",value:function e(){if(!Object(gr["a"])())return;var t=Object(an["isMac"])()?rn.t("Cmd"):rn.t("Ctrl");return rn.t("Jump to first unread message ({cmdButton} J)",{cmdButton:t,fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"})}},{key:"renderJump",value:function e(){var t=this.state.unreadPlacement;if(t===Rr.VISIBLE)return null;var a=t===Rr.ABOVE?"arrow_up":"arrow_down";var r=this.makeJumpLabel();var i=this.makeJumpAriaLabel();return n.a.createElement(Ft["c"],{"aria-label":i,onMouseDown:this.jumpOrMark,onKeyDown:this.onKeyDown,className:"p-message_pane__unread_banner__jump"},n.a.createElement(Je["a"],{type:a,className:"p-message_pane__unread_banner__jump__arrow"}),r)}},{key:"renderClose",value:function e(){var t=he()("p-message_pane__unread_banner__close",{"p-message_pane__unread_banner__close--detached":this.state.unreadPlacement!==Rr.VISIBLE});return n.a.createElement(Xr["c"],{tip:rn.t("Mark as read (esc)"),position:"bottom-right"},n.a.createElement(Ft["c"],{className:t,onClick:this.markAsRead,"aria-label":rn.t("Mark as read")},n.a.createElement("span",{className:"p-message_pane__unread_banner__close__label"},rn.t("Mark as read")),n.a.createElement(Je["a"],{type:"times_small",className:"p-message_pane__unread_banner__close__icon"})))}},{key:"render",value:function e(){var t=this.state,a=t.hasUnreads,r=t.since,i=t.displayCount;var s=this.props,o=s.do24hrTime,l=s.known;if(!a||!r)return null;var c=Math.floor(parseFloat(r));if(!c)return null;var u=Object(Vr["a"])(c,{excludeYear:true});var d=Object($r["a"])(c,{do24hrTime:o});var p=l?"":"+";var h=i;!l&&h>10&&(h=10*Math.floor(h/10));var v=rn.t("{count, plural, =1 {#{certainty} new message} other {#{certainty} new messages}} since {time} on {date}",{certainty:p,count:h,time:d,date:u});h&&(1!==h||l)||(v=rn.t("New messages since {time} on {date}",{time:d,date:u}));return n.a.createElement("div",{className:"p-message_pane__unread_banner p-message_pane__banner"},n.a.createElement("div",{className:"p-message_pane__unread_banner__banner"},this.renderJump(),n.a.createElement(Ft["c"],{className:"p-message_pane__unread_banner__msg",onMouseDown:this.jumpOrMark,onKeyDown:this.jumpOrMark,style:{opacity:this.state.opacity}},v)),this.renderClose())}}]);return t}(r["PureComponent"]);cn.displayName="UnreadBanner";cn.defaultProps=ln;var un=function e(t,a){var r=a.since;if("0000000000.000000"===r){var n=Object(I["d"])(t,a.channelId);r=n.created}return{do24hrTime:Object(Mt["f"])(t,"time24"),since:r}};var dn=Object(i["connect"])(un)(cn);var pn=a(52);var hn=a(42);var vn=new ge["b"]("ms");var mn=6e4;var fn={featureSonicDegradedBanner:b["b"].bool};var bn={featureSonicDegradedBanner:false};var gn=function(e){de()(t,e);function t(e){ie()(this,t);var a=ce()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={timeAgoMessage:""};a.loadNewMessages=a.loadNewMessages.bind(a);return a}oe()(t,[{key:"componentDidMount",value:function e(){var t=this;this.degradedModeStartTs=Date.now();this.updateTimeInterval=setInterval(function(){var e=t.degradedModeStartTs/1e3;var a=Object(Le["o"])(e);t.setState(function(){return{timeAgoMessage:a}})},mn)}},{key:"componentWillUnmount",value:function e(){this.updateTimeInterval&&clearInterval(this.updateTimeInterval)}},{key:"getTimeAgoA11yText",value:function e(t){if(!this.props.featureSonicDegradedBanner)return null;if(hn["isDesktop"]){if(t)return vn.t("Last updated {timeAgo}\u2026 Press F6 to navigate to the status banner and click load new messages",{timeAgo:t});return vn.t("Last updated less than a minute ago\u2026 Press F6 to navigate to the status banner and click load new messages")}if(Object(an["isMac"])()){if(t)return vn.t("Last updated {timeAgo}\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages",{timeAgo:t});return vn.t("Last updated less than a minute ago\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages")}if(t)return vn.t("Last updated {timeAgo}\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages",{timeAgo:t});return vn.t("Last updated less than a minute ago\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages")}},{key:"loadNewMessages",value:function e(t){t&&t.preventDefault&&t.preventDefault()}},{key:"render",value:function e(){var t=this;if(!this.props.featureSonicDegradedBanner)return null;var a=this.state.timeAgoMessage;var r=void 0;r=a?vn.rt("Last updated {timeAgo}\u2026 <a>Load new messages</a>",{timeAgo:this.state.timeAgoMessage},function(e){var a=e.text;return n.a.createElement(Lt["a"],{onClick:t.loadNewMessages,"data-qa":"connecting_banner_cta"},a)}):vn.rt("Last updated less than a minute ago\u2026 <a>Load new messages</a>",null,function(e){var a=e.text;return n.a.createElement(Lt["a"],{onClick:t.loadNewMessages,"data-qa":"connecting_banner_cta"},a)});return n.a.createElement("div",null,r)}}]);return t}(r["PureComponent"]);gn.displayName="DegradedBanner";gn.defaultProps=bn;var _n=gn;var yn={featureSonicDegradedBanner:b["b"].bool,isDegradedMode:b["b"].bool};var On={featureSonicDegradedBanner:false,isDegradedMode:false};var kn=function(e){de()(t,e);function t(){ie()(this,t);return ce()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}oe()(t,[{key:"render",value:function e(){if(!this.props.featureSonicDegradedBanner)return null;if(!this.props.isDegradedMode)return null;return n.a.createElement(_n,{featureSonicDegradedBanner:this.props.featureSonicDegradedBanner})}}]);return t}(r["PureComponent"]);kn.displayName="DegradedBannerContainer";kn.defaultProps=On;var En=function e(t){return{featureSonicDegradedBanner:Object(L["isFeatureEnabled"])(t,"feature_sonic_degraded_banner"),isDegradedMode:Object(pn["isHavingTroubleReconnecting"])(t)}};var Cn=Object(i["connect"])(En)(kn);var jn=a(308);var wn=new ge["b"]("messages");var Sn={displayModelOrViewById:b["b"].func.isRequired,isHighlightsBackButtonVisible:b["b"].bool};var In={isHighlightsBackButtonVisible:false};var Tn=function(e){de()(t,e);function t(e){ie()(this,t);var a=ce()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.backToBriefings=a.backToBriefings.bind(a);return a}oe()(t,[{key:"backToBriefings",value:function e(){this.props.displayModelOrViewById({id:"Vall_unreads"})}},{key:"render",value:function e(){if(!this.props.isHighlightsBackButtonVisible)return null;return n.a.createElement(Ft["d"],{type:"outline",size:"small",className:"p-message_pane__briefings_back_button",onClick:this.backToBriefings},n.a.createElement(Je["b"],{className:"p-message_pane__briefings_back_button_icon",type:"arrow-left"}),wn.t("Back to my highlights"))}}]);return t}(r["PureComponent"]);Tn.displayName="BriefingsBackButton";Tn.defaultProps=In;var An=function e(t){return{isHighlightsBackButtonVisible:Object(h["o"])(t)}};var Nn=function e(t){return{displayModelOrViewById:function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.id;return t(Object(jn["a"])({id:r}))}}};var Pn=Object(i["connect"])(An,Nn)(Tn);var Rn=a(186);var Mn=a(866);var Dn=a(1551);var xn={channelId:b["b"].string.isRequired,userAttentionIsOnChat:b["b"].bool.isRequired};var Fn=function(e){de()(t,e);function t(e){ie()(this,t);var a=ce()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.triggerFileUpload=a.triggerFileUpload.bind(a);a.hiddenFileInputRef=n.a.createRef();a.commands=[{keys:["mod+u"],handler:a.triggerFileUpload}];return a}oe()(t,[{key:"componentDidMount",value:function e(){if(Object(be["a"])()){this.keyCommands=new Rn["a"];this.keyCommands.bindAll(this.commands)}}},{key:"componentWillUnmount",value:function e(){if(Object(be["a"])()){this.keyCommands.reset();this.keyCommands=null}}},{key:"triggerFileUpload",value:function e(){var t=this.props.userAttentionIsOnChat;if(!t)return;this.hiddenFileInputRef&&this.hiddenFileInputRef.current.click()}},{key:"render",value:function e(){var t=this.props.channelId;if(!Object(be["a"])())return null;return n.a.createElement(Dn["a"],{ref:this.hiddenFileInputRef,channelId:t,viewContext:ke["MESSAGE_CONTAINERS"].MESSAGE_PANE})}}]);return t}(r["Component"]);Fn.displayName="FileUploadShortcut";function Ln(e){return{userAttentionIsOnChat:Object(Mn["c"])(e)}}var Bn=Object(i["connect"])(Ln)(Fn);var Un=new ge["b"]("search");var qn={logger:b["b"].object,channelId:b["b"].string,channelDisplayName:b["b"].string,type:b["b"].oneOf(["channel","private","im","mpim"]),theme:b["b"].oneOf(["light","dense"]),timestamps:b["b"].arrayOf(b["b"].string),reachedStart:b["b"].bool,reachedEnd:b["b"].bool,prevReachedEnd:b["b"].bool,oldest:b["b"].string,latest:b["b"].string,fetchHistory:b["b"].func,fetchSliHighlights:b["b"].func,onMount:b["b"].func,callAppHomeOpenEventByChannelId:b["b"].func,lastReadTs:b["b"].string,isGhostLastRead:b["b"].bool,unreadCount:b["b"].number,unreadCountKnown:b["b"].bool,startTs:b["b"].string,startTsOffset:b["b"].number,highlightTs:b["b"].string,highlightLazy:b["b"].bool,focusRequestedTs:b["b"].string,rollups:b["b"].objectOf(fe["a"].Rollup()),isLoading:b["b"].bool,isLoadingOlder:b["b"].bool,setUnreadPoint:b["b"].func,markMostRecentMsgRead:b["b"].func,setUnreadLineVisibility:b["b"].func,clearHighlightTs:b["b"].func,jumpToTimestamp:b["b"].func,saveScrollmark:b["b"].func,isArchived:b["b"].bool,isLimited:b["b"].bool,isSlackbotIm:b["b"].bool,isAppIm:b["b"].bool,overlayVisible:b["b"].bool,channelSessionId:b["b"].string,prevChannelSwitchTs:b["b"].string,newxpOnboardingStep:b["b"].string,firstUnreadTs:b["b"].string,featureReactMessages:b["b"].bool,featureTinyspeck:b["b"].bool,useGlobalNav:b["b"].bool,featureClassicNav:b["b"].bool,featureAriaApplicationMode:b["b"].bool,featureLazyUserGroups:b["b"].bool,teamId:b["b"].string,enterpriseId:b["b"].string,sessionId:b["b"].string,msgTriggers:b["b"].object,hasMessagePaneUnmounted:b["b"].bool,setMessagePaneHasUnmounted:b["b"].func,currentUserId:b["b"].string,isAppSpaceOpen:b["b"].bool,isShared:b["b"].bool,isOrgShared:b["b"].bool,isYou:b["b"].bool,isMuted:b["b"].bool,hasUnreads:b["b"].bool,hasDraft:b["b"].bool,badgeCount:b["b"].number,screenReaderOverride:b["b"].bool,windowLastBlurEvent:b["b"].number,windowLastFocusEvent:b["b"].number,makeMessageSummary:b["b"].func,isScreenReaderEnabled:b["b"].bool,setFocusRequestedTs:b["b"].func,showThreadIfThreadable:b["b"].func,featureReactThreads:b["b"].bool,currentThreadKey:b["b"].string,isThreadable:b["b"].func,unavailableTeamId:b["b"].string,canPostInChannel:b["b"].bool,featureAnnounceOnly:b["b"].bool,featureTriggerUserDmClick:b["b"].bool,telemeter:b["b"].object.isRequired,showSearchScrollbackTip:b["b"].bool,searchInProductEducationReset:b["b"].func};var Gn={logger:{error:c.a.noop},channelId:null,channelDisplayName:void 0,type:"channel",theme:"light",timestamps:[],reachedStart:false,reachedEnd:false,prevReachedEnd:false,oldest:void 0,latest:void 0,fetchHistory:c.a.noop,fetchSliHighlights:c.a.noop,onMount:c.a.noop,callAppHomeOpenEventByChannelId:c.a.noop,lastReadTs:void 0,isGhostLastRead:false,unreadCount:0,unreadCountKnown:false,startTs:null,startTsOffset:null,highlightTs:null,highlightLazy:void 0,focusRequestedTs:void 0,rollups:null,isLoading:false,isLoadingOlder:false,setUnreadPoint:c.a.noop,markMostRecentMsgRead:c.a.noop,setUnreadLineVisibility:c.a.noop,clearHighlightTs:c.a.noop,jumpToTimestamp:c.a.noop,saveScrollmark:c.a.noop,isArchived:false,isLimited:false,isSlackbotIm:false,isAppIm:false,overlayVisible:false,channelSessionId:null,prevChannelSwitchTs:null,newxpOnboardingStep:null,firstUnreadTs:null,featureReactMessages:false,featureTinyspeck:false,useGlobalNav:false,featureClassicNav:false,featureAriaApplicationMode:false,featureLazyUserGroups:false,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,hasMessagePaneUnmounted:false,setMessagePaneHasUnmounted:c.a.noop,currentUserId:null,isAppSpaceOpen:false,isShared:false,isOrgShared:false,isYou:false,isMuted:false,hasUnreads:false,hasDraft:false,badgeCount:0,screenReaderOverride:void 0,windowLastBlurEvent:null,windowLastFocusEvent:null,makeMessageSummary:void 0,isScreenReaderEnabled:false,setFocusRequestedTs:c.a.noop,showThreadIfThreadable:c.a.noop,featureReactThreads:false,currentThreadKey:void 0,isThreadable:c.a.noop,unavailableTeamId:"",canPostInChannel:true,featureAnnounceOnly:false,featureTriggerUserDmClick:false,showSearchScrollbackTip:false,searchInProductEducationReset:c.a.noop};var Wn=function(e){de()(t,e);function t(e){ie()(this,t);var a=ce()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.list=null;a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.onVisibleRowsChanged=a.onVisibleRowsChanged.bind(a);a.onUnreadBannerHide=a.onUnreadBannerHide.bind(a);a.setListRef=a.setListRef.bind(a);a.shouldIgnoreScrollKeys=a.shouldIgnoreScrollKeys.bind(a);a.shouldIgnoreArrowKeys=a.shouldIgnoreArrowKeys.bind(a);a.requestHistory=a.requestHistory.bind(a);a.jumpToMostRecent=a.jumpToMostRecent.bind(a);a.jumpToUnread=a.jumpToUnread.bind(a);a.state={showingArchiveBanner:false,showingUnreadBanner:false,unreadPlacement:Rr.VISIBLE};a.historyRequests={};a.prqMetrics={usableVisible:{}};a.sendSessionFrameStats=a.sendSessionFrameStats.bind(a);a.recordSessionFrameStats=a.recordSessionFrameStats.bind(a);return a}oe()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.onMount();var a=!!this.props.timestamps.length;var r=!!(this.props.unreadCount||this.props.unreadCountKnown);a&&r&&("channel"===this.props.type||"private"===this.props.type)&&this.props.fetchSliHighlights({channelId:this.props.channelId,timestamps:c.a.filter(this.props.timestamps,function(e){return e>t.props.lastReadTs}),lastReadTs:this.props.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs});this.props.isAppIm&&this.logAppHomeRequest(this.props.channelId,"messages");this.recordAndTrackTimeToVisible();document.hasFocus()?this.recordSessionFrameStats():window.addEventListener("focus",this.recordSessionFrameStats)}},{key:"componentWillReceiveProps",value:function e(t){var a=this;var r=this.props.channelId;this.setState(function(e){var r=a.getUnreadLinePlacement();if(!t.isLoading&&!c.a.isEmpty(t.timestamps)){var n=false===t.reachedEnd&&!t.prevReachedEnd;if(n!==e.showingArchiveBanner)return f()({},e,{unreadPlacement:r,showingArchiveBanner:n})}if(e.unreadPlacement!==r)return f()({},e,{unreadPlacement:r});return e});this.setState(function(e){var t=a.getUnreadBannerDisplayCount();var r=t>0;return f()({},e,{showingUnreadBanner:r})});if(r&&t.channelId!==r){var n=this.list&&this.list.getScrollmark();this.props.saveScrollmark({channelId:r,scrollmark:n});this.historyRequests={};this.recordAndTrackTimeToUsable(Oe["u"].ABANDONED);this.state.caughtError&&this.setState(function(){return{caughtError:false}});t.isAppIm&&this.logAppHomeRequest(t.channelId,"messages")}t.channelId===r&&t.isAppIm!==this.props.isAppIm&&t.isAppIm&&this.logAppHomeRequest(t.channelId,"messages");var i=this.props.timestamps.length!==t.timestamps.length;var s=this.props.unreadCount!==t.unreadCount||this.props.unreadCountKnown!==t.unreadCountKnown;!t.channelId||!i&&!s||"channel"!==t.type&&"private"!==t.type||this.props.fetchSliHighlights({channelId:t.channelId,timestamps:c.a.filter(t.timestamps,function(e){return e>t.lastReadTs}),lastReadTs:t.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs})}},{key:"componentDidUpdate",value:function e(){if(this.list){var t=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(t)}(true===this.props.reachedStart&&true===this.props.reachedEnd||this.props.timestamps.length>0)&&this.recordAndTrackTimeToUsable(Oe["u"].COMPLETED)}},{key:"componentWillUnmount",value:function e(){if(Object(be["a"])()){var t=this.list&&this.list.getScrollmark();var a=this.props.channelId;this.props.saveScrollmark({channelId:a,scrollmark:t})}this.sendSessionFrameStats();window.removeEventListener("focus",this.recordSessionFrameStats);this.props.setMessagePaneHasUnmounted(true)}},{key:"onFocusEnter",value:function e(t){this.hasFocus=true;this.hasKeyboardFocus=t.isKeyboardFocus}},{key:"onFocusLeave",value:function e(){this.hasFocus=false;this.hasKeyboardFocus=false}},{key:"onVisibleRowsChanged",value:function e(){if(!this.list)return;var t=this.getUnreadLinePlacement();this.setState(function(){return{unreadPlacement:t}});var a=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(a);this.list.isAtBottom()&&this.props.searchInProductEducationReset()}},{key:"onUnreadBannerHide",value:function e(){this.setState(function(){return{showingUnreadBanner:false}})}},{key:"getUnreadLinePlacement",value:function e(){if(1===this.props.unreadCount&&!this.props.unreadCountKnown||!this.list)return Rr.VISIBLE;return this.list.getUnreadLinePlacement()}},{key:"getUnreadBannerDisplayCount",value:function e(){var t=this.props,a=t.timestamps,r=t.lastReadTs,n=t.unreadCount,i=t.reachedEnd;return a.length&&i?a.filter(function(e){return e>r}).length:n}},{key:"setListRef",value:function e(t){this.list=t}},{key:"focus",value:function e(){this.list.focus()}},{key:"blur",value:function e(){this.list.blur()}},{key:"recordAndTrackTimeToVisible",value:function e(){if(this.props.hasMessagePaneUnmounted)return;if(0!==this.props.windowLastBlurEvent){this.prqMetrics.usableVisible={};return}var t=this.props.telemeter.measure("navigationStart","prq_time_to_visible",null,{return_unprocessed:true}).unprocessed;this.prqMetrics.usableVisible=re()({},this.props.channelId,t);Object(_e["j"])(t,"APP_ICON",false,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop,this.props.featureLazyUserGroups);this.props.setMessagePaneHasUnmounted(true)}},{key:"recordAndTrackTimeToUsable",value:function e(t){if(0===Object.keys(this.prqMetrics.usableVisible).length)return;if(0!==this.props.windowLastBlurEvent){this.prqMetrics.usableVisible={};return}var a=this.props.telemeter.measure("navigationStart","prq_time_to_usable",null,{return_unprocessed:true}).unprocessed;Object(_e["i"])(a,"APP_ICON",true,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,t,window.desktop,this.props.featureLazyUserGroups);this.prqMetrics.usableVisible={}}},{key:"recordSessionFrameStats",value:function e(){window.removeEventListener("focus",this.recordSessionFrameStats);window.addEventListener("blur",this.sendSessionFrameStats);window.addEventListener("beforeunload",this.sendSessionFrameStats);Object(_e["e"])(this.props.teamId,this.props.enterpriseId,Oe["k"].PRQ_SESSION_FRAME_STATS)&&Object(ye["g"])()}},{key:"sendSessionFrameStats",value:function e(){window.addEventListener("focus",this.recordSessionFrameStats);window.removeEventListener("blur",this.sendSessionFrameStats);window.removeEventListener("beforeunload",this.sendSessionFrameStats);if(!Object(ye["e"])())return;Object(ye["i"])();var t=Object(ye["a"])();if(0===t.durationMs)return;Object(_e["h"])(t.durationMs,t.histFrameRenderTime,t.histJankyWindows,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,window.desktop)}},{key:"shouldIgnoreScrollKeys",value:function e(t){var a=t.target;var r=a===document.body;var n=this.hasFocus;var i=Object(Ee["e"])();return!(r||n||i)}},{key:"shouldIgnoreArrowKeys",value:function e(t){var a=t.target;var r=document.querySelector(".client_channels_list_container");var n=document.getElementById("col_flex");var i=r&&r.contains(a);var s=n&&n.contains(a);return!Object(Ee["f"])()||s||i||!this.hasKeyboardFocus}},{key:"isUnreadLineVisible",value:function e(){var t=this.props,a=t.isGhostLastRead,r=t.unreadCount,n=t.reachedEnd,i=t.isLoading;if(i)return false;if(!a&&this.list.getUnreadLinePlacement()===Rr.VISIBLE)return true;if(!r&&n&&this.list.isAtBottom())return true;return false}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{caughtError:true}});this.props.logger.error("MessagePane componentDidCatch:",t,"message_pane_componentDidCatch")}},{key:"requestHistory",value:function e(t){var a=t.oldest,r=t.latest;var n=this.props,i=n.channelId,s=n.type,o=n.reachedStart,l=n.reachedEnd,c=n.logger;if(o&&l)return false;var u=a;var d=r;if(d&&o){if(!u)return false;d=null}if(u&&l){if(!d)return false;u=null}if(this.shouldPreventHistoryRequest({oldest:a,latest:r})){c.error({channelId:i,latestTs:d,oldestTs:u},"message_pane_request_rate_limited");return false}var p="message-pane/requestHistory";var h=this.props.fetchHistory({channelId:i,type:s,oldest:u,latest:d,reason:p});h&&this.logHistoryRequest({oldest:u,latest:d});return h}},{key:"logHistoryRequest",value:function e(t){var a=t.oldest,r=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=a+"_"+r;var o=this.historyRequests[s];if(!o){o={count:0,time:0};this.historyRequests[s]=o}if(i-1e4>o.time){o.count=1;o.time=i}else o.count+=1}},{key:"logAppHomeRequest",value:function e(t,a){this.props.featureTriggerUserDmClick&&this.props.callAppHomeOpenEventByChannelId({channelId:t,appHomeSection:a})}},{key:"shouldPreventHistoryRequest",value:function e(t){var a=t.oldest,r=t.latest,n=t.now,i=void 0===n?Date.now():n;var s=this.historyRequests[a+"_"+r];if(!s)return false;if(s.count<=3)return false;if(s.time<i-1e4)return false;return true}},{key:"jumpToMostRecent",value:function e(){this.props.jumpToTimestamp({ts:null})}},{key:"jumpToUnread",value:function e(t){this.list.jumpToUnread(t)}},{key:"renderArchivesBanner",value:function e(){if(!this.state.showingArchiveBanner)return null;var t=this.props.timestamps;if(c.a.isEmpty(t))return null;return n.a.createElement(Zr,{firstTimestamp:c.a.first(t),lastTimestamp:c.a.last(t),jumpToRecent:this.jumpToMostRecent})}},{key:"renderUnreadBanner",value:function e(){var t=this.props,a=t.unreadCount,r=t.unreadCountKnown,i=t.lastReadTs,s=t.channelId,o=t.isGhostLastRead,l=t.markMostRecentMsgRead,c=t.newxpOnboardingStep,u=t.overlayVisible,d=t.isArchived;if(u)return null;if(c&&c!==Ja.CANCELLED&&c!==Ja.COMPLETE)return null;if(d)return null;return n.a.createElement(dn,{channelId:s,hasUnreads:a>0,displayCount:this.getUnreadBannerDisplayCount(),known:r,since:i,ghost:o,unreadPlacement:this.state.unreadPlacement,jumpToUnread:this.jumpToUnread,markMostRecentMsgRead:l,onHide:this.onUnreadBannerHide})}},{key:"renderDegradedBanner",value:function e(){var t=this.props,a=t.newxpOnboardingStep,r=t.overlayVisible;if(r)return null;if(a)return null;return n.a.createElement(Cn,null)}},{key:"renderSearchScrollbackTip",value:function e(){var t=this.props.showSearchScrollbackTip;return n.a.createElement(Ce["a"],{enabled:["feature_strollers_to_perch"]},t&&n.a.createElement("div",{className:"p-message_pane__search_tip_banner"},n.a.createElement("div",{className:"p-message_pane__search_tip_banner_content"},Un.rt("<strong>Tip</strong>: If you\u2019re looking for something particular, try search"))))}},{key:"renderMessagePaneBannerContainer",value:function e(){var t=this.props,a=t.newxpOnboardingStep,r=t.overlayVisible;if(r)return null;if(a)return null;return n.a.createElement(Br["a"],null)}},{key:"render",value:function e(){if(this.props.isAppSpaceOpen)return null;if(this.state.caughtError)return null;if(this.props.newxpOnboardingStep===Ja.START)return n.a.createElement(Xa,{step:this.props.newxpOnboardingStep});if(this.props.unavailableTeamId)return n.a.createElement(Hr["a"],{channelId:this.props.channelId,unavailableTeamId:this.props.unavailableTeamId});if(!this.props.channelId)return null;var t=me.a.msie||me.a.msedge;var a=!this.props.overlayVisible&&!t;var r=he()("p-message_pane",{"p-message_pane--ie":t,"p-message_pane--global-nav":this.props.useGlobalNav,"p-message_pane--classic-nav":Object(be["a"])()&&this.props.featureClassicNav});var i=this.props,s=i.type,o=i.channelDisplayName,l=i.isShared,c=i.isOrgShared,u=i.isYou,d=i.isMuted,p=i.hasUnreads,h=i.hasDraft,v=i.isArchived,m=i.unreadCount,f=i.badgeCount,b=i.canPostInChannel,g=i.featureAnnounceOnly;var _=Object(Wr["a"])({type:s,displayName:o,isShared:l,isOrgShared:c,isYou:u,isMuted:d,hasUnreads:p,hasDraft:h,isArchived:v,unreadCount:m,badgeCount:f,canPost:b,featureAnnounceOnly:g,isSelected:false,userActive:false,isTyping:false});var y=Object(Y["makeIdForThreadList"])(this.props.currentThreadKey);return n.a.createElement(qr["a"],{component:this,order:0},n.a.createElement("div",{className:r,"data-qa":"message_pane"},n.a.createElement("div",{className:"p-message_pane__top_banners"},n.a.createElement(Pn,null),n.a.createElement(Ur["a"],null),this.renderUnreadBanner(),this.renderDegradedBanner(),this.renderSearchScrollbackTip()),this.renderMessagePaneBannerContainer(),n.a.createElement(Lr,{ref:this.setListRef,channelId:this.props.channelId,ariaLabel:_,timestamps:this.props.timestamps,startTs:this.props.startTs,startTsOffset:this.props.startTsOffset,shouldIgnoreScrollKeys:this.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:this.shouldIgnoreArrowKeys,highlightTs:this.props.highlightTs,highlightLazy:this.props.highlightLazy,focusRequestedTs:this.props.focusRequestedTs,requestHistory:this.requestHistory,lastReadTs:this.props.lastReadTs,isGhostLastRead:this.props.isGhostLastRead,rollups:this.props.rollups,isLoading:this.props.isLoading,isLoadingOlder:this.props.isLoadingOlder,setUnreadPoint:this.props.setUnreadPoint,reachedStart:this.props.reachedStart,reachedEnd:this.props.reachedEnd,prevReachedEnd:this.props.prevReachedEnd,oldest:this.props.oldest,latest:this.props.latest,onVisibleRowsChanged:this.onVisibleRowsChanged,doneHighlighting:this.props.clearHighlightTs,channelType:this.props.type,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:a,theme:this.props.theme,channelSessionId:this.props.channelSessionId,firstUnreadTs:this.props.firstUnreadTs,messageContainerType:ke["MESSAGE_CONTAINERS"].MESSAGE_PANE,featureReactMessages:this.props.featureReactMessages,featureTinyspeck:this.props.featureTinyspeck,featureAriaApplicationMode:this.props.featureAriaApplicationMode,teamId:this.props.teamId,enterpriseId:this.props.enterpriseId,sessionId:this.props.sessionId,msgTriggers:this.props.msgTriggers,windowLastFocusEvent:this.props.windowLastFocusEvent,currentUserId:this.props.currentUserId,screenReaderOverride:this.props.screenReaderOverride,jumpToTimestamp:this.props.jumpToTimestamp,makeMessageSummary:this.props.makeMessageSummary,isScreenReaderEnabled:this.props.isScreenReaderEnabled,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,isBannerVisible:this.state.showingUnreadBanner,setFocusRequestedTs:this.props.setFocusRequestedTs,showThreadIfThreadable:this.props.showThreadIfThreadable,featureReactThreads:this.props.featureReactThreads,currentThreadKey:this.props.currentThreadKey,isThreadable:this.props.isThreadable,threadListId:y}),this.renderArchivesBanner(),Object(be["a"])()?n.a.createElement(Bn,{channelId:this.props.channelId}):null))}}]);return t}(r["PureComponent"]);Wn.displayName="BaseMessagePane";Wn.defaultProps=Gn;var Hn=Object(Gr["a"])(Wn,{updateStore:function e(t){var a=t.instance,r=t.dispatch;var n=a.list&&a.list.getScrollmark();r(A({channelId:a.props.channelId,scrollmark:n}))}});var Vn=a(1527);var Kn=Object(u["createSelectorCreator"])(u["defaultMemoize"],J["a"]);var zn=20;var Yn=Kn([M["getPotentiallyOutdatedTimestamps"],x["b"],function(e,t,a){return a}],function(e,t,a){var r=e.timestamps,n=e.start,i=e.end,s=e.reachedStart,o=e.reachedEnd,l=e.prevReachedEnd;if(!o&&!l&&r&&r.length-c.a.sortedLastIndex(r,a)<zn)return{messages:[],rollups:{},reachedStart:false,reachedEnd:false};var u=c.a.reject(c.a.map(r,function(e){return t[e]}),z["isHidden"]);var d=Object(Vn["a"])(u),p=d.rollups,h=d.messages;return{messages:h,timestamps:c.a.map(h,function(e){return e.ts}),rollups:p,reachedStart:s,reachedEnd:o,prevReachedEnd:l,oldest:n,latest:i}});function Qn(e){var t=e.state,a=e.channelId,r=e.timestamps,n=e.rollups,i=e.lastReadTs;return c.a.find(r,function(e){var r=Object(x["a"])(t,a,e);var s=Object(L["getCurrentUserId"])(t);if(!r)return false;if(n[e]){var o=c.a.values(n[e]);var l=c.a.map(o,"ts");var u=c.a.map(l,function(e){return Object(x["a"])(t,a,e)});return c.a.some(u,function(e){return Object(z["isMessageUnread"])(e,i,s)})}return Object(z["isMessageUnread"])(r,i,s)})}var Jn=function e(t){var a=Object(q["a"])(t);var r=Object(I["d"])(t,a);var n=Object(L["isFeatureEnabled"])(t,"feature_react_messages");var i=Object(L["isFeatureEnabled"])(t,"feature_tinyspeck");var s=Object(ee["b"])(t);var o=Object(L["isFeatureEnabled"])(t,"feature_classic_nav");var l=Object(L["isFeatureEnabled"])(t,"feature_aria_application_mode");var u=Object(L["isFeatureEnabled"])(t,"feature_lazy_user_groups");var m=Object(L["getCurrentUserId"])(t);var f=Object(Z["c"])(t);var b=Object(U["a"])(t);var g=Object(h["b"])(t);var _=Object(B["getChannelTriggers"])(t);var O=Object(h["e"])(t);var k=Object(X["getWindowLastBlurEvent"])(t);var E=Object(X["getWindowLastFocusEvent"])(t);var C=Object(Y["getCurrentThreadKey"])(t);var j=Object(d["c"])({state:t});var w=Object(p["a"])({state:t});if(!r)return{featureReactMessages:n,featureTinyspeck:i,featureClassicNav:o,featureLazyUserGroups:u,currentUserId:m,teamId:f,enterpriseId:b,sessionId:g,msgTriggers:_,hasMessagePaneUnmounted:O,windowLastBlurEvent:k,windowLastFocusEvent:E,telemeter:j,logger:w};var S=Object(y["isChannelLoading"])(t,a);var A=Object(y["isChannelLoadingOlder"])(t,a);var P=Object(T["getLastReadTs"])(r);var R=false;var D=Object(h["d"])(t);if(D&&D!==P){P=D;R=true}var x=Object(h["h"])(t);var G=Object(h["i"])(t);var W=Object(h["g"])(t);var H=Object(h["f"])(t);var V=Object(T["getUnreadCount"])(r);var K=Object(M["getTimestampsByChannelId"])(t,a,P);var z=K&&K.reachedEnd;var J=Object(h["b"])(t);var ae=Object(h["l"])(t);var re=Object(F["a"])(t);var ne=Yn(t,a,x),ie=ne.timestamps,se=ne.rollups,oe=ne.reachedStart,le=ne.reachedEnd,ce=ne.prevReachedEnd,ue=ne.oldest,de=ne.latest;(Object(T["isPublicChannel"])(r)&&!Object(T["isMemberOfChannel"])(r)||Object(T["isArchived"])(r))&&(P=c.a.last(ie));var pe=Qn({state:t,channelId:a,timestamps:ie,rollups:se,lastReadTs:P});var he=Object($["isScreenReaderEnabled"])(t);var ve=Object(L["isFeatureEnabled"])(t,"feature_react_threads");var me=Object(h["n"])(t)&&(!Object(L["isFeatureEnabled"])(t,"feature_m11n_app_space")||Object(te["a"])(t,a));var fe=void 0;Object(T["isUnavailable"])(t,r)&&(fe=Object(T["getUnavailableTeamId"])(t,r));return{channelId:a,type:Object(T["getChannelType"])(r),channelDisplayName:Object(T["getDisplayNameForChannel"])(t,r,{publicChannelIncludeHashSign:false,imIncludeAtSign:false}),timestamps:ie,reachedStart:oe,reachedEnd:le,prevReachedEnd:ce,oldest:ue,latest:de,lastReadTs:P,isGhostLastRead:R,unreadCount:V,unreadCountKnown:z,startTs:x,startTsOffset:G,highlightTs:W,highlightLazy:H,focusRequestedTs:Object(L["isFeatureEnabled"])(t,"feature_react_threads")?Object(h["c"])(t):null,rollups:se,isAppSpaceOpen:me,isArchived:Object(T["isArchived"])(r),isLoading:S,isLoadingOlder:A,isLimited:Object(M["getIsLimited"])(t,a),isSlackbotIm:Object(T["isSlackbot"])(r),isAppIm:Object(T["isImWithApp"])(t,a),overlayVisible:Object(h["p"])(t),channelSessionId:J,prevChannelSwitchTs:ae,theme:re,newxpOnboardingStep:Object(h["j"])(t),firstUnreadTs:pe,featureReactMessages:n,featureTinyspeck:i,useGlobalNav:s,featureClassicNav:o,featureAriaApplicationMode:l,featureLazyUserGroups:u,teamId:f,enterpriseId:b,sessionId:g,msgTriggers:_,hasMessagePaneUnmounted:O,windowLastBlurEvent:k,windowLastFocusEvent:E,currentUserId:m,badgeCount:Object(I["c"])(t,r),isShared:Object(T["isExternallySharedChannel"])(r),isOrgShared:Object(T["isOrgShared"])(r),isYou:Object(T["isYou"])(t,r),isMuted:Object(N["isChannelMutedById"])(t,a),hasUnreads:!!Object(T["getUnreadCount"])(r),hasDraft:Object(T["getHasDraft"])(t,a),isScreenReaderEnabled:he,featureReactThreads:ve,currentThreadKey:ve?C:void 0,unavailableTeamId:fe,canPostInChannel:Object(Q["p"])(t,a),featureAnnounceOnly:Object(L["isFeatureEnabled"])(t,"feature_announce_only"),featureTriggerUserDmClick:Object(L["isFeatureEnabled"])(t,"feature_trigger_user_dm_click"),telemeter:j,showSearchScrollbackTip:Object(v["searchInProductEducationShouldDisplay"])(t),logger:w}};function Zn(e){return function(t,a){var r=Object(h["q"])(a());if(r!==e){Object(p["a"])({getState:a}).info("CHECK-UNREADS","unreadLineVisible updated: "+r+" -> "+e);t(Object(S["n"])(e))}}}var Xn=function e(){for(var t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];return function(e,t){return z["isThreadable"].apply(void 0,[t()].concat(a))}};var $n={fetchHistory:w,fetchSliHighlights:R["fetchSliHighlights"],setUnreadPoint:D["x"],markMostRecentMsgRead:D["r"],setUnreadLineVisibility:Zn,clearHighlightTs:S["a"],jumpToTimestamp:S["c"],saveScrollmark:A,onMount:P["b"],setMessagePaneHasUnmounted:S["k"],makeMessageSummary:W["a"],setFocusRequestedTs:S["h"],callAppHomeOpenEventByChannelId:K,isThreadable:Xn,showThreadIfThreadable:G["showThreadIfThreadable"],searchInProductEducationReset:v["searchInProductEducationReset"]};var ei=Object(i["connect"])(Jn,$n)(Hn);var ti=ei;var ai=a(163);var ri=function e(t,a){if(!t)throw new Error("mountMessagePane must be called with a teamId parameter");Object(s["a"])(n.a.createElement(i["Provider"],{store:Object(o["d"])(t)},n.a.createElement(ai["a"],null,n.a.createElement(ti,null))),a)};var ni=ri;var ii=a(44);Object(ii["a"])("interop.mountMessagePane",ni)},function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(0);var p=a(1);var h=a.n(p);var v=a(10);var m=a(138);var f=a(3294);var b=a.n(f);var g=new v["b"]("unread");var _={featureReactAllThreads:d["b"].bool};var y={featureReactAllThreads:false};var O=function(e){u()(t,e);function t(){n()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={slow:false};e.timer=null;return e}s()(t,[{key:"componentDidMount",value:function e(){var t=this;this.timer=setTimeout(function(){t.setState(function(){return{slow:true}})},5e3)}},{key:"componentWillUnmount",value:function e(){clearTimeout(this.timer)}},{key:"render",value:function e(){var t=this.props.featureReactAllThreads;var a=t?g.t("Loading messages..."):"";var r=t?g.t("Still loading... sorry for the long wait!"):"";return h.a.createElement("div",{className:"p-message_container_loading","data-qa":"message_container_loading"},h.a.createElement("div",{className:"p-message_container_loading__msg"},this.state.slow?r:a))}}]);return t}(h.a.Component);O.displayName="MessageContainerLoading";O.defaultProps=y;t["a"]=Object(m["a"])("feature_react_all_threads")(O)},,,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(26);var d=a.n(u);var p=a(5);var h=a.n(p);var v=a(37);var m=a.n(v);var f=a(3);var b=a.n(f);var g=a(6);var _=a.n(g);var y=a(8);var O=a.n(y);var k=a(7);var E=a.n(k);var C=a(9);var j=a.n(C);var w=a(2);var S=a(0);var I=a(2414);var T=a(16);var A=a.n(T);var N=a(10);var P=a(39);var R=a(45);var M=a(361);var D=a(4);var x=a(385);var F=a(351);var L=a(19);var B=a(103);var U=a(67);var q=a(423);var G=a(720);var W=a(1352);var H=a(109);var V=a(41);var K=a(11);var z=a(1817);var Y=a(12);var Q=a(1068);var J=a(1810);var Z=a(208);var X=a(57);var $=a(245);var ee=a(61);var te=a(900);var ae=a(384);var re=a(537);var ne=a(1561);var ie=a(1368);var se=a(51);var oe=a(4194);var le=a(4178);var ce=a(1815);var ue=100;var de=8;function pe(e){var t=e.timestamps;return Object(w["last"])(t)}function he(e){var t=e.messages,a=e.timestamps,r=e.threadTs,n=e.lastRead,i=e.reachedStart;var s=t[r];if(!s)return"0000000000.000000";var o=Object(w["filter"])(a,function(e){return e!==r});if(Object(V["getReplyCount"])(s)<=4)return"0000000000.000000";var l=Object(w["takeWhile"])(o,function(e){return e<=n});if(i&&l.length<=2)return"0000000000.000000";if(l.length===o.length)return Object(w["first"])(Object(w["takeRight"])(l,2));return Object(w["last"])(l)}var ve=he;function me(e){var t=e.threads,a=e.minimumVisibleTsByThread,r=e.maximumVisibleTsByThread,n=e.firstReadThreadKey,i=e.isDoingGlobalRefresh,s=e.currentUserId,o=e.initialLastReadByThread,l=e.hasMore,c=e.logError,u=void 0===c?w["noop"]:c;var d=[];var p=[];if(i){d.push("global-loading");p.push({type:"loading"})}var h=Object(w["dropWhile"])(t,function(e){return e.threadKey!==n});var v=h.some(function(e){return Object(w["values"])(e.messages).some(function(t){if(!t){u("Missing message in "+e.threadKey);return false}return t.ts>o[e.threadKey]&&t.user!==s})});t.forEach(function(e){var t=e.channelId,s=e.threadTs,l=e.timestamps,c=e.threadKey,u=e.messages,h=e.reachedStart;var m=a[c];var f=r[c];if(!i&&!v&&c===n){d.push("divider-"+c);p.push({type:"divider"})}var g={channelId:t,threadTs:s,threadKey:c};var _=l.some(function(e){return e>f});d.push("heading-"+c);p.push(b()({type:"heading"},g));d.push("root-"+c);p.push(b()({type:"root"},g));var y=!h||Object(w["some"])(l,function(e){return e!==s&&e<m});if(y){d.push("load_older-"+c);p.push(b()({type:"load_older",messages:u},g))}l.forEach(function(t){if(t===s)return;if(t<m)return;if(t>f)return;var a=o&&t>o[e.threadKey];d.push(c+"-"+t);p.push(b()({type:"reply",ts:t,isNewReply:a},g))});if(_){d.push("load_newer-"+c);p.push(b()({type:"load_newer"},g))}d.push("footer-"+c);p.push(b()({type:"footer"},g))});if(l&&t){var m=Object(w["last"])(t);var f=m&&m.threadKey;d.push("loading_more_threads-"+f);p.push({type:"loading_more_threads"})}return{keys:d,rows:p}}var fe=me;function be(e){var t=Object(w["filter"])(e,"subscribed");var a=Object(w["sortBy"])(t,function(e){var t=e.maxMarkableTs>e.lastRead;return(t?1:0)+"-"+e.maxMarkableTs});return a.reverse()}var ge=a(139);var _e=a(1565);var ye={channelId:S["b"].string,threadTs:S["b"].string,replyUsers:S["b"].array,replyUsersCount:S["b"].number,featureReactAllThreads:S["b"].bool,firstItem:S["b"].bool,clogLinkClick:S["b"].func};var Oe={channelId:void 0,threadTs:void 0,replyUsers:[],replyUsersCount:0,featureReactAllThreads:false,firstItem:false,clogLinkClick:w["noop"]};var ke=function(e){j()(t,e);function t(e){_()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.clogClick=a.clogClick.bind(a);return a}E()(t,[{key:"clogClick",value:function e(){var t=this.props.clogLinkClick;t("CLICK_CHANNEL_NAME")}},{key:"render",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,i=t.replyUsers,s=t.replyUsersCount,o=t.featureReactAllThreads,l=t.firstItem;if(!o)return null;var c=Object(V["constructMsgPermalink"])(a,r);var u=A()("p-threads_view_header",{"p-threads_view_header--first":l});return n.a.createElement("div",{className:u},n.a.createElement(se["a"],{href:c,className:"p-threads_view_header__permalink",clogLinkClick:this.clogClick},n.a.createElement(ge["a"],{channelId:a,className:"p-threads_view_header__channel_name"})),n.a.createElement(_e["a"],{replyUsers:i,replyUsersCount:s,className:"p-threads_view_header__participant_list"}))}}]);return t}(r["Component"]);ke.displayName="Header";ke.defaultProps=Oe;function Ee(e,t){var a=t.channelId,r=t.threadTs;var n=Object(U["a"])(e,a,r);if(!n)return null;var i=Object(V["getReplyUsers"])(n);var s=Object(V["getReplyUsersCount"])(n);if(n.replies){i=Object(w["map"])(n.replies,"user");n.user&&i.push(n.user);s=Object(w["uniq"])(i).length}else n.user&&i.push(n.user);return{replyUsers:i,replyUsersCount:s,featureReactAllThreads:Object(D["isFeatureEnabled"])(e,"feature_react_all_threads")}}var Ce=Object(o["connect"])(Ee)(ke);var je=a(55);var we=a(1224);var Se=a(1092);var Ie=a(762);var Te=a(925);var Ae=a(926);var Ne=a(1093);var Pe=a(1066);var Re=a(1225);var Me=a(1353);var De=a(922);var xe=a(1095);var Fe=a(1215);var Le=a(1214);var Be=a(1347);var Ue=a(1354);var qe=a(1355);var Ge=a(1356);var We={first:S["b"].bool,last:S["b"].bool,children:S["b"].node};var He={first:false,last:false,children:void 0};var Ve=function(e){j()(t,e);function t(){_()(this,t);return O()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}E()(t,[{key:"render",value:function e(){var t=this.props,a=t.first,r=t.last;var i=A()("p-threads_view__default_background",{"p-threads_view__default_background--first":a,"p-threads_view__default_background--last":r});return n.a.createElement("div",{className:i},this.props.children)}}]);return t}(r["PureComponent"]);Ve.displayName="ThreadsDefaultBackground";Ve.defaultProps=He;var Ke=Ve;var ze=new N["b"]("message_kit");var Ye={msg:S["b"].object.isRequired,className:S["b"].string,theme:S["b"].oneOf(["light","dense"]),clogLinkClick:S["b"].func,clogThreadEvent:S["b"].func,focused:S["b"].bool,renderActionsOffscreen:S["b"].bool};var Qe={className:void 0,theme:"light",clogLinkClick:w["noop"],clogThreadEvent:w["noop"],focused:false,renderActionsOffscreen:false};var Je=function(e){j()(t,e);function t(){_()(this,t);return O()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}E()(t,[{key:"getMessageBody",value:function e(t){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Te["a"],{msg:t}),"\xa0\xa0",n.a.createElement(Ae["a"],{msg:t,relative:true,clickable:true},ze.t("Open in channel")),n.a.createElement("br",null),this.renderContent(t),n.a.createElement(Ie["b"],{msg:t}),n.a.createElement(we["a"],{msg:t}),n.a.createElement(Re["a"],{msg:t}))}},{key:"getCompactMessageBody",value:function e(t){return n.a.createElement(Ge["a"],null,n.a.createElement(Te["a"],{msg:t,className:"p-threads_view_sender--compact"}),"\xa0\xa0",this.renderContent(t),n.a.createElement(Ie["b"],{msg:t}),n.a.createElement(we["a"],{msg:t}),n.a.createElement(Re["a"],{msg:t}))}},{key:"renderContent",value:function e(t){var a=je["a"].all_threads;return t.blocks?n.a.createElement(Pe["a"],{msg:t,blocksContainerContext:a}):n.a.createElement(Ne["a"],{msg:t})}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.theme,i=t.clogLinkClick,s=t.focused,o=t.renderActionsOffscreen,l=t.clogThreadEvent;var c="dense"===r;var u=A()("p-threads_view_root","c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className);var d=c?n.a.createElement("div",{className:"p-threads_view_compact_timestamp"},n.a.createElement(Ae["a"],{msg:a,relative:true,compact:true,clickable:true},ze.t("Open in channel"))):null;var p=c?"above":"default";var h=c?this.getCompactMessageBody(a):this.getMessageBody(a);return n.a.createElement(Me["a"],{msg:a},n.a.createElement(Ke,{first:true},n.a.createElement(De["a"],{msg:a,className:u},n.a.createElement(xe["a"],{hovered:s},n.a.createElement(Fe["a"],{msg:a,showComment:true,showShare:false,showJump:true,messageContainerType:P["MESSAGE_CONTAINERS"].THREADS_VIEW,renderOffscreen:o,position:p,clogLinkClick:i,clogThreadEvent:l},n.a.createElement(Be["a"],{msg:a},n.a.createElement(Ue["a"],{msg:a},n.a.createElement(Le["a"],{light:n.a.createElement(Se["a"],{msg:a}),compact:d},n.a.createElement(qe["a"],{msg:a},h)))))))))}}]);return t}(r["PureComponent"]);Je.displayName="RootMessage";var Ze=Je;Je.defaultProps=Qe;var Xe=a(1699);var $e=new N["b"]("threads");var et={msg:S["b"].object.isRequired,className:S["b"].string,highlight:S["b"].bool,clearHighlight:S["b"].func,focused:S["b"].bool,renderActionsOffscreen:S["b"].bool,isNewReply:S["b"].bool,theme:S["b"].oneOf(["light","dense"]),clogThreadEvent:S["b"].func};var tt={className:void 0,highlight:void 0,clearHighlight:void 0,focused:false,renderActionsOffscreen:false,isNewReply:false,theme:"light",clogThreadEvent:w["noop"]};var at=function(e){j()(t,e);function t(){_()(this,t);return O()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}E()(t,[{key:"getMessageBody",value:function e(t){return n.a.createElement(n.a.Fragment,null,n.a.createElement(Te["a"],{msg:t}),"\xa0\xa0",n.a.createElement(Ae["a"],{msg:t,relative:true,clickable:true},$e.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"})),n.a.createElement("br",null),n.a.createElement(Xe["a"],{msg:t},this.renderContent(t),n.a.createElement(Ie["b"],{msg:t}),n.a.createElement(we["a"],{msg:t})),n.a.createElement(Re["a"],{msg:t}))}},{key:"getCompactMessageBody",value:function e(t){return n.a.createElement(Ge["a"],null,n.a.createElement(Te["a"],{msg:t,className:"p-threads_view_sender--compact"}),"\xa0\xa0",n.a.createElement(Xe["a"],{msg:t},this.renderContent(t),n.a.createElement(Ie["b"],{msg:t}),n.a.createElement(we["a"],{msg:t})),n.a.createElement(Re["a"],{msg:t}))}},{key:"renderContent",value:function e(t){var a=je["a"].all_threads;return t.blocks?n.a.createElement(Pe["a"],{msg:t,blocksContainerContext:a}):n.a.createElement(Ne["a"],{msg:t})}},{key:"render",value:function e(){var t=this.props,a=t.msg,r=t.highlight,i=t.clearHighlight,s=t.focused,o=t.renderActionsOffscreen,l=t.isNewReply,c=t.theme,u=t.clogThreadEvent;var d="dense"===c;var p=A()("c-message_kit__message","c-message_kit__thread_message","p-threads_view_reply",{"p-threads_view_reply--new_reply":l},this.props.className);var h=d?n.a.createElement("div",{className:"p-threads_view_compact_timestamp"},n.a.createElement(Ae["a"],{msg:a,relative:true,compact:true,clickable:true},$e.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"}))):null;var v=d?"above":"default";var m=d?this.getCompactMessageBody(a):this.getMessageBody(a);return n.a.createElement(Me["a"],{msg:a},n.a.createElement(Ke,null,n.a.createElement(De["a"],{msg:a,className:p,highlight:r,clearHighlight:i},n.a.createElement(xe["a"],{hovered:s},n.a.createElement(Fe["a"],{msg:a,showComment:false,showShare:false,messageContainerType:P["MESSAGE_CONTAINERS"].THREADS_FLEXPANE,renderOffscreen:o,position:v,clogThreadEvent:u},n.a.createElement(Ue["a"],{msg:a,showBroadcast:true},n.a.createElement(Le["a"],{light:n.a.createElement(Se["a"],{msg:a}),compact:h},n.a.createElement(qe["a"],{msg:a},m))))))))}}]);return t}(r["PureComponent"]);at.displayName="ReplyMessage";var rt=at;at.defaultProps=tt;var nt=a(96);var it=new N["b"]("threads");var st={channelId:S["b"].string,threadTs:S["b"].string,minimumVisibleTs:S["b"].string,rootMsg:S["b"].object,messages:S["b"].object,loadOlderReplies:S["b"].func,featureReactAllThreads:S["b"].bool,theme:S["b"].oneOf(["light","dense"])};var ot={channelId:void 0,threadTs:void 0,minimumVisibleTs:void 0,rootMsg:void 0,messages:{},loadOlderReplies:w["noop"],featureReactAllThreads:false,theme:"light"};var lt=function(e){j()(t,e);function t(e){_()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={isLoading:false};a.onClick=a.onClick.bind(a);return a}E()(t,[{key:"onClick",value:function e(){var t=this;var a=this.props,r=a.channelId,n=a.threadTs,i=a.loadOlderReplies;if(!this.state.isLoading&&i){this.setState(function(){return{isLoading:true}});i(r,n).then(function(){t.setState(function(){return{isLoading:false}})})}}},{key:"render",value:function e(){var t=this.props,a=t.minimumVisibleTs,r=t.rootMsg,i=t.messages,s=t.featureReactAllThreads,o=t.theme;if(!s)return null;var l="dense"===o;var c=[];var u=Object(V["getMessageTs"])(r);var d=Object(V["getLatestReply"])(r);Object(w["each"])(i,function(e,t){!Object(V["isEphemeral"])(e)&&!Object(V["isTempMsg"])(e)&&t!==u&&t<=d&&c.push(t)});var p=Object(V["getReplyCount"])(r);var h=p-c.length;var v=c.filter(function(e){return e<a});var m=Object(w["clamp"])(h+v.length,0,ue);if(!m)return null;var f=A()("p_threads_view_load_older_button",{"p_threads_view_load_older_button--with-gutter":l});return n.a.createElement(Ke,null,n.a.createElement("div",{className:f},n.a.createElement(se["a"],{onClick:this.onClick},it.t("Show {showPrevCount, plural, =1 {# more reply} other {# more replies}}",{showPrevCount:m})),this.state.isLoading?n.a.createElement(nt["a"],{size:"medium",className:"margin_left_25",inline:true}):null))}}]);return t}(r["Component"]);lt.displayName="LoadOlderButton";lt.defaultProps=ot;function ct(e,t){var a=t.channelId,r=t.threadTs,n=t.messages;var i=Object(U["a"])(e,a,r);return{rootMsg:i,messages:n,featureReactAllThreads:Object(D["isFeatureEnabled"])(e,"feature_react_all_threads")}}var ut=Object(o["connect"])(ct)(lt);var dt=new N["b"]("threads");var pt={channelId:S["b"].string,threadTs:S["b"].string,maximumVisibleTs:S["b"].string,timestamps:S["b"].arrayOf(S["b"].string),loadNewerReplies:S["b"].func,featureReactAllThreads:S["b"].bool,theme:S["b"].oneOf(["light","dense"])};var ht={channelId:void 0,threadTs:void 0,maximumVisibleTs:"0000000000.000000",timestamps:[],loadNewerReplies:w["noop"],featureReactAllThreads:false,theme:"light"};var vt=function(e){j()(t,e);function t(e){_()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}E()(t,[{key:"onClick",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.loadNewerReplies;n(a,r)}},{key:"render",value:function e(){var t=this.props,a=t.maximumVisibleTs,r=t.timestamps,i=t.featureReactAllThreads,s=t.theme;if(!i)return null;var o="dense"===s;var l=r.filter(function(e){return e>a});if(!l.length)return null;var c=dt.t("{count, plural, =1 {# new reply} other {# new replies}}",{count:l.length});var u=A()("p_threads_view_load_newer_button",{"p_threads_view_load_newer_button--with-gutter":o});return n.a.createElement(Ke,null,n.a.createElement("div",{className:u},n.a.createElement("span",{className:"p_threads_view_load_newer_button__blue_dot"},"\u2022"),n.a.createElement(se["a"],{onClick:this.onClick},c)))}}]);return t}(r["Component"]);vt.displayName="LoadNewerButton";vt.defaultProps=ht;function mt(e,t){var a=t.channelId,r=t.threadTs;var n=Object(H["getThreadKey"])(a,r);var i=Object(B["getTimestampsByChannelId"])(e,n)||{timestamps:[]},s=i.timestamps;return{timestamps:s,featureReactAllThreads:Object(D["isFeatureEnabled"])(e,"feature_react_all_threads")}}var ft=Object(o["connect"])(mt)(vt);var bt=a(1851);function gt(e){return n.a.createElement(Ke,{last:true},n.a.createElement("div",{className:"p-threads_view__footer"},n.a.createElement(bt["a"],e)))}gt.displayName="Footer";var _t=gt;var yt=a(204);var Ot=a(81);var kt=new N["b"]("threads");var Et={featureReactAllThreads:S["b"].bool};var Ct={featureReactAllThreads:true};function jt(e){var t=e.featureReactAllThreads;if(!t)return null;var a=Object(X["a"])();var r="115000769927";var i=Object(yt["b"])({zdLocale:a,articleId:r});return n.a.createElement("div",{className:"p-threads_view_empty"},n.a.createElement("div",{className:"p-threads_view_empty__contents"},n.a.createElement("div",{className:"p-threads_view_empty__emoji"},n.a.createElement(Ot["b"],{text:":seedling:",emojiSize:Ot["a"].LARGE})),n.a.createElement("p",{className:"p-threads_view_empty__header"},kt.t("Tend to your threads")),n.a.createElement("p",{className:"p-threads_view_empty__message"},kt.t("Threads you\u2019re involved in will be collected right here.")," ",n.a.createElement("br",null),n.a.createElement(se["a"],{href:i},kt.t("Learn about threads")))))}jt.displayName="ThreadsEmptyState";jt.defaultProps=Ct;var wt=function e(t){var a=Object(D["isFeatureEnabled"])(t,"feature_react_all_threads");return{featureReactAllThreads:a}};var St=Object(o["connect"])(wt)(jt);var It={className:S["b"].string,label:S["b"].string,showSpinner:S["b"].bool};var Tt={className:void 0,label:void 0,showSpinner:false};var At=function(e){j()(t,e);function t(){_()(this,t);return O()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}E()(t,[{key:"render",value:function e(){var t=this.props,a=t.className,r=t.label,i=t.showSpinner;return n.a.createElement("div",{className:a},n.a.createElement("div",{className:"p-threads_view__divider_line"}),n.a.createElement("div",{className:"p-threads_view__divider_label"},i&&n.a.createElement(nt["a"],{color:"blue",size:"medium",className:"p-threads_view__divider_spinner"}),r))}}]);return t}(r["PureComponent"]);At.displayName="Divider";var Nt=At;At.defaultProps=Tt;var Pt=new N["b"]("threads");var Rt={slowLoadingMore:S["b"].bool};var Mt={slowLoadingMore:false};var Dt=function(e){j()(t,e);function t(){_()(this,t);return O()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}E()(t,[{key:"render",value:function e(){var t=this.props.slowLoadingMore;return n.a.createElement("div",{className:"p-threads_view__loading_more_threads"},t?Pt.t("Still loading... sorry for the long wait!"):Pt.t("Loading more messages...",{fallbackHash:"49f93cf64ea9ce3b4fee3f46ee40103e4840b333",fallbackHashNs:"unread"}))}}]);return t}(r["PureComponent"]);Dt.displayName="LoadingMoreThreadsIndicator";var xt=Dt;Dt.defaultProps=Mt;var Ft=a(326);var Lt=a(188);var Bt=a(28);var Ut=new N["b"]("threads");var qt={totalNewThreads:S["b"].number,userHasUnreadThreads:S["b"].bool,onClick:S["b"].func,featureReactAllThreads:S["b"].bool};var Gt={totalNewThreads:0,userHasUnreadThreads:false,onClick:w["noop"],featureReactAllThreads:false};var Wt=function(e){j()(t,e);function t(e){_()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}E()(t,[{key:"onClick",value:function e(){this.props.onClick()}},{key:"render",value:function e(){var t=this.props,a=t.totalNewThreads,r=t.userHasUnreadThreads,i=t.featureReactAllThreads;if(!i)return null;if(!a)return null;if(!r)return null;var s=Ut.rt('{totalNewThreads,plural,=1{{totalNewThreads} new thread}other{{totalNewThreads} new threads}} <span className="p-new_threads_banner__cta">Click to refresh</span>',{totalNewThreads:a});return n.a.createElement(Bt["c"],{className:"p-new_threads_banner p-message_pane__banner",onClick:this.onClick},s)}}]);return t}(r["Component"]);Wt.displayName="NewThreadsBanner";Wt.defaultProps=Gt;function Ht(e){return{totalNewThreads:Object(M["getTotalNewThreads"])(e),userHasUnreadThreads:Object(D["isFeatureEnabled"])(e,"feature_incremental_unread_counts")?Object(Lt["hasUnreadThreads"])(e):Object(Ft["hasUnreadThreads"])(e),featureReactAllThreads:Object(D["isFeatureEnabled"])(e,"feature_react_all_threads")}}var Vt=Object(o["connect"])(Ht)(Wt);var Kt=a(3298);var zt="THREADS-VIEW";var Yt=new N["b"]("threads");var Qt=Object(ie["b"])(Ze);var Jt=Object(ie["b"])(rt);var Zt={threadKey:S["b"].string,channelId:S["b"].string,threadTs:S["b"].string,reachedStart:S["b"].bool,timestamps:S["b"].arrayOf(S["b"].string),messages:S["b"].objectOf(S["b"].object),lastRead:S["b"].string,subscribed:S["b"].bool,maxMarkableTs:S["b"].string};var Xt={threads:S["b"].arrayOf(S["b"].shape(Zt)),threadsPresent:S["b"].bool,hasMore:S["b"].bool,refreshId:S["b"].string,currentUserId:S["b"].string,cursorTs:S["b"].string,refreshThreads:S["b"].func,loadMoreThreads:S["b"].func,truncateThreads:S["b"].func,logger:S["b"].shape({error:S["b"].func,info:S["b"].func}),requestReplies:S["b"].func,markThread:S["b"].func,markAllThreads:S["b"].func,featureReactAllThreads:S["b"].bool,featureAriaApplicationMode:S["b"].bool,theme:S["b"].oneOf(["light","dense"]),makeMessageSummary:S["b"].func,clearTotalNewThreads:S["b"].func,clogger:S["b"].object,allThreadsRefreshCount:S["b"].number,showThreadOrRefresh:S["b"].func,focusRequestedThreadKey:S["b"].string,setFocusRequestedThreadKey:S["b"].func};var $t={threads:void 0,threadsPresent:false,hasMore:true,refreshId:void 0,cursorTs:void 0,currentUserId:void 0,refreshThreads:w["noop"],loadMoreThreads:w["noop"],truncateThreads:w["noop"],logger:{error:w["noop"],info:w["noop"]},requestReplies:w["noop"],markThread:w["noop"],markAllThreads:w["noop"],featureReactAllThreads:false,featureAriaApplicationMode:false,theme:"light",makeMessageSummary:w["noop"],clearTotalNewThreads:w["noop"],clogger:{track:w["noop"]},allThreadsRefreshCount:void 0,showThreadOrRefresh:w["noop"],focusRequestedThreadKey:void 0,setFocusRequestedThreadKey:w["noop"]};var ea=function(e){j()(t,e);E()(t,null,[{key:"getDerivedStateFromProps",value:function e(t,a){var r=t.threads,n=t.currentUserId,i=t.refreshId,s=t.logger;var o=a.minimumVisibleTsByThread,l=a.maximumVisibleTsByThread,c=a.initialLastReadByThread,u=a.firstReadThreadKey,d=a.threadKeysOrdered;if(i!==a.currentRefreshId){o={};l={};c={};u=null;d=[]}if(Object(w["isEmpty"])(d)){var p=be(r);d=Object(w["map"])(p,"threadKey");if(a.currentRefreshId){var h=Object(w["map"])(r,"threadKey");Object(w["isEqual"])(d,h)||s.error(zt,"Thread order different after refreshing: "+d+" - "+h)}}if(!u){var v=Object(w["keyBy"])(r,"threadKey");u=Object(w["find"])(d,function(e){return v[e].maxMarkableTs<=v[e].lastRead})}var m={};r.forEach(function(e){if(o[e.threadKey])return;var t=ve(e);m[e.threadKey]=t});var f={};r.forEach(function(e){var t=l[e.threadKey];if(t){if(!e.messages[t]){t=Object(w["findLast"])(e.timestamps,function(e){return e<t});f[e.threadKey]=t}var a=Object(w["filter"])(e.timestamps,function(e){return e>t});var r=Object(w["some"])(a,function(t){var a=e.messages[t];return a&&a.user===n});var i=Object(w["some"])(a,function(t){var a=e.messages[t];return Object(V["isEphemeral"])(a)});if(!r&&!i)return}var s=pe(e);f[e.threadKey]=s});var g={};r.forEach(function(e){if(c[e.threadKey])return;g[e.threadKey]=e.lastRead});if(Object(w["isEmpty"])(m)&&Object(w["isEmpty"])(f)&&Object(w["isEmpty"])(g)&&i===a.currentRefreshId&&u===a.firstReadThreadKey&&(d===a.threadKeysOrdered||Object(w["isEqual"])(d,a.threadKeysOrdered)))return null;return b()({},a,{currentRefreshId:i,firstReadThreadKey:u,threadKeysOrdered:d,minimumVisibleTsByThread:b()({},o,m),maximumVisibleTsByThread:b()({},l,f),initialLastReadByThread:b()({},c,g)})}}]);function t(e){_()(this,t);var a=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(w["bindAll"])(a,["fetchAround","fetchPre","fetchPost","renderRow","loadOlderReplies","loadNewerReplies","tryAgain","getAriaLabelForRow","isFocusableItem","onKeyDown","reloadThreads","clogThreadEvent","clogThreadCloseEvent","onFocusEnter","onFocusLeave","onArrowKeyRight","shouldIgnoreArrowKeys","logError","logInfo"]);a.state={minimumVisibleTsByThread:{},maximumVisibleTsByThread:{},initialLastReadByThread:{},currentRefreshId:void 0,firstReadThreadKey:void 0,threadKeysOrdered:[],isDoingGlobalRefresh:true,slowLoadingMore:false,errored:false,hasKeyboardFocus:false};a.pendingPromises=[];a.threadsEventSeqId=0;a.initializedTime=Date.now();a.clogThreadCloseHasBeenCalled=false;a.listRef=n.a.createRef();return a}E()(t,[{key:"componentDidMount",value:function e(){this.logInfo("mounting");this.clogThreadEvent({event:"THREADS_VIEW_OPEN"});this.loadThreads()}},{key:"shouldComponentUpdate",value:function e(t,a){if(!Object($["a"])(this.state,a))return true;var r=this.props,n=r.threads,i=m()(r,["threads"]);var s=t.threads,o=m()(t,["threads"]);if(!Object($["a"])(i,o))return true;var l=3;if(!Object($["a"])(n,s,l))return true;return false}},{key:"componentDidUpdate",value:function e(t){t.allThreadsRefreshCount<this.props.allThreadsRefreshCount&&false===this.loading&&this.reloadThreads();if(t.refreshId!==this.props.refreshId&&Object(w["isNumber"])(this.nextScrollTop)){this.listRef.current.scrollToOffset(this.nextScrollTop);this.nextScrollTop=null}}},{key:"componentWillUnmount",value:function e(){this.logInfo("unmounting");this.clogThreadCloseEvent("OTHER");this.pendingPromises.forEach(function(e){return e.cancel()});this.props.truncateThreads()}},{key:"onFocusEnter",value:function e(t){var a=this;this.setState(function(){return{hasKeyboardFocus:t.isKeyboardFocus}},function(){var e=a.props.focusRequestedThreadKey;var t=a.listRef.current;if(!t||!e)return;var r=t.getActiveItem();var n=a.threadKeyForListKey(r);if(e&&n===e){a.logInfo("Focused "+e);a.props.setFocusRequestedThreadKey(null)}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:false}})}},{key:"onKeyDown",value:function e(t){var a=this;if(Object(Q["a"])(document.activeElement))return;if(!Object(J["a"])(t))return;var r=this.getKeyboardFocusedThreadKey();if(!r)return;var n=Object(H["decodeThreadKey"])(r),i=n.channelId,s=n.threadTs;var o=Object(Z["a"])({viewContext:P["MESSAGE_CONTAINERS"].THREADS_VIEW,channelId:i,threadTs:s});if(o){var l=function e(){a.blur();o.focus()};Object(X["c"])()?setTimeout(l,0):l()}}},{key:"onArrowKeyRight",value:function e(){var t=this.getKeyboardFocusedThreadKey();var a=Object(H["decodeThreadKey"])(t),r=a.channelId,n=a.threadTs;if(!r||!n)return;this.props.showThreadOrRefresh({channelId:r,threadTs:n,requestFocus:true});this.blur()}},{key:"getKeyboardFocusedThreadKey",value:function e(){var t=this.listRef.current;if(!t)return null;var a=t.getInitialActiveItem();var r=this.threadKeyForListKey(a);return r}},{key:"getAriaLabelForRow",value:function e(t){if(!this.props.makeMessageSummary)return null;var a=this.rows[t];if(!a||!a.type)return null;if("root"!==a.type&&"reply"!==a.type)return null;var r="root"===a.type?a.threadTs:a.ts;return this.props.makeMessageSummary({channelId:a.channelId,ts:r,hasFocus:this.state.hasKeyboardFocus,day:{ts:r,isFirstDay:false,isLastDay:false}})}},{key:"shouldIgnoreArrowKeys",value:function e(t){if(Object(Q["a"])(t.target))return true;return!this.state.hasKeyboardFocus}},{key:"threadKeyForListKey",value:function e(t){if(!t)return null;var a=this.keys.indexOf(t);var r=this.rows[a];if(r)return r.threadKey;return null}},{key:"focus",value:function e(){var t=this.listRef.current;t&&t.focus()}},{key:"blur",value:function e(){var t=this.listRef.current;t&&t.blur()}},{key:"isFocusableItem",value:function e(t){var a=t.index;var r=this.rows[a];if(!r)return false;var n=["root","reply","heading","load_older","load_newer"];return Object(w["includes"])(n,r.type)}},{key:"clogThreadCloseEvent",value:function e(t){if(this.clogThreadCloseHasBeenCalled)return;var a={view_session_elapsed_time:Date.now()-this.initializedTime,view_session_index:this.threadsEventSeqId,num_threads_loaded:this.props.threads.length,view_exit_event:t};this.clogThreadEvent({event:"THREADS_VIEW_CLOSE",metadata:a});this.clogThreadCloseHasBeenCalled=true}},{key:"incrementTrackingSeqId",value:function e(){this.threadsEventSeqId+=1}},{key:"clogThreadEvent",value:function e(t){var a=t.event,r=t.metadata;var n=this.props.clogger;n.track(a,b()({is_threads_view:1,is_flexpane:0,view_session_index:this.threadsEventSeqId},r));this.incrementTrackingSeqId()}},{key:"componentDidCatch",value:function e(t){this.setState(function(){return{errored:true}});this.logError("Threads view componentDidCatch");this.props.logger.error(zt,t,"threads_view_did_catch")}},{key:"loadThreads",value:function e(){var t=this;this.loading&&this.logError("Unexpectedly already loading");if(!this.props.refreshThreads)return;this.loading=true;var a=this.props.refreshThreads({limit:de,refreshId:"threads-view-refresh-"+Date.now()}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.maxTs;t.listRef&&t.listRef.current&&(t.nextScrollTop=t.listRef.current.getScrollTop());if(a){t.logInfo("marking all: "+a);t.props.markAllThreads({maxTs:a})}else t.logInfo("no threads to mark");t.setState(function(){return{isDoingGlobalRefresh:false,errored:false}})}).catch(function(e){t.setState(function(){return{errored:true}});t.logError("refreshThreads caught error");t.props.logger.error(zt,e,"threads_view_loading_error")}).finally(function(){t.loading=false;Object(w["remove"])(t.pendingPromises,a)});this.pendingPromises.push(a)}},{key:"reloadThreads",value:function e(){var t=this;this.logInfo("Reloading threads");this.setState(function(){return{currentRefreshId:null}},function(){t.listRef&&t.listRef.current&&t.listRef.current.scrollToOffset(0);t.props.clearTotalNewThreads();t.loadThreads()})}},{key:"tryAgain",value:function e(){var t=this;this.setState(function(e){return b()({},e,{errored:false})},function(){return t.loadThreads()})}},{key:"loadOlderReplies",value:function e(t,a){var r=this;var n=Object(H["getThreadKey"])(t,a);var i=Object(w["find"])(this.props.threads,{threadKey:n});if(!i){this.logError("Could not find "+n+" in loadOlderReplies");return Promise.resolve()}this.logInfo("Loading older replies in "+n);var s=i.timestamps;var o=this.state.minimumVisibleTsByThread[i.threadKey];var l=Object(w["filter"])(s,function(e){return e<o&&e!==a});if(l.length>=ue){this.setState(function(e){return b()({},e,{minimumVisibleTsByThread:b()({},e.minimumVisibleTsByThread,h()({},n,Object(w["first"])(Object(w["takeRight"])(l,ue))))})});return Promise.resolve()}if(i.reachedStart){this.setState(function(e){return b()({},e,{minimumVisibleTsByThread:b()({},e.minimumVisibleTsByThread,h()({},n,"0000000000.000000"))})});return Promise.resolve()}var c=this.props.requestReplies({channelId:t,threadTs:a,latest:Object(w["first"])(s),limit:ue}).then(function(e){var t=e.msgs;var a=Object(w["first"])(Object(w["takeRight"])(t,ue-l.length));r.setState(function(e){return b()({},e,{minimumVisibleTsByThread:b()({},e.minimumVisibleTsByThread,h()({},n,a.ts))})})}).finally(function(){Object(w["remove"])(r.pendingPromises,c)});this.pendingPromises.push(c);return c}},{key:"loadNewerReplies",value:function e(t,a){var r=this;var n=Object(H["getThreadKey"])(t,a);var i=Object(w["find"])(this.props.threads,{threadKey:n});if(!i){this.logError("Could not find "+n+" in loadNewerReplies");return}this.setState(function(e){return b()({},e,{maximumVisibleTsByThread:b()({},e.maximumVisibleTsByThread,h()({},n,pe(i)))})},function(){r.logInfo("Marking "+n+" to "+i.maxMarkableTs);r.props.markThread({channelId:t,ts:a,lastRead:i.maxMarkableTs,reason:"mark-thread-as-read-from-threads-view"})})}},{key:"fetchAround",value:function e(){return false}},{key:"fetchPre",value:function e(){return false}},{key:"fetchPost",value:function e(){var t=this;var a=this.props,r=a.threads,n=a.hasMore,i=a.cursorTs;if(this.loading||!n||!r||!r.length||!i)return false;var s=setTimeout(function(){t.setState(function(e){return b()({},e,{slowLoadingMore:true})})},P["SLOW_API_RESPONSE_TIME"]);this.loading=true;this.logInfo("Loading more from "+i);var o=this.props.loadMoreThreads({currentTs:i,limit:de}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.threads;if(!r)return;t.setState(function(e){var t=Object(w["map"])(a,"threadKey");return{threadKeysOrdered:Object(w["uniq"])([].concat(d()(e.threadKeysOrdered),d()(t)))}})}).finally(function(){var e=t.state.slowLoadingMore;t.loading=false;Object(w["remove"])(t.pendingPromises,o);clearTimeout(s);e&&t.setState(function(e){return b()({},e,{slowLoadingMore:false})})});this.pendingPromises.push(o);return o}},{key:"determineFocusItemForRender",value:function e(t,a){var r=this.props.focusRequestedThreadKey;if(r)return"root-"+r;var n=this.listRef.current;if(!n)return null;var i=n.getInitialActiveItem();if(!i)return null;var s=Object(w["startsWith"])(i,"load_older-")||Object(w["startsWith"])(i,"load_newer-");if(s&&!Object(w["includes"])(a,i)){var o=t.indexOf(i);if(-1===o)return null;var l=t[o-1];var c=a.indexOf(l);if(-1===c)return null;var u=a[c+1];if(u)return u}return null}},{key:"logInfo",value:function e(t){this.props.logger.info(zt,t)}},{key:"logError",value:function e(t){this.props.logger.error(zt,t)}},{key:"renderRow",value:function e(t,a){var r=a.hasFocus;var i=this.rows[t];var s=this.state,o=s.minimumVisibleTsByThread,l=s.maximumVisibleTsByThread,c=s.slowLoadingMore,u=s.hasKeyboardFocus;var d=this.props,p=d.featureReactAllThreads,h=d.theme;var v=A()("p-threads_view__divider",{"p-threads_view__divider--first":0===t});var m=p?Yt.t("Loading threads\u2026"):"";switch(i.type){case"heading":return n.a.createElement(Ce,{channelId:i.channelId,threadTs:i.threadTs,firstItem:0===t,clogLinkClick:this.clogThreadCloseEvent});case"root":return n.a.createElement(Qt,{channelId:i.channelId,ts:i.threadTs,theme:h,clogLinkClick:this.clogThreadCloseEvent,focused:r,renderActionsOffscreen:u,clogThreadEvent:this.clogThreadEvent});case"load_older":return n.a.createElement(ut,{messages:i.messages,channelId:i.channelId,threadTs:i.threadTs,minimumVisibleTs:o[i.threadKey],loadOlderReplies:this.loadOlderReplies,theme:h});case"load_newer":return n.a.createElement(ft,{channelId:i.channelId,threadTs:i.threadTs,maximumVisibleTs:l[i.threadKey],loadNewerReplies:this.loadNewerReplies,theme:h});case"reply":return n.a.createElement(Jt,{channelId:i.channelId,ts:i.ts,minimumVisibleTs:o[i.threadKey],isNewReply:i.isNewReply,theme:h,focused:r,renderActionsOffscreen:u,clogThreadEvent:this.clogThreadEvent});case"divider":return n.a.createElement(Nt,{className:v,label:Yt.t("You\u2019re up to date",{fallbackHash:"a7a199ce8775a459ae8c09db7bb22d4ee15f9296"})});case"loading":return n.a.createElement(Nt,{className:v,showSpinner:true,label:m});case"footer":return n.a.createElement(_t,{channelId:i.channelId,threadTs:i.threadTs,focusInputOnMount:false,viewContext:P["MESSAGE_CONTAINERS"].THREADS_VIEW,clogThreadEvent:this.clogThreadEvent});case"loading_more_threads":return n.a.createElement(xt,{slowLoadingMore:c});default:this.logError("Unknown row type "+i.type);return null}}},{key:"renderTopBanners",value:function e(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"p-threads_view__top_banners"},n.a.createElement(ne["a"],null),n.a.createElement(Vt,{onClick:this.reloadThreads})),n.a.createElement(ce["a"],null))}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.threads,i=a.threadsPresent,s=a.currentUserId,o=a.hasMore,l=a.featureReactAllThreads,c=a.featureAriaApplicationMode;var u=this.state,d=u.minimumVisibleTsByThread,p=u.maximumVisibleTsByThread,h=u.firstReadThreadKey,v=u.threadKeysOrdered,m=u.isDoingGlobalRefresh,f=u.initialLastReadByThread,b=u.errored;if(b&&l)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement("div",{className:"p-threads_view"},n.a.createElement(le["a"],{tryAgain:this.tryAgain,"data-qa":"threads_view_error"},Yt.t("Something\u2019s fishy! Slack can\u2019t seem to load your threads.")," ",n.a.createElement("br",null),Yt.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text;return n.a.createElement(se["a"],{href:"https://slack.com/help/contact"},t)}))));if(!i)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement(oe["a"],null));var g=Object(w["keyBy"])(r,"threadKey");var _=Object(w["compact"])(Object(w["map"])(v,function(e){return g[e]}));var y=this.keys;var O=fe({threads:_,minimumVisibleTsByThread:d,maximumVisibleTsByThread:p,firstReadThreadKey:h,isDoingGlobalRefresh:m,currentUserId:s,initialLastReadByThread:f,hasMore:o,logError:this.logError}),k=O.rows,E=O.keys;this.rows=k;this.keys=E;var C=this.determineFocusItemForRender(y,this.keys);if(0===_.length)return n.a.createElement(n.a.Fragment,null,this.renderTopBanners(),n.a.createElement(St,null));var j=this.keys.filter(function(e){return Object(w["startsWith"])(e,"footer-")});var S=[{keys:["right"],handler:this.onArrowKeyRight,filter:this.shouldIgnoreArrowKeys}];return n.a.createElement(te["a"],{component:this,order:.1},n.a.createElement(ae["a"],{id:P["MESSAGE_CONTAINERS"].THREADS_VIEW},n.a.createElement("div",{className:"p-threads_view",onKeyDown:this.onKeyDown},this.renderTopBanners(),n.a.createElement(I["a"],null,function(e){var a=e.width,r=e.height;return n.a.createElement(re["a"],{ref:t.listRef,width:a,height:r,keys:t.keys,rowRenderer:t.renderRow,isFocusableItem:t.isFocusableItem,loadAround:t.fetchAround,loadPre:t.fetchPre,loadPost:t.fetchPost,persistentKeys:j,getAriaLabelForRow:t.getAriaLabelForRow,useAriaApplicationMode:c,onFocusEnter:t.onFocusEnter,onFocusLeave:t.onFocusLeave,keyCommands:S,activeItem:C})}))))}}]);return t}(r["Component"]);ea.displayName="ThreadsView";ea.defaultProps=$t;function ta(e){var t=Object(Y["a"])({state:e});var a=Object(R["a"])({state:e});var r=Object(M["getThreads"])(e);var n=Object(w["compact"])(Object(w["map"])(r,function(a){var r=a.threadKey;var n=Object(H["decodeThreadKey"])(r),i=n.channelId,s=n.threadTs;var o=Object(L["d"])(e,i);if(!o||Object(ee["e"])(o)){t.warn("Skipping "+r+" in unknown or non-existent channel");return null}if(Object(K["isPublicChannel"])(o)&&!Object(K["isMemberOfChannel"])(o)){t.warn("Skipping "+r+" in non-member public channel");return null}var l=Object(B["getPotentiallyOutdatedTimestamps"])(e,r)||{timestamps:[],reachedStart:true},c=l.timestamps,u=l.reachedStart;var d={};var p=Object(U["a"])(e,i,s);if(!p){t.warn("Skipping "+r+" with missing root message");return null}d[s]=p;c.forEach(function(t){var a=Object(U["a"])(e,i,t);a&&(d[t]=a)});var h=Object(F["getSubscriptionState"])(e,{channelId:i,ts:s});return{threadKey:r,channelId:i,threadTs:s,reachedStart:u,timestamps:c,messages:d,lastRead:h.lastRead,subscribed:h.subscribed,maxMarkableTs:Object(z["a"])(e,i,c)||s}}));return{logger:t,clogger:a,featureReactAllThreads:Object(D["isFeatureEnabled"])(e,"feature_react_all_threads"),featureAriaApplicationMode:Object(D["isFeatureEnabled"])(e,"feature_aria_application_mode"),threadsPresent:void 0!==r,threads:n,hasMore:Object(M["getThreadsHasMore"])(e),refreshId:Object(M["getThreadsRefreshId"])(e),cursorTs:Object(M["getThreadsCursorTs"])(e),currentUserId:Object(D["getCurrentUserId"])(e),theme:Object(q["a"])(e),allThreadsRefreshCount:Object(M["getAllThreadsRefreshCounter"])(e),focusRequestedThreadKey:Object(M["getFocusRequestedThreadKey"])(e)}}function aa(e){return{refreshThreads:function t(){return e(M["refreshThreads"].apply(void 0,arguments))},loadMoreThreads:function t(){return e(M["loadMoreThreads"].apply(void 0,arguments))},truncateThreads:function t(){return e(M["truncateThreads"].apply(void 0,arguments))},requestReplies:function t(){return e(x["requestReplies"].apply(void 0,arguments))},clearTotalNewThreads:function t(){return e(M["clearTotalNewThreads"].apply(void 0,arguments))},markThread:function t(){return e(F["markThread"].apply(void 0,arguments))},markAllThreads:function t(){return e(G["c"].apply(void 0,arguments))},makeMessageSummary:function t(){return e(W["a"].apply(void 0,arguments))},showThreadOrRefresh:function t(){return e(x["showThreadOrRefresh"].apply(void 0,arguments))},setFocusRequestedThreadKey:function t(){return e(M["setFocusRequestedThreadKey"].apply(void 0,arguments))}}}var ra=Object(o["connect"])(ta,aa)(ea);var na=ra;var ia=a(163);var sa=function e(t,a){if(!t)throw new Error("mountThreadsView must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(ia["a"],null,n.a.createElement(na,null))),a)};var oa=function e(t){s.a.unmountComponentAtNode(t)};var la=a(44);Object(la["a"])("interop.mountThreadsView",sa);Object(la["a"])("interop.unmountThreadsView",oa)},function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(15);var o=a(45);var l=a(48);var c=a(34);var u=a(6);var d=a.n(u);var p=a(7);var h=a.n(p);var v=a(8);var m=a.n(v);var f=a(9);var b=a.n(f);var g=a(13);var _=a(2);var y=a(365);var O=a(10);var k=a(132);var E=a(35);var C=new O["b"]("prefs");var j={localeLabel:i["b"].string.isRequired,locale:i["b"].string.isRequired,teamId:i["b"].string.isRequired,options:i["b"].shape({referringUiContext:i["b"].object,referringEventId:i["b"].any}),setLocaleForTeam:i["b"].func.isRequired,clogger:i["b"].object.isRequired};var w={options:{referringUiContext:{},referringEventId:null}};var S=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(_["bindAll"])(a,["onGo","onCancel"]);return a}h()(t,[{key:"onGo",value:function e(){var t=this.props,a=t.locale,r=t.clogger,n=t.options,i=t.teamId;r.track("PREF_USER_CLIENT_UPDATE",{updated_user_client_prefs:{locale:a},contexts:{ui_context:{action:"click",ui_element:"change_locale_button"},referring_ui_context:n.referringUiContext},referring_event_id:n.referringEventId});this.props.setLocaleForTeam({locale:a,teamId:i})}},{key:"onCancel",value:function e(){var t=this.props,a=t.locale,r=t.clogger,n=t.options;r.track("PREF_USER_CLIENT_UPDATE",{updated_user_client_prefs:{locale:a},contexts:{ui_context:{action:"click",ui_element:"cancel_button"},referring_ui_context:n.referringUiContext},referring_event_id:n.referringEventId})}},{key:"render",value:function e(){var t=this.props.localeLabel;return n.a.createElement(y["a"],{showCancelButton:true,shouldCloseOnGo:false,goButtonText:C.t("Change to {lang}",{lang:t}),title:C.t("Change language to {lang}?",{lang:t}),onGo:this.onGo,onCancel:this.onCancel},n.a.createElement("p",null,C.t("Are you sure you want to change the language you use with Slack?")))}}]);return t}(r["Component"]);S.displayName="ChangeLanguageAlertDialog";S.defaultProps=w;var I=function e(t){return{teamId:Object(E["d"])(t).id}};var T={setLocaleForTeam:function e(){return k["a"].apply(void 0,arguments)}};var A=Object(g["connect"])(I,T)(S);var N=A;var P=Object(s["b"])("Opens the change language confirmation dialog",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=a.locale,i=a.options;var s=t();var u=Object(c["f"])(s,"locales_enabled")[r];var d=Object(o["a"])({state:s});e(Object(l["openModal"])({element:n.a.createElement(N,{localeLabel:u,locale:r,options:i,clogger:d}),isStackable:true,name:"change-language-dialog"}))});P.propTypes={locale:i["b"].string.isRequired,options:i["b"].object};var R=t["a"]=P},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(0);var d=a(73);var p=a(4);var h=a(386);var v=a(3919);var m={id:u["b"].string.isRequired,isEnabled:u["b"].bool.isRequired,featurePages:u["b"].bool};var f={featurePages:false};var b=function e(t){var a=t.id,r=t.isEnabled,n=t.featurePages;if(!a||!n||!r)return null;var i=Object(v["a"])(a);return i.view(a)};b.propTypes=m;b.defaultProps=f;var g=function e(t){var a=Object(d["a"])(t);return{id:a,isEnabled:Object(h["e"])(t,a),featurePages:Object(p["isFeatureEnabled"])(t,"feature_pages")}};var _=Object(o["connect"])(g)(b);var y=a(163);var O=function e(t,a){if(!t)throw new Error("mountPageView must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(y["a"],null,n.a.createElement(_,null))),a)};var k=function e(t){s.a.unmountComponentAtNode(t)};var E=a(1824);var C=a(16);var j=a.n(C);var w=a(3);var S=a.n(w);var I=a(37);var T=a.n(I);var A=a(38);var N={regionId:u["b"].oneOf(["main","name","info"]).isRequired,className:u["b"].string,flex:u["b"].bool};var P={className:void 0,flex:false};function R(e){var t=e.regionId,a=e.className,r=e.flex,i=T()(e,["regionId","className","flex"]);if(Object(A["a"])())return null;var s=j()(a,{"p-classic_nav__page_header__legacy_drag_region":true,flex_one:r,channel_header_drag_region:true});return n.a.createElement("div",S()({},i,{className:s,"data-region":t}))}R.displayName="LegacyPageHeaderDragRegion";R.defaultProps=P;var M=R;var D={id:u["b"].string.isRequired,className:u["b"].string,legacy:u["b"].bool,featurePages:u["b"].bool};var x={className:void 0,legacy:false,featurePages:false};var F=function e(t){var a=t.id,r=t.className,i=t.legacy,s=t.featurePages;if(!a||!s)return null;var o=Object(v["a"])(a);if(o.header)return o.header({className:r});var l=j()("p-classic_nav__page_header",{"p-classic_nav__page_header--legacy":i},r);return n.a.createElement("div",{className:l},n.a.createElement("div",{className:"p-classic_nav__channel_header__title"},o.label()),n.a.createElement(M,{regionId:"main",flex:true}))};F.displayName="PageHeader";F.defaultProps=x;var L=function e(t){return{featurePages:Object(p["isFeatureEnabled"])(t,"feature_pages")}};var B=Object(o["connect"])(L)(F);var U=a(3246);var q=a(3248);var G={id:u["b"].string.isRequired,isEnabled:u["b"].bool.isRequired,featurePages:u["b"].bool};var W={featurePages:false};var H=function e(t){var a=t.id,i=t.isEnabled,s=t.featurePages;Object(r["useEffect"])(function(){Object(E["b"])()},[]);if(!a||!s||!i)return null;return n.a.createElement("div",{className:"p-pages__legacy_page_header"},n.a.createElement(B,{id:a,legacy:true}))};H.displayName="LegacyPageHeader";H.defaultProps=W;var V=function e(t){var a=Object(d["a"])(t);return{id:a,isEnabled:Object(h["e"])(t,a),featurePages:Object(p["isFeatureEnabled"])(t,"feature_pages")}};var K=Object(o["connect"])(V)(H);var z=function e(t,a){if(!t)throw new Error("mountPageHeader must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(y["a"],null,n.a.createElement(K,null))),a)};var Y=function e(t){s.a.unmountComponentAtNode(t)};var Q=a(44);Object(Q["a"])("interop.mountPageView",O);Object(Q["a"])("interop.unmountPageView",k);Object(Q["a"])("interop.mountPageHeader",z);Object(Q["a"])("interop.unmountPageHeader",Y)},,function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(3981);Object(r["a"])("interop.openInviteMemberToChannelDialog",function(e){return TS.redux.dispatch(Object(n["a"])(e))})},,function(e,t,a){"use strict";a.r(t);a.d(t,"fetchHighlightsListForChannel",function(){return d});var r=a(2);var n=a.n(r);var i=a(0);var s=a(15);var o=a(12);var l=a(293);var c=a(123);var u=a(1042);var d=Object(s["b"])("Fetch highlights items list for channel",function(e,t,a){return e(Object(u["d"])(a)).then(function(t){var n=Object(r["get"])(t,"highlightMsgs.messages",[]);if(Object(r["isEmpty"])(n))return[];var i=e(Object(l["a"])({imsgs:n,channelId:a}));e(Object(c["a"])(i));return i}).catch(function(e){Object(o["a"])({getState:t}).error("HIGHLIGHTS-STORE",e,{subtype:"error_fetching_channel_highlights"});throw e})});d.propTypes={channelId:i["b"].string}},,function(e,t,a){"use strict";var r=a(1);var n=a.n(r);var i=a(0);var s=a(48);var o=a(15);var l=a(3);var c=a.n(l);var u=a(6);var d=a.n(u);var p=a(7);var h=a.n(p);var v=a(8);var m=a.n(v);var f=a(9);var b=a.n(f);var g=a(13);var _=a(2);var y=a(4);var O=a(10);var k=a(79);var E=a(38);var C=a(354);var j=a(179);var w=a(515);var S=a(1097);var I=a(1556);var T=a(289);var A=a(95);var N=a(3015);var P={id:i["b"].string,onChange:i["b"].func,defaultToggled:i["b"].bool,isDisabled:i["b"].bool,isRequired:i["b"].bool,ariaLabel:i["b"].string,ariaLabelledBy:i["b"].string,ariaDescribedBy:i["b"].string,dataQa:i["b"].string};var R={id:null,onChange:_["noop"],defaultToggled:false,isDisabled:false,isRequired:false,ariaLabel:null,ariaLabelledBy:null,ariaDescribedBy:null,dataQa:null};var M=function e(t){var a=t.id,r=t.defaultToggled,i=t.isDisabled,s=t.isRequired,o=t.ariaLabel,l=t.ariaLabelledBy,c=t.ariaDescribedBy,u=t.dataQa,d=t.onChange;return n.a.createElement("div",{"data-qa":"channel_options_toggle_button",className:"p-channel_toggle_button"},n.a.createElement("input",{id:a,type:"checkbox",className:"p-channel_toggle_button__input","aria-label":o,"aria-labelledby":l,"aria-describedby":c,required:s,defaultChecked:r,disabled:i,onChange:d,"data-qa":u}),n.a.createElement("div",{"aria-hidden":"true",className:"p-channel_toggle_button__visual",tabIndex:"-1"}))};M.displayName="ChannelOptionsToggleButton";M.defaultProps=R;var D=Object(A["pure"])(M);var x=a(22);var F=a(128);var L=a(1543);var B=a(98);var U=a(113);var q=a(316);var G=a(12);var W=a(24);var H=a(1185);var V=a(93);var K=a(17);var z=a(3928);var Y=250;function Q(e){return e.length<=Y}var J=1e3;function Z(e){return e.length<=J}var X=a(3017);var $=new O["b"]("channel_modal");var ee="CHANNEL-CREATE-MODAL";var te={initialChannelName:i["b"].string,featureModernizeChannelCreateModal:i["b"].bool.isRequired,featureLongerChannelNames:i["b"].bool.isRequired,validateChannelName:i["b"].func.isRequired,createChannel:i["b"].func.isRequired,submitChannelPurpose:i["b"].func.isRequired,submitInviteToChannel:i["b"].func.isRequired,setPrimaryView:i["b"].func.isRequired,closeModal:i["b"].func.isRequired,logger:i["b"].object.isRequired,showSharedChannelsUi:i["b"].bool.isRequired,featureSharedChannelsEnterpriseClient:i["b"].bool.isRequired,privateOnly:i["b"].bool,currentMember:i["b"].object,onChannelCreated:i["b"].func};var ae={initialChannelName:"",privateOnly:false,currentMember:{},onChannelCreated:_["noop"]};var re={hasNameRequiredWarning:false,hasMaxLengthWarning:false,hasSpecialsWarning:false,hasPunctuationWarning:false,hasNameTakenWarning:false};var ne=function(e){b()(t,e);function t(e){d()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={channelName:"",channelPurpose:"",invitedUsers:[],isPrivate:false,channelNameErrors:{},channelPurposeError:false,invitedUsersError:false,unknownError:false,isLoading:false};Object(_["bindAll"])(a,["onChannelNameChange","onChannelPurposeChange","onChannelInvitedUsersChange","onPrivateToggleChanged","validateChannelName","renderPurposeTextyInput","onGo","onChannelNameKeyDown","filterMembers","onOpenSharedChannelModal"]);a.validateChannelName=Object(_["debounce"])(a.validateChannelName,500);a.validateChannelPurpose=Object(_["debounce"])(a.validateChannelPurpose,500);a.channelPurposeInput=n.a.createRef();a.nameInput=n.a.createRef();return a}h()(t,[{key:"componentDidMount",value:function e(){var t=this;this.props.initialChannelName&&this.setState(function(){return{channelName:t.props.initialChannelName}})}},{key:"onChannelNameChange",value:function e(t){var a=t.toLowerCase().replace(/\s/g,"");this.setState(function(){return{channelName:a}});this.validateChannelName(a)}},{key:"onChannelNameKeyDown",value:function e(t){t.keyCode===k["c"]&&this.onGo()}},{key:"onChannelPurposeChange",value:function e(){var t=this.channelPurposeInput.current&&this.channelPurposeInput.current.getWrappedInstance().value();this.setState(function(){return{channelPurpose:t}});this.validateChannelPurpose(t)}},{key:"onChannelInvitedUsersChange",value:function e(t){var a=!Z(t);this.setState(function(){return{invitedUsers:t,invitedUsersError:a}})}},{key:"onPrivateToggleChanged",value:function e(t){var a=t.target.checked;this.setState(function(){return{isPrivate:a}})}},{key:"onOpenSharedChannelModal",value:function e(){var t=this.state,a=t.channelName,r=t.isPrivate;Object(H["c"])({channel_name:a,is_private:r,element:"shared_channels_new_channel_modal_share_btn"})}},{key:"onGo",value:function e(){var t=this;var a=this.state,r=a.channelName,n=a.channelPurpose,i=a.invitedUsers,s=a.isPrivate;var o=this.props,l=o.logger,u=o.privateOnly;if(!r||this.hasErrors())return;this.setState(function(){return{isLoading:true}});l.info(ee,"Starting channel creating process...");this.props.createChannel({name:r,isPrivate:s||u}).then(function(e){l.info(ee,"Channel was successfully created.");if(n){l.info(ee,"Setting the channel purpose.");t.props.submitChannelPurpose({channelId:e.id,purpose:n})}if(i.length){l.info(ee,"Inviting "+i.length+" to the channel.");t.props.submitInviteToChannel({channelId:e.id,users:i.map(function(e){return e.value}).join(",")})}l.info(ee,"Switching to the newly created channel.");t.props.setPrimaryView({id:e.id});l.info(ee,"Closing the modal.");t.props.closeModal();t.props.onChannelCreated()}).catch(function(e){l.info(ee,"Hit an error in the chain of Channel Create API calls. See below:");l.error(ee,e);var a={isLoading:false};switch(e.name){case"name_taken":a.channelNameErrors=c()({},re,{hasNameTakenWarning:true});break;case"invalid_name_required":a.channelNameErrors=c()({},re,{hasNameRequiredWarning:true});break;case"invalid_name_specials":case"invalid_name_punctuation":a.channelNameErrors=c()({},re,{hasSpecialsWarning:true});break;case"invalid_name_maxlength":a.channelNameErrors=c()({},re,{hasMaxLengthWarning:true});break;default:a.unknownError=true}t.setState(function(){return a})})}},{key:"getChannelNameErrorString",value:function e(){var t=this.props,a=t.featureModernizeChannelCreateModal,r=t.featureLongerChannelNames;var n=this.state,i=n.channelNameErrors,s=n.unknownError;if(!a)return null;if(s)return $.t("For some weird reason, that didn\u2019t work. Please try again to continue.");if(i.hasNameRequiredWarning)return $.t("Don\u2019t forget to name your channel.");if(i.hasMaxLengthWarning&&r)return $.t("Names must be lowercase, without spaces or periods, and shorter than 81 characters.");if(i.hasMaxLengthWarning&&!r)return $.t("Names must be lowercase, without spaces or periods, and shorter than 22 characters.");if(i.hasSpecialsWarning)return $.t("Channel names can\u2019t contain spaces, periods, or most punctuation. Try again?");if(i.hasPunctuationWarning)return $.t("Channel names can\u2019t contain spaces, periods, or most punctuation. Try again?");if(i.hasNameTakenWarning)return $.t("That name is already taken by a channel, username, or user group.");return null}},{key:"getGoButtonDisabledState",value:function e(){return!this.state.channelName||this.hasErrors()}},{key:"filterMembers",value:function e(t){var a=this.props.currentMember;if(Object(K["isUltraRestricted"])(t))return false;if(!Object(K["isAdmin"])(a)&&!Object(K["isOwner"])(a)&&!Object(K["isPrimaryOwner"])(a)&&Object(K["isRestricted"])(t))return false;if(Object(K["isRestricted"])(a))return!Object(K["isRestricted"])(t);return true}},{key:"hasErrors",value:function e(){var t=this.state,a=t.channelNameErrors,r=t.channelPurposeError,n=t.invitedUsersError;return a.hasNameRequiredWarning||a.hasMaxLengthWarning||a.hasSpecialsWarning||a.hasPunctuationWarning||a.hasNameTakenWarning||r||n}},{key:"validateChannelName",value:function e(t){var a=this;this.props.validateChannelName({channelName:t}).then(function(e){a.setState(function(){return{channelNameErrors:e}})})}},{key:"validateChannelPurpose",value:function e(t){this.setState(function(){return{channelPurposeError:!Q(t)}})}},{key:"renderUnifiedMember",value:function e(t,a){return n.a.createElement(T["b"],{id:t.value,size:"small",useDarkMode:a.isActive,showPresence:true,showAvatar:true,className:"p-channel_create_modal__member_invites_select"})}},{key:"renderPurposeTextyInput",value:function e(t){var a=t.modules,r=t.isOpen;if(!this.props.featureModernizeChannelCreateModal)return null;return n.a.createElement(w["g"],{id:"channel_create_modal_purpose",size:"large",modules:a,onTextChange:this.onChannelPurposeChange,onEnter:this.onGo,maxLength:Y,isAutocompleteOpen:r,focusOnMount:false,isJumbomojiEnabled:false,enableBroadcastKeywords:false,ref:this.channelPurposeInput,ariaLabel:$.t("Channel purpose"),isSingleLine:true})}},{key:"render",value:function e(){var t=this.props,a=t.featureModernizeChannelCreateModal,r=t.featureLongerChannelNames,i=t.privateOnly,s=t.showSharedChannelsUi,o=t.featureSharedChannelsEnterpriseClient;var l=this.state,c=l.channelName,u=l.channelPurposeError,d=l.invitedUsersError,p=l.isPrivate,h=l.isLoading;if(!a)return null;var v=p||i;return n.a.createElement(C["a"],{modalBodyClasses:"p-channel_create_modal__body",title:v?$.t("Create a private channel"):$.t("Create a channel"),goButtonText:"Create",goButtonIsDisabled:this.getGoButtonDisabledState(),goButtonIsPending:h,onGo:this.onGo},n.a.createElement("div",{className:"p-channel_create_modal"},n.a.createElement("p",null,$.t("Channels are where your members communicate. They\u2019re best when organized around a topic \u2014 #leads, for example.")),n.a.createElement("label",{htmlFor:"channel_create_modal_name"},n.a.createElement("span",{className:"p-channel_create_modal__label_title"},n.a.createElement("strong",null,$.t("Name"))),n.a.createElement("span",{className:"p-channel_create_modal__label_error","data-qa":"channel_create_name_error"},this.getChannelNameErrorString()),n.a.createElement("div",{className:"p-channel_create_modal__input"},n.a.createElement(j["a"],{value:c,icon:v?"lock":"channel",placeholder:$.t("e.g. leads"),id:"channel_create_modal_name",name:"channel_create_modal_name",size:"large",onChange:this.onChannelNameChange,onKeyDown:this.onChannelNameKeyDown,autoComplete:"off",focusOnMount:true}),n.a.createElement("div",{className:"p-channel_create_modal__input_subtext"},r?$.t("Names must be lowercase, without spaces or periods, and shorter than 81 characters."):$.t("Names must be lowercase, without spaces or periods, and shorter than 22 characters.")))),!i&&n.a.createElement(n.a.Fragment,null,n.a.createElement("label",{htmlFor:"channel_create_modal_purpose"},n.a.createElement("span",{className:"p-channel_create_modal__label_title"},$.rt("<strong>Purpose</strong> (optional)")),n.a.createElement("span",{className:"p-channel_create_modal__label_error","data-qa":"channel_create_purpose_error"},u&&$.t("This field can\u2019t be more than 250 characters."))),n.a.createElement("div",{className:"p-channel_create_modal__input","data-qa":"channel_create_modal_purpose"},n.a.createElement(S["a"],{renderInput:this.renderPurposeTextyInput,completeOnMembers:true,completeOnChannels:true,completeOnEmoji:true,shouldCompleteOnTab:false}),n.a.createElement("div",{className:"p-channel_create_modal__input_subtext"},$.t("What\u2019s this channel about?")))),n.a.createElement("label",{htmlFor:"channel_create_modal_invites",className:"p-channel_create_modal__invites"},n.a.createElement("span",{className:"p-channel_create_modal__label_title"},$.rt("<strong>Send invites to</strong> (optional)")),n.a.createElement("span",{className:"p-channel_create_modal__label_error","data-qa":"channel_create_invited_users_error"},d&&$.t("You can\u2019t choose more than 1000 items.")),n.a.createElement("div",{className:"p-channel_create_modal__invites_input"},n.a.createElement(I["a"],{selectedOptions:[],renderOption:this.renderUnifiedMember,width:"100%",onSelectedItemsChange:this.onChannelInvitedUsersChange,selectId:"channel_create_modal_invites",placeholderText:$.t("Search by name"),size:"large",searcherOptions:{entities:{channels:false,members:true,userGroups:false},limit:24,sort:{frecency:true},filter:this.filterMembers}})),n.a.createElement("div",{className:"p-channel_create_modal__input_subtext"},$.t("Select up to 1000 people to add to this channel."))),!i&&n.a.createElement("label",{id:"channel_create_modal_toggle_label",htmlFor:"channel_create_modal_toggle",className:"p-channel_create_modal__private_toggle_section"},n.a.createElement("div",{className:"p-channel_create_modal__private_toggle_copy"},n.a.createElement("h4",{className:"p-channel_create_modal__private_toggle_copy_title"},$.rt("<strong>Make private</strong>")),v?n.a.createElement("p",{className:"p-channel_create_modal__private_toggle_copy_body"},$.rt("<strong>This can\u2019t be undone.</strong> Once you\u2019ve made a channel private, it can\u2019t be changed back.")):n.a.createElement("p",{className:"p-channel_create_modal__private_toggle_copy_body"},$.t("By default, a channel can be joined by any member of your workspace."))),n.a.createElement(D,{id:"channel_create_modal_toggle",ariaLabel:p?$.t("This channel can only be joined or viewed by invite."):$.t("Anyone in your workspace can view and join this channel."),ariaLabelledBy:"channel_create_modal_toggle_label",onChange:this.onPrivateToggleChanged,dataQa:"channel_create_modal_toggle"}))),s&&n.a.createElement(L["a"],{tooltipPosition:"bottom",unstyled:true},n.a.createElement(F["a"],{onClick:this.onOpenSharedChannelModal,className:"p-channel_create_modal__share","data-qa":"channel_new_modal_create_button",disabled:Object(E["a"])()},n.a.createElement(x["b"],{type:"plus-circle"})," ",o?$.t("Share a channel with another organization"):$.t("Share a channel with another workspace"))))}}]);return t}(n.a.PureComponent);ne.displayName="ChannelCreateModal";ne.defaultProps=ae;var ie=function e(t){return{featureModernizeChannelCreateModal:Object(y["isFeatureEnabled"])(t,"feature_modernize_channel_create_modal"),featureLongerChannelNames:Object(y["isFeatureEnabled"])(t,"feature_longer_channel_names"),logger:Object(G["a"])({state:t}),privateOnly:!Object(V["y"])(t)&&Object(V["x"])(t),currentMember:Object(W["b"])(t),showSharedChannelsUi:Object(V["G"])(t),featureSharedChannelsEnterpriseClient:Object(y["isFeatureEnabled"])(t,"feature_shared_channels_enterprise_client")}};var se=function e(t){return{validateChannelName:function e(){return t(z["a"].apply(void 0,arguments))},createChannel:function e(){return t(B["j"].apply(void 0,arguments))},closeModal:function e(){return t(s["closeModal"].apply(void 0,arguments))},setPrimaryView:function e(){return t(q["a"].apply(void 0,arguments))},submitChannelPurpose:function e(){return t(U["B"].apply(void 0,arguments))},submitInviteToChannel:function e(){return t(U["H"].apply(void 0,arguments))}}};var oe=Object(g["connect"])(ie,se)(ne);var le=Object(o["b"])("Opens the Channel Create modal in client",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelName;return e(Object(s["openModal"])({element:n.a.createElement(oe,{initialChannelName:r})}))});le.propTypes={channelName:i["b"].string};var ce=t["a"]=le},,,,,,,function(e,t,a){"use strict";var r=a(6);var n=a.n(r);var i=a(7);var s=a.n(i);var o=a(8);var l=a.n(o);var c=a(9);var u=a.n(c);var d=a(1);var p=a.n(d);var h=a(0);var v=a(13);var m=a(2);var f=a(4);var b=a(68);var g=a(34);var _=a(122);var y=a(22);var O=a(66);var k=a(1045);var E=a(38);var C=a(10);var j=new C["b"]("sonic_pilot");function w(e){var t=e.featureSonicPlaceholderLabels;return Object(E["a"])()&&t?p.a.createElement("div",{className:"c-menu_item__placeholder"},j.t("Coming soon")):null}var S=function e(t){return{featureSonicPlaceholderLabels:Object(f["isFeatureEnabled"])(t,"feature_sonic_placeholder_labels")}};function I(){return Object(E["a"])()?"c-menu_item--sonic-placeholder":void 0}var T=Object(v["connect"])(S)(w);var A=a(21);var N=a(20);var P=Object(N["b"])("TS.client.ui.files.backButtonOnClick");var R=Object(N["b"])("TS.client.ui.files.chooseFile");var M=a(45);var D=a(160);var x=a(134);var F=a(73);var L=a(864);var B=a(35);var U=Object(D["e"])("Opens the docs Gantry app in a new window",function(e,t){var a=t();var r=Object(F["a"])(a);if(!Object(x["a"])(r))return;e(Object(L["a"])({pathname:"/docs/"+Object(B["d"])(a).id}))});U.propTypes=h["b"].object;var q=a(1057);var G=a(1828);var W=a(15);var H=a(365);var V=a(138);var K=a(48);var z=new C["b"]("file-upload");var Y={SINGLE_LINK_MISSING:"single",MULTIPLE_LINK_MISSING:"multiple",WEBLINK:"weblink"};function Q(e){var t=e.type,a=e.featureBoxContentPicker,r=e.proceedToNextDialog;var n=a?z.t("Your file can\u2019t be added"):"";var i="";switch(t){case Y.SINGLE_LINK_MISSING:i=a?z.t("Your Box file is missing a shared link, which we\u2019ll need to add it to Slack."):"";break;case Y.MULTIPLE_LINK_MISSING:i=a?z.t("One or more of your Box files is missing a shared link, which we\u2019ll need to add it to Slack."):"";break;case Y.WEBLINK:i=a?z.t("Apologies! Links from Box can\u2019t be added this way yet."):"";break;default:return null}var s=r!==m["noop"]?function(){Object(m["defer"])(function(){r()})}:m["noop"];return p.a.createElement(H["a"],{title:n,onGo:s},p.a.createElement("p",null,i))}Q.displayName="BoxLinkAlert";Q.defaultProps={type:Y.SINGLE,proceedToNextDialog:m["noop"],featureBoxContentPicker:false};var J=Object(V["a"])("feature_box_content_picker")(Q);var Z=Object(D["e"])("Display Box Link Alert error",function(e,t,a){return e(Object(K["openModal"])({element:p.a.createElement(J,a)}))});Z.propTypes={};var X=Z;var $=a(282);var ee=a(934);var te=a(455);var ae=a(178);var re=a(31);var ne=a(30);var ie=a(3);var se=a.n(ie);var oe=a(12);var le={url:h["b"].string.isRequired,windowFeatures:h["b"].object,hidden:h["b"].bool,processEvent:h["b"].func};var ce={width:590,height:520};var ue="REMOTE-FILE-PICKER";var de="fp_";var pe=function e(t,a){return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.resolve,i=r.reject;if(!Object(ne["isSSB"])()){if(e.source!==t)return;if(e.origin!==window.location.origin)return}if(!e.data||e.data._sourceId!==a)return;e.data.ok&&n(e.data);var s=new Error("Data not OK");s.data=e.data;i(s)}};var he=function e(t){return new Promise(function(e,a,r){var n=void 0;var i=function r(i){var s=function t(a){e(a);n()};var o=function e(t){a(t);n()};try{t(i,{resolve:s,reject:o})}catch(e){o(e)}};n=function e(){return window.removeEventListener("message",i)};r(n);window.addEventListener("message",i)})};var ve=Object(W["b"])("Open third-party file picker window and handle callback",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.hidden,n=a.url,i=a.windowFeatures,s=a.processEvent;var o=Object(oe["a"])({getState:t,label:ue});var l=se()({},ce,i);Object(ne["isSSB"])()&&window.desktop&&(window.desktop.delegate.canOpenURLInWindow(n)||o.error(ue,"Trying to open remote file picker URL in SSB but URL is not whitelisted: "+n));var c=Object(m["uniqueId"])(de);var u=n+(n.includes("?")?"&":"?")+"source_id="+c;var d=void 0;var p=function e(){return d.cancel()};var h=void 0;var v=void 0;try{if(Object(ne["isSSB"])()){h=r?Object(L["b"])(u,{show:false,skipTaskbar:true,frame:false,opacity:0,transparent:true,focusable:false}):Object(L["b"])(u,l);h.addListener("close",p)}else if(r){v=document.createElement("iframe");v.setAttribute("data-qa","picker-frame");v.src=u;v.style.cssText="display:none";document.body.appendChild(v);h=v.contentWindow}else{var f=void 0;var b=Object(m["map"])(l,function(e,t){var a=String(e);true===e?a="1":false===e&&(a="0");return t+"="+a}).join(",");h=window.open(u,f,b);h&&h.addEventListener("beforeunload",p)}if(!h)return Promise.reject(new Error("Unable to open window"))}catch(e){return Promise.reject(e)}d=he(s||pe(h,c));d.finally(function(){v?v.remove():h&&h.close()}).catch(m["noop"]);return d});ve.propTypes=le;var me=ve;var fe=new C["b"]("files");var be={channelId:h["b"].string.isRequired,threadTs:h["b"].string,metadata:h["b"].shape({fileUploadAction:h["b"].oneOfType([h["b"].number,h["b"].string]),fileUploadSrc:h["b"].oneOfType([h["b"].number,h["b"].string])})};var ge=function e(t){if(!Object(m["isPlainObject"])(t))return false;if("file"!==t.type)return false;if(!Object(m["isString"])(t.name))return false;if(!Object(m["isPlainObject"])(t.shared_link))return false;if(!Object(m["isString"])(t.shared_link.url))return false;return true};var _e=function e(t){var a=ne["isDev"]?"A06147X5W":"A0F82E57C";var r=Object(B["d"])(t);return Object(re["getTeamUrl"])(r,"/apps/"+a)};var ye=Object(W["b"])("Open a window to pick a Box file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,i=a.metadata;var s=Object(f["isFeatureEnabled"])(t(),"feature_sonic_cloud_files_picker");var o=Object(f["isFeatureEnabled"])(t(),"feature_box_content_picker");if(!s||!o)return Object($["k"])(r,n,i);var l=t();var c=Object(ae["getTeamId"])(l);var u=location.origin+"/files/import/box?team="+c;return e(me({url:u,windowFeatures:{height:675,width:925}})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.chosen_files,s=void 0===a?[]:a;var o=[];var l=[];var c=[];s.forEach(function(e){e&&(ge(e)?o.push({name:e.name,link:e.shared_link.url,is_box:true}):"web_link"===e.type?c.push({name:e.name,url:e.url}):l.push(e))});var u=o.length?function(){return e(Object(ee["a"])({files:o,initialChannelId:r,threadTs:n,metadata:i}))}:m["noop"];var d=c.length?function(){return e(X({type:Y.WEBLINK,proceedToNextDialog:u}))}:u;if(l.length>0)return e(X({type:s.length>1?Y.MULTIPLE_LINK_MISSING:Y.SINGLE_LINK_MISSING,proceedToNextDialog:d}));if(c.length)return d();return u()}).catch(function(t){if(t&&t.data&&t.data.error)switch(t.data.error){case"no_access_token":case"unauthorized":e(Object(te["addOrFlashEphemeralBotMsg"])({ephemeralType:te["EphemeralTypes"].boxFilePickerError,message:{channel:r,thread_ts:n,slackbot_feels:"sad_surprise",text:o?fe.t("Apologies, but you\u2019ll need to <{url}|reconnect Box to Slack> to continue. It only takes a click or two!",{url:_e(l)}):""}}));break;default:break}throw t})});ye.propTypes=be;var Oe=ye;var ke=a(63);var Ee=a.n(ke);var Ce={channelId:h["b"].string.isRequired,threadTs:h["b"].string,metadata:h["b"].shape({fileUploadAction:h["b"].oneOfType([h["b"].number,h["b"].string]),fileUploadSrc:h["b"].oneOfType([h["b"].number,h["b"].string])})};var je=function e(t){if(!t||"object"!==("undefined"===typeof t?"undefined":Ee()(t)))return false;if("string"!==typeof t.name)return false;if("number"!==typeof t.bytes)return false;if("string"!==typeof t.link)return false;if(t.icon&&"string"!==typeof t.icon)return false;return true};var we=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.resolve,n=a.reject;if("https://www.dropbox.com"!==t.origin)return;var i=void 0;try{i="string"===typeof t.data?JSON.parse(t.data):t.data}catch(e){return}if(!i||"object"!==("undefined"===typeof i?"undefined":Ee()(i)))return;switch(i.method){case"files_selected":Object(m["isArray"])(i.params)&&Object(m["every"])(i.params,je)&&r({chosen_files:i.params});n(new Error("Invalid file(s) from Dropbox"));break;case"close_dialog":r({chosen_files:[]});break;default:break}};var Se=void 0;var Ie=Object(W["b"])("Open a window to pick a Box file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,i=a.metadata;if(!Object(f["isFeatureEnabled"])(t(),"feature_sonic_cloud_files_picker"))return Object($["l"])(r,n,i);var s=t();var o=Object(ae["getTeamId"])(s);Se&&Se.isPending()&&Se.cancel();var l=location.origin+"/files/import/dropbox?team="+o;Se=e(me({url:l,processEvent:we,windowFeatures:{height:552,width:640}}));return Se.then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.chosen_files,s=void 0===a?[]:a;var o=s.map(function(e){return{name:e.name,size:e.bytes,link:e.link,icon:e.icon,is_dropbox:true}});if(o.length)return e(Object(ee["a"])({files:o,initialChannelId:r,threadTs:n,metadata:i}));return null})});Ie.propTypes=Ce;var Te=Ie;var Ae=a(253);var Ne={channelId:h["b"].string.isRequired,threadTs:h["b"].string,metadata:h["b"].shape({fileUploadAction:h["b"].oneOfType([h["b"].number,h["b"].string]),fileUploadSrc:h["b"].oneOfType([h["b"].number,h["b"].string])}),reason:h["b"].string};var Pe=Object(W["b"])("Open a window to pick a GDrive file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,i=a.metadata,s=a.reason;if(!Object(f["isFeatureEnabled"])(t(),"feature_sonic_cloud_files_picker"))return Object($["i"])(r,n,i);var o=t();var l=Object(ae["getTeamId"])(o);var c=location.origin+"/files/import/gdrive?team="+l;return e(me({url:c,windowFeatures:{height:675}})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.chosen_files;return Promise.map(a,function(t){return e(Object(Ae["l"])({channels:r,threadTs:n,link:t.url,reason:s||"open-gdrive-file-picker"}))})})});Pe.propTypes=Ne;var Re=Pe;var Me={channelId:h["b"].string.isRequired,threadTs:h["b"].string,metadata:h["b"].shape({fileUploadAction:h["b"].oneOfType([h["b"].number,h["b"].string]),fileUploadSrc:h["b"].oneOfType([h["b"].number,h["b"].string])}),reason:h["b"].string};var De=Object(W["b"])("Open a window to pick a OneDrive file",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId,n=a.threadTs,i=a.metadata,s=a.reason;if(!Object(f["isFeatureEnabled"])(t(),"feature_sonic_cloud_files_picker"))return Object($["j"])(r,n,i);var o=t();var l=Object(ae["getTeamId"])(o);var c=location.origin+"/files/import/onedrive?team="+l;return e(me({url:c,hidden:true})).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.chosen_files;return Promise.map(a,function(t){return e(Object(Ae["l"])({channels:r,threadTs:n,link:t,reason:s||"open-onedrive-file-picker"}))})})});De.propTypes=Me;var xe=De;var Fe=a(208);var Le=a(428);var Be=a(233);var Ue=a(568);var qe=a(49);var Ge=a(60);var We=Object(W["b"])("Creates and opens a legacy Post",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.openInBrowser;if(!Object(qe["a"])()){Object($["b"])(null,r);return}var n=t();var i=Object(B["d"])(n);var s=Object(re["getTeamUrl"])(i,"/files/create/post"+location.search);var o=Object(Be["a"])(n);s=Object(Ge["setUrlQueryStringValue"])(s,"origin_team",o||i.id);var l=Object(F["a"])(n);s=Object(Ge["setUrlQueryStringValue"])(s,"origin_channel",Object(x["a"])(l)?l:"");Object(Ue["a"])(s)});We.defaultProps={openInBrowser:true};We.propTypes={openInBrowser:h["b"].bool};var He=new C["b"]("menu_file");var Ve={channelId:h["b"].string.isRequired,threadTs:h["b"].string,viewContext:h["b"].string,disableFileUploadsPref:h["b"].string,menuProps:h["b"].object,featureReactThreads:h["b"].bool,featureNewFileMenuTranslations:h["b"].bool,featureDocs:h["b"].bool,featureSonicInputs:h["b"].bool,featureSonicSnippets:h["b"].bool,hiddenFileInputRef:h["b"].object,experimentGroup:h["b"].string,clogger:h["b"].object.isRequired,createDocPost:h["b"].func,createAndOpenLegacyPost:h["b"].func.isRequired,showBoxMenuItem:h["b"].bool,showDropboxMenuItem:h["b"].bool,showGdriveMenuItem:h["b"].bool,showOneDriveMenuItem:h["b"].bool,openSnippetDialog:h["b"].func,openCreateGDocDialog:h["b"].func,openBoxFilePicker:h["b"].func,openOnedriveFilePicker:h["b"].func,openDropboxFilePicker:h["b"].func,openGdriveFilePicker:h["b"].func,featureBoxContentPicker:h["b"].bool,featureSonicCloudFilesPicker:h["b"].bool};var Ke={threadTs:void 0,viewContext:void 0,disableFileUploadsPref:void 0,menuProps:{},featureReactThreads:false,featureDocs:false,featureSonicInputs:false,featureNewFileMenuTranslations:false,featureSonicSnippets:false,hiddenFileInputRef:void 0,experimentGroup:void 0,createDocPost:m["noop"],showBoxMenuItem:false,showDropboxMenuItem:false,showGdriveMenuItem:false,showOneDriveMenuItem:false,openSnippetDialog:m["noop"],openCreateGDocDialog:m["noop"],openBoxFilePicker:m["noop"],openOnedriveFilePicker:m["noop"],openDropboxFilePicker:m["noop"],openGdriveFilePicker:m["noop"],featureBoxContentPicker:false,featureSonicCloudFilesPicker:false};var ze=function(e){u()(t,e);function t(e){n()(this,t);var a=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.activeCloudServices=[];Object(m["bindAll"])(a,["selectFileFromComputer","createDoc","createSnippet","createLegacyPost","createGDRiveDocument","createGDRiveSpreadsheet","createGDRivePresentation","renderCreateNewSubmenu","handleBoxFileProvider","handleDropboxFileProvider","handleGdriveFileProvider","handleOnedriveFileProvider","renderMultipleCloudServices"]);return a}s()(t,[{key:"selectFileFromComputer",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs,n=t.viewContext,i=t.hiddenFileInputRef,s=t.experimentGroup,o=t.clogger;if("improved_plus_menu"!==s){i&&i.current&&i.current.click();o.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_upload"}}})}else R(a,r,n)}},{key:"createDoc",value:function e(){this.props.createDocPost()}},{key:"createSnippet",value:function e(){var t=this.props,a=t.clogger,r=t.channelId,n=t.viewContext,i=t.threadTs;a.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_snippet"}}});var s=Object(Fe["a"])({viewContext:n,channelId:r});this.props.openSnippetDialog({initialText:s?s.getDisplayValue():"",initialChannelId:r,threadTs:i});s&&s.setText("")}},{key:"createLegacyPost",value:function e(t){var a=Object(Le["a"])(t);this.props.createAndOpenLegacyPost({openInBrowser:a});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_space"}}})}},{key:"createGDRiveDocument",value:function e(){this.props.openCreateGDocDialog({type:"document",displayType:this.props.featureSonicInputs?He.t("Document"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_document"}}})}},{key:"createGDRiveSpreadsheet",value:function e(){this.props.openCreateGDocDialog({type:"spreadsheet",displayType:this.props.featureSonicInputs?He.t("Spreadsheet"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_spreadsheet"}}})}},{key:"createGDRivePresentation",value:function e(){this.props.openCreateGDocDialog({type:"presentation",displayType:this.props.featureSonicInputs?He.t("Presentation"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_presentation"}}})}},{key:"handleBoxFileProvider",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs;var n={fileUploadAction:A["l"].PLUS_MENU,fileUploadSrc:A["m"].BOX};return this.props.openBoxFilePicker({channelId:a,threadTs:r,metadata:n})}},{key:"handleDropboxFileProvider",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs;var n={fileUploadAction:A["l"].PLUS_MENU,fileUploadSrc:A["m"].DROPBOX};return this.props.openDropboxFilePicker({channelId:a,threadTs:r,metadata:n})}},{key:"handleGdriveFileProvider",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs;var n={fileUploadAction:A["l"].PLUS_MENU,fileUploadSrc:A["m"].GOOGLE_DRIVE};return this.props.openGdriveFilePicker({channelId:a,threadTs:r,metadata:n,reason:"cloud-files-menu/gdrive"})}},{key:"handleOnedriveFileProvider",value:function e(){var t=this.props,a=t.channelId,r=t.threadTs;var n={fileUploadAction:A["l"].PLUS_MENU,fileUploadSrc:A["m"].ONEDRIVE};return this.props.openOnedriveFilePicker({channelId:a,threadTs:r,metadata:n,reason:"cloud-files-menu/onedrive"})}},{key:"renderMultipleCloudServices",value:function e(){var t=this.props.featureSonicCloudFilesPicker;var a={};var r=this.props;a.box=r.showBoxMenuItem;a.dropbox=r.showDropboxMenuItem;a.gdrive=r.showGdriveMenuItem;a.onedrive=r.showOneDriveMenuItem;var n=[{name:"box",props:{label:He.t("Box",{fallbackHash:"239ca5767afac9641593464ce02bc454d6ac07a9",fallbackHashNs:"files"}),icon:p.a.createElement(y["b"],{type:"box"}),onSelected:this.handleBoxFileProvider,enableForSonic:this.props.featureBoxContentPicker,dataQa:"box_picker_menu_item"}},{name:"dropbox",props:{label:He.t("Dropbox",{fallbackHash:"ac88abd7dfaa8f7a7ddc7b890eb6757030e093f4",fallbackHashNs:"files"}),icon:p.a.createElement(y["b"],{type:"dropbox"}),onSelected:this.handleDropboxFileProvider,enableForSonic:true,dataQa:"dropbox_picker_menu_item"}},{name:"gdrive",props:{label:He.t("Google Drive",{fallbackHash:"07c2964c41f409a224efb389f282268e4928b85f",fallbackHashNs:"files"}),icon:p.a.createElement(y["b"],{type:"google-drive"}),onSelected:this.handleGdriveFileProvider,enableForSonic:true,dataQa:"gdrive_picker_menu_item"}},{name:"onedrive",props:{label:He.t("OneDrive",{fallbackHash:"80753c986574153732103504426f45909268f96b",fallbackHashNs:"files"}),icon:p.a.createElement(y["b"],{type:"onedrive"}),onSelected:this.handleOnedriveFileProvider,enableForSonic:true,dataQa:"onedrive_picker_menu_item"}}];this.activeCloudServices=Object(m["filter"])(n,function(e){return a[e.name]?a[e.name]:null});var i=Object(m["map"])(this.activeCloudServices,function(e,a){return p.a.createElement(O["b"],{key:a,label:e.props.label,icon:e.props.icon,onSelected:e.props.onSelected,className:t&&e.props.enableForSonic?"":I(),"data-qa":e.props.dataQa},t&&e.props.enableForSonic?null:p.a.createElement(T,null))});return i}},{key:"renderCreateNewMenuItems",value:function e(){var t=this.props,a=t.featureDocs,r=t.featureSonicSnippets,n=t.showGdriveMenuItem,i=t.threadTs;var s=He.t("Post");var o=!i&&p.a.createElement(O["b"],{key:"create-new-post",label:s,icon:p.a.createElement(y["b"],{type:"create-post"}),onSelected:a?this.createDoc:this.createLegacyPost,className:a?void 0:I(),"data-qa":"create_new_doc"},a?void 0:p.a.createElement(T,null));var l=(r||!i)&&p.a.createElement(O["b"],{key:"create-new-snippet",label:He.t("Code or text snippet"),icon:p.a.createElement(y["b"],{type:"create-snippet"}),onSelected:this.createSnippet,className:r?void 0:I(),"data-qa":"create_new_snippet"},r?null:p.a.createElement(T,null));var c=!n||i&&!Object(E["a"])()?[]:[(l||o)&&p.a.createElement(O["d"],{key:"gdrive-separator"}),p.a.createElement(O["c"],{key:"gdrive-header",label:He.t("Google Drive")}),p.a.createElement(O["b"],{key:"gdrive_doc",label:He.t("Document"),icon:p.a.createElement(y["b"],{type:"file-google-document"}),onSelected:this.createGDRiveDocument,className:I(),"data-qa":"google_doc_menu_item"},p.a.createElement(T,null)),p.a.createElement(O["b"],{key:"gdrive_sheet",label:He.t("Spreadsheet"),icon:p.a.createElement(y["b"],{type:"file-google-spreadsheet"}),onSelected:this.createGDRiveSpreadsheet,className:I(),"data-qa":"google_sheet_menu_item"},p.a.createElement(T,null)),p.a.createElement(O["b"],{key:"gdrive_presentation",label:He.t("Presentation"),icon:p.a.createElement(y["b"],{type:"file-google-presentation"}),onSelected:this.createGDRivePresentation,className:I(),"data-qa":"google_presentation_menu_item"},p.a.createElement(T,null))];return Object(m["filter"])([o,l].concat(c))}},{key:"renderCreateNewSubmenu",value:function e(){var t=this.props.menuProps;var a=this.renderCreateNewMenuItems();return p.a.createElement(O["f"],t,a)}},{key:"renderCreateNew",value:function e(){var t=this.props,a=t.featureNewFileMenuTranslations,r=t.threadTs,n=t.showGdriveMenuItem;var i=this.renderCreateNewMenuItems();if(0===i.length)return null;var s=!r&&Object(E["a"])()&&n?{top:-80}:void 0;return[1===i.length?i[0]:p.a.createElement(k["a"],{key:"create-new-submenu",label:a?He.t("Create new"):"Create new",icon:p.a.createElement(y["b"],{type:"plus-circle"}),renderSubmenu:this.renderCreateNewSubmenu,"data-qa":"create_new_submenu",forceLeft:!!r,submenuStyle:s}),p.a.createElement(O["d"],{key:"create-new-separator"})]}},{key:"render",value:function e(){var t=this.props,a=t.disableFileUploadsPref,r=t.menuProps,n=t.featureReactThreads,i=t.showBoxMenuItem,s=t.showDropboxMenuItem,o=t.showGdriveMenuItem,l=t.showOneDriveMenuItem;if(!n)return null;var c=i||s||o||l;var u="disable_all"!==a;var d="disable_all_except_images"===a;var h=c?He.t("Add from\u2026"):He.t("Add an image from\u2026");return p.a.createElement(O["f"],r,this.renderCreateNew(),p.a.createElement(O["c"],{label:d?h:He.t("Add a file from\u2026")}),this.renderMultipleCloudServices(this.props),u&&p.a.createElement(O["b"],{label:He.t("Your computer"),icon:p.a.createElement(y["b"],{type:"laptop"}),onSelected:this.selectFileFromComputer}))}}]);return t}(d["Component"]);ze.displayName="NewFileMenu";ze.defaultProps=Ke;var Ye=function e(t){return{createDocPost:function e(){return t(U.apply(void 0,arguments))},createAndOpenLegacyPost:function e(){return t(We.apply(void 0,arguments))},openSnippetDialog:function e(){return t(q["a"].apply(void 0,arguments))},openCreateGDocDialog:function e(){return t(G["a"].apply(void 0,arguments))},openBoxFilePicker:function e(){return t(Oe.apply(void 0,arguments))},openDropboxFilePicker:function e(){return t(Te.apply(void 0,arguments))},openGdriveFilePicker:function e(){return t(Re.apply(void 0,arguments))},openOnedriveFilePicker:function e(){return t(xe.apply(void 0,arguments))}}};function Qe(e){return{disableFileUploadsPref:Object(b["a"])(e,"disable_file_uploads"),featureReactThreads:Object(f["isFeatureEnabled"])(e,"feature_react_threads"),featureSonicInputs:Object(f["isFeatureEnabled"])(e,"feature_sonic_inputs"),featureSonicSnippets:Object(f["isFeatureEnabled"])(e,"feature_sonic_snippets"),featureDocs:Object(f["isFeatureEnabled"])(e,"feature_docs"),featureBoxContentPicker:Object(f["isFeatureEnabled"])(e,"feature_box_content_picker"),featureSonicCloudFilesPicker:Object(f["isFeatureEnabled"])(e,"feature_sonic_cloud_files_picker"),featureNewFileMenuTranslations:Object(f["isFeatureEnabled"])(e,"feature_new_file_menu_translations"),experimentGroup:Object(_["getGroupForUser"])(e,"plus_menu_improvements"),clogger:Object(M["a"])({state:e}),showBoxMenuItem:Object(g["f"])(e,"box_enabled")&&!Object(f["isFeatureEnabled"])(e,"feature_disable_box_plus_menu"),showDropboxMenuItem:Object(g["f"])(e,"dropbox_enabled"),showGdriveMenuItem:Object(b["a"])(e,"gdrive_enabled_team"),showOneDriveMenuItem:Object(f["isFeatureEnabled"])(e,"feature_onedrive_picker")&&Object(b["a"])(e,"onedrive_enabled_team")}}var Je=t["a"]=Object(v["connect"])(Qe,Ye)(ze)},,,function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(13);var l=a(88);var c=a.n(l);var u=a(163);var d=a(277);var p=a(119);var h=a(27);var v=a(4212);var m=function e(t,a,r,i){if(!t)throw new Error("unmountNewFileMenu must be called with a teamId parameter");var l=Object(h["d"])(t);var c=n()({onMenuItemSelected:r.onMenuItemSelected},i);Object(p["a"])(s.a.createElement(o["Provider"],{store:l},s.a.createElement(u["a"],null,s.a.createElement(d["a"],n()({shouldFade:false},i),s.a.createElement(v["a"],n()({menuProps:c},r))))),a)};var f=function e(t){c.a.unmountComponentAtNode(t)};var b={mountNewFileMenu:m,unmountNewFileMenu:f};var g=a(44);Object(g["a"])("interop.mountNewFileMenu",m)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(1);var s=a.n(i);var o=a(88);var l=a.n(o);var c=a(13);var u=a(27);var d=a(44);var p=a(26);var h=a.n(p);var v=a(6);var m=a.n(v);var f=a(7);var b=a.n(f);var g=a(8);var _=a.n(g);var y=a(9);var O=a.n(y);var k=a(2);var E=a(0);var C=a(4);var j=a(48);var w=a(258);var S=a(150);var I=a(701);var T=a(10);var A=new T["b"]("external_shared_channels");var N={featureEscAdminClient:E["b"].bool.isRequired};var P=function e(t){var a=t.featureEscAdminClient;if(!a)return null;return s.a.createElement("div",{className:"c-shared_channels_indent"},s.a.createElement("h1",null,A.t("External Sharing")))};P.displayName="SharedChannelsHeader";var R=P;var M=a(1321);var D=a(392);var x=new T["b"]("external_shared_channels");var F={searchQuery:E["b"].string.isRequired,onSearchInputChange:E["b"].func.isRequired,featureEscAdminClient:E["b"].bool.isRequired};var L={};var B=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));var r=300;a.onInputChange=a.onInputChange.bind(a);a.onSearchInputChangeDebounced=Object(k["debounce"])(function(e){a.props.onSearchInputChange(e)},r);return a}b()(t,[{key:"onInputChange",value:function e(t){var a=t.target.value||"";this.onSearchInputChangeDebounced(a)}},{key:"render",value:function e(){if(!this.props.featureEscAdminClient)return null;var t=x.t("Search organizations...");return s.a.createElement("div",null,s.a.createElement(D["a"],{className:"p-app_management_filter_search_bar",placeholder:t,icon:"search",autoFocus:false,isLoading:false,onChange:this.onInputChange,value:this.props.searchQuery,size:"small"}))}}]);return t}(i["PureComponent"]);B.displayName="SharedChannelsSearch";B.defaultProps=L;var U=B;var q=new T["b"]("external_shared_channels");var G={orgsCount:E["b"].number.isRequired,searchQuery:E["b"].string.isRequired,onSearchInputChange:E["b"].func.isRequired,featureEscAdminClient:E["b"].bool.isRequired};function W(e){if(!e.featureEscAdminClient)return null;var t=e.orgsCount,a=e.searchQuery,r=e.onSearchInputChange;var n=q.t("Organizations");t>0&&(n=q.t("{orgsCount, plural, =1 {# Organization} other {# Organizations}}",{orgsCount:t}));return s.a.createElement("div",{className:"p-shared_channels padding_top_100"},s.a.createElement(M["a"],{"data-qa":"shared-channels-action-bar",title:n,actions:[s.a.createElement(U,{searchQuery:a,onSearchInputChange:r,featureEscAdminClient:true})]}))}W.displayName="SharedChannelsActionBar";var H=W;var V=a(920);var K=a(1785);var z=new T["b"]("external_shared_channels");function Y(e){var t=e.featureEscAdminClient;if(!t)return null;return s.a.createElement("div",{className:"p-shared_channels__empty_table"},s.a.createElement("div",{className:"p-shared_channels__title_container"},s.a.createElement("div",{className:"p-shared_channels__empty_table_title"},z.rt("No Results")),s.a.createElement("div",{className:"p-shared_channels__empty_table_subtitle"},z.rt("Slack couldn't find any organizations matching your search."))))}Y.displayName="EmptySearchResults";var Q=Y;var J=a(4112);var Z=a.n(J);var X=a(4113);var $=a.n(X);var ee=a(4095);var te=a.n(ee);var ae=a(4114);var re=a.n(ae);var ne=a(50);var ie=new T["b"]("external_shared_channels");var se={workspaces:E["b"].array.isRequired,featureEscAdminClient:E["b"].bool.isRequired};var oe=function e(t,a){return Z()($()(function(e){var t=e.workspace_name;return t}),re()(1,a))(t)};var le=function e(t,a){if(!a)return"";var r=t.length;var n=oe(t);if(r>50)return ie.t("{rem, plural, =1 {{spaces}} other {{spaces} and # others...}}",{spaces:te()(", ")(n),rem:r-51});if(3===r)return ie.t("{secondWorkSpace} and {thirdWorkspace}",{secondWorkSpace:n[0],thirdWorkspace:n[1]});if(2===r)return n[0];return te()(", ")(n)};var ce=function e(t,a,r){if(!r)return null;var n=ie.t("{len, plural, =1 {# other} other {# others...}}",{len:t-1});return s.a.createElement(ne["c"],{tip:a},s.a.createElement("span",{className:"sk_black p-shared_channels__table_tooltip"},n))};ce.displayName="renderWorkspaces";var ue=function e(t){var a=t.workspaces,r=t.featureEscAdminClient;if(!r)return null;var n=a.length;var i=le(a,r);return s.a.createElement("div",null,s.a.createElement("span",{className:"sk_black"},a[0].workspace_name),n>=2&&ie.rt("<span> {ampSym} </span>",{ampSym:"&"}),n>=2&&ce(n,i,r))};ue.displayName="SharedChannelTableWorkspaces";var de=ue;var pe=a(22);var he=a(28);var ve=a(66);var me=new T["b"]("external_shared_channels");var fe={teamName:E["b"].string.isRequired,featureEscAdminClient:E["b"].bool.isRequired,onStopSharing:E["b"].func.isRequired};var be=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.renderMenu=a.renderMenu.bind(a);return a}b()(t,[{key:"renderMenu",value:function e(t){var a=this;var r=this.props,i=r.onStopSharing,o=r.featureEscAdminClient,l=r.teamName;if(!o)return null;return s.a.createElement(ve["f"],n()({},t,{width:"auto",ref:function e(t){a.menuRef=t}}),s.a.createElement(ve["b"],{danger:true,label:me.rt("Stop sharing with {teamName}",{teamName:l}),onSelected:function e(){return i()}}))}},{key:"render",value:function e(){if(!this.props.featureEscAdminClient)return null;return s.a.createElement(ve["e"],{renderMenu:this.renderMenu,position:"bottom-right"},s.a.createElement(he["c"],null,s.a.createElement(pe["b"],{type:"ellipsis"})))}}]);return t}(i["PureComponent"]);be.displayName="SharedChannelsRowMenu";var ge=be;var _e=new T["b"]("external_shared_channels");var ye={featureEscAdminClient:E["b"].bool.isRequired,isLoading:E["b"].bool,onSortChange:E["b"].func,organizations:E["b"].arrayOf(E["b"].object).isRequired,onStopSharing:E["b"].func,onRequestNextPage:E["b"].func};var Oe={isLoading:false,onStopSharing:k["noop"],onSortChange:k["noop"],onRequestNextPage:k["noop"]};var ke="asc";var Ee="desc";var Ce="caret_down";var je="caret_up";var we={};we[ke]=Ce;we[Ee]=je;var Se=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={headers:[],rowData:[],sortBy:"",sortDir:""};a.tableViewControllerRef=null;a.headerItemOnClick=a.headerItemOnClick.bind(a);return a}b()(t,[{key:"componentDidMount",value:function e(){this.rebuildHeaders()}},{key:"componentWillReceiveProps",value:function e(t){var a=t.organizations;if(a&&a.length){var r={rowData:this.formatData(a)};this.setState(function(){return r})}}},{key:"rebuildHeaders",value:function e(){var t={headers:this.buildHeaders()};this.setState(function(){return t})}},{key:"buildHeaders",value:function e(){var t=this;var a=[{id:"header_organization",value:"Organization",className:"p-shared_channels__table__org",sortable:true},{id:"header_channels",value:"Channels",className:"p-shared_channels__table__channels"},{id:"header_workspaces",value:"Workspaces",className:"p-shared_channels__table__workspaces"},{id:"header_row_menu",value:"",className:"p-shared_channels__table__row_menu",noHover:true,sortable:false}].map(function(e){if(!e.sortable)return e;return n()({},e,{iconType:t.determineSortState(e.id,e),onClick:t.headerItemOnClick})});return a}},{key:"determineSortState",value:function e(t,a){var r=this.state,n=r.sortBy,i=r.sortDir;var s=a&&a.defaultSortType||ke;var o=we[s];if(!n||n!==t)return o;var l=void 0;l=i?i===ke?Ce:je:we[s];return l}},{key:"headerItemOnClick",value:function e(t){var a=this;var r=this.state,n=r.sortBy,i=r.sortDir;var s=this.props.onSortChange;var o=n;var l=i;if(t.id===n)l=i&&i!==ke?ke:Ee;else{o=t.id;l=t.defaultSortType?t.defaultSortType===ke?Ee:ke:Ee}var c=this.state.rowData;c.sort(function(e,t){var a=l===Ee?1:-1;if(e.items[0].value>t.items[0].value)return-1*a;if(e.items[0].value<t.items[0].value)return 1*a;return 0});var u={rowData:c,sortBy:o,sortDir:l};this.setState(function(){return u},function(){s&&s(l);a.rebuildHeaders()})}},{key:"formatChannelValue",value:function e(t){if(!this.props.featureEscAdminClient)return"";var a=t.public_channel_count||0;var r=t.private_channel_count||0;var n=a+r;var i=void 0;i=r?_e.t("{totalCount, plural, =1 {# channel} other {# channels}} ({privateCount} private)",{totalCount:n,privateCount:r}):_e.t("{totalCount, plural, =1 {# channel} other {# channels}}",{totalCount:n});return s.a.createElement("span",null,i)}},{key:"formatData",value:function e(t){var a=this;if(!t)return[];var r=this.props.onStopSharing;var n=t.map(function(e){var t="row_"+e.team_id;return{id:t,items:[{value:s.a.createElement(K["a"],{dimension:34,team:{name:e.team_name,domain:e.team_domain,icon:e.team_icon}}),className:"p-shared_channels__table__org",id:t+"_team_name"},{value:a.formatChannelValue(e),className:"p-shared_channels__table__channels",id:t+"_channels"},{value:s.a.createElement(de,{workspaces:e.connected_workspaces,featureEscAdminClient:true}),className:"p-shared_channels__table__workspaces",id:t+"_workspaces"},{value:s.a.createElement(ge,{teamName:e.team_name,onStopSharing:function t(){return r(e)},featureEscAdminClient:true}),className:"p-shared_channels__table__row_menu",id:t+"_row_menu"}]}});return n}},{key:"render",value:function e(){var t=this;var a=this.state,r=a.headers,n=a.paddingBottom,i=a.rowData;var o=this.props,l=o.isLoading,c=o.organizations,u=o.featureEscAdminClient;if(!l&&!c.length)return s.a.createElement(Q,{featureEscAdminClient:u});return s.a.createElement("div",{style:{paddingBottom:n},className:"c-shared_channels_table_indent"},s.a.createElement(V["a"],{autoHeight:true,headers:r,isLoading:l,newQuery:l,onRequestNextPage:this.props.onRequestNextPage,rows:i,ref:function e(a){t.tableViewControllerRef=a}}))}}]);return t}(i["PureComponent"]);Se.displayName="SharedChannelsTableView";Se.defaultProps=Oe;var Ie=Se;var Te=a(84);var Ae=a(135);var Ne=a(126);var Pe=a(54);var Re=new T["b"]("external_shared_channels");var Me={featureEscAdminClient:E["b"].bool.isRequired,onStopSharing:E["b"].func.isRequired,orgItem:E["b"].shape({team_id:E["b"].string.isRequired,team_name:E["b"].string.isRequired,private_channel_count:E["b"].number.isRequired,public_channel_count:E["b"].number.isRequired}).isRequired};var De={hasClickedStopSharing:false,isButtonDisabled:true,isCheckboxChecked:false};var xe=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state=n()({},De);a.onStopSharing=a.onStopSharing.bind(a);a.handleCheckboxChange=a.handleCheckboxChange.bind(a);return a}b()(t,[{key:"onStopSharing",value:function e(){this.setState(function(){return n()({},De,{hasClickedStopSharing:true})});this.props.onStopSharing()}},{key:"handleCheckboxChange",value:function e(t){var a=!!t.target.checked;this.setState(function(){return{isCheckboxChecked:a,isButtonDisabled:!a}})}},{key:"render",value:function e(){if(!this.props.featureEscAdminClient)return null;var t=this.state,a=t.hasClickedStopSharing,r=t.isButtonDisabled,n=t.isCheckboxChecked;var i=this.props.orgItem;var o=i.team_name;var l=Re.rt("Stop sharing with {teamName}",{teamName:o});var c=Re.t("Stop sharing with {teamName}",{teamName:o});var u=Re.rt("Yes, stop sharing with {teamName}",{teamName:o});return s.a.createElement(Te["a"],{goButtonType:"danger",cancelText:Re.t("Cancel"),goButtonIsDisabled:r,goButtonIsPending:a,goButtonText:Re.t("Stop Sharing"),goOnEnterPressed:!r,onGo:this.onStopSharing,title:l,titleAria:c,useSlackScrollbar:false},s.a.createElement(Ae["a"],{level:"error",type:"inline"},Re.rt("<strong>This can\u2019t be undone.</strong> Please double check the info below.")),s.a.createElement("p",{"data-qa":"stop_sharing_description"},Re.rt("This will disconnect all the channels you currently share with {teamName}. Members of the two organizations will no longer be able to direct message each other.",{teamName:o})),s.a.createElement("p",{className:"margin_bottom_25"},Re.t("You\u2019re disconnecting...")),s.a.createElement("ul",null,i.public_channel_count>0&&s.a.createElement("li",{"data-qa":"public_channel_count"},Re.t("{count, plural, =1 {# public channel} other {# public channels}}",{count:i.public_channel_count})),i.private_channel_count>0&&s.a.createElement("li",{"data-qa":"private_channel_count"},Re.t("{count, plural, =1 {# private channel} other {# private channels}}",{count:i.private_channel_count})),s.a.createElement("li",null,Re.t("All direct and group messages"))),s.a.createElement("p",null,Re.t("Note: each organization will keep separate copies of these channels, and can continue using their copies.")),s.a.createElement(Pe["a"],{text:u,type:"inline",cursor:"pointer"},s.a.createElement(Ne["a"],{"data-qa":"stop_sharing_confirm",checked:n,onChange:this.handleCheckboxChange})))}}]);return t}(s.a.Component);xe.displayName="StopSharingDialog";var Fe=xe;var Le=a(157);var Be=new T["b"]("external_shared_channels");var Ue={featureEscAdminClient:E["b"].bool.isRequired,disconnectionStatus:E["b"].oneOf(["error","success"]).isRequired,teamName:E["b"].string,onCloseComplete:E["b"].func};var qe={teamName:"[teamName]",onCloseComplete:k["noop"]};var Ge=function e(t){var a=t.featureEscAdminClient,r=t.disconnectionStatus,n=t.teamName,i=t.onCloseComplete;if(!a||!r)return null;var o="";"error"===r&&(o=s.a.createElement("span",null,Be.t("Something\u2019s gone wrong. Mind trying again in a moment?")));"success"===r&&(o=s.a.createElement("span",null,Be.rt("Disconnecting all channels and conversations with {teamName}",{teamName:s.a.createElement("span",{className:"p-shared_channels__stopped_sharing_toast"},n)})));return s.a.createElement(Le["b"],{position:"bottom-right",onCloseComplete:i,shouldAutoFade:true},o)};Ge.displayName="StopSharingToast";Ge.defaultProps=qe;var We=Ge;var He=a(3078);var Ve=a(1575);var Ke=new T["b"]("external_shared_channels");function ze(e){var t=e.orgName,a=e.featureEscAdminClient;if(!a)return null;var r=s.a.createElement(Ve["a"],{href:"https://get.slack.help/hc/en-us/articles/115004151203-create-shared-channels"},Ke.t("Learn more about shared channels"));return s.a.createElement("div",{className:"p-shared_channels__empty_table"},s.a.createElement("div",{className:"p-shared_channels__title_container"},s.a.createElement("div",{className:"p-shared_channels__empty_table_title"},Ke.rt("{orgName} isn't sharing any channels",{orgName:t})),s.a.createElement("div",{className:"p-shared_channels__empty_table_subtitle"},Ke.rt("When your organization shares a channel with another organization, you\u2019ll see that connection here. {learnMoreUrl}",{learnMoreUrl:r}))))}ze.displayName="NoSharedChannels";var Ye=ze;var Qe={featureEscAdminClient:E["b"].bool.isRequired,searchConnectedOrgs:E["b"].func.isRequired,disconnectSharedTeam:E["b"].func.isRequired,openModal:E["b"].func.isRequired,closeModal:E["b"].func.isRequired,enqueueToast:E["b"].func.isRequired,orgName:E["b"].string.isRequired};var Je={};var Ze="asc";var Xe=function(e){O()(t,e);function t(e){m()(this,t);var a=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={orgsCount:0,searchQuery:"",sortDir:Ze,organizations:[],isLoading:false,nextPageId:"",initCount:null};a._isMounted=false;a.handleSearchInputChange=a.handleSearchInputChange.bind(a);a.handleRequestNextPage=a.handleRequestNextPage.bind(a);a.handleTableSortChange=a.handleTableSortChange.bind(a);a.openStopSharingDialog=a.openStopSharingDialog.bind(a);a.stopSharingWorkspace=a.stopSharingWorkspace.bind(a);return a}b()(t,[{key:"componentDidMount",value:function e(){if(!this.props.featureEscAdminClient)return;this._isMounted=true;this.fetchSharedChannels()}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}},{key:"handleSearchInputChange",value:function e(t){var a={searchQuery:t.trim(),nextPageId:""};this.setState(function(){return a},this.fetchSharedChannels)}},{key:"handleTableSortChange",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;this.setState(function(){return{sortDir:t}},this.fetchSharedChannels)}},{key:"fetchSharedChannels",value:function e(){var t=this;this.setState(function(){return{isLoading:true}},function(){var e=t.state,a=e.searchQuery,r=e.nextPageId,n=e.sortDir,i=e.initCount;var s={searchQuery:a,nextPageId:r,sortDir:n};t.props.searchConnectedOrgs(s).then(function(e){var a=e.organizations,r=e.nextCursor;if(t._isMounted){var n=a.length;t.setState(function(){return{organizations:a,nextPageId:r,orgsCount:n,isLoading:false,initCount:null===i?n:i}})}}).catch(function(e){console.warn("An error occured: ",e)})})}},{key:"handleRequestNextPage",value:function e(){var t=this;if(!this.state.nextPageId)return;this.setState(function(){return{isLoading:true}},function(){var e=t.state,a=e.searchQuery,r=e.nextPageId,n=e.sortDir;var i={searchQuery:a,nextPageId:r,sortDir:n};t.props.searchConnectedOrgs(i).then(function(e){var a=e.organizations,r=e.nextCursor;t._isMounted&&t.setState(function(e){return{organizations:[].concat(h()(e.organizations),h()(a)),orgsCount:e.organizations.length+a.length,nextPageId:r}})}).catch(function(e){console.warn("An error occured: ",e)})})}},{key:"removeOrg",value:function e(t){var a=this.state.organizations.filter(function(e){return e.team_id!==t});this._isMounted&&this.setState(function(){return{organizations:a,orgsCount:a.length}})}},{key:"showSharingStatusToast",value:function e(t,a,r){this.props.enqueueToast({element:s.a.createElement(We,{featureEscAdminClient:t,disconnectionStatus:r,teamName:a,onCloseComplete:k["noop"]})})}},{key:"stopSharingWorkspace",value:function e(t,a){var r=this;var n=this.props.featureEscAdminClient;this.props.disconnectSharedTeam({teamId:t}).then(function(){r.props.closeModal();r.removeOrg(t);r.showSharingStatusToast(n,a,"success")}).catch(function(){console.log("error while stop sharing");r.showSharingStatusToast(n,a,"error")})}},{key:"openStopSharingDialog",value:function e(t){var a=this;var r=this.props.featureEscAdminClient;var n=function e(){a.stopSharingWorkspace(t.team_id,t.team_name)};this.props.openModal({element:s.a.createElement(Fe,{featureEscAdminClient:r,onStopSharing:n,orgItem:t,openModal:this.props.openModal})})}},{key:"renderTableView",value:function e(){var t=this.props,a=t.featureEscAdminClient,r=t.orgName;var n=this.state,o=n.orgsCount,l=n.searchQuery,c=n.initCount,u=n.organizations,d=n.isLoading;if(0===c)return s.a.createElement(Ye,{orgName:r,featureEscAdminClient:a});return s.a.createElement(i["Fragment"],null,s.a.createElement(H,{featureEscAdminClient:a,onSearchInputChange:this.handleSearchInputChange,orgsCount:o,searchQuery:l}),s.a.createElement(Ie,{isLoading:d,onStopSharing:this.openStopSharingDialog,featureEscAdminClient:a,onRequestNextPage:this.handleRequestNextPage,onSortChange:this.handleTableSortChange,organizations:u}),s.a.createElement(I["a"],null))}},{key:"render",value:function e(){var t=this.props.featureEscAdminClient;if(!t)return null;return s.a.createElement("div",{className:"p-shared_channels padding_top_200"},s.a.createElement(R,{featureEscAdminClient:t}),this.renderTableView())}}]);return t}(i["PureComponent"]);Xe.displayName="SharedChannels";Xe.defaultProps=Je;var $e=function e(t){return{featureEscAdminClient:Object(C["isFeatureEnabled"])(t,"feature_esc_admin_client")&&Object(C["isFeatureEnabled"])(t,"feature_shared_channels_enterprise")}};var et={openModal:j["openModal"],closeModal:j["closeModal"],enqueueToast:S["enqueueToast"],searchConnectedOrgs:w["p"],disconnectSharedTeam:w["h"]};var tt=Object(c["connect"])($e,et)(Xe);Object(d["a"])("interop.sharedChannels",{render:function e(t,a,r){if(!t)throw new Error("sharedChannels render must be called with a teamId parameter");var i=Object(u["d"])(t);var o=r.org.enterprise.name;l.a.render(s.a.createElement(c["Provider"],{store:i},s.a.createElement(tt,n()({},r,{orgName:o}))),a)},stop:function e(t){l.a.unmountComponentAtNode(t)}})},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(13);var s=a(119);var o=a(27);var l=a(98);var c=a(308);var u=a(1415);var d=a(122);var p=a(930);var h=a(1094);var v=a(3);var m=a.n(v);var f=a(2);var b=a.n(f);var g=a(12);var _=a(71);var y=a(547);var O=a(796);var k=a(787);var E=a(34);var C=a(132);var j=a(19);var w=a(11);var S=a(217);var I=a(326);var T=a(188);var A=a(24);var N=a(35);var P=a(4);var R=a(686);var M=a(73);var D=a(316);var x=a(209);var F=a(45);var L=a(1157);var B=a(31);var U=a(781);var q=a(15);var G=a(38);var W=a(684);var H=a(691);var V=Object(q["b"])("Ensure channels with drafts exist in our model",function(e,t){var a=t();if(!Object(P["isFeatureEnabled"])(a,"feature_channel_sidebar_drafts_section"))return;var r=Object(g["a"])({state:a,label:"DRAFTS"});var n=Object(G["a"])()?Object(W["getAllDraftChannelIds"])(a):Object(H["e"])();if(Object(f["isEmpty"])(n)){r.info("There are no channels with drafts");return}r.info("Ensuring we have channel objects for all channels with drafts");n.forEach(function(e){Object(j["d"])(a,e)})});V.propTypes=null;var K=V;var z=a(23);var Y=a(228);var Q=a(181);var J=a(531);var Z=a(386);var X=a(245);var $=a(26);var ee=a.n($);var te=a(182);var ae=a(14);var re=Object(ae["b"])(function(e){var t=Object(N["d"])(e);if(!Object(B["isPaidTeam"])(t))return"alphabetical";return Object(E["f"])(e,"channel_sort")});var ne=re;var ie=a(93);var se=a(17);var oe=a(10);var le=a(799);var ce=["drafts","starred","sharedChannels","channels","orgWideChannels","ims","apps"];var ue={drafts:{channelsOrdered:[],hasHeading:true},starred:{channelsOrdered:[],hasHeading:true},sharedChannels:{channelsOrdered:[],hasHeading:true},channels:{channelsOrdered:[],hasHeading:true},orgWideChannels:{channelsOrdered:[],hasHeading:true},ims:{channelsOrdered:[],hasHeading:true},apps:{channelsOrdered:[],hasHeading:true}};var de=["defaultMentions","default","sharedMentions","shared","privateMentions","private","slackbot","you","imsMentions","ims"];var pe=b.a.invert(de);var he={default:de.map(function(){return[]}),muted:de.map(function(){return[]}),suggested:de.map(function(){return[]})};var ve=function e(t){return t&&t.has_draft};var me=function e(t){var a=t.channel,r=t.members,n=t.isCurrentlySelected,i=t.isMuted,s=t.shouldHideReadChannels,o=t.shouldHideReadChannelsUnlessStarred,l=t.featureReactMessages,c=t.hasDraft,u=t.teamId,d=t.isSuggested,p=t.featureChannelSidebarDraftsSection;var h=Object(g["a"])({teamId:u,label:"CHANNEL-SIDEBAR"});if(Object(w["isFromAnotherTeam"])(a))return false;if(Object(w["isUnknownOrNonExistent"])(a))return false;if(n)return true;if(Object(w["isArchived"])(a))return false;if(Object(w["isImAndIsMemberDeleted"])(a,r[Object(w["getMemberIdFromIm"])(a)]))return false;if(!Object(w["isMemberOfChannel"])(a)&&!d)return false;if((Object(w["isIm"])(a)||Object(w["isMpim"])(a))&&!Object(w["isOpen"])(a)&&Object(w["isRead"])(a)){if(!p||!c)return false;h.info(a.id+" is closed, but we're displaying it because it has a draft")}if(Object(w["isIm"])(a)){var v=[Object(w["getMemberIdFromIm"])(a)];v.length||Object(g["a"])({teamId:u}).error("SIDEBAR-SECTIONS","IM "+a.id+" is missing its associated user");if(!Object(se["haveMembersForIds"])({members:r,dangerouslyOverrideCreateSelectorSanityCheck:true},v)){h.info("("+a.id+") No member for "+v);return false}}if(Object(w["isMpim"])(a)){var m=Object(w["getMemberIdsFromMpim"])(a);m&&m.length||Object(g["a"])({teamId:u}).error("SIDEBAR-SECTIONS","MPIM "+a.id+" is missing its associated members");if(!Object(se["haveMembersForIds"])({members:r,teamId:u,dangerouslyOverrideCreateSelectorSanityCheck:true},m))return false}if(o&&Object(w["isStarred"])(a))return true;if(c)return true;if(i&&Object(w["shouldShowWithoutUnreads"])(a)&&!l)return true;if((o||s)&&Object(w["isRead"])(a))return false;return true};var fe=true;var be=[];var ge=void 0;var _e=function e(t){var a=t.channel,r=t.isApp,n=t.isAppSpaceEnabled,i=t.shouldSeparateSharedChannels,s=t.shouldSeparateOrgWideChannels,l=t.draftChannelIds,c=t.featureChannelSidebarDraftsSection,u=t.currentlySelectedId,d=t.teamId;var p=Object(o["c"])(d);if(c&&(b.a.includes(l,a.id)||ve(a))&&Object(ie["p"])(p,a.id)){u!==a.id||b.a.includes(be,a.id)||fe||(ge=a.id);ge&&u!==ge&&(ge=void 0);if(a.id!==ge)return"drafts"}if(Object(w["isStarred"])(a))return"starred";if(Object(w["isSharedPublicOrPrivateChannel"])(a)&&i)return"sharedChannels";if(Object(w["isOrgGlobalSharedPublicOrPrivateChannel"])(a)&&!Object(w["isPrivateChannel"])(a)&&s)return"orgWideChannels";if(r&&n)return"apps";if(Object(w["isIm"])(a)||Object(w["isMpim"])(a))return"ims";return"channels"};var ye=function e(t){var a=t.channel,r=t.currentUserId,n=t.shouldSeparatePrivateChannels,i=t.shouldSeparateSharedChannels,s=t.shouldBumpMention;if(Object(w["isSlackbot"])(a))return pe.slackbot;if(Object(w["isUserId"])(a,r))return pe.you;if(Object(w["isIm"])(a)||Object(w["isMpim"])(a))return s?pe.imsMentions:pe.ims;if(n&&Object(w["isPrivateChannel"])(a))return s?pe.privateMentions:pe.private;if(i&&Object(w["isSharedPublicOrPrivateChannel"])(a))return s?pe.sharedMentions:pe.shared;return s?pe.defaultMentions:pe.default};var Oe=function e(t){var a=t.channel,r=t.members;var n=Object(w["getMemberIdFromIm"])(a);var i=r&&r[n]||null;return Object(se["isAppOrBot"])(i)};var ke=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.channels,r=t.currentlySelectedId,n=t.mutedChannels,i=t.members,s=t.sidebarBehaviorPref,o=t.featureReactMessages,l=t.draftChannelIds,c=t.teamId,u=t.suggestedChannelIds,d=t.featureTinyspeck,p=t.featureChannelSidebarDraftsSection,h=t.logger;var v="hide_read_channels"===s;var m="hide_read_channels_unless_starred"===s;var f=[];var g=false;var _=false;var y=false;var O=Object.keys(a);var k=[];Object(G["a"])()&&(k=[].concat(ee()(l)));for(var E=0;E<O.length;E+=1){var C=a[O[E]];var j=-1!==l.indexOf(C.id);if(!Object(G["a"])()){j=ve(C);j&&k.push(C.id)}var S=me({channel:C,members:i,isCurrentlySelected:r===C.id,isMuted:!!n[C.id],shouldHideReadChannels:v,shouldHideReadChannelsUnlessStarred:m,featureReactMessages:o,hasDraft:j,teamId:c,isSuggested:-1!==u.indexOf(C.id),featureChannelSidebarDraftsSection:p});S&&f.push(C);g||(g=Object(w["isSharedPublicOrPrivateChannel"])(C)&&(Object(w["isMemberOfChannel"])(C)||r===C.id));_||(_=Object(w["isOrgGlobalSharedPublicOrPrivateChannel"])(C)&&!Object(w["isPrivateChannel"])(C));y||(y=Object(w["isStarred"])(C))}if(d&&!b.a.isEmpty(k)){var I=f.map(function(e){return e.id});var T=b.a.every(k,function(e){return b.a.includes(I,e)});T?h.info("All channels with drafts are visible: "+k+" "):h.info("The following channels with drafts are not visible: "+b.a.difference(k,I))}return{channelsVisible:f,belongsToOrPreviewingAnySharedChannels:g,belongsToAnyOrgChannels:_,hasAStarredChannel:y}};var Ee=Object(le["a"])(ke,2);var Ce=function e(t){var a=t.channelsSorted,r=t.belongsToOrPreviewingAnySharedChannels,n=t.members,i=t.mutedChannels,s=t.draftChannelIds,o=t.suggestedChannelIds,l=t.currentUserId,c=t.currentlySelectedId,u=t.teamId,d=t.sortPref,p=t.isAppSpaceEnabled,h=t.shouldSeparateSharedChannels,v=t.shouldSeparateOrgWideChannels,f=t.shouldSeparatePrivateChannels,g=t.featureChannelSidebarDraftsSection,_=t.featureReactMessages,y=t.featureSilenceAppDMs;var O={};var k=ce.concat();k.forEach(function(e){O[e]=m()({},ue[e]);O[e].channelsOrdered=b.a.cloneDeep(he)});var E=[];var C=[];a.forEach(function(e){Object(w["isIm"])(e)&&E.push(Object(w["getMemberIdFromIm"])(e));var t=_e({channel:e,isApp:Oe({channel:e,members:n}),isAppSpaceEnabled:p,shouldSeparateSharedChannels:h,shouldSeparateOrgWideChannels:v,draftChannelIds:s,featureChannelSidebarDraftsSection:g,currentlySelectedId:c,teamId:u});var a=!!i[e.id];var r=Object(w["getBadgeCountWithMuted"])(e,a,_,y,Oe({channel:e,members:n}));var m=r>0;var b=ye({channel:e,currentUserId:l,shouldSeparatePrivateChannels:f,shouldSeparateSharedChannels:h,shouldBumpMention:"priority"===d&&m});var k=void 0;k=-1!==o.indexOf(e.id)?"suggested":a?"muted":"default";var j=O[t].channelsOrdered[k][b];j.push(e.id);Object(G["a"])()||ve(e)&&C.push(e.id)});be=[].concat(ee()(s),C);fe&&(fe=false);var j=b.a.mapValues(O,function(e){return m()({},e,{channelsOrdered:b.a.flatten([].concat(ee()(e.channelsOrdered.default),ee()(e.channelsOrdered.muted),ee()(e.channelsOrdered.suggested)))})});if(!g||j.drafts.channelsOrdered.length<1){delete j.drafts;b.a.remove(k,function(e){return"drafts"===e})}if(j.starred.channelsOrdered.length<1){delete j.starred;b.a.remove(k,function(e){return"starred"===e})}if(!h||!r){delete j.sharedChannels;b.a.remove(k,function(e){return"sharedChannels"===e})}if(!v||j.orgWideChannels.channelsOrdered.length<1){delete j.orgWideChannels;b.a.remove(k,function(e){return"orgWideChannels"===e})}if(!p){delete j.apps;b.a.remove(k,function(e){return"apps"===e})}return{sidebarSectionsOrdered:k,sidebarSections:j,idsNeedingPresenceSubscription:E}};var je=Object(le["a"])(Ce,3);var we=function e(t){return Object(E["f"])(t,"sidebar_behavior")};var Se=function e(t){return Object(E["f"])(t,"separate_private_channels")};var Ie=function e(t){return!Object(P["isFeatureEnabled"])(t,"feature_channel_is_remove_create_shared_channel")&&Object(E["f"])(t,"separate_shared_channels")};var Te=function e(t){return Object(E["f"])(t,"ent_org_wide_channels_sidebar")};var Ae=function e(t){return Object(P["isFeatureEnabled"])(t,"feature_channel_sidebar_drafts_section")};var Ne=function e(t){var a=Object(g["a"])({state:t,label:"CHANNEL-SIDEBAR"});var r=Object(z["c"])(t);var n=Object(j["b"])(t);var i=Object(S["getMutedChannels"])(t);var s=Object(A["a"])(t);var o=Object(W["getAllDraftChannelIds"])(t);var l=Object(w["getSuggestedChannels"])(t);var c=Object(M["a"])(t);var u=Object(P["getCurrentUserId"])(t);var d=we(t);var p=Se(t);var h=Ie(t);var v=Te(t);var m=Object(te["isAppSpaceEnabled"])(t);var f=Object(P["shouldUseReactMessages"])(t);var b=Object(P["shouldSilenceAppDMs"])(t);var _=Ae(t);var y=Object(P["isFeatureEnabled"])(t,"feature_tinyspeck");var O=Ee({channels:n,currentlySelectedId:c,mutedChannels:i,members:s,sidebarBehaviorPref:d,featureReactMessages:f,draftChannelIds:o,teamId:r,suggestedChannelIds:l,featureTinyspeck:y,featureChannelSidebarDraftsSection:_,logger:a}),k=O.channelsVisible,E=O.belongsToOrPreviewingAnySharedChannels;var C={};k.forEach(function(e){if(!e||!e.id)return;C[e.id]=Object(w["getDisplayNameForChannel"])(t,e,{publicChannelIncludeHashSign:false,imIncludeAtSign:false})});var I=function e(t,a){return Object(oe["p"])(t&&C[t.id],a&&C[a.id])};var T=function e(t,a){var r=t.priority||-1;var n=a.priority||-1;if(r===n)return I(t,a);return n-r};var N=function e(t){if("priority"===t)return T;return I};var R=ne(t);var D=k.sort(N(R));return je({channelsSorted:D,belongsToOrPreviewingAnySharedChannels:E,members:s,mutedChannels:i,draftChannelIds:o,suggestedChannelIds:l,currentUserId:u,currentlySelectedId:c,teamId:r,sortPref:R,isAppSpaceEnabled:m,shouldSeparateSharedChannels:h,shouldSeparateOrgWideChannels:v,shouldSeparatePrivateChannels:p,featureChannelSidebarDraftsSection:_,featureReactMessages:f,featureSilenceAppDMs:b})};var Pe=Ne;var Re=a(207);var Me=12;var De=18;var xe=26;var Fe=52;var Le={id:null,type:"topPadding",height:Me};var Be={id:null,type:"spacer",height:De};var Ue={id:"Vquick_switcher",type:"quickswitcherButton",height:Fe};var qe={id:"Vnavigation_bar",type:"navigationBar",height:Fe};var Ge={id:"Vall_unreads",type:"allUnreadsLink",height:xe};var We={id:"Vall_threads",type:"allThreadsLink",height:xe};var He={id:"Vsearch",type:"searchLink",height:xe};var Ve={id:null,type:"sectionHeading",name:"",height:xe};var Ke={id:null,type:"folderHeading",name:"",height:xe};var ze={id:null,type:"channel",index:null,height:xe};var Ye={id:null,type:"addAChannelLink",dim:false,height:xe};var Qe={id:null,type:"invitePeopleLink",dim:false,height:xe};var Je={id:null,type:"installAppsLink",dim:false,height:xe};var Ze={id:null,type:"gdrivePromptLink",dim:false,height:xe};var Xe={id:null,type:"appSuggestionLinks",dim:false,height:xe};var $e={id:null,type:"upgradeSlackLink",height:xe};var et={id:null,type:"emptyState",index:null,height:xe};var tt=Object(Re["createSelector"])([function(e){return e&&e.hasQuickswitcherButton},function(e){return e&&e.hasAllUnreadsLink},function(e){return e&&e.hasSearchLink},function(e){return e&&e.hasAddAChannelLink},function(e){return e&&e.hasInvitePeopleLink},function(e){return e&&e.hasGdrivePromptLink},function(e){return e&&e.appSuggestionsCount},function(e){return e&&e.hasUpgradeSlackLink},function(e){return e&&e.sidebarFiltersIsEnabled},function(e){return e&&e.sidebarSectionsOrdered},function(e){return e&&e.sidebarSections},function(e){return e&&e.sidebarFoldersIsEnabled},function(e){return e&&e.sidebarFolders},function(e){return e&&e.pages},function(e){return e&&e.featurePages},function(e){return e&&e.featureReactAllUnreads},function(e){return e&&e.featureNavigateHistory}],function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;var o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];var l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[];var u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:{};var d=arguments.length>11&&void 0!==arguments[11]&&arguments[11];var p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:[];var h=arguments.length>13&&void 0!==arguments[13]?arguments[13]:[];var v=arguments.length>14&&void 0!==arguments[14]&&arguments[14];var b=arguments.length>15&&void 0!==arguments[15]&&arguments[15];var g=arguments.length>16&&void 0!==arguments[16]&&arguments[16];var _=[];var y={};var O=0;e&&g?_.push(m()({},qe,{scrollTop:O,scrollBottom:O+=qe.height})):e?_.push(m()({},Ue,{scrollTop:O,scrollBottom:O+=Ue.height})):_.push(m()({},Le,{scrollTop:O,scrollBottom:O+=Le.height}));t&&(v&&b?_.push({id:"Punreads",type:"pageLink",height:xe,scrollTop:O,scrollBottom:O+=xe}):_.push(m()({},Ge,{scrollTop:O,scrollBottom:O+=Ge.height})));_.push(m()({},We,{scrollTop:O,scrollBottom:O+=We.height}));a&&_.push(m()({},He,{scrollTop:O,scrollBottom:O+=He.height}));v&&h.filter(function(e){return-1===["Punreads"].indexOf(e.id)}).forEach(function(e){_.push({id:e.id,type:"pageLink",height:xe,scrollTop:O,scrollBottom:O+=xe})});var k=0;d&&p.forEach(function(e){"folderHeading"!==Object(f["last"])(_).type&&_.push(m()({},Be,{scrollTop:O,scrollBottom:O+=Be.height}));_.push(m()({},Ke,{id:e.name,name:e.name}));e.channelIds.forEach(function(t){var a=false;c.forEach(function(e){var r=u[e]||{};var n=r.channelsOrdered||[];a=a||n.filter(function(e){return e===t}).length>0});if(!a)return;if(!e.isCollapsed){_.push(m()({},ze,{id:t,index:k,scrollTop:O,scrollBottom:O+=ze.height,sectionName:e.name}));k+=1}y[t]=true})});c.forEach(function(e){var t=u[e]||{};var a=t.channelsOrdered||[];("sectionHeading"!==Object(f["last"])(_).type||a.length>0)&&_.push(m()({},Be,{scrollTop:O,scrollBottom:O+=Be.height}));t.hasHeading&&_.push(m()({},Ve,{name:e,scrollTop:O,scrollBottom:O+=Ve.height,sectionName:e}));l&&t.hasHeading&&0===a.length&&_.push(m()({},et,{name:e,scrollTop:O,scrollBottom:O+=et.height}));t.channelsOrdered.forEach(function(t){if(y[t])return;_.push(m()({},ze,{id:t,index:k,scrollTop:O,scrollBottom:O+=ze.height,sectionName:e}));k+=1});if("channels"===e&&r){_.push(m()({},Be,{scrollTop:O,scrollBottom:O+=Be.height}));_.push(m()({},Ye,{dim:true,height:Ye.height,scrollTop:O,scrollBottom:O+=Ye.height}))}if("ims"===e&&n){_.push(m()({},Be,{scrollTop:O,scrollBottom:O+=Be.height}));_.push(m()({},Qe,{dim:"dim"===n,height:Qe.height,scrollTop:O,scrollBottom:O+=Qe.height}))}if("apps"===e){_.push(m()({},Be,{scrollTop:O,scrollBottom:O+=Be.height}));i&&_.push(m()({},Ze,{height:Ze.height,scrollTop:O,scrollBottom:O+=Ze.height}));if(Number.isFinite(s)&&s>0){var o=s*Xe.height;_.push(m()({},Xe,{height:o,scrollTop:O,scrollBottom:O+=o}))}_.push(m()({},Je,{height:Je.height,scrollTop:O,scrollBottom:O+=Je.height}))}});if(o){_.push(m()({},Be,{scrollTop:O,scrollBottom:O+=Be.height}));_.push(m()({},$e,{height:$e.height,scrollTop:O,scrollBottom:O+=$e.height}));_.push(m()({},et,{scrollTop:O,scrollBottom:O+=et.height}))}_.push(m()({},Be,{scrollTop:O,scrollBottom:O+=Be.height}));_.push(m()({},Be,{scrollTop:O,scrollBottom:O+=Be.height}));return{rows:_,rowsMap:Object(f["keyBy"])(_,"id"),rowIds:Object(f["map"])(_,"id")}});var at=tt;var rt=a(30);var nt=new oe["b"]("channel_sidebar");var it=rt["isDev"]?"A0BDLPR2L":"A6NL8MJ6Q";var st=function e(t){return Object(f["get"])(t,"channelSidebar.gdrivePrompt.displayGdriveInstallPrompt")};var ot=function e(t){return Object(f["get"])(t,"channelSidebar.gdrivePrompt.displayGdriveConnectPrompt")};var lt=function e(t){var a="Google Drive";var r=st(t);var n=Object(N["d"])(t);return{link:Object(B["getTeamUrl"])(n,"/apps/"+it),text:r?nt.t("Install {name}",{name:a}):nt.t("Connect {name}",{name:a}),label:nt.t("Dismiss {name} suggestion",{name:a}),dismissKey:r?"gdrive_install_prompt_dismissed":"gdrive_connect_prompt_dismissed",clogUiElement:r?"install_gdrive_prompt":"connect_gdrive_prompt"}};var ct=function e(t){var a=st(t);var r=ot(t);return a||r};var ut=a(3933);var dt=new oe["b"]("channel_sidebar");var pt=function e(t,a){var r=Object(O["getAppSuggestionPrompt"])(t,a);return Object(ut["c"])(r)};var ht=function e(t,a){var r=Object(O["getAppSuggestionPrompt"])(t,a);return Object(ut["a"])(r)};var vt=function e(t,a){var r=Object(O["getAppSuggestionPrompt"])(t,a);var n=Object(ut["b"])(r);var i=Object(ut["d"])(r);var s=pt(t,a);var o=Object(N["d"])(t);if(!n||!i)return{};var l="";"ocal"!==a||s||(l=Object(B["getTeamUrl"])(o,"/interop/ocalapp/install"));return{appId:n,href:l||Object(B["getTeamUrl"])(o,"/apps/"+n),text:s?dt.t("Install {name}",{name:i}):dt.t("Connect {name}",{name:i}),label:dt.t("Dismiss {name} suggestion",{name:i}),dismissKey:s?a+"_install_prompt_dismissed":a+"_connect_prompt_dismissed",clogUiElement:s?"app_install_prompt":"app_connect_prompt"}};var mt=function e(t){return Object(O["getEnabledAppSuggestionPromptsKeyList"])(t).length};var ft=a(42);function bt(e){var t=Object(N["d"])(e);var a=Object(A["b"])(e);var r=Object(se["getMemberEmail"])(a);var n=Object(P["isFeatureEnabled"])(e,"feature_upgrade_slack_translations");var i=Object(ft["isAppStoreBuild"])();var s=Object(B["isOnFreePlan"])(t);var o=Object(se["isAdmin"])(a);var l=!/@(gmail|yahoo|aol)\.com$/.exec(r)&&!/\.edu$/.exec(r);return n&&!i&&s&&l&&o&&"treatment"===Object(d["getGroupForUser"])(e,"lc_sidebar_upgrade_cta")}var gt=a(6);var _t=a.n(gt);var yt=a(7);var Ot=a.n(yt);var kt=a(8);var Et=a.n(kt);var Ct=a(9);var jt=a.n(Ct);var wt=a(0);var St=a(16);var It=a.n(St);var Tt=a(49);var At=a(208);var Nt=a(39);var Pt=a(1449);var Rt=a(376);var Mt=a(407);var Dt=a(183);var xt=a(431);var Ft=a(28);var Lt=a(186);var Bt=a(1791);var Ut=a(2414);var qt=a(706);var Gt=a(782);var Wt=a(1574);var Ht=a(586);var Vt=a(120);var Kt=Object(q["b"])("Dismiss suggested channel from channels list",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.channelId;e(Object(Vt["d"])({ids:[r]}));var n=Object(E["d"])(t()).split(",");var i=n.indexOf(r);if(-1!==i){n.splice(i,1);e(Object(C["c"])({pref:"newxp_suggested_channels",value:n.join(",")}))}});Kt.propTypes={channelId:wt["b"].string.isRequired};var zt=Kt;var Yt=a(1359);var Qt=a(865);var Jt=Object(q["b"])("Updates the muted_channels pref from the current list of muted channels",function(e,t){var a=t();var r=Object.keys(Object(S["getMutedChannels"])(a)).join(",");return e(Object(C["c"])({pref:"muted_channels",value:r,reason:"update-muted-channels"}))});Jt.propTypes=null;var Zt=Object(q["b"])("Mute a channel given a channelId",function(e,t,a){var r=t();var n=Object(g["a"])({state:r,label:"CHANNEL-MUTE"});var i=Object(j["d"])(r,a);if(!i)return Promise.reject(new Error("Channel does not exist"));if(Object(w["isIm"])(i)||Object(w["isMpim"])(i))return Promise.reject(new Error("Channel is an IM or MPIM"));if(Object(S["isChannelMutedById"])(r,a))return Promise.reject(new Error("Channel is already muted"));n.info("Muting channel "+a);e(Object(S["setMutedChannel"])({id:a,muted:true}));return e(Jt()).catch(function(){n.error("CHANNEL-MUTE","Muting channel "+a+" failed, could not set pref");e(Object(S["setMutedChannel"])({id:a,muted:false}))})});Zt.propTypes=wt["b"].string.isRequired;var Xt=Object(q["b"])("Unmute a channel given a channelId",function(e,t,a){var r=t();var n=Object(g["a"])({state:r,label:"CHANNEL-MUTE"});var i=Object(j["d"])(r,a);if(!i)return Promise.reject(new Error("Channel does not exist"));if(Object(w["isIm"])(i)||Object(w["isMpim"])(i))return Promise.reject(new Error("Channel is an IM or MPIM"));if(!Object(S["isChannelMutedById"])(r,a))return Promise.reject(new Error("Channel is already unmuted"));n.info("Unmuting channel "+a);e(Object(S["setMutedChannel"])({id:a,muted:false}));return e(Jt()).catch(function(){n.error("CHANNEL-MUTE","Unmuting channel "+a+" failed, could not set pref");e(Object(S["setMutedChannel"])({id:a,muted:true}))})});Xt.propTypes=wt["b"].string.isRequired;var $t=a(452);var ea=a(309);var ta=a(442);var aa=a(22);var ra=a(373);var na=a(451);var ia=a(1312);var sa=a(383);var oa=a(50);var la=a(391);var ca={children:wt["b"].node.isRequired,getTemplate:wt["b"].func.isRequired,overrideDefaultMenu:wt["b"].bool};var ua={overrideDefaultMenu:false};var da=function(e){jt()(t,e);function t(e){_t()(this,t);var a=Et()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onDesktopContextMenu=a.onDesktopContextMenu.bind(a);return a}Ot()(t,[{key:"onDesktopContextMenu",value:function e(){var t=this.props,a=t.getTemplate,r=t.overrideDefaultMenu;var n=a().map(function(e){return m()({},e,{id:Object(la["a"])()})});Object(ft["showContextMenu"])(n,r)}},{key:"render",value:function e(){var t=this;if(!Object(G["a"])()){Object(g["b"])().error("Context menus are only supported in Sonic");return this.props.children}if(ft["isDesktop"]){var a=n.a.Children.map(this.props.children,function(e){return n.a.cloneElement(e,{onContextMenu:t.onDesktopContextMenu})});return a[0]}return this.props.children}}]);return t}(r["PureComponent"]);da.displayName="ContextMenuTrigger";var pa=da;da.defaultProps=ua;var ha=a(1348);var va=a(861);var ma=a(317);var fa="CHANNEL-SIDEBAR";var ba={LOG_LABEL:fa};var ga=new oe["b"]("channel_sidebar");var _a={isChannel:wt["b"].bool,isPendingShared:wt["b"].bool,isShared:wt["b"].bool,isOrgShared:wt["b"].bool,type:wt["b"].oneOf(["channel","private","im","mpim"]),isSlackbot:wt["b"].bool,isYou:wt["b"].bool,isMuted:wt["b"].bool,isSuggested:wt["b"].bool,hasUnreads:wt["b"].bool,hasDraft:wt["b"].bool,isArchived:wt["b"].bool,isFrozen:wt["b"].bool,sharedTeamIds:wt["b"].arrayOf(wt["b"].string),displayName:wt["b"].string,teamDomain:wt["b"].string.isRequired,isSelected:wt["b"].bool,unreadCount:wt["b"].number,badgeCount:wt["b"].number,userCount:wt["b"].number,userId:wt["b"].string,userActive:wt["b"].bool,id:wt["b"].string.isRequired,priority:wt["b"].number,selectItem:wt["b"].func,closeIM:wt["b"].func,dismissSuggestedChannel:wt["b"].func,isTyping:wt["b"].bool,isStarred:wt["b"].bool,members:wt["b"].arrayOf(wt["b"].string),memberPresences:wt["b"].arrayOf(wt["b"].string),onContextMenu:wt["b"].func,featureSidebarContextMenu:wt["b"].bool.isRequired,index:wt["b"].number.isRequired,sidebarFoldersIsEnabled:wt["b"].bool,onDragStart:wt["b"].func,onDragEnd:wt["b"].func,onDrop:wt["b"].func,onDragOver:wt["b"].func,featureSonicPresenceManager:wt["b"].bool,clogger:wt["b"].object.isRequired,canPostInChannel:wt["b"].bool,featureAnnounceOnly:wt["b"].bool,featureChannelSidebarDraftsSection:wt["b"].bool,maybeLeaveChannel:wt["b"].func,muteChannelById:wt["b"].func,unmuteChannelById:wt["b"].func,updateStar:wt["b"].func};var ya={isChannel:true,isSelected:false,isPendingShared:false,isShared:false,isOrgShared:false,type:"channel",isSlackbot:false,isYou:false,isMuted:false,isSuggested:false,hasUnreads:false,hasDraft:false,isArchived:false,isFrozen:false,sharedTeamIds:null,displayName:"",badgeCount:0,userCount:0,userId:void 0,userActive:true,priority:null,selectItem:b.a.noop,closeIM:b.a.noop,dismissSuggestedChannel:b.a.noop,isTyping:false,isStarred:false,members:null,memberPresences:null,onContextMenu:b.a.noop,sidebarFoldersIsEnabled:false,onDragStart:b.a.noop,onDragEnd:b.a.noop,onDrop:b.a.noop,onDragOver:b.a.noop,featureSonicPresenceManager:false,clogger:{},canPostInChannel:true,featureAnnounceOnly:false,featureChannelSidebarDraftsSection:false,maybeLeaveChannel:b.a.noop,muteChannelById:b.a.noop,unmuteChannelById:b.a.noop,updateStar:b.a.noop};var Oa=Object(g["b"])();var ka=function(e){jt()(t,e);function t(e){_t()(this,t);var a=Et()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.closeIM=a.closeIM.bind(a);a.closeSuggestedChannel=a.closeSuggestedChannel.bind(a);a.handleMouseEnter=a.handleMouseEnter.bind(a);a.getContextMenuTemplate=a.getContextMenuTemplate.bind(a);a.state={isTruncated:false};return a}Ot()(t,[{key:"handleMouseEnter",value:function e(t){t.target.offsetWidth<t.target.scrollWidth&&this.setState(function(){return{isTruncated:true}})}},{key:"onClick",value:function e(t){t.preventDefault();Oa.action(fa,"Selected "+this.props.id);this.props.selectItem(this.props.id);this.clogClick()}},{key:"closeIM",value:function e(t){t.preventDefault();t.stopPropagation();Oa.action(fa,"Closed "+this.props.id);this.props.closeIM({channelId:this.props.id})}},{key:"closeSuggestedChannel",value:function e(t){var a=this.props,r=a.id,n=a.index,i=a.isSelected,s=a.clogger,o=a.dismissSuggestedChannel;t.preventDefault();t.stopPropagation();Oa.action(fa,"Closed suggested channel "+r);o({channelId:r});s.track("SIDEBAR_ITEM_SUGGESTED_CLOSE",{item_type:r[0],item_id:r,index:n,is_selected:i})}},{key:"clogClick",value:function e(){var t=this.props,a=t.id,r=t.index,n=t.isMuted,i=t.isSuggested,s=t.isStarred,o=t.hasUnreads,l=t.isArchived,c=t.isFrozen,u=t.isSelected,d=t.badgeCount,p=t.clogger;p.track("SIDEBAR_ITEM_CLICK",{item_type:a[0],item_id:a,index:r,is_muted:n,is_suggested:i,is_starred:s,has_unreads:o,is_archived:l,is_frozen:c,is_selected:u,badge_count:d})}},{key:"shouldShowPresence",value:function e(){var t=this.props,a=t.type,r=t.isSlackbot,n=t.isSelected,i=t.hasDraft,s=t.isTyping,o=t.isArchived,l=t.isFrozen;if("im"!==a)return false;if(r)return false;if(i&&!n)return false;if(s&&!n)return false;if(o&&!l)return false;return true}},{key:"shouldShowClose",value:function e(){var t=this.props,a=t.type,r=t.hasUnreads,n=t.isSuggested,i=t.hasDraft,s=t.featureChannelSidebarDraftsSection;if("im"!==a&&"mpim"!==a&&!n)return false;if(r)return false;if(s&&i)return false;return true}},{key:"shouldShowDraftIcon",value:function e(){var t=this.props,a=t.hasDraft,r=t.isSelected,n=t.canPostInChannel;return a&&n&&!r}},{key:"shouldShowExternalSharedIcon",value:function e(){var t=this.props,a=t.isShared,r=t.type;return a&&!("im"===r||"mpim"===r)}},{key:"shouldShowOrgSharedIcon",value:function e(){var t=this.props,a=t.isOrgShared,r=t.type;return a&&!("im"===r||"mpim"===r)}},{key:"buildName",value:function e(){var t=this.props,a=t.displayName,r=t.type;if("im"===r)return this.buildImName();if("mpim"===r)return this.buildMpimName();return this.renderName(a)}},{key:"buildImName",value:function e(){var t=this.props,a=t.userId,r=t.isYou;return this.renderName(n.a.createElement(n.a.Fragment,null,n.a.createElement(na["a"],{memberId:a}),n.a.createElement(sa["a"],{id:a}),r&&n.a.createElement("span",{className:"p-channel_sidebar__you_label"},ga.t("(you)"))))}},{key:"buildMpimName",value:function e(){var t=this.props,a=t.type,r=t.members,i=t.memberPresences;if("mpim"!==a||!r||!i)return null;var s=b.a.flatMap(r,function(e,t){return[n.a.createElement(sa["a"],{id:e,key:e}),t<r.length-1?", ":null]});return this.renderName(s)}},{key:"buildAriaLabel",value:function e(){var t=this.props,a=t.type,r=t.displayName,n=t.isShared,i=t.isOrgShared,s=t.isYou,o=t.isMuted,l=t.isSuggested,c=t.hasUnreads,u=t.hasDraft,d=t.isArchived,p=t.unreadCount,h=t.badgeCount,v=t.isSelected,m=t.userActive,f=t.isTyping,b=t.canPostInChannel,g=t.featureAnnounceOnly;return Object(ha["a"])({type:a,displayName:r,isShared:n,isOrgShared:i,isYou:s,isMuted:o,isSuggested:l,hasUnreads:c,hasDraft:u,isArchived:d,unreadCount:p,badgeCount:h,isSelected:v,userActive:m,isTyping:f,canPost:b,featureAnnounceOnly:g})}},{key:"getContextMenuTemplate",value:function e(){var t=new oe["b"]("menu");var a=this.props,r=a.id,n=a.displayName,i=a.isChannel,s=a.isStarred,o=a.isMuted,l=a.canMute,c=a.canLeave,u=a.maybeLeaveChannel,d=a.updateStar,p=a.muteChannelById,h=a.unmuteChannelById;var v=void 0;var m=void 0;var f=void 0;var b=void 0;var g=void 0;if(i){v=t.t("Star Channel");m=t.t("Unstar Channel");f=t.t("Mute {channel}",{channel:"#"+n});b=t.t("Unmute {channel}",{channel:"#"+n});g=t.t("Leave {channel}",{channel:"#"+n})}else{v=t.t("Star Conversation");m=t.t("Unstar Conversation");f=t.t("Mute Conversation");b=t.t("Unmute Conversation");g=t.t("Leave Conversation")}var _=[{label:s?m:v,click:function e(){return d(!s,{channel:r})}}];c&&_.push({label:g,click:function e(){return u({channelId:r})}});l&&_.push({label:o?b:f,click:function e(){return o?h(r):p(r)}});return _}},{key:"renderName",value:function e(t){var a=this.props,r=a.type,i=a.userActive;var s=this.state.isTruncated;return n.a.createElement(oa["c"],{delay:oa["a"],position:"top-left",tip:t,tipClassName:It()({hidden:!s})},n.a.createElement("span",{className:It()("p-channel_sidebar__name",{"p-channel_sidebar__name--away":"im"===r&&!i}),"data-qa":"channel_sidebar_name",onMouseEnter:this.handleMouseEnter},t))}},{key:"renderPresence",value:function e(t){return n.a.createElement(ra["a"],{memberId:t,enablePresenceSubscriptions:this.props.featureSonicPresenceManager||Object(Tt["a"])(),inline:false})}},{key:"render",value:function e(){var t=this.props,a=t.id,r=t.type,i=t.isChannel,s=t.isPendingShared,o=t.isSlackbot,l=t.isYou,c=t.isMuted,u=t.isSuggested,d=t.hasUnreads,p=t.isArchived,h=t.isFrozen,v=t.badgeCount,f=t.isSelected,b=t.userCount,g=t.displayName,_=t.userId,y=t.priority,O=t.isTyping,k=t.isStarred,E=t.sharedTeamIds,C=t.onContextMenu,j=t.teamDomain,S=t.featureSidebarContextMenu;var I=It()("p-channel_sidebar__channel",{"p-channel_sidebar__channel--private":"private"===r,"p-channel_sidebar__channel--shared":this.shouldShowExternalSharedIcon(),"p-channel_sidebar__channel--org-shared":this.shouldShowOrgSharedIcon(),"p-channel_sidebar__channel--mpim":"mpim"===r,"p-channel_sidebar__channel--im":"im"===r,"p-channel_sidebar__channel--im-slackbot":o,"p-channel_sidebar__channel--im-you":l,"p-channel_sidebar__channel--selected":f,"p-channel_sidebar__channel--muted":c,"p-channel_sidebar__channel--suggested":u,"p-channel_sidebar__channel--unread":d&&!p,"p-channel_sidebar__channel--draft":this.shouldShowDraftIcon(),"p-channel_sidebar__channel--archived":p&&(!h||i),"p-channel_sidebar__channel--typing":O&&!f});var T=n.a.createElement(va["a"],{count:v,className:"p-channel_sidebar__badge"});var A={"data-user-count":b};var N=this.shouldShowPresence()&&this.renderPresence(_);var P=this.buildName();var R=this.shouldShowExternalSharedIcon()&&n.a.createElement(ia["a"],{tooltip:true,sharedTeamIds:E,className:"p-channel_sidebar__icon",pending:s});var M=n.a.createElement(ma["a"],m()({href:Object(w["constructAbsoluteChannelPermalink"])({channelId:a,teamDomain:j}),className:I,onClick:this.onClick,onContextMenu:C},A,{"data-qa-channel-sidebar-channel":true,"data-qa-channel-sidebar-channel-is-selected":f,"data-qa-channel-sidebar-channel-id":a,"data-qa-channel-sidebar-channel-type":r,"data-qa-channel-sidebar-is-starred":k,"data-qa-channel-sidebar-is-you":l,"data-qa-channel-sidebar-priority":y,"aria-label":this.buildAriaLabel(),draggable:this.props.sidebarFoldersIsEnabled,"data-drag-type":"channel","data-drag-id":a,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver}),N,P,T,R);if(this.shouldShowClose()){var D=ga.t("Close Direct Message with {name}",{name:g});u&&(D=ga.t("Dismiss suggested channel"));var x=n.a.createElement(Ft["c"],{onClick:u?this.closeSuggestedChannel:this.closeIM,className:"p-channel_sidebar__close","aria-label":D},n.a.createElement(aa["a"],{type:"times-circle-medium"}));M=n.a.createElement("div",{className:"p-channel_sidebar__close_container"},M,x)}if(S)return n.a.createElement(pa,{getTemplate:this.getContextMenuTemplate},M);return M}}]);return t}(ta["a"]);ka.displayName="Channel";ka.propTypes=_a;ka.defaultProps=ya;var Ea=ka;var Ca={closeIM:l["g"],dismissSuggestedChannel:zt,maybeLeaveChannel:Yt["a"],muteChannelById:Zt,unmuteChannelById:Xt,updateStar:Qt["a"]};var ja=function e(t,a){var r=a.id;var n=Object(j["d"])(t,r);if(!n)return{id:r,featureSidebarContextMenu:Object(P["isFeatureEnabled"])(t,"feature_sidebar_context_menu")};var i=Object(w["isMpim"])(n)?Math.min(Math.max(b.a.get(n,"members.length",1)-1,2),9):0;var s=Object(w["getChannelType"])(n);var o="im"===s&&Object(E["f"])(t,"show_typing")&&Object($t["getTyperIdsInChannel"])(t,r).length>0;var l="im"!==s||"active"===Object(ea["getPresenceByMemberId"])(t,Object(w["getMemberIdFromIm"])(n));var c=Object(P["getCurrentUserId"])(t);var u="mpim"===s&&Object(w["getMemberIdsFromMpim"])(n)&&b.a.filter(Object(w["getMemberIdsFromMpim"])(n),function(e){return e!==c});var d="mpim"===s&&u&&b.a.map(u,function(e){return Object(ea["getPresenceByMemberId"])(t,e)});var p=!Object(w["isMpim"])(n)&&!Object(w["isIm"])(n)||Object(w["isPrivateChannel"])(n);var h=!Object(w["isMpim"])(n)&&!Object(w["isIm"])(n);var v=Object(w["isMemberOfChannel"])(n)||Object(w["isPrivateChannel"])(n);var m=Object(w["getDisplayNameForChannel"])(t,n,{publicChannelIncludeHashSign:false,imIncludeAtSign:false});var f=Object(N["d"])(t).domain;return{isSelected:Object(M["a"])(t)===r,isPendingShared:Object(w["isPendingExternallySharedChannel"])(n),isShared:Object(w["isExternallySharedChannel"])(n),isOrgShared:Object(w["isOrgShared"])(n),isSlackbot:Object(w["isSlackbot"])(n),isYou:Object(w["isYou"])(c,n),isMuted:Object(S["isChannelMutedById"])(t,r),isSuggested:!Object(w["isMemberOfChannel"])(n)&&Object(w["isSuggestedChannel"])(t,n),hasUnreads:!!Object(w["getUnreadCount"])(n),hasDraft:Object(w["getHasDraft"])(t,r),isArchived:Object(w["isArchived"])(n),isFrozen:Object(P["isFeatureEnabled"])(t,"feature_esc_disconnect_v2_client")&&Object(w["isFrozen"])(n),sharedTeamIds:Object(w["deprecatedGetMaybePendingSharedTeamIds"])(t,n),displayName:m,unreadCount:Object(w["getUnreadCount"])(n),badgeCount:Object(j["c"])(t,n),userCount:i,userId:Object(w["getMemberIdFromIm"])(n)||n.user_id,userActive:l,type:s,id:r,isTyping:o,isStarred:Object(w["isStarred"])(n),canPostInChannel:Object(ie["p"])(t,n.id),featureAnnounceOnly:Object(P["isFeatureEnabled"])(t,"feature_announce_only"),featureChannelSidebarDraftsSection:Object(P["isFeatureEnabled"])(t,"feature_channel_sidebar_drafts_section"),members:u||null,memberPresences:d||null,priority:n.priority,isPrivateChannel:Object(w["isPrivateChannel"])(n),isMemberOfChannel:w["isMemberOfChannel"],canMute:p,canLeave:v,isChannel:h,teamDomain:f,featureSidebarContextMenu:Object(P["isFeatureEnabled"])(t,"feature_sidebar_context_menu"),featureSonicPresenceManager:Object(P["isFeatureEnabled"])(t,"feature_sonic_presence_manager"),clogger:Object(F["a"])({state:t})}};var wa=Object(i["connect"])(ja,Ca,null,{withRef:true})(Ea);var Sa=a(1553);var Ia=a(1696);var Ta=a(81);var Aa=a(1504);var Na=a(366);var Pa=a(850);var Ra=a(1720);var Ma=new oe["b"]("channel_sidebar");var Da={coachmarkState:wt["b"].oneOf(["SHOW_BUTTON","HIDE_BUTTON","HIDE_BUTTON_PENDING"]),setJumperCoachmarkState:wt["b"].func,setUserPrefByApi:wt["b"].func,maybeShowQuickSwitcher:wt["b"].func,clogger:wt["b"].object.isRequired,isInOmniswitcherExperiment:wt["b"].bool,openFromQuickSwitcherCmd:wt["b"].func,featureNavigateHistory:wt["b"].bool};var xa={coachmarkState:void 0,setJumperCoachmarkState:f["noop"],setUserPrefByApi:f["noop"],maybeShowQuickSwitcher:f["noop"],isInOmniswitcherExperiment:false,openFromQuickSwitcherCmd:f["noop"],featureNavigateHistory:false};var Fa=function(e){jt()(t,e);function t(e){_t()(this,t);var a=Et()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.hideCoachmark=a.hideCoachmark.bind(a);a.hideButton=a.hideButton.bind(a);a.onShowContinue=a.onShowContinue.bind(a);a.onShowSkip=a.onShowSkip.bind(a);a.onHideContinue=a.onHideContinue.bind(a);a.onHideSkip=a.onHideSkip.bind(a);a.onButtonClick=a.onButtonClick.bind(a);return a}Ot()(t,[{key:"onShowContinue",value:function e(t){t.stopPropagation();this.clog("OK");this.hideCoachmark()}},{key:"onShowSkip",value:function e(t,a){t.stopPropagation();switch(a){case"SKIP":this.clog("SKIP");return this.hideButton();case"CLOSE":this.clog("CLOSE");return this.hideCoachmark();default:return null}}},{key:"onHideContinue",value:function e(t){t.stopPropagation();this.clog("OK");this.hideButton()}},{key:"onHideSkip",value:function e(t,a){t.stopPropagation();switch(a){case"SKIP":this.clog("SKIP");return this.hideCoachmark();case"CLOSE":this.clog("CLOSE");return this.hideButton();default:return null}}},{key:"onButtonClick",value:function e(){var t=this.props,a=t.clogger,r=t.isInOmniswitcherExperiment;if(r){this.props.openFromQuickSwitcherCmd({key:"button"});return}a.track("QUICKSWITCHER_ACTION",{trigger:"sidebar_btn",action:"opened",quickswitcher_session_id:Object(Ia["a"])()});Object(G["a"])()?this.props.maybeShowQuickSwitcher():Object(Ia["b"])()}},{key:"clog",value:function e(t){var a=this.props,r=a.clogger,n=a.coachmarkState;var i={SHOW_BUTTON:"SIDEBAR_JUMPER_BUTTON_SHOW",HIDE_BUTTON:"SIDEBAR_JUMPER_BUTTON_HIDE"}[n];r.track("SIDEBAR_JUMPER_COACHMARK",{contexts:{ui_context:{action:t,step:i}}})}},{key:"hideCoachmark",value:function e(){this.props.setJumperCoachmarkState(null)}},{key:"hideButton",value:function e(){this.hideCoachmark();this.props.setUserPrefByApi({pref:"show_sidebar_quickswitcher_button",value:false});this.props.setUserPrefByApi({pref:"k_key_omnibox_auto_hide_count",value:5})}},{key:"maybeRenderCoachmark",value:function e(t){var a={SHOW:{title:Ma.rt("Get around Slack faster <sparkles></sparkles>",null,function(e){var t=e.tag,a=e.key;if("sparkles"===t)return n.a.createElement(Ta["b"],{key:a,text:":sparkles:",emojiSize:Ta["a"].MEDIUM});return null}),content:Ma.rt("To jump to a channel, person, or file \u2014 or even kick off a Slack search \u2014 try using the <strong>Quick Switcher</strong>. Summon it with this button or {shortcut}.",{shortcut:Object(rt["isMac"])()?"\u2318K":"Ctrl+K",fallbackHash:"e5c4c0b492d4a5244f99eabd8b8d5bc558e93e55"}),skipLinkText:Ma.t("Hide the sidebar button"),continueButtonText:Ma.t("OK")},HIDE:{title:Ma.t("You\u2019re a pro at keyboard shortcuts"),content:Ma.rt("Looks like you\u2019ve gotten the hang of using {shortcut} to summon the Quick Switcher. If you\u2019d like, you can gain back some sidebar space by hiding the <strong>Jump to</strong> button.",{shortcut:Object(rt["isMac"])()?"\u2318K":"Ctrl+K"}),skipLinkText:Ma.t("No thanks, I like the button"),continueButtonText:Ma.t("Hide Button")}};var r={skipLinkPre:"",position:"right-bottom",shouldShow:true,hasCloseButton:false,className:"p-channel_sidebar__jumper_coachmark"};switch(this.props.coachmarkState){case"SHOW_BUTTON":this.clog("IMPRESSION");return n.a.createElement(Aa["a"],m()({},r,a.SHOW,{onContinue:this.onShowContinue,onSkip:this.onShowSkip}),t);case"HIDE_BUTTON":this.clog("IMPRESSION");return n.a.createElement(Aa["a"],m()({},r,a.HIDE,{onContinue:this.onHideContinue,onSkip:this.onHideSkip}),t);default:return t}}},{key:"render",value:function e(){var t=this.props.featureNavigateHistory;var a=It()("p-channel_sidebar__jumper",{"p-channel_sidebar__jumper--history-enabled":t});var r=n.a.createElement(Ft["c"],{type:"button",className:a,onClick:this.onButtonClick,"aria-label":Ma.t("Open the Quick Switcher to jump to a conversation.")},n.a.createElement("div",{className:"p-channel_sidebar__jumper_left"},n.a.createElement(aa["a"],{type:"filter",inherit:true,align:"baseline",className:"p-channel_sidebar__jumper_icon"}),Ma.t("Jump to...",{note:"This label should be brief. It needs to fit in a 192px wide container."})),n.a.createElement("span",{className:"p-channel_sidebar__jumper_keys"},Object(rt["isMac"])()?"\u2318K":"Ctrl+K"));return this.maybeRenderCoachmark(r)}}]);return t}(r["Component"]);Fa.displayName="QuickswitcherButton";Fa.defaultProps=xa;var La=function e(t){return{coachmarkState:Object(O["getJumperCoachmarkState"])(t),clogger:Object(F["a"])({state:t}),isInOmniswitcherExperiment:Object(Na["a"])(t),featureNavigateHistory:Object(P["isFeatureEnabled"])(t,"feature_navigate_history")}};var Ba=function e(t){return{setJumperCoachmarkState:function e(){return t(O["setJumperCoachmarkState"].apply(void 0,arguments))},setUserPrefByApi:function e(){return t(C["c"].apply(void 0,arguments))},maybeShowQuickSwitcher:function e(){return t(Sa["a"].apply(void 0,arguments))},openFromQuickSwitcherCmd:function e(){return t(Pa["f"].apply(void 0,arguments))}}};var Ua=Object(i["connect"])(La,Ba)(Fa);var qa=a(854);var Ga={iconType:wt["b"].string.isRequired,onClick:wt["b"].func.isRequired,tooltip:wt["b"].func,ariaLabel:wt["b"].string,className:wt["b"].string};var Wa={tooltip:void 0,ariaLabel:void 0,className:void 0};var Ha=function e(t){var a=t.iconType,r=t.onClick,i=t.tooltip,s=t.ariaLabel,o=t.className;var l=It()("p-channel_sidebar__history_button",o);return n.a.createElement(qa["c"],{tip:i,position:"bottom",delay:qa["a"]},n.a.createElement(Ft["c"],{className:l,onClick:r,"aria-label":s},n.a.createElement(aa["b"],{type:a,className:"p-channel_sidebar__history_button_icon",size:"inherit"})))};Ha.displayName="HistoryButton";Ha.defaultProps=Wa;var Va=Ha;var Ka=new oe["b"]("navigation");var za={featureNavigateHistory:wt["b"].bool};var Ya={featureNavigateHistory:false};var Qa=function(e){jt()(t,e);function t(e){_t()(this,t);var a=Et()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onBackClick=a.onBackClick.bind(a);a.onForwardClick=a.onForwardClick.bind(a);a.renderBackTooltip=a.renderBackTooltip.bind(a);a.renderForwardTooltip=a.renderForwardTooltip.bind(a);return a}Ot()(t,[{key:"onBackClick",value:function e(){window.history.back()}},{key:"onForwardClick",value:function e(){window.history.forward()}},{key:"renderBackTooltip",value:function e(){if(!this.props.featureNavigateHistory)return null;var t=Object(rt["isMac"])()?"\u2318[":Ka.t("Alt+Left Arrow");return n.a.createElement(r["Fragment"],null,Ka.t("Go back"),n.a.createElement("span",{className:"p-channel_sidebar__tooltip_shortcut"},t))}},{key:"renderForwardTooltip",value:function e(){if(!this.props.featureNavigateHistory)return null;var t=Object(rt["isMac"])()?"\u2318]":"Alt+Right Arrow";return n.a.createElement(r["Fragment"],null,Ka.t("Go forward"),n.a.createElement("span",{className:"p-channel_sidebar__tooltip_shortcut"},t))}},{key:"render",value:function e(){var t=this.props.featureNavigateHistory;if(!t)return null;return n.a.createElement(r["Fragment"],null,n.a.createElement(Va,{onClick:this.onBackClick,tooltip:this.renderBackTooltip,ariaLabel:Ka.t("Go back in history"),iconType:"arrow-large-left"}),n.a.createElement(Va,{onClick:this.onForwardClick,tooltip:this.renderForwardTooltip,ariaLabel:Ka.t("Go forward in history"),className:"p-channel_sidebar__history_button-right",iconType:"arrow-large-right"}))}}]);return t}(r["Component"]);Qa.displayName="History";Qa.defaultProps=Ya;var Ja=function e(t){return{featureNavigateHistory:Object(P["isFeatureEnabled"])(t,"feature_navigate_history")}};var Za=Object(i["connect"])(Ja)(Qa);var Xa=function e(){return n.a.createElement("div",{className:"p-channel_sidebar__navigation_bar"},n.a.createElement(Ua,null),n.a.createElement(Za,null))};Xa.displayName="NavigationBar";Xa.defaultProps=null;var $a=Xa;var er=a(1543);var tr=new oe["b"]("channel_sidebar");var ar={id:wt["b"].string.isRequired,label:wt["b"].string.isRequired,icon:wt["b"].string,labelUnread:wt["b"].string,hasUnreads:wt["b"].bool,badgeCount:wt["b"].number,isSelected:wt["b"].bool,selectItem:wt["b"].func,isDim:wt["b"].bool,qaLabel:wt["b"].string,forwardedRef:wt["b"].oneOfType([wt["b"].object,wt["b"].func]),disabledInSonic:wt["b"].bool};var rr={isSelected:false,labelUnread:"",hasUnreads:false,badgeCount:0,icon:void 0,selectItem:b.a.noop,isDim:false,qaLabel:"",forwardedRef:void 0,disabledInSonic:false};var nr=function(e){jt()(t,e);function t(e){_t()(this,t);var a=Et()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);a.state={};return a}Ot()(t,[{key:"onClick",value:function e(t){Object(g["b"])().action(fa,"Selected "+this.props.id);this.props.selectItem(this.props.id,t)}},{key:"render",value:function e(){var t=this.props,a=t.id,r=t.label,i=t.labelUnread,s=t.icon,o=t.hasUnreads,l=t.badgeCount,c=t.isSelected,u=t.isDim,d=t.qaLabel,p=t.disabledInSonic;var h=It()("p-channel_sidebar__link",{"p-channel_sidebar__link--all-unreads":"Vall_unreads"===a,"p-channel_sidebar__link--all-threads":"Vall_threads"===a,"p-channel_sidebar__link--search":"Vsearch"===a,"p-channel_sidebar__link--invites":"Vinvites"===a,"p-channel_sidebar__link--add-channel":"Vadd_channel"===a,"p-channel_sidebar__link--selected":c,"p-channel_sidebar__link--unread":o,"p-channel_sidebar__link--dim":u});var v=o&&i?i:r;var m=n.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name"+d},v);var f=b.a.filter([c?tr.t("selected"):null,o&&!l?tr.t("has unreads"):null,l?tr.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:l}):null],b.a.identity);var g=v+(f.length?" ("+f.join(", ")+")":"");var _=n.a.createElement(va["a"],{count:l,className:"p-channel_sidebar__badge"});var y=s&&n.a.createElement(aa["b"],{type:s,size:"inherit",className:"p-channel_sidebar__link__icon"});var O=n.a.createElement(Ft["c"],{className:h,onClick:this.onClick,"aria-label":g,"data-qa-channel-sidebar-link-id":a,ref:this.props.forwardedRef},y,m,_);if(p)return n.a.createElement(er["a"],null,O);return O}}]);return t}(r["PureComponent"]);nr.displayName="Link";nr.defaultProps=rr;var ir=n.a.forwardRef(function(e,t){return n.a.createElement(nr,m()({},e,{forwardedRef:t}))});var sr=new oe["b"]("channel_sidebar");var or="Vall_unreads";var lr=function e(t){return{id:or,label:sr.t("All Unreads"),hasUnreads:Object(P["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(T["hasUnreadChannels"])(t):Object(I["hasUnreads"])(t),isSelected:Object(M["a"])(t)===or}};var cr=Object(i["connect"])(lr,null,null,{withRef:true})(ir);var ur=cr;var dr=a(150);var pr=a(157);var hr=new oe["b"]("sonic_pilot");function vr(e){var t=e.onCloseComplete,a=e.featureSonicPlaceholderLabels;if(!Object(G["a"])())return null;if(!a)return null;return n.a.createElement(pr["b"],{shouldAutoFade:true,position:"top-right",onCloseComplete:t,icon:"hourglass"},n.a.createElement("div",null,n.a.createElement("strong",null,hr.t("Coming soon")),n.a.createElement("div",null,hr.t("This feature has not been implemented yet."))))}vr.displayName="SonicPlaceholderToast";vr.defaultProps={onCloseComplete:f["noop"],featureSonicPlaceholderLabels:false};var mr=function e(t){return{featureSonicPlaceholderLabels:Object(P["isFeatureEnabled"])(t,"feature_sonic_placeholder_labels")}};var fr=Object(i["connect"])(mr)(vr);var br=new oe["b"]("channel_sidebar");var gr="Vall_unreads";function _r(e){return{id:gr,label:br.t("All Unreads"),hasUnreads:Object(I["hasUnreads"])(e),isSelected:false}}function yr(e){return{selectItem:function t(){return e(Object(dr["enqueueToast"])({element:n.a.createElement(fr,null)}))}}}var Or=Object(i["connect"])(_r,yr,null,{withRef:true})(ir);var kr=Or;var Er=new oe["b"]("channel_sidebar");var Cr="Vall_threads";var jr=function e(t){return{id:Cr,label:Er.t("Threads"),labelUnread:Er.t("Threads"),hasUnreads:Object(P["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(T["hasUnreadThreads"])(t):Object(I["hasUnreadThreads"])(t),badgeCount:Object(P["isFeatureEnabled"])(t,"feature_incremental_unread_counts")?Object(T["getThreadsMentionCount"])(t):Object(I["getThreadsMentionCount"])(t),isSelected:Object(M["a"])(t)===Cr}};var wr=Object(i["connect"])(jr,null,null,{withRef:true})(ir);var Sr=wr;var Ir=new oe["b"]("channel_sidebar");var Tr="Vsearch";var Ar=function e(t){var a="";Object(P["isFeatureEnabled"])(t,"feature_primary_search")&&Object(J["a"])(t)&&(a=Ir.t("Search Results"));return{id:Tr,label:a,isSelected:Object(M["a"])(t)===Tr}};var Nr=Object(i["connect"])(Ar)(ir);var Pr=Nr;var Rr={label:wt["b"].string.isRequired,selectItem:wt["b"].func,isDim:wt["b"].bool,qaLabel:wt["b"].string,clogger:wt["b"].object.isRequired};var Mr={selectItem:f["noop"],isDim:false,qaLabel:""};var Dr=function(e){jt()(t,e);function t(e){_t()(this,t);var a=Et()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onItemSelect=a.onItemSelect.bind(a);return a}Ot()(t,[{key:"onItemSelect",value:function e(){var t=this.props.clogger;t.track("SIDEBAR_ITEM_CLICK",{contexts:{ui_context:{step:"ADD_CHANNEL",action:"click",ui_component:"SIDEBAR"}}});this.props.selectItem()}},{key:"render",value:function e(){var t=this.props,a=t.label,r=t.qaLabel,i=t.isDim;return n.a.createElement(ir,{key:"Vadd_channel",id:"Vadd_channel",isDim:i,qaLabel:r,label:a,selectItem:this.onItemSelect,disabledInSonic:Object(G["a"])()})}}]);return t}(n.a.Component);Dr.displayName="AddChannelLink";var xr=function e(t){return{clogger:Object(F["a"])({state:t})}};Dr.defaultProps=Mr;var Fr=Object(i["connect"])(xr)(Dr);var Lr=a(37);var Br=a.n(Lr);var Ur=a(3919);var qr={id:wt["b"].string.isRequired,views:wt["b"].shape({label:wt["b"].func.isRequired,sidebar:wt["b"].shape({icon:wt["b"].string.isRequired,isBold:wt["b"].func,badgeCount:wt["b"].func})}).isRequired,isBold:wt["b"].bool,badgeCount:wt["b"].number,isSelected:wt["b"].bool,featurePages:wt["b"].bool};var Gr={isBold:false,badgeCount:void 0,isSelected:false,featurePages:false};var Wr=function e(t){var a=t.id,r=t.views,i=t.isBold,s=t.badgeCount,o=t.featurePages,l=Br()(t,["id","views","isBold","badgeCount","featurePages"]);if(!o)return null;var c=Object(f["isFunction"])(r.label)&&r.label();var u=r.sidebar&&r.sidebar.icon;return n.a.createElement(ir,m()({},l,{id:a,label:c,icon:u,hasUnreads:i,badgeCount:s}))};Wr.displayName="PageLink";Wr.defaultProps=Gr;var Hr=function e(t,a){var r=a.id;var n=Object(Ur["a"])(r);var i=n.sidebar||{};return{id:r,views:n,isBold:Object(f["isFunction"])(i.isBold)&&i.isBold(t),badgeCount:Object(f["isFunction"])(i.badgeCount)?i.badgeCount(t):void 0,isSelected:Object(M["a"])(t)===r,featurePages:Object(P["isFeatureEnabled"])(t,"feature_pages")}};var Vr=Object(i["connect"])(Hr)(Wr);var Kr=a(95);var zr=a(128);var Yr=new oe["b"]("channel_sidebar");var Qr=function e(t){var a=t.selectItem,r=t.dim,i=t.label,s=t.qaLabel,o=t.showClose,l=t.onClickClose,c=t.featureChannelSidebarInviteExperiment;var u=n.a.createElement(ir,{key:"Vinvites",id:"Vinvites",label:i,selectItem:a,isDim:r,qaLabel:s,disabledInSonic:Object(G["a"])()});if(!o||!c)return u;var d=n.a.createElement(zr["a"],{onClick:l,className:"p-channel_sidebar__close","aria-label":Yr.t("Hide Invite People button")},n.a.createElement(aa["b"],{type:"times-circle-medium"}));return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},u,d)};Qr.displayName="InvitePeopleLink";Qr.defaultProps={selectItem:b.a.noop,dim:true,label:Yr.t("Invite people",{fallbackHash:"a937c4ac396e25f4c9a290d468e33c668ec6ff69"}),qaLabel:"",showClose:false,onClickClose:b.a.noop,featureChannelSidebarInviteExperiment:false};var Jr=Object(Kr["pure"])(Qr);var Zr=a(68);var Xr=a(1158);var $r=a(52);var en=new oe["b"]("channel_sidebar");var tn={isAppWhitelistEnabled:wt["b"].bool,isEnterprise:wt["b"].bool,installAppsString:wt["b"].string,fetchMemberCountsForTeam:wt["b"].func.isRequired,clogger:wt["b"].object.isRequired,promiseToHaveOpenWebSocket:wt["b"].func.isRequired,featureDegradedSend:wt["b"].bool,ignoreAppLinkLimits:wt["b"].bool,appLinkImpression:wt["b"].bool,setAppLinkImpressionClogged:wt["b"].func};var an={isAppWhitelistEnabled:false,isEnterprise:false,installAppsString:"",featureDegradedSend:false,ignoreAppLinkLimits:false,appLinkImpression:false,setAppLinkImpressionClogged:b.a.noop};var rn=function(e){jt()(t,e);function t(e){_t()(this,t);var a=Et()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={numBots:0,numMembers:0};a._isMounted=false;a.handleAppsBrowserClick=a.handleAppsBrowserClick.bind(a);return a}Ot()(t,[{key:"componentWillMount",value:function e(){var t=this;var a=function e(){return t.props.fetchMemberCountsForTeam().then(function(e){var a=e.bots,r=e.members;if(t._isMounted){t.setState(function(){return{numBots:a,numMembers:r}});if(!t.props.appLinkImpression&&t.willVisibleRender()){t.clogEvent("impression");t.props.setAppLinkImpressionClogged()}}})};if(!this.props.featureDegradedSend)return a();return a().catch(function(){return t.props.promiseToHaveOpenWebSocket().finally(function(){return t._isMounted&&a()})})}},{key:"componentDidMount",value:function e(){this._isMounted=true}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}},{key:"clogEvent",value:function e(t){this.props.clogger.track("APP_ADD_APPS_PROMPT",{contexts:{ui_context:{action:t,ui_element:"ADD_APPS"}}})}},{key:"handleAppsBrowserClick",value:function e(){this.clogEvent("click");var t=this.props.clogger;t.track("INSTALL_APPS_LINK_APP_BROWSER_CLICK");Object(p["a"])()}},{key:"willVisibleRender",value:function e(){var t=this.state,a=t.numBots,r=t.numMembers;var n=this.props.ignoreAppLinkLimits;if(0===r&&0===a)return false;if(this.props.isEnterprise||this.props.isAppWhitelistEnabled)return false;if((r<10||a>=3)&&!n)return false;return true}},{key:"render",value:function e(){if(!this.willVisibleRender())return null;return n.a.createElement(Ft["c"],{className:"p-channel_sidebar__link",onClick:this.handleAppsBrowserClick,"data-qa":"add_apps_link"},"+ ",this.props.installAppsString)}}]);return t}(r["Component"]);rn.displayName="InstallAppsLink";rn.defaultProps=an;var nn=function e(t){return{fetchMemberCountsForTeam:function e(){return t(Xr["b"].apply(void 0,arguments))},promiseToHaveOpenWebSocket:function e(){return t($r["promiseToHaveOpenWebSocketAction"].apply(void 0,arguments))},setAppLinkImpressionClogged:function e(){return t(O["setAppLinkImpressionClogged"].apply(void 0,arguments))}}};function sn(e){var t=en.t("Add apps",{fallbackHash:"9e4c8073cbc08b5c132909b4870f0ae21ef6c6ea"});return{isAppWhitelistEnabled:Object(Zr["a"])(e,"app_whitelist_enabled"),isEnterprise:!b.a.isEmpty(Object(N["g"])(e)),installAppsString:t,clogger:Object(F["a"])({state:e}),featureDegradedSend:Object(P["isFeatureEnabled"])(e,"feature_degraded_send"),ignoreAppLinkLimits:"expanded_conditions"===Object(d["getGroupForUser"])(e,"platform_show_add_apps_to_more_users_new_free"),appLinkImpression:Object(O["getAppLinkImpressionClogged"])(e)}}var on=Object(i["connect"])(sn,nn)(rn);var ln=a(292);var cn=a(51);var un=Object(q["b"])("Dismiss Connect/Install Google Drive link in sidebar",function(e,t,a){"string"===typeof a&&e(Object(C["c"])({pref:a,value:true}))});un.propTypes={dismissKey:wt["b"].oneOf(["gdrive_install_prompt_dismissed","gdrive_connect_prompt_dismissed"])};var dn=un;var pn={dismissGdrivePrompt:wt["b"].func,hideGdrivePrompt:wt["b"].func,dismissKey:wt["b"].string.isRequired,link:wt["b"].string.isRequired,text:wt["b"].string.isRequired,label:wt["b"].string.isRequired,clogUiElement:wt["b"].string.isRequired,isAppWhitelistEnabled:wt["b"].bool,clogger:wt["b"].object.isRequired,ignoreAppWhitelist:wt["b"].bool.isRequired};var hn={dismissGdrivePrompt:f["noop"],hideGdrivePrompt:f["noop"],isAppWhitelistEnabled:false};var vn=function(e){jt()(t,e);function t(e){_t()(this,t);var a=Et()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.handleLinkClick=a.handleLinkClick.bind(a);a.dismissLink=a.dismissLink.bind(a);a.clogEvent=a.clogEvent.bind(a);return a}Ot()(t,[{key:"componentDidMount",value:function e(){this.clogEvent("impression")}},{key:"clogEvent",value:function e(t){this.props.clogger.track("APP_SIDEBAR_PROMPTS",{contexts:{ui_context:{action:t,ui_element:this.props.clogUiElement}}})}},{key:"handleLinkClick",value:function e(){this.props.hideGdrivePrompt();this.clogEvent("click")}},{key:"dismissLink",value:function e(){this.props.hideGdrivePrompt();this.props.dismissGdrivePrompt(this.props.dismissKey);this.clogEvent("decline")}},{key:"render",value:function e(){if(this.props.isAppWhitelistEnabled&&!this.props.ignoreAppWhitelist)return null;var t=this.props,a=t.link,r=t.text,i=t.label;return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(cn["a"],{className:"p-channel_sidebar__channel p-channel_sidebar__channel--im",href:a,onClick:this.handleLinkClick},n.a.createElement("span",{className:"p-channel_sidebar__name"},"+ ",r)),n.a.createElement(Ft["c"],{onClick:this.dismissLink,className:"p-channel_sidebar__close","aria-label":i},n.a.createElement(aa["b"],{type:"times-circle-medium"})))}}]);return t}(r["PureComponent"]);vn.displayName="GdrivePromptLink";vn.defaultProps=hn;var mn=function e(t){return Object(ln["bindActionCreators"])({dismissGdrivePrompt:dn,hideGdrivePrompt:O["hideGdrivePrompt"]},t)};function fn(e){return m()({},lt(e),Object(f["get"])(e,"channelSidebar.gdrivePrompt"),{isAppWhitelistEnabled:Object(Zr["a"])(e,"app_whitelist_enabled"),ignoreAppWhitelist:"treatment"===Object(d["getGroupForUser"])(e,"platform_gdrive_in_sidebar_paid_pilot")||"variant"===Object(d["getGroupForUser"])(e,"platform_gdrive_in_sidebar_stdplus_connect"),clogger:Object(F["a"])({state:e})})}var bn=Object(i["connect"])(fn,mn)(vn);var gn=a(21);var _n={appKey:wt["b"].string.isRequired,appId:wt["b"].string.isRequired,dismissKey:wt["b"].string.isRequired,href:wt["b"].string.isRequired,text:wt["b"].string.isRequired,label:wt["b"].string.isRequired,clogUiElement:wt["b"].string.isRequired,clogger:wt["b"].object.isRequired,appSuggestionImpressions:wt["b"].object.isRequired,setUserPrefByApi:wt["b"].func,hideAppSuggestion:wt["b"].func,setAppSuggestionImpressionClogged:wt["b"].func};var yn={setUserPrefByApi:f["noop"],hideAppSuggestion:f["noop"],setAppSuggestionImpressionClogged:f["noop"]};function On(e){var t=e.appKey,a=e.appId,i=e.setUserPrefByApi,s=e.hideAppSuggestion,o=e.dismissKey,l=e.href,c=e.text,u=e.label,d=e.clogUiElement,p=e.clogger,h=e.appSuggestionImpressions,v=e.setAppSuggestionImpressionClogged;var m=Object(r["useCallback"])(function(e){p.track(gn["k"].APP_SIDEBAR_PROMPTS,{contexts:{ui_context:{action:e,ui_element:d},core:{app_id:a}}})},[a,p,d]);Object(r["useEffect"])(function(){if(!h[t]){v(t);m("impression")}},[h,v,m,t]);var f=Object(r["useCallback"])(function(){s(t);m("click")},[s,t,m]);var b=Object(r["useCallback"])(function(){s(t);i({pref:o,value:true});m("decline")},[s,i,t,o,m]);return n.a.createElement("div",{className:"p-channel_sidebar__close_container"},n.a.createElement(cn["a"],{"data-qa":"app_suggestion_prompt_cta",className:"p-channel_sidebar__channel p-channel_sidebar__channel--im",href:l,onClick:f},n.a.createElement("span",{className:"p-channel_sidebar__name"},"+ ",c)),n.a.createElement(Ft["c"],{"data-qa":"app_suggestion_prompt_dismiss",onClick:b,className:"p-channel_sidebar__close","aria-label":u},n.a.createElement(aa["b"],{type:"times-circle-medium"})))}On.displayName="AppSuggestionLink";On.defaultProps=yn;var kn=function e(t){return{setUserPrefByApi:function e(){return t(C["c"].apply(void 0,arguments))},hideAppSuggestion:function e(){return t(O["hideAppSuggestion"].apply(void 0,arguments))},setAppSuggestionImpressionClogged:function e(){return t(O["setAppSuggestionImpressionClogged"].apply(void 0,arguments))}}};var En=function e(t,a){var r=a.appKey;return m()({},vt(t,r),{clogger:Object(F["a"])({state:t}),appSuggestionImpressions:Object(O["getAppSuggestionImpressionsClogged"])(t)})};var Cn=Object(i["connect"])(En,kn)(On);var jn={appSuggestionsKeys:wt["b"].arrayOf(wt["b"].string)};var wn={appSuggestionsKeys:[]};function Sn(e){var t=e.appSuggestionsKeys;return n.a.createElement(r["Fragment"],null,t.map(function(e){return n.a.createElement(Cn,{appKey:e,key:e})}))}Sn.displayName="AppSuggestionLinks";Sn.defaultProps=wn;var In=function e(t){return{appSuggestionsKeys:Object(O["getEnabledAppSuggestionPromptsKeyList"])(t)}};var Tn=Object(i["connect"])(In)(Sn);var An=a(1327);var Nn=new oe["b"]("channel_browser_coachmark");var Pn={label:wt["b"].string.isRequired,qaLabel:wt["b"].string,iconClass:wt["b"].string,tooltip:wt["b"].node,headerAriaLabel:wt["b"].string,tooltipClassName:wt["b"].string,tooltipArrowOffset:wt["b"].number,onLabelClick:wt["b"].func,showPlus:wt["b"].bool,plusTooltip:wt["b"].node,plusAriaLabel:wt["b"].string,onPlusClick:wt["b"].func,seenChannelBrowserCoachmark:wt["b"].bool,hasRecentlySharedAChannel:wt["b"].bool,setUserPrefByApi:wt["b"].func,featureChannelIsRemoveCreateSharedChannel:wt["b"].bool};var Rn={qaLabel:"",iconClass:null,tooltip:"",headerAriaLabel:"",tooltipClassName:null,tooltipArrowOffset:void 0,onLabelClick:b.a.noop,showPlus:false,plusTooltip:null,plusAriaLabel:"",onPlusClick:b.a.noop,seenChannelBrowserCoachmark:false,hasRecentlySharedAChannel:false,setUserPrefByApi:b.a.noop,featureChannelIsRemoveCreateSharedChannel:false};var Mn=Object(g["b"])();var Dn=function(e){jt()(t,e);function t(e){_t()(this,t);var a=Et()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onLabelClick=a.onLabelClick.bind(a);a.onPlusClick=a.onPlusClick.bind(a);a.setTooltipRef=a.setTooltipRef.bind(a);a.setPlusTooltipRef=a.setPlusTooltipRef.bind(a);return a}Ot()(t,[{key:"onLabelClick",value:function e(t){t.preventDefault();Mn.action(fa,"Selected heading "+this.props.qaLabel);this.props.onLabelClick();this.tooltip&&this.tooltip.hideTip()}},{key:"onPlusClick",value:function e(t){t.preventDefault();Mn.action(fa,"Clicked plus button for "+this.props.qaLabel);this.props.onPlusClick();this.plusTooltip&&this.plusTooltip.hideTip()}},{key:"setTooltipRef",value:function e(t){this.tooltip=t}},{key:"setPlusTooltipRef",value:function e(t){this.plusTooltip=t}},{key:"renderIconMaybe",value:function e(){var t=this.props.iconClass;if(!t)return null;return n.a.createElement(aa["a"],{type:t})}},{key:"renderPlusButtonMaybe",value:function e(){var t=this.props,a=t.showPlus,r=t.plusTooltip,i=t.plusAriaLabel,s=t.qaLabel;if(!a)return null;var o=this.props.onPlusClick===this.props.onLabelClick;var l=o?"-1":void 0;var c=o?"true":void 0;var u=n.a.createElement(Ft["c"],{className:"p-channel_sidebar__section_heading_plus",onClick:this.onPlusClick,"aria-label":i,tabIndex:l,"data-qa":"channel_sidebar__plus__"+s});var d=r?n.a.createElement(oa["c"],{tip:r,position:"top",ref:this.setPlusTooltipRef,delay:oa["a"]},u):u;return n.a.createElement("div",{className:"p-channel_sidebar__section_heading_right","aria-hidden":c},d)}},{key:"renderSharedChannelsCoachmarkMaybe",value:function e(t){var a=this;var r=this.props,i=r.seenChannelBrowserCoachmark,s=r.hasRecentlySharedAChannel,o=r.qaLabel,l=r.featureChannelIsRemoveCreateSharedChannel;if("shared_channels"!==o&&!l||"channels"!==o&&l||i)return t;var c=function e(){a.props.setUserPrefByApi({pref:"seen_channel_browser_admin_coachmark",value:true})};var u=function e(){c();Object(p["b"])();Object(An["a"])()};return n.a.createElement("div",null,n.a.createElement(Aa["a"],{hasSkipButton:true,skipButtonText:Nn.t("Close"),hasSkipLink:false,hasCloseButton:false,continueButtonText:Nn.t("Show Me"),title:Nn.t("View and manage shared channels"),content:Nn.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar."),shouldShow:s,onSkip:c,onContinue:u,delay:100,position:"right"},t))}},{key:"render",value:function e(){var t=this.props,a=t.label,r=t.qaLabel,i=t.tooltip,s=t.headerAriaLabel,o=t.tooltipClassName,l=t.tooltipArrowOffset,c=t.onLabelClick;var u=void 0;var d=c!==b.a.noop;u=d?n.a.createElement(Ft["c"],{className:It()("p-channel_sidebar__section_heading_label","p-channel_sidebar__section_heading_label--clickable"),onClick:this.onLabelClick,"aria-label":s},this.renderIconMaybe()," ",a):n.a.createElement("span",{role:"heading","aria-level":"2",className:"p-channel_sidebar__section_heading_label"},this.renderIconMaybe()," ",a);var p=i?n.a.createElement(oa["c"],{tip:i,tipClassName:o,position:"top-left",tipArrowOffset:l,ref:this.setTooltipRef,delay:oa["a"]},this.renderSharedChannelsCoachmarkMaybe(u)):u;var h=d?n.a.createElement("h2",{className:"offscreen"},a):null;var v=this.props.onPlusClick!==this.props.onLabelClick;var m=v?"group":void 0;var f=v?a:void 0;return n.a.createElement("div",{className:"p-channel_sidebar__section_heading","data-qa-channel-sidebar-section-heading":r,role:m,"aria-label":f},h,p,this.renderPlusButtonMaybe())}}]);return t}(n.a.PureComponent);Dn.displayName="SectionHeading";Dn.defaultProps=Rn;var xn=function e(t){return{seenChannelBrowserCoachmark:Object(E["f"])(t,"seen_channel_browser_admin_coachmark"),hasRecentlySharedAChannel:Object(E["f"])(t,"has_recently_shared_a_channel"),featureChannelIsRemoveCreateSharedChannel:Object(P["isFeatureEnabled"])(t,"feature_channel_is_remove_create_shared_channel")}};var Fn={setUserPrefByApi:C["c"]};var Ln=Object(i["connect"])(xn,Fn)(Dn);var Bn=new oe["b"]("channel_sidebar");var Un={featureChannelSidebarDraftsSection:wt["b"].bool,setUserPrefByApi:wt["b"].func,showDraftsSectionCoachmark:wt["b"].bool};var qn={featureChannelSidebarDraftsSection:false,setUserPrefByApi:f["noop"],showDraftsSectionCoachmark:false};var Gn=function(e){jt()(t,e);function t(e){_t()(this,t);var a=Et()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.state={showCoachmark:e.showDraftsSectionCoachmark};a.markCoachmarkSeen=a.markCoachmarkSeen.bind(a);a.onShow=a.onShow.bind(a);return a}Ot()(t,[{key:"onShow",value:function e(){if(!this.state.showCoachmark)return;this.props.setUserPrefByApi({pref:"seen_drafts_section_coachmark",value:true})}},{key:"markCoachmarkSeen",value:function e(){this.setState(function(){return{showCoachmark:false}})}},{key:"render",value:function e(){var t=this.props.featureChannelSidebarDraftsSection;var a=this.state.showCoachmark;if(!t)return null;if(a)return n.a.createElement(Aa["a"],{title:Bn.t("Pick up where you left off"),content:Bn.t("Your drafts are now collected in one place, so you can jump right back whenever you're ready to hit send."),shouldShow:true,onContinue:this.markCoachmarkSeen,onShow:this.onShow,hasCloseButton:false,hasSkipLink:false},n.a.createElement("span",null,n.a.createElement(Ln,{label:Bn.t("Drafts"),qaLabel:"drafts"})));return n.a.createElement(Ln,{label:Bn.t("Drafts"),qaLabel:"drafts"})}}]);return t}(r["Component"]);Gn.displayName="DraftsHeading";Gn.defaultProps=qn;var Wn=function e(t){return{featureChannelSidebarDraftsSection:Object(P["isFeatureEnabled"])(t,"feature_channel_sidebar_drafts_section"),showDraftsSectionCoachmark:!Object(E["f"])(t,"seen_drafts_section_coachmark")}};var Hn=function e(t){return{setUserPrefByApi:function e(a){return t(Object(C["c"])(a))}}};var Vn=Object(i["connect"])(Wn,Hn)(Gn);var Kn=a(138);var zn=new oe["b"]("channel_sidebar");var Yn="plans?ui_step="+gn["z"].SIDEBAR+"&ui_element="+gn["y"].PRICING_LINK;var Qn="upgrade_button";var Jn={featureUpgradeSlackTranslations:wt["b"].bool,team:wt["b"].object.isRequired,clogger:wt["b"].object.isRequired};var Zn={featureUpgradeSlackTranslations:false};var Xn=function(e){jt()(t,e);function t(e){_t()(this,t);var a=Et()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onClick=a.onClick.bind(a);return a}Ot()(t,[{key:"onClick",value:function e(t){t.preventDefault();this.props.clogger.track(gn["k"].GROWTH_PRICING,{contexts:{ui_context:{step:gn["z"].SIDEBAR,action:gn["v"].CLICK,ui_properties:{element_type:gn["j"].LINK,element_name:Qn}}}});Object(B["openAuthenticatedUrlInBrowser"])(this.props.team,Yn)}},{key:"render",value:function e(){var t=this.props.featureUpgradeSlackTranslations;if(!t)return null;return n.a.createElement(cn["a"],{className:"p-channel_sidebar__link p-channel_sidebar__link--upgrade-slack",onClick:this.onClick,href:Yn},n.a.createElement("span",{className:"p-channel_sidebar__name"},zn.t("Upgrade")))}}]);return t}(r["PureComponent"]);Xn.displayName="UpgradeSlackLink";Xn.defaultProps=Zn;function $n(e){return{team:Object(N["d"])(e),clogger:Object(F["a"])({state:e})}}var ei=Xn;var ti=Object(i["connect"])($n)(Object(Kn["a"])("feature_upgrade_slack_translations")(Xn));var ai=new oe["b"]("channel_sidebar");var ri=function e(t){return n.a.createElement(Ln,m()({},t,{label:ai.t("Starred"),qaLabel:"starred"}))};ri.displayName="StarredHeading";var ni=Object(Kr["pure"])(ri);var ii=a(801);var si=new oe["b"]("sonic_pilot");function oi(e){var t=e.children,a=e.featureSonicPlaceholderLabels;if(!a)return t;if(Object(G["a"])())return n.a.createElement(n.a.Fragment,null,t,n.a.createElement("div",{className:"c-tooltip__sonic_placeholder","data-qa":"sonic-placeholder-text"},si.t("Coming soon")));return t}var li=function e(t){return{featureSonicPlaceholderLabels:Object(P["isFeatureEnabled"])(t,"feature_sonic_placeholder_labels")}};var ci=Object(i["connect"])(li)(oi);var ui=new oe["b"]("channel_sidebar");var di=ui.t("Create a shared channel");var pi={sharedChannelsEnabled:wt["b"].bool};var hi={sharedChannelsEnabled:false};var vi=function e(t){return{sharedChannelsEnabled:1===Object(Zr["a"])(t,"enable_shared_channels")}};var mi=function e(t){return n.a.createElement(Ln,m()({},t,{tooltip:n.a.createElement(ci,null,ui.t("Browse all shared channels")),headerAriaLabel:ui.t("Browse all shared channels"),tooltipArrowOffset:50,label:ui.t("Shared Channels"),qaLabel:"shared_channels",showPlus:t.sharedChannelsEnabled&&Object(ii["e"])(),plusTooltip:di}))};mi.displayName="SharedChannelsHeading";mi.defaultProps=hi;var fi=Object(Kr["pure"])(mi);var bi=Object(i["connect"])(vi)(fi);var gi=new oe["b"]("channel_sidebar");var _i={showPlus:wt["b"].bool,featureSonicChannelBrowser:wt["b"].bool};var yi={showPlus:true,featureSonicChannelBrowser:false};var Oi=function e(t){var a=t.featureSonicChannelBrowser?gi.t("Browse all channels"):n.a.createElement(ci,null,gi.t("Browse all channels"));return n.a.createElement(Ln,m()({},t,{label:gi.t("Channels"),qaLabel:"channels",tooltip:a,headerAriaLabel:gi.t("Browse all channels"),tooltipArrowOffset:30,showPlus:t.showPlus,plusTooltip:gi.t("Create a channel")}))};Oi.displayName="ChannelsHeading";Oi.defaultProps=yi;var ki=function e(t){return{showPlus:Object(ie["y"])(t)||Object(ie["x"])(t),featureSonicChannelBrowser:Object(P["isFeatureEnabled"])(t,"feature_sonic_channel_browser")}};var Ei=Object(i["connect"])(ki)(Oi);var Ci=a(141);var ji={name:wt["b"].string,setIsRenaming:wt["b"].func,saveFolderData:wt["b"].func,renameFolder:wt["b"].func,toggleFolderCollapse:wt["b"].func,setFolderCollapse:wt["b"].func,badgeCount:wt["b"].number,hasUnreads:wt["b"].bool,isCollapsed:wt["b"].bool,isRenaming:wt["b"].bool,onDragStart:wt["b"].func,onDragEnd:wt["b"].func,onDrop:wt["b"].func,onDragOver:wt["b"].func};var wi={name:"",setIsRenaming:b.a.noop,saveFolderData:b.a.noop,renameFolder:b.a.noop,toggleFolderCollapse:b.a.noop,setFolderCollapse:b.a.noop,badgeCount:0,hasUnreads:false,isCollapsed:false,isRenaming:false,onDragStart:b.a.noop,onDragEnd:b.a.noop,onDrop:b.a.noop,onDragOver:b.a.noop};var Si=function(e){jt()(t,e);function t(e){_t()(this,t);var a=Et()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.toggleFolderCollapse=a.toggleFolderCollapse.bind(a);a.renameFolder=a.renameFolder.bind(a);a.showRenameBox=a.showRenameBox.bind(a);a.setRenamingLabel=a.setRenamingLabel.bind(a);a.setInputRef=a.setInputRef.bind(a);a.onBlur=a.onBlur.bind(a);a.state={renamingLabel:a.props.name,hasTyped:false};return a}Ot()(t,[{key:"onBlur",value:function e(t){if(this.props.isRenaming){var a=this.props.name;var r=t.target.value;this.props.renameFolder({oldName:a,newName:r});this.props.saveFolderData()}}},{key:"setRenamingLabel",value:function e(t){var a=t.target.value;this.setState(function(){return{renamingLabel:a,hasTyped:true}})}},{key:"setInputRef",value:function e(t){if(t&&!this.state.hasTyped){t.select();t.focus()}}},{key:"showRenameBox",value:function e(){var t=this.props.name;this.props.setIsRenaming({name:t});this.setState(function(){return{renamingLabel:t,hasTyped:false}})}},{key:"toggleFolderCollapse",value:function e(t){t.altKey?this.props.setFolderCollapse({isCollapsed:!this.props.isCollapsed}):this.props.toggleFolderCollapse({name:this.props.name});this.props.saveFolderData()}},{key:"renameFolder",value:function e(t){var a=this.props.name;var r=void 0;"Enter"===t.key&&(r=t.target.value);"Escape"===t.key&&(r=this.props.name);if(void 0!==r){this.props.renameFolder({oldName:a,newName:r});this.props.saveFolderData()}}},{key:"render",value:function e(){var t=this.props.isRenaming?"":n.a.createElement(Ft["c"],{className:It()("p-channel_sidebar__folder_heading_icon",{"p-channel_sidebar__folder_heading_icon_collapsed":this.props.isCollapsed}),onClick:this.toggleFolderCollapse});var a="";var r=void 0;r=this.props.isRenaming?n.a.createElement("input",{type:"text",className:"p-channel_sidebar__folder_heading_label_rename",value:this.state.renamingLabel,onChange:this.setRenamingLabel,onKeyDown:this.renameFolder,ref:this.setInputRef,onBlur:this.onBlur}):b.a.includes(this.props.name,"<")?n.a.createElement(Ft["c"],{className:It()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":a},this.props.name):n.a.createElement(Ft["c"],{className:It()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":a},n.a.createElement(Ci["a"],{text:this.props.name,noJumbomoji:true,noHighlights:true}));var i=this.props.isCollapsed?n.a.createElement(Ft["c"],{className:"p-channel_sidebar__folder_heading_badge",onClick:this.toggleFolderCollapse},n.a.createElement(va["a"],{count:this.props.badgeCount,className:"p-channel_sidebar__badge"})):"";return n.a.createElement("div",{className:"p-channel_sidebar__folder_heading","data-qa-channel-sidebar-section-heading":"folder",draggable:true,"data-drag-type":"folder","data-drag-id":this.props.name,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver},n.a.createElement("h2",{className:"offscreen"},this.props.name),r,i,t)}}]);return t}(n.a.PureComponent);Si.displayName="FolderHeading";Si.defaultProps=wi;var Ii=function e(t,a){var r=a.name;var n=Object(k["getFolderByName"])(t,r);var i=n?b.a.map(n.channelIds,function(e){return Object(j["d"])(t,e)}):[];var s=!!n&&n.isCollapsed;var o=!!n&&n.isRenaming;var l=i.length>0?b.a.sum(b.a.map(i,function(e){return Object(j["c"])(t,e)})):0;var c=i.length>0&&!!b.a.find(i,function(e){return Object(w["isUnread"])(e)&&!Object(S["isChannelMutedById"])(t,e.id)});return{isCollapsed:s,isRenaming:o,hasUnreads:c,badgeCount:l}};var Ti={toggleFolderCollapse:k["toggleFolderCollapse"],setFolderCollapse:k["setFolderCollapse"],saveFolderData:k["saveFolderData"],renameFolder:k["renameFolder"],setIsRenaming:k["setIsRenaming"]};var Ai=Object(i["connect"])(Ii,Ti)(Si);var Ni=a(301);var Pi=new oe["b"]("channel_sidebar");var Ri={orgName:wt["b"].string.isRequired};var Mi=function e(t){return n.a.createElement(Ln,m()({},t,{tooltipClassName:"p-channel_sidebar__section_heading_tip--short",label:Pi.t("Organization Channels"),qaLabel:"org_wide_channels",tooltip:Pi.t("Shared with all workspaces at {orgName}",{orgName:t.orgName}),tooltipArrowOffset:50}))};Mi.displayName="OrgWideChannelsHeading";var Di=Object(Kr["pure"])(Mi);var xi=function e(t){var a=Object(Ni["a"])(t);return{orgName:a}};var Fi=Object(i["connect"])(xi)(Di);var Li=a(1358);var Bi=new oe["b"]("channel_sidebar");var Ui=function e(t){return n.a.createElement(Ln,{label:Bi.t("Direct Messages"),qaLabel:"ims",tooltip:Bi.t("Open a direct message"),headerAriaLabel:Bi.t("Open a direct message"),tooltipArrowOffset:50,showPlus:true,plusTooltip:Bi.t("Open a direct message"),plusAriaLabel:Bi.t("Open a direct message"),onLabelClick:function e(){return t.openDmBrowserModal()},onPlusClick:function e(){return t.openDmBrowserModal()}})};Ui.displayName="DirectMessagesHeading";Ui.defaultProps={openDmBrowserModal:f["noop"]};var qi={openDmBrowserModal:function e(){return Li["a"].apply(void 0,arguments)}};var Gi=Object(i["connect"])(null,qi)(Ui);var Wi=new oe["b"]("channel_sidebar");var Hi=function e(t){return n.a.createElement(Ln,m()({},t,{label:Wi.t("Apps"),qaLabel:"apps",tooltip:n.a.createElement(ci,null,Wi.t("Browse apps")),headerAriaLabel:Wi.t("Browse apps"),tooltipArrowOffset:16,showPlus:true,plusTooltip:n.a.createElement(ci,null,Wi.t("Browse apps")),plusAriaLabel:Wi.t("Browse apps")}))};Hi.displayName="AppsHeading";var Vi=Object(Kr["pure"])(Hi);var Ki={},zi=Ki.getLastTeamSwitchTimestamp;var Yi={},Qi=Yi.getFocusedWorkspace;var Ji=new oe["b"]("channel_sidebar");var Zi={rows:wt["b"].arrayOf(wt["b"].shape({type:wt["b"].string,scrollBottom:wt["b"].number})).isRequired,onItemSelect:wt["b"].func,onInviteClick:wt["b"].func,onBrowseChannelsClick:wt["b"].func,onBrowseSharedChannelsClick:wt["b"].func,onCreateChannelClick:wt["b"].func,onCreateSharedChannelClick:wt["b"].func,onBrowseAppsClick:wt["b"].func,onResize:wt["b"].func,onScroll:wt["b"].func,sidebarFoldersIsEnabled:wt["b"].bool,onDragStart:wt["b"].func,onDragEnd:wt["b"].func,onDrop:wt["b"].func,onDragOver:wt["b"].func,onCreateFolder:wt["b"].func,telemeter:wt["b"].object.isRequired,logger:wt["b"].object,clogger:wt["b"].object,shouldTrackTTFMP:wt["b"].bool,bootType:wt["b"].oneOf(["warm","cold"]),featureReactAllUnreads:wt["b"].bool,featureChannelSidebarInviteExperiment:wt["b"].bool,shouldUseInviteExperimentTreatment:wt["b"].bool,setHideInviteButton:wt["b"].func,teamId:wt["b"].string,featureSeeMoreChannels:wt["b"].bool};var Xi={onItemSelect:b.a.noop,onInviteClick:b.a.noop,onBrowseChannelsClick:b.a.noop,onBrowseSharedChannelsClick:b.a.noop,onCreateChannelClick:b.a.noop,onCreateSharedChannelClick:b.a.noop,onBrowseAppsClick:b.a.noop,onResize:b.a.noop,onScroll:b.a.noop,sidebarFoldersIsEnabled:false,onDragStart:b.a.noop,onDragEnd:b.a.noop,onDrop:b.a.noop,onDragOver:b.a.noop,onCreateFolder:b.a.noop,shouldTrackTTFMP:true,logger:null,clogger:null,bootType:null,featureReactAllUnreads:false,shouldUseInviteExperimentTreatment:false,featureChannelSidebarInviteExperiment:false,setHideInviteButton:b.a.noop,teamId:null,featureSeeMoreChannels:false};var $i=function(e){jt()(t,e);function t(e){_t()(this,t);var a=Et()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setScrollbarRef=a.setScrollbarRef.bind(a);a.getCurrentScrollTop=a.getCurrentScrollTop.bind(a);a.resetCurrentScrollTopMaybe=a.resetCurrentScrollTopMaybe.bind(a);a.setListRef=a.setListRef.bind(a);a.onResize=a.onResize.bind(a);a.onScroll=a.onScroll.bind(a);a.onItemClick=a.onItemClick.bind(a);a.onInviteClick=a.onInviteClick.bind(a);a.onInviteCloseClick=a.onInviteCloseClick.bind(a);a.renderRow=a.renderRow.bind(a);a.renderRowWithWrapper=a.renderRowWithWrapper.bind(a);a.currentScrollTop=0;a.height=0;return a}Ot()(t,[{key:"componentDidMount",value:function e(){var t=this;if(!b.a.get(window,"performance.timing.fetchStart"))return;var a=this.props.shouldTrackTTFMP;if(a&&Object(G["a"])()){var r=Object(o["b"])();a=Object(Wt["shouldLogAppBootMetrics"])(r.getState());a&&r.dispatch(Object(Wt["setShouldLogAppBootMetrics"])(false))}var n=Promise.resolve();Object(ft["hasDeviceStorage"])()&&Object(rt["isSSB"])()&&(n=Object(ft["getItem"])("shouldLogFirstMeaningfulPaint").then(function(e){"false"===e&&(a=false)}));(rt["isDev"]||rt["isQa"]||rt["isJsPath"])&&(a=false);var i=Object(Ht["d"])(window.desktop);var s=Object(rt["isReload"])()?"_reload":"";var l=Date.now()-(window.performance.timing.fetchStart+i);var c=Object(G["a"])()?"ttfmp_sonic_"+this.props.bootType+s:"ttfmp_legacy"+s;n.then(function(){if(a){t.shouldLogFirstMeaningfulPaint=false;Object(ft["hasDeviceStorage"])()&&Object(rt["isSSB"])()&&Object(ft["setItem"])("shouldLogFirstMeaningfulPaint","false");t.props.logger.info("PERF","First meaningful paint: "+l+"ms");t.props.telemeter.store(c,l)}});this.clogInvitePeopleButton()}},{key:"componentDidUpdate",value:function e(t){if(Object(G["a"])()){var a=Object(o["b"])();var r=a.getState();var n=Qi(r);if(Object(Wt["shouldLogTeamSwitchMetrics"])(r)&&n===this.props.teamId){var i=zi();var s=Date.now()-i;this.props.telemeter.store("team_switch_sonic",s);a.dispatch(Object(Wt["setShouldLogTeamSwitchMetrics"])(false))}}this.List&&t.rows!==this.props.rows&&this.List.recomputeRowHeights()}},{key:"onResize",value:function e(t){var a=t.height;this.resetCurrentScrollTopMaybe(a);this.height=a;this.props.onResize({height:a})}},{key:"onScroll",value:function e(t,a){var r=a.scrollTop;this.currentScrollTop=r;this.List&&this.List.Grid.handleScrollEvent({scrollTop:r});this.props.onScroll&&this.props.onScroll(r)}},{key:"onItemClick",value:function e(t,a){t.preventDefault();this.props.onItemSelect(a)}},{key:"onInviteClick",value:function e(t,a){this.props.onInviteClick(a)}},{key:"onInviteCloseClick",value:function e(){this.props.setHideInviteButton()}},{key:"setScrollbarRef",value:function e(t){this.Scrollbar=t&&t.getWrappedInstance?t.getWrappedInstance():t}},{key:"setListRef",value:function e(t){this.List=t}},{key:"getCurrentScrollTop",value:function e(){return this.currentScrollTop}},{key:"getContentHeight",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.rows;return t.length?t[t.length-1].scrollBottom:0}},{key:"clogInvitePeopleButton",value:function e(){var t=this.props,a=t.clogger,r=t.shouldUseInviteExperimentTreatment;a.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}});a.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}});if(r){a.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}});a.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}})}}},{key:"resetCurrentScrollTopMaybe",value:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.rows;t>this.getContentHeight(a)&&(this.currentScrollTop=0)}},{key:"scrollToTarget",value:function e(t){var a=this;var r=Math.max(0,Math.min(this.getContentHeight()-this.height,t));Object(qt["a"])({fromValue:this.currentScrollTop,toValue:r,duration:200,easing:"easeOutQuad",onTick:function e(t){var r=t.value,n=t.nextTick;a.Scrollbar.scrollTop(r);n()}})}},{key:"renderRowWithWrapper",value:function e(t,a){var r=t.height,i=t.id,s=t.type;var o=i||a+"-"+s;var l={quickswitcherButton:"listitem",navigationBar:"listitem",allUnreadsLink:"listitem",allThreadsLink:"listitem",searchLink:"listitem",pageLink:"listitem",sectionHeading:"listitem",channel:"listitem",addAChannelLink:"listitem",invitePeopleLink:"listitem",installAppsLink:"listitem",gdrivePromptLink:"listitem",appSuggestionLinks:"listitem",upgradeSlackLink:"listitem",spacer:"presentation",topPadding:"presentation",emptyState:"listitem"}[s];return n.a.createElement("div",{key:o,style:{height:r},role:l},this.renderRow(t))}},{key:"renderRow",value:function e(t){var a=this.props,r=a.onItemSelect,i=a.featureReactAllUnreads,s=a.shouldUseInviteExperimentTreatment,o=a.featureSeeMoreChannels;switch(t.type){case"quickswitcherButton":return n.a.createElement(Ua,null);case"navigationBar":return n.a.createElement($a,null);case"allUnreadsLink":if(Object(G["a"])()&&!i)return n.a.createElement(kr,null);return n.a.createElement(ur,{selectItem:r});case"allThreadsLink":return n.a.createElement(Sr,{selectItem:r});case"searchLink":return n.a.createElement(Pr,{selectItem:r});case"pageLink":return n.a.createElement(Vr,{id:t.id,selectItem:r});case"sectionHeading":return this.renderSectionHeading(t.name);case"folderHeading":return this.renderFolderHeading(t.name);case"channel":return this.renderChannel(t.id,t.index);case"addAChannelLink":return n.a.createElement(Fr,{selectItem:this.props.onBrowseChannelsClick,isDim:t.dim,qaLabel:"_add_channel",label:o?Ji.t("See more channels"):Ji.t("Add a channel")});case"invitePeopleLink":return n.a.createElement(Jr,{selectItem:this.onInviteClick,dim:t.dim,qaLabel:"_invite_people",label:Ji.t("Invite people"),showClose:s,onClickClose:this.onInviteCloseClick,featureChannelSidebarInviteExperiment:this.props.featureChannelSidebarInviteExperiment});case"installAppsLink":return n.a.createElement(on,null);case"gdrivePromptLink":return n.a.createElement(bn,null);case"appSuggestionLinks":return n.a.createElement(Tn,null);case"upgradeSlackLink":return n.a.createElement(ti,null);case"spacer":return null;case"topPadding":return null;default:Object(g["b"])().warn("Row type "+t.type+" not implemented",t)}return null}},{key:"renderSectionHeading",value:function e(t){var a=this.props,r=a.onBrowseChannelsClick,i=a.onBrowseSharedChannelsClick,s=a.onCreateChannelClick,o=a.onCreateSharedChannelClick,l=a.onBrowseAppsClick;switch(t){case"drafts":return n.a.createElement(Vn,null);case"starred":if(this.props.sidebarFoldersIsEnabled)return n.a.createElement(Ln,{label:Ji.t("Starred"),qaLabel:"starred",showPlus:true,onPlusClick:this.props.onCreateFolder});return n.a.createElement(ni,null);case"sharedChannels":return n.a.createElement(bi,{onLabelClick:i,onPlusClick:o});case"channels":return n.a.createElement(Ei,{onLabelClick:r,onPlusClick:s});case"orgWideChannels":return n.a.createElement(Fi,null);case"ims":return n.a.createElement(Gi,null);case"apps":return n.a.createElement(Vi,{onLabelClick:l,onPlusClick:l});default:return null}}},{key:"renderFolderHeading",value:function e(t){return n.a.createElement(Ai,{name:t,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver})}},{key:"renderChannel",value:function e(t,a){if(this.props.sidebarFoldersIsEnabled)return n.a.createElement(wa,{key:t,id:t,selectItem:this.props.onItemSelect,index:a,sidebarFoldersIsEnabled:true,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver});var r=n.a.createElement(wa,{key:t,id:t,selectItem:this.props.onItemSelect,index:a});return r}},{key:"render",value:function e(){var t=this;return n.a.createElement(Ut["a"],{onResize:this.onResize},function(e){var a=e.width,r=e.height;return n.a.createElement(Gt["a"],{width:a,height:r,contentHeight:t.getContentHeight(),onScroll:t.onScroll,ref:t.setScrollbarRef,serializationKey:"channel-list-scrollbar"},n.a.createElement("div",{className:"p-channel_sidebar__static_list","data-qa":"channel_sidebar_list","aria-label":Ji.t("Channels and direct messages"),role:"list"},t.props.rows.map(t.renderRowWithWrapper)))})}}]);return t}(n.a.PureComponent);$i.displayName="ChannelList";$i.defaultProps=Xi;var es=$i;var ts=new oe["b"]("channel_sidebar");var as={isShowing:wt["b"].bool.isRequired,linkedId:wt["b"].oneOfType([wt["b"].string,wt["b"].bool]),isMention:wt["b"].bool,position:wt["b"].oneOf(["top","bottom"]),ensureRowInView:wt["b"].func};var rs={linkedId:null,isMention:false,position:"top",ensureRowInView:b.a.noop};var ns=function(e){jt()(t,e);function t(){_t()(this,t);var e=Et()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.onClick=e.onClick.bind(e);return e}Ot()(t,[{key:"onClick",value:function e(t){var a=this.props,r=a.linkedId,n=a.ensureRowInView;t.preventDefault();r&&n(r)}},{key:"render",value:function e(){var t=this.props,a=t.isShowing,r=t.position,i=t.isMention,s=t.linkedId;if(!a)return null;var o=It()("p-channel_sidebar__banner",{"p-channel_sidebar__banner--mentions":i,"p-channel_sidebar__banner--unreads":!i,"p-channel_sidebar__banner--top":"top"===r,"p-channel_sidebar__banner--bottom":"bottom"===r});var l="top"===r?"up":"down";var c=i?ts.t("Unread Mentions"):ts.t("More Unreads");return n.a.createElement(Ft["c"],{className:o,onClick:this.onClick,"data-qa-linked-id":s},c,n.a.createElement(aa["b"],{type:"arrow_"+l,inline:true,className:"p-channel_sidebar__banner_icon"}))}}]);return t}(n.a.PureComponent);ns.displayName="UnreadBanner";ns.defaultProps=rs;var is=ns;var ss=a(1697);var os=new oe["b"]("channel_sidebar");var ls="react_channel_sidebar_update";var cs=Object(Y["a"])(1);var us=2;var ds=10;var ps=24;var hs={isBooted:wt["b"].bool,selectedItemId:wt["b"].string,unreadIds:wt["b"].arrayOf(wt["b"].string),mutedMentionIds:wt["b"].arrayOf(wt["b"].string),mentionIds:wt["b"].arrayOf(wt["b"].string),rows:wt["b"].arrayOf(wt["b"].object),rowsMap:wt["b"].object,rowIds:wt["b"].arrayOf(wt["b"].string),idsNeedingPresenceSubscription:wt["b"].arrayOf(wt["b"].string),onItemSelect:wt["b"].func,onInviteClick:wt["b"].func,onBrowseChannelsClick:wt["b"].func,onBrowseSharedChannelsClick:wt["b"].func,onCreateChannelClick:wt["b"].func,onCreateSharedChannelClick:wt["b"].func,onBrowseAppsClick:wt["b"].func,jumperCoachmarkState:wt["b"].string,useGlobalNav:wt["b"].bool,featureGlobalNavLayout:wt["b"].bool,featureClassicNav:wt["b"].bool,sidebarFoldersIsEnabled:wt["b"].bool,initializeFolderData:wt["b"].func,initializeGdrivePromptData:wt["b"].func,initializeAppSuggestionLinksData:wt["b"].func,createFolder:wt["b"].func,ensureDraftChannelObjects:wt["b"].func,dragFolderOrChannel:wt["b"].func,ariaLandmarkLabel:wt["b"].string,onDevToolsClick:wt["b"].func,featureSonicPresenceManager:wt["b"].bool,featureSonicInputs:wt["b"].bool,featureReactAllUnreads:wt["b"].bool,telemeter:wt["b"].object,logger:wt["b"].object,isWindowFocused:wt["b"].bool,bootType:wt["b"].oneOf(["warm","cold"]),teamId:wt["b"].string,clogger:wt["b"].object,suggestedChannelsMap:wt["b"].object,featureChannelSidebarInviteExperiment:wt["b"].bool,shouldUseInviteExperimentTreatment:wt["b"].bool,setHideInviteButton:wt["b"].func,featureSeeMoreChannels:wt["b"].bool};var vs={isBooted:false,selectedItemId:null,mentionIds:[],unreadIds:[],mutedMentionIds:[],idsNeedingPresenceSubscription:[],rows:[],rowsMap:{},rowIds:[],onItemSelect:b.a.noop,onInviteClick:b.a.noop,onBrowseChannelsClick:b.a.noop,onBrowseSharedChannelsClick:b.a.noop,onCreateChannelClick:b.a.noop,onCreateSharedChannelClick:b.a.noop,onBrowseAppsClick:b.a.noop,jumperCoachmarkState:null,useGlobalNav:false,featureGlobalNavLayout:false,featureClassicNav:false,sidebarFoldersIsEnabled:false,ensureDraftChannelObjects:void 0,initializeFolderData:b.a.noop,initializeGdrivePromptData:b.a.noop,initializeAppSuggestionLinksData:b.a.noop,createFolder:b.a.noop,dragFolderOrChannel:b.a.noop,ariaLandmarkLabel:null,onDevToolsClick:b.a.noop,featureSonicPresenceManager:false,featureSonicInputs:false,featureReactAllUnreads:false,telemeter:null,isWindowFocused:false,logger:null,bootType:null,teamId:null,suggestedChannelsMap:{},clogger:{},featureChannelSidebarInviteExperiment:false,shouldUseInviteExperimentTreatment:false,setHideInviteButton:b.a.noop,featureSeeMoreChannels:false};var ms={FOCUS_WITHIN:2,CONTAINER_FOCUSED:1,NOT_FOCUSED:-1};var fs=function(e){jt()(t,e);function t(e){_t()(this,t);var a=Et()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.setRef=a.setRef.bind(a);a.ensureRowInView=a.ensureRowInView.bind(a);a.onResize=a.onResize.bind(a);a.onScroll=a.onScroll.bind(a);a.onItemSelect=a.onItemSelect.bind(a);a.onFocusEnter=a.onFocusEnter.bind(a);a.onFocusLeave=a.onFocusLeave.bind(a);a.onFocusWithin=a.onFocusWithin.bind(a);a.onDragStart=a.onDragStart.bind(a);a.onDragEnd=a.onDragEnd.bind(a);a.onDragOver=a.onDragOver.bind(a);a.onDrop=a.onDrop.bind(a);a.onCreateFolder=a.onCreateFolder.bind(a);a.state=m()({},a.getUnreadRows(e),{scrolledBelowFirstMention:false,scrolledBelowFirstUnread:false,scrolledAboveLastMention:false,scrolledAboveLastUnread:false,listHeight:0,hasInitializedFolderData:false,hasInitializedGdrivePromptData:false,hasInitializedAppSuggestionLinksData:false,hasKeyboardFocus:ms.NOT_FOCUSED});a.presenceList=Object(Pt["a"])(a.props.idsNeedingPresenceSubscription);a.commands=[{keys:["option+up"],handler:a.gotoNext.bind(a,"up",false)},{keys:["option+down"],handler:a.gotoNext.bind(a,"down",false)},{keys:["option+shift+up"],handler:a.gotoNext.bind(a,"up",true)},{keys:["option+shift+down"],handler:a.gotoNext.bind(a,"down",true)}];a.pendingEnsureRowInView=false;a.shouldTrackTTFMP=true;a.isSuggestedChannelsClogSent=false;a.hasInitializedDraftsData=false;return a}Ot()(t,[{key:"componentDidMount",value:function e(){this.keyCommands=new Lt["a"];this.keyCommands.bindAll(this.commands);this.maybeLoadFolderData();this.maybeLoadGdriveData();this.maybeLoadDraftsData();this.maybeLoadAppSuggestionLinksData();this.shouldTrackTTFMP=this.props.isWindowFocused}},{key:"componentWillReceiveProps",value:function e(t){var a=this;this.shouldTrackTTFMP=this.shouldTrackTTFMP&&t.isWindowFocused;if(!t.isBooted)return;if(!t.featureSonicPresenceManager&&!Object(Tt["a"])()&&!Object(X["a"])(this.props.idsNeedingPresenceSubscription,t.idsNeedingPresenceSubscription)&&this.presenceList){this.presenceList.clear();this.presenceList.add(t.idsNeedingPresenceSubscription)}var r="SHOW_BUTTON"===t.jumperCoachmarkState||"HIDE_BUTTON"===t.jumperCoachmarkState;var n=this.props.rows.length&&t.rows.length&&("Vquick_switcher"===this.props.rows[0].id||"Vquick_switcher"===t.rows[0].id)&&this.props.rows[0].id!==t.rows[0].id;(r||n)&&this.ChannelList&&this.ChannelList.Scrollbar&&this.ChannelList.Scrollbar.scrollTop(0);this.setState(function(e){var r=m()({},e,a.getUnreadRows(t));a.ChannelList&&a.ChannelList.resetCurrentScrollTopMaybe(r.listHeight,t.rows);return m()({},r,a.getBannerState(r))})}},{key:"componentWillUpdate",value:function e(t){cs&&t.telemeter.mark(ls+"_mark")}},{key:"componentDidUpdate",value:function e(t){var a=this.props,r=a.selectedItemId,n=a.isBooted,i=a.jumperCoachmarkState,s=a.rows,o=a.suggestedChannelsMap,l=a.clogger,c=a.telemeter;var u="SHOW_BUTTON"===i||"HIDE_BUTTON"===i;var d=t.selectedItemId!==r;var p=n&&!t.isBooted;u||!d&&!p||this.ensureRowInView(r);this.maybeLoadFolderData();this.maybeLoadGdriveData();this.maybeLoadDraftsData();this.maybeLoadAppSuggestionLinksData();cs&&c.measureAndClear(ls+"_mark",ls);if(!this.isSuggestedChannelsClogSent&&Object.keys(o).length){var h=s.filter(function(e){return"channel"===e.type&&o[e.id]}).length;if(h&&l.track){this.isSuggestedChannelsClogSent=true;l.track("SIDEBAR_SUGGESTED_CHANNELS_RENDERED",{count:h})}}}},{key:"componentWillUnmount",value:function e(){this.keyCommands.reset();this.presenceList&&this.presenceList.destroy()}},{key:"onCreateFolder",value:function e(){if(!this.props.sidebarFoldersIsEnabled)return;this.props.createFolder()}},{key:"onDragStart",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;var a=t.dataTransfer;a.effectAllowed="move";a.dropEffect="move";var r=t.target;while(r&&!r.attributes["data-drag-type"])r=r.parentNode;var n={src:{type:r.attributes["data-drag-type"].value,id:r.attributes["data-drag-id"].value}};this.setState(function(){return{dragData:n}})}},{key:"onDragOver",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;t.preventDefault()}},{key:"onDrop",value:function e(t){if(!this.props.sidebarFoldersIsEnabled)return;var a=t.target;while(a&&!a.attributes["data-drag-type"])a=a.parentNode;this.setState(function(e){return{dragData:m()({},e.dragData,{dest:{type:a.attributes["data-drag-type"].value,id:a.attributes["data-drag-id"].value}})}})}},{key:"onDragEnd",value:function e(){if(!this.props.sidebarFoldersIsEnabled)return;this.props.dragFolderOrChannel(this.state.dragData);this.setState(function(){return{dragData:null}})}},{key:"onScroll",value:function e(){this.setState(this.getBannerState)}},{key:"onResize",value:function e(t){var a=this;var r=t.height;this.setState(function(e){var t=m()({},e,{listHeight:r});return m()({},t,a.getBannerState(t))},function(){false!==a.pendingEnsureRowInView&&a.ensureRowInView(a.pendingEnsureRowInView)})}},{key:"onFocusEnter",value:function e(t){var a=t.relatedEvent,r=t.target,n=t.currentTarget;if(a&&"mousedown"===a.type)return;var i=r===n?ms.CONTAINER_FOCUSED:ms.FOCUS_WITHIN;this.setState(function(){return{hasKeyboardFocus:i}})}},{key:"onFocusWithin",value:function e(){this.setState(function(){return{hasKeyboardFocus:ms.FOCUS_WITHIN}})}},{key:"onFocusLeave",value:function e(){this.setState(function(){return{hasKeyboardFocus:ms.NOT_FOCUSED}})}},{key:"onItemSelect",value:function e(t){return this.props.onItemSelect(t)}},{key:"setRef",value:function e(t){this.ChannelList=t}},{key:"getUnreadRows",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,a=t.rowsMap,r=t.unreadIds,n=t.mentionIds;return{firstUnread:a[b.a.first(r)],lastUnread:a[b.a.last(r)],firstMention:a[b.a.first(n)],lastMention:a[b.a.last(n)]}}},{key:"getBannerState",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,a=t.firstMention,r=t.firstUnread,n=t.lastMention,i=t.lastUnread,s=t.listHeight;var o=this.ChannelList?this.ChannelList.getCurrentScrollTop():0;var l=!!(r&&r.scrollBottom-ds<=o);var c=!!(i&&i.scrollTop+ds>=o+s);var u=!!(a&&a.scrollBottom-ds-(l?ps:0)<=o);var d=!!(n&&n.scrollTop+ds+(c?ps:0)>=o+s);return{scrolledBelowFirstMention:u,scrolledBelowFirstUnread:l,scrolledAboveLastMention:d,scrolledAboveLastUnread:c}}},{key:"maybeLoadFolderData",value:function e(){if(this.props.sidebarFoldersIsEnabled&&!this.state.hasInitializedFolderData){this.props.initializeFolderData();this.setState(function(e){return m()({},e,{hasInitializedFolderData:true})})}}},{key:"maybeLoadDraftsData",value:function e(){if(this.props.ensureDraftChannelObjects&&!this.hasInitializedDraftsData){this.props.ensureDraftChannelObjects();this.hasInitializedDraftsData=true}}},{key:"maybeLoadGdriveData",value:function e(){if(!this.state.hasInitializedGdrivePromptData&&this.props.initializeGdrivePromptData!==b.a.noop){this.props.initializeGdrivePromptData();this.setState(function(){return{hasInitializedGdrivePromptData:true}})}}},{key:"maybeLoadAppSuggestionLinksData",value:function e(){if(!this.state.hasInitializedAppSuggestionLinksData&&this.props.initializeAppSuggestionLinksData!==b.a.noop){this.props.initializeAppSuggestionLinksData();this.setState(function(){return{hasInitializedAppSuggestionLinksData:true}})}}},{key:"ensureRowInView",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.selectedItemId;var a=this.props,r=a.rows,n=a.rowsMap,i=a.rowIds;var s=n[t];if(!s)return;var o=this.ChannelList.currentScrollTop;var l=this.state.listHeight;if(0===l){this.pendingEnsureRowInView=t;return}this.pendingEnsureRowInView=false;var c=Math.max(i.indexOf(t)-us,0);var u=r[c].scrollTop;if(u<o){this.ChannelList.scrollToTarget(u);return}var d=Math.min(i.indexOf(t)+us,r.length-1);var p=r[d].scrollBottom-l;p>o&&this.ChannelList.scrollToTarget(p)}},{key:"gotoNext",value:function e(t,a){var r=this;var n=this.props,i=n.rows,s=n.rowIds,o=n.selectedItemId,l=n.featureSonicInputs;if(l){var c=Object(At["a"])({viewContext:Nt["MESSAGE_CONTAINERS"].MESSAGE_PANE,channelId:o});if(c){var u=c.getLength();if(c.hasFocus()&&u>0){var d=c.getSelection();if(d){if(d.length>0)return;if("up"===t&&0!==d.index)return;if("down"===t&&d.index!==u)return}}}}else{var p=Object(Rt["c"])();var h=Object(Mt["e"])(p);if(Object(Mt["f"])(p)&&h>0){if(Object(Mt["h"])(p))return;var v=Object(Mt["b"])(p).start;if("up"===t&&0!==v)return;if("down"===t&&v!==h)return}}var f=s.indexOf(o);var g=b.a.filter(b.a.filter(b.a.map(i,function(e,t){return m()({},e,{index:t})}),function(e){return"channel"===e.type}),function(e){return!a||b.a.indexOf(r.props.unreadIds,e.id)>=0||b.a.indexOf(r.props.mutedMentionIds,e.id)>=0});if(0===g.length)return;var _=void 0;_="down"===t?b.a.find(g,function(e){return e.index>f}):b.a.findLast(g,function(e){return e.index<f});void 0===_&&(_="down"===t?b.a.first(g):b.a.last(g));this.props.onItemSelect(_.id)}},{key:"renderFocusOutline",value:function e(){if(this.state.hasKeyboardFocus===ms.CONTAINER_FOCUSED)return n.a.createElement("div",{className:"sectionfocusindicator"});return null}},{key:"render",value:function e(){if(!this.props.isBooted)return null;var t=this.props,a=t.rows,r=t.onInviteClick,i=t.onBrowseChannelsClick,s=t.onBrowseSharedChannelsClick,o=t.onCreateChannelClick,l=t.onCreateSharedChannelClick,c=t.onBrowseAppsClick,u=t.selectedItemId,d=t.useGlobalNav,p=t.featureGlobalNavLayout,h=t.featureClassicNav,v=t.featureReactAllUnreads,m=t.sidebarFoldersIsEnabled,f=t.ariaLandmarkLabel,b=t.onDevToolsClick,g=t.telemeter,_=t.logger,y=t.bootType,O=t.teamId,k=t.shouldUseInviteExperimentTreatment,E=t.featureSeeMoreChannels,C=t.clogger;var j=this.state,w=j.scrolledBelowFirstMention,S=j.scrolledBelowFirstUnread,I=j.scrolledAboveLastMention,T=j.scrolledAboveLastUnread,A=j.firstMention,N=j.firstUnread,P=j.lastMention,R=j.lastUnread;var M=this.state.hasKeyboardFocus!==ms.NOT_FOCUSED;var D=this.state.hasKeyboardFocus===ms.CONTAINER_FOCUSED?"-1":null;var x=It()("p-channel_sidebar",{focusablesection:M,"p-channel_sidebar--global_nav":d,"p-channel_sidebar--global_nav_layout":p,"p-channel_sidebar--classic_nav":h});var F=null;d&&(F=p?n.a.createElement(Bt["a"],null):n.a.createElement("div",{className:"p-global_nav__sidebar_divider"}));return n.a.createElement(xt["a"],{onFocusEnter:this.onFocusEnter,onFocusWithin:this.onFocusWithin,onFocusLeave:this.onFocusLeave},n.a.createElement("nav",{className:x,"data-qa-channel-sidebar":true,"data-qa-channel-sidebar-selected-item-id":u,"data-is-focusable-section":true,"aria-labelledby":f,tabIndex:D},n.a.createElement("h1",{id:"channel_sidebar_aria_label",className:"offscreen"},os.t("Channel Sidebar")),!d&&n.a.createElement(ss["a"],null),F,n.a.createElement("div",{className:"p-channel_sidebar__list"},n.a.createElement(is,{position:"top",isShowing:w||S,isMention:w,linkedId:w&&A.id||S&&N.id,ensureRowInView:this.ensureRowInView}),n.a.createElement(es,{rows:a,onItemSelect:this.onItemSelect,onInviteClick:r,onBrowseChannelsClick:i,onBrowseSharedChannelsClick:s,onCreateChannelClick:o,onCreateSharedChannelClick:l,onBrowseAppsClick:c,onScroll:this.onScroll,onResize:this.onResize,featureReactAllUnreads:v,sidebarFoldersIsEnabled:m,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDrop,onDragOver:this.onDragOver,onCreateFolder:this.onCreateFolder,ref:this.setRef,telemeter:g,logger:_,shouldTrackTTFMP:this.shouldTrackTTFMP,bootType:y,teamId:O,shouldUseInviteExperimentTreatment:k,setHideInviteButton:this.props.setHideInviteButton,featureChannelSidebarInviteExperiment:this.props.featureChannelSidebarInviteExperiment,featureSeeMoreChannels:E,clogger:C}),n.a.createElement(is,{position:"bottom",isShowing:I||T,isMention:I,linkedId:I&&P.id||T&&R.id,ensureRowInView:this.ensureRowInView})),n.a.createElement(Dt["a"],{enabled:["feature_redux_dev_tools"]},n.a.createElement(Ft["d"],{size:"small",onClick:b},"Redux Dev Tools")),this.renderFocusOutline()))}}]);return t}(r["PureComponent"]);fs.displayName="ChannelSidebar";fs.defaultProps=vs;var bs=fs;var gs=10;var _s="react_channel_sidebar_selector_factory";var ys=Object(Y["a"])(1);var Os=function e(t,a){return ys&&Object(_["c"])({state:a}).mark(t+"_mark")};var ks=function e(t,a){return ys&&Object(_["c"])({state:a}).measureAndClear(t+"_mark",t)};var Es=function e(t){var a=Object(A["l"])(t);if(a)return false;var r=!!Object(E["d"])(t);if(r)return true;var n=Object(j["b"])(t)||{};var i=Object.keys(n);var s=0;for(var o=0;o<i.length;o++){Object(w["isUserInChannel"])(n[i[o]])&&(s+=1);if(s>gs)return false}return true};var Cs=function e(t){var a=Object(A["b"])(t);var r=a&&a.profile&&a.profile.email;if(!r)return false;var n=/@gmail\.com$/.exec(r);var i=Object(N["d"])(t);var s=Object(B["isEnterpriseTeam"])(i);return!n&&!s&&"treatment"===Object(d["getGroupForUser"])(t,"channel_sidebar_invite_button")};var js=function e(t){if(!Object(L["canUserSeeInviteModal"])(t))return false;var a=b.a.size(b.a.filter(Object(A["a"])(t),function(e){return!e.is_slackbot}));if(Cs(t)){if(Object(E["f"])(t,"channel_sidebar_hide_invite"))return false;if(a>=2)return"dim";return true}if(a>25)return false;if(a>=2)return"dim";return true};var ws=function e(t){var a=Object(Q["b"])(t);var r=Pe(t),n=r.sidebarSections,i=r.sidebarSectionsOrdered,s=r.idsNeedingPresenceSubscription;var o="enabled"===Object(d["getGroupForUser"])(t,"folders_sidebar")&&Object(E["f"])(t,"folders_enabled");var l=o?Object(k["getFolders"])(t):[];var c=Object(P["isFeatureEnabled"])(t,"feature_pages");var u=at({hasQuickswitcherButton:!a&&Object(E["f"])(t,"show_sidebar_quickswitcher_button"),hasAllUnreadsLink:true===Object(E["f"])(t,"enable_unread_view"),hasAddAChannelLink:Es(t),hasInvitePeopleLink:js(t),hasSearchLink:Object(J["a"])(t),hasGdrivePromptLink:ct(t),appSuggestionsCount:mt(t),hasUpgradeSlackLink:bt(t),sidebarSectionsOrdered:i,sidebarSections:n,sidebarFoldersIsEnabled:o,sidebarFolders:l,pages:c&&Object(Z["a"])().filter(function(e){return Object(Z["d"])(t,e)}),featurePages:c,featureReactAllUnreads:Object(P["isFeatureEnabled"])(t,"feature_react_all_unreads"),featureNavigateHistory:Object(P["isFeatureEnabled"])(t,"feature_navigate_history")}),p=u.rows,h=u.rowsMap,v=u.rowIds;return{rows:p,rowsMap:h,rowIds:v,idsNeedingPresenceSubscription:s}};var Ss=function e(t){var a=void 0;var r=void 0;var n=void 0;var i=void 0;var s=void 0;var o=void 0;var l=void 0;var c=void 0;var u=void 0;var p=void 0;var h=void 0;var v=void 0;var f=void 0;var A=void 0;var N=void 0;return function(e,L){Os(_s,e);var B=Object(y["isFullyBooted"])(e);var q=Object(g["a"])({state:e});var W=Object(F["a"])({state:e});var H=Object(_["c"])({state:e});var V=Object(x["isWindowFocused"])(e);var Y=Object(x["getBootType"])(e);if(!B)return{isBooted:B,isWindowFocused:V};var J=Object(M["a"])(e);var Z=L.onItemSelect;var $=ws(e),ee=$.rows,te=$.rowsMap,ae=$.rowIds,re=$.idsNeedingPresenceSubscription;var ne=b.a.filter(ae,function(t){return Object(j["v"])(e,t)&&!Object(S["isChannelMutedById"])(e,t)});var ie=b.a.filter(ae,function(t){return Object(j["w"])(e,t)&&!Object(S["isChannelMutedById"])(e,t)});var se=b.a.filter(ae,function(t){return Object(j["v"])(e,t)&&Object(S["isChannelMutedById"])(e,t)});if(Object(P["isFeatureEnabled"])(e,"feature_incremental_unread_counts")){Object(T["getThreadsMentionCount"])(e)&&ne.unshift("Vall_threads");Object(T["hasUnreadThreads"])(e)&&ie.unshift("Vall_threads")}else{Object(I["getThreadsMentionCount"])(e)&&ne.unshift("Vall_threads");Object(I["hasUnreadThreads"])(e)&&ie.unshift("Vall_threads")}var oe=Object(O["getJumperCoachmarkState"])(e);var le=Object(E["f"])(e,"sidebar_behavior");var ce="enabled"===Object(d["getGroupForUser"])(e,"folders_sidebar")&&Object(E["f"])(e,"folders_enabled");var ue=Object(Q["b"])(e);var de=Object(P["isFeatureEnabled"])(e,"feature_global_nav_layout");var pe=Object(P["isFeatureEnabled"])(e,"feature_sonic_inputs");var he=Object(P["isFeatureEnabled"])(e,"feature_classic_nav");var ve=Object(P["isFeatureEnabled"])(e,"feature_sonic_presence_manager");var me=Object(P["isFeatureEnabled"])(e,"feature_degraded_send");var fe=Object(P["isFeatureEnabled"])(e,"feature_react_all_unreads");var be=Object(P["isFeatureEnabled"])(e,"feature_channel_sidebar_invite_experiment");var ge=Object(P["isFeatureEnabled"])(e,"feature_see_more_channels");var _e=b.a.filter(ee,function(e){return"addAChannelLink"===e.type});var ye=Object(z["c"])(e);var Oe=Object(w["getSuggestedChannels"])(e);var ke=Oe.join(",");if(J===r&&Object(X["a"])(ie,n)&&Object(X["a"])(ne,i)&&Object(X["a"])(se,s)&&Object(X["a"])(ae,o)&&oe===l&&le===c&&ce===u&&ue===p&&de===h&&he===v&&Object(X["a"])(L,f)&&_e===A&&ke===N)return a;var Ee=m()({},L,{isBooted:B,rows:ee,rowsMap:te,rowIds:ae,selectedItemId:J,unreadIds:ie,mentionIds:ne,mutedMentionIds:se,jumperCoachmarkState:oe,useGlobalNav:ue,featureGlobalNavLayout:de,featureClassicNav:he,idsNeedingPresenceSubscription:re,featureSonicPresenceManager:ve,featureSonicInputs:pe,featureReactAllUnreads:fe,featureChannelSidebarInviteExperiment:be,featureSeeMoreChannels:ge,sidebarFoldersIsEnabled:ce,ensureDraftChannelObjects:function e(){return t(K())},initializeFolderData:function e(){return t(Object(k["initializeFolderData"])())},initializeGdrivePromptData:function e(){return t(Object(O["initializeGdrivePromptData"])())},initializeAppSuggestionLinksData:function e(){return t(Object(O["initializeAppSuggestionLinksData"])())},dragFolderOrChannel:function e(a){var r=a.src,n=a.dest;t(Object(k["dragFolderOrChannel"])({src:r,dest:n}));t(Object(k["saveFolderData"])())},createFolder:function e(){return t(Object(k["createFolder"])())},setHideInviteButton:function e(){W.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}});W.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}});return t(Object(C["c"])({pref:"channel_sidebar_hide_invite",value:true}))},onItemSelect:function e(a){q.info("CHANNEL-SIDEBAR","onItemSelect",a);me&&J===a&&t(Object(U["a"])({channelId:a}));if(Object(G["a"])()){t(Object(D["a"])({id:a}));t(Object(R["updateChannelLastTrigger"])({source:"SIDE_BAR",objId:a}))}else Z&&Z(a).then(function(){t(Object(R["updateChannelLastTrigger"])({source:"SIDE_BAR",objId:a}))}).catch(b.a.noop)},ariaLandmarkLabel:"channel_sidebar_aria_label",logger:q,clogger:W,telemeter:H,isWindowFocused:V,bootType:Y,teamId:ye,suggestedChannelsMap:Oe.reduce(function(e,t){e[t]=t;return e},{}),shouldUseInviteExperimentTreatment:Cs(e)});a=Ee;r=J;n=ie;i=ne;s=se;o=ae;l=oe;c=le;u=ce;p=ue;h=de;v=he;f=L;A=_e;N=ke;ks(_s,e);return Ee}};var Is={withRef:true};var Ts=Object(i["connectAdvanced"])(Ss,Is)(bs);var As=Ts;var Ns=a(573);var Ps=a(88);var Rs=a(1477);var Ms=function e(t){var a=window.open(null,"Redux DevTools","menubar=no,location=no,resizable=yes,scrollbars=no,status=no");a.location.reload();setTimeout(function(){a.document.write('<div id="react-devtools-root"></div>');Object(Ps["render"])(n.a.createElement(Rs["a"],{store:t}),a.document.getElementById("react-devtools-root"))},10)};var Ds=Ms;var xs=a(4195);var Fs=a(163);var Ls="shared_channels_channel_sidebar_plus_btn";var Bs="react_channel_sidebar_display_item";var Us=Object(Y["a"])(1);var qs=function e(t,a,r){var n=Object(_["c"])({state:a()});Us&&n.mark(Bs+"_mark");document&&document.activeElement&&document.activeElement.blur();return t(Object(c["a"])({id:r})).catch(function(e){Object(Ns["c"])("beep");Object(g["a"])({getState:a}).error(e,"displayModelOrViewById errored",{subtype:"displayModelOrViewById_beep"});throw e}).finally(function(){Us&&n.measureAndClear(Bs+"_mark",Bs)})};var Gs=function e(t){return Object(h["a"])({source:"channel_sidebar"},t,true)};var Ws=function e(){return Object(p["e"])({element:Ls})};var Hs=function e(t,a,r){if(!t)throw new Error("mountChannelSidebar must be called with a teamId parameter");var c=Object(o["d"])(t);var h=c.getState();var v=Object(d["getGroupForUser"])(h,"speedy_sidebar_boot");"experiment"===v&&c.dispatch(Object(l["d"])({channels:Object(u["a"])()}));var m=function e(t){return qs(c.dispatch,c.getState,t)};var f=function e(){return Ds(c)};var b=Object(F["a"])({state:h});var g=Object(P["isFeatureEnabled"])(h,"feature_modernize_invites")?function(){b.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"invite_people"}}}});c.dispatch(Object(xs["a"])({source:"channel_sidebar"}))}:Gs;Object(s["a"])(n.a.createElement(i["Provider"],{store:c},n.a.createElement(Fs["a"],null,n.a.createElement(As,{onItemSelect:m,onBrowseChannelsClick:p["b"],onBrowseSharedChannelsClick:p["c"],onCreateChannelClick:p["d"],onCreateSharedChannelClick:Ws,onBrowseAppsClick:p["a"],onInviteClick:g,onDevToolsClick:f,ref:r}))),a)};var Vs={onInviteClickLegacy:Gs};var Ks=Hs;var zs=a(44);Object(zs["a"])("interop.mountChannelSidebar",Ks)},function(e,t,a){"use strict";a.r(t);var r=a(44);var n=a(308);var i=a(902);var s=a(781);var o=a(2);var l=a(15);var c=a(4);var u=a(23);var d=a(27);var p=a(98);var h=a(103);var v=a(108);var m=a(1472);var f=a(1064);var b=a(582);var g=a(38);var _=a(12);var y=6e4;var O=function e(t){var a=Object(d["c"])(t);if(Object(g["a"])()&&!Object(v["h"])(a))return Promise.resolve();var r=Object(c["isFeatureEnabled"])(a,"feature_vitess_sidebar")?f["a"]:m["a"];return Object(d["a"])(t,r({reason:"requestOfflineCounts"})).tap(function(){return Object(d["a"])(t,Object(h["resetReachedEnd"])())}).tap(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(d["a"])(t,Object(b["a"])(e))}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a=Object(o["compact"])(Object(o["concat"])(e.channels,e.groups));Object(d["a"])(t,Object(p["s"])({channels:a}))}).catch(function(e){Object(_["a"])({state:a}).error("Failed to fetch offline users counts for "+t+": "+e)})};var k=Object(o["throttle"])(O,y,{trailing:false});var E=Object(l["b"])("Request offline users counts",function(e,t){return Object(c["isFeatureEnabled"])(t(),"feature_degraded_send")&&k(Object(u["c"])(t()))});E.propTypes={};var C=E;var j={fetchOfflineUsersCounts:O};var w=a(100);var S=a(1740);var I=a(1358);var T=a(4205);var A=a(1216);var N=a(1784);Object(r["a"])("interop.actions",{displayModelOrViewById:n["a"],setLastRead:i["d"],markLastRead:i["b"],markDelayedWithAPI:i["a"],openDmBrowserModal:I["a"],openChannelCreateModal:T["a"],requestOfflineHistory:s["a"],requestOfflineCounts:C,toggleKeyboardShortcuts:w["r"],showKeyboardShortcuts:w["h"],slackJsPathCommand:S["a"],filterFilesForUpload:A["a"],launchWorkflowBuilder:N["a"]})},,function(e,t,a){"use strict";a.d(t,"a",function(){return o});var r=a(49);var n={},i=n.TimezoneDetector;var s=void 0;function o(e){if(Object(r["a"])()){!s&&i&&(s=new i);return s.getList(e)}return window.timezones_list(e)}},,function(e,t,a){(function t(r,n){true;e.exports=n(a(1))})("undefined"!==typeof self?self:this,function(e){return function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:false,exports:{}};e[r].call(n.exports,n,n.exports,a);n.l=true;return n.exports}a.m=e;a.c=t;a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{configurable:false,enumerable:true,get:r})};a.n=function(e){var t=e&&e.__esModule?function t(){return e["default"]}:function t(){return e};a.d(t,"a",t);return t};a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};a.p="";return a(a.s=2)}([function(e,t){var a=e.exports={};var r;var n;function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{r="function"===typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"===typeof clearTimeout?clearTimeout:s}catch(e){n=s}})();function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout){r=setTimeout;return setTimeout(e,0)}try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function l(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout){n=clearTimeout;return clearTimeout(e)}try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}var c=[];var u=false;var d;var p=-1;function h(){if(!u||!d)return;u=false;d.length?c=d.concat(c):p=-1;c.length&&v()}function v(){if(u)return;var e=o(h);u=true;var t=c.length;while(t){d=c;c=[];while(++p<t)d&&d[p].run();p=-1;t=c.length}d=null;u=false;l(e)}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];c.push(new m(e,t));1!==c.length||u||o(v)};function m(e,t){this.fun=e;this.array=t}m.prototype.run=function(){this.fun.apply(null,this.array)};a.title="browser";a.browser=true;a.env={};a.argv=[];a.version="";a.versions={};function f(){}a.on=f;a.addListener=f;a.once=f;a.off=f;a.removeListener=f;a.removeAllListeners=f;a.emit=f;a.prependListener=f;a.prependOnceListener=f;a.listeners=function(e){return[]};a.binding=function(e){throw new Error("process.binding is not supported")};a.cwd=function(){return"/"};a.chdir=function(e){throw new Error("process.chdir is not supported")};a.umask=function(){return 0}},function(e,t,a){"use strict";var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.containCrop=t.makeAspectCrop=t.Component=t.default=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||false;r.configurable=true;"value"in r&&(r.writable=true);Object.defineProperty(e,r.key,r)}}return function(t,a,r){a&&e(t.prototype,a);r&&e(t,r);return t}}();var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};var i=function(){function e(e,t){var a=[];var r=true;var n=false;var i=void 0;try{for(var s=e[Symbol.iterator](),o;!(r=(o=s.next()).done);r=true){a.push(o.value);if(t&&a.length===t)break}}catch(e){n=true;i=e}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var s=a(3);var o=u(s);var l=a(4);var c=u(l);function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=false;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function e(){m=true;return true}}))}catch(e){}var f="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";function b(e){var t=void 0;var a=void 0;if(e.touches){var r=i(e.touches,1);var n=r[0];t=n.pageX;a=n.pageY}else{t=e.pageX;a=e.pageY}return{x:t,y:a}}function g(e,t,a){return Math.min(Math.max(e,t),a)}function _(e){return e&&e.width&&e.height&&!isNaN(e.width)&&!isNaN(e.height)}function y(e){var t=void 0;"n"===e?t="s":"ne"===e?t="sw":"e"===e?t="w":"se"===e?t="nw":"s"===e?t="n":"sw"===e?t="ne":"w"===e?t="e":"nw"===e&&(t="se");return t}function O(e,t){if(isNaN(e.aspect)){console.warn("`crop.aspect` should be a number in order to make an aspect crop",e);return e}var a=n({x:0,y:0},e);e.width&&(a.height=a.width/e.aspect);e.height&&(a.width=a.height*e.aspect);if(a.y+a.height>t.height){a.height=t.height-a.y;a.width=a.height*e.aspect}if(a.x+a.width>t.width){a.width=t.width-a.x;a.height=a.width/e.aspect}return a}function k(e,t){if(!e.width&&e.height||e.width&&!e.height)return true;return e.width/e.aspect!==e.height||e.height*e.aspect!==e.width||e.y+e.height>t.height||e.x+e.width>t.width}function E(e,t){if(e&&e.aspect&&k(e,t))return O(e,t);return e}function C(e,t,a){var r=n({},t);t.aspect&&e.x>t.x&&t.height+t.y>=a.height&&(r.x=e.x);var i=false;if(r.x+r.width>a.width){r.width=t.width+(a.width-(t.x+t.width));r.x=t.x+(a.width-(t.x+r.width));i=true}else if(r.x<0){r.width=t.x+t.width;r.x=0;i=true}if(i&&t.aspect){r.height=r.width/t.aspect;e.y>r.y&&(r.y=t.y+(t.height-r.height))}var s=false;if(r.y+r.height>a.height){r.height=t.height+(a.height-(t.y+t.height));r.y=t.y+(a.height-(t.y+r.height));s=true}else if(r.y<0){r.height=t.y+t.height;r.y=0;s=true}if(s&&t.aspect){r.width=r.height*t.aspect;r.x<t.x&&(r.x=t.x+(t.width-r.width))}return r}var j=function(e){v(t,e);function t(){var e;var a,r,n;p(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return n=(a=(r=h(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r),r.window=window,r.document=document,r.state={},r.onCropMouseTouchDown=function(e){var t=r.props,a=t.crop,n=t.disabled;if(n)return;e.preventDefault();var i=b(e);r.componentRef.focus({preventScroll:true});var s=e.target.dataset.ord;var o="nw"===s||"w"===s||"sw"===s;var l="nw"===s||"n"===s||"ne"===s;var c=void 0;a.aspect&&(c=r.getElementOffset(r.cropSelectRef));r.evData={clientStartX:i.x,clientStartY:i.y,cropStartWidth:a.width,cropStartHeight:a.height,cropStartX:o?a.x+a.width:a.x,cropStartY:l?a.y+a.height:a.y,xInversed:o,yInversed:l,xCrossOver:o,yCrossOver:l,startXCrossOver:o,startYCrossOver:l,isResize:e.target.dataset.ord,ord:s,cropOffset:c};r.mouseDownOnCrop=true;r.setState({cropIsActive:true})},r.onComponentMouseTouchDown=function(e){var t=r.props,a=t.crop,n=t.disabled,i=t.locked,s=t.keepSelection,o=t.onChange;if(e.target!==r.imageRef)return;if(n||i||s&&_(a))return;e.preventDefault();var l=b(e);r.componentRef.focus({preventScroll:true});var c=r.getElementOffset(r.imageRef);var u=l.x-c.left;var d=l.y-c.top;var p={aspect:a?a.aspect:void 0,x:u,y:d,width:0,height:0};r.evData={clientStartX:l.x,clientStartY:l.y,cropStartWidth:p.width,cropStartHeight:p.height,cropStartX:p.x,cropStartY:p.y,xInversed:false,yInversed:false,xCrossOver:false,yCrossOver:false,startXCrossOver:false,startYCrossOver:false,isResize:true,ord:"nw"};r.mouseDownOnCrop=true;o(p);r.setState({cropIsActive:true})},r.onDocMouseTouchMove=function(e){var t=r.props,a=t.crop,n=t.disabled,i=t.onChange,s=t.onDragStart;if(n)return;if(!r.mouseDownOnCrop)return;e.preventDefault();if(!r.dragStarted){r.dragStarted=true;s(e)}var o=r,l=o.evData;var c=b(e);l.isResize&&a.aspect&&l.cropOffset&&(c.y=r.straightenYPath(c.x));l.xDiff=c.x-l.clientStartX;l.yDiff=c.y-l.clientStartY;var u=void 0;u=l.isResize?r.resizeCrop():r.dragCrop();u!==a&&i(u)},r.onComponentKeyDown=function(e){var a=r.props,n=a.crop,i=a.disabled,s=a.onChange,o=a.onComplete;if(i)return;var l=e.which;var c=false;if(!_(n))return;var u=r.makeNewCrop();if(l===t.arrowKey.left){u.x-=t.nudgeStep;c=true}else if(l===t.arrowKey.right){u.x+=t.nudgeStep;c=true}else if(l===t.arrowKey.up){u.y-=t.nudgeStep;c=true}else if(l===t.arrowKey.down){u.y+=t.nudgeStep;c=true}if(c){e.preventDefault();u.x=g(u.x,0,r.imageRef.width-u.width);u.y=g(u.y,0,r.imageRef.height-u.height);s(u);o(u)}},r.onDocMouseTouchEnd=function(e){var t=r.props,a=t.crop,n=t.disabled,i=t.onComplete,s=t.onDragEnd;if(n)return;if(r.mouseDownOnCrop){r.mouseDownOnCrop=false;r.dragStarted=false;s(e);i(a);r.setState({cropIsActive:false})}},a),h(r,n)}r(t,[{key:"componentDidMount",value:function e(){var t=!!m&&{passive:false};this.document.addEventListener("mousemove",this.onDocMouseTouchMove,t);this.document.addEventListener("touchmove",this.onDocMouseTouchMove,t);this.document.addEventListener("mouseup",this.onDocMouseTouchEnd,t);this.document.addEventListener("touchend",this.onDocMouseTouchEnd,t);this.document.addEventListener("touchcancel",this.onDocMouseTouchEnd,t);if(this.imageRef.complete||this.imageRef.readyState)if(0===this.imageRef.naturalWidth){var a=this.imageRef.src;this.imageRef.src=f;this.imageRef.src=a}else this.onImageLoad(this.imageRef)}},{key:"componentWillUnmount",value:function e(){this.document.removeEventListener("mousemove",this.onDocMouseTouchMove);this.document.removeEventListener("touchmove",this.onDocMouseTouchMove);this.document.removeEventListener("mouseup",this.onDocMouseTouchEnd);this.document.removeEventListener("touchend",this.onDocMouseTouchEnd);this.document.removeEventListener("touchcancel",this.onDocMouseTouchEnd)}},{key:"onImageLoad",value:function e(t){var a=this.props,r=a.crop,n=a.onComplete,i=a.onChange,s=a.onImageLoaded;var o=E(r,t);var l=s(t);if(false!==l&&o!==r){i(o);n(o)}}},{key:"getElementOffset",value:function e(t){var a=t.getBoundingClientRect();var r=this.document.documentElement;var n=a.top+this.window.pageYOffset-r.clientTop;var i=a.left+this.window.pageXOffset-r.clientLeft;return{top:n,left:i}}},{key:"getCropStyle",value:function e(){var t=this.props.crop;return{top:t.y+"px",left:t.x+"px",width:t.width+"px",height:t.height+"px"}}},{key:"getNewSize",value:function e(){var t=this.props,a=t.crop,r=t.minWidth,n=t.maxWidth,i=t.minHeight,s=t.maxHeight;var o=this.evData,l=this.imageRef;var c=o.cropStartWidth+o.xDiff;o.xCrossOver&&(c=Math.abs(c));c=g(c,r,n||l.width);var u=void 0;u=a.aspect?c/a.aspect:o.cropStartHeight+o.yDiff;o.yCrossOver&&(u=Math.min(Math.abs(u),o.cropStartY));u=g(u,i,s||l.height);a.aspect&&(c=g(u*a.aspect,0,this.imageRef.width));return{width:c,height:u}}},{key:"dragCrop",value:function e(){var t=this.makeNewCrop();var a=this.evData;t.x=g(a.cropStartX+a.xDiff,0,this.imageRef.width-t.width);t.y=g(a.cropStartY+a.yDiff,0,this.imageRef.height-t.height);return t}},{key:"resizeCrop",value:function e(){var a=this.makeNewCrop();var r=this.evData;var n=this.props,i=n.crop,s=n.minWidth,o=n.minHeight;var l=r.ord;r.xInversed&&(r.xDiff-=2*r.cropStartWidth);r.yInversed&&(r.yDiff-=2*r.cropStartHeight);var c=this.getNewSize();var u=r.cropStartX;var d=r.cropStartY;r.xCrossOver&&(u=a.x+(a.width-c.width));r.yCrossOver&&(d=false===r.lastYCrossover?a.y-c.height:a.y+(a.height-c.height));var p=C(this.props.crop,{x:u,y:d,width:c.width,height:c.height,aspect:a.aspect},this.imageRef);if(a.aspect||t.xyOrds.indexOf(l)>-1){a.x=p.x;a.y=p.y;a.width=p.width;a.height=p.height}else if(t.xOrds.indexOf(l)>-1){a.x=p.x;a.width=p.width}else if(t.yOrds.indexOf(l)>-1){a.y=p.y;a.height=p.height}r.lastYCrossover=r.yCrossOver;this.crossOverCheck();if(s&&a.width<s)return i;if(o&&a.height<o)return i;return a}},{key:"straightenYPath",value:function e(t){var a=this.evData;var r=a.ord;var n=a.cropOffset,i=a.cropStartWidth,s=a.cropStartHeight;var o=void 0;var l=void 0;if("nw"===r||"se"===r){o=s/i;l=n.top-n.left*o}else{o=-s/i;l=n.top+(s-n.left*o)}return o*t+l}},{key:"createCropSelection",value:function e(){var t=this;var a=this.props,r=a.disabled,n=a.locked,i=a.renderSelectionAddon;var s=this.getCropStyle();return o.default.createElement("div",{ref:function e(a){t.cropSelectRef=a},style:s,className:"ReactCrop__crop-selection",onMouseDown:this.onCropMouseTouchDown,onTouchStart:this.onCropMouseTouchDown,role:"presentation"},!r&&!n&&o.default.createElement("div",{className:"ReactCrop__drag-elements"},o.default.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),o.default.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),o.default.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),o.default.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),o.default.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw"}),o.default.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n"}),o.default.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne"}),o.default.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e"}),o.default.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se"}),o.default.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s"}),o.default.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw"}),o.default.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w"})),i&&i(this.state))}},{key:"makeNewCrop",value:function e(){return n({},t.defaultCrop,this.props.crop)}},{key:"crossOverCheck",value:function e(){var t=this.evData;(!t.xCrossOver&&-Math.abs(t.cropStartWidth)-t.xDiff>=0||t.xCrossOver&&-Math.abs(t.cropStartWidth)-t.xDiff<=0)&&(t.xCrossOver=!t.xCrossOver);(!t.yCrossOver&&-Math.abs(t.cropStartHeight)-t.yDiff>=0||t.yCrossOver&&-Math.abs(t.cropStartHeight)-t.yDiff<=0)&&(t.yCrossOver=!t.yCrossOver);var a=t.xCrossOver!==t.startXCrossOver;var r=t.yCrossOver!==t.startYCrossOver;t.inversedXOrd=!!a&&y(t.ord);t.inversedYOrd=!!r&&y(t.ord)}},{key:"render",value:function e(){var t=this;var a=this.props,r=a.children,n=a.className,i=a.crossorigin,s=a.crop,l=a.disabled,c=a.locked,u=a.imageAlt,p=a.onImageError,h=a.src,v=a.style,m=a.imageStyle;var f=this.state.cropIsActive;var b=void 0;_(s)&&(b=this.createCropSelection());var g=["ReactCrop"];f&&g.push("ReactCrop--active");if(s){s.aspect&&g.push("ReactCrop--fixed-aspect");!f||s.width&&s.height||g.push("ReactCrop--crop-invisible")}l&&g.push("ReactCrop--disabled");c&&g.push("ReactCrop--locked");n&&g.push.apply(g,d(n.split(" ")));return o.default.createElement("div",{ref:function e(a){t.componentRef=a},className:g.join(" "),style:v,onTouchStart:this.onComponentMouseTouchDown,onMouseDown:this.onComponentMouseTouchDown,role:"presentation",tabIndex:1,onKeyDown:this.onComponentKeyDown},o.default.createElement("img",{ref:function e(a){t.imageRef=a},crossOrigin:i,className:"ReactCrop__image",style:m,src:h,onLoad:function e(a){return t.onImageLoad(a.target)},onError:p,alt:u}),r,b)}}]);return t}(s.PureComponent);j.xOrds=["e","w"];j.yOrds=["n","s"];j.xyOrds=["nw","ne","se","sw"];j.arrowKey={left:37,up:38,right:39,down:40};j.nudgeStep=.2;j.defaultCrop={x:0,y:0,width:0,height:0};j.propTypes={className:c.default.string,crossorigin:c.default.string,children:c.default.oneOfType([c.default.arrayOf(c.default.node),c.default.node]),crop:c.default.shape({aspect:c.default.number,x:c.default.number,y:c.default.number,width:c.default.number,height:c.default.number}),disabled:c.default.bool,locked:c.default.bool,imageAlt:c.default.string,imageStyle:c.default.shape({}),keepSelection:c.default.bool,minWidth:c.default.number,minHeight:c.default.number,maxWidth:c.default.number,maxHeight:c.default.number,onChange:c.default.func.isRequired,onImageError:c.default.func,onComplete:c.default.func,onImageLoaded:c.default.func,onDragStart:c.default.func,onDragEnd:c.default.func,src:c.default.string.isRequired,style:c.default.shape({}),renderSelectionAddon:c.default.func};j.defaultProps={className:void 0,crop:void 0,crossorigin:void 0,disabled:false,locked:false,imageAlt:"",maxWidth:void 0,maxHeight:void 0,minWidth:0,minHeight:0,keepSelection:false,onComplete:function e(){},onImageError:function e(){},onImageLoaded:function e(){},onDragStart:function e(){},onDragEnd:function e(){},children:void 0,style:void 0,imageStyle:void 0,renderSelectionAddon:void 0};t.default=j;t.Component=j;t.makeAspectCrop=O;t.containCrop=C},function(t,a){t.exports=e},function(e,t,a){(function(t){if("production"!==t.env.NODE_ENV){var r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;var n=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r};var i=true;e.exports=a(5)(n,i)}else e.exports=a(8)()}).call(t,a(0))},function(e,t,a){"use strict";(function(t){var r=a(6);var n=a(1);var i=a(7);var s=function(){};"production"!==t.env.NODE_ENV&&(s=function(e){var t="Warning: "+e;"undefined"!==typeof console&&console.error(t);try{throw new Error(t)}catch(e){}});function o(){return null}e.exports=function(e,a){var l="function"===typeof Symbol&&Symbol.iterator;var c="@@iterator";function u(e){var t=e&&(l&&e[l]||e[c]);if("function"===typeof t)return t}var d="<<anonymous>>";var p={array:f("array"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:b(),arrayOf:g,element:_(),instanceOf:y,node:C(),objectOf:k,oneOf:O,oneOfType:E,shape:j,exact:w};function h(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function v(e){this.message=e;this.stack=""}v.prototype=Error.prototype;function m(e){if("production"!==t.env.NODE_ENV){var r={};var i=0}function o(o,l,c,u,p,h,m){u=u||d;h=h||c;if(m!==n){if(a){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");f.name="Invariant Violation";throw f}if("production"!==t.env.NODE_ENV&&"undefined"!==typeof console){var b=u+":"+c;if(!r[b]&&i<3){s("You are manually calling a React.PropTypes validation function for the `"+h+"` prop on `"+u+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.");r[b]=true;i++}}}if(null==l[c]){if(o){if(null===l[c])return new v("The "+p+" `"+h+"` is marked as required in `"+u+"`, but its value is `null`.");return new v("The "+p+" `"+h+"` is marked as required in `"+u+"`, but its value is `undefined`.")}return null}return e(l,c,u,p,h)}var l=o.bind(null,false);l.isRequired=o.bind(null,true);return l}function f(e){function t(t,a,r,n,i,s){var o=t[a];var l=T(o);if(l!==e){var c=A(o);return new v("Invalid "+n+" `"+i+"` of type `"+c+"` supplied to `"+r+"`, expected `"+e+"`.")}return null}return m(t)}function b(){return m(o)}function g(e){function t(t,a,r,i,s){if("function"!==typeof e)return new v("Property `"+s+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var o=t[a];if(!Array.isArray(o)){var l=T(o);return new v("Invalid "+i+" `"+s+"` of type `"+l+"` supplied to `"+r+"`, expected an array.")}for(var c=0;c<o.length;c++){var u=e(o,c,r,i,s+"["+c+"]",n);if(u instanceof Error)return u}return null}return m(t)}function _(){function t(t,a,r,n,i){var s=t[a];if(!e(s)){var o=T(s);return new v("Invalid "+n+" `"+i+"` of type `"+o+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}return m(t)}function y(e){function t(t,a,r,n,i){if(!(t[a]instanceof e)){var s=e.name||d;var o=P(t[a]);return new v("Invalid "+n+" `"+i+"` of type `"+o+"` supplied to `"+r+"`, expected instance of `"+s+"`.")}return null}return m(t)}function O(e){if(!Array.isArray(e)){"production"!==t.env.NODE_ENV?s("Invalid argument supplied to oneOf, expected an instance of array."):void 0;return o}function a(t,a,r,n,i){var s=t[a];for(var o=0;o<e.length;o++)if(h(s,e[o]))return null;var l=JSON.stringify(e);return new v("Invalid "+n+" `"+i+"` of value `"+s+"` supplied to `"+r+"`, expected one of "+l+".")}return m(a)}function k(e){function t(t,a,r,i,s){if("function"!==typeof e)return new v("Property `"+s+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var o=t[a];var l=T(o);if("object"!==l)return new v("Invalid "+i+" `"+s+"` of type `"+l+"` supplied to `"+r+"`, expected an object.");for(var c in o)if(o.hasOwnProperty(c)){var u=e(o,c,r,i,s+"."+c,n);if(u instanceof Error)return u}return null}return m(t)}function E(e){if(!Array.isArray(e)){"production"!==t.env.NODE_ENV?s("Invalid argument supplied to oneOfType, expected an instance of array."):void 0;return o}for(var a=0;a<e.length;a++){var r=e[a];if("function"!==typeof r){s("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+N(r)+" at index "+a+".");return o}}function i(t,a,r,i,s){for(var o=0;o<e.length;o++){var l=e[o];if(null==l(t,a,r,i,s,n))return null}return new v("Invalid "+i+" `"+s+"` supplied to `"+r+"`.")}return m(i)}function C(){function e(e,t,a,r,n){if(!S(e[t]))return new v("Invalid "+r+" `"+n+"` supplied to `"+a+"`, expected a ReactNode.");return null}return m(e)}function j(e){function t(t,a,r,i,s){var o=t[a];var l=T(o);if("object"!==l)return new v("Invalid "+i+" `"+s+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var u=e[c];if(!u)continue;var d=u(o,c,r,i,s+"."+c,n);if(d)return d}return null}return m(t)}function w(e){function t(t,a,i,s,o){var l=t[a];var c=T(l);if("object"!==c)return new v("Invalid "+s+" `"+o+"` of type `"+c+"` supplied to `"+i+"`, expected `object`.");var u=r({},t[a],e);for(var d in u){var p=e[d];if(!p)return new v("Invalid "+s+" `"+o+"` key `"+d+"` supplied to `"+i+"`.\nBad object: "+JSON.stringify(t[a],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var h=p(l,d,i,s,o+"."+d,n);if(h)return h}return null}return m(t)}function S(t){switch(typeof t){case"number":case"string":case"undefined":return true;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(S);if(null===t||e(t))return true;var a=u(t);if(!a)return false;var r=a.call(t);var n;if(a!==t.entries){while(!(n=r.next()).done)if(!S(n.value))return false}else while(!(n=r.next()).done){var i=n.value;if(i&&!S(i[1]))return false}return true;default:return false}}function I(e,t){if("symbol"===e)return true;if("Symbol"===t["@@toStringTag"])return true;if("function"===typeof Symbol&&t instanceof Symbol)return true;return false}function T(e){var t=typeof e;if(Array.isArray(e))return"array";if(e instanceof RegExp)return"object";if(I(t,e))return"symbol";return t}function A(e){if("undefined"===typeof e||null===e)return""+e;var t=T(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function N(e){var t=A(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function P(e){if(!e.constructor||!e.constructor.name)return d;return e.constructor.name}p.checkPropTypes=i;p.PropTypes=p;return p}}).call(t,a(0))},function(e,t,a){"use strict";var r=Object.getOwnPropertySymbols;var n=Object.prototype.hasOwnProperty;var i=Object.prototype.propertyIsEnumerable;function s(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function o(){try{if(!Object.assign)return false;var e=new String("abc");e[5]="de";if("5"===Object.getOwnPropertyNames(e)[0])return false;var t={};for(var a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return false;var n={};"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e});if("abcdefghijklmnopqrst"!==Object.keys(Object.assign({},n)).join(""))return false;return true}catch(e){return false}}e.exports=o()?Object.assign:function(e,t){var a;var o=s(e);var l;for(var c=1;c<arguments.length;c++){a=Object(arguments[c]);for(var u in a)n.call(a,u)&&(o[u]=a[u]);if(r){l=r(a);for(var d=0;d<l.length;d++)i.call(a,l[d])&&(o[l[d]]=a[l[d]])}}return o}},function(e,t,a){"use strict";(function(t){var r=function(){};if("production"!==t.env.NODE_ENV){var n=a(1);var i={};r=function(e){var t="Warning: "+e;"undefined"!==typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function s(e,a,s,o,l){if("production"!==t.env.NODE_ENV)for(var c in e)if(e.hasOwnProperty(c)){var u;try{if("function"!==typeof e[c]){var d=Error((o||"React class")+": "+s+" type `"+c+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[c]+"`.");d.name="Invariant Violation";throw d}u=e[c](a,c,o,s,null,n)}catch(e){u=e}!u||u instanceof Error||r((o||"React class")+": type specification of "+s+" `"+c+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof u+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).");if(u instanceof Error&&!(u.message in i)){i[u.message]=true;var p=l?l():"";r("Failed "+s+" type: "+u.message+(null!=p?p:""))}}}e.exports=s}).call(t,a(0))},function(e,t,a){"use strict";var r=a(1);function n(){}e.exports=function(){function e(e,t,a,n,i,s){if(s===r)return;var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");o.name="Invariant Violation";throw o}e.isRequired=e;function t(){return e}var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};a.checkPropTypes=n;a.PropTypes=a;return a}}])})},,,function(e,t,a){"use strict";var r=a(3);var n=a.n(r);var i=a(26);var s=a.n(i);var o=a(6);var l=a.n(o);var c=a(7);var u=a.n(c);var d=a(8);var p=a.n(d);var h=a(9);var v=a.n(h);var m=a(0);var f=a(1);var b=a.n(f);var g=a(16);var _=a.n(g);var y=a(2);var O=a.n(y);var k=a(13);var E=a(292);var C=a(34);var j=a(25);var w=a(29);var S=Object(j["a"])("Fetches apps from the `apps.index.list` endpoint",function(e,t,a){return e(Object(w["a"])({method:"apps.index.list",args:a,reason:"fetch-apps-index-list"}))});S.propTypes={limit:m["b"].number};var I=Object(j["a"])("Submits a search query and fetches results from `apps.index.search`",function(e,t,a){return e(Object(w["a"])({method:"apps.index.search",args:a,reason:"submit-apps-index-search"}))});I.propTypes={query:m["b"].string};var T=a(45);var A=a(1100);var N=a(310);var P=a(10);var R=a(1534);var M=a(73);var D=a(122);var x=a(28);var F=a(392);var L=a(96);var B=a(51);var U=a(139);var q=a(182);var G=a(894);var W=a(3140);var H=50;var V=new P["b"]("apps_browser");var K={channelId:m["b"].string,hasSeenAppSpaceTutorial:m["b"].bool,experimentGroup:m["b"].string,isInternetExplorer:m["b"].bool,isFirefoxAndWindows:m["b"].bool,isFirefoxAndMac:m["b"].bool,isMacSsbBuild:m["b"].bool,scrollThreshold:m["b"].number,addAppsVariant:m["b"].bool,isUnpaid:m["b"].bool,fetchAppsIndexList:m["b"].func,submitAppsIndexSearch:m["b"].func,clogger:m["b"].object.isRequired,defaultAppIcon:m["b"].string.isRequired,openAboutApp:m["b"].func};var z={channelId:void 0,hasSeenAppSpaceTutorial:false,experimentGroup:"",isInternetExplorer:false,isFirefoxAndWindows:false,isFirefoxAndMac:false,isMacSsbBuild:false,scrollThreshold:500,addAppsVariant:false,isUnpaid:false,fetchAppsIndexList:O.a.noop,submitAppsIndexSearch:O.a.noop,openAboutApp:O.a.noop};var Y={listEnpoint:"apps.index.list",searchEndpoint:"apps.index.search"};var Q={id:"tutorial_category",name:"",display_name:"",apps:[{name:V.t("What are apps?"),short_description:V.t("A quick look at how apps in Slack can streamline your work"),icons:{image_84:cdn_url+"/436da/img/tutorial@2x.png"},app_id:"tutorial_app",bot_id:"",bot_user_id:"",is_installed:false}]};var J=function(e){v()(t,e);function t(e){l()(this,t);var a=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.lastRequestId=0;a.currentDisplayedId=0;a.isMouseMoveEnabled=true;a.firstSelectableAppIndex=e.hasSeenAppSpaceTutorial?1:0;a.runningAppIndex=0;a.showLimitMeter=false;a.appsForLimitMeter=null;a.cloggedLimitMeterImpression=false;a.LimitMeterClogId=null;a.appLimitMeterClogPayload={};a.isPaginating=false;a.state={isShowingDefaultAppCategories:true,isSearching:false,searchTerm:"",appCategories:[],selectedAppIndex:null,showLoadingIndicator:false,showPaginationIndicator:false};a.handleKeydown=a.handleKeydown.bind(a);a.handleMouseMove=a.handleMouseMove.bind(a);a.handleAppsListScroll=a.handleAppsListScroll.bind(a);a.handleAppDirectoryButtonClick=a.handleAppDirectoryButtonClick.bind(a);a.handleSearchInputChange=a.handleSearchInputChange.bind(a);a.handleAppClick=a.handleAppClick.bind(a);a.handleAppMouseLeave=a.handleAppMouseLeave.bind(a);a.handleAppLimitMeterClickClog=a.handleAppLimitMeterClickClog.bind(a);a.fillDefaultAppsList=a.fillDefaultAppsList.bind(a);a.searchApps=a.searchApps.bind(a);a.completeRequest=a.completeRequest.bind(a);a.enableMouseMove=a.enableMouseMove.bind(a);a.throttledSearchApps=O.a.throttle(a.searchApps,500,{leading:false});a.debouncedEnableMouseMove=O.a.debounce(a.enableMouseMove,200);return a}u()(t,[{key:"componentDidMount",value:function e(){var t=this;document.body.addEventListener("keydown",this.handleKeydown);document.body.addEventListener("mousemove",this.handleMouseMove);this.loadingTimeout=setTimeout(function(){t.setState(function(){return{showLoadingIndicator:true}})},300);var a=this.props.fetchAppsIndexList({limit:H}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.defaultAppCategories=[Q].concat(s()(e.categories));return{categories:t.defaultAppCategories}});this.completeRequest(a,Y.listEnpoint,false,this.fillDefaultAppsList)}},{key:"componentWillReceiveProps",value:function e(t){var a=this;var r=this.getSelectedApp();"tutorial_app"===O.a.get(r,"dataset.app_id")&&!this.props.hasSeenAppSpaceTutorial&&t.hasSeenAppSpaceTutorial&&this.setState(function(){return{selectedAppIndex:null}},function(){a.firstSelectableAppIndex=a.state.isShowingDefaultAppCategories?1:0})}},{key:"componentWillUpdate",value:function e(t,a){this.state.isShowingDefaultAppCategories!==a.isShowingDefaultAppCategories&&(this.firstSelectableAppIndex=a.isShowingDefaultAppCategories&&t.hasSeenAppSpaceTutorial?1:0)}},{key:"componentWillUnmount",value:function e(){document.body.removeEventListener("keydown",this.handleKeydown);document.body.removeEventListener("mousemove",this.handleMouseMove)}},{key:"getAppsListHeight",value:function e(){return document.querySelector("[data-apps_list]").scrollHeight}},{key:"getAppIcon",value:function e(t){var a=this.props.defaultAppIcon;return Object(N["a"])(t,72,a)}},{key:"getSelectedApp",value:function e(){return document.querySelector("[data-app_index='"+this.state.selectedAppIndex+"']")}},{key:"getTotalAppsCount",value:function e(){var t=0;for(var a=0;a<this.state.appCategories.length;a++)t+=O.a.get(this.state.appCategories[a],"apps",[]).length;return t}},{key:"enableMouseMove",value:function e(){this.isMouseMoveEnabled=true}},{key:"handleKeydown",value:function e(t){var a=this;var r=0;for(var n=0;n<this.state.appCategories.length;n++)r+=this.state.appCategories[n].apps.length;if(0===r)return;var i=void 0;switch(t.which){case 40:case 9:if(this.isElementTextInput(t.target)){t.stopPropagation();t.preventDefault()}this.isMouseMoveEnabled=false;this.setState(function(e){var t=void 0;t=null===e.selectedAppIndex?a.firstSelectableAppIndex:e.selectedAppIndex===r-1?e.selectedAppIndex:e.selectedAppIndex+1;return{selectedAppIndex:t}},function(){a.scrollSelectedAppIntoView(false);a.debouncedEnableMouseMove()});break;case 38:if(this.isElementTextInput(t.target)){t.stopPropagation();t.preventDefault()}this.isMouseMoveEnabled=false;this.setState(function(e){var r=void 0;r=null===e.selectedAppIndex?a.firstSelectableAppIndex:e.selectedAppIndex===a.firstSelectableAppIndex?a.firstSelectableAppIndex:t.getModifierState("Shift")?a.firstSelectableAppIndex:e.selectedAppIndex-1;return{selectedAppIndex:r}},function(){a.scrollSelectedAppIntoView(false);a.debouncedEnableMouseMove()});break;case 13:i=this.getSelectedApp();i&&this.selectApp(i.dataset);break;default:break}}},{key:"openAboutApp",value:function e(t){this.props.openAboutApp({appId:t.app_id,serviceId:t.bot_id,memberId:t.bot_user_id})}},{key:"isElementTextInput",value:function e(t){return"text"===t.type}},{key:"scrollSelectedAppIntoView",value:function e(){var t=this.getSelectedApp();if(!t)return;var a=document.querySelector("[data-apps_list]");var r=document.querySelector("[data-category_header]");var n=r?r.offsetHeight:0;t.offsetTop<a.scrollTop?a.scrollTop=t.offsetTop-n:t.offsetTop+t.offsetHeight>a.scrollTop+a.offsetHeight&&(a.scrollTop=t.offsetTop+t.offsetHeight-a.offsetHeight)}},{key:"handleAppClick",value:function e(t){this.selectApp(t.currentTarget.dataset)}},{key:"handleAppMouseLeave",value:function e(t){this.getSelectedApp()===t.currentTarget&&this.setState(function(){return{selectedAppIndex:null}})}},{key:"selectApp",value:function e(t){var a=this.props.clogger;var r={app_id:t.app_id,bot_id:t.bot_id,is_from_search:this.state.isShowingDefaultAppCategories?"0":"1",contexts:{core:{app_id:t.app_id,bot_id:t.bot_id}}};if("tutorial_app"===t.app_id)Object(A["e"])();else if("app_limit_meter"===t.app_id){var i=parseInt(t.clogParams.split("=")[1],10);if("pricing_link"===t.clogUiElement){window.open(window.location.origin+"/pricing?ui_step=280&ui_element=5'");a.track("GROWTH_PRICING",{num_of_apps:i,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}});a.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:i,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}})}else{window.open(window.location.origin+"/apps");a.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:i,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_app_directory"}}})}}else if("true"===t.can_app_be_added)Object(A["a"])(t);else if("true"===t.is_installed){this.openAboutApp(t);a.track("APP_INDEX_VIEW_CLICK",r)}else{window.open(window.location.origin+"/apps/"+t.app_id+"?utm_source=in-prod&utm_medium=inprod-btn_app_install-index-click");a.track("APP_INDEX_INSTALL_CLICK",r);a.track("APP_CLICK_BTN_APP_INSTALL_IN_INDEX",n()({},r,{contexts:n()({},r.contexts,{ui_context:{step:"index",action:"click",ui_element:"btn_app_install"}})}))}}},{key:"handleMouseMove",value:function e(t){if(!this.isMouseMoveEnabled)return;var a=t.target.closest("[data-app]");a&&this.setState(function(){return{selectedAppIndex:parseInt(a.dataset.app_index,10)}})}},{key:"handleAppsListScroll",value:function e(t){var a=t.currentTarget;var r=a.offsetHeight+a.scrollTop+this.props.scrollThreshold;this.state.isShowingDefaultAppCategories&&r>a.scrollHeight&&this.loadMoreApps(this.state.appCategories[1],Y.listEnpoint)}},{key:"handleAppDirectoryButtonClick",value:function e(){var t=this.props.clogger;window.open(window.location.origin+"/apps?utm_source=in-prod&utm_medium=inprod-link_app_directory-index-click");t.track("APP_INDEX_VIEW_APP_DIRECTORY_CLICK");t.track("APP_CLICK_LINK_APP_DIRECTORY_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_app_directory"}}})}},{key:"handleAppLimitMeterClickClog",value:function e(){var t=this.props.clogger;if("GROWTH_PRICING"===this.LimitMeterClogId){this.appLimitMeterClogPayload.contexts.ui_context.action="click";t.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload)}}},{key:"handleSearchInputChange",value:function e(t){var a=t.target.value;this.setState(function(){return{searchTerm:a}});this.throttledSearchApps(a)}},{key:"fillDefaultAppsList",value:function e(){var t=this.state.appCategories[1];if(t.next_cursor&&window.innerHeight-230>this.getAppsListHeight())this.loadMoreApps(t,Y.listEnpoint,this.fillDefaultAppsList);else{this.setState(function(){return{showLoadingIndicator:false}});clearTimeout(this.loadingTimeout)}}},{key:"loadMoreApps",value:function e(t,a,r){var i=this;if(this.isPaginating)return;if(!t.next_cursor)return;var o={category:t.id,cursor:t.next_cursor,limit:H};a===Y.searchEndpoint&&(o.query=this.state.searchTerm);var l=setTimeout(function(){i.setState(function(){return{showPaginationIndicator:true}})},300);this.isPaginating=true;this.lastRequestId+=1;var c=this.lastRequestId;var u=a===Y.searchEndpoint?this.props.submitAppsIndexSearch:this.props.fetchAppsIndexList;u(o).then(function(e){if(c<i.lastRequestId)return;var o=e.categories[0];if(!o)return;i.setState(function(e){if(c<i.lastRequestId)return{};for(var r=0;r<e.appCategories.length;r++)if(e.appCategories[r].id===t.id){var l=[].concat(s()(e.appCategories[r].apps),s()(o.apps));var u=n()({},e.appCategories[r]);u.apps=l;u.next_cursor=o.next_cursor;var d=[].concat(s()(e.appCategories));d[r]=u;a===Y.listEnpoint&&(i.defaultAppCategories=d);return{appCategories:d,showPaginationIndicator:false}}return{}},function(){i.isPaginating=false;clearTimeout(l);r&&"function"===typeof r&&r()})})}},{key:"searchApps",value:function e(t){var a=this;var r=this.props.clogger;if(t){var n=setTimeout(function(){a.setState(function(){return{isSearching:true}})},300);var i=this.props.submitAppsIndexSearch({query:t}).then(function(e){clearTimeout(n);a.setState(function(){return{isShowingDefaultAppCategories:false,isSearching:false}});return e});this.completeRequest(i,Y.searchEndpoint,true);r.track("APP_INDEX_SEARCH")}else this.setState(function(){return{showLoadingIndicator:false,appCategories:a.defaultAppCategories,isShowingDefaultAppCategories:true}})}},{key:"completeRequest",value:function e(t,a,r,n){var i=this;this.lastRequestId+=1;var s=this.lastRequestId;t.then(function(e){if(s>i.currentDisplayedId){i.currentDisplayedId=s;var t={appCategories:e.categories,selectedAppIndex:O.a.get(e,"categories[0].apps",[]).length&&a===Y.searchEndpoint?0:null};r&&(t.showLoadingIndicator=false);if(i.props.addAppsVariant){var o=O.a.map(O.a.filter(O.a.flatMap(e.categories,"apps"),"bot_user_id"),"bot_user_id");Object(A["c"])(o).then(function(){i.updateAfterRequest(t,n)})}else i.updateAfterRequest(t,n)}}).catch(O.a.noop)}},{key:"updateAfterRequest",value:function e(t,a){this.setState(function(){return t},function(){a&&"function"===typeof a&&a()})}},{key:"createAppCategoryMarkup",value:function e(t,a){var r=this;return t.apps.map(function(e,t){var n=a+t;var i=_()("p-apps_browser__app",{"p-apps_browser__app--selected":n===r.state.selectedAppIndex});var s="app-"+e.app_id+"-"+e.bot_id;var o=r.getAppIcon(e);var l=r.props.addAppsVariant&&e.is_installed&&Object(A["b"])(e.bot_user_id);var c=V.t("Install");"tutorial_app"===e.app_id?c=V.t("Start"):l?c=V.t("Add"):e.is_installed&&(c=V.t("View"));return b.a.createElement("div",{key:s,className:i,onClick:r.handleAppClick,onMouseLeave:r.handleAppMouseLeave,"data-app":true,"data-app_index":n,"data-is_installed":e.is_installed,"data-app_id":e.app_id,"data-bot_id":e.bot_id,"data-bot_user_id":e.bot_user_id,"data-can_app_be_added":l||null,"data-qa":"apps_browser_row",role:"presentation"},b.a.createElement("img",{className:"p-apps_browser__app_icon",src:o,alt:"App icon"}),b.a.createElement("div",{className:"p-apps_browser__app_info"},b.a.createElement("div",{className:"p-apps_browser__app_name"},b.a.createElement("strong",null,e.name)),b.a.createElement("div",{className:"p-apps_browser__app_description"},Object(R["a"])(e.short_description,function(e,t){return b.a.createElement("strong",{key:t},e)}))),b.a.createElement(x["d"],{"data-qa":"apps_browser_row_action",className:"p-apps_browser__app_action",type:"outline"},c))})}},{key:"createAppCategoriesMarkup",value:function e(){var t=this;this.runningAppIndex=0;return this.state.appCategories.map(function(e){if(!O.a.get(e,"apps",[]).length)return null;var a="category-"+e.id;var r=_()("p-apps_browser__category_section",{"p-apps_browser__category_section--tutorial":"tutorial_category"===e.id},{"p-apps_browser__category_section--hidden":"tutorial_category"===e.id&&(t.props.hasSeenAppSpaceTutorial||!t.state.isShowingDefaultAppCategories||t.showLimitMeter)});var n=_()("p-apps_browser__category_header");var i=t.createAppCategoryMarkup(e,t.runningAppIndex);t.runningAppIndex+=e.apps.length;return b.a.createElement("section",{key:a,className:r},b.a.createElement("div",{className:n,"data-category_header":true},e.display_name),i)},this)}},{key:"createColorLimitMeterMarkup",value:function e(){return this.appsForLimitMeter.map(function(e,t){var a="color-meter-"+t;var r=_()({hidden:0===t,first:1===t,meter_first_green:t<4&&"blank_box"!==e.short_description,meter_second_green:4===t&&"blank_box"!==e.short_description,meter_third_green:5===t&&"blank_box"!==e.short_description,meter_fourth_green:6===t&&"blank_box"!==e.short_description,meter_yellow:7===t&&"blank_box"!==e.short_description,meter_orange:8===t&&"blank_box"!==e.short_description,meter_red:9===t&&"blank_box"!==e.short_description,on:"blank_box"!==e.short_description,off:"blank_box"===e.short_description&&1!==t});return b.a.createElement("li",{className:r,key:a})})}},{key:"createAppsForLimitMeterMarkup",value:function e(t){var a=this;if(!O.a.get(t,"apps",[]).length)return null;var r=10;this.appsForLimitMeter=JSON.parse(JSON.stringify(t.apps));var n=r-t.apps.length;while(n>0){var i={app_id:n,name:"Try a new app",short_description:"blank_box"};this.appsForLimitMeter.push(i);n-=1}this.appsForLimitMeter[0].align="ts_tip_left";this.appsForLimitMeter[r-1].align="ts_tip_right";return this.appsForLimitMeter.map(function(e,t){var r="limit-apps-"+t;var n=_()("p-apps_browser__app_limit_meter__apps","inline_block","ts_tip","ts_tip_bottom",{"p-apps_browser__app_limit_meter__blank_app_box":"blank_box"===e.short_description,is_ff_and_win:a.props.isFirefoxAndWindows,is_ff_and_mac:a.props.isFirefoxAndMac,is_ie:a.props.isInternetExplorer,ts_tip_right:"ts_tip_right"===e.align,ts_tip_left:"ts_tip_left"===e.align,no_left_margin:"ts_tip_left"===e.align});var i=_()("ts_tip_tip",{large_top_margin:"blank_box"===e.short_description,medium_top_margin:"blank_box"!==e.short_description});var s="blank_box"===e.short_description?null:a.getAppIcon(e);return b.a.createElement("div",{className:n,key:r},b.a.createElement("img",{className:"align_top",src:s,alt:""}),b.a.createElement("span",{className:i},e.name))})}},{key:"createAppLimitMeterMarkup",value:function e(){var t=this;return this.state.appCategories.map(function(e){var a=10;var r=O.a.get(e,"apps",[]).length;var n=t.props,i=n.isUnpaid,s=n.isFirefoxAndWindows,o=n.isFirefoxAndMac,l=n.clogger;if(!r||r>a||"Ai01"!==e.id||!t.state.isShowingDefaultAppCategories)return null;var c=t.getSelectedApp();var u="num_of_apps="+r;var d=!!r;var p="limit-meter-"+e.id;t.showLimitMeter=d&&i;if(!t.showLimitMeter)return null;t.firstSelectableAppIndex=0;var h=void 0;var v=void 0;var m=void 0;var f=void 0;var g=void 0;var y=_()("p-apps_browser__app_limit_meter__color_meter",{is_ff_and_win:s});var k=_()("p-apps_browser__app_limit_meter",{is_ff_and_mac:o});if(r<6){h=V.t("Add apps to get things done");v=V.t("Schedule meetings, share docs, and more \u2014\xa0straight from Slack. ");m=V.t("See app suggestions");f="/apps?utm_source=in-prod&utm_medium=inprod-link_see_app_suggestions-apps_browser-click";t.LimitMeterClogId="UPGRDEXP_LIMIT_APPSPACE";g="link_app_directory"}else if(r>5){h=V.t("Upgrade for unlimited apps");v=V.t("Your team\u2019s up and running \u2014\xa0they\u2019re using {numOfApps} apps already. On a paid plan you can add as many as you\u2019d like. ",{numOfApps:r});m=V.t("Learn more");f="/pricing?ui_step=280&ui_element=5";t.LimitMeterClogId="GROWTH_PRICING";g="pricing_link"}t.appLimitMeterClogPayload={num_of_apps:r,contexts:{ui_context:{step:"apps_browser",action:"impression",ui_element:g}}};if(!t.cloggedLimitMeterImpression){if("GROWTH_PRICING"===t.LimitMeterClogId){l.track(t.LimitMeterClogId,t.appLimitMeterClogPayload);l.track("UPGRDEXP_LIMIT_APPSPACE",t.appLimitMeterClogPayload)}else{l.track(t.LimitMeterClogId,t.appLimitMeterClogPayload);l.track("APP_CLICK_LINK_SEE_APP_SUGGESTIONS_IN_APPS_BROWSER",{contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_see_app_suggestions"}}})}t.cloggedLimitMeterImpression=true}var E=_()({hidden:t.props.isMacSsbBuild&&"pricing_link"===g,bold:"app_limit_meter"===O.a.get(c,"dataset.app_id")});var C=t.createAppsForLimitMeterMarkup(e);var j=t.createColorLimitMeterMarkup();return b.a.createElement("div",{className:"p-apps_browser__app_limit_meter__container",key:p},b.a.createElement("div",{className:k},b.a.createElement("p",{className:"p-apps_browser__app_limit_meter__heading very_small_bottom_margin"},b.a.createElement("b",null,h)),b.a.createElement("p",{className:"p-apps_browser__app_limit_meter__paragraph"},v,b.a.createElement(B["a"],{className:E,href:f,target:"new","data-app":true,"data-app_index":t.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":t.LimitMeterClogId,"data-clog-ui-element":g,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":u,onClick:t.handleAppLimitMeterClickClog},m)),b.a.createElement("div",null,b.a.createElement("div",{className:"p-apps_browser__app_limit_meter__apps_container"},C),b.a.createElement("ul",{className:y},j))))})}},{key:"render",value:function e(){var t=this.props,a=t.addAppsVariant,r=t.channelId,n=t.experimentGroup;var i=void 0;var s=_()("p-apps_browser__apps_list",{"p-apps_browser__apps_list--loading":this.state.showLoadingIndicator,"p-apps_browser__apps_list--paginating":this.state.showPaginationIndicator});var o=void 0;o=a&&r?b.a.createElement("h2",{className:"overflow_hidden"},V.rt("Add apps to {channelName}",{channelName:b.a.createElement(U["a"],{channelId:r,inline:true,className:"overflow_ellipsis"})})):b.a.createElement("h2",null,V.t("Browse Apps"));i=!this.getTotalAppsCount()&&this.state.searchTerm?b.a.createElement("section",{key:"no-results",className:"p-apps_browser__no_results"},V.t("There are no apps matching"),"\xa0",b.a.createElement("strong",null,this.state.searchTerm)):this.createAppCategoriesMarkup();var l=this.createAppLimitMeterMarkup();return b.a.createElement("div",{className:"p-apps_browser"},b.a.createElement("div",{className:"p-apps_browser__filter_container"},b.a.createElement("div",{className:"p-apps_browser__filter_header"},o,b.a.createElement(x["d"],{className:"p-apps_browser__browse_apps flex_shrink_none",size:"large",type:"treatment"===n?"primary":"outline",onClick:this.handleAppDirectoryButtonClick},V.t("View App Directory"))),b.a.createElement("div",null,b.a.createElement(F["a"],{placeholder:V.t("Search by name or category (e.g. productivity, sales)"),icon:"search",autoFocus:true,isLoading:this.state.isSearching,onChange:this.handleSearchInputChange,value:this.state.searchTerm}))),b.a.createElement("div",{className:s,onScroll:this.handleAppsListScroll,"data-apps_list":true},l,i,b.a.createElement(L["a"],{className:"p-apps_browser__spinner",size:"jumbo"})))}}]);return t}(f["Component"]);J.displayName="AppsBrowser";J.defaultProps=z;var Z=function e(t){var a=Object(C["f"])(t,"seen_app_space_tutorial");var r=Object(D["getGroupForUser"])(t,"platform_app_browser_green_button");var n=Object(M["a"])(t);return{channelId:n,hasSeenAppSpaceTutorial:a,experimentGroup:r,clogger:Object(T["a"])({state:t}),defaultAppIcon:Object(q["getDefaultAppIcon"])(t)}};var X=function e(t){return Object(E["bindActionCreators"])({fetchAppsIndexList:S,submitAppsIndexSearch:I,openAboutApp:G["b"]},t)};var $=t["a"]=Object(k["connect"])(Z,X)(J)},function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(15);var s=a(48);var o=a(354);var l=a(163);var c=a(4278);var u=a(292);var d=a(13);var p=a(0);var h=a(10);var v=a(45);var m=a(128);var f=a(22);var b=a(1543);var g=a(34);var _=a(333);var y=new h["b"]("apps_browser");function O(e){var t=e.tutorialSeen,a=e.setAppSpaceSeen,i=e.clogger;var s=Object(r["useCallback"])(function(){i.track("APP_INDEX_MANAGE_CLICK",null);i.track("APP_CLICK_LINK_MANAGE_APPS_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_manage_apps"}}})},[i]);var o=Object(r["useCallback"])(function(){t||a();i.track("APP_TUTORIAL_VIEW",null)},[i,a,t]);return n.a.createElement("div",{className:"p-apps_browser_links"},n.a.createElement(m["a"],{className:"p-apps_browser_links__link",href:"/apps/manage?utm_source=in-prod&utm_medium=inprod-link_manage_apps-index-click",onClick:s,"data-qa":"apps_browser_manage_apps"},n.a.createElement(f["b"],{type:"cog-o",inline:true,className:"p-apps_browser_links__link_icon"}),y.t("Manage apps...")),t&&n.a.createElement(b["a"],{tooltipPosition:"bottom",unstyled:true},n.a.createElement(m["a"],{className:"p-apps_browser_links__link","data-qa":"apps_browser_view_tutorial",onClick:o},n.a.createElement(f["b"],{type:"lightbulb-o",inline:true,className:"p-apps_browser_links__link_icon"}),y.t("What are apps?"))))}O.displayName="AppsBrowserHeaderLinks";var k="seen_app_space_tutorial";var E=function e(t){return{tutorialSeen:Object(g["f"])(t,k),clogger:Object(v["a"])({state:t})}};var C=function e(t){return Object(u["bindActionCreators"])({setAppSpaceSeen:function e(){return Object(_["b"])({pref:k,value:true})}},t)};var j=Object(d["connect"])(E,C)(O);function w(e){return n.a.createElement(o["a"],{showGoButton:false,showCancelButton:false,contentLabel:"apps_browser_modal","data-qa":"apps_browser_modal"},n.a.createElement(j,null),n.a.createElement(l["a"],null,n.a.createElement("div",{className:"p-apps_browser_container"},n.a.createElement(c["a"],e))))}w.displayName="AppsBrowserModal";var S=Object(i["b"])("Opens the apps browser modal",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(v["a"])({getState:t}).track("APP_INDEX_OPEN",null);e(Object(s["openModal"])({element:n.a.createElement(w,a)}))});S.propTypes={};var I=S;var T=a(44);Object(T["a"])("interop.openAppsBrowserModal",function(){return TS.redux.dispatch(I())})},function(e,t,a){"use strict";a.r(t);var r=a(1);var n=a.n(r);var i=a(88);var s=a.n(i);var o=a(13);var l=a(119);var c=a(27);var u=a(4278);var d=u["a"];var p=a(163);var h=function e(t,a,r){if(!t)throw new Error("mountAppsBrowser must be called with a teamId parameter");Object(l["a"])(n.a.createElement(o["Provider"],{store:Object(c["d"])(t)},n.a.createElement(p["a"],null,n.a.createElement(d,r))),a)};var v=function e(t){s.a.unmountComponentAtNode(t)};var m={mountAppsBrowser:h};var f=a(44);Object(f["a"])("interop.mountAppsBrowser",h);Object(f["a"])("interop.unmountAppsBrowser",v)},,function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var r=a(3);var n=a.n(r);var i=a(2);var s=a.n(i);var o=a(37);var l=a.n(o);var c=a(42);var u=a(901);var d=a(58);var p=a.n(d);var h=a(6);var v=a.n(h);var m=a(7);var f=a.n(m);var b=a(45);var g=function(){function e(){v()(this,e)}f()(e,[{key:"reportLocale",value:function e(){if(!c["isDesktop"])return;var t=Object(c["getLocaleInformation"])();t&&Object(b["a"])().track("SYSTEM_LOCALE",t)}},{key:"reportCrash",value:function e(){if(!c["isDesktop"])return;var t=Object(c["getCrashInformation"])();t&&Object(b["a"])().track("DESKTOP_CRASH",t)}},{key:"reportHang",value:function e(){if(!c["isDesktop"])return;var t=Object(c["getHangInformation"])();t&&Object(b["a"])().track("DESKTOP_HANG",t)}},{key:"reportDisplays",value:function e(){if(!c["isDesktop"])return;var t=Object(c["getDisplayInformation"])();if(!t||!t.displays||!t.windowFrame)return;var a=t.displays,r=t.windowFrame;var n=r.size,i=r.position;var s=p()(n,2),o=s[0],l=s[1];var u=p()(i,2),d=u[0],h=u[1];var v=[o||0,l||0,d||0,h||0];var m=[];a.forEach(function(e){if(e&&e.size&&e.size.width&&e.size.height){m.push(e.size.width);m.push(e.size.height)}m.push(e.scaleFactor||1)});Object(b["a"])().track("DISPLAY_INFO",{display_resolutions:m,window_frame:v})}}]);return e}();var _=a(30);var y=function(){function e(){v()(this,e)}f()(e,[{key:"updateElements",value:function e(t){var a=this;var r=[];Array.isArray(t)&&t.filter(function(e){return e&&e.getBoundingClientRect}).forEach(function(e){return r.push(a.updateElement(e))});return r}},{key:"updateElement",value:function e(t,a){var r=a||t.id||t.type+"."+t.classList.toString().replace(/ /g,".");var n=t.getBoundingClientRect();var i={id:r,width:Math.round(n.width+2),height:Math.round(n.height+2),top:Math.round(n.top),left:Math.round(n.left)};var s=Object(_["isSSBAndAtLeastVersion"])("3.0.0");if(i.width<2&&i.height<2&&s){var o=Object(c["getNoDragRegions"])();var l=o.filter(function(e){return e.id!==i.id});o.length>l.length&&Object(c["updateNoDragRegion"])(l)}else Object(c["updateNoDragRegion"])(i);return i}}]);return e}();var O=a(1786);var k=a(298);var E=a(1767);var C=a(168);var j=a(1771);var w=a(20);var S=Object(w["b"])("TS.inline_videos.maybeStopInlineVideoPlayback");var I=a(1367);var T=a(407);var A=a(1047);var N=a(100);var P=a(0);var R=a(841);var M=a(1);var D=a.n(M);var x=a(15);var F=a(48);var L=a(4);var B=a(8);var U=a.n(B);var q=a(9);var G=a.n(q);var W=a(13);var H=a(10);var V=a(915);var K=a(1454);var z=new H["b"]("channel_browser");var Y={value:P["b"].string.isRequired,onChange:P["b"].func.isRequired};var Q=function(e){G()(t,e);function t(e){v()(this,t);var a=U()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onChange=a.onChange.bind(a);return a}f()(t,[{key:"onChange",value:function e(t){this.props.onChange(t.target.value||"")}},{key:"render",value:function e(){return D.a.createElement(K["a"],{value:this.props.value,onChange:this.onChange,icon:"search",placeholder:z.t("Search channels"),autoFocus:true,className:"small_bottom_margin"})}}]);return t}(M["PureComponent"]);Q.displayName="ChannelBrowserInput";var J=Q;var Z=a(1853);var X={textSelectLabel:P["b"].string,minOptionsListWidth:P["b"].number};var $={textSelectLabel:null,minOptionsListWidth:null};function ee(e){return D.a.createElement(Z["a"],n()({textSelect:true},e))}ee.displayName="TextSelect";ee.defaultProps=$;var te=ee;var ae=new H["b"]("channel_browser");var re={filter:P["b"].string.isRequired,onChange:P["b"].func.isRequired};var ne=function(e){G()(t,e);function t(e){v()(this,t);var a=U()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onOptionSelected=a.onOptionSelected.bind(a);a.renderSelectedOption=a.renderSelectedOption.bind(a);return a}f()(t,[{key:"onOptionSelected",value:function e(t){this.props.onChange(t.value)}},{key:"getFilterOptions",value:function e(){return[{value:"all",label:ae.t("All channels")},{value:"private",label:ae.t("Private channels")},{value:"archived",label:ae.t("Archived channels")}]}},{key:"findOption",value:function e(t){return this.getFilterOptions().find(function(e){return e.value===t})}},{key:"renderSelectedOption",value:function e(t){return D.a.createElement(D.a.Fragment,null,D.a.createElement("strong",null,ae.t("Show:"))," ",t.label)}},{key:"render",value:function e(){var t=this.getFilterOptions();var a=this.findOption(this.props.filter);return D.a.createElement(te,{options:t,selectedOption:a,onOptionSelected:this.onOptionSelected,renderSelectedOption:this.renderSelectedOption,minOptionsListWidth:200,className:"inline_block"})}}]);return t}(M["Component"]);ne.displayName="ChannelBrowserFilterDropdown";var ie=ne;var se=new H["b"]("channel_browser");var oe={sort:P["b"].string.isRequired,onChange:P["b"].func.isRequired};var le=function(e){G()(t,e);function t(e){v()(this,t);var a=U()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onOptionSelected=a.onOptionSelected.bind(a);a.renderSelectedOption=a.renderSelectedOption.bind(a);return a}f()(t,[{key:"onOptionSelected",value:function e(t){this.props.onChange(t.value)}},{key:"getSortOptions",value:function e(){return[{value:"name",label:se.t("Channel name",{fallbackHash:"d5eb68fc10bc6fa57a8fa118cff91133adabd4bb"})},{value:"creator",label:se.t("Name of creator",{fallbackHash:"e832f4015a076251872f50071bb4923be7d0ef50"})},{value:"created",label:se.t("Creation date (newest first)",{fallbackHash:"67096ef1e182866cd27f176578c135e09b1344e1"})},{value:"members_desc",label:se.t("Members (most to fewest)")},{value:"members_asc",label:se.t("Members (fewest to most)")}]}},{key:"findOption",value:function e(t){return this.getSortOptions().find(function(e){return e.value===t})}},{key:"renderSelectedOption",value:function e(t){return D.a.createElement(D.a.Fragment,null,D.a.createElement("strong",null,se.t("Sort:"))," ",t.label)}},{key:"render",value:function e(){var t=this.getSortOptions();var a=this.findOption(this.props.sort);return D.a.createElement(te,{options:t,selectedOption:a,onOptionSelected:this.onOptionSelected,renderSelectedOption:this.renderSelectedOption,minOptionsListWidth:300,className:"inline_block"})}}]);return t}(M["Component"]);le.displayName="ChannelBrowserSortDropdown";var ce=le;var ue=a(312);var de=a(537);var pe=a(899);var he=a(1183);var ve=a(4269);var me={channelId:P["b"].string,channel:P["b"].object,className:P["b"].string,secondaryContent:P["b"].node,isSelected:P["b"].bool};var fe={channelId:void 0,channel:void 0,className:void 0,secondaryContent:void 0,isSelected:false};function be(e){var t=e.className,a=e.secondaryContent,r=e.isSelected,n=l()(e,["className","secondaryContent","isSelected"]);return D.a.createElement(he["a"],{className:t,primaryContent:D.a.createElement(ve["a"],n),secondaryContent:a,size:"medium",isSelected:r})}be.displayName="MediumChannelListEntity";be.defaultProps=fe;var ge=be;var _e=200;var ye={query:P["b"].string.isRequired,fetchSearchModule:P["b"].func.isRequired};var Oe=function(e){G()(t,e);function t(e){v()(this,t);var a=U()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.fetchPost=Object(i["debounce"])(a.fetchPost.bind(a),_e);a.renderRow=a.renderRow.bind(a);a.state={channels:[],page:1,reachedEnd:false};a.fetchPromise=null;return a}f()(t,[{key:"componentWillUnmount",value:function e(){this.fetchPromise&&this.fetchPromise.cancel();this.fetchPost.cancel()}},{key:"fetchPost",value:function e(){var t=this;if(this.fetchPromise)return;if(this.state.reachedEnd)return;this.fetchPromise=this.props.fetchSearchModule({module:"channels",query:this.props.query,page:this.state.page,reason:"channel-browser"}).then(function(e){if(!e.items)return;if(!e.pagination)return;t.setState(function(t){var a=e.items.map(function(e){return e.id});return{channels:t.channels.concat(a),page:t.page+1,reachedEnd:t.page>=e.pagination.page_count}})}).finally(function(){t.fetchPromise=null})}},{key:"renderRow",value:function e(t){var a=this.state.channels[t];return D.a.createElement(ge,{channelId:a})}},{key:"render",value:function e(){var t=this;return D.a.createElement(pe["a"],null,function(e){var a=e.width,r=e.height,n=e.measureRef;return D.a.createElement("div",{className:"p-channel_browser__list_container",ref:n},D.a.createElement(de["a"],{width:a,height:r,keys:t.state.channels,rowRenderer:t.renderRow,loadPost:t.fetchPost,loadAround:t.fetchPost}))})}}]);return t}(M["Component"]);Oe.displayName="ChannelBrowserList";var ke={fetchSearchModule:function e(){return ue["c"].apply(void 0,arguments)}};var Ee=Object(W["connect"])(null,ke)(Oe);var Ce=a(4308);var je=new H["b"]("channel_browser");var we={featureSonicChannelBrowser:P["b"].bool};var Se={featureSonicChannelBrowser:false};var Ie=function(e){G()(t,e);function t(e){v()(this,t);var a=U()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));a.onQueryChange=a.onQueryChange.bind(a);a.onFilterChange=a.onFilterChange.bind(a);a.onSortChange=a.onSortChange.bind(a);a.state={query:"",filter:"all",sort:"name"};return a}f()(t,[{key:"onQueryChange",value:function e(t){this.setState(function(){return{query:t}})}},{key:"onFilterChange",value:function e(t){this.setState(function(){return{filter:t}})}},{key:"onSortChange",value:function e(t){this.setState(function(){return{sort:t}})}},{key:"render",value:function e(){if(!this.props.featureSonicChannelBrowser)return null;return D.a.createElement(V["a"],{showCancelButton:false,showGoButton:false,title:je.t("Browse Channels"),modalBodyClasses:"p-channel_browser__body"},D.a.createElement("div",{className:"p-channel_browser__controls"},D.a.createElement(J,{value:this.state.query,onChange:this.onQueryChange}),D.a.createElement(ie,{filter:this.state.filter,onChange:this.onFilterChange}),D.a.createElement(ce,{sort:this.state.sort,onChange:this.onSortChange})),D.a.createElement(Ee,{query:this.state.query,key:this.state.query}))}}]);return t}(M["Component"]);Ie.displayName="ChannelBrowser";Ie.defaultProps=Se;var Te=Ie;var Ae=function e(t){return{featureSonicChannelBrowser:Object(L["isFeatureEnabled"])(t,"feature_sonic_channel_browser")}};var Ne=Object(W["connect"])(Ae)(Ie);var Pe=Object(x["b"])("Opens the Channel Browser",function(e,t){if(!Object(L["isFeatureEnabled"])(t(),"feature_sonic_channel_browser"))return;e(Object(F["openModal"])({element:D.a.createElement(Ne,null)}))});Pe.propTypes=null;var Re=Pe;var Me=a(4205);var De=a(4195);var xe=a(803);var Fe=a(1186);var Le=a(316);var Be=a(24);var Ue=a(17);var qe=a(12);var Ge=a(60);var We=a(145);var He=a(38);var Ve={},Ke=Ve.refetchAuthForTeamId;var ze="[DEEP-LINK]";var Ye=Object(x["b"])("Performs deep link handling for arguments parsed from a slack: URI",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var r=Object(qe["a"])({getState:t,label:ze});r.info("handleParsedDeepLink: received "+a);var n=a.cmd,i=l()(a,["cmd"]);if(!n){r.warn("Missing command in payload, skipping deep link");return Promise.resolve(false)}var s=i.id,o=i.item,c=i.team;if(!c){r.warn("Missing team in payload, skipping deep link");return Promise.resolve(false)}var u=Object(Be["b"])(t());e(Object(F["closeModal"])());r.info("About to handle '"+n+"' command\u2026");var d="'"+n+"' is not yet implemented!";switch(n){case"browse":if("channels"===o)return e(Re());r.warn("No 'browse' command for item: "+o);return Promise.resolve(false);case"channel":return e(Object(R["a"])({teamId:c,channelId:s,ts:i.message,threadTs:i.thread_ts}));case"create":if("channel"===o)return e(Object(Me["a"])());r.warn("No 'create' command for item: "+o);return Promise.resolve(false);case"file":return e(Object(N["c"])({fileId:s}));case"invite":if(Object(Ue["isAdmin"])(u))return e(Object(De["a"])());r.warn("User does not have access to invites");return Promise.resolve(false);case"notifications":return e(Object(xe["a"])({activeSection:"notifications"}));case"preferences":return e(Object(xe["a"])({activeSection:i.section}));case"share-file":e(Object(Fe["a"])({fileId:s,showFileType:true}));return e(Object(N["c"])({fileId:s}));case"user":return e(Object(Le["a"])({id:s}));case"files":case"team":default:r.warn(d);return Promise.resolve(false)}});Ye.propTypes={cmd:P["b"].string.isRequired,team:P["b"].string.isRequired,id:P["b"].string,message:P["b"].string,thread_ts:P["b"].string};var Qe=Object(x["b"])("Performs deep link handling for a slack: URI",function(e,t,a){var r=Object(qe["a"])({getState:t,label:ze});r.info("handleDeepLink: received "+a);if(!a||!a.startsWith("slack://")){r.warn("Deep link is empty or not a slack: link");return Promise.resolve(false)}var s=Object(Ge["parseUrl"])(a),o=s.protocol,l=s.pathname;var c=Object(i["trimStart"])(l,"/");if("slack:"!==o){r.warn("Parsed link is not a slack: link");return Promise.resolve(false)}var u=Object(Ge["urlQueryStringParse"])(a);r.info("Parsed arguments from deep link",n()({cmd:c},u));return e(Ye(n()({cmd:c},u)))});Qe.propTypes=P["b"].string.isRequired;var Je=Object(x["b"])("Performs deep link handling for serialized JSON from the SSB",function(e,t,a){var r=Object(qe["a"])({getState:t,label:ze});r.info("handleDeepLinkFromDesktop: received deep link from desktop: "+a);var n=Ze(a);if(!n){r.warn("Failed to parse the payload, skipping deep link");return Promise.resolve(false)}if(!n.teamId&&Object(He["a"])()&&Object(We["a"])(n.cmd.toUpperCase()))return Ke(n.cmd.toUpperCase());return e(Ye(n))});Je.propTypes=P["b"].string.isRequired;function Ze(e){try{return JSON.parse(e)}catch(e){return null}}var Xe=a(1518);var $e=a(850);var et=a(683);var tt=a(193);var at=a(34);var rt=a(309);var nt=a(73);var it=a(233);var st=a(67);var ot=a(35);var lt=a(31);var ct=a(690);var ut=a(311);var dt=a(1292);var pt=a(181);var ht=a(294);var vt={},mt=vt.setFocusedWorkspace,ft=vt.focusNextWorkspace,bt=vt.focusPreviousWorkspace;var gt=["https://www.dropbox.com/chooser?","https://www.dropbox.com/saver?","https://account.box.com/index.php?","https://account.box.com/webviews/login/box_select?","https://app.box.com/index.php?","https://app.boxcn.net","https://ent.box.com","https://onedrive.live.com",/^https:\/\/[\w.-]+my\.sharepoint\.com\//];var _t=["files/import/box","files/import/dropbox","files/import/gdrive","files/create/gdrive/auth","files/import/onedrive",/files\/(T[A-Z0-9]{8,}|W[A-Z0-9]{8,})\/F[A-Z0-9]{8,}/];var yt=Object(qe["b"])();function Ot(){return Object(et["setScreenReaderEnabled"])(Object(c["isScreenReaderEnabled"])())}function kt(e,t){if(!t)return false;if(t.startsWith("chrome://"))return true;if(Object(Ge["isGantryUrl"])(t))return true;if(gt.some(function(e){return e instanceof RegExp?e.test(t):t.startsWith(e)}))return true;var a=Object(lt["getTeamUrl"])(Object(ot["d"])(e));return _t.some(function(e){return e instanceof RegExp?t.startsWith(""+a)&&e.test(t):t.startsWith(""+a+e)})}function Et(e,t,a,r){yt.info("DESKTOP","notificationActivated",{channelId:t,messageTs:a,threadTs:r});e(Object(u["a"])({channelId:t,messageTs:a,threadTs:r}))}function Ct(e){var t=Object(nt["a"])(e);var a=[];if(t){a=Object(i["take"])(Object(i["values"])(Object(st["b"])(e,t)),50);Object(_["isMac"])()||Object(_["isSSBAndAtLeastVersion"])("3.3.0")||(a=a.map(function(e){return e.subtype?e:Object(i["omit"])(e,"subtype")}))}return{user_id:Object(L["getCurrentUserId"])(e),msgs:a}}function jt(){var e=void 0;var t=void 0;var a=void 0;for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];if(4===n.length){e=n[0];t=n[1];a=n[3]}else{e=n[0];t=n[1];a=n[2]}return Object(Xe["a"])({channelId:e,text:t,replyToTs:a})}function wt(e){return Object(Be["b"])(e).name}function St(e){try{var t=JSON.parse(Object(at["f"])(e,"sidebar_theme_custom_values"));return Object(pt["b"])(e)?n()({},t,Object(pt["a"])(t)):t}catch(e){return ut["a"]}}function It(){var e=document.activeElement;var t=Object(T["b"])(e);return Object(T["d"])(e,t.start,t.length)}function Tt(){return false}function At(e,t,a){switch(a){case"prefs":e(Object(xe["a"])());break;case"shortcuts":e(Object(N["h"])());break;default:yt.warn("openDialog failed, unrecognized dialog: "+a);break}}function Nt(){Object(dt["a"])({bustCache:true})}function Pt(e,t){Object(I["b"])();Object(C["b"])();S();e(Object(tt["setActiveTeam"])(t))}var Rt=n()({analytics:new g,nodrag:new y},j,{accessibilitySupportChanged:Ot,canOpenURLInWindow:kt,closeCall:A["a"],focusNextWorkspace:ft,focusPreviousWorkspace:bt,getCurrentUserId:L["getCurrentUserId"],getCurrentUserName:wt,getEnterpriseId:it["a"],getSelectedInputText:It,getThemeValues:St,getTokenFromBootData:L["getTokenFromBootData"],getUserPref:at["f"],handleDeepLinkWithArgs:k["g"],handleDeepLinkFromDesktop:Je,isOnBetaReleaseChannel:Tt,maybeTickleMS:O["a"],notificationActivated:Et,notificationClicked:u["a"],openDialog:At,openFromCmdF:$e["b"],recentMessagesFromCurrentChannel:Ct,reload:ht["b"],replyToNotification:jt,setCurrentMemberPresence:rt["setCurrentMemberPresence"],setFocusedWorkspace:mt,ssbChromeClicked:i["noop"],systemTextSettingsChanged:Nt,teamSelectionChanged:Pt,track:ct["c"],updateDownloadsView:E["b"],updateState:tt["updateFromDesktop"]});var Mt=a(108);var Dt=a(23);var xt=a(27);var Ft=a(374);var Lt={},Bt=Lt.dispatchActionToAllBootedTeams;var Ut=Object(x["b"])("Create a delegate object for interop with the desktop app",function(e,t){if(!Object(Ft["a"])())return;if(!c["isDesktop"]){var a=Object(b["a"])({state:t()});a.track("DESKTOP_SCRIPTS_MISSING");return}window.desktop.delegate||Object.defineProperty(window.desktop,"delegate",{get:function e(){var a=t();var r=Object(Mt["e"])(a)||Object(Dt["c"])(a);return window.desktop.delegates&&window.desktop.delegates[r]},configurable:true});qt(e,t)});Ut.propTypes=null;function qt(e,t){var a=Object(Dt["c"])(t());var r=Gt(e,t);window.desktop.delegates||(window.desktop.delegates={});window.desktop.delegates[a]=r}function Gt(e,t){var a=Rt.accessibilitySupportChanged,r=Rt.canOpenURLInWindow,i=Rt.focusNextWorkspace,s=Rt.focusPreviousWorkspace,o=Rt.getCurrentUserId,c=Rt.getCurrentUserName,u=Rt.getEnterpriseId,d=Rt.getThemeValues,p=Rt.getTokenFromBootData,h=Rt.getUserPref,v=Rt.handleDeepLinkWithArgs,m=Rt.handleDeepLinkFromDesktop,f=Rt.maybeTickleMS,b=Rt.notificationActivated,g=Rt.notificationClicked,_=Rt.openDialog,y=Rt.openFromCmdF,O=Rt.recentMessagesFromCurrentChannel,k=Rt.replyToNotification,E=Rt.setCurrentMemberPresence,C=Rt.setFocusedWorkspace,j=Rt.teamSelectionChanged,w=Rt.updateState,S=l()(Rt,["accessibilitySupportChanged","canOpenURLInWindow","focusNextWorkspace","focusPreviousWorkspace","getCurrentUserId","getCurrentUserName","getEnterpriseId","getThemeValues","getTokenFromBootData","getUserPref","handleDeepLinkWithArgs","handleDeepLinkFromDesktop","maybeTickleMS","notificationActivated","notificationClicked","openDialog","openFromCmdF","recentMessagesFromCurrentChannel","replyToNotification","setCurrentMemberPresence","setFocusedWorkspace","teamSelectionChanged","updateState"]);var I=function t(a){return function(){return e(a.apply(void 0,arguments))}};var T=function e(t){return function(){return Object(xt["b"])().dispatch(t.apply(void 0,arguments))}};var A=function t(a){return function(){if(Object(He["a"])()){var t=Object(xt["b"])();return t.dispatch(Bt(a.apply(void 0,arguments)))}return e(a.apply(void 0,arguments))}};var N=function t(a){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return a.apply(void 0,[e].concat(r))}};var P=function e(a){return function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return a.apply(void 0,[t()].concat(r))}};var R=function a(r){return function(){for(var a=arguments.length,n=Array(a),i=0;i<a;i++)n[i]=arguments[i];return r.apply(void 0,[e,t()].concat(n))}};return n()({accessibilitySupportChanged:I(a),canOpenURLInWindow:P(r),focusNextWorkspace:T(i),focusPreviousWorkspace:T(s),getCurrentUserId:P(o),getCurrentUserName:P(c),getEnterpriseId:P(u),getThemeValues:P(d),getTokenFromBootData:P(p),getUserPref:P(h),handleDeepLinkWithArgs:Object(L["isFeatureEnabled"])(t(),"feature_deeplink_m11n")?I(m):v,maybeTickleMS:A(f),notificationActivated:N(b),notificationActivationHandler:function e(t){var a=t.channelId,r=t.messageTs,n=t.threadTs,i=t.teamId;if(Object(He["a"])())return T(C)({teamId:i}).then(function(){return I(g)({channelId:a,messageTs:r,threadTs:n})});return I(g)({channelId:a,messageTs:r,threadTs:n})},openDialog:R(_),openFromCmdF:I(y),recentMessagesFromCurrentChannel:P(O),replyToNotification:I(k),setCurrentMemberPresence:I(E),setFocusedWorkspace:function e(t){return T(C)({teamId:t})},startSearch:I(y),teamSelectionChanged:N(j),updateState:A(w)},S)}function Wt(e){var t=e.canOpenURLInWindow,a=e.getCurrentUserId,r=e.getSelectedInputText,i=e.getTokenFromBootData,s=e.notificationActivated,o=e.replyToNotification,c=e.openFromCmdF,u=l()(e,["canOpenURLInWindow","getCurrentUserId","getSelectedInputText","getTokenFromBootData","notificationActivated","replyToNotification","openFromCmdF"]);return n()({canUrlBeOpenedInSSBWindow:t,focusTabAndSwitchToChannel:s,getAPIToken:i,getUserId:a,getSelectedInputTxt:r,searchForTxt:c,sendMsgFromUser:function e(t,a,r,n){return o(t,a,n)}},u)}var Ht=a(3959);var Vt=a(505);var Kt=a(441);var zt=a(269);var Yt=a(1563);var Qt=a(1053);var Jt=a(1217);var Zt=a(934);var Xt=a(1828);var $t=a(1344);var ea=a(1856);var ta=a(1057);var aa=a(1531);var ra=a(1532);var na=a(1847);var ia=a(1440);var sa=a(909);var oa=a(717);var la=a(1430);var ca=a(210);var ua=a(1099);var da=a(1547);var pa=a(150);var ha=a(157);var va=new H["b"]("unavailable_channel");var ma={onCloseComplete:P["b"].func,teamName:P["b"].string.isRequired,featureEscGridMigrationsClient:P["b"].bool};var fa={onCloseComplete:i["noop"],featureEscGridMigrationsClient:false};var ba=function(e){G()(t,e);function t(){v()(this,t);return U()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}f()(t,[{key:"render",value:function e(){if(!this.props.featureEscGridMigrationsClient)return null;var t=this.props,a=t.teamName,r=l()(t,["teamName"]);var i=va.t("{teamName} is making some changes to their workspace, so content and conversations shared with them are temporarily unavailable.",{teamName:a});return D.a.createElement(ha["b"],n()({fadeDelay:1e4,type:"error"},r),D.a.createElement("span",null,i))}}]);return t}(M["PureComponent"]);ba.displayName="UnavailableMemberToast";ba.defaultProps=fa;var ga=ba;var _a=Object(x["b"])("Show unavailable member toast",function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.teamId,n=a.featureEscGridMigrationsClient;var i=t();var s=Object(ot["i"])(i,r);var o=Object(lt["getTeamDisplayName"])(s);return e(Object(pa["enqueueToast"])({element:D.a.createElement(ga,{type:"error",teamName:o,featureEscGridMigrationsClient:n})}))});var ya=_a;var Oa=a(1479);var ka=a(1170);var Ea=a(217);var Ca=a(1480);var ja=a(895);var wa=a(686);var Sa=a(44);var Ia=a(1505);var Ta=Object(Ia["a"])(a(3317));var Aa=Object(Ia["a"])(a(3318));var Na=Object(Ia["a"])(a(3319));var Pa=Object(Ia["a"])(a(3320));function Ra(e){var t=s.a.camelCase(e);if(-1===t.indexOf("Store"))return null;t=t.slice(0,t.lastIndexOf("Store"));return t}function Ma(e){return s.a.reduce(e,function(e,t,a){var r=Ra(a);r&&(e[r]=t);return e},{})}var Da=n()({},Ma(Ta),Ma(Na),{unreadsView:{refreshAllUnreads:da["b"]}});var xa=n()({},Ma(Aa),Ma(Pa));Object(Sa["a"])("interop.redux",{configureStore:Ht["a"],createDesktopDelegate:Ut,actions:{sendMessage:Vt["d"],prepareAndSendMessage:Vt["a"],saveMessageEdit:Yt["a"],removeMessageAndTimestamp:Kt["a"],openCustomStatusDialog:Qt["a"],openPrefsModal:xe["a"],openChannelNotificationPrefsModal:Jt["a"],openRequestToJoinWorkspacePermalinkDialog:sa["c"],openFileUploadDialog:Zt["a"],openShareDialog:Fe["a"],getChannelIdForSharing:$t["a"],openRenameFileDialog:ea["a"],openCreateGDocDialog:Xt["a"],openSnippetDialog:ta["a"],universalSearchSetVisible:aa["a"],clearSearchInput:ra["a"],editLastUserMessageText:na["a"],maybeAnimateDeleteMessage:ia["a"],loadEmoji:ua["loadEmoji"],showUnavailableMemberToast:ya},features:Da,getDelegateForLegacy:Wt,middleware:{socketManager:zt},models:n()({},xa,{channelsMeta:{channelNamesToIds:Oa,inviters:ka,mutedChannels:Ea,needsApiMarking:Ca,needsCreatedMessage:ja,prqMetrics:wa},emoji:n()({},xa.emoji,oa,ca,ua,{reducer:la["a"]})}),selectors:{getCurrentModals:F["getCurrentModals"]}})}]),[[3989,0,1]]]);